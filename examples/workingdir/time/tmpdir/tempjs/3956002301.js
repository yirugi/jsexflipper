!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("time_dfp",[],e):"object"==typeof exports?exports.time_dfp=e():t.time_dfp=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="//assets.time.com/draper/",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"logTypes",(function(){return c})),n.d(i,"getRootDomain",(function(){return l})),n.d(i,"isDebugMode",(function(){return d})),n.d(i,"isTestMode",(function(){return u})),n.d(i,"isSecure",(function(){return f})),n.d(i,"getCookie",(function(){return g})),n.d(i,"setCookie",(function(){return p})),n.d(i,"sizeToArray",(function(){return v})),n.d(i,"sizeStringToArray",(function(){return m})),n.d(i,"extend",(function(){return y})),n.d(i,"getUrlTargeting",(function(){return w})),n.d(i,"sanitize",(function(){return b})),n.d(i,"hasSize",(function(){return S})),n.d(i,"unitHasSize",(function(){return E})),n.d(i,"addSize",(function(){return T})),n.d(i,"SponsorType",(function(){return A})),n.d(i,"isSponsored",(function(){return O})),n.d(i,"isLocalStorageAvailable",(function(){return I})),n.d(i,"setAndCheckLocalStorageVars",(function(){return x})),n.d(i,"getDebugMode",(function(){return k})),n.d(i,"hasSlot",(function(){return U})),n.d(i,"refreshWhitelist",(function(){return z})),n.d(i,"refreshableSlots",(function(){return L}));var o=function(t,e){t.forEach((function(t){try{t.apply(window,e)}catch(t){console.error(t)}}))},r=function(){var t={fireEvents:o,preInit:[],onInit:[],onAfterInit:[],onRefresh:[],onSlotRefresh:[],defineSlot:[],beforeDefineSlot:[],afterDefineSlot:[],displaySlot:[],slotOnload:[]};return window.addEventListener("dfp.preInit",(function(e){o(t.preInit,[e.detail.dfp])})),window.addEventListener("dfp.beforeInit",(function(e){o(t.onInit,[e.detail.dfp])})),window.addEventListener("dfp.afterInit",(function(e){o(t.onAfterInit,[e.detail.dfp])})),window.addEventListener("dfp.defineSlot",(function(e){o(t.defineSlot,[e.detail.dfp,e.detail.arg])})),window.addEventListener("dfp.slotBeforeDefine",(function(e){o(t.beforeDefineSlot,[e.detail.dfp,e.detail.arg])})),window.addEventListener("dfp.slotAfterDefine",(function(e){o(t.afterDefineSlot,[e.detail.dfp,e.detail.arg])})),window.addEventListener("dfp.slotBeforeDisplay",(function(e){o(t.displaySlot,[e.detail.dfp,e.detail.arg])})),window.addEventListener("dfp.refresh",(function(e){o(t.onRefresh,[e.detail.dfp,e.detail.arg])})),window.addEventListener("dfp.slotRefresh",(function(e){o(t.onSlotRefresh,[e.detail.dfp,e.detail.arg])})),window.addEventListener("dfp.slotOnload",(function(e){o(t.slotOnload,[e.detail.dfp,e.detail.arg])})),t};function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var c={info:"info",error:"error",amazon:"amazon",indexExchange:"indexExchange",refresh:"refresh"},l=function(){var t=window.location.hostname,e=t.split(".");return void 0===e[1]||1===e.length?t:"".concat(e[e.length-2],".").concat(e[e.length-1])},d=function(){var t=window,e=t.location,n=t.time_dfp;return e.search.includes("debugads")||void 0!==n&&void 0!==n.config&&n.config.debug},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return window.location.search.includes("testads")||void 0!==t.testads},f=function(){return"https:"===window.document.location.protocol},g=function(t){if(!t)return null;var e=window.document.cookie;return decodeURIComponent(e.replace(new RegExp("(?:(?:^|.*;)\\s*".concat(encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&"),"\\s*\\=\\s*([^;]*).*$)|^.*$")),"$1"))||null},p=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:365,i="";if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),i="; expires=".concat(o.toUTCString())}document.cookie="".concat(t,"=").concat(e||"").concat(i,"; path=/")},h=function(t){return Array.isArray(t)?"".concat(t[0],"x").concat(t[1]):t},v=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Array.isArray(t)?"number"==typeof t[0]?e?h(t):[t]:e?t.map(h):t:[]},m=function(t){return Array.isArray(t)?t:t.split("x").map(Number)},y=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Object.assign.apply(Object,[t].concat(n))},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.toString(),e=new URL(t),n=e.host,i=void 0===n?"":n,o=e.pathname,r=void 0===o?"":o,s=e.searchParams;return{Host:i,Path:r.replace(/(.)\/$/,"$1"),Query:a(s.entries())}},b=function(t,e){var n=t;return"string"==typeof t&&(e.convertHyphens&&(n=n.replace(/-/gi,"_")),e.stripNonAlphaNumeric&&(n=n.replace(/[^\w\/]/gi,""))),n},S=function(t,e){var n=v(t);return Array.isArray(n)?n.some((function(t){return t.includes(e)})):n.includes(e)},E=function(t,e){return!(void 0===t.sizes||!t.sizes.some((function(t){return S(t[1],e)})))||S(t.size,e)},T=function(t,e){if(!S(t.size,e)){var n=v(t.size,!1);n.push(e),t.size=n}void 0!==t.sizes&&t.sizes.forEach((function(t){if(!S(t[1],e)){var n=v(t[1],!1);n.push(e),t[1]=n}}))},A={SPONSOR:"SPONSOR",NONE:"NONE"},O=function(t,e){return e[t]===A.SPONSOR},I=function(){var t=window.localStorage;try{return t.setItem("draperTest","1"),t.removeItem("draperTest"),!0}catch(t){return!1}},x=function(){var t=Date.now(),e=!1,n=0;return I()&&(window.localStorage.draperAdSessionTTL||window.localStorage.setItem("draperAdSessionTTL",t+432e5),t>window.localStorage.draperAdSessionTTL&&(e=!0,window.localStorage.setItem("draperAdSessionTTL",t+432e5)),n=e||null===window.localStorage.getItem("draperAdPageCount")?0:parseInt(window.localStorage.draperAdPageCount,10),n++,console.log("PV value set to",n),window.localStorage.setItem("draperAdPageCount",n)),n},k=function(){var t=window,e=t.location,n=t.time_dfp,i=e&&e.href?e.href.substring(e.href.indexOf("debugads=")+9,e.href.length):"";return i?i.split("&")[0]:!(void 0===n||void 0===n.config||!n.config.debugads)&&n.config.debugads},U=function(t,e){return t.some((function(t){return t.id===e}))},z={desktop:{"970x90":!0,"728x90":!0,"970x250":!0,"300x250":!0,"300x600":!0,"160x600":!0},mobile:{"300x50":!0,"320x50":!0,"300x250":!0,"320x480":!0},tablet:{"728x90":!0,"300x600":!0,"300x250":!0}},L=function(t){return t.filter((function(t){return"cm"!==t.dfpSlot.getAdUnitPath().split("/")[2].slice(0,2)&&z[C()][t.tracking.size]}))};var j,D,N=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=i||t.getBoundingClientRect(),r=window.innerHeight||document.documentElement.clientHeight;return n?o.top>=-e&&o.top<=r+e||o.bottom>=-e&&o.bottom<=r+e:o.top>=-e&&o.bottom<=r+e},R=function(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )".concat(e,"( |$)"),"gi").test(t.className)},_=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=["0","false","null","undefined"],i=["1","true"];return!n.includes(String(t).toLowerCase())&&(i.includes(String(t).toLowerCase())||(e?t:Boolean(t)))},C=function(){var t=window.navigator.userAgent,e=g("TI_PREFS");return t.match(/iPad/i)||"tablet"===e?"tablet":t.match(/Mobi/)||"phone"===e||"iphone"===e?"mobile":"desktop"},P=function(t){var e=t;Array.isArray(e)&&(e=e[0]);var n={article:"article",author:"profile",blog:"post",category:"category",channel:"category",collection:"collection","collection-article":"article","collection-post":"article",franchise:"page",home:"homepage",homepage:"homepage",index:"category",list:"app",listicle:"article",longform:"article",magazine:"page",main:"category",page:"page",photos:"photos",post:"post",poy:"article",profile:"profile",Search:"search",section:"category","Section Front":"category",sectionfront:"category",section_front:"category",subchannel:"category",tag:"tag",tags:"tag",topic:"category","topic-page":"category",topic_page:"category",video:"video",video_article:"video_article"};return(e=e.toLowerCase())&&""!==e&&n[e]?n[e]:"none"},B=function(t){void 0===t.config.karma&&(t.config.karma=!1,t.config.karmaKv=!0),void 0===t.config.karmapath&&(t.config.karmapath=!1),t.config.karmapath&&(t.config.karma=!0,t.config.karmaKv=!0,t.config.krux=!0),t.config.karma&&(t.config.setTargeting.ch||(t.config.setTargeting.ch=""),Array.isArray(t.config.setTargeting.ch)&&(t.config.setTargeting.ch=t.config.setTargeting.ch.join("-")),t.config.setTargeting.ctype||(t.config.setTargeting.ctype="none"),t.config.setTargeting.type||(t.config.setTargeting.type=P(t.config.setTargeting.ctype)))},q=function(t,e){if(t.config.karma){var n=P(t.config.setTargeting.ctype),i=t.config.setTargeting.ch?"".concat(t.config.setTargeting.ch,"/"):"";e.karmazone="tim.mdp.".concat("mobile"===C()?"mob":"com","/").concat(i).concat(n),t.config.karmaKv&&(e.targeting.slot=e.id)}},M=function(t,e){t.config.karmapath&&(e.path="/".concat(t.config.dfpId,"/").concat(e.karmazone))},V=function(t){t.onInit.push(B),t.defineSlot.push(q),t.beforeDefineSlot.push(M)};function G(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var J="tgx",F="gpt",W="ads",H={LOAD:"load",INIT:"init",SLEEP:"sleep",WAKE:"wake",CALLED:"called",SLOT_DISPLAY:"display",SLOT_AFTER_DISPLAY:"afterDisplay",SLOT_RENDER_ENDED:"slotRenderEnded",SLOT_ONLOAD:"slotOnload",IMPRESSION_VIEWABLE:"impressionViewable",AUCTIONS:"auctions"},K=[H.SLOT_RENDER_ENDED,H.SLOT_ONLOAD,H.IMPRESSION_VIEWABLE],Q=function(){return Math.round(100*window.performance.now())/100},Y=(G(j={},H.SLOT_RENDER_ENDED,"slot-Rendered"),G(j,H.SLOT_ONLOAD,"slot-Loaded"),G(j,H.IMPRESSION_VIEWABLE,"slot-View"),j),X=function(t,e,n){return{size:n.tracking.size,slotId:n.id,slotName:e.slot.getAdUnitPath(),event:Y[t],service:e.serviceName,advertiserId:e.advertiserId,campaignId:e.campaignId,creativeId:e.creativeId,labelIds:e.labelIds,lineItemId:e.lineItemId,defineTime:n.tracking.define||0,defineActualTime:n.tracking.defineActual||0,displayTime:n.tracking.display||0,renderTime:n.tracking[H.SLOT_RENDER_ENDED]||0,loadTime:n.tracking[H.SLOT_ONLOAD]||0,viewTime:n.tracking[H.IMPRESSION_VIEWABLE]||0}},Z={events:(D={},G(D,J,{}),G(D,F,{}),G(D,W,{}),D),trackEvent:function(t,e,n,i){var o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dfp,i=e.arg,o=$(e,["dfp","arg"]),r={date:Q(),type:t,details:o};return i!==n&&(r.details.arg=i),r}("".concat(t,".").concat(e).concat(void 0===n?"":".".concat(n)),i);return this.events[t]=this.events[t]||{},this.events[t][e]=this.events[t][e]||[],void 0===n?this.events[t][e].push(o):this.events[t][e][n]=o,o}};function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(n),!0).forEach((function(e){nt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function nt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var it=["970x90","728x90","970x250","300x250","300x50","320x50","300x600","320x480","100x1"],ot={adserverRequestSent:!1,aps:!1,prebid:!1},rt=function(t){return t.filter((function(t){return t.adUnit.size&&(Array.isArray(t.adUnit.size[0])?t.adUnit.size.some((function(t){return it.includes(t.join("x"))})):it.includes(t.adUnit.size.join("x")))})).map((function(t){return{dfpSlot:t.dfpSlot,slotID:t.id,slotName:t.id,sizes:Array.isArray(t.adUnit.size[0])?t.adUnit.size.filter((function(t){return Array.isArray(t)&&it.includes(t.join("x"))})):[t.adUnit.size]}}))},at=function(){ot.aps&&ot.prebid&&!0!==ot.adserverRequestSent&&(ot.adserverRequestSent=!0)},st=function(t,e){var n=e.map((function(e){var n=t.getAdUnitByAdId(e);return n.tracking.amazonBidReq=null,n}));!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=rt(e);if(n.length>0){var i=t.sleep(H.AUCTION);window.apstag.fetchBids({slots:n},(function(){window.googletag.cmd.push((function(){window.apstag.setDisplayBids(),ot.aps=!0,at()})),t.wakeup(H.AUCTION,i)}));var o=n.map((function(t){return et({},t.dfpSlot)}));window.pbjs.que.push((function(){window.pbjs.rp.requestBids({callback:function(){ot.prebid=!0,at()},gptSlotObjects:o})}))}}(t,n)},ct=function(t){var e=t.sleep(H.AUCTION);Z.trackEvent(H.AUCTION,H.LOAD,0),window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],window.apstag.init({pubID:"3928",adServer:"googletag",videoAdServer:"DFP",bidTimeout:t.config.sleepTime,gdpr:{cmpTimeout:200}},(function(){Z.trackEvent(H.AUCTION,H.LOAD,1),t.wakeup(H.AUCTION,e)}))},lt=function(t){t.onInit.push(ct),t.onRefresh.push(st)},dt=function(t,e,n){var i=(window.performance.now()-n)/1e3;console.log("dfp.logMsg ".concat(i,": ").concat(t)),void 0!==e&&void 0!==console.timeStamp&&console.timeStamp("dfp.logMsg ".concat(i,": ").concat(t))},ut=function(){var t=performance.timing?(performance.timing.fetchStart-performance.timing.navigationStart)/1e3:window.performance.now();window.addEventListener("dfp.beforeInit",(function(){if(d()){var e={navStart_jsExecute:t,navStart_beforeInit:window.performance.now(),responseStart_beforeInit:window.performance.now()};dt(c.info,"Execution metrics ".concat(JSON.stringify(e)),t),n=".ads-debug-info { position: absolute; overflowY: auto; overflowX: auto; width: 300; height: 200; zIndex: 99999; background-color: yellow; text-align: left}",i=document.head||document.getElementsByTagName("head")[0],(o=document.createElement("style")).type="text/css",o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n)),i.appendChild(o)}var n,i,o})),window.addEventListener("dfp.slotAfterDisplay",(function(t){d()&&function(t){var e=t.adUnit.id,n="".concat(e,"-debuginfo"),i=document.getElementById(n);if(null===i){var o=document.getElementById(e),r='<textarea id="'.concat(n,'" style="height: 20px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: courier; border: 1px solid black; z-index: auto; background-color: rgb(255, 255, 189);">').concat(t.debugcode.join("\n"),"</textarea>");o.insertAdjacentHTML("beforebegin",r),i=document.getElementById(n)}}(t.detail.arg)})),window.addEventListener("dfp.logMsg",(function(e){if(d()){var n=e.detail.dfp.config;dt(e.detail.arg,void 0!==n?n.logtimeline:void 0,t)}}))};function ft(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return gt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var pt=["cid","debugads","utm_medium","utm_campaign"],ht=function(t){var e=t.detail.dfp,n=window.location.pathname.split("/");n=n[n.length-1]?n.slice(1,n.length):n.slice(1,n.length-1),e.config.setTargeting.path=n,e.config.setTargeting.domain=window.location.hostname,w().Query.forEach((function(t){var n=ft(t,2),i=n[0],o=n[1];pt.includes(i)&&(e.config.setTargeting[i]=o)})),e.config.setTargeting.pv=x()},vt=function(t){var e=t.detail.arg;try{e.targeting=Object.assign(e.targeting||{},{id:e.id}),void 0!==e.targeting.sz?e.targeting.sz.includes(",")&&(e.targeting.sz=e.targeting.sz.split(",")):e.targeting.sz=e.oop?"1x1":v(e.size)}catch(t){console.error(t)}},mt=function(){window.addEventListener("dfp.beforeInit",ht,{once:!0,passive:!0}),window.addEventListener("dfp.slotBeforeDefine",vt,{once:!0,passive:!0})},yt=function(t,e,n){var i=document.createElement("div");if(i.setAttribute("id",n),i.setAttribute("style","display:none;width:0px;height:0px"),void 0!==e){var o=document.getElementById(e);null!==o&&o.parentNode.insertBefore(i,o)}else document.body.appendChild(i);t.defineSlot({id:n,oop:!0,targeting:{pos:1}})},wt=function(){var t,e=null,n=0;window.addEventListener("dfp.beforeInit",(function(n){var i=n.detail.dfp;i.getOopSlotId=function(){return e},i.resetOOPSlot=function(n,o){void 0!==n&&n!==e?yt(t=i,o,e=n):function(t,e,n){e&&null!==n&&t.refresh(n)}(i,i.config.refreshoop,e)}})),window.addEventListener("dfp.defineSlot",(function(n){var i=n.detail.arg,o=n.detail.dfp;o.config.oop&&null===e&&(e="oop_".concat(Date.now()),t=o,yt(o,i.id,e))})),window.addEventListener("dfp.refresh",(function(){t&&t.config.oop&&t.config.refreshoop&&n+1e4<Date.now()&&(n=Date.now(),t.refresh(e))}))};function bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function St(t){return function(t){if(Array.isArray(t))return At(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Tt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}return n}(t,e)||Tt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(t,e){if(t){if("string"==typeof t)return At(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?At(t,e):void 0}}function At(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ot(t){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var It,xt=function(){return window.googletag.cmd},kt=function(t){for(var e=[],n=0;n>-1;)(n=t.indexOf("/",n))>-1&&(e.push(n),n++);return e.length>3?t.substring(e[0],e[2]+1)+t.substring(e[2]+1).replace(/\//g,"_"):t},Ut=function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},zt=function(){var t=function(){var t=this;this.dfpUtil=i,this.log(this.dfpUtil.logTypes.info,"Starting up..."),this.config={setTargeting:{},setLocation:"",setUrlTargeting:!1,enableSingleRequest:!1,SRAInitialBatch:!0,collapseEmptyDivs:!1,refreshExisting:!0,disablePublisherConsole:!1,disableInitialLoad:!0,globalVar:"time_dfp",sleepTime:2e3,oop:!0,refreshoop:!1,dfpId:"21801468956",env:"prod",karmapath:!0},this.state={count:0,rendered:0,slots:[],destroyedSlots:[],threads:{main:this.getThreadState()},purge_count:{main:0},purging:{main:!1},enabledService:!1,isValidTraffic:null,pauseIndefinately:!1};var e=window[this.config.globalVar];window[this.config.globalVar]=this,window.__draper__=this,Array.isArray(e)&&e.forEach((function(e){return t.push(e)}))},e=t.prototype;return e.getGptCmd=xt,e.truncateZone=kt,e.getThreadState=function(){return{sleep:0,queue:[],purge_count:0,purging:!1,sleepTimeout:null,sleepInterval:null,sleepStart:null,sleepRound:0}},e.init=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},e,{setTargeting:Object.assign({},e.setTargeting,e.setGlobalTargeting)});if(this.log(this.dfpUtil.logTypes.info,"init()"),Z.trackEvent(J,H.INIT),Object.assign(this.config,n),this.setConfig(),this.fireEvent("preInit",this),this.fireEvent("beforeInit",this),this.updateAdsTargeting(this.config),xt().push((function(){t.log(t.dfpUtil.logTypes.info,"1st DFP Call"),Z.trackEvent(F,H.CALLED)})),Ut()&&xt().push((function(){var t=window.googletag.defineOutOfPageSlot("/21801468956/time.webinterstitial",window.googletag.enums.OutOfPageFormat.INTERSTITIAL);t&&(t.debugcode=[],t.debugcode.push("googletag.defineOutOfPageSlot('".concat(t.path,"', '").concat(t.id,"');")),t.addService(window.googletag.pubads())),window.googletag.pubads().enableSingleRequest(),window.googletag.enableServices()})),this.config.disableInitialLoad&&this.push((function(){xt().push((function(){t.log(t.dfpUtil.logTypes.info,"disableInitialLoad() is set.. need to .refresh() to display ads now."),window.googletag.pubads().disableInitialLoad()}))})),this.config.enableSingleRequest&&this.push((function(){xt().push((function(){t.log(t.dfpUtil.logTypes.info,"enableSingleRequest is set.. in SRA mode"),window.googletag.pubads().enableSingleRequest(),t.log(t.dfpUtil.logTypes.info,"enableSingleRequest is set all slots defined before 1st .display() will be call and rendered all at once")}))})),void 0!==this.config.collapseEmptyDivs){var i=this.config.collapseEmptyDivs||void 0;this.push((function(){xt().push((function(){t.log(t.dfpUtil.logTypes.info,"collapseEmptyDivs is set to: ".concat(t.config.collapseEmptyDivs)),window.googletag.pubads().collapseEmptyDivs(i)}))}))}return xt().push((function(){var e=window.googletag.pubads();K.forEach((function(n){e.addEventListener(n,(function(e){var i=t.getAdUnitBySlot(e.slot);i&&"object"===Ot(i)&&(i.tracking=i.tracking||{},i.tracking[n]=Q(),e.size&&(i.tracking.size=e.size.join("x")),Z.trackEvent(W,n,void 0,X(n,e,i)),t.fireEvent(n,e,{slotId:i.id}))}))}))})),this.push((function(){xt().push((function(){t.log(t.dfpUtil.logTypes.info,"googletag.pubads().setTargeting().."),Object.keys(t.config.setTargeting).forEach((function(e){var n=t.config.setTargeting[e];"number"==typeof n&&(n=String(n)),window.googletag.pubads().setTargeting(e,n)}))}))})),this.push((function(){t.fireEvent("afterInit",t)})),this},e.setConfig=function(){var t=this,e={amazon:!0,ix:!0,ix2:!0,debugads:!0,dfpId:!0,logtimeline:!0,companionslot:!0,optlazy:!0,viewGracePx:!0,pxDivisor:!0,karmapath:!0,adzone:{key:"zone",debugOnly:!0}};w().Query.forEach((function(n){var i=Et(n,2),o=i[0],r=i[1];e[o]&&(r=_(r,!0),!0===e[o]?t.config[o]=r:e[o].debugOnly&&!d()||(t.config[e[o].key]=r))}))},e.pause=function(){var t=!(arguments.length>0&&void 0!==(arguments.length<=0?void 0:arguments[0]))||(arguments.length<=0?void 0:arguments[0]);this.state.pauseIndefinately=t},e.unpause=function(){this.state.pauseIndefinately=!1},e.push=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";this.state.threads[e]||(this.state.threads[e]=this.getThreadState());var n=this.state.threads[e];n.sleep<=0&&!n.purging?t.call(this):n.sleep<=0&&n.purging?(this.log(this.dfpUtil.logTypes.info,"push().. purging queue.. queuing function"),n.queue.push(t)):(this.log(this.dfpUtil.logTypes.info,"push().. in sleep mode.. queuing function"),n.queue.push(t))},e.flush=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main",n=this.state.threads[e];if(!n.purging){this.log(this.dfpUtil.logTypes.info,"Running Queued calls... purge: ".concat(n.purge_count));var i=n.queue;n.queue=[],n.purging=!0;try{i.forEach((function(e){return e.call(t)}))}catch(t){this.log(this.dfpUtil.logTypes.error,"Error trying to wake up running one of the queued function. Purge:".concat(n.purge_count,"\n").concat(t))}this.log(this.dfpUtil.logTypes.info,"Ending Queue purge: ".concat(n.purge_count)),n.purge_count++,n.purging=!1,n.queue.length>0&&n.sleep<=0&&(this.log(this.dfpUtil.logTypes.info,"Calling calls queued during purge."),this.flush(e))}},e.sleep=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config.sleepTime,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";this.state.threads[i]||(this.state.threads[i]=this.getThreadState());var o=this.state.threads[i],r=o.sleepRound,a=t?" - MSG: ".concat(t):"";if(Z.trackEvent(J,H.SLEEP,void 0,{msg:a}),o.sleep>0)return o.sleep++,this.log(this.dfpUtil.logTypes.info,"sleep().. cannot sleep.. already sleeping".concat(a," - SleepRound:").concat(r," - sleeps:").concat(o.sleep)),o.sleepRound;o.sleep++,this.log(this.dfpUtil.logTypes.info,"sleep() for ".concat(n," milliseconds").concat(a," - SleepRound:").concat(r)),o.sleepTimeout=setTimeout((function(){e.log(e.dfpUtil.logTypes.info,"sleep() Timeout Over"),e.wakeup("time_dfp - Sleep Timeout",r,!0,i)}),n);var s=0;return o.sleepStart=Date.now(),o.sleepInterval=setInterval((function(){s++;var t=Date.now();e.log(e.dfpUtil.logTypes.info,"sleepInterval at: ".concat(t-o.sleepStart," interavalRound: ").concat(s)),t-o.sleepStart>n&&(e.log(e.dfpUtil.logTypes.info,"sleep() Interval Over"),e.wakeup("time_dfp - Sleep Timeout",r,!0))}),n/5),o.sleepRound},e.wakeup=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"main",o=this.state.threads[i],r=t?" - MSG: ".concat(t):"";if(Z.trackEvent(J,H.WAKE,void 0,{msg:r,force:n}),void 0===e||e===o.sleepRound){if(o.sleep--,this.log(this.dfpUtil.logTypes.info,"wakeup() ".concat(r," -- Sleeps left: ").concat(o.sleep," -- ").concat(n?" - Forced":"")),o.sleep<=0||n){if(o.sleep=0,window.clearTimeout(o.sleepTimeout),window.clearInterval(o.sleepInterval),o.sleepRound++,this.state.pauseIndefinately)return;this.flush(i)}}else this.log(this.dfpUtil.logTypes.info,"wakeup() ".concat(r," -- Not in sleep round"))},e.setNonPersonalizedAds=function(){var t=this;xt().push((function(){t.log(t.dfpUtil.logTypes.info,"Setting setRequestNonPersonalizedAds(1)"),window.googletag.pubads().setRequestNonPersonalizedAds(1)}))},e.updateAdsTargeting=function(t){var e=this;u(t)&&(this.log(this.dfpUtil.logTypes.info,"updateAdsTargeting() In Test Mode"),void 0!==this.config.testads&&(this.config.setTargeting.test=isNaN(this.config.testads)?1:this.config.testads),w().Query.forEach((function(t){var n=Et(t,2),i=n[0],o=n[1];"testads"===i&&(e.config.setTargeting.test=o)})))},e.adUnitPath=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.zone||this.config.zone;return e=e&&"/"!==e?kt(("/"===e[0]?"":"/")+b(e,{stripNonAlphaNumeric:!0})):"","/".concat(this.config.dfpId,"/").concat(t.sitename||this.config.sitename).concat(e).replace(/\/\//g,"/")},e.getAdSlot=function(t,e){if(void 0===t)return this.state.slots.slice();var n=this.state.slots.findIndex((function(e){return e.id===t})),i=this.state.slots[n];return e&&this.state.slots.splice(n,1),i},e.getAdIdBySlot=function(t){return this.getAdUnitBySlot(t).id},e.getAdUnitByAdId=function(t){return this.state.slots.find((function(e){return e.id===t}))},e.getAdUnitBySlot=function(t){return this.state.slots.find((function(e){return e.dfpSlot===t}))},e.setTargeting=function(t,e){var n=this;void 0===e?xt().push((function(){Object.keys(t).forEach((function(e){n.config.setTargeting[e]=t[e],window.googletag.pubads().setTargeting(e,t[e])}))})):void 0!==e.targeting&&Object.keys(e.targeting).forEach((function(n){t.setTargeting(n,e.targeting[n])}))},e.addSlotTargeting=function(t,e,n){Object.keys(e).forEach((function(n){t.setTargeting(n,e[n])}));var i=this.getAdUnitBySlot(t),o="\nADDITIONAL TARGETING".concat(void 0!==n?"(".concat(n,")"):"",":").concat(JSON.stringify(e),"\n ------ \n");i.debugcode.push(o)},e.defineSlot=function(t){var e,n=this,i=(e=t,JSON.parse(JSON.stringify(e)));void 0!==this.getAdSlot(i.id)&&xt().push((function(){var t=n.getAdSlot(i.id,!0);window.googletag.destroySlots([t.dfpSlot])}));var o={tracking:{define:Q()}};this.fireEvent("defineSlot",i),this.log(this.dfpUtil.logTypes.info,"defineSlot() called for ".concat(i.id," - queuing up")),this.push((function(){xt().push((function(){if(!i.ignore){o.tracking.defineActual=Q();try{i.path=n.adUnitPath(i);var t,e=[];n.fireEvent("slotBeforeDefine",i),o.id=i.id,o.adUnit=i;var r=i.size;if(void 0!==i.sizes&&(t=window.googletag.sizeMapping(),i.sizes.forEach((function(e){var n=Et(e,2),i=n[0],o=n[1];t.addSize(i,o)})),t=t.build()),i.oop?(o.dfpSlot=window.googletag.defineOutOfPageSlot(i.path,i.id),e.push("googletag.defineOutOfPageSlot('".concat(i.path,"', '").concat(i.id,"');"))):(o.dfpSlot=window.googletag.defineSlot(i.path,r,i.id),e.push("googletag.defineSlot('".concat(i.path,"', ").concat(JSON.stringify(i.size),", '").concat(i.id,"');"))),void 0!==t&&(o.dfpSlot.defineSizeMapping(t),e.push("slot.defineSizeMapping(<sizemapping>); sizemapping = ".concat(JSON.stringify(i.sizes)))),n.setTargeting(o.dfpSlot,i),e.push(n.getSlotTargeting(o.dfpSlot)),i.companion&&(o.dfpSlot.addService(window.googletag.companionAds()),e.push(".addService(googletag.companionAds());"),n.state.enabledService=!1,n.log(n.dfpUtil.logTypes.info,"setting dfp.state.enabledService to false, as we have a companion ad and the services needs to be enabled again")),o.dfpSlot.addService(window.googletag.pubads()),e.push(".addService(googletag.pubads());"),n.state.slots.push(o),void 0!==i.collapse){var a;if(Array.isArray(i.collapse))(a=o.dfpSlot).setCollapseEmptyDiv.apply(a,St(i.collapse));else o.dfpSlot.setCollapseEmptyDiv(i.collapse);e.push(".setCollapseEmptyDiv(".concat(i.collapse,")"))}else o.dfpSlot.setCollapseEmptyDiv(),e.push(".setCollapseEmptyDiv();");n.fireEvent("slotAfterDefine",o),o.debugcode=e,n.log(n.dfpUtil.logTypes.info,"slot defined for - ".concat(i.id)),n.config.enableSingleRequest&&!n.config.disableInitialLoad||n.displaySlot(o)}catch(t){n.log(n.dfpUtil.logTypes.error,"error: defineSlot - ","\n".concat(o,"\n"),t)}}}))}))},e.set=function(t,e){this.config[t]=e},e.display=function(t){var e=this;this.log(this.dfpUtil.logTypes.info,".display()"),this.push((function(){xt().push((function(){(e.log(e.dfpUtil.logTypes.info,".display() via gpt.push()"),void 0===t)&&e.getAdSlot().forEach((function(t){e.displaySlot(t)}));if("string"==typeof t){var n=e.getAdSlot(t);e.displaySlot(n)}else Array.isArray(t)&&t.forEach((function(t){var n=e.getAdSlot(t);e.displaySlot(n)}))}))}))},e.displaySlot=function(t){var e=this;!1!==this.state.isValidTraffic?this.push((function(){xt().push((function(){t.tracking.display=Q(),e.log(e.dfpUtil.logTypes.info,"before displaying slot - ".concat(t.id)),e.fireEvent("slotBeforeDisplay",t.dfpSlot),e.log(e.dfpUtil.logTypes.info,"displaying slot - ".concat(t.id)),e.config.disableInitialLoad&&e.log(e.dfpUtil.logTypes.info,"slot - ".concat(t.id," - may not be rendered and need to be refresh()'ed as disableInitialLoad is set.")),e.state.enabledService||(window.googletag.pubads().setPublisherProvidedId(window.globalTI_SID_MD5),window.googletag.enableServices(),e.state.enabledService=!0,e.log(e.dfpUtil.logTypes.info,"Services need to be enabled. - googletag.enableServices();")),e.push((function(){xt().push((function(){e.log(e.dfpUtil.logTypes.info,"gpt .display() - ".concat(t.id)),t.tracking.displayActual=Q(),window.googletag.display(t.id),t.debugcode.push("googletag.display('".concat(t.id,"');")),e.fireEvent("slotAfterDisplay",t)})),xt().push((function(){e.config.disableInitialLoad&&(t.tracking.refresh=Q(),t.adUnit.oop||e.refresh([t.id]))}))}))}))})):this.log(this.dfpUtil.logTypes.info,"display() not fired - IVT - invalid traffic indentified.")},e.getSlotTargeting=function(t){var e=this,n=t.getTargetingKeys(t).reduce((function(e,n){return Object.assign(e,bt({},n,t.getTargeting(n)))}),{}),i=Object.keys(this.config.setTargeting).reduce((function(t,n){return Object.assign(t,bt({},n,e.config.setTargeting[n]))}),{});return"\nTargeting ----\nGLOBAL: ".concat(JSON.stringify(i),"\nSLOT: ").concat(JSON.stringify(n),"\n ------\n")},e.refresh=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!1!==this.state.isValidTraffic?this.push((function(){xt().push((function(){t.fireEvent("refresh",e),t.log(t.dfpUtil.logTypes.refresh,"refresh() slots: ".concat(e));var i=null;if(null!==e)try{"string"==typeof e?i=[t.getAdSlot(e).dfpSlot]:Array.isArray(e)&&(i=e.reduce((function(e,n){return"string"==typeof n&&e.push(t.getAdSlot(n).dfpSlot),e}),[]))}catch(e){t.log(t.dfpUtil.logTypes.error,"Error refreshing slots: ".concat(e))}Array.isArray(i)&&i.forEach((function(e){e.tracking={define:Q()},t.addSlotTargeting(e,{ad_refresh:!0})})),t.push((function(){t.push((function(){xt().push((function(){t.fireEvent("slotRefresh",i),t.log(t.dfpUtil.logTypes.refresh,"dfp refreshing slots"),window.googletag.pubads().refresh(i,{changeCorrelator:n})}))}))}))}))})):this.log(this.dfpUtil.logTypes.refresh,"refresh() not fired - IVT - invalid traffic indentified.")},e.destroy=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.push((function(){xt().push((function(){t.fireEvent("destroy",e),t.log(t.dfpUtil.logTypes.info,"destroy() slots: ".concat(Array.isArray(e)?e.join(","):e));var n=null;if(null!==e)try{n=("string"==typeof e?[e]:e).reduce((function(e,n){return"string"==typeof n&&e.push(t.getAdSlot(n).dfpSlot),e}),[])}catch(e){t.log("Error destroying slots: ".concat(e))}Array.isArray(n)&&n.forEach((function(e){var n=t.getAdUnitBySlot(e);n.tracking.destroy=Q(),t.state.destroyedSlots.push(t.getAdSlot(n.id,!0))})),t.fireEvent("slotDestroy",n),t.log(t.dfpUtil.logTypes.info,"dfp destroying slots"),null===n?(window.googletag.destroySlots(),t.state.destroySlots=t.state.slots,t.state.slots=[]):window.googletag.destroySlots(n)}))}))},e.updateCorrelator=function(){var t=this;this.log(this.dfpUtil.logTypes.info,"updateCorrelator()"),xt().push((function(){t.fireEvent("updateCorrelator"),window.googletag.pubads().updateCorrelator()}))},e.log=function(t,e){var n=k();n=n?n.split(","):["true"],!d()||"true"!==n[0]&&-1===n.indexOf(t)||this.fireEvent("logMsg",e)},e.getEvents=function(){return Z.events},e.fireEvent=function(t,e,n){var i,o=Object.assign({arg:e,dfp:this},n);"function"==typeof window.CustomEvent?i=new window.CustomEvent("dfp.".concat(t),{detail:o}):(i=document.createEvent("CustomEvent")).initCustomEvent("dfp.".concat(t),!0,!0,o),window.dispatchEvent(i)},new t};function Lt(t){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var jt=[],Dt=[],Nt={},Rt={},_t={},Ct=!1,Pt=0,Bt=!1,qt=!1,Mt=!1,Vt=function t(){Ct||(It.unsubscribe("scroll",t),Mt=!1),Ft()},Gt=function(){Mt||(Mt=!0,It.subscribe("scroll",Vt))},$t=function(t){return function(t){var e=1,n=e,i=!1;return void 0!==t.position&&(e=t.position,i=!0),Array.isArray(t.adUnit.size)&&t.adUnit.size.forEach((function(t){var o=t.join("x");void 0===Nt[o]?Nt[o]=e:Nt[o]++,i&&(Nt[o]=e),Nt[o]>n&&(n=Nt[o])})),n}(t)},Jt=function(t){Dt.forEach((function(e,n,i){var o=It;if(!i[n].defined&&e.priority===t){if(void 0!==e.lazy){var r=+e.lazy;if(!N(e.el,r,!0))return Ct=!0,void Gt()}var a,s;e.el.dataset.tgxposition=e.position=e.adUnit.targeting.pos=$t(e),e.updatecorrelator&&(o.push((function(){o.updateCorrelator()})),_t={}),a=e.adUnit,s=!1,Array.isArray(a.size)&&((s=a.size.some((function(t){var e=t.join("x");return void 0!==_t[e]&&_t[e]>=3})))&&(_t={}),a.size.forEach((function(t){var e=t.join("x");void 0===_t[e]?_t[e]=1:_t[e]++}))),s&&o.push((function(){o.updateCorrelator()})),o.push((function(){o.defineSlot(e.adUnit)})),i[n].defined=!0}}))},Ft=function(){Ct=!1,[1,2,3,4,5,6].every((function(t){return!(t>3&&"loading"===document.readyState)&&((!(t>4)||"loading"!==document.readyState&&"interactive"!==document.readyState)&&(!(t>5&&"complete"===!document.readyState)&&(Jt(t),!0)))}))},Wt=function(t){var e={adUnit:{},el:t,defined:!1,autoload:!0};e.adUnit.id=t.getAttribute("id");var n=t.dataset.dimensions;n&&(e.adUnit.size=n.split(";").map((function(t){var e=t.split("x");return[+e[0],+e[1]]})));try{e.adUnit.targeting=t.dataset.tgxtargeting?JSON.parse(decodeURIComponent(t.dataset.tgxtargeting)):{}}catch(t){e.adUnit.targeting={}}"object"!==Lt(e.adUnit.targeting)&&(e.adUnit.targeting={});var i=t.dataset.tgxcmtyp;i&&(e.adUnit.sitename="cm.".concat(Rt.sitename),e.adUnit.targeting.cmtyp=i);var o=t.dataset.tgxcmpos;o&&(e.adUnit.targeting.cmpos=o);var r=t.dataset.tgxnativekey;r&&(e.adUnit.targeting.strnativekey=r),t.dataset.tgxcompanion&&(e.adUnit.companion=!0);var a=t.dataset.tgxposition;a&&(e.position=+a);var s=t.dataset.tgxtrack;s&&("false"!==s&&"0"!==s||(s=!1),e.adUnit.trackView=!!s);var c=t.dataset.tgxlazy;c&&(e.lazy=c);var l=t.dataset.tgxupdatecorrelator;l&&(e.updatecorrelator=l);var d=t.dataset.tgxautoload;return d&&(e.autoload=_(d)),e.priority=t.dataset.tgxpriority?+t.dataset.tgxpriority:2,t.dataset.tgxexclusive&&(e.exclusive=!0),e},Ht=function(t){var e=window.getComputedStyle(t,null).display;return"none"===e||[[0,767,"mobile-ad"],[768,1161,"tablet-ad"],[1024,1/0,"desktop-only"],[1162,1/0,"desktop-ad"]].some((function(n){if(R(t,n[2])){e="none";var i=n[1]<1/0?"(min-width: ".concat(n[0],"px) and (max-width: ").concat(n[1],"px)"):"(min-width: ".concat(n[0],"px)");if(window.matchMedia(i).matches)return e="",!0}return!1})),e},Kt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=-1;return t.some((function(t,n){return t.adUnit.id===e.adUnit.id&&(i=n,!0)})),n&&i>-1&&t.splice(i,1,e),i},Qt=function(t){!function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=document.getElementsByClassName("ad");Array.from(e).forEach((function(e){if(!R(e,"tgx-processed")||t){e.classList.add("tgx-processed");var n,i=Ht(e);n=-1===Kt(jt,Wt(e))?jt.push(Wt(e)):Kt(jt,Wt(e),!0)+1;var o=jt[n-1].autoload;if("none"!==i&&o)-1===Kt(Dt,jt[n-1])?Dt.push(jt[n-1]):Kt(Dt,jt[n-1],!0)+1}}))}("boolean"==typeof t&&t),Ft()},Yt=function(){qt&&Dt.forEach((function(t){var e,n;t.exclusive&&t.el.parentElement&&(e=t.el.parentElement.parentElement,n="closed",e.classList?e.classList.add(n):e.className="".concat(e.className," ").concat(n))}))},Xt=function(){var t=+It.config.minimumAdRefreshTime||2e3,e=Date.now()-Bt;1===++Pt&&e>t?(qt=!0,Yt()):1===Pt&&e<t&&(qt=!0,setTimeout(Yt,t-e))},Zt=function(){Pt--,Bt=Date.now(),Pt<=0&&(qt&&(qt=!1),Dt.forEach((function(t){t.exclusive&&t.el.parentElement&&(It.refresh([t.adUnit.id]),function(t,e){if(t.classList)t.classList.remove(e);else{var n=e.split(" ").join("|");t.className=t.className.replace(new RegExp("(^|\\b)".concat(n,"(\\b|$)"),"gi")," ")}}(t.el.parentElement.parentElement,"closed"))})))},te=function(t){this._dfp=t,this.loadAd()};te.prototype.loadAd=function(t){if(void 0!==t)return t};var ee,ne=["scroll","inView","outView","resize","viewable"],ie={},oe=[],re=function(t,e){return!!ne.includes(t)&&(ie[t].push(e),!0)},ae=function(t,e){if(!ne.includes(t))return!1;var n=ie[t].findIndex((function(t){return t===e}));return n>-1&&ie[t].splice(n,1),!0},se=function(t){ie.scroll.forEach((function(e){try{e.call(void 0,t)}catch(t){ee.log(c.error,"error in scroll event manager")}}))},ce=function(){var t=+ee.config.pxDivisor||1e3;ee.state.slots.forEach((function(e){var n=e.adUnit.id;if(e.adUnit.trackView&&!oe.includes(n)){var i=document.getElementById(n),o=i.getBoundingClientRect();i&&N(i,-o.height/t,!0,o)&&(oe.push(n),ie.inView.forEach((function(t){try{t.call(void 0,e)}catch(t){ee.log(c.error,"error in inView event manager")}})),ee.fireEvent("inView",e,{eventManager:void 0}))}})),oe.forEach((function(e){var n=document.getElementById(e),i=n.getBoundingClientRect();n&&!N(n,-i.height/t,!0,i)&&(oe.splice(oe.indexOf(e),1),ie.outView.forEach((function(t){try{t.call(void 0,ee.getAdSlot(e))}catch(t){ee.log(c.error,"error in outView event manager")}})),ee.fireEvent("outView",ee.getAdSlot(e),{eventManager:void 0}))}))},le=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();return window.TIA=window.TIA||{},window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],Z.trackEvent(J,H.LOAD),V(t),lt(t),ut(),mt(),wt(),zt()}();(ee=le).constructor.prototype.subscribe=re,ee.constructor.prototype.unsubscribe=ae,ne.forEach((function(t){ie[t]=[]})),window.addEventListener("scroll",se),re("scroll",ce),function(t){var e,n=new te(t);It=t,t.constructor.prototype.loadAd=n.loadAd,t.constructor.prototype.processAds=Qt,It.log(c.info,"Scriptless"),e=document.getElementById("tgx-script"),Rt={sitename:"tim",cmsitename:"cm.tim",zone:e.dataset.tgxzone||"",setTargeting:e.dataset.tgxtargeting?JSON.parse(decodeURIComponent(e.dataset.tgxtargeting)):"",optlazy:!e.dataset.tgxoptlazy||_(e.dataset.tgxoptlazy),onetrustEnabled:!!e.dataset.onetrustEnabled&&_(e.dataset.onetrustEnabled),disableScriptGpt:!!e.dataset.disableScriptGpt&&_(e.dataset.disableScriptGpt),disableScriptAps:!!e.dataset.disableScriptAps&&_(e.dataset.disableScriptAps)},It.init(Rt),Rt.onetrustEnabled||document.addEventListener("DOMContentLoaded",(function(){Qt()}),{passive:!0}),Gt(),It.subscribe("inView",Xt),It.subscribe("outView",Zt)}(le);e.default=le}])}));