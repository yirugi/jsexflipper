(()=>{var t={5186:function(t,i){"use strict";var e=this&&this.T||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"B",{value:!0});var s=function(){function t(){}return t.prototype.clone=function(){var t=this,i=new this.constructor;return Object.keys(this).forEach((function(e){var s=t.deepClone(t[e]);void 0!==s&&(i[e]=s)})),i},t.prototype.deepClone=function(t){var i,s,n=typeof t;if("number"===n||"string"===n||"boolean"===n)return t;if(null!==t&&"object"===n){if("function"==typeof t.clone)return t.clone();if(t instanceof Date)return new Date(t.getTime());if(void 0!==t[Symbol.iterator]){var r=[];try{for(var o=e(t),h=o.next();!h.done;h=o.next()){var a=h.value;r.push(this.deepClone(a))}}catch(t){i={error:t}}finally{try{h&&!h.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}return t instanceof Array?r:new t.constructor(r)}var c={};for(var l in t)t.hasOwnProperty(l)&&(c[l]=this.deepClone(t[l]));return c}},t}();i.Cloneable=s},7061:function(t,i,e){"use strict";var s,n=this&&this.R||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),r=this&&this.U||function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))},o=this&&this.W||function(t,i){var e,s,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function h(r){return function(h){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,s&&(n=2&r[0]?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,s=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){o.label=r[1];break}if(6===r[0]&&o.label<n[1]){o.label=n[1],n=r;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(r);break}n[2]&&o.ops.pop(),o.trys.pop();continue}r=i.call(t,o)}catch(t){r=[6,t],s=0}finally{e=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,h])}}};Object.defineProperty(i,"B",{value:!0});var h=e(5186),a=e(5458),c=e(6056),l=e(250),d=function(t){function i(e){var s=t.call(this)||this;s.isReady_=!1,s.isLatest=!1;var n=i.baseUrl;if(s.lang_=i.DEFAULT_LANGUAGE,s.isVendorList(e))s.populate(e),s.readyPromise=Promise.resolve();else{if(!n)throw new a.GVLError("must specify GVL.baseUrl before loading GVL json");if(e>0){var r=e;i.CACHE.has(r)?(s.populate(i.CACHE.get(r)),s.readyPromise=Promise.resolve()):(n+=i.versionedFilename.replace("[VERSION]",r+""),s.readyPromise=s.fetchJson(n))}else i.CACHE.has(i.LATEST_CACHE_KEY)?(s.populate(i.CACHE.get(i.LATEST_CACHE_KEY)),s.readyPromise=Promise.resolve()):(s.isLatest=!0,s.readyPromise=s.fetchJson(n+i.latestFilename))}return s}return n(i,t),Object.defineProperty(i,"baseUrl",{get:function(){return this.baseUrl_},set:function(t){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(t))throw new a.GVLError("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");t.length>0&&"/"!==t[t.length-1]&&(t+="/"),this.baseUrl_=t},enumerable:!0,configurable:!0}),i.emptyLanguageCache=function(t){var e=!1;return void 0===t&&i.LANGUAGE_CACHE.size>0?(i.LANGUAGE_CACHE=new Map,e=!0):"string"==typeof t&&this.consentLanguages.has(t.toUpperCase())&&(i.LANGUAGE_CACHE.delete(t.toUpperCase()),e=!0),e},i.emptyCache=function(t){var e=!1;return Number.isInteger(t)&&t>=0?(i.CACHE.delete(t),e=!0):void 0===t&&(i.CACHE=new Map,e=!0),e},i.prototype.cacheLanguage=function(){i.LANGUAGE_CACHE.has(this.lang_)||i.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})},i.prototype.fetchJson=function(t){return r(this,void 0,void 0,(function(){var i,e;return o(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),i=this.populate,[4,c.Json.fetch(t)];case 1:return i.apply(this,[s.sent()]),[3,3];case 2:throw e=s.sent(),new a.GVLError(e.message);case 3:return[2]}}))}))},i.prototype.getJson=function(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))},i.prototype.changeLanguage=function(t){return r(this,void 0,void 0,(function(){var e,s,n,r,h;return o(this,(function(o){switch(o.label){case 0:if(e=t.toUpperCase(),!i.consentLanguages.has(e))return[3,6];if(e===this.lang_)return[3,5];if(this.lang_=e,!i.LANGUAGE_CACHE.has(e))return[3,1];for(n in s=i.LANGUAGE_CACHE.get(e))s.hasOwnProperty(n)&&(this[n]=s[n]);return[3,5];case 1:r=i.baseUrl+i.languageFilename.replace("[LANG]",t),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.fetchJson(r)];case 3:return o.sent(),this.cacheLanguage(),[3,5];case 4:throw h=o.sent(),new a.GVLError("unable to load language: "+h.message);case 5:return[3,7];case 6:throw new a.GVLError("unsupported language "+t);case 7:return[2]}}))}))},Object.defineProperty(i.prototype,"language",{get:function(){return this.lang_},enumerable:!0,configurable:!0}),i.prototype.isVendorList=function(t){return void 0!==t&&void 0!==t.vendors},i.prototype.populate=function(t){this.purposes=t.purposes,this.specialPurposes=t.specialPurposes,this.features=t.features,this.specialFeatures=t.specialFeatures,this.stacks=t.stacks,this.isVendorList(t)&&(this.gvlSpecificationVersion=t.gvlSpecificationVersion,this.tcfPolicyVersion=t.tcfPolicyVersion,this.vendorListVersion=t.vendorListVersion,this.lastUpdated=t.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=t.vendors,this.fullVendorList=t.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&i.CACHE.set(i.LATEST_CACHE_KEY,this.getJson()),i.CACHE.has(this.vendorListVersion)||i.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()},i.prototype.mapVendors=function(t){var i=this;this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach((function(t){i.byPurposeVendorMap[t]={legInt:new Set,consent:new Set,flexible:new Set}})),Object.keys(this.specialPurposes).forEach((function(t){i.bySpecialPurposeVendorMap[t]=new Set})),Object.keys(this.features).forEach((function(t){i.byFeatureVendorMap[t]=new Set})),Object.keys(this.specialFeatures).forEach((function(t){i.bySpecialFeatureVendorMap[t]=new Set})),Array.isArray(t)||(t=Object.keys(this.fullVendorList).map((function(t){return+t}))),this.vendorIds=new Set(t),this.vendors_=t.reduce((function(t,e){var s=i.vendors_[""+e];return s&&void 0===s.deletedDate&&(s.purposes.forEach((function(t){i.byPurposeVendorMap[t+""].consent.add(e)})),s.specialPurposes.forEach((function(t){i.bySpecialPurposeVendorMap[t+""].add(e)})),s.legIntPurposes.forEach((function(t){i.byPurposeVendorMap[t+""].legInt.add(e)})),s.flexiblePurposes&&s.flexiblePurposes.forEach((function(t){i.byPurposeVendorMap[t+""].flexible.add(e)})),s.features.forEach((function(t){i.byFeatureVendorMap[t+""].add(e)})),s.specialFeatures.forEach((function(t){i.bySpecialFeatureVendorMap[t+""].add(e)})),t[e]=s),t}),{})},i.prototype.getFilteredVendors=function(t,i,e,s){var n=this,r=t.charAt(0).toUpperCase()+t.slice(1),o={};return("purpose"===t&&e?this["by"+r+"VendorMap"][i+""][e]:this["by"+(s?"Special":"")+r+"VendorMap"][i+""]).forEach((function(t){o[t+""]=n.vendors[t+""]})),o},i.prototype.getVendorsWithConsentPurpose=function(t){return this.getFilteredVendors("purpose",t,"consent")},i.prototype.getVendorsWithLegIntPurpose=function(t){return this.getFilteredVendors("purpose",t,"legInt")},i.prototype.getVendorsWithFlexiblePurpose=function(t){return this.getFilteredVendors("purpose",t,"flexible")},i.prototype.getVendorsWithSpecialPurpose=function(t){return this.getFilteredVendors("purpose",t,void 0,!0)},i.prototype.getVendorsWithFeature=function(t){return this.getFilteredVendors("feature",t)},i.prototype.getVendorsWithSpecialFeature=function(t){return this.getFilteredVendors("feature",t,void 0,!0)},Object.defineProperty(i.prototype,"vendors",{get:function(){return this.vendors_},enumerable:!0,configurable:!0}),i.prototype.narrowVendorsTo=function(t){this.mapVendors(t)},Object.defineProperty(i.prototype,"isReady",{get:function(){return this.isReady_},enumerable:!0,configurable:!0}),i.prototype.clone=function(){var t=new i(this.getJson());return this.lang_!==i.DEFAULT_LANGUAGE&&t.changeLanguage(this.lang_),t},i.isInstanceOf=function(t){return"object"==typeof t&&"function"==typeof t.narrowVendorsTo},i.LANGUAGE_CACHE=new Map,i.CACHE=new Map,i.LATEST_CACHE_KEY=0,i.DEFAULT_LANGUAGE="EN",i.consentLanguages=new l.ConsentLanguages,i.latestFilename="vendor-list.json",i.versionedFilename="archives/vendor-list-v[VERSION].json",i.languageFilename="purposes-[LANG].json",i}(h.Cloneable);i.GVL=d},6056:(t,i)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var e=function(){function t(){}return t.absCall=function(t,i,e,s){return new Promise((function(n,r){var o=new XMLHttpRequest;o.withCredentials=e,o.addEventListener("load",(function(){if(o.readyState==XMLHttpRequest.DONE)if(o.status>=200&&o.status<300){var t=o.response;if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}n(t)}else r(new Error("HTTP Status: "+o.status+" response type: "+o.responseType))})),o.addEventListener("error",(function(){r(new Error("error"))})),o.addEventListener("abort",(function(){r(new Error("aborted"))})),null===i?o.open("GET",t,!0):o.open("POST",t,!0),o.responseType="json",o.timeout=s,o.ontimeout=function(){r(new Error("Timeout "+s+"ms "+t))},o.send(i)}))},t.post=function(t,i,e,s){return void 0===e&&(e=!1),void 0===s&&(s=0),this.absCall(t,JSON.stringify(i),e,s)},t.fetch=function(t,i,e){return void 0===i&&(i=!1),void 0===e&&(e=0),this.absCall(t,null,i,e)},t}();i.Json=e},6382:function(t,i,e){"use strict";var s,n=this&&this.R||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"B",{value:!0});var r=e(5186),o=e(5458),h=e(7061),a=e(250),c=function(t){function i(i){var e=t.call(this)||this;return e.isServiceSpecific_=!1,e.supportOOB_=!0,e.useNonStandardStacks_=!1,e.purposeOneTreatment_=!1,e.publisherCountryCode_="AA",e.version_=2,e.consentScreen_=0,e.policyVersion_=2,e.consentLanguage_="EN",e.cmpId_=0,e.cmpVersion_=0,e.vendorListVersion_=0,e.numCustomPurposes_=0,e.specialFeatureOptins=new a.Vector,e.purposeConsents=new a.Vector,e.purposeLegitimateInterests=new a.Vector,e.publisherConsents=new a.Vector,e.publisherLegitimateInterests=new a.Vector,e.publisherCustomConsents=new a.Vector,e.publisherCustomLegitimateInterests=new a.Vector,e.vendorConsents=new a.Vector,e.vendorLegitimateInterests=new a.Vector,e.vendorsDisclosed=new a.Vector,e.vendorsAllowed=new a.Vector,e.publisherRestrictions=new a.PurposeRestrictionVector,i&&(e.gvl=i),e.created=new Date,e.updated(),e}return n(i,t),Object.defineProperty(i.prototype,"gvl",{get:function(){return this.gvl_},set:function(t){h.GVL.isInstanceOf(t)||(t=new h.GVL(t)),this.gvl_=t,this.publisherRestrictions.gvl=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cmpId",{get:function(){return this.cmpId_},set:function(t){if(!(Number.isInteger(+t)&&t>1))throw new o.TCModelError("cmpId",t);this.cmpId_=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cmpVersion",{get:function(){return this.cmpVersion_},set:function(t){if(!(Number.isInteger(+t)&&t>-1))throw new o.TCModelError("cmpVersion",t);this.cmpVersion_=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consentScreen",{get:function(){return this.consentScreen_},set:function(t){if(!(Number.isInteger(+t)&&t>-1))throw new o.TCModelError("consentScreen",t);this.consentScreen_=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consentLanguage",{get:function(){return this.consentLanguage_},set:function(t){this.consentLanguage_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"publisherCountryCode",{get:function(){return this.publisherCountryCode_},set:function(t){if(!/^([A-z]){2}$/.test(t))throw new o.TCModelError("publisherCountryCode",t);this.publisherCountryCode_=t.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vendorListVersion",{get:function(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_},set:function(t){if((t=+t>>0)<0)throw new o.TCModelError("vendorListVersion",t);this.vendorListVersion_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"policyVersion",{get:function(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_},set:function(t){if(this.policyVersion_=parseInt(t,10),this.policyVersion_<0)throw new o.TCModelError("policyVersion",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"version",{get:function(){return this.version_},set:function(t){this.version_=parseInt(t,10)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isServiceSpecific",{get:function(){return this.isServiceSpecific_},set:function(t){this.isServiceSpecific_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useNonStandardStacks",{get:function(){return this.useNonStandardStacks_},set:function(t){this.useNonStandardStacks_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"supportOOB",{get:function(){return this.supportOOB_},set:function(t){this.supportOOB_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"purposeOneTreatment",{get:function(){return this.purposeOneTreatment_},set:function(t){this.purposeOneTreatment_=t},enumerable:!0,configurable:!0}),i.prototype.setAllVendorConsents=function(){this.vendorConsents.set(this.gvl.vendors)},i.prototype.unsetAllVendorConsents=function(){this.vendorConsents.empty()},i.prototype.setAllVendorsDisclosed=function(){this.vendorsDisclosed.set(this.gvl.vendors)},i.prototype.unsetAllVendorsDisclosed=function(){this.vendorsDisclosed.empty()},i.prototype.setAllVendorsAllowed=function(){this.vendorsAllowed.set(this.gvl.vendors)},i.prototype.unsetAllVendorsAllowed=function(){this.vendorsAllowed.empty()},i.prototype.setAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.set(this.gvl.vendors)},i.prototype.unsetAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.empty()},i.prototype.setAllPurposeConsents=function(){this.purposeConsents.set(this.gvl.purposes)},i.prototype.unsetAllPurposeConsents=function(){this.purposeConsents.empty()},i.prototype.setAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.set(this.gvl.purposes)},i.prototype.unsetAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.empty()},i.prototype.setAllSpecialFeatureOptins=function(){this.specialFeatureOptins.set(this.gvl.specialFeatures)},i.prototype.unsetAllSpecialFeatureOptins=function(){this.specialFeatureOptins.empty()},i.prototype.setAll=function(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()},i.prototype.unsetAll=function(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()},Object.defineProperty(i.prototype,"numCustomPurposes",{get:function(){var t=this.numCustomPurposes_;if("object"==typeof this.customPurposes){var i=Object.keys(this.customPurposes).sort((function(t,i){return+t-+i}));t=parseInt(i.pop(),10)}return t},set:function(t){if(this.numCustomPurposes_=parseInt(t,10),this.numCustomPurposes_<0)throw new o.TCModelError("numCustomPurposes",t)},enumerable:!0,configurable:!0}),i.prototype.updated=function(){this.lastUpdated=new Date},i.consentLanguages=h.GVL.consentLanguages,i}(r.Cloneable);i.TCModel=c},2381:(t,i,e)=>{"use strict";var s=e(7170),n=e(250),r=e(2082),o=e(6382),h=function(){function t(){}return t.encode=function(t,i){var e,n,r="";return t=s.SemanticPreEncoder.process(t,i),(n=Array.isArray(null===(e=i)||void 0===e?void 0:e.segments)?i.segments:new s.SegmentSequence(t,i)[""+t.version]).forEach((function(i,e){var o="";e<n.length-1&&(o="."),r+=s.SegmentEncoder.encode(t,i)+o})),r},t.decode=function(t,i){var e=t.split("."),h=e.length;i||(i=new o.TCModel);for(var a=0;a<h;a++){var c=e[a],l=s.Base64Url.decode(c.charAt(0)).substr(0,s.BitLength.segmentType),d=n.SegmentIDs.ID_TO_KEY[r.IntEncoder.decode(l,s.BitLength.segmentType).toString()];s.SegmentEncoder.decode(c,i,d)}return i},t}();i.E=h},4479:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(5458),n=function(){function t(){}return t.encode=function(t){if(!/^[0-1]+$/.test(t))throw new s.EncodingError("Invalid bitField");var i=t.length%this.LCM;t+=i?"0".repeat(this.LCM-i):"";for(var e="",n=0;n<t.length;n+=this.BASIS)e+=this.DICT[parseInt(t.substr(n,this.BASIS),2)];return e},t.decode=function(t){if(!/^[A-Za-z0-9\-_]+$/.test(t))throw new s.DecodingError("Invalidly encoded Base64URL string");for(var i="",e=0;e<t.length;e++){var n=this.REVERSE_DICT.get(t[e]).toString(2);i+="0".repeat(this.BASIS-n.length)+n}return i},t.DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",t.REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]),t.BASIS=6,t.LCM=24,t}();i.Base64Url=n},2219:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(250),n=function(){function t(){}var i,e,n,r,o,h,a,c,l,d,u,p,f,g,m,y,v,b;return i=s.Fields.cmpId,e=s.Fields.cmpVersion,n=s.Fields.consentLanguage,r=s.Fields.consentScreen,o=s.Fields.created,h=s.Fields.isServiceSpecific,a=s.Fields.lastUpdated,c=s.Fields.policyVersion,l=s.Fields.publisherCountryCode,d=s.Fields.publisherLegitimateInterests,u=s.Fields.publisherConsents,p=s.Fields.purposeConsents,f=s.Fields.purposeLegitimateInterests,g=s.Fields.purposeOneTreatment,m=s.Fields.specialFeatureOptins,y=s.Fields.useNonStandardStacks,v=s.Fields.vendorListVersion,b=s.Fields.version,t[i]=12,t[e]=12,t[n]=12,t[r]=6,t[o]=36,t[h]=1,t[a]=36,t[c]=6,t[l]=12,t[d]=24,t[u]=24,t[p]=24,t[f]=24,t[g]=1,t[m]=12,t[y]=1,t[v]=12,t[b]=6,t.anyBoolean=1,t.encodingType=1,t.maxId=16,t.numCustomPurposes=6,t.numEntries=12,t.numRestrictions=12,t.purposeId=6,t.restrictionType=2,t.segmentType=3,t.singleOrRange=1,t.vendorId=16,t}();i.BitLength=n},3858:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(4479),n=e(2219),r=e(9836),o=e(8780),h=e(5458),a=e(4731),c=e(250),l=function(){function t(){}return t.encode=function(t,i){var e,o=this;try{e=this.fieldSequence[""+t.version][i]}catch(e){throw new h.EncodingError("Unable to encode version: "+t.version+", segment: "+i)}var l="";return i!==c.Segment.CORE&&(l=r.IntEncoder.encode(c.SegmentIDs.KEY_TO_ID[i],n.BitLength.segmentType)),e.forEach((function(e){var s=t[e],c=r.FieldEncoderMap[e],d=n.BitLength[e];void 0===d&&o.isPublisherCustom(e)&&(d=+t[a.Fields.numCustomPurposes]);try{l+=c.encode(s,d)}catch(t){throw new h.EncodingError("Error encoding "+i+"->"+e+": "+t.message)}})),s.Base64Url.encode(l)},t.decode=function(t,i,e){var o=this,l=s.Base64Url.decode(t),d=0;return e===c.Segment.CORE&&(i.version=r.IntEncoder.decode(l.substr(d,n.BitLength[a.Fields.version]),n.BitLength[a.Fields.version])),e!==c.Segment.CORE&&(d+=n.BitLength.segmentType),this.fieldSequence[""+i.version][e].forEach((function(t){var e=r.FieldEncoderMap[t],s=n.BitLength[t];if(void 0===s&&o.isPublisherCustom(t)&&(s=+i[a.Fields.numCustomPurposes]),0!==s){var c=l.substr(d,s);if(e===r.VendorVectorEncoder?i[t]=e.decode(c,i.version):i[t]=e.decode(c,s),Number.isInteger(s))d+=s;else{if(!Number.isInteger(i[t].bitLength))throw new h.DecodingError(t);d+=i[t].bitLength}}})),i},t.isPublisherCustom=function(t){return 0===t.indexOf("publisherCustom")},t.fieldSequence=new o.FieldSequence,t}();i.SegmentEncoder=l},818:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(5458),n=e(250),r=function(){function t(){}return t.process=function(t,i){var e,n,r=t.gvl;if(!r)throw new s.EncodingError("Unable to encode TCModel without a GVL");if(!r.isReady)throw new s.EncodingError("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(t=t.clone()).consentLanguage=r.language.toUpperCase(),(null===(e=i)||void 0===e?void 0:e.version)>0&&(null===(n=i)||void 0===n?void 0:n.version)<=this.processor.length?t.version=i.version:t.version=this.processor.length;var o=t.version-1;if(!this.processor[o])throw new s.EncodingError("Invalid version: "+t.version);return this.processor[o](t,r)},t.processor=[function(t){return t},function(t,i){t.publisherRestrictions.gvl=i,t.purposeLegitimateInterests.unset(1);var e=new Map;return e.set("legIntPurposes",t.vendorLegitimateInterests),e.set("purposes",t.vendorConsents),e.forEach((function(e,s){e.forEach((function(r,o){if(r){var h=i.vendors[o];if(!h||h.deletedDate)e.unset(o);else if(0===h[s].length)if("legIntPurposes"===s&&0===h.purposes.length&&0===h.legIntPurposes.length&&h.specialPurposes.length>0);else if(t.isServiceSpecific)if(0===h.flexiblePurposes.length)e.unset(o);else{for(var a=t.publisherRestrictions.getRestrictions(o),c=!1,l=0,d=a.length;l<d&&!c;l++)c=a[l].restrictionType===n.RestrictionType.REQUIRE_CONSENT&&"purposes"===s||a[l].restrictionType===n.RestrictionType.REQUIRE_LI&&"legIntPurposes"===s;c||e.unset(o)}else e.unset(o)}}))})),t.vendorsDisclosed.set(i.vendors),t}],t}();i.SemanticPreEncoder=r},632:(t,i)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var e=function(){function t(){}return t.encode=function(t){return+t+""},t.decode=function(t){return"1"===t},t}();i.BooleanEncoder=e},3101:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(2082),n=e(5458),r=function(){function t(){}return t.encode=function(t,i){return s.IntEncoder.encode(Math.round(t.getTime()/100),i)},t.decode=function(t,i){if(i!==t.length)throw new n.DecodingError("invalid bit length");var e=new Date;return e.setTime(100*s.IntEncoder.decode(t,i)),e},t}();i.DateEncoder=r},286:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(250),n=e(632),r=e(3101),o=e(8937),h=e(2082),a=e(835),c=e(5889),l=e(3283),d=function(){function t(){}var i,e,d,u,p,f,g,m,y,v,b,x,w,_,P,S,A,I,k,C,T,M,E,B,L,O;return i=s.Fields.version,e=s.Fields.created,d=s.Fields.lastUpdated,u=s.Fields.cmpId,p=s.Fields.cmpVersion,f=s.Fields.consentScreen,g=s.Fields.consentLanguage,m=s.Fields.vendorListVersion,y=s.Fields.policyVersion,v=s.Fields.isServiceSpecific,b=s.Fields.useNonStandardStacks,x=s.Fields.specialFeatureOptins,w=s.Fields.purposeConsents,_=s.Fields.purposeLegitimateInterests,P=s.Fields.purposeOneTreatment,S=s.Fields.publisherCountryCode,A=s.Fields.vendorConsents,I=s.Fields.vendorLegitimateInterests,k=s.Fields.publisherRestrictions,C=s.Fields.vendorsDisclosed,T=s.Fields.vendorsAllowed,M=s.Fields.publisherConsents,E=s.Fields.publisherLegitimateInterests,B=s.Fields.numCustomPurposes,L=s.Fields.publisherCustomConsents,O=s.Fields.publisherCustomLegitimateInterests,t[i]=h.IntEncoder,t[e]=r.DateEncoder,t[d]=r.DateEncoder,t[u]=h.IntEncoder,t[p]=h.IntEncoder,t[f]=h.IntEncoder,t[g]=a.LangEncoder,t[m]=h.IntEncoder,t[y]=h.IntEncoder,t[v]=n.BooleanEncoder,t[b]=n.BooleanEncoder,t[x]=o.FixedVectorEncoder,t[w]=o.FixedVectorEncoder,t[_]=o.FixedVectorEncoder,t[P]=n.BooleanEncoder,t[S]=a.LangEncoder,t[A]=l.VendorVectorEncoder,t[I]=l.VendorVectorEncoder,t[k]=c.PurposeRestrictionVectorEncoder,t.segmentType=h.IntEncoder,t[C]=l.VendorVectorEncoder,t[T]=l.VendorVectorEncoder,t[M]=o.FixedVectorEncoder,t[E]=o.FixedVectorEncoder,t[B]=h.IntEncoder,t[L]=o.FixedVectorEncoder,t[O]=o.FixedVectorEncoder,t}();i.FieldEncoderMap=d},8937:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(632),n=e(5458),r=e(250),o=function(){function t(){}return t.encode=function(t,i){for(var e="",n=1;n<=i;n++)e+=s.BooleanEncoder.encode(t.has(n));return e},t.decode=function(t,i){if(t.length!==i)throw new n.DecodingError("bitfield encoding length mismatch");for(var e=new r.Vector,o=1;o<=i;o++)s.BooleanEncoder.decode(t[o-1])&&e.set(o);return e.bitLength=t.length,e},t}();i.FixedVectorEncoder=o},2082:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(5458),n=function(){function t(){}return t.encode=function(t,i){var e;if("string"==typeof t&&(t=parseInt(t,10)),(e=t.toString(2)).length>i||t<0)throw new s.EncodingError(t+" too large to encode into "+i);return e.length<i&&(e="0".repeat(i-e.length)+e),e},t.decode=function(t,i){if(i!==t.length)throw new s.DecodingError("invalid bit length");return parseInt(t,2)},t}();i.IntEncoder=n},835:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(2082),n=e(5458),r=function(){function t(){}return t.encode=function(t,i){var e=(t=t.toUpperCase()).charCodeAt(0)-65,r=t.charCodeAt(1)-65;if(e<0||e>25||r<0||r>25)throw new n.EncodingError("invalid language code: "+t);if(i%2==1)throw new n.EncodingError("numBits must be even, "+i+" is not valid");return i/=2,s.IntEncoder.encode(e,i)+s.IntEncoder.encode(r,i)},t.decode=function(t,i){if(i!==t.length||t.length%2)throw new n.DecodingError("invalid bit length for language");var e=t.length/2,r=s.IntEncoder.decode(t.slice(0,e),e)+65,o=s.IntEncoder.decode(t.slice(e),e)+65;return String.fromCharCode(r)+String.fromCharCode(o)},t}();i.LangEncoder=r},5889:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(2219),n=e(632),r=e(5458),o=e(2082),h=e(250),a=function(){function t(){}return t.encode=function(t){var i=o.IntEncoder.encode(t.numRestrictions,s.BitLength.numRestrictions);return t.isEmpty()||t.getRestrictions().forEach((function(e){i+=o.IntEncoder.encode(e.purposeId,s.BitLength.purposeId),i+=o.IntEncoder.encode(e.restrictionType,s.BitLength.restrictionType);for(var r=t.getVendors(e),h=r.length,a=0,c=0,l="",d=function(i){var e=r[i];0===c&&(a++,c=e);var d=r[h-1],u=t.gvl.vendorIds;if(i===h-1||r[i+1]>function(t){for(;++t<=d&&!u.has(t););return t}(e)){var p=!(e===c);l+=n.BooleanEncoder.encode(p),l+=o.IntEncoder.encode(c,s.BitLength.vendorId),p&&(l+=o.IntEncoder.encode(e,s.BitLength.vendorId)),c=0}},u=0;u<h;u++)d(u);i+=o.IntEncoder.encode(a,s.BitLength.numEntries),i+=l})),i},t.decode=function(t){var i=0,e=new h.PurposeRestrictionVector,a=o.IntEncoder.decode(t.substr(i,s.BitLength.numRestrictions),s.BitLength.numRestrictions);i+=s.BitLength.numRestrictions;for(var c=0;c<a;c++){var l=o.IntEncoder.decode(t.substr(i,s.BitLength.purposeId),s.BitLength.purposeId);i+=s.BitLength.purposeId;var d=o.IntEncoder.decode(t.substr(i,s.BitLength.restrictionType),s.BitLength.restrictionType);i+=s.BitLength.restrictionType;var u=new h.PurposeRestriction(l,d),p=o.IntEncoder.decode(t.substr(i,s.BitLength.numEntries),s.BitLength.numEntries);i+=s.BitLength.numEntries;for(var f=0;f<p;f++){var g=n.BooleanEncoder.decode(t.substr(i,s.BitLength.anyBoolean));i+=s.BitLength.anyBoolean;var m=o.IntEncoder.decode(t.substr(i,s.BitLength.vendorId),s.BitLength.vendorId);if(i+=s.BitLength.vendorId,g){var y=o.IntEncoder.decode(t.substr(i,s.BitLength.vendorId),s.BitLength.vendorId);if(i+=s.BitLength.vendorId,y<m)throw new r.DecodingError("Invalid RangeEntry: endVendorId "+y+" is less than "+m);for(var v=m;v<=y;v++)e.add(v,u)}else e.add(m,u)}}return e.bitLength=i,e},t}();i.PurposeRestrictionVectorEncoder=a},1938:(t,i)=>{"use strict";var e;Object.defineProperty(i,"B",{value:!0}),(e=i.VectorEncodingType||(i.VectorEncodingType={}))[e.FIELD=0]="FIELD",e[e.RANGE=1]="RANGE"},3283:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(250),n=e(7170),r=e(2082),o=e(632),h=e(8937),a=e(1938),c=e(5458),l=function(){function t(){}return t.encode=function(t){var i,e=[],s=[],h=r.IntEncoder.encode(t.maxId,n.BitLength.maxId),c="",l=n.BitLength.maxId+n.BitLength.encodingType,d=l+t.maxId,u=2*n.BitLength.vendorId+n.BitLength.singleOrRange+n.BitLength.numEntries,p=l+n.BitLength.numEntries;return t.forEach((function(r,h){c+=o.BooleanEncoder.encode(r),(i=t.maxId>u&&p<d)&&r&&(t.has(h+1)?0===s.length&&(s.push(h),p+=n.BitLength.singleOrRange,p+=n.BitLength.vendorId):(s.push(h),p+=n.BitLength.vendorId,e.push(s),s=[]))})),i?(h+=a.VectorEncodingType.RANGE+"",h+=this.buildRangeEncoding(e)):(h+=a.VectorEncodingType.FIELD+"",h+=c),h},t.decode=function(t,i){var e,l=0,d=r.IntEncoder.decode(t.substr(l,n.BitLength.maxId),n.BitLength.maxId);l+=n.BitLength.maxId;var u=r.IntEncoder.decode(t.charAt(l),n.BitLength.encodingType);if(l+=n.BitLength.encodingType,u===a.VectorEncodingType.RANGE){if(e=new s.Vector,1===i){if("1"===t.substr(l,1))throw new c.DecodingError("Unable to decode default consent=1");l++}var p=r.IntEncoder.decode(t.substr(l,n.BitLength.numEntries),n.BitLength.numEntries);l+=n.BitLength.numEntries;for(var f=0;f<p;f++){var g=o.BooleanEncoder.decode(t.charAt(l));l+=n.BitLength.singleOrRange;var m=r.IntEncoder.decode(t.substr(l,n.BitLength.vendorId),n.BitLength.vendorId);if(l+=n.BitLength.vendorId,g){var y=r.IntEncoder.decode(t.substr(l,n.BitLength.vendorId),n.BitLength.vendorId);l+=n.BitLength.vendorId;for(var v=m;v<=y;v++)e.set(v)}else e.set(m)}}else{var b=t.substr(l,d);l+=d,e=h.FixedVectorEncoder.decode(b,d)}return e.bitLength=l,e},t.buildRangeEncoding=function(t){var i=t.length,e=r.IntEncoder.encode(i,n.BitLength.numEntries);return t.forEach((function(t){var i=1===t.length;e+=o.BooleanEncoder.encode(!i),e+=r.IntEncoder.encode(t[0],n.BitLength.vendorId),i||(e+=r.IntEncoder.encode(t[1],n.BitLength.vendorId))})),e},t}();i.VendorVectorEncoder=l},9836:(t,i,e)=>{"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"B",{value:!0}),s(e(632)),s(e(3101)),s(e(286)),s(e(8937)),s(e(2082)),s(e(835)),s(e(5889)),s(e(1938)),s(e(3283))},7170:(t,i,e)=>{"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"B",{value:!0}),s(e(4479)),s(e(2219)),s(e(3858)),s(e(818)),s(e(9836)),s(e(8780))},4014:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(250);i.FieldSequence=function(){var t,i;this[1]=((t={})[s.Segment.CORE]=[s.Fields.version,s.Fields.created,s.Fields.lastUpdated,s.Fields.cmpId,s.Fields.cmpVersion,s.Fields.consentScreen,s.Fields.consentLanguage,s.Fields.vendorListVersion,s.Fields.purposeConsents,s.Fields.vendorConsents],t),this[2]=((i={})[s.Segment.CORE]=[s.Fields.version,s.Fields.created,s.Fields.lastUpdated,s.Fields.cmpId,s.Fields.cmpVersion,s.Fields.consentScreen,s.Fields.consentLanguage,s.Fields.vendorListVersion,s.Fields.policyVersion,s.Fields.isServiceSpecific,s.Fields.useNonStandardStacks,s.Fields.specialFeatureOptins,s.Fields.purposeConsents,s.Fields.purposeLegitimateInterests,s.Fields.purposeOneTreatment,s.Fields.publisherCountryCode,s.Fields.vendorConsents,s.Fields.vendorLegitimateInterests,s.Fields.publisherRestrictions],i[s.Segment.PUBLISHER_TC]=[s.Fields.publisherConsents,s.Fields.publisherLegitimateInterests,s.Fields.numCustomPurposes,s.Fields.publisherCustomConsents,s.Fields.publisherCustomLegitimateInterests],i[s.Segment.VENDORS_ALLOWED]=[s.Fields.vendorsAllowed],i[s.Segment.VENDORS_DISCLOSED]=[s.Fields.vendorsDisclosed],i)}},1333:(t,i,e)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var s=e(250);i.SegmentSequence=function(t,i){if(this[1]=[s.Segment.CORE],this[2]=[s.Segment.CORE],2===t.version)if(t.isServiceSpecific)this[2].push(s.Segment.PUBLISHER_TC);else{var e=!(!i||!i.isForVendors);e&&!0!==t[s.Fields.supportOOB]||this[2].push(s.Segment.VENDORS_DISCLOSED),e&&(t[s.Fields.supportOOB]&&t[s.Fields.vendorsAllowed].size>0&&this[2].push(s.Segment.VENDORS_ALLOWED),this[2].push(s.Segment.PUBLISHER_TC))}}},8780:(t,i,e)=>{"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"B",{value:!0}),s(e(4014)),s(e(1333))},1265:function(t,i){"use strict";var e,s=this&&this.R||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)});Object.defineProperty(i,"B",{value:!0});var n=function(t){function i(i){var e=t.call(this,i)||this;return e.name="DecodingError",e}return s(i,t),i}(Error);i.DecodingError=n},5181:function(t,i){"use strict";var e,s=this&&this.R||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)});Object.defineProperty(i,"B",{value:!0});var n=function(t){function i(i){var e=t.call(this,i)||this;return e.name="EncodingError",e}return s(i,t),i}(Error);i.EncodingError=n},9565:function(t,i){"use strict";var e,s=this&&this.R||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)});Object.defineProperty(i,"B",{value:!0});var n=function(t){function i(i){var e=t.call(this,i)||this;return e.name="GVLError",e}return s(i,t),i}(Error);i.GVLError=n},9995:function(t,i){"use strict";var e,s=this&&this.R||(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)});Object.defineProperty(i,"B",{value:!0});var n=function(t){function i(i,e,s){void 0===s&&(s="");var n=t.call(this,"invalid value "+e+" passed for "+i+" "+s)||this;return n.name="TCModelError",n}return s(i,t),i}(Error);i.TCModelError=n},5458:(t,i,e)=>{"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"B",{value:!0}),s(e(1265)),s(e(5181)),s(e(9565)),s(e(9995))},5995:function(t,i,e){"use strict";var s,n=this&&this.R||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"B",{value:!0});var r=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.root=null,i}return n(i,t),i.prototype.isEmpty=function(){return!this.root},i.prototype.add=function(t){var i,e={value:t,left:null,right:null};if(this.isEmpty())this.root=e;else for(i=this.root;;)if(t<i.value){if(null===i.left){i.left=e;break}i=i.left}else{if(!(t>i.value))break;if(null===i.right){i.right=e;break}i=i.right}},i.prototype.get=function(){for(var t=[],i=this.root;i;)if(i.left){for(var e=i.left;e.right&&e.right!=i;)e=e.right;e.right==i?(e.right=null,t.push(i.value),i=i.right):(e.right=i,i=i.left)}else t.push(i.value),i=i.right;return t},i.prototype.contains=function(t){for(var i=!1,e=this.root;e;){if(e.value===t){i=!0;break}t>e.value?e=e.right:t<e.value&&(e=e.left)}return i},i.prototype.min=function(t){var i;for(void 0===t&&(t=this.root);t;)t.left?t=t.left:(i=t.value,t=null);return i},i.prototype.max=function(t){var i;for(void 0===t&&(t=this.root);t;)t.right?t=t.right:(i=t.value,t=null);return i},i.prototype.remove=function(t,i){void 0===i&&(i=this.root);for(var e=null,s="left";i;)if(t<i.value)e=i,i=i.left,s="left";else if(t>i.value)e=i,i=i.right,s="right";else{if(i.left||i.right)if(i.left)if(i.right){var n=this.min(i.right);this.remove(n,i.right),i.value=n}else e?e[s]=i.left:this.root=i.left;else e?e[s]=i.right:this.root=i.right;else e?e[s]=null:this.root=null;i=null}},i}(e(5186).Cloneable);i.BinarySearchTree=r},5301:(t,i)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var e=function(){function t(){}return t.prototype.has=function(i){return t.langSet.has(i)},t.prototype.forEach=function(i){t.langSet.forEach(i)},Object.defineProperty(t.prototype,"size",{get:function(){return t.langSet.size},enumerable:!0,configurable:!0}),t.langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]),t}();i.ConsentLanguages=e},4243:(t,i)=>{"use strict";var e;Object.defineProperty(i,"B",{value:!0}),(e=i.DeviceDisclosureStorageAccessType||(i.DeviceDisclosureStorageAccessType={})).COOKIE="cookie",e.WEB="web",e.APP="app"},4731:(t,i)=>{"use strict";Object.defineProperty(i,"B",{value:!0});var e=function(){function t(){}return t.cmpId="cmpId",t.cmpVersion="cmpVersion",t.consentLanguage="consentLanguage",t.consentScreen="consentScreen",t.created="created",t.supportOOB="supportOOB",t.isServiceSpecific="isServiceSpecific",t.lastUpdated="lastUpdated",t.numCustomPurposes="numCustomPurposes",t.policyVersion="policyVersion",t.publisherCountryCode="publisherCountryCode",t.publisherCustomConsents="publisherCustomConsents",t.publisherCustomLegitimateInterests="publisherCustomLegitimateInterests",t.publisherLegitimateInterests="publisherLegitimateInterests",t.publisherConsents="publisherConsents",t.publisherRestrictions="publisherRestrictions",t.purposeConsents="purposeConsents",t.purposeLegitimateInterests="purposeLegitimateInterests",t.purposeOneTreatment="purposeOneTreatment",t.specialFeatureOptins="specialFeatureOptins",t.useNonStandardStacks="useNonStandardStacks",t.vendorConsents="vendorConsents",t.vendorLegitimateInterests="vendorLegitimateInterests",t.vendorListVersion="vendorListVersion",t.vendorsAllowed="vendorsAllowed",t.vendorsDisclosed="vendorsDisclosed",t.version="version",t}();i.Fields=e},4649:function(t,i,e){"use strict";var s,n=this&&this.R||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"B",{value:!0});var r=e(5186),o=e(5458),h=e(2473),a=function(t){function i(i,e){var s=t.call(this)||this;return void 0!==i&&(s.purposeId=i),void 0!==e&&(s.restrictionType=e),s}return n(i,t),i.unHash=function(t){var e=t.split(this.hashSeparator),s=new i;if(2!==e.length)throw new o.TCModelError("hash",t);return s.purposeId=parseInt(e[0],10),s.restrictionType=parseInt(e[1],10),s},Object.defineProperty(i.prototype,"hash",{get:function(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return""+this.purposeId+i.hashSeparator+this.restrictionType},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"purposeId",{get:function(){return this.purposeId_},set:function(t){this.purposeId_=t},enumerable:!0,configurable:!0}),i.prototype.isValid=function(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===h.RestrictionType.NOT_ALLOWED||this.restrictionType===h.RestrictionType.REQUIRE_CONSENT||this.restrictionType===h.RestrictionType.REQUIRE_LI)},i.prototype.isSameAs=function(t){return this.purposeId===t.purposeId&&this.restrictionType===t.restrictionType},i.hashSeparator="-",i}(r.Cloneable);i.PurposeRestriction=a},7096:function(t,i,e){"use strict";var s,n=this&&this.R||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),r=this&&this.T||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"B",{value:!0});var o=e(4649),h=e(5995),a=e(2473),c=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.bitLength=0,i.map=new Map,i}return n(i,t),i.prototype.has=function(t){return this.map.has(t)},i.prototype.isOkToHave=function(t,i,e){var s,n=!0;if(null===(s=this.gvl)||void 0===s?void 0:s.vendors){var r=this.gvl.vendors[e];if(r)if(t===a.RestrictionType.NOT_ALLOWED)n=r.legIntPurposes.includes(i)||r.purposes.includes(i);else if(r.flexiblePurposes.length)switch(t){case a.RestrictionType.REQUIRE_CONSENT:n=r.flexiblePurposes.includes(i)&&r.legIntPurposes.includes(i);break;case a.RestrictionType.REQUIRE_LI:n=r.flexiblePurposes.includes(i)&&r.purposes.includes(i)}else n=!1;else n=!1}return n},i.prototype.add=function(t,i){if(this.isOkToHave(i.restrictionType,i.purposeId,t)){var e=i.hash;this.has(e)||(this.map.set(e,new h.BinarySearchTree),this.bitLength=0),this.map.get(e).add(t)}},i.prototype.restrictPurposeToLegalBasis=function(t){for(var i=this.gvl.vendorIds,e=t.hash,s=function(){var t,e,s;try{for(var n=r(i),o=n.next();!o.done;o=n.next())s=o.value}catch(i){t={error:i}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return s}(),n=1;n<=s;n++)this.has(e)||(this.map.set(e,new h.BinarySearchTree),this.bitLength=0),this.map.get(e).add(n)},i.prototype.getVendors=function(t){var i=[];if(t){var e=t.hash;this.has(e)&&(i=this.map.get(e).get())}else{var s=new Set;this.map.forEach((function(t){t.get().forEach((function(t){s.add(t)}))})),i=Array.from(s)}return i},i.prototype.getRestrictionType=function(t,i){var e;return this.getRestrictions(t).forEach((function(t){t.purposeId===i&&(void 0===e||e>t.restrictionType)&&(e=t.restrictionType)})),e},i.prototype.vendorHasRestriction=function(t,i){for(var e=!1,s=this.getRestrictions(t),n=0;n<s.length&&!e;n++)e=i.isSameAs(s[n]);return e},i.prototype.getMaxVendorId=function(){var t=0;return this.map.forEach((function(i){t=Math.max(i.max(),t)})),t},i.prototype.getRestrictions=function(t){var i=[];return this.map.forEach((function(e,s){t?e.contains(t)&&i.push(o.PurposeRestriction.unHash(s)):i.push(o.PurposeRestriction.unHash(s))})),i},i.prototype.getPurposes=function(){var t=new Set;return this.map.forEach((function(i,e){t.add(o.PurposeRestriction.unHash(e).purposeId)})),Array.from(t)},i.prototype.remove=function(t,i){var e=i.hash,s=this.map.get(e);s&&(s.remove(t),s.isEmpty()&&(this.map.delete(e),this.bitLength=0))},Object.defineProperty(i.prototype,"gvl",{get:function(){return this.gvl_},set:function(t){var i=this;this.gvl_||(this.gvl_=t,this.map.forEach((function(t,e){var s=o.PurposeRestriction.unHash(e);t.get().forEach((function(e){i.isOkToHave(s.restrictionType,s.purposeId,e)||t.remove(e)}))})))},enumerable:!0,configurable:!0}),i.prototype.isEmpty=function(){return 0===this.map.size},Object.defineProperty(i.prototype,"numRestrictions",{get:function(){return this.map.size},enumerable:!0,configurable:!0}),i}(e(5186).Cloneable);i.PurposeRestrictionVector=c},2473:(t,i)=>{"use strict";var e;Object.defineProperty(i,"B",{value:!0}),(e=i.RestrictionType||(i.RestrictionType={}))[e.NOT_ALLOWED=0]="NOT_ALLOWED",e[e.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",e[e.REQUIRE_LI=2]="REQUIRE_LI"},4858:(t,i)=>{"use strict";var e;Object.defineProperty(i,"B",{value:!0}),(e=i.Segment||(i.Segment={})).CORE="core",e.VENDORS_DISCLOSED="vendorsDisclosed",e.VENDORS_ALLOWED="vendorsAllowed",e.PUBLISHER_TC="publisherTC"},6130:(t,i,e)=>{"use strict";var s;Object.defineProperty(i,"B",{value:!0});var n=e(4858),r=function(){function t(){}return t.ID_TO_KEY=[n.Segment.CORE,n.Segment.VENDORS_DISCLOSED,n.Segment.VENDORS_ALLOWED,n.Segment.PUBLISHER_TC],t.KEY_TO_ID=((s={})[n.Segment.CORE]=0,s[n.Segment.VENDORS_DISCLOSED]=1,s[n.Segment.VENDORS_ALLOWED]=2,s[n.Segment.PUBLISHER_TC]=3,s),t}();i.SegmentIDs=r},6315:function(t,i,e){"use strict";var s,n=this&&this.R||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),r=this&&this.W||function(t,i){var e,s,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function h(r){return function(h){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,s&&(n=2&r[0]?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,s=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){o.label=r[1];break}if(6===r[0]&&o.label<n[1]){o.label=n[1],n=r;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(r);break}n[2]&&o.ops.pop(),o.trys.pop();continue}r=i.call(t,o)}catch(t){r=[6,t],s=0}finally{e=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,h])}}};Object.defineProperty(i,"B",{value:!0});var o=e(5186),h=e(5458),a=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.bitLength=0,i.maxId_=0,i.set_=new Set,i}return n(i,t),i.prototype[Symbol.iterator]=function(){var t;return r(this,(function(i){switch(i.label){case 0:t=1,i.label=1;case 1:return t<=this.maxId?[4,[t,this.has(t)]]:[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}}))},i.prototype.values=function(){return this.set_.values()},Object.defineProperty(i.prototype,"maxId",{get:function(){return this.maxId_},enumerable:!0,configurable:!0}),i.prototype.has=function(t){return this.set_.has(t)},i.prototype.unset=function(t){var i=this;Array.isArray(t)?t.forEach((function(t){return i.unset(t)})):"object"==typeof t?this.unset(Object.keys(t).map((function(t){return+t}))):(this.set_.delete(t),this.bitLength=0,t===this.maxId&&(this.maxId_=0,this.set_.forEach((function(t){i.maxId_=Math.max(i.maxId,t)}))))},i.prototype.isIntMap=function(t){var i=this,e="object"==typeof t;return e&&Object.keys(t).every((function(e){var s=Number.isInteger(parseInt(e,10));return(s=s&&i.isValidNumber(t[e].id))&&void 0!==t[e].name}))},i.prototype.isValidNumber=function(t){return parseInt(t,10)>0},i.prototype.isSet=function(t){var i=!1;return t instanceof Set&&(i=Array.from(t).every(this.isValidNumber)),i},i.prototype.set=function(t){var i=this;if(Array.isArray(t))t.forEach((function(t){return i.set(t)}));else if(this.isSet(t))this.set(Array.from(t));else if(this.isIntMap(t))this.set(Object.keys(t).map((function(t){return+t})));else{if(!this.isValidNumber(t))throw new h.TCModelError("set()",t,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(t),this.maxId_=Math.max(this.maxId,t),this.bitLength=0}},i.prototype.empty=function(){this.set_=new Set},i.prototype.forEach=function(t){for(var i=1;i<=this.maxId;i++)t(this.has(i),i)},Object.defineProperty(i.prototype,"size",{get:function(){return this.set_.size},enumerable:!0,configurable:!0}),i.prototype.setAll=function(t){this.set(t)},i}(o.Cloneable);i.Vector=a},250:(t,i,e)=>{"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"B",{value:!0}),s(e(5995)),s(e(5301)),s(e(4731)),s(e(4649)),s(e(7096)),s(e(4243)),s(e(2473)),s(e(4858)),s(e(6130)),s(e(6315))},4537:t=>{"use strict";t.exports=function(t,i){var e=new Array(arguments.length-1),s=0,n=2,r=!0;for(;n<arguments.length;)e[s++]=arguments[n++];return new Promise((function(n,o){e[s]=function(t){if(r)if(r=!1,t)o(t);else{for(var i=new Array(arguments.length-1),e=0;e<i.length;)i[e++]=arguments[e];n.apply(null,i)}};try{t.apply(i||null,e)}catch(t){r&&(r=!1,o(t))}}))}},7419:(t,i)=>{"use strict";var e=i;e.length=function(t){var i=t.length;if(!i)return 0;for(var e=0;--i%4>1&&"="===t.charAt(i);)++e;return Math.ceil(3*t.length)/4-e};for(var s=new Array(64),n=new Array(123),r=0;r<64;)n[s[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;e.encode=function(t,i,e){for(var n,r=null,o=[],h=0,a=0;i<e;){var c=t[i++];switch(a){case 0:o[h++]=s[c>>2],n=(3&c)<<4,a=1;break;case 1:o[h++]=s[n|c>>4],n=(15&c)<<2,a=2;break;case 2:o[h++]=s[n|c>>6],o[h++]=s[63&c],a=0}h>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,o)),h=0)}return a&&(o[h++]=s[n],o[h++]=61,1===a&&(o[h++]=61)),r?(h&&r.push(String.fromCharCode.apply(String,o.slice(0,h))),r.join("")):String.fromCharCode.apply(String,o.slice(0,h))};var o="invalid encoding";e.decode=function(t,i,e){for(var s,r=e,h=0,a=0;a<t.length;){var c=t.charCodeAt(a++);if(61===c&&h>1)break;if(void 0===(c=n[c]))throw Error(o);switch(h){case 0:s=c,h=1;break;case 1:i[e++]=s<<2|(48&c)>>4,s=c,h=2;break;case 2:i[e++]=(15&s)<<4|(60&c)>>2,s=c,h=3;break;case 3:i[e++]=(3&s)<<6|c,h=0}}if(1===h)throw Error(o);return e-r},e.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},5124:t=>{"use strict";function i(t,e){"string"==typeof t&&(e=t,t=void 0);var s=[];function n(t){if("string"!=typeof t){var e=r();if(i.verbose&&console.log("codegen: "+e),e="return "+e,t){for(var o=Object.keys(t),h=new Array(o.length+1),a=new Array(o.length),c=0;c<o.length;)h[c]=o[c],a[c]=t[o[c++]];return h[c]=e,Function.apply(null,h).apply(null,a)}return Function(e)()}for(var l=new Array(arguments.length-1),d=0;d<l.length;)l[d]=arguments[++d];if(d=0,t=t.replace(/%([%dfijs])/g,(function(t,i){var e=l[d++];switch(i){case"d":case"f":return String(Number(e));case"i":return String(Math.floor(e));case"j":return JSON.stringify(e);case"s":return String(e)}return"%"})),d!==l.length)throw Error("parameter count mismatch");return s.push(t),n}function r(i){return"function "+(i||e||"")+"("+(t&&t.join(",")||"")+"){\n  "+s.join("\n  ")+"\n}"}return n.toString=r,n}t.exports=i,i.verbose=!1},9211:t=>{"use strict";function i(){this.J={}}t.exports=i,i.prototype.on=function(t,i,e){return(this.J[t]||(this.J[t]=[])).push({fn:i,ctx:e||this}),this},i.prototype.off=function(t,i){if(void 0===t)this.J={};else if(void 0===i)this.J[t]=[];else for(var e=this.J[t],s=0;s<e.length;)e[s].fn===i?e.splice(s,1):++s;return this},i.prototype.emit=function(t){var i=this.J[t];if(i){for(var e=[],s=1;s<arguments.length;)e.push(arguments[s++]);for(s=0;s<i.length;)i[s].fn.apply(i[s++].ctx,e)}return this}},9054:(t,i,e)=>{"use strict";t.exports=r;var s=e(4537),n=e(7199)("fs");function r(t,i,e){return"function"==typeof i?(e=i,i={}):i||(i={}),e?!i.xhr&&n&&n.readFile?n.readFile(t,(function(s,n){return s&&"undefined"!=typeof XMLHttpRequest?r.xhr(t,i,e):s?e(s):e(null,i.binary?n:n.toString("utf8"))})):r.xhr(t,i,e):s(r,this,t,i)}r.xhr=function(t,i,e){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState){if(0!==s.status&&200!==s.status)return e(Error("status "+s.status));if(i.binary){var t=s.response;if(!t){t=[];for(var n=0;n<s.responseText.length;++n)t.push(255&s.responseText.charCodeAt(n))}return e(null,"undefined"!=typeof Uint8Array?new Uint8Array(t):t)}return e(null,s.responseText)}},i.binary&&("overrideMimeType"in s&&s.overrideMimeType("text/plain; charset=x-user-defined"),s.responseType="arraybuffer"),s.open("GET",t),s.send()}},945:t=>{"use strict";function i(t){return"undefined"!=typeof Float32Array?function(){var i=new Float32Array([-0]),e=new Uint8Array(i.buffer),s=128===e[3];function n(t,s,n){i[0]=t,s[n]=e[0],s[n+1]=e[1],s[n+2]=e[2],s[n+3]=e[3]}function r(t,s,n){i[0]=t,s[n]=e[3],s[n+1]=e[2],s[n+2]=e[1],s[n+3]=e[0]}function o(t,s){return e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],i[0]}function h(t,s){return e[3]=t[s],e[2]=t[s+1],e[1]=t[s+2],e[0]=t[s+3],i[0]}t.writeFloatLE=s?n:r,t.writeFloatBE=s?r:n,t.readFloatLE=s?o:h,t.readFloatBE=s?h:o}():function(){function i(t,i,e,s){var n=i<0?1:0;if(n&&(i=-i),0===i)t(1/i>0?0:2147483648,e,s);else if(isNaN(i))t(2143289344,e,s);else if(i>34028234663852886e22)t((n<<31|2139095040)>>>0,e,s);else if(i<11754943508222875e-54)t((n<<31|Math.round(i/1401298464324817e-60))>>>0,e,s);else{var r=Math.floor(Math.log(i)/Math.LN2);t((n<<31|r+127<<23|8388607&Math.round(i*Math.pow(2,-r)*8388608))>>>0,e,s)}}function o(t,i,e){var s=t(i,e),n=2*(s>>31)+1,r=s>>>23&255,o=8388607&s;return 255===r?o?NaN:n*(1/0):0===r?1401298464324817e-60*n*o:n*Math.pow(2,r-150)*(o+8388608)}t.writeFloatLE=i.bind(null,e),t.writeFloatBE=i.bind(null,s),t.readFloatLE=o.bind(null,n),t.readFloatBE=o.bind(null,r)}(),"undefined"!=typeof Float64Array?function(){var i=new Float64Array([-0]),e=new Uint8Array(i.buffer),s=128===e[7];function n(t,s,n){i[0]=t,s[n]=e[0],s[n+1]=e[1],s[n+2]=e[2],s[n+3]=e[3],s[n+4]=e[4],s[n+5]=e[5],s[n+6]=e[6],s[n+7]=e[7]}function r(t,s,n){i[0]=t,s[n]=e[7],s[n+1]=e[6],s[n+2]=e[5],s[n+3]=e[4],s[n+4]=e[3],s[n+5]=e[2],s[n+6]=e[1],s[n+7]=e[0]}function o(t,s){return e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],e[4]=t[s+4],e[5]=t[s+5],e[6]=t[s+6],e[7]=t[s+7],i[0]}function h(t,s){return e[7]=t[s],e[6]=t[s+1],e[5]=t[s+2],e[4]=t[s+3],e[3]=t[s+4],e[2]=t[s+5],e[1]=t[s+6],e[0]=t[s+7],i[0]}t.writeDoubleLE=s?n:r,t.writeDoubleBE=s?r:n,t.readDoubleLE=s?o:h,t.readDoubleBE=s?h:o}():function(){function i(t,i,e,s,n,r){var o=s<0?1:0;if(o&&(s=-s),0===s)t(0,n,r+i),t(1/s>0?0:2147483648,n,r+e);else if(isNaN(s))t(0,n,r+i),t(2146959360,n,r+e);else if(s>17976931348623157e292)t(0,n,r+i),t((o<<31|2146435072)>>>0,n,r+e);else{var h;if(s<22250738585072014e-324)t((h=s/5e-324)>>>0,n,r+i),t((o<<31|h/4294967296)>>>0,n,r+e);else{var a=Math.floor(Math.log(s)/Math.LN2);1024===a&&(a=1023),t(4503599627370496*(h=s*Math.pow(2,-a))>>>0,n,r+i),t((o<<31|a+1023<<20|1048576*h&1048575)>>>0,n,r+e)}}}function o(t,i,e,s,n){var r=t(s,n+i),o=t(s,n+e),h=2*(o>>31)+1,a=o>>>20&2047,c=4294967296*(1048575&o)+r;return 2047===a?c?NaN:h*(1/0):0===a?5e-324*h*c:h*Math.pow(2,a-1075)*(c+4503599627370496)}t.writeDoubleLE=i.bind(null,e,0,4),t.writeDoubleBE=i.bind(null,s,4,0),t.readDoubleLE=o.bind(null,n,0,4),t.readDoubleBE=o.bind(null,r,4,0)}(),t}function e(t,i,e){i[e]=255&t,i[e+1]=t>>>8&255,i[e+2]=t>>>16&255,i[e+3]=t>>>24}function s(t,i,e){i[e]=t>>>24,i[e+1]=t>>>16&255,i[e+2]=t>>>8&255,i[e+3]=255&t}function n(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16|t[i+3]<<24)>>>0}function r(t,i){return(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3])>>>0}t.exports=i(i)},7199:t=>{"use strict";function i(t){try{var i=eval("quire".replace(/^/,"re"))(t);if(i&&(i.length||Object.keys(i).length))return i}catch(t){}return null}t.exports=i},8626:(t,i)=>{"use strict";var e=i,s=e.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t)},n=e.normalize=function(t){var i=(t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),e=s(t),n="";e&&(n=i.shift()+"/");for(var r=0;r<i.length;)".."===i[r]?r>0&&".."!==i[r-1]?i.splice(--r,2):e?i.splice(r,1):++r:"."===i[r]?i.splice(r,1):++r;return n+i.join("/")};e.resolve=function(t,i,e){return e||(i=n(i)),s(i)?i:(e||(t=n(t)),(t=t.replace(/(?:\/|^)[^/]+$/,"")).length?n(t+"/"+i):i)}},6662:t=>{"use strict";t.exports=function(t,i,e){var s=e||8192,n=s>>>1,r=null,o=s;return function(e){if(e<1||e>n)return t(e);o+e>s&&(r=t(s),o=0);var h=i.call(r,o,o+=e);return 7&o&&(o=1+(7|o)),h}}},4997:(t,i)=>{"use strict";var e=i;e.length=function(t){for(var i=0,e=0,s=0;s<t.length;++s)(e=t.charCodeAt(s))<128?i+=1:e<2048?i+=2:55296==(64512&e)&&56320==(64512&t.charCodeAt(s+1))?(++s,i+=4):i+=3;return i},e.read=function(t,i,e){if(e-i<1)return"";for(var s,n=null,r=[],o=0;i<e;)(s=t[i++])<128?r[o++]=s:s>191&&s<224?r[o++]=(31&s)<<6|63&t[i++]:s>239&&s<365?(s=((7&s)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536,r[o++]=55296+(s>>10),r[o++]=56320+(1023&s)):r[o++]=(15&s)<<12|(63&t[i++])<<6|63&t[i++],o>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,r)),o=0);return n?(o&&n.push(String.fromCharCode.apply(String,r.slice(0,o))),n.join("")):String.fromCharCode.apply(String,r.slice(0,o))},e.write=function(t,i,e){for(var s,n,r=e,o=0;o<t.length;++o)(s=t.charCodeAt(o))<128?i[e++]=s:s<2048?(i[e++]=s>>6|192,i[e++]=63&s|128):55296==(64512&s)&&56320==(64512&(n=t.charCodeAt(o+1)))?(s=65536+((1023&s)<<10)+(1023&n),++o,i[e++]=s>>18|240,i[e++]=s>>12&63|128,i[e++]=s>>6&63|128,i[e++]=63&s|128):(i[e++]=s>>12|224,i[e++]=s>>6&63|128,i[e++]=63&s|128);return e-r}},7501:function(t,i,e){var s;t=e.nmd(t),function(n){var r=i,o=(t&&t.exports,"object"==typeof e.g&&e.g);o.global!==o&&o.window;var h=function(t){this.message=t};(h.prototype=new Error).name="InvalidCharacterError";var a=function(t){throw new h(t)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,d={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&a("The string to be encoded contains characters outside of the Latin1 range.");for(var i,e,s,n,r=t.length%3,o="",h=-1,l=t.length-r;++h<l;)i=t.charCodeAt(h)<<16,e=t.charCodeAt(++h)<<8,s=t.charCodeAt(++h),o+=c.charAt((n=i+e+s)>>18&63)+c.charAt(n>>12&63)+c.charAt(n>>6&63)+c.charAt(63&n);return 2==r?(i=t.charCodeAt(h)<<8,e=t.charCodeAt(++h),o+=c.charAt((n=i+e)>>10)+c.charAt(n>>4&63)+c.charAt(n<<2&63)+"="):1==r&&(n=t.charCodeAt(h),o+=c.charAt(n>>2)+c.charAt(n<<4&63)+"=="),o},decode:function(t){var i=(t=String(t).replace(l,"")).length;i%4==0&&(i=(t=t.replace(/==?$/,"")).length),(i%4==1||/[^+a-zA-Z0-9/]/.test(t))&&a("Invalid character: the string to be decoded is not correctly encoded.");for(var e,s,n=0,r="",o=-1;++o<i;)s=c.indexOf(t.charAt(o)),e=n%4?64*e+s:s,n++%4&&(r+=String.fromCharCode(255&e>>(-2*n&6)));return r},version:"0.1.0"};void 0===(s=function(){return d}.call(i,e,i,t))||(t.exports=s)}()},6658:(t,i,e)=>{"use strict";var s=e(3090),n=s.decodeBitsToIds,r=s.decodeFromBase64;t.exports={decodeConsentString:function(t){var i=r(t),e=i.version,s=i.cmpId,o=i.vendorListVersion,h=i.purposeIdBitString,a=i.maxVendorId,c=i.created,l=i.lastUpdated,d=i.isRange,u=i.defaultConsent,p=i.vendorIdBitString,f=i.vendorRangeList,g=i.cmpVersion,m=i.consentScreen,y=i.consentLanguage,v={version:e,cmpId:s,vendorListVersion:o,allowedPurposeIds:n(h),maxVendorId:a,created:c,lastUpdated:l,cmpVersion:g,consentScreen:m,consentLanguage:y};if(d){var b=f.reduce((function(t,i){for(var e=i.isRange,s=i.startVendorId,n=i.endVendorId,r=e?n:s,o=s;o<=r;o+=1)t[o]=!0;return t}),{});v.allowedVendorIds=[];for(var x=1;x<=a;x+=1)(u&&!b[x]||!u&&b[x])&&-1===v.allowedVendorIds.indexOf(x)&&v.allowedVendorIds.push(x)}else v.allowedVendorIds=n(p);return v}}},8462:(t,i,e)=>{"use strict";var s=e(6658).decodeConsentString;t.exports={decodeConsentString:s}},3090:(t,i,e)=>{"use strict";var s=e(7501),n=e(3977),r=n.versionNumBits,o=n.vendorVersionMap;function h(t,i,e){return parseInt(t.substr(i,e),2)}function a(t,i,e){return new Date(100*h(t,i,e))}function c(t){var i=h(t);return String.fromCharCode(i+65).toLowerCase()}function l(t,i,e){var s=t.substr(i,e);return c(s.slice(0,e/2))+c(s.slice(e/2))}function d(t){var i=t.input,e=t.output,s=t.startPosition,n=t.field,r=n.type,o=n.numBits,c=n.decoder,d=n.validator,p=n.listCount;if("function"==typeof d&&!d(e))return{newPosition:s};if("function"==typeof c)return c(i,e,s);var f,g,m="function"==typeof o?o(e):o;switch(r){case"int":return{fieldValue:h(i,s,m)};case"bool":return{fieldValue:(f=i,g=s,1===parseInt(f.substr(g,1),2))};case"date":return{fieldValue:a(i,s,m)};case"bits":return{fieldValue:i.substr(s,m)};case"list":return function(t,i,e,s,n){var r=0;"function"==typeof n?r=n(i):"number"==typeof n&&(r=n);for(var o=e,h=[],a=0;a<r;a+=1){var c=u({input:t,fields:s.fields,startPosition:o});o=c.newPosition,h.push(c.decodedObject)}return{fieldValue:h,newPosition:o}}(i,e,s,n,p);case"language":return{fieldValue:l(i,s,m)};default:throw new Error("ConsentString - Unknown field type "+r+" for decoding")}}function u(t){var i=t.input,e=t.fields,s=t.startPosition,n=void 0===s?0:s;return{decodedObject:e.reduce((function(t,e){var s=e.name,r=e.numBits,o=d({input:i,output:t,startPosition:n,field:e}),h=o.fieldValue,a=o.newPosition;return void 0!==h&&(t[s]=h),void 0!==a?n=a:"number"==typeof r&&(n+=r),t}),{}),newPosition:n}}t.exports={decodeBitsToIds:function(t){return t.split("").reduce((function(t,i,e){return"1"===i&&-1===t.indexOf(e+1)&&t.push(e+1),t}),[])},decodeFromBase64:function(t,i){for(var e=t;e.length%4!=0;)e+="=";e=e.replace(/-/g,"+").replace(/_/g,"/");for(var n,a,c=s.decode(e),l="",d=0;d<c.length;d+=1){var p=c.charCodeAt(d).toString(2);l+=(n=p,a=8-p.length,function(t){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",e="",s=0;s<t;s+=1)e+=i;return e}(Math.max(0,a))+n)}return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,e=h(t,0,r);if("number"!=typeof e)throw new Error("ConsentString - Unknown version number in the string to decode");if(!o[e])throw new Error("ConsentString - Unsupported version "+e+" in the string to decode");var s=i[e].fields;return u({input:t,fields:s}).decodedObject}(l,i)}}},3977:t=>{"use strict";t.exports={versionNumBits:6,vendorVersionMap:{1:{version:1,metadataFields:["version","created","lastUpdated","cmpId","cmpVersion","consentScreen","vendorListVersion"],fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16},{name:"isRange",type:"bool",numBits:1},{name:"vendorIdBitString",type:"bits",numBits:function(t){return t.maxVendorId},validator:function(t){return!t.isRange}},{name:"defaultConsent",type:"bool",numBits:1,validator:function(t){return t.isRange}},{name:"numEntries",numBits:12,type:"int",validator:function(t){return t.isRange}},{name:"vendorRangeList",type:"list",listCount:function(t){return t.numEntries},validator:function(t){return t.isRange},fields:[{name:"isRange",type:"bool",numBits:1},{name:"startVendorId",type:"int",numBits:16},{name:"endVendorId",type:"int",numBits:16,validator:function(t){return t.isRange}}]}]}}}},4492:(t,i,e)=>{"use strict";t.exports=e(8836)},3996:(t,i,e)=>{"use strict";var s=i,n=e(7025),r=e(9935);function o(t,i,e,s){if(i.resolvedType)if(i.resolvedType instanceof n){t("switch(d%s){",s);for(var r=i.resolvedType.values,o=Object.keys(r),h=0;h<o.length;++h)i.repeated&&r[o[h]]===i.typeDefault&&t("default:"),t("case%j:",o[h])("case %i:",r[o[h]])("m%s=%j",s,r[o[h]])("break");t("}")}else t('if(typeof d%s!=="object")',s)("throw TypeError(%j)",i.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",s,e,s);else{var a=!1;switch(i.type){case"double":case"float":t("m%s=Number(d%s)",s,s);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",s,s);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",s,s);break;case"uint64":a=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",s,s,a)('else if(typeof d%s==="string")',s)("m%s=parseInt(d%s,10)",s,s)('else if(typeof d%s==="number")',s)("m%s=d%s",s,s)('else if(typeof d%s==="object")',s)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",s,s,s,a?"true":"");break;case"bytes":t('if(typeof d%s==="string")',s)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",s,s,s)("else if(d%s.length)",s)("m%s=d%s",s,s);break;case"string":t("m%s=String(d%s)",s,s);break;case"bool":t("m%s=Boolean(d%s)",s,s)}}return t}function h(t,i,e,s){if(i.resolvedType)i.resolvedType instanceof n?t("d%s=o.enums===String?types[%i].values[m%s]:m%s",s,e,s,s):t("d%s=types[%i].toObject(m%s,o)",s,e,s);else{var r=!1;switch(i.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",s,s,s,s);break;case"uint64":r=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',s)("d%s=o.longs===String?String(m%s):m%s",s,s,s)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",s,s,s,s,r?"true":"",s);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",s,s,s,s,s);break;default:t("d%s=m%s",s,s)}}return t}s.fromObject=function(t){var i=t.fieldsArray,e=r.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!i.length)return e("return new this.ctor");e("var m=new this.ctor");for(var s=0;s<i.length;++s){var h=i[s].resolve(),a=r.safeProp(h.name);h.map?(e("if(d%s){",a)('if(typeof d%s!=="object")',a)("throw TypeError(%j)",h.fullName+": object expected")("m%s={}",a)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",a),o(e,h,s,a+"[ks[i]]")("}")("}")):h.repeated?(e("if(d%s){",a)("if(!Array.isArray(d%s))",a)("throw TypeError(%j)",h.fullName+": array expected")("m%s=[]",a)("for(var i=0;i<d%s.length;++i){",a),o(e,h,s,a+"[i]")("}")("}")):(h.resolvedType instanceof n||e("if(d%s!=null){",a),o(e,h,s,a),h.resolvedType instanceof n||e("}"))}return e("return m")},s.toObject=function(t){var i=t.fieldsArray.slice().sort(r.compareFieldsById);if(!i.length)return r.codegen()("return {}");for(var e=r.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),s=[],o=[],a=[],c=0;c<i.length;++c)i[c].partOf||(i[c].resolve().repeated?s:i[c].map?o:a).push(i[c]);if(s.length){for(e("if(o.arrays||o.defaults){"),c=0;c<s.length;++c)e("d%s=[]",r.safeProp(s[c].name));e("}")}if(o.length){for(e("if(o.objects||o.defaults){"),c=0;c<o.length;++c)e("d%s={}",r.safeProp(o[c].name));e("}")}if(a.length){for(e("if(o.defaults){"),c=0;c<a.length;++c){var l=a[c],d=r.safeProp(l.name);if(l.resolvedType instanceof n)e("d%s=o.enums===String?%j:%j",d,l.resolvedType.valuesById[l.typeDefault],l.typeDefault);else if(l.long)e("if(util.Long){")("var n=new util.Long(%i,%i,%j)",l.typeDefault.low,l.typeDefault.high,l.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,l.typeDefault.toString(),l.typeDefault.toNumber());else if(l.bytes){var u="["+Array.prototype.slice.call(l.typeDefault).join(",")+"]";e("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,l.typeDefault))("else{")("d%s=%s",d,u)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else e("d%s=%j",d,l.typeDefault)}e("}")}var p=!1;for(c=0;c<i.length;++c){l=i[c];var f=t.K.indexOf(l);d=r.safeProp(l.name);l.map?(p||(p=!0,e("var ks2")),e("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),h(e,l,f,d+"[ks2[j]]")("}")):l.repeated?(e("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),h(e,l,f,d+"[j]")("}")):(e("if(m%s!=null&&m.hasOwnProperty(%j)){",d,l.name),h(e,l,f,d),l.partOf&&e("if(o.oneofs)")("d%s=%j",r.safeProp(l.partOf.name),l.name)),e("}")}return e("return d")}},5305:(t,i,e)=>{"use strict";t.exports=function(t){var i=r.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter((function(t){return t.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&i("if((t&7)===4)")("break");i("switch(t>>>3){");for(var e=0;e<t.fieldsArray.length;++e){var h=t.K[e].resolve(),a=h.resolvedType instanceof s?"int32":h.type,c="m"+r.safeProp(h.name);i("case %i:",h.id),h.map?(i("if(%s===util.emptyObject)",c)("%s={}",c)("var c2 = r.uint32()+r.pos"),void 0!==n.defaults[h.keyType]?i("k=%j",n.defaults[h.keyType]):i("k=null"),void 0!==n.defaults[a]?i("value=%j",n.defaults[a]):i("value=null"),i("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",h.keyType)("case 2:"),void 0===n.basic[a]?i("value=types[%i].decode(r,r.uint32())",e):i("value=r.%s()",a),i("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==n.long[h.keyType]?i('%s[typeof k==="object"?util.longToHash(k):k]=value',c):i("%s[k]=value",c)):h.repeated?(i("if(!(%s&&%s.length))",c,c)("%s=[]",c),void 0!==n.packed[a]&&i("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",c,a)("}else"),void 0===n.basic[a]?i(h.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",c,e):i("%s.push(r.%s())",c,a)):void 0===n.basic[a]?i(h.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",c,e):i("%s=r.%s()",c,a),i("break")}for(i("default:")("r.skipType(t&7)")("break")("}")("}"),e=0;e<t.K.length;++e){var l=t.K[e];l.required&&i("if(!m.hasOwnProperty(%j))",l.name)("throw util.ProtocolError(%j,{instance:m})",o(l))}return i("return m")};var s=e(7025),n=e(7063),r=e(9935);function o(t){return"missing required '"+t.name+"'"}},4928:(t,i,e)=>{"use strict";t.exports=function(t){for(var i,e=r.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),h=t.fieldsArray.slice().sort(r.compareFieldsById),a=0;a<h.length;++a){var c=h[a].resolve(),l=t.K.indexOf(c),d=c.resolvedType instanceof s?"int32":c.type,u=n.basic[d];i="m"+r.safeProp(c.name),c.map?(e("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",i,c.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",i)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(c.id<<3|2)>>>0,8|n.mapKey[c.keyType],c.keyType),void 0===u?e("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",l,i):e(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|u,d,i),e("}")("}")):c.repeated?(e("if(%s!=null&&%s.length){",i,i),c.packed&&void 0!==n.packed[d]?e("w.uint32(%i).fork()",(c.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",i)("w.%s(%s[i])",d,i)("w.ldelim()"):(e("for(var i=0;i<%s.length;++i)",i),void 0===u?o(e,c,l,i+"[i]"):e("w.uint32(%i).%s(%s[i])",(c.id<<3|u)>>>0,d,i)),e("}")):(c.optional&&e("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",i,c.name),void 0===u?o(e,c,l,i):e("w.uint32(%i).%s(%s)",(c.id<<3|u)>>>0,d,i))}return e("return w")};var s=e(7025),n=e(7063),r=e(9935);function o(t,i,e,s){return i.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",e,s,(i.id<<3|3)>>>0,(i.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",e,s,(i.id<<3|2)>>>0)}},7025:(t,i,e)=>{"use strict";t.exports=o;var s=e(3243);((o.prototype=Object.create(s.prototype)).constructor=o).className="Enum";var n=e(9313),r=e(9935);function o(t,i,e,n,r){if(s.call(this,t,e),i&&"object"!=typeof i)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=r||{},this.reserved=void 0,i)for(var o=Object.keys(i),h=0;h<o.length;++h)"number"==typeof i[o[h]]&&(this.valuesById[this.values[o[h]]=i[o[h]]]=o[h])}o.fromJSON=function(t,i){var e=new o(t,i.values,i.options,i.comment,i.comments);return e.reserved=i.reserved,e},o.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return r.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",i?this.comment:void 0,"comments",i?this.comments:void 0])},o.prototype.add=function(t,i,e){if(!r.isString(t))throw TypeError("name must be a string");if(!r.isInteger(i))throw TypeError("id must be an integer");if(void 0!==this.values[t])throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(i))throw Error("id "+i+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(void 0!==this.valuesById[i]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+i+" in "+this);this.values[t]=i}else this.valuesById[this.values[t]=i]=t;return this.comments[t]=e||null,this},o.prototype.remove=function(t){if(!r.isString(t))throw TypeError("name must be a string");var i=this.values[t];if(null==i)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[i],delete this.values[t],delete this.comments[t],this},o.prototype.isReservedId=function(t){return n.isReservedId(this.reserved,t)},o.prototype.isReservedName=function(t){return n.isReservedName(this.reserved,t)}},3548:(t,i,e)=>{"use strict";t.exports=c;var s=e(3243);((c.prototype=Object.create(s.prototype)).constructor=c).className="Field";var n,r=e(7025),o=e(7063),h=e(9935),a=/^required|optional|repeated$/;function c(t,i,e,n,r,c,l){if(h.isObject(n)?(l=r,c=n,n=r=void 0):h.isObject(r)&&(l=c,c=r,r=void 0),s.call(this,t,c),!h.isInteger(i)||i<0)throw TypeError("id must be a non-negative integer");if(!h.isString(e))throw TypeError("type must be a string");if(void 0!==n&&!a.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==r&&!h.isString(r))throw TypeError("extend must be a string");"proto3_optional"===n&&(n="optional"),this.rule=n&&"optional"!==n?n:void 0,this.type=e,this.id=i,this.extend=r||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!h.Long&&void 0!==o.long[e],this.bytes="bytes"===e,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.tt=null,this.comment=l}c.fromJSON=function(t,i){return new c(t,i.id,i.type,i.rule,i.extend,i.options,i.comment)},Object.defineProperty(c.prototype,"packed",{get:function(){return null===this.tt&&(this.tt=!1!==this.getOption("packed")),this.tt}}),c.prototype.setOption=function(t,i,e){return"packed"===t&&(this.tt=null),s.prototype.setOption.call(this,t,i,e)},c.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return h.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",i?this.comment:void 0])},c.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof r&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof r)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=h.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var t;h.base64.test(this.typeDefault)?h.base64.decode(this.typeDefault,t=h.newBuffer(h.base64.length(this.typeDefault)),0):h.utf8.write(this.typeDefault,t=h.newBuffer(h.utf8.length(this.typeDefault)),0),this.typeDefault=t}return this.map?this.defaultValue=h.emptyObject:this.repeated?this.defaultValue=h.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),s.prototype.resolve.call(this)},c.d=function(t,i,e,s){return"function"==typeof i?i=h.decorateType(i).name:i&&"object"==typeof i&&(i=h.decorateEnum(i).name),function(n,r){h.decorateType(n.constructor).add(new c(r,t,i,e,{default:s}))}},c.it=function(t){n=t}},8836:(t,i,e)=>{"use strict";var s=t.exports=e(9482);s.build="light",s.load=function(t,i,e){return"function"==typeof i?(e=i,i=new s.Root):i||(i=new s.Root),i.load(t,e)},s.loadSync=function(t,i){return i||(i=new s.Root),i.loadSync(t)},s.encoder=e(4928),s.decoder=e(5305),s.verifier=e(4497),s.converter=e(3996),s.ReflectionObject=e(3243),s.Namespace=e(9313),s.Root=e(9424),s.Enum=e(7025),s.Type=e(7645),s.Field=e(3548),s.OneOf=e(7598),s.MapField=e(6039),s.Service=e(7513),s.Method=e(4429),s.Message=e(8368),s.wrappers=e(1667),s.types=e(7063),s.util=e(9935),s.ReflectionObject.it(s.Root),s.Namespace.it(s.Type,s.Service,s.Enum),s.Root.it(s.Type),s.Field.it(s.Type)},9482:(t,i,e)=>{"use strict";var s=i;function n(){s.util.it(),s.Writer.it(s.BufferWriter),s.Reader.it(s.BufferReader)}s.build="minimal",s.Writer=e(1173),s.BufferWriter=e(3155),s.Reader=e(1408),s.BufferReader=e(593),s.util=e(9693),s.rpc=e(5994),s.roots=e(5054),s.configure=n,n()},6039:(t,i,e)=>{"use strict";t.exports=o;var s=e(3548);((o.prototype=Object.create(s.prototype)).constructor=o).className="MapField";var n=e(7063),r=e(9935);function o(t,i,e,n,o,h){if(s.call(this,t,i,n,void 0,void 0,o,h),!r.isString(e))throw TypeError("keyType must be a string");this.keyType=e,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(t,i){return new o(t,i.id,i.keyType,i.type,i.options,i.comment)},o.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return r.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",i?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===n.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return s.prototype.resolve.call(this)},o.d=function(t,i,e){return"function"==typeof e?e=r.decorateType(e).name:e&&"object"==typeof e&&(e=r.decorateEnum(e).name),function(s,n){r.decorateType(s.constructor).add(new o(n,t,i,e))}}},8368:(t,i,e)=>{"use strict";t.exports=n;var s=e(9693);function n(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)this[i[e]]=t[i[e]]}n.create=function(t){return this.$type.create(t)},n.encode=function(t,i){return this.$type.encode(t,i)},n.encodeDelimited=function(t,i){return this.$type.encodeDelimited(t,i)},n.decode=function(t){return this.$type.decode(t)},n.decodeDelimited=function(t){return this.$type.decodeDelimited(t)},n.verify=function(t){return this.$type.verify(t)},n.fromObject=function(t){return this.$type.fromObject(t)},n.toObject=function(t,i){return this.$type.toObject(t,i)},n.prototype.toJSON=function(){return this.$type.toObject(this,s.toJSONOptions)}},4429:(t,i,e)=>{"use strict";t.exports=r;var s=e(3243);((r.prototype=Object.create(s.prototype)).constructor=r).className="Method";var n=e(9935);function r(t,i,e,r,o,h,a,c,l){if(n.isObject(o)?(a=o,o=h=void 0):n.isObject(h)&&(a=h,h=void 0),void 0!==i&&!n.isString(i))throw TypeError("type must be a string");if(!n.isString(e))throw TypeError("requestType must be a string");if(!n.isString(r))throw TypeError("responseType must be a string");s.call(this,t,a),this.type=i||"rpc",this.requestType=e,this.requestStream=!!o||void 0,this.responseType=r,this.responseStream=!!h||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=c,this.parsedOptions=l}r.fromJSON=function(t,i){return new r(t,i.type,i.requestType,i.responseType,i.requestStream,i.responseStream,i.options,i.comment,i.parsedOptions)},r.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return n.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",i?this.comment:void 0,"parsedOptions",this.parsedOptions])},r.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),s.prototype.resolve.call(this))}},9313:(t,i,e)=>{"use strict";t.exports=d;var s=e(3243);((d.prototype=Object.create(s.prototype)).constructor=d).className="Namespace";var n,r,o,h=e(3548),a=e(7598),c=e(9935);function l(t,i){if(t&&t.length){for(var e={},s=0;s<t.length;++s)e[t[s].name]=t[s].toJSON(i);return e}}function d(t,i){s.call(this,t,i),this.nested=void 0,this.et=null}function u(t){return t.et=null,t}d.fromJSON=function(t,i){return new d(t,i.options).addJSON(i.nested)},d.arrayToJSON=l,d.isReservedId=function(t,i){if(t)for(var e=0;e<t.length;++e)if("string"!=typeof t[e]&&t[e][0]<=i&&t[e][1]>i)return!0;return!1},d.isReservedName=function(t,i){if(t)for(var e=0;e<t.length;++e)if(t[e]===i)return!0;return!1},Object.defineProperty(d.prototype,"nestedArray",{get:function(){return this.et||(this.et=c.toArray(this.nested))}}),d.prototype.toJSON=function(t){return c.toObject(["options",this.options,"nested",l(this.nestedArray,t)])},d.prototype.addJSON=function(t){if(t)for(var i,e=Object.keys(t),s=0;s<e.length;++s)i=t[e[s]],this.add((void 0!==i.fields?n.fromJSON:void 0!==i.values?o.fromJSON:void 0!==i.methods?r.fromJSON:void 0!==i.id?h.fromJSON:d.fromJSON)(e[s],i));return this},d.prototype.get=function(t){return this.nested&&this.nested[t]||null},d.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof o)return this.nested[t].values;throw Error("no such enum: "+t)},d.prototype.add=function(t){if(!(t instanceof h&&void 0!==t.extend||t instanceof n||t instanceof o||t instanceof r||t instanceof d||t instanceof a))throw TypeError("object must be a valid nested object");if(this.nested){var i=this.get(t.name);if(i){if(!(i instanceof d&&t instanceof d)||i instanceof n||i instanceof r)throw Error("duplicate name '"+t.name+"' in "+this);for(var e=i.nestedArray,s=0;s<e.length;++s)t.add(e[s]);this.remove(i),this.nested||(this.nested={}),t.setOptions(i.options,!0)}}else this.nested={};return this.nested[t.name]=t,t.onAdd(this),u(this)},d.prototype.remove=function(t){if(!(t instanceof s))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=void 0),t.onRemove(this),u(this)},d.prototype.define=function(t,i){if(c.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var e=this;t.length>0;){var s=t.shift();if(e.nested&&e.nested[s]){if(!((e=e.nested[s])instanceof d))throw Error("path conflicts with non-namespace objects")}else e.add(e=new d(s))}return i&&e.addJSON(i),e},d.prototype.resolveAll=function(){for(var t=this.nestedArray,i=0;i<t.length;)t[i]instanceof d?t[i++].resolveAll():t[i++].resolve();return this.resolve()},d.prototype.lookup=function(t,i,e){if("boolean"==typeof i?(e=i,i=void 0):i&&!Array.isArray(i)&&(i=[i]),c.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".")}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),i);var s=this.get(t[0]);if(s){if(1===t.length){if(!i||i.indexOf(s.constructor)>-1)return s}else if(s instanceof d&&(s=s.lookup(t.slice(1),i,!0)))return s}else for(var n=0;n<this.nestedArray.length;++n)if(this.et[n]instanceof d&&(s=this.et[n].lookup(t,i,!0)))return s;return null===this.parent||e?null:this.parent.lookup(t,i)},d.prototype.lookupType=function(t){var i=this.lookup(t,[n]);if(!i)throw Error("no such type: "+t);return i},d.prototype.lookupEnum=function(t){var i=this.lookup(t,[o]);if(!i)throw Error("no such Enum '"+t+"' in "+this);return i},d.prototype.lookupTypeOrEnum=function(t){var i=this.lookup(t,[n,o]);if(!i)throw Error("no such Type or Enum '"+t+"' in "+this);return i},d.prototype.lookupService=function(t){var i=this.lookup(t,[r]);if(!i)throw Error("no such Service '"+t+"' in "+this);return i},d.it=function(t,i,e){n=t,r=i,o=e}},3243:(t,i,e)=>{"use strict";t.exports=r,r.className="ReflectionObject";var s,n=e(9935);function r(t,i){if(!n.isString(t))throw TypeError("name must be a string");if(i&&!n.isObject(i))throw TypeError("options must be an object");this.options=i,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(r.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],i=this.parent;i;)t.unshift(i.name),i=i.parent;return t.join(".")}}}),r.prototype.toJSON=function(){throw Error()},r.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;var i=t.root;i instanceof s&&i.st(this)},r.prototype.onRemove=function(t){var i=t.root;i instanceof s&&i.nt(this),this.parent=null,this.resolved=!1},r.prototype.resolve=function(){return this.resolved||this.root instanceof s&&(this.resolved=!0),this},r.prototype.getOption=function(t){if(this.options)return this.options[t]},r.prototype.setOption=function(t,i,e){return e&&this.options&&void 0!==this.options[t]||((this.options||(this.options={}))[t]=i),this},r.prototype.setParsedOption=function(t,i,e){this.parsedOptions||(this.parsedOptions=[]);var s=this.parsedOptions;if(e){var r=s.find((function(i){return Object.prototype.hasOwnProperty.call(i,t)}));if(r){var o=r[t];n.setProperty(o,e,i)}else(r={})[t]=n.setProperty({},e,i),s.push(r)}else{var h={};h[t]=i,s.push(h)}return this},r.prototype.setOptions=function(t,i){if(t)for(var e=Object.keys(t),s=0;s<e.length;++s)this.setOption(e[s],t[e[s]],i);return this},r.prototype.toString=function(){var t=this.constructor.className,i=this.fullName;return i.length?t+" "+i:t},r.it=function(t){s=t}},7598:(t,i,e)=>{"use strict";t.exports=o;var s=e(3243);((o.prototype=Object.create(s.prototype)).constructor=o).className="OneOf";var n=e(3548),r=e(9935);function o(t,i,e,n){if(Array.isArray(i)||(e=i,i=void 0),s.call(this,t,e),void 0!==i&&!Array.isArray(i))throw TypeError("fieldNames must be an Array");this.oneof=i||[],this.fieldsArray=[],this.comment=n}function h(t){if(t.parent)for(var i=0;i<t.fieldsArray.length;++i)t.fieldsArray[i].parent||t.parent.add(t.fieldsArray[i])}o.fromJSON=function(t,i){return new o(t,i.oneof,i.options,i.comment)},o.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return r.toObject(["options",this.options,"oneof",this.oneof,"comment",i?this.comment:void 0])},o.prototype.add=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),t.partOf=this,h(this),this},o.prototype.remove=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");var i=this.fieldsArray.indexOf(t);if(i<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(i,1),(i=this.oneof.indexOf(t.name))>-1&&this.oneof.splice(i,1),t.partOf=null,this},o.prototype.onAdd=function(t){s.prototype.onAdd.call(this,t);for(var i=0;i<this.oneof.length;++i){var e=t.get(this.oneof[i]);e&&!e.partOf&&(e.partOf=this,this.fieldsArray.push(e))}h(this)},o.prototype.onRemove=function(t){for(var i,e=0;e<this.fieldsArray.length;++e)(i=this.fieldsArray[e]).parent&&i.parent.remove(i);s.prototype.onRemove.call(this,t)},o.d=function(){for(var t=new Array(arguments.length),i=0;i<arguments.length;)t[i]=arguments[i++];return function(i,e){r.decorateType(i.constructor).add(new o(e,t)),Object.defineProperty(i,e,{get:r.oneOfGetter(t),set:r.oneOfSetter(t)})}}},1408:(t,i,e)=>{"use strict";t.exports=a;var s,n=e(9693),r=n.LongBits,o=n.utf8;function h(t,i){return RangeError("index out of range: "+t.pos+" + "+(i||1)+" > "+t.len)}function a(t){this.buf=t,this.pos=0,this.len=t.length}var c,l="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new a(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new a(t);throw Error("illegal buffer")},d=function(){return n.Buffer?function(t){return(a.create=function(t){return n.Buffer.isBuffer(t)?new s(t):l(t)})(t)}:l};function u(){var t=new r(0,0),i=0;if(!(this.len-this.pos>4)){for(;i<3;++i){if(this.pos>=this.len)throw h(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*i)>>>0,t}for(;i<4;++i)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(i=0,this.len-this.pos>4){for(;i<5;++i)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}else for(;i<5;++i){if(this.pos>=this.len)throw h(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function p(t,i){return(t[i-4]|t[i-3]<<8|t[i-2]<<16|t[i-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw h(this,8);return new r(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}a.create=d(),a.prototype.rt=n.Array.prototype.subarray||n.Array.prototype.slice,a.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,h(this,10);return c}),a.prototype.int32=function(){return 0|this.uint32()},a.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},a.prototype.bool=function(){return 0!==this.uint32()},a.prototype.fixed32=function(){if(this.pos+4>this.len)throw h(this,4);return p(this.buf,this.pos+=4)},a.prototype.sfixed32=function(){if(this.pos+4>this.len)throw h(this,4);return 0|p(this.buf,this.pos+=4)},a.prototype.float=function(){if(this.pos+4>this.len)throw h(this,4);var t=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},a.prototype.double=function(){if(this.pos+8>this.len)throw h(this,4);var t=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},a.prototype.bytes=function(){var t=this.uint32(),i=this.pos,e=this.pos+t;if(e>this.len)throw h(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(i,e):i===e?new this.buf.constructor(0):this.rt.call(this.buf,i,e)},a.prototype.string=function(){var t=this.bytes();return o.read(t,0,t.length)},a.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw h(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw h(this)}while(128&this.buf[this.pos++]);return this},a.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},a.it=function(t){s=t,a.create=d(),s.it();var i=n.Long?"toLong":"toNumber";n.merge(a.prototype,{int64:function(){return u.call(this)[i](!1)},uint64:function(){return u.call(this)[i](!0)},sint64:function(){return u.call(this).zzDecode()[i](!1)},fixed64:function(){return f.call(this)[i](!0)},sfixed64:function(){return f.call(this)[i](!1)}})}},593:(t,i,e)=>{"use strict";t.exports=r;var s=e(1408);(r.prototype=Object.create(s.prototype)).constructor=r;var n=e(9693);function r(t){s.call(this,t)}r.it=function(){n.Buffer&&(r.prototype.rt=n.Buffer.prototype.slice)},r.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},r.it()},9424:(t,i,e)=>{"use strict";t.exports=d;var s=e(9313);((d.prototype=Object.create(s.prototype)).constructor=d).className="Root";var n,r,o,h=e(3548),a=e(7025),c=e(7598),l=e(9935);function d(t){s.call(this,"",t),this.deferred=[],this.files=[]}function u(){}d.fromJSON=function(t,i){return i||(i=new d),t.options&&i.setOptions(t.options),i.addJSON(t.nested)},d.prototype.resolvePath=l.path.resolve,d.prototype.fetch=l.fetch,d.prototype.load=function t(i,e,s){"function"==typeof e&&(s=e,e=void 0);var n=this;if(!s)return l.asPromise(t,n,i,e);var h=s===u;function a(t,i){if(s){var e=s;if(s=null,h)throw t;e(t,i)}}function c(t){var i=t.lastIndexOf("google/protobuf/");if(i>-1){var e=t.substring(i);if(e in o)return e}return null}function d(t,i){try{if(l.isString(i)&&"{"===i.charAt(0)&&(i=JSON.parse(i)),l.isString(i)){r.filename=t;var s,o=r(i,n,e),d=0;if(o.imports)for(;d<o.imports.length;++d)(s=c(o.imports[d])||n.resolvePath(t,o.imports[d]))&&p(s);if(o.weakImports)for(d=0;d<o.weakImports.length;++d)(s=c(o.weakImports[d])||n.resolvePath(t,o.weakImports[d]))&&p(s,!0)}else n.setOptions(i.options).addJSON(i.nested)}catch(t){a(t)}h||f||a(null,n)}function p(t,i){if(!(n.files.indexOf(t)>-1))if(n.files.push(t),t in o)h?d(t,o[t]):(++f,setTimeout((function(){--f,d(t,o[t])})));else if(h){var e;try{e=l.fs.readFileSync(t).toString("utf8")}catch(t){return void(i||a(t))}d(t,e)}else++f,n.fetch(t,(function(e,r){--f,s&&(e?i?f||a(null,n):a(e):d(t,r))}))}var f=0;l.isString(i)&&(i=[i]);for(var g,m=0;m<i.length;++m)(g=n.resolvePath("",i[m]))&&p(g);if(h)return n;f||a(null,n)},d.prototype.loadSync=function(t,i){if(!l.isNode)throw Error("not supported");return this.load(t,i,u)},d.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(t){return"'extend "+t.extend+"' in "+t.parent.fullName})).join(", "));return s.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(t,i){var e=i.parent.lookup(i.extend);if(e){var s=new h(i.fullName,i.id,i.type,i.rule,void 0,i.options);return s.declaringField=i,i.extensionField=s,e.add(s),!0}return!1}d.prototype.st=function(t){if(t instanceof h)void 0===t.extend||t.extensionField||f(0,t)||this.deferred.push(t);else if(t instanceof a)p.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof c)){if(t instanceof n)for(var i=0;i<this.deferred.length;)f(0,this.deferred[i])?this.deferred.splice(i,1):++i;for(var e=0;e<t.nestedArray.length;++e)this.st(t.et[e]);p.test(t.name)&&(t.parent[t.name]=t)}},d.prototype.nt=function(t){if(t instanceof h){if(void 0!==t.extend)if(t.extensionField)t.extensionField.parent.remove(t.extensionField),t.extensionField=null;else{var i=this.deferred.indexOf(t);i>-1&&this.deferred.splice(i,1)}}else if(t instanceof a)p.test(t.name)&&delete t.parent[t.name];else if(t instanceof s){for(var e=0;e<t.nestedArray.length;++e)this.nt(t.et[e]);p.test(t.name)&&delete t.parent[t.name]}},d.it=function(t,i,e){n=t,r=i,o=e}},5054:t=>{"use strict";t.exports={}},5994:(t,i,e)=>{"use strict";i.Service=e(7948)},7948:(t,i,e)=>{"use strict";t.exports=n;var s=e(9693);function n(t,i,e){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");s.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(i),this.responseDelimited=Boolean(e)}(n.prototype=Object.create(s.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function t(i,e,n,r,o){if(!r)throw TypeError("request must be specified");var h=this;if(!o)return s.asPromise(t,h,i,e,n,r);if(h.rpcImpl)try{return h.rpcImpl(i,e[h.requestDelimited?"encodeDelimited":"encode"](r).finish(),(function(t,e){if(t)return h.emit("error",t,i),o(t);if(null!==e){if(!(e instanceof n))try{e=n[h.responseDelimited?"decodeDelimited":"decode"](e)}catch(t){return h.emit("error",t,i),o(t)}return h.emit("data",e,i),o(null,e)}h.end(!0)}))}catch(t){return h.emit("error",t,i),void setTimeout((function(){o(t)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},7513:(t,i,e)=>{"use strict";t.exports=h;var s=e(9313);((h.prototype=Object.create(s.prototype)).constructor=h).className="Service";var n=e(4429),r=e(9935),o=e(5994);function h(t,i){s.call(this,t,i),this.methods={},this.ot=null}function a(t){return t.ot=null,t}h.fromJSON=function(t,i){var e=new h(t,i.options);if(i.methods)for(var s=Object.keys(i.methods),r=0;r<s.length;++r)e.add(n.fromJSON(s[r],i.methods[s[r]]));return i.nested&&e.addJSON(i.nested),e.comment=i.comment,e},h.prototype.toJSON=function(t){var i=s.prototype.toJSON.call(this,t),e=!!t&&Boolean(t.keepComments);return r.toObject(["options",i&&i.options||void 0,"methods",s.arrayToJSON(this.methodsArray,t)||{},"nested",i&&i.nested||void 0,"comment",e?this.comment:void 0])},Object.defineProperty(h.prototype,"methodsArray",{get:function(){return this.ot||(this.ot=r.toArray(this.methods))}}),h.prototype.get=function(t){return this.methods[t]||s.prototype.get.call(this,t)},h.prototype.resolveAll=function(){for(var t=this.methodsArray,i=0;i<t.length;++i)t[i].resolve();return s.prototype.resolve.call(this)},h.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof n?(this.methods[t.name]=t,t.parent=this,a(this)):s.prototype.add.call(this,t)},h.prototype.remove=function(t){if(t instanceof n){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,a(this)}return s.prototype.remove.call(this,t)},h.prototype.create=function(t,i,e){for(var s,n=new o.Service(t,i,e),h=0;h<this.methodsArray.length;++h){var a=r.lcFirst((s=this.ot[h]).resolve().name).replace(/[^$\w_]/g,"");n[a]=r.codegen(["r","c"],r.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:s,q:s.resolvedRequestType.ctor,s:s.resolvedResponseType.ctor})}return n}},7645:(t,i,e)=>{"use strict";t.exports=v;var s=e(9313);((v.prototype=Object.create(s.prototype)).constructor=v).className="Type";var n=e(7025),r=e(7598),o=e(3548),h=e(6039),a=e(7513),c=e(8368),l=e(1408),d=e(1173),u=e(9935),p=e(4928),f=e(5305),g=e(4497),m=e(3996),y=e(1667);function v(t,i){s.call(this,t,i),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this.ht=null,this.K=null,this.ct=null,this.lt=null}function b(t){return t.ht=t.K=t.ct=null,delete t.encode,delete t.decode,delete t.verify,t}Object.defineProperties(v.prototype,{fieldsById:{get:function(){if(this.ht)return this.ht;this.ht={};for(var t=Object.keys(this.fields),i=0;i<t.length;++i){var e=this.fields[t[i]],s=e.id;if(this.ht[s])throw Error("duplicate id "+s+" in "+this);this.ht[s]=e}return this.ht}},fieldsArray:{get:function(){return this.K||(this.K=u.toArray(this.fields))}},oneofsArray:{get:function(){return this.ct||(this.ct=u.toArray(this.oneofs))}},ctor:{get:function(){return this.lt||(this.ctor=v.generateConstructor(this)())},set:function(t){var i=t.prototype;i instanceof c||((t.prototype=new c).constructor=t,u.merge(t.prototype,i)),t.$type=t.prototype.$type=this,u.merge(t,c,!0),this.lt=t;for(var e=0;e<this.fieldsArray.length;++e)this.K[e].resolve();var s={};for(e=0;e<this.oneofsArray.length;++e)s[this.ct[e].resolve().name]={get:u.oneOfGetter(this.ct[e].oneof),set:u.oneOfSetter(this.ct[e].oneof)};e&&Object.defineProperties(t.prototype,s)}}}),v.generateConstructor=function(t){for(var i,e=u.codegen(["p"],t.name),s=0;s<t.fieldsArray.length;++s)(i=t.K[s]).map?e("this%s={}",u.safeProp(i.name)):i.repeated&&e("this%s=[]",u.safeProp(i.name));return e("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},v.fromJSON=function(t,i){var e=new v(t,i.options);e.extensions=i.extensions,e.reserved=i.reserved;for(var c=Object.keys(i.fields),l=0;l<c.length;++l)e.add((void 0!==i.fields[c[l]].keyType?h.fromJSON:o.fromJSON)(c[l],i.fields[c[l]]));if(i.oneofs)for(c=Object.keys(i.oneofs),l=0;l<c.length;++l)e.add(r.fromJSON(c[l],i.oneofs[c[l]]));if(i.nested)for(c=Object.keys(i.nested),l=0;l<c.length;++l){var d=i.nested[c[l]];e.add((void 0!==d.id?o.fromJSON:void 0!==d.fields?v.fromJSON:void 0!==d.values?n.fromJSON:void 0!==d.methods?a.fromJSON:s.fromJSON)(c[l],d))}return i.extensions&&i.extensions.length&&(e.extensions=i.extensions),i.reserved&&i.reserved.length&&(e.reserved=i.reserved),i.group&&(e.group=!0),i.comment&&(e.comment=i.comment),e},v.prototype.toJSON=function(t){var i=s.prototype.toJSON.call(this,t),e=!!t&&Boolean(t.keepComments);return u.toObject(["options",i&&i.options||void 0,"oneofs",s.arrayToJSON(this.oneofsArray,t),"fields",s.arrayToJSON(this.fieldsArray.filter((function(t){return!t.declaringField})),t)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",i&&i.nested||void 0,"comment",e?this.comment:void 0])},v.prototype.resolveAll=function(){for(var t=this.fieldsArray,i=0;i<t.length;)t[i++].resolve();var e=this.oneofsArray;for(i=0;i<e.length;)e[i++].resolve();return s.prototype.resolveAll.call(this)},v.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null},v.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof o&&void 0===t.extend){if(this.ht?this.ht[t.id]:this.fieldsById[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),this.fields[t.name]=t,t.message=this,t.onAdd(this),b(this)}return t instanceof r?(this.oneofs||(this.oneofs={}),this.oneofs[t.name]=t,t.onAdd(this),b(this)):s.prototype.add.call(this,t)},v.prototype.remove=function(t){if(t instanceof o&&void 0===t.extend){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.fields[t.name],t.parent=null,t.onRemove(this),b(this)}if(t instanceof r){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),b(this)}return s.prototype.remove.call(this,t)},v.prototype.isReservedId=function(t){return s.isReservedId(this.reserved,t)},v.prototype.isReservedName=function(t){return s.isReservedName(this.reserved,t)},v.prototype.create=function(t){return new this.ctor(t)},v.prototype.setup=function(){for(var t=this.fullName,i=[],e=0;e<this.fieldsArray.length;++e)i.push(this.K[e].resolve().resolvedType);this.encode=p(this)({Writer:d,types:i,util:u}),this.decode=f(this)({Reader:l,types:i,util:u}),this.verify=g(this)({types:i,util:u}),this.fromObject=m.fromObject(this)({types:i,util:u}),this.toObject=m.toObject(this)({types:i,util:u});var s=y[t];if(s){var n=Object.create(this);n.fromObject=this.fromObject,this.fromObject=s.fromObject.bind(n),n.toObject=this.toObject,this.toObject=s.toObject.bind(n)}return this},v.prototype.encode=function(t,i){return this.setup().encode(t,i)},v.prototype.encodeDelimited=function(t,i){return this.encode(t,i&&i.len?i.fork():i).ldelim()},v.prototype.decode=function(t,i){return this.setup().decode(t,i)},v.prototype.decodeDelimited=function(t){return t instanceof l||(t=l.create(t)),this.decode(t,t.uint32())},v.prototype.verify=function(t){return this.setup().verify(t)},v.prototype.fromObject=function(t){return this.setup().fromObject(t)},v.prototype.toObject=function(t,i){return this.setup().toObject(t,i)},v.d=function(t){return function(i){u.decorateType(i,t)}}},7063:(t,i,e)=>{"use strict";var s=i,n=e(9935),r=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(t,i){var e=0,s={};for(i|=0;e<t.length;)s[r[e+i]]=t[e++];return s}s.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),s.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",n.emptyArray,null]),s.long=o([0,0,0,1,1],7),s.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),s.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},9935:(t,i,e)=>{"use strict";var s,n,r=t.exports=e(9693),o=e(5054);r.codegen=e(5124),r.fetch=e(9054),r.path=e(8626),r.fs=r.inquire("fs"),r.toArray=function(t){if(t){for(var i=Object.keys(t),e=new Array(i.length),s=0;s<i.length;)e[s]=t[i[s++]];return e}return[]},r.toObject=function(t){for(var i={},e=0;e<t.length;){var s=t[e++],n=t[e++];void 0!==n&&(i[s]=n)}return i};var h=/\\/g,a=/"/g;r.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)},r.safeProp=function(t){return!/^[$\w_]+$/.test(t)||r.isReserved(t)?'["'+t.replace(h,"\\\\").replace(a,'\\"')+'"]':"."+t},r.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)};var c=/_([a-z])/g;r.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(c,(function(t,i){return i.toUpperCase()}))},r.compareFieldsById=function(t,i){return t.id-i.id},r.decorateType=function(t,i){if(t.$type)return i&&t.$type.name!==i&&(r.decorateRoot.remove(t.$type),t.$type.name=i,r.decorateRoot.add(t.$type)),t.$type;s||(s=e(7645));var n=new s(i||t.name);return r.decorateRoot.add(n),n.ctor=t,Object.defineProperty(t,"$type",{value:n,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:n,enumerable:!1}),n};var l=0;r.decorateEnum=function(t){if(t.$type)return t.$type;n||(n=e(7025));var i=new n("Enum"+l++,t);return r.decorateRoot.add(i),Object.defineProperty(t,"$type",{value:i,enumerable:!1}),i},r.setProperty=function(t,i,e){if("object"!=typeof t)throw TypeError("dst must be an object");if(!i)throw TypeError("path must be specified");return function t(i,e,s){var n=e.shift();if(e.length>0)i[n]=t(i[n]||{},e,s);else{var r=i[n];r&&(s=[].concat(r).concat(s)),i[n]=s}return i}(t,i=i.split("."),e)},Object.defineProperty(r,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(e(9424)))}})},1945:(t,i,e)=>{"use strict";t.exports=n;var s=e(9693);function n(t,i){this.lo=t>>>0,this.hi=i>>>0}var r=n.zero=new n(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var o=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(t){if(0===t)return r;var i=t<0;i&&(t=-t);var e=t>>>0,s=(t-e)/4294967296>>>0;return i&&(s=~s>>>0,e=~e>>>0,++e>4294967295&&(e=0,++s>4294967295&&(s=0))),new n(e,s)},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(s.isString(t)){if(!s.Long)return n.fromNumber(parseInt(t,10));t=s.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):r},n.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var i=1+~this.lo>>>0,e=~this.hi>>>0;return i||(e=e+1>>>0),-(i+4294967296*e)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return s.Long?new s.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var h=String.prototype.charCodeAt;n.fromHash=function(t){return t===o?r:new n((h.call(t,0)|h.call(t,1)<<8|h.call(t,2)<<16|h.call(t,3)<<24)>>>0,(h.call(t,4)|h.call(t,5)<<8|h.call(t,6)<<16|h.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,i=(this.lo>>>28|this.hi<<4)>>>0,e=this.hi>>>24;return 0===e?0===i?t<16384?t<128?1:2:t<2097152?3:4:i<16384?i<128?5:6:i<2097152?7:8:e<128?9:10}},9693:function(t,i,e){"use strict";var s=i;function n(t,i,e){for(var s=Object.keys(i),n=0;n<s.length;++n)void 0!==t[s[n]]&&e||(t[s[n]]=i[s[n]]);return t}function r(t){function i(t,e){if(!(this instanceof i))return new i(t,e);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),e&&n(this,e)}return(i.prototype=Object.create(Error.prototype)).constructor=i,Object.defineProperty(i.prototype,"name",{get:function(){return t}}),i.prototype.toString=function(){return this.name+": "+this.message},i}s.asPromise=e(4537),s.base64=e(7419),s.EventEmitter=e(9211),s.float=e(945),s.inquire=e(7199),s.utf8=e(4997),s.pool=e(6662),s.LongBits=e(1945),s.isNode=Boolean(void 0!==e.g&&e.g&&e.g.process&&e.g.process.versions&&e.g.process.versions.node),s.global=s.isNode&&e.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},s.isString=function(t){return"string"==typeof t||t instanceof String},s.isObject=function(t){return t&&"object"==typeof t},s.isset=s.isSet=function(t,i){var e=t[i];return!(null==e||!t.hasOwnProperty(i))&&("object"!=typeof e||(Array.isArray(e)?e.length:Object.keys(e).length)>0)},s.Buffer=function(){try{var t=s.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),s.dt=null,s.ut=null,s.newBuffer=function(t){return"number"==typeof t?s.Buffer?s.ut(t):new s.Array(t):s.Buffer?s.dt(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},s.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(t){return t?s.LongBits.from(t).toHash():s.LongBits.zeroHash},s.longFromHash=function(t,i){var e=s.LongBits.fromHash(t);return s.Long?s.Long.fromBits(e.lo,e.hi,i):e.toNumber(Boolean(i))},s.merge=n,s.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},s.newError=r,s.ProtocolError=r("ProtocolError"),s.oneOfGetter=function(t){for(var i={},e=0;e<t.length;++e)i[t[e]]=1;return function(){for(var t=Object.keys(this),e=t.length-1;e>-1;--e)if(1===i[t[e]]&&void 0!==this[t[e]]&&null!==this[t[e]])return t[e]}},s.oneOfSetter=function(t){return function(i){for(var e=0;e<t.length;++e)t[e]!==i&&delete this[t[e]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s.it=function(){var t=s.Buffer;t?(s.dt=t.from!==Uint8Array.from&&t.from||function(i,e){return new t(i,e)},s.ut=t.allocUnsafe||function(i){return new t(i)}):s.dt=s.ut=null}},4497:(t,i,e)=>{"use strict";t.exports=function(t){var i=n.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),e=t.oneofsArray,s={};e.length&&i("var p={}");for(var a=0;a<t.fieldsArray.length;++a){var c=t.K[a].resolve(),l="m"+n.safeProp(c.name);if(c.optional&&i("if(%s!=null&&m.hasOwnProperty(%j)){",l,c.name),c.map)i("if(!util.isObject(%s))",l)("return%j",r(c,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),h(i,c,"k[i]"),o(i,c,a,l+"[k[i]]")("}");else if(c.repeated)i("if(!Array.isArray(%s))",l)("return%j",r(c,"array"))("for(var i=0;i<%s.length;++i){",l),o(i,c,a,l+"[i]")("}");else{if(c.partOf){var d=n.safeProp(c.partOf.name);1===s[c.partOf.name]&&i("if(p%s===1)",d)("return%j",c.partOf.name+": multiple values"),s[c.partOf.name]=1,i("p%s=1",d)}o(i,c,a,l)}c.optional&&i("}")}return i("return null")};var s=e(7025),n=e(9935);function r(t,i){return t.name+": "+i+(t.repeated&&"array"!==i?"[]":t.map&&"object"!==i?"{k:"+t.keyType+"}":"")+" expected"}function o(t,i,e,n){if(i.resolvedType)if(i.resolvedType instanceof s){t("switch(%s){",n)("default:")("return%j",r(i,"enum value"));for(var o=Object.keys(i.resolvedType.values),h=0;h<o.length;++h)t("case %i:",i.resolvedType.values[o[h]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",e,n)("if(e)")("return%j+e",i.name+".")("}");else switch(i.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",n)("return%j",r(i,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",r(i,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',n)("return%j",r(i,"number"));break;case"bool":t('if(typeof %s!=="boolean")',n)("return%j",r(i,"boolean"));break;case"string":t("if(!util.isString(%s))",n)("return%j",r(i,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",r(i,"buffer"))}return t}function h(t,i,e){switch(i.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",e)("return%j",r(i,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",e)("return%j",r(i,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",e)("return%j",r(i,"boolean key"))}return t}},1667:(t,i,e)=>{"use strict";var s=i,n=e(8368);s[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var i=t["@type"].substring(t["@type"].lastIndexOf("/")+1),e=this.lookup(i);if(e){var s="."===t["@type"].charAt(0)?t["@type"].substr(1):t["@type"];return-1===s.indexOf("/")&&(s="/"+s),this.create({type_url:s,value:e.encode(e.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,i){var e="",s="";if(i&&i.json&&t.type_url&&t.value){s=t.type_url.substring(t.type_url.lastIndexOf("/")+1),e=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1);var r=this.lookup(s);r&&(t=r.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof n){var o=t.$type.toObject(t,i);return""===e&&(e="type.googleapis.com/"),s=e+("."===t.$type.fullName[0]?t.$type.fullName.substr(1):t.$type.fullName),o["@type"]=s,o}return this.toObject(t,i)}}},1173:(t,i,e)=>{"use strict";t.exports=d;var s,n=e(9693),r=n.LongBits,o=n.base64,h=n.utf8;function a(t,i,e){this.fn=t,this.len=i,this.next=void 0,this.val=e}function c(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function d(){this.len=0,this.head=new a(c,0,0),this.tail=this.head,this.states=null}var u=function(){return n.Buffer?function(){return(d.create=function(){return new s})()}:function(){return new d}};function p(t,i,e){i[e]=255&t}function f(t,i){this.len=t,this.next=void 0,this.val=i}function g(t,i,e){for(;t.hi;)i[e++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)i[e++]=127&t.lo|128,t.lo=t.lo>>>7;i[e++]=t.lo}function m(t,i,e){i[e]=255&t,i[e+1]=t>>>8&255,i[e+2]=t>>>16&255,i[e+3]=t>>>24}d.create=u(),d.alloc=function(t){return new n.Array(t)},n.Array!==Array&&(d.alloc=n.pool(d.alloc,n.Array.prototype.subarray)),d.prototype.ft=function(t,i,e){return this.tail=this.tail.next=new a(t,i,e),this.len+=i,this},f.prototype=Object.create(a.prototype),f.prototype.fn=function(t,i,e){for(;t>127;)i[e++]=127&t|128,t>>>=7;i[e]=t},d.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},d.prototype.int32=function(t){return t<0?this.ft(g,10,r.fromNumber(t)):this.uint32(t)},d.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},d.prototype.uint64=function(t){var i=r.from(t);return this.ft(g,i.length(),i)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(t){var i=r.from(t).zzEncode();return this.ft(g,i.length(),i)},d.prototype.bool=function(t){return this.ft(p,1,t?1:0)},d.prototype.fixed32=function(t){return this.ft(m,4,t>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(t){var i=r.from(t);return this.ft(m,4,i.lo).ft(m,4,i.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(t){return this.ft(n.float.writeFloatLE,4,t)},d.prototype.double=function(t){return this.ft(n.float.writeDoubleLE,8,t)};var y=n.Array.prototype.set?function(t,i,e){i.set(t,e)}:function(t,i,e){for(var s=0;s<t.length;++s)i[e+s]=t[s]};d.prototype.bytes=function(t){var i=t.length>>>0;if(!i)return this.ft(p,1,0);if(n.isString(t)){var e=d.alloc(i=o.length(t));o.decode(t,e,0),t=e}return this.uint32(i).ft(y,i,t)},d.prototype.string=function(t){var i=h.length(t);return i?this.uint32(i).ft(h.write,i,t):this.ft(p,1,0)},d.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new a(c,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new a(c,0,0),this.len=0),this},d.prototype.ldelim=function(){var t=this.head,i=this.tail,e=this.len;return this.reset().uint32(e),e&&(this.tail.next=t.next,this.tail=i,this.len+=e),this},d.prototype.finish=function(){for(var t=this.head.next,i=this.constructor.alloc(this.len),e=0;t;)t.fn(t.val,i,e),e+=t.len,t=t.next;return i},d.it=function(t){s=t,d.create=u(),s.it()}},3155:(t,i,e)=>{"use strict";t.exports=r;var s=e(1173);(r.prototype=Object.create(s.prototype)).constructor=r;var n=e(9693);function r(){s.call(this)}function o(t,i,e){t.length<40?n.utf8.write(t,i,e):i.utf8Write?i.utf8Write(t,e):i.write(t,e)}r.it=function(){r.alloc=n.ut,r.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(t,i,e){i.set(t,e)}:function(t,i,e){if(t.copy)t.copy(i,e,0,t.length);else for(var s=0;s<t.length;)i[e++]=t[s++]}},r.prototype.bytes=function(t){n.isString(t)&&(t=n.dt(t,"base64"));var i=t.length>>>0;return this.uint32(i),i&&this.ft(r.writeBytesBuffer,i,t),this},r.prototype.string=function(t){var i=n.Buffer.byteLength(t);return this.uint32(i),i&&this.ft(o,i,t),this},r.it()},8660:(t,i,e)=>{var s;!function(t){!function(i){var s="object"==typeof e.g?e.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=r(t);function r(t,i){return function(e,s){"function"!=typeof t[e]&&Object.defineProperty(t,e,{configurable:!0,writable:!0,value:s}),i&&i(e,s)}}void 0===s.Reflect?s.Reflect=t:n=r(s.Reflect,n),function(t){var i=Object.prototype.hasOwnProperty,e="function"==typeof Symbol,s=e&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",n=e&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",r="function"==typeof Object.create,o={__proto__:[]}instanceof Array,h=!r&&!o,a={create:r?function(){return st(Object.create(null))}:o?function(){return st({__proto__:null})}:function(){return st({})},has:h?function(t,e){return i.call(t,e)}:function(t,i){return i in t},get:h?function(t,e){return i.call(t,e)?t[e]:void 0}:function(t,i){return t[i]}},c=Object.getPrototypeOf(Function),l="object"==typeof process&&{DEBUG_MODE:!1}&&"true"==={DEBUG_MODE:!1}.REFLECT_METADATA_USE_MAP_POLYFILL,d=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?tt():Map,u=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?it():Set,p=new(l||"function"!=typeof WeakMap?et():WeakMap);function f(t,i,e,s){if(R(e)){if(!q(t))throw new TypeError;if(!W(i))throw new TypeError;return S(t,i)}if(!q(t))throw new TypeError;if(!$(i))throw new TypeError;if(!$(s)&&!R(s)&&!D(s))throw new TypeError;return D(s)&&(s=void 0),A(t,i,e=H(e),s)}function g(t,i){function e(e,s){if(!$(e))throw new TypeError;if(!R(s)&&!G(s))throw new TypeError;E(t,i,e,s)}return e}function m(t,i,e,s){if(!$(e))throw new TypeError;return R(s)||(s=H(s)),E(t,i,e,s)}function y(t,i,e){if(!$(i))throw new TypeError;return R(e)||(e=H(e)),k(t,i,e)}function v(t,i,e){if(!$(i))throw new TypeError;return R(e)||(e=H(e)),C(t,i,e)}function b(t,i,e){if(!$(i))throw new TypeError;return R(e)||(e=H(e)),T(t,i,e)}function x(t,i,e){if(!$(i))throw new TypeError;return R(e)||(e=H(e)),M(t,i,e)}function w(t,i){if(!$(t))throw new TypeError;return R(i)||(i=H(i)),B(t,i)}function _(t,i){if(!$(t))throw new TypeError;return R(i)||(i=H(i)),L(t,i)}function P(t,i,e){if(!$(i))throw new TypeError;R(e)||(e=H(e));var s=I(i,e,!1);if(R(s))return!1;if(!s.delete(t))return!1;if(s.size>0)return!0;var n=p.get(i);return n.delete(e),n.size>0||p.delete(i),!0}function S(t,i){for(var e=t.length-1;e>=0;--e){var s=(0,t[e])(i);if(!R(s)&&!D(s)){if(!W(s))throw new TypeError;i=s}}return i}function A(t,i,e,s){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(i,e,s);if(!R(r)&&!D(r)){if(!$(r))throw new TypeError;s=r}}return s}function I(t,i,e){var s=p.get(t);if(R(s)){if(!e)return;s=new d,p.set(t,s)}var n=s.get(i);if(R(n)){if(!e)return;n=new d,s.set(i,n)}return n}function k(t,i,e){if(C(t,i,e))return!0;var s=K(i);return!D(s)&&k(t,s,e)}function C(t,i,e){var s=I(i,e,!1);return!R(s)&&N(s.has(t))}function T(t,i,e){if(C(t,i,e))return M(t,i,e);var s=K(i);return D(s)?void 0:T(t,s,e)}function M(t,i,e){var s=I(i,e,!1);if(!R(s))return s.get(t)}function E(t,i,e,s){I(e,s,!0).set(t,i)}function B(t,i){var e=L(t,i),s=K(t);if(null===s)return e;var n=B(s,i);if(n.length<=0)return e;if(e.length<=0)return n;for(var r=new u,o=[],h=0,a=e;h<a.length;h++){var c=a[h];r.has(c)||(r.add(c),o.push(c))}for(var l=0,d=n;l<d.length;l++){c=d[l];r.has(c)||(r.add(c),o.push(c))}return o}function L(t,i){var e=[],s=I(t,i,!1);if(R(s))return e;for(var n=Q(s.keys()),r=0;;){var o=X(n);if(!o)return e.length=r,e;var h=Y(o);try{e[r]=h}catch(t){try{Z(n)}finally{throw t}}r++}}function O(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function R(t){return void 0===t}function D(t){return null===t}function F(t){return"symbol"==typeof t}function $(t){return"object"==typeof t?null!==t:"function"==typeof t}function j(t,i){switch(O(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var e=3===i?"string":5===i?"number":"default",n=J(t,s);if(void 0!==n){var r=n.call(t,e);if($(r))throw new TypeError;return r}return V(t,"default"===e?"number":e)}function V(t,i){if("string"===i){var e=t.toString;if(z(e))if(!$(n=e.call(t)))return n;if(z(s=t.valueOf))if(!$(n=s.call(t)))return n}else{var s;if(z(s=t.valueOf))if(!$(n=s.call(t)))return n;var n,r=t.toString;if(z(r))if(!$(n=r.call(t)))return n}throw new TypeError}function N(t){return!!t}function U(t){return""+t}function H(t){var i=j(t,3);return F(i)?i:U(i)}function q(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function z(t){return"function"==typeof t}function W(t){return"function"==typeof t}function G(t){switch(O(t)){case 3:case 4:return!0;default:return!1}}function J(t,i){var e=t[i];if(null!=e){if(!z(e))throw new TypeError;return e}}function Q(t){var i=J(t,n);if(!z(i))throw new TypeError;var e=i.call(t);if(!$(e))throw new TypeError;return e}function Y(t){return t.value}function X(t){var i=t.next();return!i.done&&i}function Z(t){var i=t.return;i&&i.call(t)}function K(t){var i=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return i;if(i!==c)return i;var e=t.prototype,s=e&&Object.getPrototypeOf(e);if(null==s||s===Object.prototype)return i;var n=s.constructor;return"function"!=typeof n||n===t?i:n}function tt(){var t={},i=[],e=function(){function t(t,i,e){this.gt=0,this.yt=t,this.vt=i,this.bt=e}return t.prototype["@@iterator"]=function(){return this},t.prototype[n]=function(){return this},t.prototype.next=function(){var t=this.gt;if(t>=0&&t<this.yt.length){var e=this.bt(this.yt[t],this.vt[t]);return t+1>=this.yt.length?(this.gt=-1,this.yt=i,this.vt=i):this.gt++,{value:e,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this.gt>=0&&(this.gt=-1,this.yt=i,this.vt=i),t},t.prototype.return=function(t){return this.gt>=0&&(this.gt=-1,this.yt=i,this.vt=i),{value:t,done:!0}},t}();return function(){function i(){this.yt=[],this.vt=[],this.xt=t,this.wt=-2}return Object.defineProperty(i.prototype,"size",{get:function(){return this.yt.length},enumerable:!0,configurable:!0}),i.prototype.has=function(t){return this._t(t,!1)>=0},i.prototype.get=function(t){var i=this._t(t,!1);return i>=0?this.vt[i]:void 0},i.prototype.set=function(t,i){var e=this._t(t,!0);return this.vt[e]=i,this},i.prototype.delete=function(i){var e=this._t(i,!1);if(e>=0){for(var s=this.yt.length,n=e+1;n<s;n++)this.yt[n-1]=this.yt[n],this.vt[n-1]=this.vt[n];return this.yt.length--,this.vt.length--,i===this.xt&&(this.xt=t,this.wt=-2),!0}return!1},i.prototype.clear=function(){this.yt.length=0,this.vt.length=0,this.xt=t,this.wt=-2},i.prototype.keys=function(){return new e(this.yt,this.vt,s)},i.prototype.values=function(){return new e(this.yt,this.vt,r)},i.prototype.entries=function(){return new e(this.yt,this.vt,o)},i.prototype["@@iterator"]=function(){return this.entries()},i.prototype[n]=function(){return this.entries()},i.prototype._t=function(t,i){return this.xt!==t&&(this.wt=this.yt.indexOf(this.xt=t)),this.wt<0&&i&&(this.wt=this.yt.length,this.yt.push(t),this.vt.push(void 0)),this.wt},i}();function s(t,i){return t}function r(t,i){return i}function o(t,i){return[t,i]}}function it(){return function(){function t(){this.Pt=new d}return Object.defineProperty(t.prototype,"size",{get:function(){return this.Pt.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this.Pt.has(t)},t.prototype.add=function(t){return this.Pt.set(t,t),this},t.prototype.delete=function(t){return this.Pt.delete(t)},t.prototype.clear=function(){this.Pt.clear()},t.prototype.keys=function(){return this.Pt.keys()},t.prototype.values=function(){return this.Pt.values()},t.prototype.entries=function(){return this.Pt.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[n]=function(){return this.keys()},t}()}function et(){var t=16,e=a.create(),s=n();return function(){function t(){this.St=n()}return t.prototype.has=function(t){var i=r(t,!1);return void 0!==i&&a.has(i,this.St)},t.prototype.get=function(t){var i=r(t,!1);return void 0!==i?a.get(i,this.St):void 0},t.prototype.set=function(t,i){return r(t,!0)[this.St]=i,this},t.prototype.delete=function(t){var i=r(t,!1);return void 0!==i&&delete i[this.St]},t.prototype.clear=function(){this.St=n()},t}();function n(){var t;do{t="@@WeakMap@@"+c()}while(a.has(e,t));return e[t]=!0,t}function r(t,e){if(!i.call(t,s)){if(!e)return;Object.defineProperty(t,s,{value:a.create()})}return t[s]}function o(t,i){for(var e=0;e<i;++e)t[e]=255*Math.random()|0;return t}function h(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):o(new Uint8Array(t),t):o(new Array(t),t)}function c(){var i=h(t);i[6]=79&i[6]|64,i[8]=191&i[8]|128;for(var e="",s=0;s<t;++s){var n=i[s];4!==s&&6!==s&&8!==s||(e+="-"),n<16&&(e+="0"),e+=n.toString(16).toLowerCase()}return e}}function st(t){return t.At=void 0,delete t.At,t}t("decorate",f),t("metadata",g),t("defineMetadata",m),t("hasMetadata",y),t("hasOwnMetadata",v),t("getMetadata",b),t("getOwnMetadata",x),t("getMetadataKeys",w),t("getOwnMetadataKeys",_),t("deleteMetadata",P)}(n)}()}(s||(s={}))},6515:(t,i,e)=>{"use strict";e.d(i,{X:()=>n});var s=e(655),n=function(t){function i(i){var e=t.call(this)||this;return e.It=i,e}return(0,s.ZT)(i,t),Object.defineProperty(i.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),i.prototype.kt=function(i){var e=t.prototype.kt.call(this,i);return!e.closed&&i.next(this.It),e},i.prototype.getValue=function(){var t=this,i=t.hasError,e=t.thrownError,s=t.It;if(i)throw e;return this.Ct(),s},i.prototype.next=function(i){t.prototype.next.call(this,this.It=i)},i}(e(6716).x)},1480:(t,i,e)=>{"use strict";e.d(i,{y:()=>d});var s=e(5642),n=e(5720),r=e(6766),o=e(278);function h(t){return 0===t.length?o.y:1===t.length?t[0]:function(i){return t.reduce((function(t,i){return i(t)}),i)}}var a=e(3912),c=e(8474),l=e(8846),d=function(){function t(t){t&&(this.kt=t)}return t.prototype.lift=function(i){var e=new t;return e.source=this,e.operator=i,e},t.prototype.subscribe=function(t,i,e){var r,o=this,h=(r=t)&&r instanceof s.Lv||function(t){return t&&(0,c.m)(t.next)&&(0,c.m)(t.error)&&(0,c.m)(t.complete)}(r)&&(0,n.Nn)(r)?t:new s.Hp(t,i,e);return(0,l.x)((function(){var t=o,i=t.operator,e=t.source;h.add(i?i.call(h,e):e?o.kt(h):o.Tt(h))})),h},t.prototype.Tt=function(t){try{return this.kt(t)}catch(i){t.error(i)}},t.prototype.forEach=function(t,i){var e=this;return new(i=u(i))((function(i,n){var r=new s.Hp({next:function(i){try{t(i)}catch(t){n(t),r.unsubscribe()}},error:n,complete:i});e.subscribe(r)}))},t.prototype.kt=function(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)},t.prototype[r.L]=function(){return this},t.prototype.pipe=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return h(t)(this)},t.prototype.toPromise=function(t){var i=this;return new(t=u(t))((function(t,e){var s;i.subscribe((function(t){return s=t}),(function(t){return e(t)}),(function(){return t(s)}))}))},t.create=function(i){return new t(i)},t}();function u(t){var i;return null!==(i=null!=t?t:a.v.Promise)&&void 0!==i?i:Promise}},6716:(t,i,e)=>{"use strict";e.d(i,{x:()=>c});var s=e(655),n=e(1480),r=e(5720),o=(0,e(1819).d)((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),h=e(3699),a=e(8846),c=function(t){function i(){var i=t.call(this)||this;return i.closed=!1,i.observers=[],i.isStopped=!1,i.hasError=!1,i.thrownError=null,i}return(0,s.ZT)(i,t),i.prototype.lift=function(t){var i=new l(this,this);return i.operator=t,i},i.prototype.Ct=function(){if(this.closed)throw new o},i.prototype.next=function(t){var i=this;(0,a.x)((function(){var e,n;if(i.Ct(),!i.isStopped){var r=i.observers.slice();try{for(var o=(0,s.XA)(r),h=o.next();!h.done;h=o.next()){h.value.next(t)}}catch(t){e={error:t}}finally{try{h&&!h.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}}))},i.prototype.error=function(t){var i=this;(0,a.x)((function(){if(i.Ct(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=t;for(var e=i.observers;e.length;)e.shift().error(t)}}))},i.prototype.complete=function(){var t=this;(0,a.x)((function(){if(t.Ct(),!t.isStopped){t.isStopped=!0;for(var i=t.observers;i.length;)i.shift().complete()}}))},i.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(i.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),i.prototype.Tt=function(i){return this.Ct(),t.prototype.Tt.call(this,i)},i.prototype.kt=function(t){return this.Ct(),this.Mt(t),this.Et(t)},i.prototype.Et=function(t){var i=this,e=i.hasError,s=i.isStopped,n=i.observers;return e||s?r.Lc:(n.push(t),new r.w0((function(){return(0,h.P)(n,t)})))},i.prototype.Mt=function(t){var i=this,e=i.hasError,s=i.thrownError,n=i.isStopped;e?t.error(s):n&&t.complete()},i.prototype.asObservable=function(){var t=new n.y;return t.source=this,t},i.create=function(t,i){return new l(t,i)},i}(n.y),l=function(t){function i(i,e){var s=t.call(this)||this;return s.destination=i,s.source=e,s}return(0,s.ZT)(i,t),i.prototype.next=function(t){var i,e;null===(e=null===(i=this.destination)||void 0===i?void 0:i.next)||void 0===e||e.call(i,t)},i.prototype.error=function(t){var i,e;null===(e=null===(i=this.destination)||void 0===i?void 0:i.error)||void 0===e||e.call(i,t)},i.prototype.complete=function(){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===i||i.call(t)},i.prototype.kt=function(t){var i,e;return null!==(e=null===(i=this.source)||void 0===i?void 0:i.subscribe(t))&&void 0!==e?e:r.Lc},i}(c)},5642:(t,i,e)=>{"use strict";e.d(i,{Hp:()=>y,Lv:()=>p});var s=e(655),n=e(8474),r=e(5720),o=e(3912),h=e(5);function a(){}var c=l("C",void 0,void 0);function l(t,i,e){return{kind:t,value:i,error:e}}var d=e(8380),u=e(8846),p=function(t){function i(i){var e=t.call(this)||this;return e.isStopped=!1,i?(e.destination=i,(0,r.Nn)(i)&&i.add(e)):e.destination=x,e}return(0,s.ZT)(i,t),i.create=function(t,i,e){return new y(t,i,e)},i.prototype.next=function(t){this.isStopped?b(function(t){return l("N",t,void 0)}(t),this):this.Bt(t)},i.prototype.error=function(t){this.isStopped?b(l("E",void 0,t),this):(this.isStopped=!0,this.Lt(t))},i.prototype.complete=function(){this.isStopped?b(c,this):(this.isStopped=!0,this.Ot())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},i.prototype.Bt=function(t){this.destination.next(t)},i.prototype.Lt=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},i.prototype.Ot=function(){try{this.destination.complete()}finally{this.unsubscribe()}},i}(r.w0),f=Function.prototype.bind;function g(t,i){return f.call(t,i)}var m=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var i=this.partialObserver;if(i.next)try{i.next(t)}catch(t){v(t)}},t.prototype.error=function(t){var i=this.partialObserver;if(i.error)try{i.error(t)}catch(t){v(t)}else v(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){v(t)}},t}(),y=function(t){function i(i,e,s){var r,h,a=t.call(this)||this;(0,n.m)(i)||!i?r={next:null!=i?i:void 0,error:null!=e?e:void 0,complete:null!=s?s:void 0}:a&&o.v.useDeprecatedNextContext?((h=Object.create(i)).unsubscribe=function(){return a.unsubscribe()},r={next:i.next&&g(i.next,h),error:i.error&&g(i.error,h),complete:i.complete&&g(i.complete,h)}):r=i;return a.destination=new m(r),a}return(0,s.ZT)(i,t),i}(p);function v(t){o.v.useDeprecatedSynchronousErrorHandling?(0,u.O)(t):(0,h.h)(t)}function b(t,i){var e=o.v.onStoppedNotification;e&&d.z.setTimeout((function(){return e(t,i)}))}var x={closed:!0,next:a,error:function(t){throw t},complete:a}},5720:(t,i,e)=>{"use strict";e.d(i,{Lc:()=>a,w0:()=>h,Nn:()=>c});var s=e(655),n=e(8474),r=(0,e(1819).d)((function(t){return function(i){t(this),this.message=i?i.length+" errors occurred during unsubscription:\n"+i.map((function(t,i){return i+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=i}})),o=e(3699),h=function(){function t(t){this.initialTeardown=t,this.closed=!1,this.Rt=null,this.Dt=null}var i;return t.prototype.unsubscribe=function(){var t,i,e,o,h;if(!this.closed){this.closed=!0;var a=this.Rt;if(a)if(this.Rt=null,Array.isArray(a))try{for(var c=(0,s.XA)(a),d=c.next();!d.done;d=c.next()){d.value.remove(this)}}catch(i){t={error:i}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(t)throw t.error}}else a.remove(this);var u=this.initialTeardown;if((0,n.m)(u))try{u()}catch(t){h=t instanceof r?t.errors:[t]}var p=this.Dt;if(p){this.Dt=null;try{for(var f=(0,s.XA)(p),g=f.next();!g.done;g=f.next()){var m=g.value;try{l(m)}catch(t){h=null!=h?h:[],t instanceof r?h=(0,s.ev)((0,s.ev)([],(0,s.CR)(h)),(0,s.CR)(t.errors)):h.push(t)}}}catch(t){e={error:t}}finally{try{g&&!g.done&&(o=f.return)&&o.call(f)}finally{if(e)throw e.error}}}if(h)throw new r(h)}},t.prototype.add=function(i){var e;if(i&&i!==this)if(this.closed)l(i);else{if(i instanceof t){if(i.closed||i.$t(this))return;i.jt(this)}(this.Dt=null!==(e=this.Dt)&&void 0!==e?e:[]).push(i)}},t.prototype.$t=function(t){var i=this.Rt;return i===t||Array.isArray(i)&&i.includes(t)},t.prototype.jt=function(t){var i=this.Rt;this.Rt=Array.isArray(i)?(i.push(t),i):i?[i,t]:t},t.prototype.Nt=function(t){var i=this.Rt;i===t?this.Rt=null:Array.isArray(i)&&(0,o.P)(i,t)},t.prototype.remove=function(i){var e=this.Dt;e&&(0,o.P)(e,i),i instanceof t&&i.Nt(this)},t.EMPTY=((i=new t).closed=!0,i),t}(),a=h.EMPTY;function c(t){return t instanceof h||t&&"closed"in t&&(0,n.m)(t.remove)&&(0,n.m)(t.add)&&(0,n.m)(t.unsubscribe)}function l(t){(0,n.m)(t)?t():t.unsubscribe()}},3912:(t,i,e)=>{"use strict";e.d(i,{v:()=>s});var s={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},2566:(t,i,e)=>{"use strict";e.d(i,{x:()=>n});var s=e(655);function n(t,i,e,s,n){return new r(t,i,e,s,n)}var r=function(t){function i(i,e,s,n,r,o){var h=t.call(this,i)||this;return h.onFinalize=r,h.shouldUnsubscribe=o,h.Bt=e?function(t){try{e(t)}catch(t){i.error(t)}}:t.prototype.Bt,h.Lt=n?function(t){try{n(t)}catch(t){i.error(t)}finally{this.unsubscribe()}}:t.prototype.Lt,h.Ot=s?function(){try{s()}catch(t){i.error(t)}finally{this.unsubscribe()}}:t.prototype.Ot,h}return(0,s.ZT)(i,t),i.prototype.unsubscribe=function(){var i;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var e=this.closed;t.prototype.unsubscribe.call(this),!e&&(null===(i=this.onFinalize)||void 0===i||i.call(this))}},i}(e(5642).Lv)},4975:(t,i,e)=>{"use strict";e.d(i,{h:()=>r});var s=e(6798),n=e(2566);function r(t,i){return(0,s.e)((function(e,s){var r=0;e.subscribe((0,n.x)(s,(function(e){return t.call(i,e,r++)&&s.next(e)})))}))}},8380:(t,i,e)=>{"use strict";e.d(i,{z:()=>n});var s=e(655),n={setTimeout:function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e=n.delegate;return((null==e?void 0:e.setTimeout)||setTimeout).apply(void 0,(0,s.ev)([],(0,s.CR)(t)))},clearTimeout:function(t){var i=n.delegate;return((null==i?void 0:i.clearTimeout)||clearTimeout)(t)},delegate:void 0}},6766:(t,i,e)=>{"use strict";e.d(i,{L:()=>s});var s="function"==typeof Symbol&&Symbol.observable||"@@observable"},3699:(t,i,e)=>{"use strict";function s(t,i){if(t){var e=t.indexOf(i);0<=e&&t.splice(e,1)}}e.d(i,{P:()=>s})},1819:(t,i,e)=>{"use strict";function s(t){var i=t((function(t){Error.call(t),t.stack=(new Error).stack}));return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}e.d(i,{d:()=>s})},8846:(t,i,e)=>{"use strict";e.d(i,{O:()=>o,x:()=>r});var s=e(3912),n=null;function r(t){if(s.v.useDeprecatedSynchronousErrorHandling){var i=!n;if(i&&(n={errorThrown:!1,error:null}),t(),i){var e=n,r=e.errorThrown,o=e.error;if(n=null,r)throw o}}else t()}function o(t){s.v.useDeprecatedSynchronousErrorHandling&&n&&(n.errorThrown=!0,n.error=t)}},278:(t,i,e)=>{"use strict";function s(t){return t}e.d(i,{y:()=>s})},8474:(t,i,e)=>{"use strict";function s(t){return"function"==typeof t}e.d(i,{m:()=>s})},6798:(t,i,e)=>{"use strict";e.d(i,{e:()=>n});var s=e(8474);function n(t){return function(i){if(function(t){return(0,s.m)(null==t?void 0:t.lift)}(i))return i.lift((function(i){try{return t(i,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}},5:(t,i,e)=>{"use strict";e.d(i,{h:()=>r});var s=e(3912),n=e(8380);function r(t){n.z.setTimeout((function(){var i=s.v.onUnhandledError;if(!i)throw t;i(t)}))}},5055:(t,i,e)=>{"use strict";e.d(i,{Km:()=>r,Zr:()=>s,n9:()=>o,rl:()=>n});const s={FullscreenChanged:"fullscreenChanged",PlayerFloatChanged:"playerFloatChanged",FloatingEnterStart:"floatingEnterStart",FloatingEnterStop:"floatingEnterStop",FloatingExitStart:"floatingExitStart",FloatingExitStop:"floatingExitStop"},n={OmidViewabilityThreshold:"OmidViewabilityThreshold"},r=Object.assign(Object.assign(Object.assign(Object.assign({Ready:"ready",Removed:"removed",SetupError:"setupError",IsViewable:"isViewable",SizeChanged:"sizeChanged",BrandingClicked:"brandingClicked",ImpressionPrice:"impressionPrice",ImpressionRevenue:"impressionRevenue"},{Play:"play",Pause:"pause",QualityChanged:"qualityChanged",PlayError:"playError",VolumeChanged:"volumeChanged"}),s),n),{AdClick:"adClick",AdPlay:"adPlay",AdPause:"adPause",AdImpression:"adImpression",AdCompleted25:"adCompleted25",AdCompleted50:"adCompleted50",AdCompleted75:"adCompleted75",AdCompleted100:"adCompleted100",AdSkipped:"adSkipped",AdError:"adError",AdStopped:"adStopped",AdCompanion:"adCompanion"});var o;!function(t){t.SetupError="SetupError",t.NoPlayer="NoPlayer",t.RenderError="RenderError",t.InvalidGUID="InvalidGUID"}(o||(o={}))},2817:(t,i,e)=>{"use strict";var s,n;e.d(i,{Ht:()=>r,bS:()=>o,lI:()=>s}),function(t){t.Chrome="chrome",t.Firefox="firefox",t.Edge="edge",t.Safari="safari",t.Opera="opera",t.Samsung="samsung",t.Facebook="facebook",t.InternetExplorer="ie"}(s||(s={})),function(t){t.Standard="standard",t.Webkit="webkit",t.Moz="moz",t.Ms="ms",t.O="o"}(n||(n={}));const r=[{name:n.Standard,keys:{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"}},{name:n.Webkit,keys:{fullscreenEnabled:"webkitFullscreenEnabled",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:n.Webkit,keys:{fullscreenEnabled:"webkitSupportsFullscreen",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitEnterFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:n.Moz,keys:{fullscreenEnabled:"mozFullScreenEnabled",fullscreenElement:"mozFullScreenElement",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenchange:"mozfullscreenchange",fullscreenerror:"mozfullscreenerror"}},{name:n.Ms,keys:{fullscreenEnabled:"msFullscreenEnabled",fullscreenElement:"msFullscreenElement",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",fullscreenchange:"MSFullscreenChange",fullscreenerror:"MSFullscreenError"}}];var o;!function(t){t.Self="_self",t.Blank="_blank",t.Parent="_parent",t.Top="_top"}(o||(o={}))},2820:(t,i,e)=>{"use strict";var s,n,r;e.d(i,{Gj:()=>s,Hs:()=>_,Ig:()=>a,Ng:()=>c,PK:()=>m,QO:()=>u,Rq:()=>o,Yk:()=>p,_7:()=>f,ed:()=>d,hQ:()=>y,iu:()=>l,jG:()=>g,mr:()=>P,oV:()=>x,pT:()=>w,s6:()=>n,sN:()=>b,s_:()=>r,vF:()=>h}),function(t){t.Invisible="cnx-mod-invisible",t.HovarableButton="cnx-ui-btn-hoverable",t.HoverStart="cnx-mod-hover-s",t.HoverEnd="cnx-mod-hover",t.HoverBoom="cnx-mod-boom",t.DisplayNone="cnx-mod-display-none",t.Active="cnx-mod-active",t.HideOnVolumeHover="cnx-hide-on-volume-hover",t.HideOnSingleVideo="cnx-hide-on-single-video",t.NoTransition="cnx-mod-no-transition",t.Collapsable="cnx-mod-collapsable",t.HasCustomScrollbar="cnx-mod-scrollbar",t.Show="cnx-mod-show",t.Hide="cnx-mod-hide",t.NoHeight="cnx-mod-no-height",t.OnHold="cnx-mod-onhold",t.ForceLineBreak="cnx-mod-force-line-break",t.HideOnAdOverlay="cnx-mod-ad-overlay-none",t.HideOnPodLoadingScreen="cnx-mod-pod-loading-none"}(s||(s={})),function(t){t.Fullscreen="cnx-in-fullscreen",t.Ad="cnx-in-ad",t.AdNonLinear="cnx-in-ad-non-linear",t.AdOverlayType="cnx-in-ad-overlay",t.AdFullSize="cnx-in-ad-full",t.AdShowCard="cnx-ad-show-card",t.ShowControls="cnx-in-show-controls",t.Mobile="cnx-in-mobile",t.Desktop="cnx-in-desktop",t.Muted="cnx-in-mute",t.Collapsed="cnx-in-collapse",t.GalleryPortrait="cnx-in-g-portrait",t.GalleryLandscape="cnx-in-g-landscape",t.ContextController="cnx-context-controller",t.HideUI="cnx-in-hide-ui",t.PodLoadingScreen="cnx-in-pod-loading",t.AdShowCountdown="cnx-ad-show-countdown",t.CloseOn="cnx-close-on",t.CloseOff="cnx-close-off",t.CloseHover="cnx-close-hover",t.CloseFloatOn="cnx-close-float-on",t.CloseFloatOff="cnx-close-float-off",t.CloseFloatHover="cnx-close-float-hover",t.UiInView="cnx-ui-in-view"}(n||(n={})),function(t){t.Playing="cnx-is-playing",t.Paused="cnx-is-paused",t.Stopped="cnx-is-stopped",t.Preroll="cnx-is-preroll",t.Postroll="cnx-is-postroll",t.Loading="cnx-is-loading",t.LiveEnded="cnx-live-ended"}(r||(r={}));const o={Xxl:"cnx-bp-xxl-v",Xl:"cnx-bp-xl-v",Lg:"cnx-bp-lg-v",Md:"cnx-bp-md-v",Sm:"cnx-bp-sm-v",Xs:"cnx-bp-xs-v",Xxs:"cnx-bp-xxs-v"},h={Xxl:"cnx-bp-xxl-st",Xl:"cnx-bp-xl-st",Lg:"cnx-bp-lg-st",Md:"cnx-bp-md-st",Sm:"cnx-bp-sm-st",Xs:"cnx-bp-xs-st",Xxs:"cnx-bp-xxs-st"};var a,c,l,d,u,p,f;!function(t){t.Responsive="cnx-size-responsive",t.Fixed="cnx-size-fixed"}(a||(a={})),function(t){t.ClickOption="cnx-cm-item--click",t.ToggleOption="cnx-cm-item--toggle",t.SubmenuOption="cnx-cm-item--submenu",t.ItemIcon="cnx-cm-item__icon",t.ItemTitle="cnx-cm-item__title",t.ItemExtra="cnx-cm-item__extra",t.Items="cnx-cm-items",t.Container="cnx-cm-container"}(c||(c={})),function(t){t.Icons="cnx-color-icon",t.TooltipText="cnx-color-tt-text",t.TooltipBackground="cnx-color-tt-bg",t.AccentColor="cnx-color-accent",t.PrimaryColor="cnx-color-primary",t.SecondaryColor="cnx-color-secondary",t.TitleComponent="cnx-title-component",t.TitleLink="cnx-color-title-link",t.SlideProgressBar="cnx-slides-progress-bar",t.ProgressFill="cnx-progress-fill"}(l||(l={})),function(t){t.InheritTitleFontFamily="cnx-inherit-title-font-family",t.InheritBodyFontFamily="cnx-inherit-body-font-family"}(d||(d={})),function(t){t.Connatix="#0099FF",t.Icons="#FFFFFF",t.PrimaryBackground="#F1F1F1",t.PrimaryForeground="#000000",t.SecondaryBackground="#000000",t.SecondaryForeground="#F1F1F1",t.AccentForeground="#FFFFFF"}(u||(u={})),function(t){t.CaptionContainer="cnx-captions-text-holder"}(p||(p={})),function(t){t.MainClass="cnx-float",t.TransitionClass="cnx-float-transition",t.AlwaysFloating="cnx-always-floating"}(f||(f={}));const g={FadeOutBase:"cnx-fade-out-base",FadeOut:"cnx-fade-out",FadeInBase:"cnx-fade-in-base",FadeIn:"cnx-fade-in"};var m,y,v;!function(t){t.CurrentSlide="cnx-slide-current",t.NextSlide="cnx-slide-next",t.SlideLeft="cnx-slide-left",t.SlideRight="cnx-slide-right"}(m||(m={})),function(t){t.OpacityInTransition="cnx-tooltip-animation-in"}(y||(y={})),function(t){t.Card="cnx-g-card",t.CardSlot="cnx-g-card-slot",t.CardImage="cnx-g-card-image",t.CardText="cnx-g-card-text",t.CardTextContainer="cnx-g-card-text-container",t.CardPlaceholder="cnx-g-card-placeholder",t.CardRail="cnx-g-rail",t.StyleDetailed="cnx-g-style-detailed",t.StyleVisual="cnx-g-style-visual",t.ExploreMore="cnx-g-explore-more",t.FadeOut="cnx-g-fade-out"}(v||(v={}));const b={MainContainer:"cnx-main-container",MainContainerFlex:"cnx-main-container-flex",PlayerWrapper:"cnx-player-wrapper",ImagePlaceholder:"cnx-image-placeholder"},x="cnx-ratio",w="cnx-hide-video",_={Text:"cnx-skip-ad-text",Timer:"cnx-timer-loader",Icon:"cnx-skip-ad-icon",SkipAdButton:"cnx-skip-ad-button",InTimer:"cnx-skip-ad-in-timer"},P={Icon:"cnx-pod-open-new-icon",Button:"cnx-pod-read-more-btn",ButtonContainer:"cnx-pod-read-more-container",Wrapper:"cnx-pod-read-more-wrapper",BackgroundImg:"cnx-pod-loading-background",InfoContainer:"cnx-pod-loading-info",FallbackContainer:"cnx-pod-loading-fallback",SlotCountText:"cnx-pod-slot-count-text"}},45:(t,i,e)=>{"use strict";e.d(i,{g:()=>s,x:()=>n});const s=JSON.parse('{"version":161155,"domainPrefix":"","logToConsole":false,"logToServer":true,"env":"production"}'),n=!0},782:(t,i,e)=>{"use strict";var s,n;e.d(i,{Uh:()=>n,Xh:()=>s,dP:()=>r}),function(t){t.SessionRendered="rendered",t.SessionView="enter_view"}(s||(s={})),function(t){t.UserInteraction="userInteraction",t.GeneralUserInteraction="generalUserInteraction",t.CanStart="canStart",t.Destroy="destroy"}(n||(n={}));const r={StateChanged:"stateChanged"}},5049:(t,i,e)=>{"use strict";e.d(i,{x:()=>s});const s="//securepubads.g.doubleclick.net/tag/js/gpt.js"},2157:(t,i,e)=>{"use strict";e.d(i,{XY:()=>n,f3:()=>r,fJ:()=>h,kd:()=>a,xs:()=>o});var s=e(289);const n=200,r=31,o={[s.ProtoAdType.Video]:2e3,[s.ProtoAdType.Overlay]:1e3,[s.ProtoAdType.Nonlinear]:1e3},h=.5,a="connatix.com"},308:(t,i,e)=>{"use strict";e.d(i,{M:()=>r,a:()=>n});var s=e(289);const n=[s.ProtoDeviceType.Smartphone,s.ProtoDeviceType.Tablet];var r;!function(t){t.Ios="ios",t.Android="android",t.Mac="macos",t.Windows="windows",t.Linux="linux",t.IPadOS="ipados"}(r||(r={}))},7577:(t,i,e)=>{"use strict";e.d(i,{Fk:()=>n,Kp:()=>r,a8:()=>o,br:()=>s,ym:()=>h});const s="https://connatix.com/privacy-policy/",n="v",r="pid",o="sid",h="cid"},9115:(t,i,e)=>{"use strict";e.d(i,{T9:()=>s,Y0:()=>h,oG:()=>c,p7:()=>n,s_:()=>o,ti:()=>a,uD:()=>r});const s=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,n=36e5,r=6e4,o=1e3,h=60,a=864e5,c=60},9078:(t,i,e)=>{"use strict";var s,n;e.d(i,{fI:()=>n,r5:()=>r,zc:()=>s}),function(t){t.Fullscreen="fullscreen",t.Normal="normal",t.Thumbnail="thumbnail"}(s||(s={})),function(t){t.AdLoaded="AdLoaded",t.AdStarted="AdStarted",t.AdStopped="AdStopped",t.AdSkipped="AdSkipped",t.AdSkippableStateChange="AdSkippableStateChange",t.AdSizeChange="AdSizeChange",t.AdLinearChange="AdLinearChange",t.AdDurationChange="AdDurationChange",t.AdExpandedChange="AdExpandedChange",t.AdRemainingTimeChange="AdRemainingTimeChange",t.AdVolumeChange="AdVolumeChange",t.AdImpression="AdImpression",t.AdVideoStart="AdVideoStart",t.AdVideoFirstQuartile="AdVideoFirstQuartile",t.AdVideoMidpoint="AdVideoMidpoint",t.AdVideoThirdQuartile="AdVideoThirdQuartile",t.AdVideoComplete="AdVideoComplete",t.AdClickThru="AdClickThru",t.AdInteraction="AdInteraction",t.AdUserAcceptInvitation="AdUserAcceptInvitation",t.AdUserMinimize="AdUserMinimize",t.AdUserClose="AdUserClose",t.AdPaused="AdPaused",t.AdPlaying="AdPlaying",t.AdLog="AdLog",t.AdError="AdError"}(n||(n={}));const r="nonLinearCloseClick"},1730:(t,i,e)=>{"use strict";e.d(i,{e:()=>h,j:()=>s});var s,n=e(8423);class r{}r.clientAb0=(0,n.Vm)([50,50]),r.clientAb1=(0,n.Vm)([50,50]);class o{}o.clientAb0=(0,n.Vm)([50,50]),o.clientAb1=(0,n.Vm)([50,50]),function(t){t[t.ElementsABService=0]="ElementsABService",t[t.PlayspaceABService=1]="PlayspaceABService"}(s||(s={}));class h{static get clientAb0(){return this.getABValueForKey("clientAb0")}static get clientAb1(){return this.getABValueForKey("clientAb1")}static getABValueForKey(t){return this.abServiceType===s.PlayspaceABService?o[t]:r[t]}}},5348:(t,i,e)=>{"use strict";e.d(i,{$:()=>o});const s="ats-liveramp-envelope-request";var n=e(289),r=e(8423);class o{static getEnvelopeFromParentAts(t){var i;return(null===(i=o.envelope)||void 0===i?void 0:i.envelope)?Promise.resolve():new Promise((i=>{if(!t.ats)return o.communicateViaPostMessage(t),void i();t.ats.retrieveEnvelope().then((e=>{e?(o.envelope=JSON.parse(e),i()):(o.communicateViaPostMessage(t),i())}))}))}static communicateViaPostMessage(t){o.dispatchEnvelopeRequestEvent(t),o.addEnvelopeListener()}static dispatchEnvelopeRequestEvent(t){try{t.postMessage(s,"*")}catch(i){void 0!==t.contentWindow&&t.contentWindow.postMessage(s,"*")}}static receiveEnvelopeListener(t){t&&t.data&&"ats-liveramp-envelope-result"===t.data.message&&t.data.result&&(o.envelope=JSON.parse(t.data.result),window.removeEventListener("message",o.receiveEnvelopeListener))}static addEnvelopeListener(){window.addEventListener("message",o.receiveEnvelopeListener,!1)}static getEnvelopeWithConsent(t,i){return new Promise(((e,s)=>{i.isConsentConnatix()?o.getEnvelopeFromParentAts(t).then((()=>{var t;(null===(t=o.envelope)||void 0===t?void 0:t.envelope)?e(o.envelope.envelope):setTimeout((()=>s()),500)})):setTimeout((()=>s()),500)}))}static getEnvelope(t,i){(0,r.Up)((()=>o.getEnvelopeWithConsent(t,i))).catch((()=>{}))}static setEnvelopeStatus(t){o.envelopeStatus=t}static getValidEnvelope(){var t;return(null===(t=o.envelope)||void 0===t?void 0:t.envelope)&&o.envelopeStatus===n.LiveRampEnvelopeStatusEnum.Ok?o.envelope.envelope:null}static wasRequestEnhanced(t){var i;return(null===(i=o.envelope)||void 0===i?void 0:i.envelope)&&t===n.LiveRampEnvelopeStatusEnum.Ok}}o.envelope=null,o.envelopeStatus=n.LiveRampEnvelopeStatusEnum.Ok},4280:(t,i,e)=>{"use strict";e.d(i,{_:()=>u});var s=e(5049);const n=["adBanner","banner-search","abc_banner","Banner_Top","ad_container","pub_300x250","pub_300x250m","pub_728x90","text-ad","text_ad","textAd","text-ad-links","text_ads","text-ads","text-ad-links"],r="cnxtestadblock";var o=e(1561),h=e(8423),a=e(7726),c=e(7427),l=e(6515),d=e(4975);class u{static get isBannerBlocked(){return this.Ut}static onAdBlockerDetected(){return this.qt.asObservable().pipe((0,d.h)((t=>null!==t)))}static detectUsingCSS(t){try{let i=!1;t.document.body.insertAdjacentHTML("beforeend",this.zt());const e=t.document.getElementById(r);return 0!==e.getBoundingClientRect().height&&0!==e.getBoundingClientRect().width||(i=!0),t.document.body.removeChild(e),this.Wt(i),i}catch(t){return this.Wt(!1),!1}}static detectUsingScript(){return new Promise((t=>{const i=(0,h.pE)(window).topFrame,e=i=>{this.qt.next(i),this.qt.complete(),t(i)};i.googletag&&e(!1),(0,o.dZ)({src:s.x},i.document.head,i,(()=>i.googletag&&(0,c.QM)(i.googletag.getVersion())?e(!1):e(!0)),(()=>e(!0)))}))}static Wt(t){null!==this.Ut&&this.Ut!==t&&(0,a.n)({message:"AdBlockerDetection_changed_after_new_global",level:a.D.INFO,exception:`${this.Ut}`},{throttle:2,sendMaxLog:!1}),this.Ut=t,this.Ut&&(this.qt.next(!0),this.qt.complete())}static zt(){return`<style>.adBanner{background-color: transparent; height: 1px !important; width: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important; display:block !important; }</style><div id="cnxtestadblock" class="${n.join(" ")}"></div>`}}u.Ut=null,u.qt=new l.X(null)},7417:(t,i,e)=>{"use strict";var s;!function(t){t.prebid="prebid",t.bid="bid",t.win="win",t.impression="impression",t.viewableImpression="viewableImpression",t.postbid="postbid",t.initAd="initAd",t.request="request",t.startAd="startAd"}(s||(s={}))},497:(t,i,e)=>{"use strict";e.d(i,{S:()=>s});class s{}s.MaxLogOverflow=1e3,s.maxLogOverflowCount={},s.logCount={},s.maxLogSent={},s.sessionId="",s.pageFocus=!1,s.playerDestroyed=!1,s.incrementLogCount=t=>{s.logCount[t]?(++s.maxLogOverflowCount[t],++s.logCount[t]):(s.logCount[t]=1,s.maxLogOverflowCount[t]=1)},s.isMaxLog=(t,i)=>!!(s.logCount[t]&&s.logCount[t]>i),s.isMaxLogOverflow=t=>s.maxLogOverflowCount[t]>s.MaxLogOverflow&&(s.maxLogOverflowCount[t]=1,!0),s.setMaxLogSent=t=>{s.maxLogSent[t]=!0},s.isMaxLogSent=t=>!!s.maxLogSent[t]},1886:(t,i,e)=>{"use strict";e.d(i,{f:()=>n});var s=e(7577);class n{static getCidKeyValueObject(){return!!this.customerId&&{[s.ym]:this.customerId}}}n.customerId=null},7910:(t,i,e)=>{"use strict";e.d(i,{X:()=>a});var s=e(308),n=e(8423),r=e(2817),o=e(6615),h=e(7427);class a{constructor(t){this.Gt=t,this.Jt=100,this.Qt=(0,n.pE)(window).topFrame,this.Yt=s.a.indexOf(this.Gt.browser.device)>-1,this.Xt=(0,n.dz)(),this.Zt={browserType:this.Kt(),browserVersion:this.Gt.browser.browserVersion},this.ii=this.ei(),this.si=this.pageUrl.substr(0,this.Jt),this.ni=(0,o._Y)(this.si)}Kt(){let t;return Object.keys(r.lI).forEach((i=>{this.Gt.browser.browserType.toLowerCase().includes(r.lI[i])&&(t=r.lI[i])})),t}ei(){let t,i=0;const e=this.Gt.browser.osCode.split("_"),n=e[0].toLowerCase();return Object.keys(s.M).forEach((i=>{n.includes(s.M[i])&&(t=s.M[i])})),t===s.M.IPadOS&&(t=s.M.Ios),e.length>1&&(i=parseFloat(`${e[1]||0}.${e[2]||0}`)),{os:t,osVersion:i}}get device(){return this.Gt.browser.device}get browser(){return this.Zt}get os(){return this.ii}get geoLocation(){return this.Gt.geoLocation}get pageUrl(){return this.Gt.pageUrl||""}get pageUrlTrunc(){return this.si}get pageDomain(){return this.ni}get isMobile(){return this.Yt}get isInApp(){return(0,h.QM)(this.Gt.bundleID)}get isInAppAndroid(){return this.isInApp&&this.os.os===s.M.Android}get playerId(){return this.Gt.playerId}get appId(){return this.Xt}get bundleID(){return(0,h.QM)(this.Gt.iOSAppID)?this.Gt.iOSAppID:this.Gt.bundleID}get domainURL(){return this.Gt.domainURL}get storeURL(){return this.Gt.storeURL}get explorationMode(){return this.Gt.explorationMode}get appName(){return this.Gt.appName}get appCategories(){return this.Gt.appCategories}get appVersion(){return this.Gt.appVersion}get sdkVersion(){return this.Gt.sdkVersion}get appPrivacyPolicy(){return this.Gt.appPrivacyPolicy}get appIsPaid(){return this.Gt.appIsPaid}get deviceId(){return this.Gt.deviceId}get topWindow(){return this.Qt}get appPageURL(){return this.Gt.appPageURL}get isOVPDomain(){return this.Gt.isOVPDomain}}},1995:(t,i,e)=>{"use strict";e.d(i,{C:()=>s});class s{constructor(){this.ri=!1,this.promise=new Promise(((t,i)=>{this.oi=t,this.ai=i}))}ci(){this.ri||(this.ri=!0)}resolve(t){this.ci(),this.oi(t)}reject(t){this.ci(),this.ai(t)}get isPending(){return!this.ri}}},7754:(t,i,e)=>{"use strict";e.d(i,{P:()=>a});var s,n=e(7427),r=e(289);!function(t){t[t.Desktop=2]="Desktop",t[t.SmartTV=3]="SmartTV",t[t.Smartphone=4]="Smartphone",t[t.Tablet=5]="Tablet",t[t.GameConsole=6]="GameConsole",t[t.Unrecognized=7]="Unrecognized"}(s||(s={}));const o={[r.ProtoDeviceType.Desktop]:s.Desktop,[r.ProtoDeviceType.Smartphone]:s.Smartphone,[r.ProtoDeviceType.Tablet]:s.Tablet,[r.ProtoDeviceType.GameConsole]:s.GameConsole,[r.ProtoDeviceType.SmartTV]:s.SmartTV,[r.ProtoDeviceType.WearableComputer]:s.Unrecognized,[r.ProtoDeviceType.PDA]:s.Unrecognized,[r.ProtoDeviceType.Unrecognized]:s.Unrecognized},h="cnx_fraud_sensor";class a{constructor(t,i,e,s){this.di=t,this.ui=i,this.pi=e,this.gi(s)}addFraudSensorScript(){if(this.ui.getElementById(h))return;const t={id:h,src:this.di.setupMacros("https://s.srvsynd.com/2/234175/analytics.js?dt=2341751597675869250012&di=[DOMAIN]&ui=[FS_USER_ID]&md=[FS_MEDIA_TYPE]&ap=[FS_DEVICE_IDENT]&sr=[CNX_SUPPLIER_ID]&pp=[PUBLISHER_ID]&ti=[SESSION_ID]&de=[FS_DEVICE_TYPE]&to=[MGTO]&pv=[MGID]")};this.ui.insertScript(t,null,"FraudSensor_script_error")}gi(t){t=(0,n.QM)(t)?t:"00000000-0000-0000-0000-000000000000";const{lookupId:i,lookupResponseCode:e,publisherAdsTxt:s,deviceIdentifier:r}=this.pi,h=o[this.pi.deviceType];this.di.setPublisherId(s),this.di.setUserId(t),this.di.setFraudSensorMacros({lookupId:i,lookupResponseCode:e,deviceType:h,mediaType:2,deviceIdentifier:r})}}},8804:(t,i,e)=>{"use strict";e.d(i,{a:()=>q});var s=e(289),n=e.n(s),r=e(7726),o=e(8423),h=e(1561),a=e(9446),c=e(7398),l=e(6438),d=e(7910),u=e(6615),p=e(45),f=e(497),g=e(7427),m=e(3030),y=e(5055),v=e(2356),b=e(1730),x=e(7272),w=e(3352),_=e(1580),P=e(3217),S=e(3810),A=e(5880),I=e(782),k=e(2820),C=e(649),T=e(7754),M=e(6284),E=e(3640),B=e(4280),L=e(9207),O=e(6243),R=e(7382),D=e(5732),F=e(4974),$=e(525),j=e(8852),V=e(7577),N=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};const U="player_instance",H=",";class q extends A._{constructor(t,i,e,s,n,r,o){super(),this.services=t,this.GLOBAL=i,this.mi=e,this.yi=s,this.vi=n,this.bi=r,this.readyCallback=o,this.xi={},this.wi="<cnx-placeholder></cnx-placeholder>",this._i=100,this.Pi=1e3,this.isServerlessMode=!1,this.Si=!1,this.Ai=[],this.Ii="{{omidVerificationClient}}",this.ki=[],this.mi&&this.Ci(),B._.detectUsingCSS(this.GLOBAL),this.Ti=(0,h.sw)(this.GLOBAL)}initUrlSuffixer(t){const i=new L.f;if(t.bandwidthLoggingState===s.ProtoBandwidthLoggingEnum.Disabled)return i;const e=this.Mi(t);return i.setUrlParams({domain:$.n.bundleDomain,urlParams:[(0,j.IS)(e,t.playerId)]}),i}Ei(){const t={playerId:this.externalAttributes.playerId,_appSettings:this.externalAttributes._appSettings,settings:{_connatixInternals:this.externalAttributes.settings._connatixInternals,advertising:{},customization:{},rendering:{},plugins:{}}};this.externalAttributes.customParam1&&(t.customParam1=this.externalAttributes.customParam1),this.externalAttributes.customParam2&&(t.customParam2=this.externalAttributes.customParam2),this.externalAttributes.customParam3&&(t.customParam3=this.externalAttributes.customParam3),this.externalAttributes.customParam4&&(t.customParam4=this.externalAttributes.customParam4),this.externalAttributes.customParam5&&(t.customParam5=this.externalAttributes.customParam5),this.externalAttributes.settings.useExternalViewabilityService&&(t.settings.useExternalViewabilityService=this.externalAttributes.settings.useExternalViewabilityService),this.externalAttributes=t}Bi(t){const i=this.GLOBAL.frameElement;if(!(0,h.GF)(i))return;let e=!0;i&&t&&(e=!1),e?(0,h.MV)(i):(0,h.Ho)(i)}Li(t,i){try{return this.Oi(t,i)}catch(t){return null}}Ri(t){let i;try{i=eval(t)}catch(e){i=t.replace(/\[(\d+)]/g,":nth-child($1)")}return i}Di(t,i){const e=this.Li(t,i);return null===e?new Promise((e=>{setTimeout((()=>{e(this.Di(t,i))}),this._i)})):Promise.resolve(e)}Fi(t,i){const e=this.Ri(t);return Promise.resolve(this.Di(e,i))}Oi(t,i){let e;return t.split(/(\.cnxEq\(\d+\))/).filter((t=>t)).forEach((t=>{e=t.includes("cnxEq")?this.$i(e,t):e?e.querySelectorAll(t):(0,h.Wb)(t,i)})),e?(e.hasOwnProperty("length")&&(e=e.length>0?e[0]:null),e):null}$i(t,i){const e=/\d+/g.exec(i),s=parseInt(e[0],10);return s>t.length?(0,m.Sz)(t)[t.length-1]:(0,m.Sz)(t)[s]}ji(){return this.yi?s.ProtoImplementationType.Amp:s.ProtoImplementationType.Web}Vi(t,i){const e=(0,o.pE)(this.GLOBAL);let s;return s=(0,g.$K)(this.externalAttributes.settings.rendering.forceInsertPath)?this.externalAttributes.settings.rendering.forceInsertPath:i.forceInsertPath,new Promise(((n,r)=>{let o=(0,h.G$)(this.wi,this.GLOBAL);if(s||t.tag.parentNode===this.GLOBAL.document.head&&(!e.topChildFrame||i.renderInFrame)){let t,s,r;e.topChildFrame&&(0,h.IV)(e.topChildFrame.frameElement,k.Gj.DisplayNone),t=(0,g.QM)(this.externalAttributes.settings.rendering.containerSelector)?this.externalAttributes.settings.rendering.containerSelector:i.containerSelector,s=(0,g.$K)(this.externalAttributes.settings.rendering.insertPosition)?this.externalAttributes.settings.rendering.insertPosition:i.insertPosition,r=(0,g.$K)(this.externalAttributes.settings.rendering.position)?this.externalAttributes.settings.rendering.position:i.position,this.Fi(t,e.topFrame).then((t=>{this.Ni(t,o,s,r),n({insertContainer:o,insertWindow:e.topFrame})}))}else e.topChildFrame&&!i.renderInFrame?(o=(0,h.G$)(this.wi,e.topFrame),e.topChildFrame.frameElement.parentNode.insertBefore(o,e.topChildFrame.frameElement),(0,h.cn)(e.topChildFrame.frameElement,k.Gj.DisplayNone),n({insertContainer:o,insertWindow:e.topFrame})):(t.tag.parentNode.insertBefore(o,t.tag),n({insertContainer:o}))}))}Ui(t,i,e){(0,h.IS)(i,t,e)}Hi(t,i,e){switch(e){case s.ProtoPlayerInsertMode.BeforeContainer:t.parentElement.insertBefore(i,t);break;case s.ProtoPlayerInsertMode.ReplaceContainer:t.parentElement.insertBefore(i,t),(0,h.bX)(t);break;case s.ProtoPlayerInsertMode.HideContainer:t.parentElement.insertBefore(i,t),(0,h.MV)(t);break;case s.ProtoPlayerInsertMode.AfterContainer:t.nextElementSibling?t.parentElement.insertBefore(i,t.nextElementSibling):t.parentElement.appendChild(i)}}Ni(t,i,e,n){e===s.ProtoPlayerInsertMode.WithinContainer?this.Ui(t,i,n):this.Hi(t,i,e)}qi(t,i=[]){t.lineItems=[...t.lineItems,...i];const e=t.lineItems.length;t.lineItems=(0,m.qy)("advertiserLineItemId",t.lineItems),e!==t.lineItems.length&&(0,r.n)({level:r.D.WARN,message:"Loader_duplicated_adsources",callStack:"_"})}zi(t,i){const e=t.players[i],{playerModel:n,globalDomUtilsService:r,urlSuffixerService:o}=this.xi[i];if(this.Wi(t.cookieSyncUrls),this.services.UserManagerService.setGeoLocation(t.geoLocation),f.S.sessionId=e.sessionId,this.Gi.addPlayerSession(e.playerId,e.sessionId),!n)return void this.registerApiError(y.n9.SetupError,"No playlist was provided!");const h=new d.X({iOSAppID:this.mi&&!this.vi?t.iOSAppID:null,browser:t.browser,geoLocation:t.geoLocation,pageUrl:this.pageUrl,playerId:n.playerId,explorationMode:t.explorationMode,bundleID:this.externalAttributes._appSettings.bundleID,domainURL:this.externalAttributes._appSettings.domainURL,storeURL:this.externalAttributes._appSettings.storeURL,appCategories:this.externalAttributes._appSettings.appCategories,appIsPaid:this.externalAttributes._appSettings.appIsPaid,appName:this.externalAttributes._appSettings.appName,appPrivacyPolicy:this.externalAttributes._appSettings.appPrivacyPolicy,appVersion:this.externalAttributes._appSettings.appVersion,sdkVersion:this.externalAttributes._appSettings.sdkVersion,deviceId:this.externalAttributes._appSettings.deviceID,appPageURL:this.externalAttributes._appSettings.appPageURL,isOVPDomain:this.bi}),a=new v.v(r),u=this.getViewabilityService(n,a);B._.detectUsingCSS(n.global);const p=new l.c(n,t.geoLocation,h.pageUrl,h.pageDomain,this.externalAttributes._appSettings,this.Ti,t.publisherNetworkCode),m={services:{GlobalDomUtilsService:r,ViewabilityService:u,TrackingService:this.Qi(n,t,i),ResizeObserver:new c.a(n.global),UserManagerService:this.services.UserManagerService,MacrosService:p,EventsStorageService:this.services.EventsStorageService,PageFocusService:a,InteractionService:new M.k(n.global,h.isMobile),UrlSuffixerService:o},config:h};B._.isBannerBlocked&&m.services.TrackingService.trackSessionAdBlocker(s.ProtoAdBlockDetectionTypeEnum.Banner),m.services.UserManagerService.setPageUrl(m.config.pageUrl);const b=this.ji();m.services.TrackingService.setImplementationTypeOnMeta(b),n.externalMacros&&m.services.MacrosService.addExtraMacros(n.externalMacros),m.services.UserManagerService.onEvent([x.k.CCPA_INFO_RECEIVED]).then((()=>{m.services.MacrosService.setUsPrivacyString(m.services.UserManagerService.getUsPrivacyString())})),m.services.UserManagerService.onEvent([x.k.CONSENT_DATA_UPDATE]).then((()=>{m.services.TrackingService.updateMetadataModel({userId:m.services.UserManagerService.getTrackableUser()});const t=m.services.UserManagerService.getConsentPayload();if(m.services.TrackingService.hasGdprConsentPayload=(0,g.QM)(t),this.services.UserManagerService.gdprConsentMode===s.ProtoGdprConsentModeEnum.NoConsent||this.mi){const t=n.lineItemSettings.lineItems.filter((t=>(0,g.QM)(t.vendorId))).every((t=>this.services.UserManagerService.isConsent(t.vendorId)));this.services.UserManagerService.gdprConsentMode=t?s.ProtoGdprConsentModeEnum.AllGood:s.ProtoGdprConsentModeEnum.NotAllDemandConsent}}));const w={wasPlayerReloaded:this.Gi.wasPlayerReloaded(e.playerId),wasPlayerInView:this.Gi.getSessionInView(e.playerId)};this.renderer=this.getRendererInstance(n,m,w,this.externalAttributes._appSettings),this.subscribe(I.Xh.SessionView,this.renderer,(()=>{this.Gi.addSessionInView(e.playerId)})),this.subscribe(I.Xh.SessionRendered,this.renderer,(()=>{this.Yi(p,r,m.config)}));const _=Object.assign({configEnums:this.getApiConfigEnums(),configEvents:this.getApiConfigEvents()},this.renderer.getApiMethods());let P=e.customJsCode;if(P){const t=`${U}_${m.config.appId}`;this.GLOBAL[t]=_,P=P.cnx_replaceAll(`"{{${U}}}"`,`window.${t}`)}this.renderer.init((()=>{this.Xi(P)}))?this.registerApiSuccess(_):this.registerApiError(y.n9.RenderError,"Player size under supported value")}Qi(t,i,e){return t.disableTracking?new w.G:new a.e({userManagerService:this.services.UserManagerService,browser:i.browser,geoLocation:i.geoLocation,playerId:t.playerId,userId:this.services.UserManagerService.getTrackableUser(),sessionId:i.players[e].sessionId,pageUrl:this.pageUrl,bundleId:this.externalAttributes._appSettings.bundleID,customParam1:this.externalAttributes.customParam1,customParam2:this.externalAttributes.customParam2,customParam3:this.externalAttributes.customParam3,customParam4:this.externalAttributes.customParam4,customParam5:this.externalAttributes.customParam5,abTestId:i.players[e].abTestId,explorationMode:i.explorationMode,bundleAbId:i.bundleAbId,bundlePart:i.bundlePart})}Xi(t,i={useSafeMode:!0}){if(!t)return;const{global:e,useSafeMode:s}=i,n=e||this.GLOBAL;let r;r=s?`\n        (function() {\n            "use strict";\n            try {\n                ${t}\n            }catch(e){\n                console.warn('---CnxCustomApiError---');\n                console.warn(e.message);\n            }\n          })()\n        `:t,(0,h.ML)(n.document.head,n,r.trim())}Ci(){if(this.Ii.includes("{{omidVerificationClient"))return;const t={useSafeMode:!1,global:window};this.Xi(decodeURI(this.Ii),t)}Zi(){const{playerId:t,parseDomain:i}=this.Ki;return this.te(t,i).catch((t=>{const i=new Error(t);throw(0,r.n)({callStack:i.stack,level:r.D.CRITICAL,exception:i.message,message:"Prerender_Loader_player_id_call_get_pls"},{throttle:1e3}),this.registerApiError(y.n9.SetupError,"player data call error"),this.ie(),i}))}se(t){return N(this,void 0,void 0,(function*(){const{browser:i,userInformation:e}=t;if(this.services.UserManagerService.setUserInformation(e),this.services.UserManagerService.setBrowserInfo(i),t.hashedPageUrl&&(yield F.k.loadPageInsights({insightsInputType:D.i.Page,id:t.hashedPageUrl})),e&&e.callFraudSensor){const{lookupId:t,lookupResponseCode:s,publisherAdsTxt:n}=e;this.pi={lookupId:t,lookupResponseCode:s,publisherAdsTxt:n,deviceType:i.device}}b.e.serverAb0=t.serverAb0,b.e.serverAb1=t.serverAb1,(0,m.BZ)(t.players)?(t.players.length>1&&(this.Ei(),this.Si=!0),Object.keys(t.players).forEach((i=>{this.ne(t,this.Ki,i)}))):this.registerApiError(y.n9.NoPlayer,`No player available for given player id:${this.Ki.playerId}`),this.ie()}))}ie(){this.re(),this.oe()}oe(){setTimeout((()=>{if(!this.Si){const t=this.Ai[0];this.readyCallback&&this.readyCallback(t.apiErrorObj,t.apiConfigObj)}this.he()}))}he(){this.Ai.filter((t=>t.apiErrorObj)).forEach((()=>{this.services.EventsStorageService.emitRenderError()}))}ne(t,i,e){const s=t.players[e],{playerModel:n}=this.xi[e];this.Bi(s.renderInFrame),this.zi(t,e),this.ae(n,this.renderer.playerContainer)}te(t,i=!1){let e={parseDomain:i,referrer:this.Ti,pageUrl:this.pageUrl,tokens:[t]};e.bundleId=this.externalAttributes._appSettings.bundleID,this.queryParams.cnxLineItemId&&(e.forceLineItemIds=this.queryParams.cnxLineItemId.split(H).filter((t=>(0,g.QM)(t)))),this.queryParams.cnxPlayerId?e.forcePlayerId=this.queryParams.cnxPlayerId:this.externalAttributes.settings._connatixInternals.skipServingRules&&(e.forcePlayerId=t),this.queryParams.cnxExplorationMode&&(e.forceExploration=!0);const{queryJsTargeting:s}=this.externalAttributes.settings;return(0,g.as)(s)&&Object.keys(s).length>0&&(e.queryJsTargeting=(0,o.rM)(s)),e.customParam1=this.externalAttributes.customParam1,e.customParam2=this.externalAttributes.customParam2,e.customParam3=this.externalAttributes.customParam3,e.customParam4=this.externalAttributes.customParam4,e.customParam5=this.externalAttributes.customParam5,e.disableTracking=this.externalAttributes.settings._connatixInternals.disableTracking,e.version=p.g.version,e.es6=p.x,e.userId=this.services.UserManagerService.getForcedTrackableUser(),e.isConsentConnatix=this.services.UserManagerService.isConsentConnatix(),e.clientAb0=b.e.clientAb0,e.clientAb1=b.e.clientAb1,e.implementationType=this.ji(),e.reloadedPlayers=this.Gi.getCookiePlayersSession(),e.servingRuleId=this.externalAttributes.servingRuleId,e=Object.assign(Object.assign({},e),this.getSpecificRequestData()),this.Ki.playerId?this.getPlayerResponse(e,this.Ki.playerId||"serverless"):new Promise(((t,i)=>{this.isServerlessMode=!0,t(this.defaultInitFromProto())}))}ce(){const t=(0,u.Ph)("cnxVideoPosition",this.pageUrl),i=parseInt((0,u.Ph)("cnxStoryPosition",this.pageUrl),10);return{cnxStoryId:(0,u.Ph)("cnxStoryId",this.pageUrl),cnxLineItemId:(0,u.Ph)("cnxLineItemId",this.pageUrl),cnxPlayerId:(0,u.Ph)("cnxPlayerId",this.pageUrl),cnxMediaId:(0,u.Ph)("cnxMediaId",this.pageUrl),cnxPlaylistId:(0,u.Ph)("cnxPlaylistId",this.pageUrl),cnxVideoPosition:t?parseInt(t,10):null,cnxExplorationMode:"true"===(0,u.Ph)("cnxExplorationMode",this.pageUrl),cnxStoryPosition:(0,g.r)(i)?i:null,cnxSkipAdsFlag:"true"===(0,u.Ph)("cnxSkipAdsFlag",this.pageUrl),cnxReloadTime:parseInt((0,u.Ph)("cnxReloadTime",this.pageUrl),10),cnxOverrideLineitems:"true"===(0,u.Ph)("cnxOverrideLineitems",this.pageUrl),cnxIsSeoTraffic:"true"===(0,u.Ph)("cnxIsSeoTraffic",this.pageUrl)}}ae(t,i){const e=this.getDelegateHandler(),s=new _.N(this.GLOBAL,this.services.EventsStorageService,e,t,i);this.bi?B._.isBannerBlocked||this.ki.push(B._.onAdBlockerDetected().subscribe((t=>{t||s.start()}))):s.start()}Yi(t,i,e){if(!this.pi)return;const s=this.services.UserManagerService.getTrackableUser();this.pi.deviceIdentifier=e.bundleID;const n=new T.P(t,i,this.pi,s);this.bi?this.ki.push(B._.onAdBlockerDetected().subscribe((t=>{t||n.addFraudSensorScript()}))):n.addFraudSensorScript()}Wi(t){B._.isBannerBlocked||(this.bi?this.ki.push(B._.onAdBlockerDetected().subscribe((i=>{i||this.services.UserManagerService.setThirdPartySyncUrls(t)}))):this.services.UserManagerService.setThirdPartySyncUrls(t))}le(){const t=R.$.getSessionClient(this.GLOBAL);t?this.de=new P.Z(t,this.services.EventsStorageService,this.externalAttributes._appSettings.sdkVersion):(0,r.n)({message:"OmidSessionClient not found.",level:r.D.CRITICAL})}ue(t){const i=()=>new Promise(((i,e)=>{const s=this.pe();t.addCssStylesheetToHead(s,(()=>i()),(t=>e(t)))}));return(0,o.Up)((()=>i())).catch((t=>{throw(0,r.n)({message:"Loader_add_css_link",exception:t,level:r.D.INFO}),new Error(t)}))}Mi(t){return t.bandwidthLoggingState===s.ProtoBandwidthLoggingEnum.Enabled?V.Kp:t.bandwidthLoggingState===s.ProtoBandwidthLoggingEnum.SaaS?V.a8:void 0}setApiHostUrl(t){$.n.apiHostUrl=t}setInappPageUrl(t){(0,g.QM)(t)&&(this.pageUrl=t)}updateQueryParams(){this.queryParams=this.ce()}loadScriptTag(t,i){if(this.externalAttributes=t,!(0,o.er)(t.playerId))return(0,r.n)({level:r.D.WARN,message:"Invalid_Player_GUID",exception:t.playerId}),this.registerApiError(y.n9.InvalidGUID,"Invalid PlayerID was provided"),!1;let e;if(i&&(e=this.GLOBAL.document.getElementById(i)),!e)return(0,r.n)({message:"Loader_no_script_id",exception:`${t.playerId}`,level:r.D.WARN}),this.registerApiError(y.n9.SetupError,"Could not locate any script tag ids in the page"),!1;const s=(0,g.as)(t.settings.plugins.adobeAnalyticsSettings);return this.vi&&this.le(),this.Ki={parseDomain:s,playerId:t.playerId,tag:e},!0}insertRenderer(){try{this.Gi=new S.e(this.queryParams.cnxReloadTime),this.Bi();const t=()=>{try{this.Zi().then((t=>{const i=[];t.players.forEach(((e,s)=>{t.players[s].limitClientSideApiUse&&this.Ei();const n=this.Vi(this.Ki,e).then((i=>{this.qi(e,t.lineItems);const n=this.initUrlSuffixer(e),r=this.getPlayerModel(i,t,n,s.toString()),o=new C.m(r.global);return(0,E.u)(r.lineItemSettings.lineItems),this.xi[s]={playerModel:r,globalDomUtilsService:o,urlSuffixerService:n},this.ue(o)})).catch((t=>{this.registerApiError(y.n9.SetupError,"rendering error"),(0,r.n)({message:"Loader_send_data_to_renderer",exception:t.message,callStack:t.stack,level:r.D.CRITICAL})}));i.push(n)})),Promise.all(i).then((()=>this.se(t)))}))}catch(t){(0,r.n)({message:"Prerender_Loader_do_player_call",callStack:t.stack,exception:t.message,level:r.D.WARN},{throttle:1e3})}};this.re=this.services.UserManagerService.registerPlsCall(t)}catch(t){(0,r.n)({message:"Prerender_Loader_insert_renderer",exception:t.message,callStack:t.stack,level:r.D.CRITICAL})}}findPageUrl(t,i,e=!1){if(t.cnx_page_url)this.pageUrl=t.cnx_page_url;else try{t["cnxAmpAd)"]?this.pageUrl=t.context.sourceUrl||t.context.location.href:this.pageUrl=i||(0,o.lU)((0,o.pE)(this.GLOBAL),this.GLOBAL)}catch(t){}if(!this.pageUrl||0===this.pageUrl.length)return e||(0,r.n)({message:"Prerender_Loader_find_page_url",level:r.D.INFO},{throttle:1e3}),new Promise((e=>{setTimeout((()=>{this.findPageUrl(t,i,!0).then((()=>e()))}),this.Pi)}));try{return this.pageUrl=(0,u.sH)(this.pageUrl),Promise.resolve()}catch(t){return(0,r.n)({message:"Loader_find_page_url",exception:t.message,callStack:t.stack,level:r.D.CRITICAL}),Promise.reject()}}registerApiError(t=y.n9.SetupError,i=""){this.Ai.push({apiErrorObj:{type:t,message:i}})}registerApiSuccess(t){this.Ai.push({apiConfigObj:t})}destroy(){this.renderer&&this.renderer.destroy(),(0,O.i)(this.ki)}}},3810:(t,i,e)=>{"use strict";e.d(i,{e:()=>o});var s=e(8423),n=e(7726),r=e(9115);class o{constructor(t){this.RELOAD_TIME=r.ti,this.RELOAD_COOKIES="cnx_player_reload",this.SESSION_IN_VIEW_FLAG="_sessionWasViewed",this.fe={},this.ge={},this.me={},this.Qt=(0,s.pE)(window).topFrame,this.ye(t);try{this.ve()}catch(t){(0,n.n)({message:"PlayerReloader_cookie_fetch_failed",level:n.D.WARN,exception:t})}}wasPlayerReloaded(t){return!!this.fe[t]}addPlayerSession(t,i){this.ge[t]=i}getCookiePlayersSession(){return this.fe}addSessionInView(t){this.ge[t]+=this.SESSION_IN_VIEW_FLAG}getSessionInView(t){return this.me[t]}ye(t){setTimeout((()=>{this.be(),this.Qt.location.reload()}),t||this.RELOAD_TIME)}ve(){decodeURIComponent(this.Qt.document.cookie).split(";").forEach((t=>{const i=t.split("=");i[0].includes(this.RELOAD_COOKIES)&&(this.fe=JSON.parse(i[1]))})),this.xe(),this._e()}xe(){Object.keys(this.fe).forEach((t=>{const i=this.fe[t].indexOf(this.SESSION_IN_VIEW_FLAG);i>-1&&(this.fe[t]=this.fe[t].substr(0,i),this.me[t]=!0)}))}_e(){this.Qt.document.cookie=`${this.RELOAD_COOKIES}=; expires = Thu, 01 Jan 1970 00:00:00 GMT; path=/`}be(){Object.keys(this.me).forEach((t=>{this.ge[t].includes(this.SESSION_IN_VIEW_FLAG)||this.addSessionInView(t)}));const t=new Date;let i=t.getTime();i+=r.Y0*r.s_,t.setTime(i),this.Qt.document.cookie=`${this.RELOAD_COOKIES}=${JSON.stringify(this.ge)}; expires=${t.toUTCString()}; path=/`}}},7593:(t,i,e)=>{"use strict";e.d(i,{t:()=>h});var s=e(8423),n=e(7726),r=e(7427),o=e(158);class h{constructor(t,i){this.Pe=t,this.Se=i,this.Ae=(t,i)=>new Promise(((e,s)=>{o.n.sendProtoRequest({ProtoResponse:this.Pe,endpoint:t,requestType:"GET",logError:!0,timeout:i}).then((t=>{e(t)})).catch((t=>{s(t)}))}))}fetchMetadata(t,i=5,e=!0,n){const o=t=>403===this.Ie(t);return new Promise(((h,a)=>{(0,s.Up)((()=>this.Ae(t,n)),i,o).then((i=>{if((0,r.as)(i))return h(i);const e=new Error("invalid metadata");return this.ke({url:t,metadata:i,e}),a(e)})).catch((i=>{e&&this.ke({url:t,e:i}),a(i)}))}))}ke(t){var i;const e=(0,r.QM)(null===(i=t.e)||void 0===i?void 0:i.message)?t.e.message:"";e.includes("XhrUtils_XMLHttpRequest_error")||(0,n.n)({message:"MediaMetadataHandler_fetchMetadata",exception:`${this.Se}_${e}:${JSON.stringify(t)}`,callStack:t.e&&t.e.stack,level:n.D.CRITICAL})}Ie(t){if(t&&t.message){const i=t.message.split("status:")[1];return i?parseInt(i.slice(0,3),10):null}return null}}},5880:(t,i,e)=>{"use strict";e.d(i,{_:()=>n});var s=e(3030);class n{constructor(){this.Ce={}}subscribe(t,i,e){this.Ce[t]||(this.Ce[t]=[]),this.Ce[t].push({context:i,func:e})}unsubscribe(t,i,e){this.Ce[t]&&(this.Ce[t]=this.Ce[t].filter((t=>!(t.context===i&&(t.func===e||!e)))))}unsubscribeAll(t){Object.keys(this.Ce).forEach((i=>{this.Ce[i]=this.Ce[i].filter((i=>i.context!==t))}))}publish(t,i,e={payload:void 0}){Object.prototype.hasOwnProperty.call(this.Ce,i)&&this.Ce[i].forEach((i=>{i.context===t&&i.func(e)}))}relay(t,i,e,n){(0,s.qo)(t).forEach((t=>{this.subscribe(t,i,(i=>{n.publish(e,t,i)}))}))}relayBulk(t,i,e){t.forEach((t=>{this.relay(t.channel,t.source,i,e)}))}}},1580:(t,i,e)=>{"use strict";e.d(i,{N:()=>p});var s,n=e(1561);class r{constructor(t){this.Te=[],this.Me=t=>{this.Te.push(t)},this.Ee=t.subscribe(this.Me)}get cachedEvents(){return this.Te}destroy(){this.Te=null,this.Ee()}}!function(t){t.AdobeAnalytics="AdobeAnalytics",t.MoatAnalytics="MoatAnalytics"}(s||(s={}));var o=e(7427),h=e(7726),a=e(3030),c=e(8423),l=e(6615),d=e(45),u=e(525);class p{constructor(t,i,e,s,n){this.Be=i,this.Le=e,this.Oe=s,this.Re=n,this.De=[],this.Fe=t=>{try{this.$e(t);const i=this.De.find((i=>i.name===t.type));let e;if(i&&!i.started){i.started=!0;const t=i.eventsCacheHandler;e=t.cachedEvents,t.destroy()}const{adobeAnalyticsSettings:s,moatAnalyticsSettings:n,_debugLogging:r}=this.Oe.apiConfig.settings.plugins,{secondLevelDomain:o,playerId:h}=this.Oe,a={cachedEvents:e,adobeAnalyticsSettings:s,moatAnalyticsSettings:n,_debugLogging:r,secondLevelDomain:o,playerId:h,pageName:this.je,pageUrl:this.Ne,version:d.g.version,delegateHandlers:this.Le,playerContainer:this.Re,playerWindow:window};t.getInstance().start(this.Be,a)}catch(t){(0,h.n)({callStack:t.stack,exception:t.message,level:h.D.CRITICAL,message:"PluginsHandler_initPlugin"})}};const r=(0,c.pE)(t);this.Ue=r.topFrame,this.Ne=(0,c.lU)(r,this.Ue),this.Ne=(0,l.sH)(this.Ne),this.je=(0,l._Y)(this.Ne)}start(){this.He(),this.ze(),this.Ue.cnxPlugins.pluginsHandlers.push(this.Fe)}He(){let t=[];Array.isArray(this.Ue.cnxPlugins)&&this.Ue.cnxPlugins.length>0&&(t=this.Ue.cnxPlugins,t.forEach((t=>this.Fe(t)))),(0,o.as)(this.Ue.cnxPlugins)||this.We(t)}ze(){const t=this.Ge();(0,a.BZ)(t)&&this.Je(t)}Qe(t){const i=this.Ue.cnxPlugins.cachedPlugins;if((0,a.BZ)(i))return i.find((i=>i.type===t))}$e(t){this.Qe(t.type)||this.Ue.cnxPlugins.cachedPlugins.push(t)}We(t){this.Ue.cnxPlugins={cachedPlugins:t,pluginsHandlers:[],push:function(t){this.pluginsHandlers.forEach((i=>{i(t)}))}}}Je(t){t.forEach((t=>{this.Qe(t)||this.De.push({name:t,started:!1,eventsCacheHandler:new r(this.Be)})})),this.De.forEach((({name:t})=>this.Ye(t)))}Xe(t){return Object.values(t).every((t=>(0,o.QM)(t)))}Ge(){const t=[];return this.Oe.apiConfig.settings.plugins.adobeAnalyticsSettings&&this.Xe(this.Oe.apiConfig.settings.plugins.adobeAnalyticsSettings)&&t.push(s.AdobeAnalytics),this.Oe.moatTrackingEnabled&&t.push(s.MoatAnalytics),t}Ye(t){const i={id:`cnx-${t}`,src:""};switch(t){case s.AdobeAnalytics:i.src=u.n.endPoints.assets.plugins.adobeAnalytics;break;case s.MoatAnalytics:i.src=u.n.endPoints.assets.plugins.moatAnalytics}this.Ue.document.getElementById(i.id)||(0,n.dZ)(i,this.Ue.document.head,this.Ue,null,null,!0,"PluginsHandler_unable_to_insert_plugin_script")}}},5874:(t,i,e)=>{"use strict";var s;e.d(i,{Z:()=>n}),function(t){t[t.HoldStart=0]="HoldStart",t[t.HoldEnd=1]="HoldEnd",t[t.TapLeft=2]="TapLeft",t[t.TapRight=3]="TapRight",t[t.SwipeEnd=4]="SwipeEnd",t[t.SwipeMove=5]="SwipeMove",t[t.Scroll=6]="Scroll",t[t.Click=7]="Click"}(s||(s={}));const n=s},3344:(t,i,e)=>{"use strict";e.d(i,{Ve:()=>h,_f:()=>l,cv:()=>s,fi:()=>r,jI:()=>n,li:()=>d,qZ:()=>c,sm:()=>a,yA:()=>o});const s="Connatix";var n,r,o,h,a,c,l,d;!function(t){t.Generic="generic",t.Video="video"}(n||(n={})),function(t){t.Click="click",t.InvitationAccept="invitationAccept"}(r||(r={})),function(t){t.PreRoll="preroll",t.MidRoll="midroll",t.PostRoll="postroll",t.Standalone="standalone"}(o||(o={})),function(t){t.SessionStart="sessionStart",t.SessionError="sessionError",t.SessionFinish="sessionFinish"}(h||(h={})),function(t){t.DefinedByJavascript="definedByJavaScript",t.BeginToRender="beginToRender"}(a||(a={})),function(t){t.DefinedByJavascript="definedByJavaScript",t.Video="video"}(c||(c={})),function(t){t.sessionError="sessionError",t.geometryChange="geometryChange"}(l||(l={})),function(t){t.backgrounded="backgrounded",t.notFound="notFound"}(d||(d={}))},3217:(t,i,e)=>{"use strict";e.d(i,{Z:()=>d});var s,n,r=e(3344),o=e(3121),h=e(4959);!function(t){t.Minimized="minimized",t.Collapsed="collapsed",t.Normal="normal",t.Expanded="expanded",t.Fullscreen="fullscreen"}(s||(s={})),function(t){t.StateChanged="stateChanged"}(n||(n={}));class a{constructor(t){this.mediator=t}computeState(t){const i=this.Ze(t);this.Ke&&this.Ke.name===i||this.mediator.publish(this,n.StateChanged,{payload:{state:i}}),this.Ke={dimensions:t,name:i},this.ts||i!==s.Normal||(this.ts=Object.assign({},this.Ke))}setPlayerState(t){this.Ke&&this.Ke.name===t||this.mediator.publish(this,n.StateChanged,{payload:{state:t}}),this.Ke={name:t},this.ts||t!==s.Normal||(this.ts=Object.assign({},this.Ke))}get currentState(){return this.Ke&&this.Ke.name}Ze(t){if(!this.ts)return s.Normal;const{width:i,height:e}=this.ts.dimensions,n=i*e,r=t.width*t.height;switch(!0){case n<r:return s.Expanded;case n>r:return s.Collapsed;default:return s.Normal}}}var c=e(5880),l=e(7726);class d extends c._{constructor(t,i,e){super(),this.es=t,this.Be=i,this.ss=new a(this),this.ns=!1,this.rs={[o.Z.AdError]:()=>this.hs(),[o.Z.PlayError]:()=>this.cs(),[o.Z.RenderError]:()=>this.ls(),[o.Z.AdImpression]:()=>this.ds(),[o.Z.AdComplete]:()=>this.us(),[o.Z.AdVideoStart]:({adVideoStartMetadata:t})=>this.ps(t),[o.Z.AdVideoFirstQuartile]:()=>this.gs(),[o.Z.AdVideoMidpoint]:()=>this.ys(),[o.Z.AdVideoThirdQuartile]:()=>this.vs(),[o.Z.AdVideoComplete]:()=>this.bs(),[o.Z.VolumeChange]:({volume:t})=>this.ws(t),[o.Z.AdPause]:()=>this._s(),[o.Z.AdPlay]:()=>this.Ps(),[o.Z.AdSkipped]:()=>this.Ss(),[o.Z.AdClickThru]:()=>this.As(),[o.Z.AdInteraction]:()=>this.Is(),[o.Z.AdLoaded]:({adLoadedMetadata:t})=>this.ks(t),[o.Z.AdStateChange]:({adStateChangedMetadata:t})=>this.Cs(t),[o.Z.PlayerResized]:({playerDimensionsMetadata:t})=>this.Ts(t),[o.Z.OnEnterFullscreen]:()=>this.Es(),[o.Z.PlayerCollapsed]:()=>this.Bs(),[o.Z.PlayerExpanded]:()=>this.Ls(),[o.Z.Destroy]:()=>this.unsubscribeAll(this.ss)},this.Os=t=>{try{const i=this.rs[t.name];if(!i)return;i(t.metadata)}catch(t){(0,l.n)({message:"SessionClientWrapper_omsdk__onEventStorageEvent",exception:t.message,callStack:t.callStack,level:l.D.WARN})}};try{const{AdSession:t,AdEvents:i,MediaEvents:s}=this.es,r=this.Rs(e);this.Ds=new t(r),this.$s=new i(this.Ds),this.js=new s(this.Ds),this.Be.subscribe(this.Os),this.subscribe(n.StateChanged,this.ss,(({payload:{state:t}})=>{this.Vs(t)})),this.Ns()}catch(t){(0,l.n)({message:"SessionClientWrapper_omsdk_classes_init_err",exception:t.message,callStack:t.callStack,level:l.D.WARN})}}hs(){this.Ds.error(r.jI.Video,o.Z.AdError)}cs(){this.Ds.error(r.jI.Video,o.Z.PlayError)}ls(){this.Ds.error(r.jI.Generic,o.Z.RenderError)}Rs(t){const{Partner:i,Context:e}=this.es;return new e(new i(r.cv,t))}ds(){this.ns=!0,this.$s.impressionOccurred();const t=this.ss.currentState;t!==s.Normal&&this.Vs(t)}us(){this.ns=!1}ps(t){const{duration:i,mediaPlayerVolume:e}=t;this.js.start(i,e)}gs(){this.js.firstQuartile()}ys(){this.js.midpoint()}vs(){this.js.thirdQuartile()}bs(){this.js.complete()}ws(t){this.ns&&this.js.volumeChange(t)}_s(){this.js.pause()}Ps(){this.js.resume()}Ss(){this.js.skipped()}As(){this.js.adUserInteraction(r.fi.Click)}Is(){this.js.adUserInteraction(r.fi.InvitationAccept)}ks(t){const{isSkippable:i,skipOffset:e,isAutoPlay:s}=t,{VastProperties:n}=this.es,r=new n(i,e,s,this.Us);this.$s.loaded(r)}Cs({state:t}){this.Us=r.yA[h.I[t]]}Vs(t){t&&this.js.playerStateChange(t)}zs(t){this.ss.computeState(t)}Ws(t){this.ss.setPlayerState(t)}Ts(t){this.zs(t)}Es(){this.Ws(s.Fullscreen)}Bs(){this.Ws(s.Minimized)}Ls(){this.Ws(s.Normal)}Ns(){this.Ds.registerSessionObserver((t=>{t.type===r.Ve.SessionStart?this.Gs(t):t.type===r.Ve.SessionError&&(0,l.n)({message:"SessionClientWrapper_omsdk_session_error",exception:t.type,callStack:JSON.stringify(t),level:l.D.WARN},{throttle:1,sendMaxLog:!1})}))}Gs(t){t.data.creativeType===r.qZ.DefinedByJavascript&&this.Ds.setCreativeType(r.qZ.Video),t.data.impressionType===r.sm.DefinedByJavascript&&this.Ds.setImpressionType(r.sm.BeginToRender)}}},7382:(t,i,e)=>{"use strict";var s;e.d(i,{$:()=>s}),function(t){const i=["1.3.25-iab3167","1.3.13-iab2343"],e=["1.3.25-iab3167","1.3.13-iab2343"];function s(t,i){if(!t)return null;let e=null;for(let s=0;s<i.length&&(e=t[i[s]],!e);s++);return e}t.getSessionClient=function(t){return s(t.OmidSessionClient,i)},t.getVerificationClient=function(t){return s(t.OmidVerificationClient,e)}}(s||(s={}))},6450:()=>{String.prototype.cnx_replaceAll=function(t,i){return this.split(t).join(i)}},3640:(t,i,e)=>{"use strict";e.d(i,{A:()=>u,u:()=>d});var s=e(7593),n=e(289),r=e(525),o=e(7427),h=e(7726);const a=new s.t(n.ProtoAdDomainBlockingResponse,"AdDomainBlockingService");let c;const l=new Map;function d(t){c||(c=new Promise((i=>{const e=t.find((t=>t.blockedDomainsRevisionNumber));if(!e)return void i();const{publisherLineItemId:s,blockedDomainsRevisionNumber:n}=e,o=`${r.n.endPoints.base.lineItems}${s}/blockedDomains_${n}.bin`;a.fetchMetadata(o,2).then((t=>{l.set(s,t.domains),i()})).catch((()=>{(0,h.n)({message:"AdDomainBlockingService_fetchBlockedDomains_endpoint_unavailable",level:h.D.CRITICAL},{throttle:2,sendMaxLog:!1}),i()}))})))}function u(t,i){return new Promise((e=>{(0,o.QM)(i)?c.then((()=>{l.has(t)&&l.get(t).some((t=>i.includes(t)))?e(!0):e(!1)})):e(!1)}))}},525:(t,i,e)=>{"use strict";e.d(i,{n:()=>a});var s=e(6615),n=e(45),r=e(8423),o=e(7427);class h{constructor(t){this.base=t,this.api={pls:t.core+"core/pls",story:t.core+"core/story",rtb:t.core+"rtb/g",syncUrls:t.core+"core/us",fallbackstory:t.core+"core/fallbackstory",cookie:t.core+"core/ck",tam:t.core+"core/atam"},this.tracking={session_rendered:t.tracking+"sr",session_view:t.tracking+"sv",session_time:t.tracking+"st",session_client_error:t.tracking+"e",media_quartile:t.tracking+"mq",media_click:t.tracking+"mc",ad_impression:t.tracking+"ai",bids:t.tracking+"abt",ad_impression_viewable:t.tracking+"av",ad_quartile:t.tracking+"aq",ad_click:t.tracking+"ac",logging:t.tracking+"e",playerStart:t.tracking+"ps",adOpportunity:t.tracking+"ao",sessionAdBlocker:t.tracking+"sab",heavy_ad_intervention:t.tracking+"ha",auctionInformation:t.tracking+"aucinfo"},this.assets={css:{elements:`${this.Js(t.assets)}player.css`,playspace:`${this.Js(t.assets)}connatix.playspace.css`},plugins:{adobeAnalytics:`${t.plugins}p/plugins/adobe.plugin.js`,moatAnalytics:`${t.plugins}p/plugins/moat.plugin.js`,prebidScript:`${t.plugins}p/plugins/prebid6.20.0.js`}}}Js(t){return`${t}p/${n.g.version}/`}}class a{static set bundleDomain(t){this.Qs=t}static get bundleDomain(){if(!(0,o.QM)(this.Qs))throw new Error("bundleDomain missing");return this.Qs}static set apiHostUrl(t){this.Ys=t,a.Zs=a.Ks()}static tn(t){let i=`capi{{env}}.${t}`;return this.Ys&&(i=this.Ys),{video:`//vid.${t}/`,image:`//img.${t}/`,core:`https://${i}/`,tracking:`https://${i}/tr/`,metadata:`//vid.${t}/`,insights:`//ins.${t}/`,assets:`//cds{{env}}.${t}/`,plugins:`//cds.${t}/`,lineItems:`//lit.${t}/`}}static Ks(){const t=(0,s.Ph)("cnxEnv",(0,r.pE)(window).topFrame.location.href);t&&(n.g.domainPrefix=`-${t}`);const i=this.tn(this.bundleDomain);return Object.keys(i).forEach((t=>{i[t]=i[t].replace("{{env}}",n.g.domainPrefix)})),new h(i)}static get endPoints(){return null===a.Zs&&(a.Zs=a.Ks()),a.Zs}}a.Zs=null},4959:(t,i,e)=>{"use strict";e.d(i,{I:()=>s,V:()=>r});var s,n=e(289);!function(t){t[t.PreRoll=0]="PreRoll",t[t.MidRoll=1]="MidRoll",t[t.PostRoll=2]="PostRoll",t[t.Standalone=3]="Standalone"}(s||(s={}));const r={[n.ProtoAdSlotsEnum.PreRoll]:s.PreRoll,[n.ProtoAdSlotsEnum.MidRoll]:s.MidRoll,[n.ProtoAdSlotsEnum.PostRoll]:s.PostRoll}},3121:(t,i,e)=>{"use strict";e.d(i,{Z:()=>n});const s=e(9078).fI,n=Object.assign(Object.assign({},s),{AdBreakStart:"adBreakStart",AdComplete:"adComplete",AdBreakComplete:"adBreakComplete",Pause:"pause",AdPause:"adPause",Play:"play",AdPlay:"adPlay",ContentComplete:"contentComplete",SessionStart:"sessionStart",SessionEnd:"sessionEnd",PlayerResized:"playerStateResize",OnEnterFullscreen:"onEnterFullscreen",OnExitFullscreen:"onExitFullscreen",PlayerCollapsed:"playerCollapsed",PlayerExpanded:"playerExpanded",PlayError:"playError",RenderError:"renderError",AdStateChange:"adStateChange",VolumeChange:"volumeChange",Destroy:"destroy"})},649:(t,i,e)=>{"use strict";e.d(i,{m:()=>l});var s=e(308),n=e(525),r=e(3030),o=e(1561),h=e(8423),a=e(7726),c=e(7427);class l{constructor(t){this.createElement=(t,i=this.Ue)=>i.document.createElement(t),this.Ue=t,this.addPreconnect()}get global(){return this.Ue}addCssString(t,i=""){return(0,o.uc)(t,i,this.Ue)}addPreconnect(){(0,o.tp)(n.n.endPoints.base.video,this.Ue),(0,o.tp)(n.n.endPoints.base.core,this.Ue),(0,o.tp)(n.n.endPoints.base.image,this.Ue)}getLineHeightPropertyValue(t){return(0,o.Dx)(t,this.Ue).getPropertyValue("line-height")}getFontSizePropertyValue(t){return(0,o.Dx)(t,this.Ue).getPropertyValue("font-size")}getFontWeightPropertyValue(t){return(0,o.Dx)(t,this.Ue).getPropertyValue("font-weight")}getTransformPropertyValue(t){return(0,o.Dx)(t,this.Ue).getPropertyValue("transform")}getPaddingTopPropertyValue(t){return(0,o.Dx)(t,this.Ue).getPropertyValue("padding-top")}getPaddingBottomPropertyValue(t){return(0,o.Dx)(t,this.Ue).getPropertyValue("padding-bottom")}getMarginTopPropertyValue(t){return(0,o.Dx)(t,this.Ue).getPropertyValue("margin-top")}getMarginBottomPropertyValue(t){return(0,o.Dx)(t,this.Ue).getPropertyValue("margin-bottom")}getMarginLeftPropertyValue(t){return(0,o.Dx)(t,this.Ue).getPropertyValue("margin-left")}getMarginRightPropertyValue(t){return(0,o.Dx)(t,this.Ue).getPropertyValue("margin-right")}createElementByString(t,i=this.Ue){return(0,o.G$)(t,i)}createDocumentFragment(t=this.Ue){return t.document.createDocumentFragment()}isHttpsProtocolUsed(){return(0,o.eA)(this.Ue)}isURLSameDomainToTop(t){return(0,o.uh)(t,this.Ue)}isDetachedFromDOM(t){let i=t;for(;i.parentNode;)if(i=i.parentNode,i===this.Ue.document.body)return!1;return!0}hasIosFullscreenBehaviour(t){return t&&t===s.M.Ios||!this.getFullscreenKeys()}querySelector(t,i=this.Ue){let e;try{e=i.document.querySelector(t)}catch(t){}return e}addCssStylesheetToHead(t,i,e){const s=this.Ue.document;s.getElementById(t.id)?(0,c.mf)(i)&&i():(0,o.NS)(t,s.head,this.Ue,i,e)}getFullscreenKeys(t){return(0,o.S0)(t||this.Ue.document)}exitFullscreen(t,i){(i||this.Ue.document)[t]()}getDocumentProperty(t){return this.Ue.document[t]}addEventListenerOnGlobal(t,i,e,s=!1){(e?this.Ue.document:this.Ue).addEventListener(t,i,s)}removeEventListenerOnGlobal(t,i,e,s=!1){(e?this.Ue.document:this.Ue).removeEventListener(t,i,s)}trackWithImages(t,i){(0,h.Hh)(t,this.Ue,i)}getElementCoordinates(t){let{top:i,left:e}=t.getBoundingClientRect();const{width:s,height:n}=t.getBoundingClientRect();return i+=this.Ue.pageYOffset,e+=this.Ue.pageXOffset,{clientX:e,clientY:i,width:s,height:n}}getElementDistanceToViewport(t){const{top:i,left:e}=t.getBoundingClientRect();return{top:i,left:e}}requestAnimationFrameHelper(t){return(0,o.PM)(this.Ue,t)}cancelRequestAnimationFrame(t){return(0,o.h_)(this.Ue,t)}getGlobalLocationProperties(){const t=this.Ue.location;return{hostname:t.hostname,pathname:t.pathname,href:t.href,protocol:t.protocol,host:t.host,port:t.port,search:t.search,hash:t.hash}}open(t,i){this.Ue.open(t,i)}getComputedTranslateX(t){let i=0;const e=(0,o.Dx)(t,this.Ue).getPropertyValue("transform").match(/^matrix\((.+)\)$/);return(0,r.BZ)(e)&&(i=parseFloat(e[1].split(", ")[4])),i}getBodyDimensions(){try{const t=(0,h.pE)(this.Ue).topFrame.document.body;let{offsetWidth:i,offsetHeight:e}=t;const s=(0,o.Dx)(t,this.Ue);return i+=parseInt(s.marginLeft,10)+parseInt(s.marginRight,10),e+=parseInt(s.marginTop,10)+parseInt(s.marginBottom,10),{width:i,height:e}}catch(t){return(0,a.n)({message:"DomUtils_error_getting_body_dimensions",exception:t.message,callStack:t.stack,level:a.D.CRITICAL}),{width:0,height:0}}}getViewportWidth(){return(0,h.pE)(this.Ue).topFrame.document.documentElement.clientWidth}getViewportHeight(){return(0,h.pE)(this.Ue).topFrame.innerHeight}getGlobalClosestTop(){return(0,h.pE)(this.Ue)}stripHtmlTags(t){return(0,o.ju)(t,this.Ue)}getComputedStyle(t,i){return(0,o.Dx)(t,this.Ue,i)}getElementById(t){return(0,o.rI)(t,this.Ue)}getElementsByClassName(t){return(0,o.Fs)(t,this.Ue)}insertScript(t,i,e){this.Ue.document.getElementById(t.id)?(0,c.mf)(i)&&i():(0,o.dZ)(t,this.Ue.document.head,this.Ue,i,null,!0,e)}destroy(){}}},4974:(t,i,e)=>{"use strict";e.d(i,{k:()=>u});var s=e(7593),n=e(289),r=e(525),o=e(7726),h=e(5732),a=e(8423),c=e(7427),l=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};const d={insights:[],sentimentAnalysis:void 0};class u{static loadInsights(t){const{id:i}=t;let e=u.insightsPromiseStore.get(i);return e||(e=new Promise((i=>{const e=u.requestUrlBuilder(t);u.mediaMetadataHandler.fetchMetadata(e,2,false,1e4).then((t=>{const e=t.insights.map((t=>t.key));i({insights:e,sentimentAnalysis:t.sentimentAnalysis})})).catch((t=>{(0,a.Vm)([95,5])&&(0,o.n)({message:"LoadInsightIndexesService_endpoint_unavailable",exception:e,callStack:`${t}`,level:o.D.WARN},{sendMaxLog:!1}),i(d)}))})),u.insightsPromiseStore.set(i,e)),e}static loadPageInsights(t){return l(this,void 0,void 0,(function*(){const i=yield u.loadInsights(t);return u.pageInsights={insights:i.insights},u.pageInsights}))}static requestUrlBuilder({insightsInputType:t,id:i,versionId:e}){return t===h.i.Page||(0,c.$K)(e)||(0,o.n)({message:"LoadInsightIndexesService_requestUrlBuilder_noVersionIdProvided",exception:`Type: ${t}, id: ${i}`,level:o.D.CRITICAL}),t===h.i.Page?`${r.n.endPoints.base.insights}${i}/insights.bin`:`${r.n.endPoints.base.insights}${i}/${e}/insights.bin`}static markAsUnavailable(t){u.insightsPromiseStore.get(t)||u.insightsPromiseStore.set(t,Promise.resolve(d))}}u.mediaMetadataHandler=new s.t(n.ProtoInsightsResponse,"InsightsLoaderService"),u.insightsPromiseStore=new Map},5732:(t,i,e)=>{"use strict";var s;e.d(i,{i:()=>s}),function(t){t[t.Video=0]="Video",t[t.Story=1]="Story",t[t.Page=2]="Page"}(s||(s={}))},5256:(t,i,e)=>{"use strict";var s,n,r,o;e.d(i,{Av:()=>o,HT:()=>n,WR:()=>r,qs:()=>s}),function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(s||(s={})),function(t){t.Click="click",t.InteractionStart="interactionstart",t.Interaction="interaction",t.InteractionEnd="interactionend"}(n||(n={})),function(t){t[t.Swipe=0]="Swipe",t[t.Hold=1]="Hold"}(r||(r={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"}(o||(o={}))},6284:(t,i,e)=>{"use strict";e.d(i,{k:()=>u});var s=e(2820),n=e(5874),r=e(5256),o=e(3030),h=e(1561);const a=0;function c(t){return t.button===a}var l=e(2231),d=e(7427);class u{constructor(t,i,e){this.en=t,this.Yt=i,this.mediator=null,this.sn=30,this.nn=250,this.rn=25,this.hn=[],this.an={},this.ln=0,this.dn=0,this.un=!0,this.pn=null,this.gn=!1,this.mn=!1,this.yn=!1,this.vn=!1,this.bn=0,this.xn=0,this.wn=null,this._n=null,this.Pn=null,this.Sn=!0,this.An=!1,this.In=t=>{this.Yt?(t.element.addEventListener("touchstart",this.kn,{passive:!0}),t.element.addEventListener("touchmove",this.Cn,{passive:!0}),t.element.addEventListener("touchend",this.Tn),t.element.addEventListener("touchcancel",this.Mn),t.element.addEventListener("mouseup",this.En)):(t.element.addEventListener("mousedown",this.Bn),t.element.addEventListener("mouseup",this.En))},this.Ln=t=>{this.Yt?(t.element.removeEventListener("touchstart",this.kn),t.element.removeEventListener("touchmove",this.Cn),t.element.removeEventListener("touchend",this.Tn),t.element.removeEventListener("touchcancel",this.Mn),t.element.removeEventListener("mouseup",this.En)):(t.element.removeEventListener("mousedown",this.Bn),t.element.removeEventListener("mouseup",this.En))},this.kn=t=>{t.stopPropagation();const i=this.Rn(t);this.Pn=i,this.mn=!1,this.Dn(i,r.WR.Hold)&&this.Fn(t);const e=this.$n(t);this.dn=e.eventX,this.ln=e.eventY,this.jn(t,i,r.HT.InteractionStart),this.un=!0},this.Cn=t=>{t.stopPropagation();const i=this.Rn(t),e=this.$n(t);if(this.un&&(Math.abs(e.deltaXFromStart)>this.rn||Math.abs(e.deltaYFromStart)>this.rn)&&(this.un=!1),this.gn||this.Dn(i,r.WR.Swipe)){if(null===this.wn&&this.Vn(i,e),this.wn===r.qs.Y)return;null===this._n&&(this._n=(0,h.PM)(this.en,(()=>{this._n=null,this.Un(e.deltaXFromStart),i.mediator.publish(i.context,n.Z[n.Z.SwipeMove],{payload:e.deltaXFromStart})})))}},this.Tn=t=>{const i=this.Rn(t);if(this.An=!1,this.Pn===i){const e=this.$n(t);t.cancelable&&this.Dn(i,r.WR.Hold)&&Math.abs(e.deltaXFromStart)<this.rn&&Math.abs(e.deltaYFromStart)<this.rn&&t.preventDefault(),this.Hn(t,i,e);this.qn(e)===r.qs.Y&&Math.abs(e.deltaYFromStart)>=this.rn?this.Sn&&i.mediator.publish(i.context,n.Z[n.Z.Scroll]):!this.un||this.yn||this.mn||(this.An=!0)}this.Pn=null},this.Mn=t=>{const i=this.Rn(t);this.Hn(t,i),this.Pn=null},this.Bn=t=>{if(!c(t))return void this.zn(r.HT.InteractionStart,t);const i=this.Rn(t);this.Pn=i,t.stopPropagation(),t.preventDefault(),this.Dn(i,r.WR.Hold)&&this.Fn(t),this.jn(t,i,r.HT.InteractionStart)},this.En=t=>{const i=this.Rn(t);return this.An?(i.mediator.publish(i.context,n.Z[n.Z.Click]),void(this.An=!1)):c(t)&&this.Pn?(t.stopPropagation(),t.preventDefault(),this.jn(t,this.Pn,r.HT.Interaction),this.jn(t,this.Pn,r.HT.InteractionEnd),(this.gn||this.Dn(i,r.WR.Hold))&&this.Wn(t),this.Pn===i&&(this.jn(t,i,r.HT.Click),i.mediator.publish(i.context,n.Z[n.Z.Click])),void(this.Pn=null)):(this.zn(r.HT.Interaction,t),void this.zn(r.HT.InteractionEnd,t))},this.Gn=t=>{if(!c(t))return this.zn(r.HT.Interaction,t),void this.zn(r.HT.InteractionEnd,t);this.Pn=null},this.Jn=t=>{if(!c(t)||!this.Pn)return this.zn(r.HT.Interaction,t),void this.zn(r.HT.InteractionEnd,t);this.jn(t,this.Pn,r.HT.Interaction),this.jn(t,this.Pn,r.HT.InteractionEnd),(this.gn||this.Dn(this.Pn,r.WR.Hold))&&this.Wn(t),this.Pn=null};const{leftTapSizeThreshold:s,holdTriggerDuration:o,scrollThreshold:a}=Object.assign({},e);this.sn=s||this.sn,this.nn=o||this.nn,this.rn=a||this.rn,this.en.document.addEventListener("mousedown",this.Gn),this.en.document.addEventListener("mouseup",this.Jn)}register(t,i,e,s={},n=[]){const r={element:t,mediator:i,context:e,callbacks:s||{},allowedSpecialInteractions:n,disabledSpecialInteractions:[]};this.hn.push(r),this.In(r)}unregister(t){const i=this.hn.find((i=>i.element===t));i&&(this.hn=this.hn.filter((i=>i.element!==t)),this.Ln(i))}unregisterAll(t){const i=this.hn.filter((i=>i.mediator===t));i.forEach(this.Ln),this.hn=(0,o.V7)(this.hn,i)}addGlobalActions(t,i){Object.keys(Object.assign({},i)).forEach((e=>{this.an[e]=this.an[e]||[],this.an[e].push({initiator:t,action:i[e]})}))}removeGlobalActions(t){Object.keys(this.an).forEach((i=>{this.an[i].some((i=>i.initiator===t))&&(this.an[i]=this.an[i].filter((i=>i.initiator!==t)))}))}disableSpecialInteractions(t){const i=this.Qn(t);i&&(i.disabledSpecialInteractions=(0,o.gX)(i.allowedSpecialInteractions))}enableSpecialInteractions(t){const i=this.Qn(t);i&&(i.disabledSpecialInteractions=[])}getNonInterruptibleInteractions(){return[n.Z.HoldStart,n.Z.HoldEnd,n.Z.SwipeMove,n.Z.SwipeEnd,n.Z.Scroll]}disableScrollEvent(){this.Sn=!1}enableScrollEvent(){this.Sn=!0}destroy(){clearTimeout(this.pn),this.hn.forEach(this.Ln),this.en.document.removeEventListener("mousedown",this.Gn),this.en.document.removeEventListener("mouseup",this.Jn)}Yn(t){const i=this.Rn(t),e=i.element.getBoundingClientRect(),s=this.Xn(t),n=e.width,r=(0,l.dQ)(0,n,0,100,s);this.Zn(i,this.sn,r)}Zn(t,i,e){e<i?t.mediator.publish(t.context,n.Z[n.Z.TapLeft]):t.mediator.publish(t.context,n.Z[n.Z.TapRight])}Fn(t){clearTimeout(this.pn),this.gn=!1,this.yn=!1;const i=this.Rn(t);(0,h.cn)(i.element,s.Gj.OnHold),this.pn=setTimeout((()=>{this.gn=!0,this.un&&(this.yn=!0,i.mediator.publish(i.context,n.Z[n.Z.HoldStart]))}),this.nn)}Wn(t){clearTimeout(this.pn);const i=this.Rn(t);(0,h.IV)(i.element,s.Gj.OnHold),this.gn?(this.gn=!1,this.yn&&(this.yn=!1,i.mediator.publish(i.context,n.Z[n.Z.HoldEnd]))):(this.mn=!0,this.Yn(t))}Hn(t,i,e){e=e||this.$n(t),t.stopPropagation(),this.jn(t,i,r.HT.Interaction),this.jn(t,i,r.HT.InteractionEnd),(this.gn||this.vn||this.un&&this.Dn(i,r.WR.Hold))&&this.Wn(t),(this.vn||this.Dn(i,r.WR.Swipe))&&this.Kn(i,e)}Vn(t,i){this.wn=this.qn(i),this.wn===r.qs.X&&(this.vn=!0,this.gn||(clearTimeout(this.pn),this.pn=null,this.gn=!0,t.mediator.publish(t.context,n.Z[n.Z.HoldStart])))}Kn(t,i){if(this.vn){const e=this.tr(i);t.mediator.publish(t.context,n.Z[n.Z.SwipeEnd],{payload:e})}(0,h.h_)(this.en,this._n),this._n=null,this.vn=!1,this.dn=null,this.ln=null,this.wn=null,this.bn=0,this.xn=0}Un(t){this.xn<this.rn?this.xn++:(this.bn=t,this.xn=0)}qn(t){return Math.abs(t.deltaXFromStart)>=Math.abs(t.deltaYFromStart)?r.qs.X:r.qs.Y}tr(t){return t.deltaXFromStart-this.bn<0?r.Av.Left:r.Av.Right}$n(t){const i=t.changedTouches[0];return{deltaXFromStart:i.clientX-this.dn,deltaYFromStart:i.clientY-this.ln,eventX:i.clientX,eventY:i.clientY}}Rn(t){return this.Pn||this.Qn(t.currentTarget)}Qn(t){return this.hn.find((i=>i.element===t))}Xn(t){const i=this.Rn(t);if(this.Yt){return t.changedTouches[0].clientX-i.element.getBoundingClientRect().left}return t.offsetX}Dn(t,i){return t.allowedSpecialInteractions.includes(i)&&!t.disabledSpecialInteractions.includes(i)}jn(t,i,e){const s=i.callbacks[e];(0,d.mf)(s)&&s(t),this.zn(e,t)}zn(t,i){var e;null===(e=this.an[t])||void 0===e||e.forEach((t=>{t.action(i)}))}}},6438:(t,i,e)=>{"use strict";e.d(i,{c:()=>d});var s,n,r=e(289),o=e(8423),h=e(1561),a=e(2157),c=e(7427),l=e(7726);!function(t){function i(t,i,n,r){const o=t[i];if(!(0,c.QM)(o))return;if(!e(o,r))return;const h=s(o,r);n.has(h)?t[i]=n.get(h):delete t[i]}function e(t,i){return 0===t.indexOf(i[0])&&t.indexOf(i[1],i[1].length)===t.length-i[0].length}function s(t,i){return t.substring(t.indexOf(i[0])+1,t.lastIndexOf(i[1]))}t.searchAndReplaceMacrosInJson=function t(e,s,n){const r=Object.keys(e),o=r.filter((t=>!(0,c.as)(e[t]))),h=r.filter((t=>(0,c.as)(e[t])));return o.forEach((t=>{i(e,t,s,n)})),h.forEach((i=>{t(e[i],s,n)})),e},t.replaceMacrosOnCurrentLevelIfNeeded=i,t.isMacroString=e,t.extractMacroPlaceholder=s}(s||(s={})),function(t){t.AppUrl="APP_URL",t.AppBundle="APP_BUNDLE",t.AppName="APP_NAME",t.Uuid="UUID",t.PageUrl="PAGE_URL",t.AdPosition="AD_POSITION",t.VideoTitle="VIDEO_TITLE",t.MediaTitle="MEDIA_TITLE",t.VideoDuration="VIDEO_DURATION",t.ContentLength="CONTENT_LENGTH",t.VideoDescription="VIDEO_DESCRIPTION",t.VideoUrl="VIDEO_URL",t.VideoId="VIDEO_ID",t.VideoTime="VIDEO_TIME",t.DescriptionUrl="DESCRIPTION_URL",t.VideoKeywords="VIDEO_KEYWORDS",t.Autoplay="AUTOPLAY",t.UserAgent="UA",t.Ip="IP",t.CashBuster="CB",t.Width="WIDTH",t.Height="HEIGHT",t.Domain="DOMAIN",t.SourceReferrer="SOURCE_REFERRER",t.Gdpr="GDPR",t.GdprConsent="GDPR_CONSENT",t.Consent="CONSENT",t.Ctd="CTD",t.Publisher="PUBLISHER",t.Random="RAND",t.Site="SITE",t.SubId="SUB_ID",t.Url="URL",t.UserLat="USER_LAT",t.UserLong="USER_LONG",t.UsPrivacyString="US_PRIVACY",t.Npa="NPA",t.DoNotTrack="DNT",t.FraudSensorUserId="FS_USER_ID",t.PublisherId="PUBLISHER_ID",t.SessionId="SESSION_ID",t.FraudSensorDeviceType="FS_DEVICE_TYPE",t.FraudSensorLookupId="MGID",t.FraudSensorLookupResponseCode="MGTO",t.FraudSensorMediaType="FS_MEDIA_TYPE",t.FraudSensorDeviceIdentifier="FS_DEVICE_IDENT",t.CnxSupplierId="CNX_SUPPLIER_ID",t.AdxPublisherNetworkCode="ADX_CPNC"}(n||(n={}));class d{constructor(t,i,e,s,o,h,l){this.ir=new Map,this.sr="[",this.nr="]",this.ir.set(n.Autoplay,t.playbackMode===r.ProtoPlayerPlaybackModeEnum.Autoplay),this.ir.set(n.UserAgent,navigator.userAgent),this.ir.set(n.UserLong,i.lon),this.ir.set(n.UserLat,i.lat),this.ir.set(n.Ip,i.ip),this.rr(o),this.hr(h),this.ar(e),this.cr(),this.ir.set(n.Domain,s),this.ir.set(n.CnxSupplierId,a.kd),this.ir.set(n.SessionId,t.sessionId),(0,c.QM)(l)&&this.ir.set(n.AdxPublisherNetworkCode,`,${l}`)}rr(t){this.ir.set(n.AppBundle,t.bundleID),this.ir.set(n.AppName,t.appName),this.ir.set(n.AppUrl,t.storeURL)}hr(t){this.ir.set(n.SourceReferrer,t)}cr(){const t=(0,h.w6)()?1:0;this.ir.set(n.DoNotTrack,t)}ar(t){this.ir.set(n.PageUrl,t),this.ir.set(n.Url,t),this.ir.set(n.Publisher,t),this.ir.set(n.Site,t),this.ir.set(n.DescriptionUrl,t)}lr(){const t=(0,o.qs)();this.ir.set(n.CashBuster,t),this.ir.set(n.Random,t),this.ir.set(n.Ctd,t)}dr(t){return t.split("?")[0]}ur(t){return t.split("?").slice(1).join("?")}pr(t,i){const e=this.dr(t),s=this.gr(this.ur(t),i);return`${e}${s?`?${s}`:""}`}gr(t,i,e=!1){let n=t;const r=n.split("&"),o=[this.sr,this.nr];try{r.forEach((t=>{const r=t.split("=");if(r[1])if(s.isMacroString(r[1],o))n=n.replace(r[1],this.yr(r[1].toLowerCase(),i,e));else if(decodeURIComponent(r[1]).split("=").length>1){const t=this.gr(decodeURIComponent(r[1]),i,!0);n=n.replace(r[1],encodeURIComponent(t))}}))}catch(i){throw(0,l.n)({message:"MacrosService_handleMacros",exception:i.message,callStack:t,level:l.D.CRITICAL},{throttle:1}),i}return n=this.vr(n,i),this.wr(n)}wr(t){return t.includes(this.sr)&&(t=t.cnx_replaceAll(this.sr,encodeURIComponent(this.sr))),t.includes(this.nr)&&(t=t.cnx_replaceAll(this.nr,encodeURIComponent(this.nr))),t}yr(t,i,e){let s,n=t;return i.forEach(((t,i)=>{for(;n.includes(this.sr+i.toLowerCase()+this.nr);)s=e?t:encodeURIComponent(t),n=n.replace(this.sr+i.toLowerCase()+this.nr,s)})),n}vr(t,i){const e=`${this.sr}${n.AdxPublisherNetworkCode}${this.nr}`;return t.includes(e)?i.has(n.AdxPublisherNetworkCode)?t.cnx_replaceAll(e,i.get(n.AdxPublisherNetworkCode)):t.cnx_replaceAll(e,""):t}setAdWidth(t){this.ir.set(n.Width,Math.floor(t))}setAdHeight(t){this.ir.set(n.Height,Math.floor(t))}setSubId(t){this.ir.set(n.SubId,t)}setGDPR(t){this.ir.set(n.Gdpr,t)}setUUID(t){this.ir.set(n.Uuid,t)}setGDPRConsent(t){this.ir.set(n.GdprConsent,t)}setConsent(t){this.ir.set(n.Consent,t)}setVideoId(t){this.ir.set(n.VideoId,t)}setNPA(t){this.ir.set(n.Npa,t)}setVideoTime(t){this.ir.set(n.VideoTime,Math.floor(t))}setVideoUrl(t){this.ir.set(n.VideoUrl,t)}setVideoDescription(t){this.ir.set(n.VideoDescription,t)}setVideoDuration(t){this.ir.set(n.VideoDuration,t),this.ir.set(n.ContentLength,t)}setVideoTitle(t){let i;this.ir.set(n.VideoTitle,t),this.ir.set(n.MediaTitle,t),t&&(i=t.split(" ").join(",")),this.ir.set(n.VideoKeywords,i)}setAdPosition(t="midRoll"){this.ir.set(n.AdPosition,t)}setupMacros(t){return this.lr(),this.pr(t,this.ir)}replaceMacrosInJsonString(t){const i=[this.sr,this.nr],e=JSON.parse(t),n=s.searchAndReplaceMacrosInJson(e,this.ir,i);return JSON.stringify(n)}addExtraMacros(t){const i=Object.values(n);Object.keys(t).filter((t=>!i.includes(t.toUpperCase()))).forEach((i=>{this.ir.set(i,t[i])}))}getExtraMacros(){const t=Object.values(n),i={};return this.ir.forEach(((e,s)=>{t.includes(s)||null==e||(i[s]=(0,c.QM)(e)?e:JSON.stringify(e))})),i}setUsPrivacyString(t){const i=t||"";this.ir.set(n.UsPrivacyString,i)}setUserId(t){this.ir.set(n.FraudSensorUserId,t)}setPublisherId(t){this.ir.set(n.PublisherId,t)}setFraudSensorMacros(t){this.ir.set(n.FraudSensorDeviceType,t.deviceType),this.ir.set(n.FraudSensorLookupId,t.lookupId),this.ir.set(n.FraudSensorLookupResponseCode,t.lookupResponseCode),this.ir.set(n.FraudSensorMediaType,t.mediaType),this.ir.set(n.FraudSensorDeviceIdentifier,t.deviceIdentifier)}destroy(){}}},2356:(t,i,e)=>{"use strict";var s,n;e.d(i,{v:()=>r}),function(t){t.hidden="hidden",t.msHidden="msHidden",t.webkitHidden="webkitHidden"}(s||(s={})),function(t){t.visibilitychange="visibilitychange",t.msvisibilitychange="msvisibilitychange",t.webkitvisibilitychange="webkitvisibilitychange"}(n||(n={}));class r{constructor(t){this._r=t,this.Pr=[],this.Sr(),this.Ar()}on(t){this.Pr.push(t),t(this.isDocumentVisible())}off(t){this.Pr=this.Pr.filter((i=>i!==t))}Sr(){void 0!==this._r.getDocumentProperty(s.hidden)?(this.Ir=s.hidden,this.kr=n.visibilitychange):void 0!==this._r.getDocumentProperty(s.msHidden)?(this.Ir=s.msHidden,this.kr=n.msvisibilitychange):void 0!==this._r.getDocumentProperty(s.webkitHidden)&&(this.Ir=s.webkitHidden,this.kr=n.webkitvisibilitychange)}Ar(){this._r.addEventListenerOnGlobal(this.kr,(()=>{this.Pr.forEach((t=>{t(this.isDocumentVisible())}))}),!0,!1)}isDocumentVisible(){return!this._r.getDocumentProperty(this.Ir)}}},7398:(t,i,e)=>{"use strict";e.d(i,{a:()=>z});var s,n=e(7726),r=e(1561),o=[],h="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(s||(s={}));var a,c=function(t){return Object.freeze(t)},l=function(t,i){this.inlineSize=t,this.blockSize=i,c(this)},d=function(){function t(t,i,e,s){return this.x=t,this.y=i,this.width=e,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,c(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(i){return new t(i.x,i.y,i.width,i.height)},t}(),u=function(t){return t instanceof SVGElement&&"getBBox"in t},p=function(t){if(u(t)){var i=t.getBBox(),e=i.width,s=i.height;return!e&&!s}var n=t,r=n.offsetWidth,o=n.offsetHeight;return!(r||o||t.getClientRects().length)},f=function(t){var i,e;if(t instanceof Element)return!0;var s=null===(e=null===(i=t)||void 0===i?void 0:i.ownerDocument)||void 0===e?void 0:e.defaultView;return!!(s&&t instanceof s.Element)},g="undefined"!=typeof window?window:{},m=new WeakMap,y=/auto|scroll/,v=/^tb|vertical/,b=/msie|trident/i.test(g.navigator&&g.navigator.userAgent),x=function(t){return parseFloat(t||"0")},w=function(t,i,e){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=!1),new l((e?i:t)||0,(e?t:i)||0)},_=c({devicePixelContentBoxSize:w(),borderBoxSize:w(),contentBoxSize:w(),contentRect:new d(0,0,0,0)}),P=function(t,i){if(void 0===i&&(i=!1),m.has(t)&&!i)return m.get(t);if(p(t))return m.set(t,_),_;var e=getComputedStyle(t),s=u(t)&&t.ownerSVGElement&&t.getBBox(),n=!b&&"border-box"===e.boxSizing,r=v.test(e.writingMode||""),o=!s&&y.test(e.overflowY||""),h=!s&&y.test(e.overflowX||""),a=s?0:x(e.paddingTop),l=s?0:x(e.paddingRight),f=s?0:x(e.paddingBottom),g=s?0:x(e.paddingLeft),P=s?0:x(e.borderTopWidth),S=s?0:x(e.borderRightWidth),A=s?0:x(e.borderBottomWidth),I=g+l,k=a+f,C=(s?0:x(e.borderLeftWidth))+S,T=P+A,M=h?t.offsetHeight-T-t.clientHeight:0,E=o?t.offsetWidth-C-t.clientWidth:0,B=n?I+C:0,L=n?k+T:0,O=s?s.width:x(e.width)-B-E,R=s?s.height:x(e.height)-L-M,D=O+I+E+C,F=R+k+M+T,$=c({devicePixelContentBoxSize:w(Math.round(O*devicePixelRatio),Math.round(R*devicePixelRatio),r),borderBoxSize:w(D,F,r),contentBoxSize:w(O,R,r),contentRect:new d(g,a,O,R)});return m.set(t,$),$},S=function(t,i,e){var n=P(t,e),r=n.borderBoxSize,o=n.contentBoxSize,h=n.devicePixelContentBoxSize;switch(i){case s.DEVICE_PIXEL_CONTENT_BOX:return h;case s.BORDER_BOX:return r;default:return o}},A=function(t){var i=P(t);this.target=t,this.contentRect=i.contentRect,this.borderBoxSize=c([i.borderBoxSize]),this.contentBoxSize=c([i.contentBoxSize]),this.devicePixelContentBoxSize=c([i.devicePixelContentBoxSize])},I=function(t){if(p(t))return 1/0;for(var i=0,e=t.parentNode;e;)i+=1,e=e.parentNode;return i},k=function(){var t=1/0,i=[];o.forEach((function(e){if(0!==e.activeTargets.length){var s=[];e.activeTargets.forEach((function(i){var e=new A(i.target),n=I(i.target);s.push(e),i.lastReportedSize=S(i.target,i.observedBox),n<t&&(t=n)})),i.push((function(){e.callback.call(e.observer,s,e.observer)})),e.activeTargets.splice(0,e.activeTargets.length)}}));for(var e=0,s=i;e<s.length;e++){(0,s[e])()}return t},C=function(t){o.forEach((function(i){i.activeTargets.splice(0,i.activeTargets.length),i.skippedTargets.splice(0,i.skippedTargets.length),i.observationTargets.forEach((function(e){e.isActive()&&(I(e.target)>t?i.activeTargets.push(e):i.skippedTargets.push(e))}))}))},T=function(){var t,i=0;for(C(i);o.some((function(t){return t.activeTargets.length>0}));)i=k(),C(i);return o.some((function(t){return t.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:h}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=h),window.dispatchEvent(t)),i>0},M=[],E=function(t){if(!a){var i=0,e=document.createTextNode("");new MutationObserver((function(){return M.splice(0).forEach((function(t){return t()}))})).observe(e,{characterData:!0}),a=function(){e.textContent=""+(i?i--:i++)}}M.push(t),a()},B=0,L={attributes:!0,characterData:!0,childList:!0,subtree:!0},O=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],R=function(t){return void 0===t&&(t=0),Date.now()+t},D=!1,F=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var i=this;if(void 0===t&&(t=250),!D){D=!0;var e,s=R(t);e=function(){var e=!1;try{e=T()}finally{if(D=!1,t=s-R(),!B)return;e?i.run(1e3):t>0?i.run(t):i.start()}},E((function(){requestAnimationFrame(e)}))}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,i=function(){return t.observer&&t.observer.observe(document.body,L)};document.body?i():g.addEventListener("DOMContentLoaded",i)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),O.forEach((function(i){return g.addEventListener(i,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),O.forEach((function(i){return g.removeEventListener(i,t.listener,!0)})),this.stopped=!0)},t}()),$=function(t){!B&&t>0&&F.start(),!(B+=t)&&F.stop()},j=function(){function t(t,i){this.target=t,this.observedBox=i||s.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,i=S(this.target,this.observedBox,!0);return t=this.target,u(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=i),this.lastReportedSize.inlineSize!==i.inlineSize||this.lastReportedSize.blockSize!==i.blockSize},t}(),V=function(t,i){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=i},N=new WeakMap,U=function(t,i){for(var e=0;e<t.length;e+=1)if(t[e].target===i)return e;return-1},H=function(){function t(){}return t.connect=function(t,i){var e=new V(t,i);N.set(t,e)},t.observe=function(t,i,e){var s=N.get(t),n=0===s.observationTargets.length;U(s.observationTargets,i)<0&&(n&&o.push(s),s.observationTargets.push(new j(i,e&&e.box)),$(1),F.schedule())},t.unobserve=function(t,i){var e=N.get(t),s=U(e.observationTargets,i),n=1===e.observationTargets.length;s>=0&&(n&&o.splice(o.indexOf(e),1),e.observationTargets.splice(s,1),$(-1))},t.disconnect=function(t){var i=this,e=N.get(t);e.observationTargets.slice().forEach((function(e){return i.unobserve(t,e.target)})),e.activeTargets.splice(0,e.activeTargets.length)},t}(),q=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");H.connect(this,t)}return t.prototype.observe=function(t,i){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!f(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");H.observe(this,t,i)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!f(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");H.unobserve(this,t)},t.prototype.disconnect=function(){H.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();class z{constructor(t){this.Cr=[],this.Tr=(t,i)=>{t.forEach((t=>{this.Mr(t.target).forEach((t=>{t&&((0,r.Tp)(t.element),t.callback(t.element))}))}))};try{const i=t.ResizeObserver||q;this.Er=new i(this.Tr)}catch(t){(0,n.n)({message:"ResizeObserver_constructor",callStack:t.stack,exception:t.message,level:n.D.CRITICAL})}}on(t,i){this.Br(t,i)||(this.Cr.push({element:t,callback:i}),this.Er.observe(t))}off(t,i){const e=this.Br(t,i);if(!e)return;this.Er.unobserve(e.element);const s=this.Cr.indexOf(e);s>=0&&this.Cr.splice(s,1)}destroy(){if(this.Cr)for(;this.Cr.length>0;)this.Cr.pop();this.Er.disconnect()}Mr(t){return this.Cr.filter((i=>i.element===t))}Br(t,i){return this.Cr.find((e=>e.element===t&&e.callback===i))}}},3352:(t,i,e)=>{"use strict";e.d(i,{G:()=>s});class s{setNewMedia(){}updateMediaMetadata(){}setMediaStart(){}setContentStart(){}setSessionPlayback(){}setSessionViewability(){}trackSessionRendered(){}trackSessionViewability(){}trackMediaQuartile(){}trackMediaClick(){}setAdStart(){}startBidTrackingInterval(){}addPrebid(){}addPostBid(){}addBid(){}trackAuctionInfoForBid(){}trackVideoAdImpression(){}trackVideoAdImpressionViewable(){}trackVideoAdQuartile(){}trackAdClick(){}trackAdOpportunity(){}trackSessionAdBlocker(){}getMetadataModel(){}getPlayerSize(){return{playerWidth:0,playerHeight:0}}updateMetadataModel(){}updatePlayerDimensions(t,i){}setIsConsentPayload(){}destroy(){}publish(){}setImplementationTypeOnMeta(){}trackHeavyAdIntervention(){}}},9446:(t,i,e)=>{"use strict";e.d(i,{e:()=>b});var s=e(158),n=e(289),r=e(45),o=e(525),h=e(5880),a=e(7427),c=e(1730),l=e(7577),d=e(8423),u=e(3030),p=e(497),f=(e(7417),e(6716)),g=e(4974),m=e(1886),y=e(9115);class v{constructor(){this.Lr=null,this.Or=0}Rr(){if(null===this.Lr)return;const t=(new Date).getTime();this.Or=t-this.Lr}startCountingTime(){this.Lr=(new Date).getTime()}stopCountingTime(){this.Rr(),this.Lr=null}fetchTime(t){this.Rr();const i=Math.round(this.Or/y.s_);return this.Or=0,null!==this.Lr&&this.startCountingTime(),i>t?t:i}}class b extends h._{constructor({userId:t,playerId:i,geoLocation:e,browser:s,sessionId:n,pageUrl:o,bundleId:h,Dr:a,userManagerService:l,customParam1:p,customParam2:g,customParam3:m,customParam4:y,customParam5:b,abTestId:x,explorationMode:w,bundleAbId:_,bundlePart:P}){super(),this.hasGdprConsentPayload=!1,this.Fr={},this.$r={},this.jr=!1,this.Vr=!1,this.Nr=!1,this.Ur=!1,this.Hr=[],this.qr=[],this.zr=[],this.Wr=5e3,this.Gr=!1,this.Jr=[{delay:7,timesRepeatDelay:1},{delay:8,timesRepeatDelay:1},{delay:15,timesRepeatDelay:3},{delay:30,timesRepeatDelay:2},{delay:60,timesRepeatDelay:1},{delay:120,timesRepeatDelay:1},{delay:300,timesRepeatDelay:8},{delay:600,timesRepeatDelay:13},{delay:1800}],this.Qr=0,this.Yr=0,this.Xr=0,this.Kr=new f.x,this.io=new f.x,this.eo=new f.x;(0,u.d3)(i,[])?this.Fr.trackAllRequests=!0:this.Fr.trackAllRequests=1===(0,d.Vm)([99,1]),this.so=l,this.Fr.userId=t,this.Fr.playerId=i,this.Fr.geo=e,this.Fr.browser=s,this.Fr.version=r.g.version,this.Fr.sessionId=n,this.Fr.clientAb0=c.e.clientAb0,this.Fr.clientAb1=c.e.clientAb1,this.Fr.serverAb0=c.e.serverAb0,this.Fr.serverAb1=c.e.serverAb1,this.Fr.pageUrl=o,this.Fr.bundleId=h,this.Fr.customParam1=p,this.Fr.customParam2=g,this.Fr.customParam3=m,this.Fr.customParam4=y,this.Fr.customParam5=b,this.Fr.bundleAbId=_,this.Fr.bundlePart=P,this.Fr.abTestId=x,this.no=new v,this.ro=new v,this.oo=w}ho(t,i=n.ProtoTrackingRequest,e,r=!0){return this.Fr.pageInFocus=p.S.pageFocus,s.n.sendProtoBeaconRequest({endpoint:t,ProtoRequest:i,requestData:Object.assign({trackingRequestMeta:r?this.Fr:void 0},e),logError:!1})}ao(t,i=n.ProtoTrackingRequest,e){this.Fr.pageInFocus=p.S.pageFocus;const o=s.n.sendProtoRequest({endpoint:t,ProtoRequest:i,ProtoResponse:n.ProtoTrackingResponse,requestData:Object.assign({trackingRequestMeta:this.Fr},e),queryParams:Object.assign({[l.Fk]:r.g.version},m.f.getCidKeyValueObject()),withCredentials:!0,logError:!0});return o.then((t=>{var i;const s=t.platformCappedLineItemIdList;(0,u.BZ)(s)&&this.Kr.next(s);const{impressionRevenue:n,adServerLineItemName:r}=t;if((0,a.r)(n)&&(0,a.QM)(r)&&this.io.next({impressionRevenue:n,adServerLineItemName:r}),(0,a.$K)(t.viewability)){const s=null===(i=e)||void 0===i?void 0:i.advertiserLineItemId;this.eo.next([s,t.viewability])}})).catch((t=>{})),o}co(t,i,e=n.ProtoMediaTrackingRequest){const s=Object.assign({},i);(0,a.QM)(this.$r.mediaId)&&(s.mediaGuid=this.$r.mediaId),this.ao(t,e,s)}do(){var t;this.Gr||(this.Gr=!0,this.ao(o.n.endPoints.tracking.playerStart,n.ProtoPlayerStartRequest,{pageInsightIndexes:null===(t=g.k.pageInsights)||void 0===t?void 0:t.insights}))}uo(t,i,e=n.ProtoMediaTrackingRequest){var s;return this.ao(t,e,Object.assign({mediaGuid:this.$r.mediaId,insightIndexes:this.$r.insights,sentimentAnalysis:this.$r.sentimentAnalysis,pageInsightIndexes:null===(s=g.k.pageInsights)||void 0===s?void 0:s.insights},i))}po(t){this.co(o.n.endPoints.tracking.media_quartile,{baseMeta:this.$r,mediaId:this.$r.mediaId,insightIndexes:this.$r.insights,sentimentAnalysis:this.$r.sentimentAnalysis,quartile:t})}fo(){this.mo(this.qr,this.Hr,this.zr),this.qr=[],this.Hr=[],this.zr=[]}mo(t,i,e){if(0===t.length&&0===i.length&&0===e.length)return;e.forEach((t=>{t.error&&t.error.length>0&&(t.error=t.error.substring(0,500))}));const s={mediaGuid:this.$r.mediaId,prebids:t,bids:i,postBids:e,logEveryting:this.Fr.trackAllRequests,hasGdprConsentPayload:this.hasGdprConsentPayload,gdprConsentMode:this.so.gdprConsentMode,useExploration:this.oo};this.ao(o.n.endPoints.tracking.bids,n.ProtoBidTrackingsRequest,s)}yo(t){var i;this.ao(o.n.endPoints.tracking.ad_click,n.ProtoAdClickTrackingRequest,Object.assign({mediaGuid:this.$r.mediaId,insightIndexes:this.$r.insights,sentimentAnalysis:this.$r.sentimentAnalysis,pageInsightIndexes:null===(i=g.k.pageInsights)||void 0===i?void 0:i.insights},t))}vo(t){this.ho(o.n.endPoints.tracking.heavy_ad_intervention,n.ProtoHeavyAdTrackingRequest,t)}bo(){const t=this.Jr[this.Qr];clearTimeout(this.xo),this.xo=setTimeout((()=>{this.wo(t.delay),(0,a.r)(t.timesRepeatDelay)&&t.timesRepeatDelay--,0===t.timesRepeatDelay&&this.Qr++,this.bo()}),1e3*t.delay)}wo(t){var i;this.ao(o.n.endPoints.tracking.session_time,n.ProtoSessionTimeTrackingRequest,{trackingRequestMeta:this.Fr,sessionTime:t,timePlayed:this.no.fetchTime(t),timePlayedInView:this.ro.fetchTime(t),pageInsightIndexes:null===(i=g.k.pageInsights)||void 0===i?void 0:i.insights})}_o(t){return t.playerWidth=this.Yr,t.playerHeight=this.Xr,t}get onLineItemPlatformCapped(){return this.Kr.asObservable()}get onLineItemViewabilityChange(){return this.eo.asObservable()}get onImpressionRevenue(){return this.io.asObservable()}setNewMedia(t){this.$r=t}updateMediaMetadata(t){this.$r=t}setImplementationTypeOnMeta(t){this.Fr.implementationType=t}setMediaStart(){this.po(n.ProtoQuartilesEnum.Start)}setContentStart(){this.do()}setSessionPlayback(t){this.Nr!==t&&(this.Nr=t,this.Ur&&this.Nr&&this.ro.startCountingTime(),this.Nr?this.no.startCountingTime():(this.no.stopCountingTime(),this.ro.stopCountingTime()))}setSessionViewability(t){this.Ur!==t&&(this.Ur=t,this.Ur&&this.Nr?this.ro.startCountingTime():this.Ur||this.ro.stopCountingTime())}trackSessionRendered(t){var i;if(this.jr)return;this.ao(o.n.endPoints.tracking.session_rendered,n.ProtoTrackingRequest,{playerHeight:this.Xr,playerWidth:this.Yr,hasAdBlocker:t,bundleName:"connatix.playspace.js",pageInsightIndexes:null===(i=g.k.pageInsights)||void 0===i?void 0:i.insights}),this.jr=!0,this.bo()}trackSessionViewability(){var t;!this.Vr&&this.Gr&&(this.ao(o.n.endPoints.tracking.session_view,n.ProtoSessionViewRequest,{pageInsightIndexes:null===(t=g.k.pageInsights)||void 0===t?void 0:t.insights}),this.Vr=!0)}trackMediaQuartile(t){this.po(t)}trackMediaClick(t=n.ProtoMediaClickTypeEnum.Click){const i={type:t,clickUrl:t===n.ProtoMediaClickTypeEnum.UrlClick?this.$r.clickUrl:void 0,insightIndexes:this.$r.insights,sentimentAnalysis:this.$r.sentimentAnalysis,slideTitle:this.$r.slideTitle,slideNumber:this.$r.slideNumber,slideMediaType:this.$r.slideMediaType};this.co(o.n.endPoints.tracking.media_click,i,n.ProtoMediaClickTrackingRequest)}setAdStart(){this.do()}startBidTrackingInterval(){this.Po=setInterval((()=>{this.fo()}),this.Wr)}addPrebid(t){t=this._o(t),this.qr.push(t)}addPostBid(t){t=this._o(t),(0,a.HD)(t.error)||(t.error=JSON.stringify(t.error)),this.zr.push(t)}addBid(t){t=this._o(t),this.Hr.push(t)}trackAuctionInfoForBid(t){this.ao(o.n.endPoints.tracking.auctionInformation,n.ProtoAuctionInfoRequest,t)}trackVideoAdImpression(t){return t=this._o(t),this.uo(o.n.endPoints.tracking.ad_impression,t,n.ProtoVideoAdImpressionRequest)}trackVideoAdImpressionViewable(t){return this.uo(o.n.endPoints.tracking.ad_impression_viewable,t,n.ProtoVideoAdImpressionViewableRequest)}trackVideoAdQuartile(t){var i;t=Object.assign(Object.assign({},t),{insightIndexes:this.$r.insights,sentimentAnalysis:this.$r.sentimentAnalysis,pageInsightIndexes:null===(i=g.k.pageInsights)||void 0===i?void 0:i.insights}),this.co(o.n.endPoints.tracking.ad_quartile,t,n.ProtoVideoAdQuartilesRequest)}trackAdClick(t){this.yo(t)}trackAdOpportunity(t){var i;const{sessionId:e}=this.Fr;t.sessionId=e,t.pageInsightIndexes=null===(i=g.k.pageInsights)||void 0===i?void 0:i.insights,this.ao(o.n.endPoints.tracking.adOpportunity,n.ProtoAdOpportunityRequest,t)}trackSessionAdBlocker(t){this.ao(o.n.endPoints.tracking.sessionAdBlocker,n.ProtoSessionAdBlockerRequest,{trackingRequestMeta:this.Fr,adBlockDetectionType:t})}getMetadataModel(){return this.Fr}getPlayerSize(){return{playerWidth:this.Yr,playerHeight:this.Xr}}updateMetadataModel(t){this.Fr=Object.assign(Object.assign({},this.Fr),t)}updatePlayerDimensions(t,i){this.Yr=t,this.Xr=i}trackHeavyAdIntervention(t){this.vo(t)}destroy(){clearInterval(this.xo),clearInterval(this.Po)}}},9207:(t,i,e)=>{"use strict";e.d(i,{f:()=>o});var s=e(3030),n=e(6615),r=e(7427);class o{constructor(){this.So={},this.Ao={domain:"",urlParams:[]},this.ignoredDomains=[]}setQueryParams(t){this.So=t}setUrlParams(t){this.Ao=t}appendParamsToUrl(t){return this.isIgnoredDomain(t)?t:this.Io(t)}appendQueryParamsToUrl(t){return this.isIgnoredDomain(t)?t:this.ko(t,Object.keys(this.So).map((t=>({paramName:t,paramValue:this.So[t]}))))}Io(t){if(!(0,s.BZ)(Object.keys(this.Ao))||!(0,s.BZ)(this.Ao.urlParams)||!t.includes(this.Ao.domain))return t;const i=this.Ao.urlParams.reduce(((t,i)=>`${t}${i}`),"");return t.replace(this.Ao.domain,this.Ao.domain+"/"+i)}ko(t,i){if(!(0,s.BZ)(i))return t;t+=(0,n.CK)(t);let e="";return i.forEach((t=>{(0,r.QM)(t.paramName)&&(0,r.QM)(t.paramValue)&&(e+=`${e.length>0?"&":""}${t.paramName}=${t.paramValue}`)})),t+e}isIgnoredDomain(t){return this.ignoredDomains.some((i=>t.indexOf(i)>-1))}}},7432:(t,i,e)=>{"use strict";var s;e.d(i,{Z:()=>n}),function(t){t[t.P1=1]="P1",t[t.P2=2]="P2",t[t.P3=3]="P3",t[t.P4=4]="P4",t[t.P5=5]="P5",t[t.P6=6]="P6",t[t.P7=7]="P7",t[t.P8=8]="P8",t[t.P9=9]="P9",t[t.P10=10]="P10"}(s||(s={}));const n=[s.P1,s.P2,s.P4,s.P7,s.P8]},7272:(t,i,e)=>{"use strict";e.d(i,{k:()=>X,x:()=>tt});var s,n=e(8423);!function(t){t.Connatix="143",t.AppNexus="32",t.DistrictM="144",t.IndexExchange="10",t.Lkqd="237",t.OneVideo="25",t.Openx="69",t.Pubmatic="76",t.RhythmOne="36",t.Rubicon="52",t.Spotx="165",t.Telaria="202",t.MediaNet="142",t.AdMan="149",t.IronSource="",t.Undertone="677",t.SynacorMedia="",t.AmxRTB="737",t.Smaato="82",t.TheMediaGrid="686",t.Rise="1043"}(s||(s={}));const r=["1YNY"];var o=e(158),h=e(289),a=e(525),c=e(7427),l=e(7577),d=e(45);class u{constructor(t){this.Co=t,this.To=!0,this.Mo="",this.Eo=!1,this.Bo=[]}static getInstance(t){const i=(0,n.pE)(t).topFrame;return i.cnx_usr_storage||(i.cnx_usr_storage=new u(i)),i.cnx_usr_storage}get userId(){if((0,c.QM)(this.Lo))return this.Lo.split("_")[0]}set userId(t){this.Lo=t}get isCcpaApplicable(){return this.To}set isCcpaApplicable(t){this.To=t}get usPrivacyString(){return this.Mo}set usPrivacyString(t){this.Mo=t}get consentPayload(){return this.Oo}set consentPayload(t){this.Oo||(this.Oo=t)}getScope(){return this.Co}syncDemandPartner(t){if(this.userId){const i={userId:this.userId,demandPartner:parseInt(t.demandPartner,10),demandPartnerUserId:t.demandPartnerUserId};o.n.sendProtoRequest({ProtoRequest:h.ProtoUserSyncRequest,endpoint:a.n.endPoints.api.syncUrls,requestData:i,queryParams:{[l.Fk]:d.g.version},logError:!0}).then((t=>{})).catch((t=>{}))}}registerPlsCall(t){return this.Eo?(this.Bo.push(t),()=>{}):this.userId?(t(),()=>{}):(this.Eo=!0,t(),()=>{this.Eo=!1,this.Bo.forEach((t=>t())),this.Bo=[]})}}var p,f,g=e(2324),m=e(7726),y=e(3030);!function(t){t.USER_ID="cnx_userId"}(p||(p={}));class v{constructor(t,i){this.Ro=t,this.Ue=i,this.Do={[p.USER_ID]:30},this.Fo=["Facebook App","Google App","Flipboard App","Instagram App","Pinterest App"],this.$o=!1}jo({name:t,value:i}){t===p.USER_ID&&(this.Ro.userId=this.Vo(i))}Uo(t){let i="";const e=this.Do[t.name];if(e){i=`; expires=${new Date((0,g.XF)(e)).toUTCString()}`}this.Ue.document.cookie=`${t.name}=${t.value}${i}; path=/`}zo(t,i){if(!(0,y.BZ)(t))return;const e={cookieList:t,secureMode:i?h.ProtoCookieSecureModeEnum.Unsecure:h.ProtoCookieSecureModeEnum.Auto,browserInfo:this.Wo};return o.n.sendProtoRequest({requestData:e,ProtoRequest:h.ProtoCookieSyncRequest,endpoint:a.n.endPoints.api.cookie,withCredentials:!0,queryParams:{[l.Fk]:d.g.version},logError:!1}).catch((t=>(0,m.n)({message:"UserCookieManager_setThirdPartyCookie",exception:t.message,callStack:t.callStack,level:m.D.CRITICAL})))}Vo(t){return t.split("_")[0]}Go(t){try{const i=t+"=",e=decodeURIComponent(this.Ue.document.cookie).split(";");for(let t of e){for(;" "===t.charAt(0);)t=t.substring(1);if(t.includes(i))return this.Vo(t.substring(i.length,t.length))}}catch(t){}return""}getUserId(){return this.Ro.userId}syncFirstPartyCookie(t){const i={name:t,value:"",timestamp:(0,g.XF)(this.Do[t])};t===p.USER_ID&&(i.value=this.Ro.userId),(0,c.QM)(i.value)&&this.Uo(i)}syncThirdPartyCookieList(t){const i=[p.USER_ID],e=[];i.forEach((t=>{t===p.USER_ID&&(0,c.QM)(this.Ro.userId)&&e.push({name:p.USER_ID,value:this.Ro.userId,timestamp:(0,g.XF)(this.Do[p.USER_ID])})})),this.zo(e,t)}setBrowserInfo(t,i){this.Wo=t,this.$o=this.Fo.includes(t.browserType),this.$o&&i&&this.syncThirdPartyCookieList(this.$o)}setUserInformation(t){t&&this.jo({name:p.USER_ID,value:t.userId})}fetchCookies(){[p.USER_ID].map((t=>({name:t,value:this.Go(t)}))).filter((({value:t})=>(0,c.QM)(t))).forEach((t=>this.jo(t)))}get unsecuredCookieSync(){return this.$o}}!function(t){t[t.CmpApi=0]="CmpApi",t[t.TcfApi=1]="TcfApi"}(f||(f={}));const b={[f.CmpApi]:{windowPropertyName:"__cmp",framePropertyName:"__cmpLocator",getVendorConsentDataMethodName:"getVendorConsents",getConsentDataMethodName:"getConsentData"},[f.TcfApi]:{windowPropertyName:"__tcfapi",framePropertyName:"__tcfapiLocator",getVendorConsentDataMethodName:"getTCData",consentUpdateMethodName:"addEventListener",removeUpdateListenerMethodName:"removeEventListener"}};class x{constructor(t,i){this.Jo=t,this.Qo=i,this.apiType=f.CmpApi,this.Yo={},this.Oo=null,this.Xo=t=>new Promise(((i,e)=>{try{const e="string"==typeof t.data?JSON.parse(t.data):t.data;if("object"==typeof e&&e.Zo)if(e.Zo.callId===this.Ko){const t=e.Zo.returnValue&&e.Zo.returnValue.vendorConsents;this.th(t).then((()=>i(this.Ko)))}else if(e.Zo.callId===this.ih){const t=e.Zo.returnValue&&e.Zo.returnValue.consentData;this.eh(t).then((()=>i(this.ih)))}}catch(t){e()}}))}isApiOnPage(){return null!==this.Jo||null!==this.Qo}bindToApi(){return null!==this.Jo?new Promise(((t,i)=>{this.sh(this.Jo).then((()=>t())).catch((t=>i(t)))})):null!==this.Qo?this.nh(this.Qo):Promise.reject()}isConsentForVendor(t){return!!this.Yo[t]}getConsentPayload(){return this.Oo}setInAppConsentData(t){this.th(t),this.eh(t.consentString)}hasIvtConsent(){return this.isConsentForVendor(s.Connatix)}isConsentForPurposes(t){return!0}nh(t){this.ih=(0,n.qs)(),this.Ko=(0,n.qs)();const i={};return new Promise((e=>{const s=t=>{this.Xo(t).then((t=>{i[t]=!0,i[this.ih]&&i[this.Ko]&&(window.removeEventListener("message",s,!1),e())})).catch((t=>{}))};window.addEventListener("message",s,!1);const n=b[f.CmpApi].getVendorConsentDataMethodName,r=b[f.CmpApi].getConsentDataMethodName;t.postMessage({rh:{command:n,parameter:null,callId:this.Ko}},"*"),t.postMessage({rh:{command:r,parameter:null,callId:this.ih}},"*")}))}sh(t){const i=b[f.CmpApi].windowPropertyName,e=b[f.CmpApi].getVendorConsentDataMethodName,s=b[f.CmpApi].getConsentDataMethodName;if(t&&t[i]){const n=new Promise((s=>{t[i](e,null,((t,i)=>{if(i){const{vendorConsents:i}=t;this.th(i).then((()=>s()))}}))})),r=new Promise((e=>{t[i](s,null,((t,i)=>{if(i){const{consentData:i}=t;this.eh(i).then((()=>e()))}}))}));return Promise.all([n,r])}return Promise.reject()}th(t){return(0,c.as)(t)?(this.Yo=t,Promise.resolve()):Promise.reject()}eh(t){return(0,c.HD)(t)?(this.Oo=t,Promise.resolve()):Promise.reject()}}var w=e(1561),_=e(8462),P=e(2381);const S=(t,i)=>{const e=b[i].windowPropertyName;return(0,w.uq)(t,e)},A=(t,i)=>{const e=b[i].framePropertyName;return(0,w.wl)(t,e)},I=(t,i)=>null!==S(t,i)||null!==A(t,i),k=t=>{const i=P.E.decode(t),e={},s={};return i.vendorConsents.forEach(((t,i)=>e[i]=t)),i.purposeConsents.forEach(((t,i)=>s[i]=t)),{vendorConsents:e,purposeConsents:s,tcString:t}},C=t=>{const i=_.decodeConsentString(t);let e="";const s=i.maxVendorId;for(let t=1;t<=s;t++)e+="0";const n=e.split("");i.allowedVendorIds.forEach((t=>{n[t-1]="1"}));return(t=>{const i={consentString:t};for(let e=0;e<t.length;e++)i[e+1]="1"===t[e];return i})(n.join(""))},T=(t,i,e)=>{let s;try{s=i(t)}catch(t){}if((0,c.as)(s))return s;try{s=e(t)}catch(t){}return s},M=t=>{var i;return(0,c.QM)(null===(i=t)||void 0===i?void 0:i.tcString)},E=t=>{var i;return(0,c.QM)(null===(i=t)||void 0===i?void 0:i.consentString)},B=({cmpEncodedString:t,tcfEncodedString:i})=>{if(!(0,c.QM)(t)&&!(0,c.QM)(i))return null;let e=null;return(0,c.QM)(i)&&(e=T(i,k,C)),(0,c.as)(e)?e:(0,c.QM)(t)?(e=T(t,C,k),(0,c.as)(e)?e:((0,m.n)({message:"UserManagerService_getDecodedConsentData",exception:"cmpEncodedString failed to decode",callStack:JSON.stringify({cmpEncodedString:t,tcfEncodedString:i}),level:m.D.CRITICAL}),null)):((0,m.n)({message:"UserManagerService_getDecodedConsentData",exception:"tcfEncodedString failed to decode",callStack:JSON.stringify({tcfEncodedString:i}),level:m.D.CRITICAL}),null)};class L{constructor(t,i){this.oh=t,this.hh=i,this.apiType=f.TcfApi,this.ah=t=>new Promise(((i,e)=>{try{let s=t.data;if("string"==typeof t.data)try{s=JSON.parse(t.data)}catch(t){s=void 0}if("object"==typeof s&&s.lh&&s.lh.callId===this.dh){const t=s.lh.returnValue.tcString;this.th(t).then((()=>i(this.dh))).catch((t=>e()))}}catch(t){e()}}))}isApiOnPage(){return null!==this.oh||null!==this.hh}bindToApi(){return null!==this.oh?new Promise(((t,i)=>{this.sh(this.oh).then((()=>t())).catch((t=>i(t)))})):null!==this.hh?this.nh(this.hh):Promise.reject()}isConsentForVendor(t){var i,e;return!!(null===(i=this.ph)||void 0===i?void 0:i.vendorConsents)&&!!(null===(e=this.ph)||void 0===e?void 0:e.vendorConsents[t])}getConsentPayload(){var t;return null===(t=this.ph)||void 0===t?void 0:t.tcString}setInAppConsentData(t){this.ph=Object.assign(Object.assign({},this.ph),t)}hasIvtConsent(){return!0}isConsentForPurposes(t){var i;return!!(null===(i=this.ph)||void 0===i?void 0:i.purposeConsents)&&t.every((t=>!!this.ph.purposeConsents[t]))}nh(t){this.dh=(0,n.qs)();const i={};return new Promise((e=>{const s=t=>{this.ah(t).then((t=>{i[t]=!0,i[this.dh]&&(window.removeEventListener("message",s,!1),e())})).catch((t=>{}))};window.addEventListener("message",s,!1);const n=b[f.TcfApi].getVendorConsentDataMethodName;t.postMessage({fh:{command:n,parameter:null,callId:this.dh}},"*")}))}sh(t){const i=b[f.TcfApi].windowPropertyName,e=b[f.TcfApi].consentUpdateMethodName,s=b[f.TcfApi].removeUpdateListenerMethodName;return t&&t[i]?new Promise((t=>{this.oh[i](e,2,((e,n)=>{if(n&&("useractioncomplete"===e.eventStatus||"tcloaded"===e.eventStatus)){const n=e.tcString;this.th(n).then((()=>t())),this.oh[i](s,2,(()=>{}),e.listenerId)}}))})):Promise.reject()}th(t){const i=B({tcfEncodedString:t});return M(i)?(this.ph=i,Promise.resolve()):Promise.reject()}}var O=e(7432);class R{constructor(t,i,e={}){var s,n;this.gh=t,this.Ue=i;const r=B({cmpEncodedString:null===(s=e.cmp)||void 0===s?void 0:s.consentString,tcfEncodedString:null===(n=e.tcf)||void 0===n?void 0:n.tcString}),o=this.mh(r);null!==o?(this.yh(o),(M(r)||E(r))&&this.bh.setInAppConsentData(r)):(0,m.n)({message:"UserManagerService_UserConsentApiManager",exception:"failed to find the right api, no consent string and no framework on page was found",callStack:JSON.stringify({_appSettings:e}),level:m.D.CRITICAL})}setPageUrl(t){this.Ne=t}setAmpUserConsent(t){var i,e;if(!this.isConsentRequired())return;const s=t.consentStringTypeEnum.US_PRIVACY_STRING,n=null===(i=t.consentMetadata)||void 0===i?void 0:i.consentStringType,r=t.encodeConsentString||(null===(e=t.consentMetadata)||void 0===e?void 0:e.additionalConsent);let o;if(!(0,c.QM)(r))return void(0,m.n)({level:m.D.INFO,message:"AMP_no_consent_string_provided",callStack:JSON.stringify(t),exception:this.Ne});if(n===s)return void(0,m.n)({message:"UserConsentApiManager_CCPA_encoded_string_from_amp_not_used",level:m.D.WARN,callStack:r,exception:`${JSON.stringify(t)}__pageURL_${this.Ne}`},{throttle:2,sendMaxLog:!1});const h=B({tcfEncodedString:r,cmpEncodedString:r});M(h)?o=new L(null,null):E(h)&&(o=new x(null,null)),o?o?(this.bh=o,this.bh.setInAppConsentData(h)):(0,m.n)({message:"UserConsentApiManager_amp_userConsentApi_not_found",level:m.D.WARN,callStack:r,exception:`${JSON.stringify(t)}__pageURL__${this.Ne}`},{sendMaxLog:!1,throttle:2}):(0,m.n)({message:"UserConsentApiManager_encoded_string_not_tcf_and_not_cmp",level:m.D.WARN,callStack:r,exception:`${JSON.stringify(t)}__pageURL__${this.Ne}`},{throttle:2,sendMaxLog:!1})}isConsentRequired(){return this.gh}isConsent(t,i=[]){if(this.isConsentRequired()){return this.bh.isConsentForVendor(t)&&this.bh.isConsentForPurposes(i)}return!0}isConsentConnatix(){return this.isConsent(s.Connatix,O.Z)}isConsentForPersonalisedAds(){return this.getConsentApiType()!==f.CmpApi&&this.bh.isConsentForPurposes(O.Z)}getConsentDataPayload(){return this.bh.getConsentPayload()}bindToConsentApi(){return this.bh.bindToApi()}isConsentApiOnPage(){return this.bh.isApiOnPage()}hasIVTConsent(){return this.bh.hasIvtConsent()}getConsentApiType(){return this.bh.apiType}yh(t){const i=S(this.Ue,t),e=A(this.Ue,t);t===f.TcfApi?this.bh=new L(i,e):this.bh=new x(i,e)}mh(t){if(M(t))return f.TcfApi;if(E(t))return f.CmpApi;if(I(this.Ue,f.TcfApi))return f.TcfApi;return I(this.Ue,f.CmpApi)?f.CmpApi:f.TcfApi}}var D=e(6615);const F="PUBMATIC",$="predirect",j="UserThirdPartySyncManager_Pubmatic",V="CookieSync_syncScript_not_properly_loaded",N="CookieSync_param_not_parsed_properly",U=(t,i)=>{if(!window.PubMaticSync)return q(V,F),!1;const e=Number.parseInt(t,10);return(0,c.kE)(e)?!!(0,c.QM)(i)||(q(N,F,$),!1):(q(N,F,"p"),!1)},H=(t,i,e,s)=>{const n={pubId:Number.parseInt(t,10),url:i};e&&(n.delay=1e3,n.gdpr=1,n.gdprConsent=s),window.PubMaticSync.sync(n)},q=(t,i,e="")=>{(0,m.n)({message:t,callStack:i,exception:e,level:m.D.CRITICAL},{throttle:1,sendMaxLog:!1})};class z{constructor(t,i){this.xh=t,this.gh=i,this.wh=[]}replaceuserIdMacros(t,i){let e=t;return e=e.replace("%5BuserId%5D",i),e=e.replace("[userId]",i),e=e.replace("%7bUSER_ID%7d",i),e}_h(t,i){try{if(this.Sh(t)){const e=i.document.createElement("iframe");e.setAttribute("style","width:1px;height:1px;border:0px;margin:0px;padding:0px"),e.src=t.url,i.document.body.appendChild(e)}else(0,w.dZ)({src:t.url},i.document.head,i,null,null,1===(0,n.Vm)([95,5]),"UserManager_unable_to_insert_sync_url_script");return!0}catch(t){return!1}}Sh(t){switch(t.vendorId){case s.Rubicon:case s.Pubmatic:return!0;default:return!!t.url.includes("yellowblue.io")}}syncUrls(t,i){this.wh.forEach((e=>{if(this.xh.isConsent(e.vendorId)&&!e.synced){if(e.vendorId===s.Pubmatic)return void((t,i,e)=>new Promise(((s,n)=>{const r=(0,D.Ph)("p",t),o=(0,D.Ph)($,t);if(window.PubMaticSync){if(!U(r,o))return void n();H(r,o,i,e),s(!0)}else(0,w.dZ)({src:"//ads.pubmatic.com/AdServer/js/userSync.js"},window.document.head,window,(()=>{U(r,o)?(H(r,o,i,e),s(!0)):n()}),(()=>{n()}),!0,j)})))(e.url,this.xh.isConsentRequired(),this.xh.getConsentDataPayload()).then((()=>{e.synced=!0}));if(e.url.includes("openx.net"))return e.url=`${e.url.split("r=")[0]}&r=\n                        ${encodeURIComponent(`${a.n.endPoints.api.syncUrls}?DemandPartner=8&UserId=${t}&DemandPartnerUserId=`)}`,e.url=this.replaceuserIdMacros(e.url,t),o.n.trackPixel(e.url),void(e.synced=!0);if(e.url.includes("sync.technoratimedia.com/services"))return o.n.trackPixel(e.url),void(e.synced=!0);if(e.url.includes("pixel.advertising.com")&&(e.url=e.url.replace("gdpr=","gdpr="+(this.xh.isConsentRequired()?1:0)),e.url=e.url.replace("gdpr_consent=","gdpr_consent=0")),e.url=this.replaceuserIdMacros(e.url,t),this.gh){e.url=(0,D.Bp)(e.url,"gdpr","1");const t=this.xh.getConsentDataPayload();e.url=(0,D.Bp)(e.url,"gdpr_consent",t)}this._h(e,i)&&(e.synced=!0)}}))}setSyncUrls(t={}){return!(this.wh.length>0)&&(this.wh=[],Object.keys(t).forEach((i=>{this.wh.push({vendorId:i,url:t[i],synced:!1})})),!0)}}var W=e(1995);const G={California:5332921},J={US:6252001};var Q;!function(t){t.CCPA_Error="CCPA Error",t.CCPA_Pending="CCPA Pending",t.CCPA_Success="CCPA Success",t.CCPA_Delayed_Success="CCPA Delayed Success",t.CCPA_Delayed_Failure="CCPA Delayed Failure"}(Q||(Q={}));class Y{constructor(t,i){this.Ro=t,this.Ah=1,this.Ih="__uspapi",this.kh="getUSPData",this.Ch={isPending:!0,isRejected:!1,isDelayed:!1,promise:new Promise((()=>{}))},this.Th(i)}getUsPrivacyString(){if(this.Ro.usPrivacyString||this.Ro.isCcpaApplicable)return this.Ro.usPrivacyString}isCcpaApplicable(){return this.Ro.isCcpaApplicable}isSellUserAllowed(){return!this.Ro.isCcpaApplicable||this.Mh()}setGeoLocation(t){this.Eh=t,t.subdivisionId!==G.California&&(this.Ro.isCcpaApplicable=!1)}fetchUsPrivacyString(){return this.Bh()&&this.Lh(),this.isCcpaApplicable()?new Promise((t=>{this.getUsPrivacyString()?t():t(this.Oh())})):Promise.resolve()}Oh(){return this.Ch.promise=new Promise(((t,i)=>{const e=this.Ro.getScope()[this.Ih];e?(this.Rh=!0,e(this.kh,this.Ah,((e,s)=>{s?(this.Th(e.uspString),t()):i()}))):i()})),this.makeQuerablePromise(this.Ch),this.Ch.promise}Mh(){return!this.Ro.usPrivacyString||(0,y.d3)(this.Ro.usPrivacyString,r)}Th(t){this.Ro.usPrivacyString=t}Bh(){if(!(0,n.Vm)([95,5]))return!1;const t=new Date(2020,10,16,12,0,0).getTime(),i=new Date(2020,10,17,12,0,0).getTime();return(0,g.k$)(t,i)}Lh(){const{countryGeoId:t,subdivisionId:i}=this.Eh;t===J.US&&(0,m.n)({message:"UserCcpaManager_logCCPA",level:m.D.INFO,callStack:JSON.stringify(i),exception:this.Ro.usPrivacyString})}ccpaInfoLogging(t){this.isCcpaApplicable()&&this.Rh&&(this.Ch.isPending?((0,m.n)({message:Q.CCPA_Pending,exception:"CCPA_Pending_At_Start_AdRequest",level:m.D.INFO,callStack:t}),this.Ch.isDelayed=!0,this.Dh=t):this.Ch.isRejected&&(0,m.n)({message:Q.CCPA_Error,exception:"CCPA_Error_At_Start_AdRequest",level:m.D.INFO,callStack:t}))}makeQuerablePromise(t){t.promise.then((()=>{t.isPending=!1,t.isDelayed&&(0,m.n)({message:Q.CCPA_Delayed_Success,exception:"CCPA_Success_After_Delay",level:m.D.INFO,callStack:this.Dh})})).catch((i=>{throw t.isRejected=!0,t.isPending=!1,t.isDelayed&&(0,m.n)({message:Q.CCPA_Delayed_Failure,exception:"CCPA_Failed_After_Delay",level:m.D.INFO,callStack:this.Dh}),i}))}}var X,Z,K=e(5348);!function(t){t.CCPA_INFO_RECEIVED="ccpaInfoReceived",t.CONSENT_DATA_UPDATE="consentDataUpdate"}(X||(X={})),function(t){t.SYNC_URLS_RECEIVED="thirdPartySyncUrlsReceived",t.USER_INFO_RECEIVED="userInfoReceived"}(Z||(Z={}));class tt{constructor(t,i,e,s={}){this.mi=i,this.yi=e,this._appSettings=s,this.gdprConsentMode=h.ProtoGdprConsentModeEnum.Unknown,this.Fh={},this.$h="",this.jh=!1,this.Vh=()=>{!this.xh.isConsentRequired()||this.mi?this.resolveEvent(X.CONSENT_DATA_UPDATE):(this.gdprConsentMode=this.xh.isConsentApiOnPage()||this.yi?h.ProtoGdprConsentModeEnum.NoConsent:h.ProtoGdprConsentModeEnum.NoCmp,this.xh.bindToConsentApi().then((()=>{this.isConsentConnatix()||(this.gdprConsentMode=h.ProtoGdprConsentModeEnum.NoConnatixConsent),this.resolveEvent(X.CONSENT_DATA_UPDATE)})).catch((t=>{})))},this.Nh=()=>{K.$.getEnvelope(this.Qt,this.xh)},this.qh=()=>{this.isConsentConnatix()&&(this.onEvent([Z.USER_INFO_RECEIVED]).then((()=>{this.jh&&(this.zh.syncThirdPartyCookieList(),this.zh.unsecuredCookieSync&&this.zh.syncThirdPartyCookieList(this.zh.unsecuredCookieSync),this.zh.syncFirstPartyCookie(p.USER_ID))})),this.onEvent([Z.SYNC_URLS_RECEIVED,X.CONSENT_DATA_UPDATE,X.CCPA_INFO_RECEIVED]).then((()=>{if(this.isConsentConnatix()&&this.Wh.isSellUserAllowed())try{this.Gh.syncUrls(this.Ro.userId,this.Ro.getScope())}catch(t){(0,m.n)({level:m.D.WARN,message:"UserManager_syncUrls",exception:t.message,callStack:t.stack})}})))};try{this.Qt=t,this.Ro=u.getInstance(t),this.mi||(this.zh=new v(this.Ro,t));const{cmp:i,tcf:e}=this._appSettings;this.xh=new R(!!this.$h,t,{cmp:i,tcf:e}),this.Gh=new z(this.xh,this.isGDPR()),this.Wh=new Y(this.Ro,this._appSettings.usPrivacyString),this.Qh()}catch(t){(0,m.n)({callStack:t.stack,exception:t.message,message:"UserManager_constructor",level:m.D.CRITICAL})}}get identityEnvelope(){return K.$.getValidEnvelope()}Qh(){this.zh&&this.zh.fetchCookies(),this.Vh(),this.onEvent([X.CONSENT_DATA_UPDATE]).then((()=>{this.Nh(),setTimeout((()=>{try{if(this.mi)return;this.qh()}catch(t){(0,m.n)({callStack:t.stack,exception:t.message,message:"UserManager_consent_data_received",level:m.D.CRITICAL})}}),0)}))}Yh(t){return void 0===this.Fh[t]&&(this.Fh[t]=new W.C,this.Fh[t].promise.catch((()=>this.Fh[t].reject()))),this.Fh[t]}resolveEvent(t,i){this.Yh(t).resolve(i)}setAmpUserConsent(t){this.xh.setAmpUserConsent(t),this.resolveEvent(X.CONSENT_DATA_UPDATE)}setPageUrl(t){this.xh&&this.xh.setPageUrl(t)}onEvent(t){const i=t.map((t=>this.Yh(t).promise));return Promise.all(i)}isConsent(t,i){return this.xh.isConsent(t,i)}isConsentConnatix(){return this.xh.isConsentConnatix()}ccpaInfoLogging(t){this.Wh.ccpaInfoLogging(t)}getConsentPayload(){return this.xh.getConsentDataPayload()}isConsentRequired(){return this.xh.isConsentRequired()}isPersonalisedAdsAllowed(){return this.isConsentRequired()?this.xh.isConsentForPersonalisedAds():!this.isCcpaApplicable()||this.Wh.isSellUserAllowed()}setThirdPartySyncUrls(t){this.mi||this.Gh.setSyncUrls(t)&&this.resolveEvent(Z.SYNC_URLS_RECEIVED)}setGeoLocation(t){this.Wh.setGeoLocation(t),this.Wh.fetchUsPrivacyString().then((()=>{this.resolveEvent(X.CCPA_INFO_RECEIVED)})).catch((()=>{this.resolveEvent(X.CCPA_INFO_RECEIVED)}))}getUserId(){if(this.isConsentConnatix()&&this.zh)return this.zh.getUserId()}Zh(){return this.zh&&this.zh.getUserId()}setUserInformation(t){this.zh&&(this.zh.setUserInformation(t),this.resolveEvent(Z.USER_INFO_RECEIVED),!this.mi&&this.isConsentConnatix()&&this.zh.syncFirstPartyCookie(p.USER_ID))}isGDPR(){return!!this.$h}getUsPrivacyString(){return this.Wh.getUsPrivacyString()}isCcpaApplicable(){return this.Wh.isCcpaApplicable()}isSellUserAllowed(){return this.mi||this.Wh.isSellUserAllowed()}getDeviceId(){if(this.isConsentConnatix())return this._appSettings.deviceID}Kh(){return this._appSettings.deviceID}getTrackableUser(){return this.mi?this.getDeviceId():this.getUserId()}getForcedTrackableUser(){return this.mi?this.Kh():this.Zh()}registerPlsCall(t){return this.isConsentConnatix()||(this.jh=!0),this.Ro.registerPlsCall(t)}setBrowserInfo(t){this.zh&&this.zh.setBrowserInfo(t,this.isConsentConnatix())}getGdprConsentApiType(){return this.xh.getConsentApiType()}}},3030:(t,i,e)=>{"use strict";e.d(i,{BZ:()=>d,Gg:()=>p,Sz:()=>c,V7:()=>f,d3:()=>o,ee:()=>v,fn:()=>u,gX:()=>m,qo:()=>h,qy:()=>a,sj:()=>y,tN:()=>g,ti:()=>l});var s=e(7427),n=e(7726),r=e(9065);e(8423);function o(t,i){return i.indexOf(t)>-1}function h(t){return Array.isArray(t)?t:[t]}function a(t,i){const e=[],s=new Map;return i.forEach((i=>{s.has(i[t])||(s.set(i[t],!0),e.push(i))})),e}function c(t){return[].slice.call(t)}function l(t){const i=[];for(const e in t)e&&parseInt(e,10)>=0&&i.push(t[e]);return i}function d(t){return t&&t.length>0}function u(t){return t.every((t=>(0,s.kE)(t)))}function p(t){let i="[";for(let e=0;e<t.length;e++)i+=(0,r.H)(t[e])+(e===t.length-1?"":",");return i+="]",i}function f(t,i){return t.filter((t=>!i.includes(t)))}function g(t,i){return t.filter((t=>i.includes(t)))}function m(t){return t.filter(((i,e)=>t.indexOf(i)===e))}function y(t,i){const e=t.indexOf(i);-1!==e?t.splice(e,1):(0,n.n)({message:"removeItemFromArray_error_item_not_found",exception:JSON.stringify(i),level:n.D.WARN})}function v(t){const i=[];return t.forEach((t=>i.push(t))),i}},1561:(t,i,e)=>{"use strict";e.d(i,{AX:()=>ot,BE:()=>H,Dx:()=>I,Fs:()=>k,G$:()=>M,GF:()=>J,Ho:()=>p,IS:()=>N,IV:()=>w,Ji:()=>G,Kk:()=>rt,LT:()=>j,L_:()=>S,ML:()=>b,MV:()=>u,NS:()=>y,Nb:()=>et,PM:()=>O,Q1:()=>E,S0:()=>B,SH:()=>Q,T7:()=>f,Tp:()=>L,U6:()=>W,UR:()=>ht,Vt:()=>U,Wb:()=>tt,_w:()=>at,aQ:()=>g,bX:()=>m,bZ:()=>ct,cn:()=>x,dZ:()=>v,eA:()=>it,fj:()=>$,h_:()=>R,jG:()=>V,ju:()=>Y,nw:()=>F,oG:()=>q,oW:()=>lt,og:()=>P,pv:()=>_,rI:()=>A,sw:()=>st,tp:()=>T,uc:()=>C,uh:()=>nt,uq:()=>Z,w6:()=>X,wl:()=>K});var s=e(2817),n=e(7427),r=e(3030),o=e(2820),h=e(8423),a=e(6615),c=e(7577),l=e(7726);function d(t,i){t&&(t.style.display=i?"":"none")}function u(t){d(t,!1)}function p(t){d(t,!0)}function f(t,i){for(const e in i)i.hasOwnProperty(e)&&(t.style[e]=i[e])}function g(t,...i){i.forEach((i=>{t.style[i]=""}))}function m(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function y(t,i,e,s,r){if(i)try{const o=e.document.createElement("link");return o.id=t.id,o.type="text/css",o.rel="stylesheet",o.href=t.src,(0,n.mf)(s)&&(o.onload=()=>{s()}),(0,n.mf)(r)&&(o.onerror=t=>{i.removeChild(o),(0,n.HD)(t)?r(`link_stylesheet_load_error_${t}`):r(`link_stylesheet_load_error_${function(t,i){const e=t.document.createElement("div");return e.appendChild(i),e.innerHTML}(e,o)}`)}),i.appendChild(o),o}catch(t){return null}}function v(t,i,e,s,r,o=!0,h){try{const a=e.document.createElement("script");return a.src=t.src,a.async=!0,a.type="text/javascript",t.id&&(a.id=t.id),(0,n.mf)(s)&&(a.onload=()=>{s()}),a.onerror=e=>{i.removeChild(a),o&&(0,l.n)({message:h,exception:"script_load_error",callStack:t.src,level:l.D.INFO},{throttle:2,sendMaxLog:!1}),(0,n.mf)(r)&&r()},i.appendChild(a),a}catch(i){return o&&(0,l.n)({message:h,exception:`script_insert_error_${i.message}_${i.stack}`,callStack:t.src,level:l.D.CRITICAL},{throttle:2,sendMaxLog:!1}),(0,n.mf)(r)&&r(),null}}function b(t,i,e){if(t)try{const s=i.document.createElement("script"),n=i.document.createTextNode(e);return s.appendChild(n),t.appendChild(s),s}catch(t){return null}}function x(t,...i){t&&t.classList.add(...i)}function w(t,...i){t&&t.classList.remove(...i)}function _(t,i){return t&&t.classList.contains(i)}function P(t,i,e){return!!t&&t.classList.toggle(i,e)}function S(t,i,e,s=!1){t&&(t.classList.remove(i),t.classList.add(e),s&&L(t))}const A=(t,i)=>i.document.getElementById(t),I=(t,i,e)=>i.getComputedStyle(t,e),k=(t,i)=>i.document.getElementsByClassName(t);function C(t,i="",e){const s=e.document.getElementsByTagName("head")[0],n=e.document.createElement("style");n.setAttribute("type","text/css"),n.id=i,n.appendChild(e.document.createTextNode(t)),s.appendChild(n)}function T(t,i){const e=i.document.getElementsByTagName("head")[0],s=i.document.createElement("link");s.setAttribute("rel","preconnect"),s.setAttribute("link",t),e.appendChild(s)}function M(t,i){const e=i.document.createElement("div");return e.innerHTML=t,e.firstElementChild}function E(t,i){i>0?(t.removeAttribute("muted"),t.muted=!1):(t.setAttribute("muted",""),t.muted=!0)}function B(t){return s.Ht.find((i=>{if(i.keys.fullscreenEnabled in t)return!0}))}function L(t){t.getBoundingClientRect()}function O(t,i){return(t.requestAnimationFrame||t.webkitRequestAnimationFrame||function(t){return setTimeout(t,20)})(i)}function R(t,i){return(t.cancelAnimationFrame||t.webkitCancelAnimationFrame||function(t){return clearTimeout(t)})(i)}function D(t,i,e){const s=function(t,i){const e=function(t,i){let e=i;for(;e;){const i=e.parentNode;if(i){const e=t.reduce(((t,e)=>t||i.querySelector(e)),null);if(e)return e}e=i}return null}(t,i);return e?I(e,j(e)):null}(t,i);return s?function(t,i){return t.getPropertyValue(i)}(s,e):null}function F(t){const i=D(["h1","h2"],t,"font-family");return i||"inherit"}function $(t){const i=D(["p"],t,"font-family");return i||"inherit"}function j(t){try{return t.ownerDocument.defaultView}catch(t){return null}}function V(t,i){t&&i&&(Array.isArray(t)?t.forEach((t=>i.appendChild(t))):i.appendChild(t))}function N(t,i,e){let s=!1;const n=(0,r.Sz)(i.children);for(let i=0;i<n.length;i++)if(e-1===i||0===e){s=!0,Array.isArray(t)?U(n[i],...t):U(n[i],t);break}s||V(t,i)}function U(t,...i){if(t&&t.parentElement)for(let e=i.length;e--;)t.parentElement.insertBefore(i[e],t)}function H(t,...i){for(let e=i.length;e--;)t.parentNode.insertBefore(i[e],t.nextSibling)}function q(t,i){return(0,r.Sz)(i.children).indexOf(t)}function z(t){const i=j(t);if(!i)return;const{display:e}=I(t,i);"none"===e&&(t.style.display="block")}function W(t,i=(()=>{})){const e=function(s){"opacity"===s.propertyName&&(w(t,o.jG.FadeOutBase,o.jG.FadeOut),i(),t.removeEventListener("transitionend",e))};x(t,o.jG.FadeOutBase),z(t),L(t),t.addEventListener("transitionend",e),x(t,o.jG.FadeOut)}function G(t,i=(()=>{})){const e=function(s){"opacity"===s.propertyName&&(w(t,o.jG.FadeInBase,o.jG.FadeIn),i(),t.removeEventListener("transitionend",e))};x(t,o.jG.FadeInBase),z(t),L(t),t.addEventListener("transitionend",e),x(t,o.jG.FadeIn)}function J(t){const i=j(t);if(!i)return!0;const{display:e,opacity:s}=I(t,i);return"none"===e||"0"===s}function Q(t,i){return null===t.firstChild?t.appendChild(i):t.insertBefore(i,t.firstChild)}function Y(t,i){const e=i.document.createElement("div");return e.innerHTML=t||"",e.innerText}function X(){const t=window.navigator&&window.navigator.doNotTrack||window.doNotTrack;return"1"===t||"yes"===t}function Z(t,i){const e=(0,h.pE)(t).topFrame;return e[i]?e:null}function K(t,i){let e=t,s=null;try{for(;!s;){try{e.frames[i]&&(s=e)}catch(t){}if(!t.top||t.top===e)break;e=e.parent}}catch(t){}return s}function tt(t,i){let e=[];try{e=e.slice.call(i.document.querySelectorAll(t),0)}catch(t){}return e}function it(t){return(0,h.pE)(t).topFrame.location.protocol.includes("https")}function et(t){if(!it(t))return;[window,t].forEach((t=>{if(null===t.document.querySelector("meta[content=upgrade-insecure-requests]")){const i=t.document.createElement("meta");i.setAttribute("http-equiv","Content-Security-Policy"),i.content="upgrade-insecure-requests",t.document.head.appendChild(i)}}))}function st(t){return(0,h.pE)(t).topFrame.document.referrer}function nt(t,i){const e=(0,h.pE)(i).topFrame.location.hostname,s=(0,h.bx)(t);return s&&s.hostname===e}function rt(t){t.removeAttribute("href"),t.removeAttribute("target"),t.removeAttribute("download"),t.removeAttribute("ping"),t.removeAttribute("rel"),t.removeAttribute("media"),t.removeAttribute("hreflang"),t.removeAttribute("type")}function ot(t,i){try{t.onclick=t=>{const{tagName:e,className:s}=t.target;(0,l.n)({message:`${i} - click on tag:${e} class:${s}`,level:l.D.INFO})}}catch(t){(0,l.n)({message:`${i}_Error - iframe click`,level:l.D.WARN,callStack:t.stack})}}function ht(t){setTimeout((()=>{let i=t.currentTime+.01;i>t.duration&&(i=.01),t.currentTime=i}),0)}function at(t,i){!function(t,i,e){const s=t.document.createElement("link");s.rel="preload",s.href=i,s.as=e,t.document.head.appendChild(s)}(i,t,"script")}function ct(t,i){if(!i||"SCRIPT"!==i.tagName)return(0,l.n)({message:"Prerender_Elements_getgetCustomerId_no_currentScript",level:l.D.CRITICAL}),null;const e=i.src;return(0,a.Ph)(c.ym,e)}function lt(t){const{top:i,left:e}=t.getBoundingClientRect();return{top:i,left:e}}},8423:(t,i,e)=>{"use strict";e.d(i,{Hh:()=>p,Of:()=>y,Up:()=>b,Vm:()=>f,Xf:()=>v,bx:()=>d,dz:()=>a,er:()=>c,lU:()=>l,ld:()=>m,oC:()=>x,pE:()=>u,qs:()=>h,rM:()=>w,we:()=>g});var s=e(6615),n=e(7427),r=e(9065),o=e(3030);function h(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(i){const e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===i?e:3&e|8).toString(16)}))}function a(){return h().replace(/-/g,"")}function c(t){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t.trim())}function l(t,i){let e="";if(!t.err)try{e=t.topFrame.location.href}catch(t){}if(!e||0===e.length)try{e=i.top.location.href}catch(t){}if(!e||0===e.length)try{e=t.topFrame.document.referrer}catch(t){}return e}function d(t){try{const i=t.match(/^(https?:)\/\/(([^:\/?#]*)(?::([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return{href:t,protocol:i[1],host:i[2],hostname:i[3],port:i[4],pathname:i[5],search:i[6],hash:i[7]}}catch(t){return null}}function u(t){let i=t,e=null,s=!1;try{for(;i.parent.document!==i.document;){if(!i.parent.document){s=!0;break}e=i,i=i.parent}}catch(t){s=!0}return{topFrame:i,topChildFrame:e,err:s}}function p(t=[],i,e={}){t.forEach((t=>{(0,n.HD)(t)&&((new i.Image).src=`${t}${(0,s.CK)(t)}${function(t,i){const e=[];return Object.keys(t).forEach((s=>{const h=i?`${i}[${s}]`:s,a=t[s];if((0,n.as)(a))e.push(`${encodeURIComponent(h)}=${(0,r.H)(a)}`);else if(Array.isArray(a))e.push(`${encodeURIComponent(h)}=${(0,o.Gg)(a)}`);else if(null!=a){const t=encodeURIComponent(a),i=encodeURIComponent(h);t&&i&&e.push(`${i}=${t}`)}})),e.join("&")}(e)}`)}))}function f(t){const i=Math.floor(100*Math.random());let e=0,s=0;for(let n=0;n<t.length;n++)if(s+=t[n],i<s){e=n;break}return e}function g(){let t=!1;try{const i=document.createElement("audio");i.volume=1,i.muted=!1;const e=i.play();void 0!==e&&e.catch((()=>{})),t=!i.paused,i.pause()}catch(t){}return t}function m(t,i=0,...e){return setTimeout((()=>{t.apply(this,e)}),i)}function y(t,i,e){let s=0,n=t;for(;s<=e;){if(s++,n.classList.contains(i))return!0;if(n=n.parentElement,!n)return!1}return!1}function v(t,i){try{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);let s=parseInt(e[1],16),n=parseInt(e[2],16),r=parseInt(e[3],16);s/=255,n/=255,r/=255;const o=Math.max(s,n,r),h=Math.min(s,n,r);let a,c,l=(o+h)/2;if(o===h)a=c=0;else{const t=o-h;switch(c=l>.5?t/(2-o-h):t/(o+h),o){case s:a=(n-r)/t+(n<r?6:0);break;case n:a=(r-s)/t+2;break;case r:a=(s-n)/t+4}a/=6}return a=Math.round(360*a),c=Math.round(100*c),l=Math.round(100*l),l+=i/100*(100-l),`hsl(${a},${c}%,${l}%)`}catch(i){return t}}function b(t,i=5,e){return new Promise(((s,r)=>{t().then(s).catch((o=>{1===i||(0,n.mf)(e)&&e(o)?r(o):b(t,i-1,e).then(s,r)}))}))}function x(){const t=!!window.MSInputMethodContext&&!!document.documentMode,i=navigator.userAgent.toLowerCase().includes("msie");return t||i}function w(t){return Object.keys(t).reduce(((i,e)=>Object.assign(Object.assign({},i),{[e]:`${t[e]}`})),{})}},6615:(t,i,e)=>{"use strict";e.d(i,{Bp:()=>o,CK:()=>h,Ph:()=>r,_Y:()=>a,sH:()=>l});var s=e(7427);const n=".cdn.ampproject.org";function r(t,i){i||(i=location.search),t=t.replace(/\[/,"\\[").replace(/]/,"\\]");const e=new RegExp(`[\\?&]${t}=([^&#]*)`,"i").exec(i);return null===e?null:decodeURIComponent(e[1])}function o(t,i,e){const s=new RegExp(`([?&])${i}=.*?(&|$)`,"i"),n=h(t);return t.match(s)?e?t.replace(s,`$1${i}=${e}$2`):t.replace(s,"$1"):`${t}${n}${i}=${e}`}function h(t){return t.includes("?")?"&":"?"}function a(t){if((0,s.QM)(t))return t.includes("://")?t.split("/")[2]:t.split("/")[0]}function c(t,i){return`${"http"+(/(\/s\/)+/.test(t.replace(i,""))?"s":"")}://${i}`}function l(t,i=!0){return t=function(t){if(!t.includes(n))return t;const i="www.",e="amp.";if((t=(t=(t=(t=(t=(t=(t=t.replace(n,"")).replace("www-",i)).replace("amp-",e)).cnx_replaceAll("--","=")).cnx_replaceAll("-",".")).cnx_replaceAll("=","-")).replace(i,e)).includes(e))return t;const s="http://",r="https://";return(t=t.replace(s,"http://amp.")).replace(r,"https://amp.")}(t=function(t){const i=/^https:\/\/www.google\..*?\/amp\/s*\/*/.exec(t);if(null!==i){const e=t.replace(i[0],"");return c(t,e)}return t}(t=function(t){if(t.includes(n)){t=t.replace("https://","");const i=/^[^\/]+(\/[a-z]+\/)+s*\/*/,e=i.test(t)?t.replace(i.exec(t)[0],""):t;return c(t,e)}return t}(t))),i&&(t=function(t){if(!t.includes("#origin-")&&!t.includes("viewerUrl-"))return t;const i=t.split("#origin-")[1].split("viewerUrl-");return l(t=decodeURIComponent(i[1]),!1)}(t)),t}},7726:(t,i,e)=>{"use strict";e.d(i,{D:()=>c,n:()=>d});var s=e(45),n=e(497);var r=e(8423),o=e(158),h=e(525);let a=window.location&&window.location.href;try{a=window.top.location.href}catch(t){}var c;!function(t){t.EMERGENCY="Emergency",t.ALERT="Alert",t.CRITICAL="Critical",t.ERROR="Error",t.WARN="Warn",t.INFO="Info"}(c||(c={}));const l={throttle:30,sendMaxLog:!0,pacing:0};function d(t,i={}){if(!((i=Object.assign(Object.assign({},l),i)).pacing>0)||function(t){const i=Math.min(Math.max(t,0),100);return!!(0,r.Vm)([100-i,i])}(i.pacing))if(t.sessionId=n.S.sessionId,n.S.incrementLogCount(t.message),n.S.isMaxLogOverflow(t.message)&&d({message:"Logging_max_log_overflow_1000",exception:t.message,callStack:t.callStack,level:c.CRITICAL,sessionId:n.S.sessionId},{sendMaxLog:!1,throttle:100}),n.S.isMaxLog(t.message,i.throttle))i.sendMaxLog&&!n.S.isMaxLogSent(t.message)&&(n.S.setMaxLogSent(t.message),d({message:"Logging_max_log_sent",exception:t.message,callStack:t.callStack,level:c.CRITICAL,sessionId:n.S.sessionId}));else{if(void 0===t.callStack){const i=new Error(t.message);t.callStack=i.stack}if(t.callStack=t.callStack.substring(0,500),s.g.logToServer){t.pageUrl=t.pageUrl||a,t.version=s.g.version;let e="connatix.com";try{e=h.n.bundleDomain}catch(t){}const n="https://pl."+e;t.ddsource="browser",t.service="player",i.sendBeacon?o.n.sendJsonBeaconRequest(t,n):o.n.fetchXhttpRequest({requestUrl:n,requestType:"POST",withCredentials:!1},JSON.stringify(t))}s.g.logToConsole&&function(t){let i;switch(t.level){case c.CRITICAL:i="#8B0000";break;case c.WARN:i="#FF8C00";break;case c.INFO:i="#000000"}console.log(`%cConnatix Logging:\n   message: ${t.message}\n   exception: ${t.exception}\n   level: ${t.level}\n   version: ${t.version}\n   sessionId: ${t.sessionId}\n   callStack: ${t.callStack}`,`color:${i}`)}(t)}}},2231:(t,i,e)=>{"use strict";e.d(i,{DE:()=>r,ON:()=>c,Tc:()=>h,aX:()=>o,dO:()=>d,dQ:()=>n,oK:()=>a,uc:()=>l});var s=e(7427);function n(t,i,e,s,n){return e+(s-e)*function(t,i,e){return(e-t)/(i-t)}(t,i,n)}function r(t,i){return i.reduce(((i,e)=>Math.abs(e-t)<=Math.abs(i-t)?e:i))}function o(t,i){let e=t,s=i;for(;0!==e&&0!==s;)e>s?e%=s:s%=e;return 0===e?s:e}function h(t,i){return i/100*t}function a(t,i){const e=Math.pow(10,i);return Math.round(t*e)/e}function c(t){return!(0,s.r)(t.width)||!(0,s.r)(t.height)}function l(t){const i=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"}],e=/\.0+$|(\.[0-9]*[1-9])0+$/;let s;for(s=i.length-1;s>0&&!(t>=i[s].value);s--);return t/i[s].value<i[s].value/10?(Math.floor(t/i[s].value*10)/10).toFixed(1).replace(e,"$1")+i[s].symbol:Math.floor(t/i[s].value).toFixed(0)+i[s].symbol}function d(t,i){for(let e=i;e>1;e--)t%e==0&&i%e==0&&(t/=e,i/=e);return{widthRatio:t,heightRatio:i}}},9065:(t,i,e)=>{"use strict";e.d(i,{H:()=>s});e(8423);function s(t){for(const i in t)t.hasOwnProperty(i)&&"string"==typeof t[i]&&(t[i]=`%22${encodeURIComponent(t[i])}%22`);return JSON.stringify(t).cnx_replaceAll('"',"")}},6243:(t,i,e)=>{"use strict";function s(t=[]){t.forEach((t=>t.unsubscribe()))}e.d(i,{i:()=>s})},8852:(t,i,e)=>{"use strict";e.d(i,{EQ:()=>h,Ft:()=>l,IS:()=>u,J5:()=>o,V7:()=>c,f5:()=>r,hF:()=>d,k0:()=>a});var s=e(7726),n=e(7427);function r(t,i){return t.replace(/(?:\r\n|\r|\n)/g,i)}function o(t){return t.replace(/[-]/g,"&#x2011;")}function h(t){try{return Object.keys(t).reduce(((i,e)=>Object.assign(Object.assign({},i),{[e]:(0,n.QM)(t[e])&&t[e].includes("%%")?void 0:t[e]})),{})}catch(i){return(0,s.n)({message:"sanitizeDfpMacros_error",exception:i.message,callStack:i.stack,level:s.D.WARN}),Object.keys(t).reduce(((i,e)=>Object.assign(Object.assign({},i),{[e]:(0,n.QM)(t[e])&&t[e].includes("%%")?void 0:t[e]})),{})}}function a(t){return/<[a-z/][\s\S]*>/i.test(t)}function c(t,i){const e=i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),s=new RegExp(`<${e}>(.*?)</${e}>`,"g");return t.replace(s,((t,e)=>e.split(" ").map((t=>`<${i}>${t}</${i}>`)).join(" ")))}function l(t){return!!t.match(/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/)}function d(t){return t.replace(/^\s+|\s+$|\s+(?=\s)/g,"")}function u(t,i){return`${t}-${i}`}},2324:(t,i,e)=>{"use strict";e.d(i,{H8:()=>d,QI:()=>o,VG:()=>c,XF:()=>h,k$:()=>l,pP:()=>r,qe:()=>u,to:()=>a,w4:()=>p});var s=e(9115),n=e(7427);function r(t){let i,e;return(0,n.HD)(t)&&(i=t.match(s.T9),i&&(e=parseInt(i[1],10)*s.p7+parseInt(i[2],10)*s.uD+parseInt(i[3],10)*s.s_+parseInt(i[5]||0,10))),isNaN(e)?null:e}function o(t,i){return/^\d+(\.\d+)?%$/g.test(t)?i?i*parseFloat(t.replace("%",""))/100:null:r(t)}function h(t){return Date.now()+t*s.ti}function a(t,i=":"){const e=t=>t>=10?t:`0${t}`;return`${e(Math.floor(t/60))}${i}${e(Math.floor(t%60))}`}function c(t){const i=Date.parse(t+" GMT");if(!(0,n.kE)(i))return;const e=Math.floor((Date.parse(new Date(Date.now()).toUTCString())-i)/1e3);if(!(0,n.r)(e))return"just now";const s=[{value:1,symbol:"s"},{value:60,symbol:"m"},{value:3599,symbol:"h"},{value:86399,symbol:"d"}];let r;for(r=s.length-1;r>0&&!(e>=s[r].value);r--);return Math.floor(e/s[r].value).toFixed(0)+s[r].symbol+" ago"}function l(t,i){const e=Date.now();return!(e<t||e>i)}function d(t){return Math.floor((Date.now()-t)/s.s_)}function u(t,i){return t>=i?t/s.s_:t}function p(t){return(0,n.kE)(t)?t*s.s_:null}},7427:(t,i,e)=>{"use strict";function s(t){return"string"==typeof t}function n(t){return!isNaN(parseFloat(t))&&isFinite(t)}function r(t){return n(t)&&t>0}function o(t){return s(t)&&t.length>0}function h(t){return void 0!==t}function a(t){return"function"==typeof t}function c(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function l(t){try{if(t.contentWindow||t.contentDocument)return!0}catch(t){}return!1}function d(t,i){var e;return o(t)?!(!(null===(e=Object.values(i))||void 0===e?void 0:e.includes(t))||Object.keys(i).includes(t)):!!n(t)&&t in i}e.d(i,{$K:()=>h,Cz:()=>d,HD:()=>s,QM:()=>o,as:()=>c,cL:()=>l,kE:()=>n,mf:()=>a,r:()=>r})},158:(t,i,e)=>{"use strict";e.d(i,{n:()=>s});var s,n=e(8423),r=e(7427),o=e(6615),h=e(7726);!function(t){let i;!function(t){t.DumpJson="Dump Json",t.ServerError="Server Error",t.ProtobufDecode="Protobuf_decode"}(i||(i={}));function e(t,i){return(0,r.as)(i)?(Object.keys(i).forEach((e=>t=(0,o.Bp)(t,e,i[e]))),t):t}function s(t,i){const e=function({requestUrl:t,requestType:i="POST",contentType:e="",responseType:s="",withCredentials:n=!1,timeout:r=3e4}){const o=new XMLHttpRequest;return o.open(i,t,!0),e.length>0&&o.setRequestHeader("Content-Type",e),s.length>0&&(o.responseType=s),o.timeout=r,o.withCredentials=n,o}(t),s=new Date;return new Promise(((t,n)=>{e.onreadystatechange=()=>{if(e.readyState===XMLHttpRequest.DONE)if(200===e.status)t(e.response);else{let t="";try{t=e.responseText}catch(t){}const i=(new Date).getTime()-s.getTime();n(new Error(`Request fail. status:${e.status}, readyState:${e.readyState}, response:${t}, time:${i}`))}},e.ontimeout=()=>{const t=(new Date).getTime()-s.getTime();n(new Error(`Request timeout status:${e.status}. time:${t}`))},e.send(i)}))}function a(t,e,s,n){return new Promise(((r,o)=>{e.then((e=>{if(t){let a=null;try{const i=e?new Uint8Array(e):new Uint8Array;a=t.toObject(t.decode(i),{defaults:!0,arrays:!0,objects:!0})}catch(t){!function(t,e,s,n){let r;try{r=JSON.parse((new TextDecoder).decode(t))}catch(t){}r?(r.ErrorMessage===i.DumpJson&&(0,h.n)({message:i.DumpJson,exception:JSON.stringify(s),callStack:e,level:h.D.INFO}),r.ErrorMessage===i.ServerError&&(0,h.n)({message:i.ServerError,exception:e,level:h.D.WARN})):(0,h.n)({exception:`${e}__${n.message}`,message:i.ProtobufDecode,callStack:n.stack,level:h.D.WARN},{throttle:10})}(e,s,n,t),o(i.ProtobufDecode)}r(a)}})).catch((t=>{o(t)}))}))}function c(t,i,e){try{const s=(0,n.Vm)([95,5]);!s||i&&0!==Object.keys(i).length||(0,h.n)({message:"empty_proto_request",callStack:"empty_function_argument",exception:e,level:h.D.INFO},{sendMaxLog:!1});const r=t.fromObject(i);!s||r&&0!==Object.keys(r).length||(0,h.n)({message:"empty_proto_request",callStack:"empty_fromObject_result",exception:e,level:h.D.INFO},{sendMaxLog:!1});const o=t.encode(r).finish();return!s||o&&0!==Object.keys(o).length||(0,h.n)({message:"empty_proto_request",callStack:"empty_encode_result",exception:e,level:h.D.INFO},{sendMaxLog:!1}),o}catch(t){throw(0,h.n)({exception:e,level:h.D.CRITICAL,callStack:JSON.stringify(i),message:"Protobuf_encode"},{throttle:10}),Error()}}t.fetchXhttpRequest=s,t.fetchXMLRequest=function(t,i=!0){const e=s({requestUrl:t,requestType:"GET",withCredentials:i});return new Promise(((t,i)=>{e.then((i=>{t(i)})).catch((t=>{i(t)}))}))},t.sendProtoRequest=function({ProtoResponse:t,ProtoRequest:i,requestData:r,endpoint:o,requestType:l,withCredentials:d,queryParams:u,logError:p,timeout:f}){const g=r?c(i,r,o):null;return function(t,i,e="POST",n,r,o,h){return a(t,s({requestUrl:i,requestType:e,withCredentials:r,contentType:"POST"===e?"multipart/form-data":"",responseType:"arraybuffer",timeout:o},n),i,h)}(t,o=e(o,u),l,g,d,f,r).catch((t=>{throw p&&(0,n.Vm)([95,5])&&(0,h.n)({message:"Xhr_error",exception:o,callStack:`${t}, requestData: ${JSON.stringify(r)}`,level:h.D.INFO}),new Error(t)}))},t.sendProtoBeaconRequest=function({ProtoRequest:t,requestData:i,endpoint:s,queryParams:n=null}){s=e(s,n);const r=i?c(t,i,s):null;return navigator.sendBeacon(s,r)},t.sendJsonBeaconRequest=function(t,i){const e=new Blob([JSON.stringify(t)],{type:"application/json"});return navigator.sendBeacon(i,e)},t.trackPixel=function(t){try{(new Image).src=t}catch(t){(0,h.n)({message:"Xhr_trackPixel",exception:t.message,callStack:t.stack,level:h.D.CRITICAL})}}}(s||(s={}))},655:(t,i,e)=>{"use strict";e.d(i,{CR:()=>a,FC:()=>d,Jh:()=>o,KL:()=>u,XA:()=>h,ZT:()=>n,ev:()=>c,mG:()=>r,qq:()=>l});var s=function(t,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},s(t,i)};function n(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}function r(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))}function o(t,i){var e,s,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function h(r){return function(h){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,s&&(n=2&r[0]?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,s=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){o.label=r[1];break}if(6===r[0]&&o.label<n[1]){o.label=n[1],n=r;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(r);break}n[2]&&o.ops.pop(),o.trys.pop();continue}r=i.call(t,o)}catch(t){r=[6,t],s=0}finally{e=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,h])}}}Object.create;function h(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(t,i){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var s,n,r=e.call(t),o=[];try{for(;(void 0===i||i-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return o}function c(t,i,e){if(e||2===arguments.length)for(var s,n=0,r=i.length;n<r;n++)!s&&n in i||(s||(s=Array.prototype.slice.call(i,0,n)),s[n]=i[n]);return t.concat(s||Array.prototype.slice.call(i))}function l(t){return this instanceof l?(this.v=t,this):new l(t)}function d(t,i,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,n=e.apply(t,i||[]),r=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(t){n[t]&&(s[t]=function(i){return new Promise((function(e,s){r.push([t,i,e,s])>1||h(t,i)}))})}function h(t,i){try{(e=n[t](i)).value instanceof l?Promise.resolve(e.value.v).then(a,c):d(r[0][2],e)}catch(t){d(r[0][3],t)}var e}function a(t){h("next",t)}function c(t){h("throw",t)}function d(t,i){t(i),r.shift(),r.length&&h(r[0][0],r[0][1])}}function u(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=h(t),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(e){i[e]=t[e]&&function(i){return new Promise((function(s,n){(function(t,i,e,s){Promise.resolve(s).then((function(i){t({value:i,done:e})}),i)})(s,n,(i=t[e](i)).done,i.value)}))}}}Object.create},289:function(t,i,e){var s,n,r;n=[e(4492)],void 0===(r="function"==typeof(s=function(t){"use strict";return(t.roots.common||(t.roots.common=new t.Root)).addJSON({ProtoAdBreak:{fields:{types:{rule:"repeated",type:"ProtoAdBreakTypeEnum",id:1,options:{packed:!1}},maxAdPodDuration:{type:"int32",id:2},maxAdSlotDuration:{type:"int32",id:3,options:{default:180}},numberOfAdSlots:{type:"int32",id:4,options:{default:1}}}},ProtoAdDomainBlockingResponse:{fields:{domains:{rule:"repeated",type:"string",id:1}}},ProtoCoreTamBidRequest:{fields:{lineItemId:{type:"string",id:1},code:{type:"string",id:2},metadata:{type:"MetadataModel",id:3},exploration:{type:"bool",id:4}}},MetadataModel:{fields:{version:{type:"int32",id:1},sessionId:{type:"string",id:2},playerId:{type:"string",id:3},userId:{type:"string",id:4},browser:{type:"Browser",id:5},geo:{type:"GeoLocation",id:6},clientAb0:{type:"int32",id:7},clientAb1:{type:"int32",id:8},serverAb0:{type:"int32",id:9},serverAb1:{type:"int32",id:10},pageUrl:{type:"string",id:15},bundleId:{type:"string",id:17},implementationType:{type:"ProtoImplementationType",id:18},trackAllRequests:{type:"bool",id:19},customParam1:{type:"string",id:20},customParam2:{type:"string",id:21},customParam3:{type:"string",id:22},abTestId:{type:"string",id:24},pageInFocus:{type:"bool",id:25},customParam4:{type:"string",id:26},customParam5:{type:"string",id:27},bundleAbId:{type:"string",id:28},bundlePart:{type:"string",id:29}}},Browser:{fields:{browserVersion:{type:"string",id:1},browserType:{type:"string",id:2},osCode:{type:"string",id:3},device:{type:"ProtoDeviceType",id:4}}},GeoLocation:{fields:{countryGeoId:{type:"int32",id:1},cityId:{type:"int32",id:2},subdivisionId:{type:"int32",id:3},dmaId:{type:"int32",id:4},ip:{type:"string",id:5},lat:{type:"double",id:6},lon:{type:"double",id:7},zipcode:{type:"string",id:8}}},ProtoCoreTamBidResponse:{fields:{errorMessage:{type:"string",id:1},encryptedBidPrice:{type:"string",id:10},ofskp:{type:"double",id:12},impressionTimeSpent:{type:"int32",id:13},bidRate:{type:"double",id:14},successRate:{type:"double",id:15}}},ProtoCookieSettings:{fields:{name:{type:"string",id:1},value:{type:"string",id:2},timestamp:{type:"int64",id:3}}},ProtoCookieSyncRequest:{fields:{cookieList:{rule:"repeated",type:"ProtoCookieSettings",id:1},secureMode:{type:"ProtoCookieSecureModeEnum",id:2},browserInfo:{type:"Browser",id:3}}},ProtoUserInformation:{fields:{userId:{type:"string",id:1},lookupId:{type:"string",id:3},lookupResponseCode:{type:"int32",id:4},callFraudSensor:{type:"bool",id:5},publisherAdsTxt:{type:"string",id:6}}},CreativeTrackerViewModel:{fields:{type:{type:"ProtoTrackerType",id:1},trigger:{type:"ProtoTrackerTriggerType",id:2},url:{type:"string",id:3}}},Insights:{fields:{key:{type:"string",id:1}}},ProtoSentimentAnalysis:{fields:{positive:{type:"double",id:1},neutral:{type:"double",id:2},negative:{type:"double",id:3}}},ProtoInsightsResponse:{fields:{insights:{rule:"repeated",type:"Insights",id:1},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:2}}},ProtoLineItemAdBreakTargeting:{fields:{adRollType:{type:"ProtoAdBreakTypeEnum",id:1},adBreakTypeEnum:{type:"ProtoLineItemAdBreakTypeEnum",id:2}}},ProtoLineItemAdPodTargeting:{fields:{targetingType:{type:"ProtoLineItemTargetingTypeEnum",id:1},adSlotTargetingType:{type:"ProtoLineItemAdSlotTargetingTypeEnum",id:2},adSlotPositions:{rule:"repeated",type:"int32",id:3,options:{packed:!1}}}},ProtoLineItemAdBreakSettings:{fields:{adBreakTargeting:{rule:"repeated",type:"ProtoLineItemAdBreakTargeting",id:1},adPodTargeting:{type:"ProtoLineItemAdPodTargeting",id:2}}},ProtoLineItem:{oneofs:{ta:{oneof:["predictedFloorPrice"]},ia:{oneof:["floorPricesNew"]}},fields:{predictedFloorPrice:{type:"double",id:49,options:{proto3_optional:!0}},floorPricesNew:{type:"ProtoFloorPricesNewModel",id:57,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},adTag:{type:"string",id:3},creativeType:{type:"ProtoCreativeTypeEnum",id:4},sound:{type:"bool",id:6},viewability:{type:"bool",id:7},impressionTimeSpent:{type:"int32",id:9},vendorId:{type:"string",id:10},trackers:{rule:"repeated",type:"CreativeTrackerViewModel",id:12},duration:{type:"int32",id:13},renditions:{rule:"repeated",type:"ProtoRendition",id:14},mediaCreativeId:{type:"string",id:15},ignoreFilledRequests:{type:"bool",id:16},requestCap:{type:"int32",id:17,options:{default:3}},impressionCap:{type:"int32",id:18},successRate:{type:"double",id:19},lineItemPriority:{type:"ProtoLineItemPriority",id:20},headerBidderBids:{type:"string",id:21},headerBidderTimeout:{type:"int32",id:22},mediaCreativeClickUrl:{type:"string",id:23},resetRequestsCapTime:{type:"int32",id:24,options:{default:60}},resetImpressionsCapTime:{type:"int32",id:25,options:{default:60}},resetCapType:{type:"ProtoResetCapTypeEnum",id:26},creativeHlsFileName:{type:"string",id:27},timeBetweenRequests:{type:"int32",id:28},skipMode:{type:"ProtoAdSkipMode",id:29},mediaIdTargeting:{type:"ProtoTargetingChoiceModel",id:30},mediaKeywordsTargeting:{type:"ProtoTargetingChoiceModel",id:31},mediaLanguageTargeting:{type:"ProtoTargetingChoiceModel",id:32},adType:{type:"ProtoAdType",id:33},overlayTime:{type:"int32",id:34,options:{default:30}},floorPrice:{type:"double",id:35},adBreakSettings:{type:"ProtoLineItemAdBreakSettings",id:36},floorPrices:{rule:"repeated",type:"double",id:38,options:{packed:!1}},bidRate:{type:"double",id:39},pauseAdOutOfView:{type:"ProtoLineItemPauseAdOutOfViewEnum",id:40},moatTrackingEnabled:{type:"bool",id:41},cnxCreativeId:{type:"string",id:42},blockedDomainsRevisionNumber:{type:"int32",id:44},advertiserContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:45},publisherContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:46},playerSizeTargetings:{type:"ProtoPlayerSizeTargetings",id:47},amazonDealId:{type:"string",id:48},playerOrientationTargeting:{type:"ProtoPlayerOrientationTargetingEnum",id:50},skipMin:{type:"int32",id:51,options:{default:6}},skippability:{type:"ProtoLineItemSkippabilityType",id:52},forceCallingInEveryAO:{type:"bool",id:53},networkExpiryTimeSeconds:{type:"int32",id:54,options:{default:21600}},nonlinearLineItemSettings:{type:"ProtoNonlinearLineItemSettings",id:55},floorPriceData:{rule:"repeated",type:"ProtoFloorPriceModel",id:56},prebidJsBidParamsJSONString:{type:"string",id:58},playerSize:{type:"string",id:101}}},ProtoTargetingChoiceModel:{fields:{choiceCriteria:{type:"ProtoChoiceCriteriaEnum",id:1},items:{rule:"repeated",type:"string",id:2}}},ProtoContextualTargetingCaseModel:{fields:{filters:{rule:"repeated",type:"ProtoContextualTargetingFilterModel",id:1}}},ProtoContextualTargetingFilterModel:{fields:{type:{type:"ProtoLineItemContextualTargetingEnum",id:1},items:{rule:"repeated",type:"string",id:2},level:{type:"ProtoContextualTargetingLevelEnum",id:3},hashedItemsIds:{rule:"repeated",type:"string",id:4}}},ProtoPlayerSizeTargetings:{fields:{sizeChoiceCriteria:{type:"ProtoSizeChoiceCriteriaEnum",id:1},minWidth:{type:"int32",id:2},maxWidth:{type:"int32",id:3}}},ProtoFloorPriceModel:{fields:{price:{type:"double",id:1},factor:{type:"double",id:2}}},ProtoFloorPricesData:{fields:{price:{type:"double",id:1},floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:2}}},ProtoFloorPricesNewModel:{fields:{floorPrices:{rule:"repeated",type:"ProtoFloorPricesData",id:1},recommended:{type:"int32",id:2}}},ProtoRendition:{fields:{height:{type:"int32",id:1},codec:{type:"string",id:2},file:{type:"string",id:3}}},ProtoNonlinearLineItemSettings:{fields:{nonLinearRequestType:{type:"ProtoNonlinearRequestType",id:1},nonLinearAdTimeSeconds:{type:"int32",id:2,options:{default:15}}}},ProtoLiveMediaMetadataResponse:{fields:{startDate:{type:"string",id:1},outputUrl:{type:"string",id:2},thumbnailUrl:{type:"string",id:3},altText:{type:"string",id:4},name:{type:"string",id:5}}},ProtoSpriteSheet:{fields:{file:{type:"string",id:1},height:{type:"int32",id:2},count:{type:"int32",id:3}}},ProtoTrack:{fields:{file:{type:"string",id:1},type:{type:"ProtoTrackType",id:2},code:{type:"string",id:3},title:{type:"string",id:4}}},ProtoCustomField:{fields:{name:{type:"string",id:1},value:{type:"string",id:2}}},ProtoMediaMetadataResponse:{fields:{title:{type:"string",id:1},description:{type:"string",id:2},duration:{type:"int32",id:3},clickUrl:{type:"string",id:4},keywordList:{rule:"repeated",type:"string",id:5},trackList:{rule:"repeated",type:"ProtoTrack",id:6},spriteSheet:{type:"ProtoSpriteSheet",id:7},thumbnail:{type:"string",id:8},renditionList:{rule:"repeated",type:"ProtoRendition",id:9},customFields:{rule:"repeated",type:"ProtoCustomField",id:10},hlsFilePath:{type:"string",id:11},languageId:{type:"string",id:12},sourceItemId:{type:"string",id:13},altText:{type:"string",id:14},videoIndexes:{rule:"repeated",type:"string",id:15}}},ProtoNonlinearPlayerSettings:{fields:{numberOfNonlinearAds:{type:"int32",id:1},timeSecondsBetweenNonlinear:{type:"int32",id:2,options:{default:5}},timeSecondsBetweenLinearAndNonlinear:{type:"int32",id:3}}},ProtoRtbRequest:{fields:{metadata:{type:"MetadataModel",id:1},coppa:{type:"bool",id:4},refererUrl:{type:"string",id:5},testMode:{type:"bool",id:6},videoWidth:{type:"int32",id:7},videoHeight:{type:"int32",id:8},gdprCompliant:{type:"bool",id:9},soundOn:{type:"bool",id:10},gdprConsentData:{type:"string",id:11},explorationMode:{type:"bool",id:12},viewability:{type:"bool",id:13},outstream:{type:"bool",id:14},domainURL:{type:"string",id:16},isClickToPlay:{type:"bool",id:18},appVersion:{type:"string",id:21},deviceID:{type:"string",id:24},lineItems:{keyType:"string",type:"ProtoRtbRequestLineItemEntry",id:25},isCcpaBlockingUserInfo:{type:"bool",id:26},usPrivacyString:{type:"string",id:27},gdprConsentMode:{type:"ProtoGdprConsentModeEnum",id:36},maxAdDuration:{type:"int32",id:37,options:{default:180}},customMacros:{keyType:"string",type:"string",id:38},maxBidPrice:{type:"double",id:39},playerWidth:{type:"int32",id:43},playerHeight:{type:"int32",id:44},useNewSkippability:{type:"bool",id:42},liveRampAtsEnvelope:{type:"string",id:45}}},ProtoRtbRequestLineItemEntry:{oneofs:{ea:{oneof:["cachedFloorPriceOld"]},ta:{oneof:["predictedFloorPrice"]},sa:{oneof:["cachedFloorPrice"]}},fields:{cachedFloorPriceOld:{type:"double",id:2,options:{proto3_optional:!0}},predictedFloorPrice:{type:"double",id:9,options:{proto3_optional:!0}},cachedFloorPrice:{type:"ProtoCacheFloorPrice",id:16,options:{proto3_optional:!0}},availableRequests:{type:"int32",id:1},gdprConsent:{type:"bool",id:4},publisherLineItemId:{type:"string",id:5},slotWidth:{type:"int32",id:6},slotHeight:{type:"int32",id:7},requestNumber:{type:"int32",id:8},skip:{type:"ProtoSkipEnabledEnum",id:12},skipmin:{type:"int32",id:13},skipafter:{type:"int32",id:14},minDuration:{type:"int32",id:15}}},ProtoCacheFloorPrice:{fields:{floorPrices:{rule:"repeated",type:"double",id:1,options:{packed:!1}},recommended:{type:"int32",id:2}}},ProtoRtbResponse:{fields:{lineItemResponses:{rule:"repeated",type:"ProtoRtbLineItem",id:3},liveRampEnvelopeStatus:{type:"LiveRampEnvelopeStatusEnum",id:4}}},ProtoRtbBid:{oneofs:{na:{oneof:["floorPriceFactor"]},ra:{oneof:["floorPriceBypassReason"]}},fields:{floorPriceFactor:{type:"double",id:28,options:{proto3_optional:!0}},floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:29,options:{proto3_optional:!0}},winNoticeUrl:{type:"string",id:2},adQualityCheckUrl:{type:"string",id:3},vastTag:{type:"string",id:4},encryptedPrice:{type:"string",id:6},creativeId:{type:"string",id:7},seatId:{type:"string",id:8},adomain:{type:"string",id:9},syncedUser:{type:"bool",id:10},requestedFloorPrice:{type:"double",id:11},floorPriceFactorIndex:{type:"int32",id:12},campaignId:{type:"string",id:13},width:{type:"int32",id:14},height:{type:"int32",id:15},billingNoticeUrlList:{rule:"repeated",type:"string",id:16},mime:{type:"string",id:17,options:{default:"text/html"}},gtkpbp:{type:"double",id:18},successRate:{type:"double",id:19},impressionTimeSpent:{type:"int32",id:20},bidRate:{type:"double",id:21},dspId:{type:"string",id:22},cnxBidId:{type:"string",id:23},logAuctionInformation:{type:"bool",id:24},auctionBidId:{type:"string",id:25},rtbRequestId:{type:"string",id:26},liveRampAts:{type:"bool",id:27},floorPriceInformation:{type:"ProtoFloorPriceInformation",id:30}}},ProtoRtbNoBid:{fields:{connatixReason:{type:"ConnatixNoBidReasonEnum",id:1},partnerReason:{type:"PartnerNoBidReasonEnum",id:2},syncedUser:{type:"bool",id:3},requestedFloorPrice:{type:"double",id:4},floorPriceFactorIndex:{type:"int32",id:5},partnerCustomHeaders:{type:"string",id:6}}},ProtoRtbLineItem:{oneofs:{ta:{oneof:["predictedFloorPrice"]},sa:{oneof:["cachedFloorPrice"]}},fields:{predictedFloorPrice:{type:"double",id:5,options:{proto3_optional:!0}},cachedFloorPrice:{type:"ProtoCacheFloorPrice",id:6,options:{proto3_optional:!0}},id:{type:"string",id:1},cachedFloorPriceOld:{type:"double",id:2},bids:{rule:"repeated",type:"ProtoRtbBid",id:3},noBids:{rule:"repeated",type:"ProtoRtbNoBid",id:4}}},ProtoSupplyChain:{fields:{businessDomain:{type:"string",id:1},supplyChainId:{type:"string",id:3}}},ProtoAdClickTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},publisherLineItemId:{type:"string",id:3},advertiserLineItemId:{type:"string",id:4},type:{type:"ProtoAdClickTypeEnum",id:5},insightIndexes:{rule:"repeated",type:"string",id:10},adBreakType:{type:"ProtoAdBreakTypeEnum",id:11},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:12},pageInsightIndexes:{rule:"repeated",type:"string",id:13}}},ProtoAdOpportunityRequest:{fields:{sessionId:{type:"string",id:1},trackingRequestMeta:{type:"MetadataModel",id:2},adBreak:{type:"ProtoAdBreakTypeEnum",id:3},playerWidth:{type:"int32",id:4},pageInsightIndexes:{rule:"repeated",type:"string",id:5}}},ProtoAuctionInfoRequest:{fields:{cnxBidId:{type:"string",id:1},auctionInformation:{type:"ProtoAuctionInformation",id:2},auctionLossReason:{type:"ProtoAuctionLossReasonEnum",id:3}}},ProtoAuctionInformation:{fields:{highestObfuscatedBidPrice:{type:"double",id:1},secondHighestObfuscatedBidPrice:{type:"double",id:2},bidDensity:{type:"int32",id:3}}},ProtoFloorPriceInformation:{fields:{floorPrices:{rule:"repeated",type:"double",id:1,options:{packed:!1}},floorPriceIndexUsed:{type:"int32",id:2},floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:3}}},ProtoPrebid:{fields:{publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},syncedUser:{type:"bool",id:3},timeSpent:{type:"int32",id:4},reason:{type:"ConnatixNoBidReasonEnum",id:5},requestNumber:{type:"int32",id:6},partnerReason:{type:"PartnerNoBidReasonEnum",id:7},requestedFloorPrice:{type:"double",id:8},partnerCustomHeaders:{type:"string",id:9},prebidJsBidderName:{type:"string",id:12},predictedFloorPrice:{type:"double",id:13},playerWidth:{type:"int32",id:14},playerHeight:{type:"int32",id:15},floorPriceInformation:{type:"ProtoFloorPriceInformation",id:16}}},ProtoBid:{fields:{publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},syncedUser:{type:"bool",id:3},timeSpent:{type:"int32",id:4},requestNumber:{type:"int32",id:5},creativeId:{type:"string",id:6},rtbSeatId:{type:"string",id:7},rtbAdomain:{type:"string",id:8},encryptedPrice:{type:"string",id:9},requestedFloorPrice:{type:"double",id:10},prebidJsBidderName:{type:"string",id:13},customClientPrice:{type:"double",id:14},dspId:{type:"string",id:15},cnxBidId:{type:"string",id:16},predictedFloorPrice:{type:"double",id:17},playerWidth:{type:"int32",id:18},playerHeight:{type:"int32",id:19},floorPriceFactor:{type:"double",id:20},floorPriceFactorBypassReason:{type:"int32",id:21},floorPriceInformation:{type:"ProtoFloorPriceInformation",id:22}}},ProtoPostBid:{fields:{publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},syncedUser:{type:"bool",id:3},timeSpent:{type:"int32",id:4},error:{type:"string",id:5},loaded:{type:"bool",id:6},creativeId:{type:"string",id:7},rtbSeatId:{type:"string",id:8},rtbAdomain:{type:"string",id:9},adsourceType:{type:"ProtoAdsourceTypeEnum",id:10},vastMediaType:{type:"string",id:11},adPodSlotPosition:{type:"int32",id:12},prebidJsBidderName:{type:"string",id:13},dspId:{type:"string",id:14},cnxBidId:{type:"string",id:15},winToAdLoadedTime:{type:"int32",id:16},auctionInformation:{type:"ProtoAuctionInformation",id:18},auctionPostbidReason:{type:"ProtoAuctionPostbidReasonEnum",id:19},requestNumber:{type:"int32",id:20},predictedFloorPrice:{type:"double",id:21},floorPrice:{type:"double",id:22},playerWidth:{type:"int32",id:23},playerHeight:{type:"int32",id:24},bidElapsedTimeSeconds:{type:"int32",id:25},adBreakType:{type:"ProtoAdBreakTypeEnum",id:26},liveRampAts:{type:"bool",id:27},floorPriceInformation:{type:"ProtoFloorPriceInformation",id:28},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoBidTrackingsRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},prebids:{rule:"repeated",type:"ProtoPrebid",id:4},bids:{rule:"repeated",type:"ProtoBid",id:5},postBids:{rule:"repeated",type:"ProtoPostBid",id:6},logEveryting:{type:"bool",id:7},hasGdprConsentPayload:{type:"bool",id:10},gdprConsentMode:{type:"ProtoGdprConsentModeEnum",id:11},useExploration:{type:"bool",id:12}}},ProtoHeavyAdTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},advertiserLineItemId:{type:"string",id:2},heavyAdBlockTypeEnum:{type:"ProtoHeavyAdBlockTypeEnum",id:3}}},ProtoMediaClickTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},type:{type:"ProtoMediaClickTypeEnum",id:3},clickUrl:{type:"string",id:4},slideTitle:{type:"string",id:5},slideNumber:{type:"int32",id:6},slideMediaType:{type:"ProtoMediaTypeEnum",id:7},insightIndexes:{rule:"repeated",type:"string",id:12},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:13}}},ProtoMediaTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},quartile:{type:"ProtoQuartilesEnum",id:4},insightIndexes:{rule:"repeated",type:"string",id:9},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:10}}},ProtoPlayerStartRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},pageInsightIndexes:{rule:"repeated",type:"string",id:2},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoSessionAdBlockerRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},adBlockDetectionType:{type:"ProtoAdBlockDetectionTypeEnum",id:2},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoSessionTimeTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},timePlayed:{type:"int32",id:2},timePlayedInView:{type:"int32",id:3},sessionTime:{type:"int32",id:4},pageInsightIndexes:{rule:"repeated",type:"string",id:5}}},ProtoSessionViewRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},pageInsightIndexes:{rule:"repeated",type:"string",id:2},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},hasAdBlocker:{type:"bool",id:4},bundleName:{type:"string",id:5},playerWidth:{type:"int32",id:6},playerHeight:{type:"int32",id:7},pageInsightIndexes:{rule:"repeated",type:"string",id:8},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoTrackingResponse:{oneofs:{oa:{oneof:["viewability"]}},fields:{viewability:{type:"bool",id:5,options:{proto3_optional:!0}},errorMessage:{type:"string",id:1},platformCappedLineItemIdList:{rule:"repeated",type:"string",id:2},impressionRevenue:{type:"double",id:3},adServerLineItemName:{type:"string",id:4}}},ProtoVideoAdImpressionRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:3},publisherLineItemId:{type:"string",id:5},advertiserLineItemId:{type:"string",id:6},syncedUser:{type:"bool",id:7},timeSpent:{type:"int32",id:8},encryptedPrice:{type:"string",id:9},creativeId:{type:"string",id:10},rtbSeatId:{type:"string",id:11},rtbAdomain:{type:"string",id:12},customClientPrice:{type:"double",id:13},adsourceType:{type:"ProtoAdsourceTypeEnum",id:14},vastMediaType:{type:"string",id:15},adPodSlotPosition:{type:"int32",id:18},prebidJsBidderName:{type:"string",id:19},dspId:{type:"string",id:20},cnxBidId:{type:"string",id:21},winToAdLoadedTime:{type:"int32",id:22},startAdToImpressionTime:{type:"int32",id:23},declaredDuration:{type:"double",id:24},impressionDuration:{type:"double",id:25},useExploration:{type:"bool",id:26},auctionInformation:{type:"ProtoAuctionInformation",id:27},playerWidth:{type:"int32",id:28},requestNumber:{type:"int32",id:29},predictedFloorPrice:{type:"double",id:30},floorPrice:{type:"double",id:31},floorPriceFactor:{type:"double",id:44},floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:45},playerHeight:{type:"int32",id:36},bidElapsedTimeSeconds:{type:"int32",id:37},insightIndexes:{rule:"repeated",type:"string",id:38},adBreakType:{type:"ProtoAdBreakTypeEnum",id:40},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:41},hasAdSkip:{type:"bool",id:39},pageInsightIndexes:{rule:"repeated",type:"string",id:42},liveRampAts:{type:"bool",id:43},floorPriceInformation:{type:"ProtoFloorPriceInformation",id:46},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoVideoAdImpressionViewableRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:3},publisherLineItemId:{type:"string",id:5},advertiserLineItemId:{type:"string",id:6},rtbSeatId:{type:"string",id:7},dspId:{type:"string",id:8},insightIndexes:{rule:"repeated",type:"string",id:13},hasAdSkip:{type:"bool",id:14},adBreakType:{type:"ProtoAdBreakTypeEnum",id:15},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:16},pageInsightIndexes:{rule:"repeated",type:"string",id:17},rtbAdomain:{type:"string",id:18}}},ProtoVideoAdQuartilesRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:3},publisherLineItemId:{type:"string",id:5},advertiserLineItemId:{type:"string",id:6},quartile:{type:"ProtoQuartilesEnum",id:7},rtbSeatId:{type:"string",id:8},dspId:{type:"string",id:9},insightIndexes:{rule:"repeated",type:"string",id:14},hasAdSkip:{type:"bool",id:15},adBreakType:{type:"ProtoAdBreakTypeEnum",id:16},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:17},pageInsightIndexes:{rule:"repeated",type:"string",id:18},rtbAdomain:{type:"string",id:19}}},ProtoUserSyncRequest:{fields:{userId:{type:"string",id:1},demandPartner:{type:"int32",id:2},demandPartnerUserId:{type:"string",id:3}}},ProtoPlayerPlaybackModeEnum:{values:{Autoplay:0,ScrollToPlay:1,ClickToPlay:2}},ProtoPlayerCloseButtonMode:{values:{Off:0,OnHover:1,OnHoverAfterFirstAd:2,AlwaysOn:3}},ProtoPlayerFloatingMode:{values:{Off:0,OnPageLoad:1,AfterInView:2,Always:3}},ProtoPlayerSoundMode:{values:{Mute:0,On:1,Hover:2}},ProtoPlayerInsertMode:{values:{WithinContainer:0,BeforeContainer:1,AfterContainer:2,ReplaceContainer:3,HideContainer:4}},ProtoAdViewabilityPolicy:{values:{Default:0,Strict:1}},ProtoSharingDestination:{values:{Facebook:0,Twitter:1,LinkedIn:2}},ProtoFloatingFixedPositionMode:{values:{Page:0,Element:1}},ProtoPositionMode:{values:{BottomRight:0,BottomLeft:1,TopRight:2,TopLeft:3}},ProtoAdPlaybackMode:{values:{Autoplay:0,ScrollToPlay:1}},ProtoFloatingAppendLocationEnum:{values:{Above:0,Below:1,Within:2}},ProtoPlayerAdSkippability:{values:{IfLongerThan:0,Always:1,NoRestrictions:2}},ProtoVideoQuality:{values:{Auto:0,High1080p:1,High720p:2,Medium360p:3}},ProtoImplementationType:{values:{Web:0,Amp:1}},ProtoAdBreakTypeEnum:{values:{None:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdSlotAdTypeEnum:{values:{SingleAd:0,AdPod:1}},ProtoPlayerSkippabilityType:{values:{AllowNonSkipAdsIfTheyAreShorterThan:0,RequireAdsToBeSkippable:1}},ProtoBandwidthLoggingEnum:{values:{Disabled:0,Enabled:1,SaaS:2}},ProtoDeviceType:{values:{Desktop:0,Smartphone:1,Tablet:2,GameConsole:3,SmartTV:4,WearableComputer:5,PDA:6,Unrecognized:7}},ProtoCookieSecureModeEnum:{values:{Secure:0,Unsecure:1,Auto:2}},ProtoTrackerType:{values:{Image:0,Javascript:1}},ProtoTrackerTriggerType:{values:{Impression:0,Complete25Pc:1,Complete50Pc:2,Complete75Pc:3,ViewCompletion:4,VideoClick:5,Pause:6,Resume:7,Mute:8,Unmute:9}},ProtoCreativeTypeEnum:{values:{ThirdParty:0,MediaFile:1,Rtb:2,External:3,HeaderBidder:4,Tam:7,TamDeal:8,TamPrivateAuction:9}},ProtoResetCapTypeEnum:{values:{TimeCapping:0,ContentCapping:1,OpportunityCapping:2}},ProtoAdSlotsEnum:{values:{PreRoll:0,MidRoll:1,PostRoll:2}},ProtoLineItemPriority:{values:{House:0,Default:1,Preferred:2,Top:3}},ProtoAdSkipMode:{values:{IfLongerThan31Sec:0,Always:1,Never:2,NotAplicable:3}},ProtoAdType:{values:{Video:0,Overlay:1,Nonlinear:2}},ProtoChoiceCriteriaEnum:{values:{Only:0,Except:1}},ProtoLineItemAdBreakTypeEnum:{values:{All:1,SingleAd:2,AdPod:3}},ProtoLineItemTargetingTypeEnum:{values:{Only:0,Except:1}},ProtoLineItemAdSlotTargetingTypeEnum:{values:{SpecificSlots:1,Interval:2}},ProtoLineItemPauseAdOutOfViewEnum:{values:{Default:0,Strict:1}},ProtoLineItemContextualTargetingEnum:{values:{IncludeAny:0,IncludeAll:1,ExcludeAny:2,ExcludeAll:3}},ProtoSizeChoiceCriteriaEnum:{values:{GreaterThan:0,SmallerThan:1,Between:2}},ProtoPlayerOrientationTargetingEnum:{values:{Both:0,Portrait:1,Landscape:2}},ProtoLineItemSkippabilityType:{values:{AllowPublisherToDetermineSkippability:0,RequirePublisherToAllowNonSkipAdsShorterThan:1,NotApplicable:2}},ProtoContextualTargetingLevelEnum:{values:{Media:0,Page:1,Both:2}},FloorPriceBypassReasonEnum:{values:{MinCpm:0,FixedCpm:1,MaxBidPrice:2,VideoOrBannerMin:3,PubMinFloor:4,AdvMinFloor:5,BidInHand:6,NoPredictionFound:7}},ProtoNonlinearRequestType:{values:{Banner:0,Video:1}},ProtoTrackType:{values:{ManualSubtitle:0,AutoGeneratedSubtitle:1,ClosedCaptions:2}},ProtoMediaTypeEnum:{values:{Image:0,Video:1}},ProtoSkipEnabledEnum:{values:{No:0,Yes:1}},LiveRampEnvelopeStatusEnum:{values:{Ok:0,EnvelopeExpired:1,Unauthorized:2}},ConnatixNoBidReasonEnum:{values:{RequestException:0,Timeout:1,EmptyResponse:2,InvalidResponse:3,NoBid:4,BidBelowFloor:5,DealIdMismatch:6,CsInvalidResponse:7,CsRequestException:8,CsEmptyResponse:9,NoLibInPage:11,BidIsNotTargetingAllowedEver:12}},PartnerNoBidReasonEnum:{values:{Unknown:0,TechnicalError:1,InvalidRequest:2,KnownWebSpider:3,SuspectedNonHumanTraffic:4,CloudIP:5,UnsupportedDevice:6,BlockedPublisher:7,UnmatchedUser:8,DailyReaderCapMet:9,DailyDomainCapMet:10}},ProtoAdBlockDetectionTypeEnum:{values:{Banner:0,Network:1}},ProtoAdClickTypeEnum:{values:{AdClick:1,AdClickThrough:2,AdSkipClick:3,VolumeClick:4,PauseClick:5,PlayClick:6,FullScreenClick:7,MuteClick:8,UnmuteClick:9,ExitFullScreenClick:10,AdUserClose:11}},ProtoAdsourceTypeEnum:{values:{Unknown:0,Vpaid:1,VastMedia:2,CnxMedia:3,Jw:4,Ima:5,AOL:6}},ProtoAuctionLossReasonEnum:{values:{TargetingMismatch:0,CompetitorPriority:1,AdOpportunityEnd:2}},ProtoGdprConsentModeEnum:{values:{Unknown:0,NoCmp:1,NoConsent:2,NoConnatixConsent:3,NotAllDemandConsent:4,AllGood:5}},ProtoAuctionPostbidReasonEnum:{values:{CreativeError:0,SDKFailure:1,UnsupportedMedia:2,TargetingMismatch:3,PlayerError:4}},ProtoHeavyAdBlockTypeEnum:{values:{Global:0,Script:1,VpaidIframe:2,OverlayIframe:3}},ProtoMediaClickTypeEnum:{values:{Click:0,UrlClick:1,VolumeClick:2,PlayClick:3,PauseClick:4,NextClick:5,PreviousClick:6,MuteClick:7,UnmuteClick:8,CloseClick:9,ScrollClick:10,GalleryClick:11,SubtitleClick:12,FullScreenClick:13,ExitFullScreenClick:14}},ProtoQuartilesEnum:{values:{Start:0,First:1,Second:2,Third:3,Fourth:4}}})})?s.apply(i,n):s)||(t.exports=r)},7953:function(t,i,e){var s,n,r;n=[e(4492)],void 0===(r="function"==typeof(s=function(t){"use strict";return(t.roots.elements||(t.roots.elements=new t.Root)).addJSON({ProtoElementsRequest:{fields:{tokens:{rule:"repeated",type:"string",id:1},pageUrl:{type:"string",id:3},userId:{type:"string",id:5},forcePlayerId:{type:"string",id:7},forcePlaylistId:{type:"string",id:9},version:{type:"int32",id:10},forceLineItemIds:{rule:"repeated",type:"string",id:11},clientAb0:{type:"int32",id:12},clientAb1:{type:"int32",id:13},customParam1:{type:"string",id:16},customParam2:{type:"string",id:17},customParam3:{type:"string",id:18},forceExploration:{type:"bool",id:20},es6:{type:"bool",id:21},bundleId:{type:"string",id:22},forceSourceItemId:{type:"string",id:23},parseDomain:{type:"bool",id:24},implementationType:{type:"ProtoImplementationType",id:25},queryJsTargeting:{keyType:"string",type:"string",id:26},isConsentConnatix:{type:"bool",id:27,options:{default:!0}},reloadedPlayers:{keyType:"string",type:"string",id:29},disableTracking:{type:"bool",id:31},referrer:{type:"string",id:32},localTimestamp:{type:"int64",id:33},customParam4:{type:"string",id:34},customParam5:{type:"string",id:35},forceMediaIdList:{rule:"repeated",type:"string",id:36},servingRuleId:{type:"string",id:37}}},ProtoPlaylistItem:{oneofs:{ha:{oneof:["mediaContentVersionId"]},aa:{oneof:["insightsRevisionNumber"]}},fields:{mediaContentVersionId:{type:"string",id:3,options:{proto3_optional:!0}},insightsRevisionNumber:{type:"int32",id:4,options:{proto3_optional:!0}},mediaId:{type:"string",id:1},revisionNumber:{type:"int32",id:2}}},ProtoElements:{fields:{playerId:{type:"string",id:1},playbackMode:{type:"ProtoPlayerPlaybackModeEnum",id:2},soundMode:{type:"ProtoPlayerSoundMode",id:3},upNextMode:{type:"ProtoPlayerUpNextMode",id:4,options:{default:1}},containerSelector:{type:"string",id:5},position:{type:"int32",id:6},insertPosition:{type:"ProtoPlayerInsertMode",id:7},forceInsertPath:{type:"bool",id:8},renderInFrame:{type:"bool",id:9},scrollHijackingProtection:{type:"bool",id:10},preRollBreak:{type:"int32",id:11},postRollBreak:{type:"int32",id:12},midRollNumber:{type:"int32",id:13,options:{default:-1}},timeBetweenAds:{type:"int32",id:14},minTimeBeforeFirstAd:{type:"int32",id:15},adViewabilityPolicy:{type:"ProtoAdViewabilityPolicy",id:16},responsive:{type:"bool",id:18},ratioWidth:{type:"int32",id:19},ratioHeight:{type:"int32",id:20},fixedWidth:{type:"int32",id:21},fixedHeight:{type:"int32",id:22},casting:{type:"bool",id:23},sharingDestinations:{rule:"repeated",type:"ProtoSharingDestination",id:24,options:{packed:!1}},closedCaption:{type:"bool",id:25},muteWatermark:{type:"bool",id:26},expandButton:{type:"bool",id:27},closeButtonMode:{type:"ProtoPlayerCloseButtonMode",id:28},floatingMode:{type:"ProtoPlayerFloatingMode",id:29},floatingDeviceMode:{rule:"repeated",type:"ProtoDeviceType",id:30,options:{packed:!1}},floatingCloseButtonMode:{type:"ProtoPlayerCloseButtonMode",id:31},floatingFixedPosition:{type:"ProtoFloatingFixedPositionMode",id:32},floatingPageElement:{type:"string",id:33},floatingUseElementWidth:{type:"bool",id:34},floatingScrollPosition:{type:"ProtoPositionMode",id:35},floatingGutterX:{type:"int32",id:36},floatingGutterY:{type:"int32",id:37},floatingWidth:{type:"int32",id:38},iconsColor:{type:"string",id:39},accentColor:{type:"string",id:40},tooltipTextColor:{type:"string",id:41},tooltipBackgroundColor:{type:"string",id:42},html:{type:"string",id:43},galleryStyle:{type:"ProtoGalleryStyleMode",id:45},logoPosition:{type:"ProtoLogoPositionMode",id:46},lineItems:{rule:"repeated",type:"ProtoLineItem",id:49},adPlaybackMode:{type:"ProtoAdPlaybackMode",id:50},css:{type:"string",id:51},sessionId:{type:"string",id:52},playlistId:{type:"string",id:53},playerType:{type:"ProtoElementsTypeEnum",id:54},outstreamInitialRendering:{type:"ProtoOutstreamInitialRenderingEnum",id:55},outstreamHouseBackgroundColor:{type:"string",id:56},outstreamTotalAdBreakLength:{type:"int32",id:57},outstreamEndAdBreakPolicy:{type:"ProtoOutstreamEndAdBreakPolicyEnum",id:58},galleryOrientation:{type:"ProtoGalleryOrientationEnum",id:59},playlist:{rule:"repeated",type:"ProtoPlaylistItem",id:60},floatingAppendLocation:{type:"ProtoFloatingAppendLocationEnum",id:61},floatingYAxisPadding:{type:"int32",id:62},customJsCode:{type:"string",id:63},videoQuality:{type:"ProtoVideoQuality",id:64},initializationSettingsJson:{type:"string",id:65},skipAdAfter:{type:"int32",id:67,options:{default:5}},adBreaks:{rule:"repeated",type:"ProtoAdBreak",id:68},amazonTamSlotId:{type:"string",id:69},midRollOnlyOnLongContent:{type:"bool",id:70,options:{default:!0}},limitClientSideApiUse:{type:"bool",id:71},abTestId:{type:"string",id:72},skipMin:{type:"int32",id:73,options:{default:31}},skippability:{type:"ProtoPlayerSkippabilityType",id:74},logoResource:{type:"string",id:76},nonlinearPlayerSettings:{type:"ProtoNonlinearPlayerSettings",id:77},displayAdCountdown:{type:"bool",id:78},bandwidthLoggingState:{type:"ProtoBandwidthLoggingEnum",id:79},prefetchOnPreroll:{type:"bool",id:80,options:{default:!0}}}},ProtoElementsResponse:{fields:{errorMessage:{type:"string",id:1},players:{rule:"repeated",type:"ProtoElements",id:10},browser:{type:"Browser",id:11},geoLocation:{type:"GeoLocation",id:12},lineItems:{rule:"repeated",type:"ProtoLineItem",id:13},cookieSyncUrls:{keyType:"int32",type:"string",id:14},explorationMode:{type:"bool",id:15},supplyChain:{type:"ProtoSupplyChain",id:17},secondLevelDomain:{type:"string",id:18},userInformation:{type:"ProtoUserInformation",id:20},serverAb0:{type:"int32",id:21},serverAb1:{type:"int32",id:22},isSeoTraffic:{type:"bool",id:23},apiHostUrl:{type:"string",id:24},publisherNetworkCode:{type:"string",id:26},iOSAppID:{type:"string",id:27},hashedPageUrl:{type:"string",id:28},bundleAbId:{type:"string",id:29},bundlePart:{type:"string",id:30}}},ProtoLineItemAdBreakTargeting:{fields:{adRollType:{type:"ProtoAdBreakTypeEnum",id:1},adBreakTypeEnum:{type:"ProtoLineItemAdBreakTypeEnum",id:2}}},ProtoLineItemAdPodTargeting:{fields:{targetingType:{type:"ProtoLineItemTargetingTypeEnum",id:1},adSlotTargetingType:{type:"ProtoLineItemAdSlotTargetingTypeEnum",id:2},adSlotPositions:{rule:"repeated",type:"int32",id:3,options:{packed:!1}}}},ProtoLineItemAdBreakSettings:{fields:{adBreakTargeting:{rule:"repeated",type:"ProtoLineItemAdBreakTargeting",id:1},adPodTargeting:{type:"ProtoLineItemAdPodTargeting",id:2}}},ProtoLineItem:{oneofs:{ta:{oneof:["predictedFloorPrice"]},ia:{oneof:["floorPricesNew"]}},fields:{predictedFloorPrice:{type:"double",id:49,options:{proto3_optional:!0}},floorPricesNew:{type:"ProtoFloorPricesNewModel",id:57,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},adTag:{type:"string",id:3},creativeType:{type:"ProtoCreativeTypeEnum",id:4},sound:{type:"bool",id:6},viewability:{type:"bool",id:7},impressionTimeSpent:{type:"int32",id:9},vendorId:{type:"string",id:10},trackers:{rule:"repeated",type:"CreativeTrackerViewModel",id:12},duration:{type:"int32",id:13},renditions:{rule:"repeated",type:"ProtoRendition",id:14},mediaCreativeId:{type:"string",id:15},ignoreFilledRequests:{type:"bool",id:16},requestCap:{type:"int32",id:17,options:{default:3}},impressionCap:{type:"int32",id:18},successRate:{type:"double",id:19},lineItemPriority:{type:"ProtoLineItemPriority",id:20},headerBidderBids:{type:"string",id:21},headerBidderTimeout:{type:"int32",id:22},mediaCreativeClickUrl:{type:"string",id:23},resetRequestsCapTime:{type:"int32",id:24,options:{default:60}},resetImpressionsCapTime:{type:"int32",id:25,options:{default:60}},resetCapType:{type:"ProtoResetCapTypeEnum",id:26},creativeHlsFileName:{type:"string",id:27},timeBetweenRequests:{type:"int32",id:28},skipMode:{type:"ProtoAdSkipMode",id:29},mediaIdTargeting:{type:"ProtoTargetingChoiceModel",id:30},mediaKeywordsTargeting:{type:"ProtoTargetingChoiceModel",id:31},mediaLanguageTargeting:{type:"ProtoTargetingChoiceModel",id:32},adType:{type:"ProtoAdType",id:33},overlayTime:{type:"int32",id:34,options:{default:30}},floorPrice:{type:"double",id:35},adBreakSettings:{type:"ProtoLineItemAdBreakSettings",id:36},floorPrices:{rule:"repeated",type:"double",id:38,options:{packed:!1}},bidRate:{type:"double",id:39},pauseAdOutOfView:{type:"ProtoLineItemPauseAdOutOfViewEnum",id:40},moatTrackingEnabled:{type:"bool",id:41},cnxCreativeId:{type:"string",id:42},blockedDomainsRevisionNumber:{type:"int32",id:44},advertiserContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:45},publisherContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:46},playerSizeTargetings:{type:"ProtoPlayerSizeTargetings",id:47},amazonDealId:{type:"string",id:48},playerOrientationTargeting:{type:"ProtoPlayerOrientationTargetingEnum",id:50},skipMin:{type:"int32",id:51,options:{default:6}},skippability:{type:"ProtoLineItemSkippabilityType",id:52},forceCallingInEveryAO:{type:"bool",id:53},networkExpiryTimeSeconds:{type:"int32",id:54,options:{default:21600}},nonlinearLineItemSettings:{type:"ProtoNonlinearLineItemSettings",id:55},floorPriceData:{rule:"repeated",type:"ProtoFloorPriceModel",id:56},prebidJsBidParamsJSONString:{type:"string",id:58},playerSize:{type:"string",id:101}}},ProtoTargetingChoiceModel:{fields:{choiceCriteria:{type:"ProtoChoiceCriteriaEnum",id:1},items:{rule:"repeated",type:"string",id:2}}},ProtoContextualTargetingCaseModel:{fields:{filters:{rule:"repeated",type:"ProtoContextualTargetingFilterModel",id:1}}},ProtoContextualTargetingFilterModel:{fields:{type:{type:"ProtoLineItemContextualTargetingEnum",id:1},items:{rule:"repeated",type:"string",id:2},level:{type:"ProtoContextualTargetingLevelEnum",id:3},hashedItemsIds:{rule:"repeated",type:"string",id:4}}},ProtoPlayerSizeTargetings:{fields:{sizeChoiceCriteria:{type:"ProtoSizeChoiceCriteriaEnum",id:1},minWidth:{type:"int32",id:2},maxWidth:{type:"int32",id:3}}},ProtoFloorPriceModel:{fields:{price:{type:"double",id:1},factor:{type:"double",id:2}}},ProtoFloorPricesData:{fields:{price:{type:"double",id:1},floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:2}}},ProtoFloorPricesNewModel:{fields:{floorPrices:{rule:"repeated",type:"ProtoFloorPricesData",id:1},recommended:{type:"int32",id:2}}},CreativeTrackerViewModel:{fields:{type:{type:"ProtoTrackerType",id:1},trigger:{type:"ProtoTrackerTriggerType",id:2},url:{type:"string",id:3}}},ProtoRendition:{fields:{height:{type:"int32",id:1},codec:{type:"string",id:2},file:{type:"string",id:3}}},ProtoNonlinearLineItemSettings:{fields:{nonLinearRequestType:{type:"ProtoNonlinearRequestType",id:1},nonLinearAdTimeSeconds:{type:"int32",id:2,options:{default:15}}}},Browser:{fields:{browserVersion:{type:"string",id:1},browserType:{type:"string",id:2},osCode:{type:"string",id:3},device:{type:"ProtoDeviceType",id:4}}},GeoLocation:{fields:{countryGeoId:{type:"int32",id:1},cityId:{type:"int32",id:2},subdivisionId:{type:"int32",id:3},dmaId:{type:"int32",id:4},ip:{type:"string",id:5},lat:{type:"double",id:6},lon:{type:"double",id:7},zipcode:{type:"string",id:8}}},ProtoSupplyChain:{fields:{businessDomain:{type:"string",id:1},supplyChainId:{type:"string",id:3}}},ProtoUserInformation:{fields:{userId:{type:"string",id:1},lookupId:{type:"string",id:3},lookupResponseCode:{type:"int32",id:4},callFraudSensor:{type:"bool",id:5},publisherAdsTxt:{type:"string",id:6}}},ProtoAdBreak:{fields:{types:{rule:"repeated",type:"ProtoAdBreakTypeEnum",id:1,options:{packed:!1}},maxAdPodDuration:{type:"int32",id:2},maxAdSlotDuration:{type:"int32",id:3,options:{default:180}},numberOfAdSlots:{type:"int32",id:4,options:{default:1}}}},ProtoNonlinearPlayerSettings:{fields:{numberOfNonlinearAds:{type:"int32",id:1},timeSecondsBetweenNonlinear:{type:"int32",id:2,options:{default:5}},timeSecondsBetweenLinearAndNonlinear:{type:"int32",id:3}}},ProtoOutstreamInitialRenderingEnum:{values:{ExpandWithAd:0,FullyRendered:1}},ProtoOutstreamEndAdBreakPolicyEnum:{values:{Hide:0,HouseScreen:1,Loop:2}},ProtoGalleryStyleMode:{values:{None:0,Detailed:1,Visual:2}},ProtoLogoPositionMode:{values:{None:0,ControlBar:1,BottomRight:2,BottomLeft:3,TopRight:4,TopLeft:5,Center:6}},ProtoGalleryOrientationEnum:{values:{Landscape:0,Portrait:1}},ProtoElementsTypeEnum:{values:{InStream:0,OutStream:1,InStreamInApp:2,Live:3}},ProtoPlayerUpNextMode:{values:{Loop:0,Next:1,Stop:2}},ProtoCreativeTypeEnum:{values:{ThirdParty:0,MediaFile:1,Rtb:2,External:3,HeaderBidder:4,Tam:7,TamDeal:8,TamPrivateAuction:9}},ProtoResetCapTypeEnum:{values:{TimeCapping:0,ContentCapping:1,OpportunityCapping:2}},ProtoAdSlotsEnum:{values:{PreRoll:0,MidRoll:1,PostRoll:2}},ProtoLineItemPriority:{values:{House:0,Default:1,Preferred:2,Top:3}},ProtoAdSkipMode:{values:{IfLongerThan31Sec:0,Always:1,Never:2,NotAplicable:3}},ProtoAdType:{values:{Video:0,Overlay:1,Nonlinear:2}},ProtoChoiceCriteriaEnum:{values:{Only:0,Except:1}},ProtoLineItemAdBreakTypeEnum:{values:{All:1,SingleAd:2,AdPod:3}},ProtoLineItemTargetingTypeEnum:{values:{Only:0,Except:1}},ProtoLineItemAdSlotTargetingTypeEnum:{values:{SpecificSlots:1,Interval:2}},ProtoLineItemPauseAdOutOfViewEnum:{values:{Default:0,Strict:1}},ProtoLineItemContextualTargetingEnum:{values:{IncludeAny:0,IncludeAll:1,ExcludeAny:2,ExcludeAll:3}},ProtoSizeChoiceCriteriaEnum:{values:{GreaterThan:0,SmallerThan:1,Between:2}},ProtoPlayerOrientationTargetingEnum:{values:{Both:0,Portrait:1,Landscape:2}},ProtoLineItemSkippabilityType:{values:{AllowPublisherToDetermineSkippability:0,RequirePublisherToAllowNonSkipAdsShorterThan:1,NotApplicable:2}},ProtoContextualTargetingLevelEnum:{values:{Media:0,Page:1,Both:2}},FloorPriceBypassReasonEnum:{values:{MinCpm:0,FixedCpm:1,MaxBidPrice:2,VideoOrBannerMin:3,PubMinFloor:4,AdvMinFloor:5,BidInHand:6,NoPredictionFound:7}},ProtoTrackerType:{values:{Image:0,Javascript:1}},ProtoTrackerTriggerType:{values:{Impression:0,Complete25Pc:1,Complete50Pc:2,Complete75Pc:3,ViewCompletion:4,VideoClick:5,Pause:6,Resume:7,Mute:8,Unmute:9}},ProtoPlayerPlaybackModeEnum:{values:{Autoplay:0,ScrollToPlay:1,ClickToPlay:2}},ProtoPlayerCloseButtonMode:{values:{Off:0,OnHover:1,OnHoverAfterFirstAd:2,AlwaysOn:3}},ProtoPlayerFloatingMode:{values:{Off:0,OnPageLoad:1,AfterInView:2,Always:3}},ProtoPlayerSoundMode:{values:{Mute:0,On:1,Hover:2}},ProtoPlayerInsertMode:{values:{WithinContainer:0,BeforeContainer:1,AfterContainer:2,ReplaceContainer:3,HideContainer:4}},ProtoAdViewabilityPolicy:{values:{Default:0,Strict:1}},ProtoSharingDestination:{values:{Facebook:0,Twitter:1,LinkedIn:2}},ProtoFloatingFixedPositionMode:{values:{Page:0,Element:1}},ProtoPositionMode:{values:{BottomRight:0,BottomLeft:1,TopRight:2,TopLeft:3}},ProtoAdPlaybackMode:{values:{Autoplay:0,ScrollToPlay:1}},ProtoFloatingAppendLocationEnum:{values:{Above:0,Below:1,Within:2}},ProtoPlayerAdSkippability:{values:{IfLongerThan:0,Always:1,NoRestrictions:2}},ProtoVideoQuality:{values:{Auto:0,High1080p:1,High720p:2,Medium360p:3}},ProtoImplementationType:{values:{Web:0,Amp:1}},ProtoAdBreakTypeEnum:{values:{None:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdSlotAdTypeEnum:{values:{SingleAd:0,AdPod:1}},ProtoPlayerSkippabilityType:{values:{AllowNonSkipAdsIfTheyAreShorterThan:0,RequireAdsToBeSkippable:1}},ProtoBandwidthLoggingEnum:{values:{Disabled:0,Enabled:1,SaaS:2}},ProtoNonlinearRequestType:{values:{Banner:0,Video:1}},ProtoDeviceType:{values:{Desktop:0,Smartphone:1,Tablet:2,GameConsole:3,SmartTV:4,WearableComputer:5,PDA:6,Unrecognized:7}}})})?s.apply(i,n):s)||(t.exports=r)},5648:function(t,i,e){var s,n,r;n=[e(4492)],void 0===(r="function"==typeof(s=function(t){"use strict";return(t.roots.playspace||(t.roots.playspace=new t.Root)).addJSON({ProtoPlayspaceVideoSlideRendition:{fields:{width:{type:"int32",id:1},height:{type:"int32",id:2},videoUrl:{type:"string",id:3},codec:{type:"ProtoPlayspaceCodecEnum",id:4}}},ProtoPlayspaceVideoSettings:{fields:{renditions:{rule:"repeated",type:"ProtoPlayspaceVideoSlideRendition",id:1}}},ProtoSlideCapabilityMetadata:{fields:{label:{type:"string",id:1}}},ProtoPlayspaceSlideCapability:{fields:{type:{type:"ProtoPlayspaceSlideCapabilitiesEnum",id:1},metadata:{type:"ProtoSlideCapabilityMetadata",id:2}}},ProtoFallbackStoryResponse:{fields:{storyId:{type:"string",id:1},activeVersionId:{type:"string",id:2}}},ProtoPlayspaceMediaMetadataResponse:{fields:{slides:{rule:"repeated",type:"ProtoPlayspaceSlideMetadata",id:1},storyTitle:{type:"string",id:2}}},ProtoPlayspaceSlideMetadata:{fields:{mediaType:{type:"ProtoMediaTypeEnum",id:1},title:{type:"string",id:2},clickUrl:{type:"string",id:3},imageUrl:{type:"string",id:4},slideDuration:{type:"int32",id:5},videoRendition:{type:"ProtoPlayspaceVideoSettings",id:6},type:{type:"ProtoPlayspaceSlideTypeEnum",id:7},coverMetadata:{type:"ProtoPlayspaceCoverMetadata",id:8},descriptionMetadata:{type:"ProtoPlayspaceDescriptionMetadata",id:9},bulletListMetadata:{type:"ProtoPlayspaceBulletListMetadata",id:10},quoteMetadata:{type:"ProtoPlayspaceQuoteMetadata",id:12},instagramMetadata:{type:"ProtoPlayspaceInstagramMetadata",id:16},capabilityList:{rule:"repeated",type:"ProtoPlayspaceSlideCapability",id:13},portraitImageUrl:{type:"string",id:14},mediaContext:{type:"ProtoMediaContextEnum",id:15},altText:{type:"string",id:17}}},ProtoPlayspaceCoverMetadata:{fields:{title:{type:"string",id:1},subtitle:{type:"string",id:2}}},ProtoPlayspaceDescriptionChunk:{fields:{text:{type:"string",id:1},colorScheme:{type:"ProtoPlayspaceColorSchemeEnum",id:2}}},ProtoPlayspaceDescriptionMetadata:{fields:{chunkList:{rule:"repeated",type:"ProtoPlayspaceDescriptionChunk",id:1},label:{type:"ProtoPlayspaceDescriptionChunk",id:2}}},ProtoBulletOptions:{fields:{title:{type:"string",id:1},description:{type:"string",id:2}}},ProtoPlayspaceBulletListMetadata:{fields:{title:{type:"string",id:1},items:{rule:"repeated",type:"ProtoBulletOptions",id:2}}},ProtoPlayspaceQuoteMetadata:{fields:{text:{type:"string",id:1},source:{type:"string",id:2}}},ProtoPlayspaceInstagramMetadata:{fields:{handle:{type:"string",id:1},createdDate:{type:"string",id:2},likes:{type:"string",id:3},comments:{type:"string",id:4}}},ProtoPlayspaceColorPrimary:{fields:{background:{type:"string",id:1,options:{default:"#F1F1F1"}},foreground:{type:"string",id:2,options:{default:"#000000"}}}},ProtoPlayspaceColorSecondary:{fields:{background:{type:"string",id:1,options:{default:"#000000 "}},foreground:{type:"string",id:2,options:{default:"#F1F1F1"}}}},ProtoPlayspaceColorAccent:{fields:{background:{type:"string",id:1},foreground:{type:"string",id:2}}},ProtoPlayspaceRequest:{fields:{tokens:{rule:"repeated",type:"string",id:1},pageUrl:{type:"string",id:3},userId:{type:"string",id:5},forcePlayerId:{type:"string",id:7},forceStoryId:{type:"string",id:8},version:{type:"int32",id:9},clientAb0:{type:"int32",id:10},clientAb1:{type:"int32",id:11},forceLineItemIds:{rule:"repeated",type:"string",id:12},customParam1:{type:"string",id:14},customParam2:{type:"string",id:15},customParam3:{type:"string",id:16},forceExploration:{type:"bool",id:17},es6:{type:"bool",id:18},bundleId:{type:"string",id:19},parseDomain:{type:"bool",id:20},implementationType:{type:"ProtoImplementationType",id:21},queryJsTargeting:{keyType:"string",type:"string",id:22},isConsentConnatix:{type:"bool",id:23,options:{default:!0}},reloadedPlayers:{keyType:"string",type:"string",id:25},disableTracking:{type:"bool",id:27},referrer:{type:"string",id:28},customParam4:{type:"string",id:29},customParam5:{type:"string",id:30},servingRuleId:{type:"string",id:31}}},ProtoPlayspace:{fields:{playerId:{type:"string",id:1},playbackMode:{type:"ProtoPlayerPlaybackModeEnum",id:2},soundMode:{type:"ProtoPlayerSoundMode",id:3},endOfCycleMode:{type:"ProtoEndOfSlideCycleMode",id:4},containerSelector:{type:"string",id:5},position:{type:"int32",id:6},insertPosition:{type:"ProtoPlayerInsertMode",id:7},forceInsertPath:{type:"bool",id:8},renderInFrame:{type:"bool",id:9},scrollHijackingProtection:{type:"bool",id:10},preRollBreak:{type:"int32",id:11},postRollBreak:{type:"int32",id:12},midRollNumber:{type:"int32",id:13,options:{default:-1}},slidesBetweenAds:{type:"int32",id:14},minSlidesBeforeFirstAd:{type:"int32",id:15},adViewabilityPolicy:{type:"ProtoAdViewabilityPolicy",id:16},casting:{type:"bool",id:18},sharingDestinations:{rule:"repeated",type:"ProtoSharingDestination",id:19,options:{packed:!1}},expandButton:{type:"bool",id:20},closeButtonMode:{type:"ProtoPlayerCloseButtonMode",id:21},floatingMode:{type:"ProtoPlayerFloatingMode",id:22},floatingDeviceMode:{rule:"repeated",type:"ProtoDeviceType",id:23,options:{packed:!1}},floatingCloseButtonMode:{type:"ProtoPlayerCloseButtonMode",id:24},floatingFixedPosition:{type:"ProtoFloatingFixedPositionMode",id:25},floatingPageElement:{type:"string",id:26},floatingUseElementWidth:{type:"bool",id:27},floatingScrollPosition:{type:"ProtoPositionMode",id:28},floatingGutterX:{type:"int32",id:29},floatingGutterY:{type:"int32",id:30},floatingWidth:{type:"int32",id:31},html:{type:"string",id:35},lineItems:{rule:"repeated",type:"ProtoLineItem",id:37},adPlaybackMode:{type:"ProtoAdPlaybackMode",id:38},css:{type:"string",id:39},sessionId:{type:"string",id:40},orientation:{type:"ProtoPlayerOrientationEnum",id:41},orientationBreakpoint:{type:"int32",id:42},activeVersion:{type:"string",id:43},storyId:{type:"string",id:44},floatingAppendLocation:{type:"ProtoFloatingAppendLocationEnum",id:50},floatingYAxisPadding:{type:"int32",id:51},contentTitleTextColor:{type:"string",id:57},useAccentColorForProgressBar:{type:"bool",id:58},primaryColorList:{type:"ProtoPlayspaceColorPrimary",id:59},secondaryColorList:{type:"ProtoPlayspaceColorSecondary",id:60},accentColorList:{type:"ProtoPlayspaceColorAccent",id:61},customJsCode:{type:"string",id:62},initializationSettingsJson:{type:"string",id:63},publisherName:{type:"string",id:64},skipAdAfter:{type:"int32",id:66,options:{default:5}},adBreaks:{rule:"repeated",type:"ProtoAdBreak",id:67},amazonTamSlotId:{type:"string",id:68},limitClientSideApiUse:{type:"bool",id:69},abTestId:{type:"string",id:70},skipMin:{type:"int32",id:71,options:{default:31}},skippability:{type:"ProtoPlayerSkippabilityType",id:72},logoResource:{type:"string",id:73},activeVersionHasInsights:{type:"bool",id:74},bandwidthLoggingState:{type:"ProtoBandwidthLoggingEnum",id:76}}},ProtoPlayspaceResponse:{fields:{errorMessage:{type:"string",id:1},players:{rule:"repeated",type:"ProtoPlayspace",id:10},browser:{type:"Browser",id:11},geoLocation:{type:"GeoLocation",id:12},lineItems:{rule:"repeated",type:"ProtoLineItem",id:13},cookieSyncUrls:{keyType:"int32",type:"string",id:14},explorationMode:{type:"bool",id:15},supplyChain:{type:"ProtoSupplyChain",id:17},secondLevelDomain:{type:"string",id:18},userInformation:{type:"ProtoUserInformation",id:20},serverAb0:{type:"int32",id:21},serverAb1:{type:"int32",id:22},isSeoTraffic:{type:"bool",id:23},apiHostUrl:{type:"string",id:24},publisherNetworkCode:{type:"string",id:26},iOSAppID:{type:"string",id:27},hashedPageUrl:{type:"string",id:28},bundleAbId:{type:"string",id:29},bundlePart:{type:"string",id:30}}},Browser:{fields:{browserVersion:{type:"string",id:1},browserType:{type:"string",id:2},osCode:{type:"string",id:3},device:{type:"ProtoDeviceType",id:4}}},GeoLocation:{fields:{countryGeoId:{type:"int32",id:1},cityId:{type:"int32",id:2},subdivisionId:{type:"int32",id:3},dmaId:{type:"int32",id:4},ip:{type:"string",id:5},lat:{type:"double",id:6},lon:{type:"double",id:7},zipcode:{type:"string",id:8}}},CreativeTrackerViewModel:{fields:{type:{type:"ProtoTrackerType",id:1},trigger:{type:"ProtoTrackerTriggerType",id:2},url:{type:"string",id:3}}},ProtoLineItemAdBreakTargeting:{fields:{adRollType:{type:"ProtoAdBreakTypeEnum",id:1},adBreakTypeEnum:{type:"ProtoLineItemAdBreakTypeEnum",id:2}}},ProtoLineItemAdPodTargeting:{fields:{targetingType:{type:"ProtoLineItemTargetingTypeEnum",id:1},adSlotTargetingType:{type:"ProtoLineItemAdSlotTargetingTypeEnum",id:2},adSlotPositions:{rule:"repeated",type:"int32",id:3,options:{packed:!1}}}},ProtoLineItemAdBreakSettings:{fields:{adBreakTargeting:{rule:"repeated",type:"ProtoLineItemAdBreakTargeting",id:1},adPodTargeting:{type:"ProtoLineItemAdPodTargeting",id:2}}},ProtoLineItem:{oneofs:{ta:{oneof:["predictedFloorPrice"]},ia:{oneof:["floorPricesNew"]}},fields:{predictedFloorPrice:{type:"double",id:49,options:{proto3_optional:!0}},floorPricesNew:{type:"ProtoFloorPricesNewModel",id:57,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},adTag:{type:"string",id:3},creativeType:{type:"ProtoCreativeTypeEnum",id:4},sound:{type:"bool",id:6},viewability:{type:"bool",id:7},impressionTimeSpent:{type:"int32",id:9},vendorId:{type:"string",id:10},trackers:{rule:"repeated",type:"CreativeTrackerViewModel",id:12},duration:{type:"int32",id:13},renditions:{rule:"repeated",type:"ProtoRendition",id:14},mediaCreativeId:{type:"string",id:15},ignoreFilledRequests:{type:"bool",id:16},requestCap:{type:"int32",id:17,options:{default:3}},impressionCap:{type:"int32",id:18},successRate:{type:"double",id:19},lineItemPriority:{type:"ProtoLineItemPriority",id:20},headerBidderBids:{type:"string",id:21},headerBidderTimeout:{type:"int32",id:22},mediaCreativeClickUrl:{type:"string",id:23},resetRequestsCapTime:{type:"int32",id:24,options:{default:60}},resetImpressionsCapTime:{type:"int32",id:25,options:{default:60}},resetCapType:{type:"ProtoResetCapTypeEnum",id:26},creativeHlsFileName:{type:"string",id:27},timeBetweenRequests:{type:"int32",id:28},skipMode:{type:"ProtoAdSkipMode",id:29},mediaIdTargeting:{type:"ProtoTargetingChoiceModel",id:30},mediaKeywordsTargeting:{type:"ProtoTargetingChoiceModel",id:31},mediaLanguageTargeting:{type:"ProtoTargetingChoiceModel",id:32},adType:{type:"ProtoAdType",id:33},overlayTime:{type:"int32",id:34,options:{default:30}},floorPrice:{type:"double",id:35},adBreakSettings:{type:"ProtoLineItemAdBreakSettings",id:36},floorPrices:{rule:"repeated",type:"double",id:38,options:{packed:!1}},bidRate:{type:"double",id:39},pauseAdOutOfView:{type:"ProtoLineItemPauseAdOutOfViewEnum",id:40},moatTrackingEnabled:{type:"bool",id:41},cnxCreativeId:{type:"string",id:42},blockedDomainsRevisionNumber:{type:"int32",id:44},advertiserContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:45},publisherContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:46},playerSizeTargetings:{type:"ProtoPlayerSizeTargetings",id:47},amazonDealId:{type:"string",id:48},playerOrientationTargeting:{type:"ProtoPlayerOrientationTargetingEnum",id:50},skipMin:{type:"int32",id:51,options:{default:6}},skippability:{type:"ProtoLineItemSkippabilityType",id:52},forceCallingInEveryAO:{type:"bool",id:53},networkExpiryTimeSeconds:{type:"int32",id:54,options:{default:21600}},nonlinearLineItemSettings:{type:"ProtoNonlinearLineItemSettings",id:55},floorPriceData:{rule:"repeated",type:"ProtoFloorPriceModel",id:56},prebidJsBidParamsJSONString:{type:"string",id:58},playerSize:{type:"string",id:101}}},ProtoTargetingChoiceModel:{fields:{choiceCriteria:{type:"ProtoChoiceCriteriaEnum",id:1},items:{rule:"repeated",type:"string",id:2}}},ProtoContextualTargetingCaseModel:{fields:{filters:{rule:"repeated",type:"ProtoContextualTargetingFilterModel",id:1}}},ProtoContextualTargetingFilterModel:{fields:{type:{type:"ProtoLineItemContextualTargetingEnum",id:1},items:{rule:"repeated",type:"string",id:2},level:{type:"ProtoContextualTargetingLevelEnum",id:3},hashedItemsIds:{rule:"repeated",type:"string",id:4}}},ProtoPlayerSizeTargetings:{fields:{sizeChoiceCriteria:{type:"ProtoSizeChoiceCriteriaEnum",id:1},minWidth:{type:"int32",id:2},maxWidth:{type:"int32",id:3}}},ProtoFloorPriceModel:{fields:{price:{type:"double",id:1},factor:{type:"double",id:2}}},ProtoFloorPricesData:{fields:{price:{type:"double",id:1},floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:2}}},ProtoFloorPricesNewModel:{fields:{floorPrices:{rule:"repeated",type:"ProtoFloorPricesData",id:1},recommended:{type:"int32",id:2}}},ProtoRendition:{fields:{height:{type:"int32",id:1},codec:{type:"string",id:2},file:{type:"string",id:3}}},ProtoNonlinearLineItemSettings:{fields:{nonLinearRequestType:{type:"ProtoNonlinearRequestType",id:1},nonLinearAdTimeSeconds:{type:"int32",id:2,options:{default:15}}}},ProtoSupplyChain:{fields:{businessDomain:{type:"string",id:1},supplyChainId:{type:"string",id:3}}},ProtoUserInformation:{fields:{userId:{type:"string",id:1},lookupId:{type:"string",id:3},lookupResponseCode:{type:"int32",id:4},callFraudSensor:{type:"bool",id:5},publisherAdsTxt:{type:"string",id:6}}},ProtoAdBreak:{fields:{types:{rule:"repeated",type:"ProtoAdBreakTypeEnum",id:1,options:{packed:!1}},maxAdPodDuration:{type:"int32",id:2},maxAdSlotDuration:{type:"int32",id:3,options:{default:180}},numberOfAdSlots:{type:"int32",id:4,options:{default:1}}}},ProtoPlayspaceCodecEnum:{values:{h264:0,hevc:1}},ProtoPlayerOrientationEnum:{values:{Mixed:0,Portrait:1,Landscape:2}},ProtoEndOfSlideCycleMode:{values:{Loop:0,Stop:1}},ProtoPlayspaceColorSchemeEnum:{values:{Default:0,Accent:1,Primary:2,Secondary:3}},ProtoPlayspaceSlideTypeEnum:{values:{Default:0,Cover:1,Description:2,BulletList:3,Stock:4,Quote:5,Instagram:6}},ProtoPlayspaceSlideCapabilitiesEnum:{values:{VolumeControls:0,PlaybackControls:1,PlaylistControls:2,CtaButton:3,TopStoryTitle:4,TopSlideTitle:5}},ProtoMediaContextEnum:{values:{None:0,Logo:1}},ProtoMediaTypeEnum:{values:{Image:0,Video:1}},ProtoDeviceType:{values:{Desktop:0,Smartphone:1,Tablet:2,GameConsole:3,SmartTV:4,WearableComputer:5,PDA:6,Unrecognized:7}},ProtoTrackerType:{values:{Image:0,Javascript:1}},ProtoTrackerTriggerType:{values:{Impression:0,Complete25Pc:1,Complete50Pc:2,Complete75Pc:3,ViewCompletion:4,VideoClick:5,Pause:6,Resume:7,Mute:8,Unmute:9}},ProtoCreativeTypeEnum:{values:{ThirdParty:0,MediaFile:1,Rtb:2,External:3,HeaderBidder:4,Tam:7,TamDeal:8,TamPrivateAuction:9}},ProtoResetCapTypeEnum:{values:{TimeCapping:0,ContentCapping:1,OpportunityCapping:2}},ProtoAdSlotsEnum:{values:{PreRoll:0,MidRoll:1,PostRoll:2}},ProtoLineItemPriority:{values:{House:0,Default:1,Preferred:2,Top:3}},ProtoAdSkipMode:{values:{IfLongerThan31Sec:0,Always:1,Never:2,NotAplicable:3}},ProtoAdType:{values:{Video:0,Overlay:1,Nonlinear:2}},ProtoChoiceCriteriaEnum:{values:{Only:0,Except:1}},ProtoLineItemAdBreakTypeEnum:{values:{All:1,SingleAd:2,AdPod:3}},ProtoLineItemTargetingTypeEnum:{values:{Only:0,Except:1}},ProtoLineItemAdSlotTargetingTypeEnum:{values:{SpecificSlots:1,Interval:2}},ProtoLineItemPauseAdOutOfViewEnum:{values:{Default:0,Strict:1}},ProtoLineItemContextualTargetingEnum:{values:{IncludeAny:0,IncludeAll:1,ExcludeAny:2,ExcludeAll:3}},ProtoSizeChoiceCriteriaEnum:{values:{GreaterThan:0,SmallerThan:1,Between:2}},ProtoPlayerOrientationTargetingEnum:{values:{Both:0,Portrait:1,Landscape:2}},ProtoLineItemSkippabilityType:{values:{AllowPublisherToDetermineSkippability:0,RequirePublisherToAllowNonSkipAdsShorterThan:1,NotApplicable:2}},ProtoContextualTargetingLevelEnum:{values:{Media:0,Page:1,Both:2}},FloorPriceBypassReasonEnum:{values:{MinCpm:0,FixedCpm:1,MaxBidPrice:2,VideoOrBannerMin:3,PubMinFloor:4,AdvMinFloor:5,BidInHand:6,NoPredictionFound:7}},ProtoPlayerPlaybackModeEnum:{values:{Autoplay:0,ScrollToPlay:1,ClickToPlay:2}},ProtoPlayerCloseButtonMode:{values:{Off:0,OnHover:1,OnHoverAfterFirstAd:2,AlwaysOn:3}},ProtoPlayerFloatingMode:{values:{Off:0,OnPageLoad:1,AfterInView:2,Always:3}},ProtoPlayerSoundMode:{values:{Mute:0,On:1,Hover:2}},ProtoPlayerInsertMode:{values:{WithinContainer:0,BeforeContainer:1,AfterContainer:2,ReplaceContainer:3,HideContainer:4}},ProtoAdViewabilityPolicy:{values:{Default:0,Strict:1}},ProtoSharingDestination:{values:{Facebook:0,Twitter:1,LinkedIn:2}},ProtoFloatingFixedPositionMode:{values:{Page:0,Element:1}},ProtoPositionMode:{values:{BottomRight:0,BottomLeft:1,TopRight:2,TopLeft:3}},ProtoAdPlaybackMode:{values:{Autoplay:0,ScrollToPlay:1}},ProtoFloatingAppendLocationEnum:{values:{Above:0,Below:1,Within:2}},ProtoPlayerAdSkippability:{values:{IfLongerThan:0,Always:1,NoRestrictions:2}},ProtoVideoQuality:{values:{Auto:0,High1080p:1,High720p:2,Medium360p:3}},ProtoImplementationType:{values:{Web:0,Amp:1}},ProtoAdBreakTypeEnum:{values:{None:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdSlotAdTypeEnum:{values:{SingleAd:0,AdPod:1}},ProtoPlayerSkippabilityType:{values:{AllowNonSkipAdsIfTheyAreShorterThan:0,RequireAdsToBeSkippable:1}},ProtoBandwidthLoggingEnum:{values:{Disabled:0,Enabled:1,SaaS:2}},ProtoNonlinearRequestType:{values:{Banner:0,Video:1}}})})?s.apply(i,n):s)||(t.exports=r)},3204:t=>{"use strict";t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 22"><path d="M26,22H0V0H31.93L32,16A6,6,0,0,1,26,22Z" style="fill:#ffc800;fill-rule:evenodd"/><path d="M12,5.29h0L16.45,16.7H14.83l-1.06-2.85H8.86l-1,2.85H6.21L10.6,5.31h0Zm5.89,11.42V5.29h3.63A5.52,5.52,0,0,1,26.65,11a5.33,5.33,0,0,1-4.93,5.7H17.89Zm1.46-1.36h2.17c1.77,0,3.7-1.49,3.7-4.35s-1.93-4.28-3.7-4.28H19.35Zm-8-8.16-2,5.24h3.86Z" style="fill-rule:evenodd"/></svg>\n'},3653:t=>{"use strict";t.exports='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="#FFF" fill-rule="evenodd"><rect class="cnx-live-icon-svg-rectangle" transform="rotate(90 22.06 21.43)" x="20.059" y="15.929"/><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill-rule="nonzero" opacity=".5"/><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill-rule="nonzero" opacity=".5" transform="matrix(-1 0 0 1 12.626 0)"/></g></svg>'},1505:t=>{"use strict";t.exports='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="nonzero"><path d="M22 15.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13z" fill="#FFF"/><path d="M22 18a4 4 0 110 8 4 4 0 010-8z" fill="#FF4047"/><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill="#FFF"/><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill="#FFF" transform="matrix(-1 0 0 1 12.626 0)"/></g></svg>'},2040:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z" fill-rule="evenodd"/></svg>\n'},3475:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg"><g stroke-width="3" viewBox="0 0 32 32"><circle class="cnx-svg-circle-stroke" cx="16" cy="17" r="14"/></g></svg>\n'},1215:t=>{"use strict";t.exports='<svg viewBox = "0 0 22 22" class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" ><path d="M18 5.4L16.6 4 11 9.6 5.4 4 4 5.4 9.6 11 4 16.6 5.4 18l5.6-5.6 5.6 5.6 1.4-1.4-5.6-5.6z"/></svg>\n'},5522:t=>{"use strict";t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 73 18"><path d="M32.266 8.293c-.105.902-.439 1.6-1.002 2.092s-1.303.732-2.233.732c-1.008 0-1.816-.361-2.426-1.084s-.908-1.689-.908-2.9v-.82c0-.793.141-1.49.422-2.092s.688-1.062 1.207-1.383 1.121-.486 1.805-.486c.906 0 1.633.254 2.18.762s.865 1.203.955 2.098h-1.131c-.098-.68-.311-1.172-.639-1.477s-.779-.457-1.365-.457c-.719 0-1.283.266-1.693.797s-.609 1.287-.609 2.268v.826c0 .926.193 1.662.58 2.209s.928.82 1.623.82c.625 0 1.104-.141 1.436-.422s.559-.779.668-1.482h1.131zM34.815 11h-1.084V2h1.084v9zm1.453-3.229c0-.621.121-1.18.363-1.676s.586-.879 1.02-1.148a2.79 2.79 0 0 1 1.494-.404c.863 0 1.561.299 2.092.897s.803 1.393.803 2.385V7.9c0 .617-.119 1.172-.357 1.664a2.67 2.67 0 0 1-1.014 1.143c-.437.273-.941.41-1.512.41-.859 0-1.557-.299-2.092-.896s-.797-1.389-.797-2.373v-.076zm1.09.129c0 .703.162 1.268.486 1.693a1.57 1.57 0 0 0 1.312.639c.551 0 .988-.215 1.313-.645s.486-1.039.486-1.816c0-.695-.166-1.258-.498-1.687a1.56 1.56 0 0 0-1.312-.65c-.535 0-.967.213-1.295.639s-.492 1.035-.492 1.828zm9.732 1.418c0-.293-.111-.52-.334-.68s-.604-.305-1.154-.422-.982-.258-1.307-.422-.559-.359-.715-.586-.229-.496-.229-.809c0-.52.219-.959.656-1.318s1.004-.539 1.688-.539c.719 0 1.301.186 1.746.557s.674.846.674 1.424h-1.09c0-.297-.127-.553-.381-.768s-.566-.322-.949-.322c-.395 0-.703.086-.926.258a.81.81 0 0 0-.334.674c0 .262.104.459.311.592s.58.26 1.119.381.983.266 1.318.434.584.371.744.609a1.5 1.5 0 0 1 .246.861 1.63 1.63 0 0 1-.68 1.365c-.453.34-1.041.51-1.764.51-.508 0-.957-.09-1.348-.27s-.697-.43-.92-.75a1.84 1.84 0 0 1-.328-1.049h1.084c.02.363.164.652.433.867s.633.316 1.078.316c.41 0 .738-.082.984-.246a.77.77 0 0 0 .375-.668zm5.127 1.799c-.859 0-1.559-.281-2.098-.844s-.809-1.322-.809-2.267v-.199c0-.629.119-1.189.358-1.682s.578-.883 1.008-1.16a2.56 2.56 0 0 1 1.406-.422c.824 0 1.465.271 1.922.814s.686 1.32.686 2.332v.451h-4.295c.016.625.197 1.131.545 1.518s.797.574 1.336.574c.383 0 .707-.078.973-.234a2.44 2.44 0 0 0 .697-.621l.662.516c-.531.816-1.328 1.225-2.391 1.225zm-.135-5.684a1.44 1.44 0 0 0-1.102.481c-.297.316-.48.762-.551 1.336h3.176v-.082c-.031-.551-.18-.977-.445-1.277s-.625-.457-1.078-.457zM62.84 11c-.062-.125-.113-.348-.152-.668-.504.523-1.105.785-1.805.785-.625 0-1.139-.176-1.541-.527a1.71 1.71 0 0 1-.598-1.348c0-.66.25-1.172.75-1.535s1.211-.551 2.121-.551h1.055v-.498c0-.379-.113-.68-.34-.902s-.561-.34-1.002-.34c-.387 0-.711.098-.973.293s-.393.432-.393.709h-1.09c0-.316.111-.621.334-.914s.531-.531.914-.703.811-.258 1.272-.258c.73 0 1.303.184 1.717.551s.629.865.645 1.506v2.918c0 .582.074 1.045.223 1.389V11H62.84zm-1.799-.826c.34 0 .662-.088.967-.264s.525-.404.662-.686v-1.3h-.85c-1.328 0-1.992.389-1.992 1.166 0 .34.113.605.34.797s.517.287.873.287zm4.148-2.396c0-.973.23-1.754.691-2.344a2.18 2.18 0 0 1 1.811-.891c.742 0 1.33.254 1.764.762V2h1.084v9h-.996l-.053-.68c-.434.531-1.037.797-1.811.797a2.17 2.17 0 0 1-1.799-.902c-.461-.601-.691-1.387-.691-2.355v-.082zm1.084.123c0 .719.148 1.281.445 1.687s.707.609 1.23.609c.688 0 1.189-.309 1.506-.926V6.359a1.59 1.59 0 0 0-1.494-.896c-.531 0-.945.205-1.242.615s-.445 1.018-.445 1.822zM16 1.41L14.59 0 9 5.59 3.41 0 2 1.41 7.59 7 2 12.59 3.41 14 9 8.41 14.59 14 16 12.59 10.41 7 16 1.41z"/></svg>'},9479:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill-rule="evenodd"><path d="M16.6 15a1.58 1.58 0 0 0-1.6 1.6V22h2v-5h5v-2h-5.4zM17 2h-2v5.4A1.58 1.58 0 0 0 16.6 9H22V7h-5V2zM7.4 15A1.58 1.58 0 0 1 9 16.6V22H7v-5H2v-2h5.4zM7 2h2v5.4A1.58 1.58 0 0 1 7.4 9H2V7h5V2z"/></svg>\n'},1954:t=>{"use strict";t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path style="opacity:0.8598999977111816;fill:#a0a0a0" d="M3.85,11a.58.58,0,0,1-.6-.6V8.8H1.05A1.11,1.11,0,0,1,0,7.7V1.1A1.11,1.11,0,0,1,1.05,0h8.8A1.11,1.11,0,0,1,11,1.1V7.7a1.11,1.11,0,0,1-1.1,1.1H6.45l-2,2a.52.52,0,0,1-.4.2h-.2m.6-3.3V9.4l1.7-1.7H10V1.1H1.15V7.7h3.3M2.25,2.8h6.6V3.9H2.25V2.8m0,2.1h4.9V6H2.25Z"/></svg>'},7089:t=>{"use strict";t.exports='<svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd"><path d="M5 21.453c2.022 1.627 4.6 2.602 7.387 2.602 3.973 0 7.485-1.967 9.622-4.977l-4.596-3.34a3.87 3.87 0 0 0-4.548 0L5 21.453zM22 4.977A11.75 11.75 0 0 0 12.387 0 11.74 11.74 0 0 0 5 2.602l7.9 5.74a3.81 3.81 0 0 0 4.479 0l4.63-3.364zm1.563 11.395c.494-1.3.767-2.712.767-4.186S24.057 9.3 23.563 8l-3.858 2.803a1.71 1.71 0 0 0 0 2.766l3.858 2.803z" fill="#fff"/><path d="M2.378 5c-.024-.017-.057-.012-.074.01A11.74 11.74 0 0 0 0 12.025a11.74 11.74 0 0 0 2.304 7.004c.017.023.05.028.074.01l8.013-5.822c.81-.59.81-1.797 0-2.386L2.378 5z" fill="#09f"/></svg>\n'},3409:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.6 3H10v2H5v5H3V4.6A1.58 1.58 0 0 1 4.6 3zM5 14v5h5v2H4.6A1.58 1.58 0 0 1 3 19.4V14h2zM19.4 3A1.58 1.58 0 0 1 21 4.6V10h-2V5h-5V3h5.4zM19 14h2v5.4a1.58 1.58 0 0 1-1.6 1.6H14v-2h5v-5z" fill-rule="evenodd"/></svg>\n'},889:t=>{"use strict";t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M14.2,0A5.8,5.8,0,0,1,20,5.8v8.4A5.8,5.8,0,0,1,14.2,20H5.8A5.8,5.8,0,0,1,0,14.2V5.8A5.8,5.8,0,0,1,5.8,0ZM2,5.6v8.8A3.59,3.59,0,0,0,5.6,18h8.8A3.59,3.59,0,0,0,18,14.4V5.6A3.59,3.59,0,0,0,14.4,2H5.6A3.59,3.59,0,0,0,2,5.6Zm14.5-.8a1.3,1.3,0,1,1-1.3-1.3A1.32,1.32,0,0,1,16.5,4.8ZM15,10a5,5,0,1,1-5-5A5,5,0,0,1,15,10ZM10,7a3,3,0,0,0-3,3,3,3,0,0,0,3,3,3,3,0,0,0,3-3A3,3,0,0,0,10,7Z"/></svg>'},6514:t=>{"use strict";t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M5.55,9.4h0C2.85,6.8,1.15,5,1.15,3.3a2,2,0,0,1,1.9-2.1,2.28,2.28,0,0,1,2,1.4h1a2.17,2.17,0,0,1,2-1.4A2,2,0,0,1,10,3.3c0,1.7-1.8,3.4-4.4,6.1ZM8,0a3.34,3.34,0,0,0-2.5,1.2A3.13,3.13,0,0,0,3.05,0a3.09,3.09,0,0,0-3,3.3c0,2.3,1.9,4.1,4.7,6.9l.8.8.8-.8c2.8-2.8,4.7-4.7,4.7-6.9A3.16,3.16,0,0,0,8,0Z" style="fill:#a0a0a0;opacity:0.8598999977111816"/></svg>'},89:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 22 22"><path d="M11 7c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" /></svg>\n'},4670:t=>{"use strict";t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="2 2 20 20"><path d="M14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3m-2 16H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7h-2v7z"/></svg>'},1639:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 21H3V3h6v18zm12 0h-6V3h6v18z" fill-rule="evenodd"/></svg>\n'},834:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 4v16l16-8z" fill-rule="evenodd"/></svg>\n'},4562:t=>{"use strict";t.exports='<svg xmlns="http://www.w3.org/2000/svg" class="cnx-color-accent cnx-quote-icon" width="13" height="10" viewBox="0 0 13 10"><path d="M7 6.9C7 6.2 7.1 5.5 7.3 4.7 7.5 4 7.9 3.4 8.4 2.8 8.8 2.2 9.5 1.7 10.2 1.2 11 0.7 11.9 0.3 13 0L13 1.5C11.8 1.9 10.9 2.3 10.4 2.8 9.8 3.4 9.5 4 9.5 4.7 9.5 4.9 9.6 5.1 9.7 5.2 9.9 5.4 10 5.5 10.2 5.7 10.4 5.8 10.6 5.9 10.9 6 11.1 6.1 11.3 6.3 11.5 6.4 11.7 6.6 11.9 6.8 12 7 12.1 7.3 12.2 7.6 12.2 7.9 12.2 8.6 12 9.1 11.5 9.5 11.1 9.8 10.5 10 9.8 10 9.5 10 9.1 9.9 8.8 9.8 8.4 9.7 8.1 9.5 7.8 9.2 7.6 9 7.4 8.6 7.2 8.2 7.1 7.9 7 7.4 7 6.9ZM0 6.9C0 6.2 0.1 5.5 0.3 4.7 0.5 4 0.9 3.4 1.4 2.8 1.8 2.2 2.5 1.7 3.2 1.2 4 0.7 4.9 0.3 6 0L6 1.5C4.8 1.9 3.9 2.3 3.4 2.8 2.8 3.4 2.5 4 2.5 4.7 2.5 4.9 2.6 5.1 2.7 5.2 2.8 5.4 3 5.5 3.2 5.7 3.4 5.8 3.6 5.9 3.9 6 4.1 6.1 4.3 6.3 4.5 6.4 4.7 6.6 4.9 6.8 5 7 5.1 7.3 5.2 7.6 5.2 7.9 5.2 8.6 5 9.1 4.5 9.5 4.1 9.8 3.5 10 2.8 10 2.4 10 2.1 9.9 1.7 9.8 1.4 9.7 1.1 9.5 0.8 9.2 0.6 9 0.4 8.6 0.2 8.2 0.1 7.9 0 7.4 0 6.9Z"/></svg>\n'},4368:t=>{"use strict";t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 12"><polygon points="0 5 16.17 5 12.59 1.41 14 0 20 6 14 12 12.59 10.59 16.17 7 0 7 0 5"/></svg>'},9335:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg"><path d="M8.6 16.6l4.58-4.6L8.6 7.4 10 6l6 6-6 6-1.4-1.4z"/></svg>\n'},8808:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.9 12.7c.05-.23.1-.46.1-.7s-.04-.47-.1-.7l7.05-4.1c.54.5 1.25.8 2.04.8 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.1.7L8.04 9.8C7.5 9.3 6.8 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.8 0 1.5-.3 2.04-.8l7.12 4.16a2.82 2.82 0 0 0-.08.65c0 1.6 1.3 2.92 2.92 2.92s2.92-1.3 2.92-2.92-1.3-2.92-2.92-2.92z" fill-rule="evenodd"/></svg>\n'},8757:t=>{"use strict";t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12"><path style="opacity:0.8598999977111816;fill:#a0a0a0"d="M6.05,11a5,5,0,0,0,5-5,5,5,0,0,0-5-5,5,5,0,0,0-5,5,5,5,0,0,0,5,5m0-11a5.6,5.6,0,0,1,4.2,1.8A6.37,6.37,0,0,1,12.05,6a6,6,0,0,1-12,0,6,6,0,0,1,6-6m0,3V5.9l3,1.5-.5.6L5.05,6.3V3Z"/></svg>'},9040:t=>{"use strict";t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule="evenodd"/></svg>'}},i={},e,s,n,r,o;function h(e){var s=i[e];if(void 0!==s)return s.exports;var n=i[e]={id:e,loaded:!1,exports:{}};return t[e].call(n.exports,n,n.exports,h),n.loaded=!0,n.exports}h.m=t,e=[],h.O=(t,i,s,n)=>{if(!i){var r=1/0;for(l=0;l<e.length;l++){for(var[i,s,n]=e[l],o=!0,a=0;a<i.length;a++)(!1&n||r>=n)&&Object.keys(h.O).every((t=>h.O[t](i[a])))?i.splice(a--,1):(o=!1,n<r&&(r=n));if(o){e.splice(l--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[i,s,n]},h.F={},h.E=t=>{Object.keys(h.F).map((i=>{h.F[i](t)}))},h.n=t=>{var i=t&&t.B?()=>t.default:()=>t;return h.d(i,{a:i}),i},n=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,h.t=function(t,i){if(1&i&&(t=this(t)),8&i)return t;if("object"==typeof t&&t){if(4&i&&t.B)return t;if(16&i&&"function"==typeof t.then)return t}var e=Object.create(null);h.r(e);var r={};s=s||[null,n({}),n([]),n(n)];for(var o=2&i&&t;"object"==typeof o&&!~s.indexOf(o);o=n(o))Object.getOwnPropertyNames(o).forEach((i=>r[i]=()=>t[i]));return r.default=()=>t,h.d(e,r),e},h.d=(t,i)=>{for(var e in i)h.o(i,e)&&!h.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},h.f={},h.e=t=>Promise.all(Object.keys(h.f).reduce(((i,e)=>(h.f[e](t,i),i)),[])),h.u=t=>{if("hls"===t)return"hls.5b3b785f487abbe00eee.js"},h.miniCssF=t=>{},h.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),h.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),r={},o="Connatix.Player:",h.l=(t,i,e,s)=>{if(r[t])r[t].push(i);else{var n,a;if(void 0!==e)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var d=c[l];if(d.getAttribute("src")==t||d.getAttribute("data-webpack")==o+e){n=d;break}}n||(a=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,h.nc&&n.setAttribute("nonce",h.nc),n.setAttribute("data-webpack",o+e),n.src=t),r[t]=[i];var u=(i,e)=>{n.onerror=n.onload=null,clearTimeout(p);var s=r[t];if(delete r[t],n.parentNode&&n.parentNode.removeChild(n),s&&s.forEach((t=>t(e))),i)return i(e)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),a&&document.head.appendChild(n)}},h.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"B",{value:!0})},h.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;h.g.importScripts&&(t=h.g.location+"");var i=h.g.document;if(!t&&i&&(i.currentScript&&(t=i.currentScript.src),!t)){var e=i.getElementsByTagName("script");e.length&&(t=e[e.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),h.p=t})(),(()=>{var t={"connatix.playspace":0};h.f.j=(i,e)=>{var s=h.o(t,i)?t[i]:void 0;if(0!==s)if(s)e.push(s[2]);else{var n=new Promise(((e,n)=>s=t[i]=[e,n]));e.push(s[2]=n);var r=h.p+h.u(i),o=new Error;h.l(r,(e=>{if(h.o(t,i)&&(0!==(s=t[i])&&(t[i]=void 0),s)){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;o.message="Loading chunk "+i+" failed.\n("+n+": "+r+")",o.name="ChunkLoadError",o.type=n,o.request=r,s[1](o)}}),"chunk-"+i,i)}},h.F.j=i=>{if(!h.o(t,i)||void 0===t[i]){t[i]=null;var e=document.createElement("link");h.nc&&e.setAttribute("nonce",h.nc),e.rel="prefetch",e.as="script",e.href=h.p+h.u(i),document.head.appendChild(e)}},h.O.j=i=>0===t[i];var i=(i,e)=>{var s,n,[r,o,a]=e,c=0;if(r.some((i=>0!==t[i]))){for(s in o)h.o(o,s)&&(h.m[s]=o[s]);if(a)var l=a(h)}for(i&&i(e);c<r.length;c++)n=r[c],h.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return h.O(l)},e=self.webpackChunkConnatix_Player=self.webpackChunkConnatix_Player||[];e.forEach(i.bind(null,0)),e.push=i.bind(null,e.push.bind(e))})(),h.O(0,["connatix.playspace"],(()=>{h.E("hls")}),5);var a={};(()=>{"use strict";h(8660);var t=h(45);let i=`//cds.connatix.com/p/${t.g.version}/`;h.p=i;var e,s=h(7726),n=h(7272),r=(h(6450),h(289)),o=h(8804),a=h(5880),c=h(782),l=h(3030),d=h(2820);!function(t){t.Deprecation="deprecation",t.Intervention="intervention",t.Crash="crash"}(e||(e={}));class u{constructor(t,i,e){this.Ue=t,this.ca=i,this.la=e,this.da=!1,this.ua=!1,this.pa=()=>{"hidden"===this.Ue.document.visibilityState&&this.fa()},this.fa=()=>{if(this.da||!this.ga)return;const t=this.ga.takeRecords();this.ma(t),this.da=!0},this.ma=t=>{t.filter((({body:t})=>"HeavyAdIntervention"===(null==t?void 0:t.id))).forEach((()=>{this.ca.trackHeavyAdIntervention(this.la)}))},this.Qh()}destroy(){this.ua&&(this.Ue.removeEventListener("pagehide",this.fa),this.Ue.removeEventListener("visibilitychange",this.pa))}ya(){return!!this.Ue.ReportingObserver}Qh(){this.ya()&&(this.ua=!0,this.ga=new this.Ue.ReportingObserver((t=>{this.ma(t)}),{buffered:!0,types:[e.Intervention]}),this.ga.observe(),this.Ue.addEventListener("pagehide",this.fa),this.Ue.addEventListener("visibilitychange",this.pa))}}var p=h(4280),f=h(497);class g extends a._{constructor(t,i,e,s,n){super(),this.mediator=t,this.playerModel=i,this.app=e,this.va=s,this._appSettings=n,this.macroElements={player:[]},this.ba=!1,this.xa={description:"{{description}}",title:"{{title}}",player:"{{player}}"},this.wa=null,this._a=500,this.createExperience(i,n),this.Pa=new u(i.global,this.app.services.TrackingService,{heavyAdBlockTypeEnum:r.ProtoHeavyAdBlockTypeEnum.Global}),this.Sa=new u(window,this.app.services.TrackingService,{heavyAdBlockTypeEnum:r.ProtoHeavyAdBlockTypeEnum.Script})}subscribeToEvents(){this.subscribe(c.Uh.Destroy,this.experience,(()=>{this.destroy()})),this.subscribe(c.Uh.CanStart,this.experience,(()=>{this.experience.start()})),this.subscribe(c.Xh.SessionRendered,this.experience,(()=>{this.va.wasPlayerReloaded||this.app.services.TrackingService.trackSessionRendered(p._.isBannerBlocked),this.mediator.publish(this,c.Xh.SessionRendered)})),this.subscribe(c.Xh.SessionView,this.experience,(()=>{this.va.wasPlayerInView||(this.app.services.TrackingService.trackSessionViewability(),this.mediator.publish(this,c.Xh.SessionView))})),Object.values(this.experience.events).forEach((t=>{this.subscribe(t,this.experience,(i=>{this.experienceApi.trigger(t,i.payload)}))}))}updateMacroContent(t,i){t&&t.forEach((t=>{t.textContent=i}))}ue(){this.playerModel.css&&this.app.services.GlobalDomUtilsService.addCssString(this.playerModel.css,`cnx-custom-css-${this.app.config.appId}`)}Aa(t){return`<cnx>${t}</cnx>`.replace(/{\{([^}]+)}}/g,"<cnx-span>$&</cnx-span>")}Ia(){if(this.experienceContainer=this.ka(),this.playerModel.html){const t=this.app.services.GlobalDomUtilsService.createElementByString(this.Aa(this.playerModel.html));this.Ca(t);const i=this.macroElements.player[0];if(!i)throw Error("player macro was not found");i.innerHTML="",i.parentNode.insertBefore(this.experienceContainer,i),i.parentNode.removeChild(i);(0,l.Sz)(t.children).forEach((t=>{this.playerModel.targetContainer.parentNode.insertBefore(t,this.playerModel.targetContainer)}))}else this.playerModel.targetContainer.parentNode.insertBefore(this.experienceContainer,this.playerModel.targetContainer);this.playerModel.targetContainer.parentElement.removeChild(this.playerModel.targetContainer)}ka(){const t=this.app.config.isMobile?d.s6.Mobile:d.s6.Desktop;return this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${d.sN.MainContainer} ${t} ${this.Ta}"></cnx>`)}Ca(t){(0,l.Sz)(t.children).forEach((t=>{t.children.length>0&&this.Ca(t),Object.keys(this.xa).forEach((i=>{const e=this.xa[i];t.textContent.includes(e)&&this.Ma(i,t)}))}))}Ma(t,i){this.macroElements[t]||(this.macroElements[t]=[]),this.macroElements[t].push(i),i.textContent=""}Ea(){null!==this.wa&&(clearInterval(this.wa),this.wa=null)}init(t){this.ue(),this.Ia();const i=this.app.config.device;return this.isSupportedBreakpoint(i)?(this.subscribeToEvents(),this.experience.Ba(this.playerModel,this.app,this.experienceContainer,t),this.wa=setInterval((()=>{this.ba?this.Ea():this.app.services.GlobalDomUtilsService.isDetachedFromDOM(this.experienceContainer)&&(this.destroy(),(0,s.n)({message:"player_removed_from_DOM",level:s.D.INFO}))}),this._a),!0):(this.destroy(),!1)}getApiMethods(){return this.experienceApi.getApiMethods()}get playerContainer(){return this.experienceContainer}destroy(){try{f.S.playerDestroyed=!0,this.ba=!0,this.Ea(),this.app.services.TrackingService.destroy(),this.app.services.ResizeObserver.destroy(),this.app.services.ViewabilityService.destroy(),this.app.services.InteractionService.destroy(),this.experienceApi.setDestroyed(),this.unsubscribeAll(this.experience),this.experience&&(this.experience.destroy(),this.experience=null),this.experienceContainer.parentNode&&this.experienceContainer.parentNode.removeChild(this.experienceContainer),this.Pa.destroy(),this.Sa.destroy()}catch(t){(0,s.n)({callStack:t.stack,level:s.D.WARN,message:"Renderer_destroy",exception:t.message})}}}var m,y,v=h(5055);!function(t){t[t.DirectionIn=0]="DirectionIn",t[t.DirectionOut=1]="DirectionOut",t[t.FadeIn=2]="FadeIn"}(m||(m={})),function(t){t.Float="float",t.Embed="embed"}(y||(y={}));const b=.5;var x,w,_,P,S,A=h(308),I=h(9115),k=h(9078);!function(t){t[t.None=0]="None",t[t.Portrait=1]="Portrait",t[t.Landscape=2]="Landscape"}(x||(x={})),function(t){t.Play="play",t.Playing="playing",t.Pause="pause",t.Mute="mute",t.Unmute="unmute",t.Canplay="canplay",t.Ended="ended",t.Timeupdate="timeupdate",t.Seeking="seeking",t.Seeked="seeked",t.Volumechange="volumechange",t.Durationchange="durationchange",t.Fullscreen="fullscreen",t.LoadedData="loadeddata",t.LoadedMetadata="loadedmetadata",t.Error="error"}(w||(w={})),function(t){t[t.Auto=0]="Auto",t[t.Strict=1]="Strict"}(_||(_={})),function(t){t[t.PlayingState=0]="PlayingState",t[t.PausedState=1]="PausedState",t[t.PrerollState=2]="PrerollState",t[t.PostrollState=3]="PostrollState",t[t.StoppedState=4]="StoppedState",t[t.ReplayState=5]="ReplayState",t[t.HiddenState=6]="HiddenState",t[t.BufferingState=7]="BufferingState",t[t.LiveStreamStarting=8]="LiveStreamStarting",t[t.LiveStreamEnded=9]="LiveStreamEnded",t[t.LiveStreamStopped=10]="LiveStreamStopped",t[t.LiveStreamNotSupported=11]="LiveStreamNotSupported"}(P||(P={})),function(t){t.H264="h264",t.Hevc="hevc"}(S||(S={}));const C="playError",T="newVideo",M="buffering",E="buffered",B="levelSwitching",L="endOfStream",O="VideoQualityChanged",R="CurrentQuality",D="QualityListLoaded";var F;!function(t){t[t.Low144p=144]="Low144p",t[t.Low240p=240]="Low240p",t[t.Medium360p=360]="Medium360p",t[t.Medium480p=480]="Medium480p",t[t.High720p=720]="High720p",t[t.High1080p=1080]="High1080p"}(F||(F={}));function $(t,i){const e=t.length-1;return{currentIndex:i,nextIndex:i===e?0:i+1,prevIndex:0===i?e:i-1,firstIndex:0,lastIndex:e}}function j(t,i){return!(i.skippability===r.ProtoPlayerSkippabilityType.AllowNonSkipAdsIfTheyAreShorterThan&&t<i.skipMin)}var V,N,U,H=h(7427);!function(t){t.PARALLEL_CALLS_DEFAULT=5,t.PARALLEL_WINS_DEFAULT=10,t.MAX_WINS_DEFAULT=-1,t.DEFAULT_DESIRED_BITRATE=1,t.REMOVE_BIDS_DEFAULT=!1,t.MID_SESSION_PREFETCH_MINIMUM_TIME=1e4,t.NON_LINEAR_MAX_HEIGHT_PERCENT=20,t.NON_LINEAR_MAX_WIDTH_PERCENT=80,t.DEFAULT_MAX_AD_DURATION=180}(V||(V={}));class q{constructor(t){this.La=t,this.Oa={breakType:r.ProtoAdBreakTypeEnum.None,currentPodNumber:0,maxAdSlotDuration:0,maxAdPodDuration:0,totalNumberOfAdSlots:0},this.Ra=null}get adBreaks(){return this.La}setNewBreak(t){this.La.forEach((i=>{i.types.forEach((e=>{(function(t,i){let e=!1;switch(t){case r.ProtoAdBreakTypeEnum.PreRoll:e=i===r.ProtoAdSlotsEnum.PreRoll;break;case r.ProtoAdBreakTypeEnum.MidRoll:e=i===r.ProtoAdSlotsEnum.MidRoll;break;case r.ProtoAdBreakTypeEnum.PostRoll:e=i===r.ProtoAdSlotsEnum.PostRoll}return e})(e,t)&&(this.Oa.currentPodNumber=i.numberOfAdSlots,this.Oa.maxAdSlotDuration=i.maxAdSlotDuration,this.Oa.maxAdPodDuration=i.maxAdPodDuration,this.Oa.totalNumberOfAdSlots=i.numberOfAdSlots)}))}))}adStarted(){this.Da(),0===this.Oa.currentPodNumber&&(this.Oa.currentPodNumber=this.Oa.totalNumberOfAdSlots),this.Oa.currentPodNumber--}endPod(){this.Da(),this.Oa.currentPodNumber=0}enterPodTimeout(t){this.Da(),this.Ra=setTimeout((()=>{this.Da(),t()}),5e3)}isInAdPod(){return this.Oa.currentPodNumber>0}isCurrentBreakInPod(){return this.Oa.totalNumberOfAdSlots>1}getMaxAdSlotDuration(){return this.Oa.maxAdSlotDuration}getMaxAdPodDuration(){return this.Oa.maxAdPodDuration}getMaxAdSlotPossibleDuration(){let t=0;for(let i=0;i<this.La.length;i++){if(0===this.La[i].maxAdSlotDuration)return 0;t=Math.max(t,this.La[i].maxAdSlotDuration)}return t}getCurrentSlotIndex(){return this.Oa.totalNumberOfAdSlots-this.Oa.currentPodNumber}getNextSlotIndex(){const t=this.getCurrentSlotIndex();return this.Oa.totalNumberOfAdSlots>t?t+1:1}getTotalNumberOfSlots(){return this.Oa.totalNumberOfAdSlots}isInPodTimeout(){return!!this.Ra}getAdBreakState(t){if(!(0,H.$K)(t))return this.Fa();const{adSlotDuration:i,adBreakType:e}=t;return{isAdPodBreak:this.isCurrentBreakInPod(),adPodSlotIndex:this.isCurrentBreakInPod()?this.getNextSlotIndex():0,maxAdDuration:Math.round(this.getMaxAdSlotDuration()/I.s_||V.DEFAULT_MAX_AD_DURATION),remainingAdDuration:Math.round(i/I.s_),sessionMaxAdDuration:Math.round(this.getMaxAdSlotPossibleDuration()/I.s_),adBreakType:e}}Fa(){let t=r.ProtoAdBreakTypeEnum.MidRoll;this.adBreaks.forEach((i=>{i.types.some((t=>t===r.ProtoAdBreakTypeEnum.PreRoll))&&(t=r.ProtoAdBreakTypeEnum.PreRoll)}));const i=this.getMaxAdSlotDuration();return this.getAdBreakState({adSlotDuration:i,adBreakType:t})}Da(){clearTimeout(this.Ra),this.Ra=null}}!function(t){t.ShowLinearEvent="showLinearEvent",t.HideLinearEvent="hideLinearEvent",t.PauseLinearEvent="pauseLinearEvent",t.ResumeLinearEvent="resumeLinearEvent",t.SkipLinearEvent="skipLinearEvent"}(N||(N={})),function(t){t.ShowNonLinearEvent="showNonLinearEvent",t.HideNonLinearEvent="hideNonLinearEvent"}(U||(U={}));const z="midRollCapped",W="totalAdBreakDurationExpired",G="enableLinearAds",J="disableLinearAds",Q="ForceStopAdSlot",Y="ForceStopAdPod",X="linearAdOpportunity",Z="AdPodRemainingTime",K="disableNonLinearAds",tt="enableNonLinearAds";var it=h(1561);class et{constructor(t,i,e,s){this.$a=t,this.ja=s,this.Va=this.Na(e,i)}Na(t,i){return Object.assign({},t[i]||t[r.ProtoDeviceType.Smartphone])}updateWidth(t){const i=this.Ua(t);i!==this.currentBreakpointClass&&((0,it.IV)(this.$a,this.currentBreakpointClass),(0,it.cn)(this.$a,i),this.currentBreakpointClass=i)}Ua(t){switch(!0){case t>=this.Va.xxl:return this.ja.Xxl;case t>=this.Va.xl:return this.ja.Xl;case t>=this.Va.lg:return this.ja.Lg;case t>=this.Va.md:return this.ja.Md;case t>=this.Va.sm:return this.ja.Sm;case t>=this.Va.xs:return this.ja.Xs;default:return this.ja.Xxs}}}class st{constructor(t,i,e,s,n,r=0){this.Ha=t,this.Gt=i,this.$a=e,this.qa=s,this._r=n,this.za=r,this.Wa=void 0,this.Ga=null,this.Ja=!1,this.Qa=()=>{if(!this.Wa||!this.Ya)return;const t=this.Xa(),i=!!this.Ya;this.Za(t,i)},this.Ka=()=>{var t;if(this.tc()&&(this.Gt.width=null===(t=this.Ya)||void 0===t?void 0:t.clientWidth),this.ic(),this.Wa){const t=!1,i=this.Xa();this.Za(i,t)}},this.ic=()=>{this.ec()?!this.sc||this.Wa||this.Ja?this.rc():this.oc():this.Wa&&this.hc()},this.ac=t=>{if(this.cc(t.propertyName))switch(this.transitionState){case m.DirectionIn:this.transitionState=void 0,this.lc();break;case m.DirectionOut:this.transitionState=void 0,this.dc();break;case m.FadeIn:this.transitionState=void 0,this.fc()}}}get transitionState(){return this.gc}set transitionState(t){this.gc===m.FadeIn&&this.mc(d.jG.FadeInBase,d.jG.FadeIn),this.gc=t}yc(...t){(0,it.cn)(this.$a,...t)}mc(...t){(0,it.IV)(this.$a,...t)}rc(){this.qa!==r.ProtoDeviceType.Smartphone&&(this.$a.style.width=`${this.Gt.width}px`);const t=this.$a.getBoundingClientRect().width;this.$a.style.height=this.Gt.getHeight(t)}vc(){return(0,l.d3)(this.qa,this.Gt.floatingDeviceMode)}bc(){this._r.addEventListenerOnGlobal("scroll",this.Qa)}xc(){this._r.removeEventListenerOnGlobal("scroll",this.Qa)}wc(){this.Ya=this._r.querySelector(this.Gt.pageElement),this.Ya&&(clearInterval(this.Ga),this.Gt.width=this.Ya.clientWidth,this.ic(),this.Ha.on(this.Ya,this.Ka))}_c(){var t,i;const e=null===(t=this.Ya)||void 0===t?void 0:t.getBoundingClientRect().top;return this.Gt.appendLocation===r.ProtoFloatingAppendLocationEnum.Above?e-this.$a.offsetHeight-this.Gt.floatingYAxisPadding:this.Gt.appendLocation===r.ProtoFloatingAppendLocationEnum.Below?e+(null===(i=this.Ya)||void 0===i?void 0:i.offsetHeight)+this.Gt.floatingYAxisPadding:e}Pc(){this.Ga=setInterval((()=>{this.wc()}),500),this.wc()}tc(){return this.Gt.floatingPosition===r.ProtoFloatingFixedPositionMode.Element}cc(t){switch(this.transitionState){case m.DirectionIn:case m.DirectionOut:if("transform"===t)return!0;break;case m.FadeIn:if("opacity"===t)return!0}return!1}Sc(){this.$a.style.top="",this.$a.style.bottom="",this.$a.style.left="",this.$a.style.right="",this.$a.style.width="",this.$a.style.height="",this.$a.style.transform=""}dc(){this.Wa=!1,this.mc(d._7.MainClass,d._7.TransitionClass),this.Sc(),this.Ac()}Za({x:t,y:i},e){this.Ic(e);const s=()=>this.$a.style.transform=`translate(${t}px, ${i}px)`;e?(this._r.cancelRequestAnimationFrame(this.kc),this.kc=null,this.kc=this._r.requestAnimationFrameHelper((()=>{s()}))):s()}Ic(t){t?this.yc(d._7.TransitionClass):this.mc(d._7.TransitionClass)}Xa(){let t,i;if(this.tc()&&this.Ya){this.Cc();const e=this.Gt.isPositionedLeft?this.Gt.floatingGutterX:-this.Gt.floatingGutterX;t=this._r.getElementCoordinates(this.Ya).clientX+e;const s=this._c();return i=s<this.Gt.floatingGutterY?this.Gt.floatingGutterY:s,{x:t,y:i}}if(this.Gt.isPositionedLeft)t=this.Gt.floatingGutterX;else{t=this._r.getViewportWidth()-this.$a.offsetWidth-this.Gt.floatingGutterX}if(this.Gt.isPositionedTop)i=this.Gt.floatingGutterY;else{i=this._r.getViewportHeight()-this.$a.offsetHeight-this.Gt.floatingGutterY}return{x:t,y:i}}Mc(){const t=(this.Gt.floatingWidth||1e3)+20,i=this._r.getViewportWidth();return this.Gt.isPositionedLeft?-t:i+t}ec(){return(0,it.LT)(this.$a).document.body.getBoundingClientRect().width>=this.za}oc(){if(!this.Ec())return;this.tc()&&this.bc(),this.Wa=!0,this.transitionState=m.DirectionIn,this.yc(d._7.MainClass),this.rc();const t=this.Xa(),i=this.Mc();this.Bc(),this.Za({x:i,y:t.y},!1),(0,it.Tp)(this.$a);this.Za(t,!0)}Ec(){return!!this.ec()&&!(this.tc()&&(!this.Ya||this.Ya&&0===this.Ya.clientWidth))}Cc(){this.Ya&&(this._r.getElementCoordinates(this.Ya).clientX<this._r.getBodyDimensions().width/2?(this.Gt.isPositionedLeft=!0,this.Gt.isPositionedRight=!1):(this.Gt.isPositionedLeft=!1,this.Gt.isPositionedRight=!0))}hc(t=!0){t&&(this.transitionState=m.DirectionOut),this.tc()&&this.xc(),this.Oc();const{y:i}=this.Xa(),e=this.Mc();this.Za({y:i,x:e},t),t||this.dc()}Rc(){this.$a.addEventListener("transitionend",this.ac),this.Ha.on(this.$a,this.ic),this.Ha.on(this._r.getGlobalClosestTop().topFrame.document.body,this.Ka),this.tc()&&this.Pc()}Dc(){this.Ha.off(this.$a,this.ic),this.$a.removeEventListener("transitionend",this.ac),this.Ha.off(this._r.getGlobalClosestTop().topFrame.document.body,this.Ka),this.Ya&&(this.Ha.off(this.Ya,this.Ka),this.xc(),clearInterval(this.Ga))}Fc(t){void 0!==t.scrollPosition&&this.Gt.setScrollPosition(t.scrollPosition),(null==t?void 0:t.floatingWidth)&&(this.Gt.width=t.floatingWidth),(null==t?void 0:t.floatingGutterX)&&(this.Gt.gutterX=t.floatingGutterX),(null==t?void 0:t.floatingGutterY)&&(this.Gt.gutterY=t.floatingGutterY)}get isInFloating(){return this.Wa}}var nt,rt=h(6716);class ot extends st{constructor(t,i,e,s,n,r=0){super(t,e,i,s,n,r),this.sc=!0,this.$c=new rt.x}get onFloatingEnterStop(){return this.$c.asObservable()}Bc(){}lc(){this.$c.next()}Oc(){}Ac(){}fc(){}start(){this.vc()&&(this.yc(d._7.AlwaysFloating),super.Rc(),super.oc())}setFloatingSettings(t){this.Fc(t),this.start()}}class ht extends st{constructor(t,i,e,s,n,o,h=0){super(i,s,e,n,o,h),this.jc=t,this.Vc=!0,this.Nc=!0,this.Uc=!1,this.sc=!1,this.Hc=new rt.x,this.$c=new rt.x,this.qc=new rt.x,this.Wc=new rt.x,this.Gc=t=>{const i=this.jc.getIsTabInFocus();t&&this.isInFloating&&(this.sc=!1,this.hc()),this.Vc&&this.Gt.floatingMode===r.ProtoPlayerFloatingMode.AfterInView&&t&&(this.Vc=!1),!t&&!this.Vc&&this.Nc&&i&&(this.sc=!0,super.oc())},this.rc=()=>{this.isInFloating&&super.rc()}}get onFloatingEnterStart(){return this.Hc.asObservable()}get onFloatingEnterStop(){return this.$c.asObservable()}get onFloatingExitStart(){return this.qc.asObservable()}get onFloatingExitStop(){return this.Wc.asObservable()}isFloatingModeEnabled(){return this.Vc&&(this.enabled=!1),this.enabled}enableFloatingMode(){this.Vc=!1,this.Nc=!0,this.start()}disableFloatingMode(){this.Nc=!1,this.destroy()}setFloatingSettings(t){this.Fc(t),this.start()}hc(){const t=!this.Uc;super.hc(t)}Oc(){this.qc.next()}Ac(){this.Jc()}Bc(){this.Hc.next()}Jc(){this.transitionState=m.FadeIn,this.mc(d.jG.FadeIn),this.yc(d.jG.FadeInBase),(0,it.Tp)(this.$a),this.yc(d.jG.FadeIn)}lc(){this.$c.next()}fc(){this.mc(d.jG.FadeInBase,d.jG.FadeIn),this.Wc.next(),this.Ja&&super.Dc()}Qc(){this.jc.on(this.$a.parentElement,this.Gc,{threshold:b})}Yc(){this.jc.off(this.$a.parentElement,this.Gc)}start(){this.vc()&&(super.Rc(),this.Gt.floatingMode===r.ProtoPlayerFloatingMode.OnPageLoad&&(this.Vc=!1),this.Qc(),this.Gc(this.jc.check({element:this.$a.parentElement,threshold:b})))}canFloat(){return this.vc()&&this.Gt.floatingMode!==r.ProtoPlayerFloatingMode.Off}destroy(){this.isInFloating?(this.dc(),this.Ja=!0):super.Dc(),this.Yc()}get enabled(){return this.Nc}set enabled(t){this.Nc=t}fullscreenStateChange(t){this.Uc=t,t?this.Yc():this.Qc(),this.Gc(t)}}!function(t){t[t.Portrait=0]="Portrait",t[t.Landscape=1]="Landscape"}(nt||(nt={}));const at=nt;class ct{constructor(t){this.urlSuffixerService=t,this.Xc={},this.Zc=[]}getImage(t,i,e,s,n="",r=!1){return this.Kc=t,this.tl=(0,H.QM)(i)?i:"",this.il=e,this.el=s,this.sl=n,this.nl=r,this.ol()}ol(){const t=this.hl();if(t)return t;const i=this.Kc+this.sl,e=new Image;return e.src=this.urlSuffixerService.appendParamsToUrl(i),e.alt=this.tl,this.Xc[this.Kc]=this.Xc[this.Kc]||{},this.Xc[this.Kc][this.il]=this.Xc[this.Kc][this.il]||{},this.Xc[this.Kc][this.il][this.el]=this.Xc[this.Kc][this.il][this.el]||{},this.Xc[this.Kc][this.il][this.el][this.sl]=e,e}hl(){const t=this.al();if(t)return t;if(!this.nl)return;this.cl();const i=this.ll();if(i)return i;const e=this.dl();return e||void 0}cl(){const t=[];if(!this.Xc[this.Kc])return void(this.Zc=[]);const i=this.Xc[this.Kc],e=this.il>this.el?at.Landscape:at.Portrait;Object.keys(i).forEach((s=>{const n=parseInt(s,10);Object.keys(i[s]).filter((t=>!!i[s][t])).forEach((i=>{const s=parseInt(i,10);if((n>s?at.Landscape:at.Portrait)!==e)return;const r={area:n*s,img:this.ul(this.Kc,n,s)};t.push(r)}))})),this.Zc=[...t]}ul(t,i,e){if(this.Xc[t]&&this.Xc[t][i]&&this.Xc[t][i][e])return this.Xc[t][i][e][Object.keys(this.Xc[t][i][e])[0]]}al(){return this.Xc[this.Kc]&&this.Xc[this.Kc][this.il]&&this.Xc[this.Kc][this.il][this.el]&&this.Xc[this.Kc][this.il][this.el][this.sl]}ll(){if(0===this.Zc.length)return;const t=this.il*this.el,i=this.Zc.filter((({area:i})=>i>t)).sort(((t,i)=>t.area-i.area));return 0!==i.length?i[0].img:void 0}dl(){if(0===this.Zc.length)return;const t=this.il*this.el,i=this.Zc.filter((({area:i})=>i<t&&t/i<=1.3)).sort(((t,i)=>i.area-t.area));return 0!==i.length?i[0].img:void 0}}var lt,dt;!function(t){t.LINEAR="LINEAR",t.NONLINEAR="NONLINEAR"}(lt||(lt={})),function(t){t[t.Rtb=1]="Rtb",t[t.HeaderBidder=2]="HeaderBidder",t[t.Tam=3]="Tam"}(dt||(dt={}));const ut={[r.ProtoCreativeTypeEnum.Rtb]:dt.Rtb,[r.ProtoCreativeTypeEnum.HeaderBidder]:dt.HeaderBidder,[r.ProtoCreativeTypeEnum.Tam]:dt.Tam,[r.ProtoCreativeTypeEnum.TamDeal]:dt.Tam,[r.ProtoCreativeTypeEnum.TamPrivateAuction]:dt.Tam},pt={[lt.LINEAR]:[r.ProtoAdType.Video,r.ProtoAdType.Overlay],[lt.NONLINEAR]:[r.ProtoAdType.Nonlinear]};function ft(t,i){return t.filter((t=>pt[i].includes(t.adType)))}function gt(t){return(0,H.$K)(ut[t])}function mt(t,i){return t.find((t=>t.adManagerLineItem.protoLineItem.advertiserLineItemId===i)).adManagerLineItem}const yt=({playerSkippability:t,playerSkipMin:i,playerSkipAfter:e,lineItemSkippability:s,lineItemSkipMin:n})=>{let o={skippable:!0,skipafter:e};switch(t){case r.ProtoPlayerSkippabilityType.AllowNonSkipAdsIfTheyAreShorterThan:o=function({skippabitySettings:t,playerSkipMin:i,lineItemSkippability:e,lineItemSkipMin:s}){if(e===r.ProtoLineItemSkippabilityType.RequirePublisherToAllowNonSkipAdsShorterThan)s<i?t.skipmin=i:(t.skipmin=s,t.minDuration=s);else t.skipmin=i;return t}({skippabitySettings:o,playerSkipMin:i,lineItemSkippability:s,lineItemSkipMin:n});break;case r.ProtoPlayerSkippabilityType.RequireAdsToBeSkippable:s===r.ProtoLineItemSkippabilityType.RequirePublisherToAllowNonSkipAdsShorterThan&&(o.skipmin=n,o.minDuration=n)}return o};function vt(t,i){return t===r.ProtoAdType.Nonlinear&&i===r.ProtoNonlinearRequestType.Banner}var bt;!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Replay=2]="Replay",t[t.Volume=3]="Volume",t[t.Mute=4]="Mute",t[t.Unmute=5]="Unmute",t[t.Seek=6]="Seek",t[t.DraggingStart=7]="DraggingStart",t[t.DraggingStopped=8]="DraggingStopped",t[t.SeekingStart=9]="SeekingStart",t[t.SeekingStopped=10]="SeekingStopped",t[t.Expand=11]="Expand",t[t.Collapse=12]="Collapse",t[t.Quality=13]="Quality",t[t.Close=14]="Close",t[t.Next=15]="Next",t[t.Prev=16]="Prev",t[t.Settings=17]="Settings",t[t.CaptionOn=18]="CaptionOn",t[t.CaptionOff=19]="CaptionOff",t[t.CaptionUpdate=20]="CaptionUpdate",t[t.VolumeHoverStart=21]="VolumeHoverStart",t[t.VolumeHoverStopped=22]="VolumeHoverStopped",t[t.OverlayClick=23]="OverlayClick",t[t.UIHideStart=24]="UIHideStart",t[t.UIShowStart=25]="UIShowStart",t[t.UIEndShowHide=26]="UIEndShowHide",t[t.AboutClick=27]="AboutClick",t[t.ContextClick=28]="ContextClick",t[t.SettingsMenu=29]="SettingsMenu",t[t.HoverStart=30]="HoverStart",t[t.HoverEnd=31]="HoverEnd",t[t.StateChanged=32]="StateChanged",t[t.RebindComponent=33]="RebindComponent",t[t.SkipAd=34]="SkipAd",t[t.LogoClicked=35]="LogoClicked",t[t.ContextMenuOpen=36]="ContextMenuOpen",t[t.ContextMenuClose=37]="ContextMenuClose",t[t.CaptionMenu=38]="CaptionMenu",t[t.NonLinearClose=39]="NonLinearClose"}(bt||(bt={}));var xt=h(4959),wt=h(8423),_t=h(2231),Pt=h(6243),St=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};const At=["com.accuweather.android"],It=.05*I.s_;class kt extends a._{constructor(t,i,e){super(),this.mediator=t,this._appSettings=i,this.pl=e,this.fl=.01,this.gl=.5,this.ml=2e3,this.yl=0,this.vl=!1,this.bl=!1,this._l=!1,this.Pl=!1,this.Sl=!1,this.Al=!1,this.Il=!1,this.Us=r.ProtoAdSlotsEnum.PreRoll,this.kl=!1,this.Cl=!1,this.Tl=!1,this.Ml=!1,this.El=[],this.ki=[],this.Bl=[],this.Ll=0,this.Ol=t=>{this.Cl=t,t&&(this.app.services.ViewabilityService.off(this.$playerContainer,this.Ol),this.Rl())},this.Dl=t=>{t&&this.adHandler&&!this.Ml&&setTimeout((()=>{this.adHandler.resumeWithoutUserInteraction(this.Us)}),It)},this.Fl=()=>{this.isBelowSmBreakpoint(this.$experienceContainer.clientWidth)||(0,it.IV)(this.$experienceContainer,d.Gj.NoHeight),!this.bl&&this.$l()&&(this.mediator.publish(this,c.Uh.CanStart),this.app.services.ResizeObserver.off(this.$experienceContainer,this.Fl))},this.jl=t=>{const{playback:i,isFullscreenClose:e}=t;this.floatingModule&&(0,H.$K)(i)&&!e&&(this.floatingModule.enabled=i)},this.Vl=()=>{this.Nl(1)},this.Ul=()=>{this.Nl(0)},this.Hl=t=>{this.jl(t);const{playback:i}=t;(0,H.$K)(i)&&(i?(this.app.services.EventsStorageService.emitAdPlay(),this.Ml=!1):(this.app.services.EventsStorageService.emitAdPause(),this.Ml=!0))},this.ql=new ct(e)}zl(){}Wl(t,i,e){this.app.services.EventsStorageService.emitAdImpression(t,i,e)}Gl(t){this.app.services.EventsStorageService.emitAdComplete(t)}Jl(){}Ql(){}Yl(){}Zl(){}Kl(){}td(){}sd(){}nd(t){const i={state:t};this.app.services.EventsStorageService.emitAdStateChange(i)}rd(){const{clientWidth:t,clientHeight:i}=this.$playerContainer,e={width:t,height:i};this.app.services.EventsStorageService.emitPlayerResized(e)}od(){this.app.services.EventsStorageService.emitOnEnterFullscreen()}hd(){this.app.services.EventsStorageService.emitOnExitFullscreen()}dd(){this.app.services.EventsStorageService.emitOnPlayerCollapsed()}ud(){this.app.services.EventsStorageService.emitOnPlayerExpanded()}pd(t){this.fd(t),this.gd(t),this.yd(t),this.Us=t,this.vd(t)}gd(t){this.adHandler&&this.adHandler.adStateChange(t,this.bd.getMaxAdSlotDuration())}yd(t){this.xd.onAdStateChange(t,{maxAdPodDuration:this.bd.getMaxAdPodDuration(),maxAdSlotDuration:this.bd.getMaxAdSlotDuration()})}fd(t){this.bd.setNewBreak(t)}vd(t){this.nd(xt.V[t])}wd(){var t;null===(t=this.adHandler)||void 0===t||t.contentChanged(),this.xd.contentChanged()}_d(){var t;null===(t=this.adHandler)||void 0===t||t.contentEnded()}Pd(){var t,i,e,s,n,r;this.adHandler=this.Sd(),this.Id(),null===(t=this.adHandler)||void 0===t||t.onLinearImpressionPrice.subscribe((t=>{this.mediator.publish(this,v.Km.ImpressionPrice,{payload:t})})),null===(i=this.adHandler)||void 0===i||i.onNonLinearImpressionPrice.subscribe((t=>{this.mediator.publish(this,v.Km.ImpressionPrice,{payload:t})})),null===(e=this.adHandler)||void 0===e||e.onLinearImpressionRevenue.subscribe((t=>{this.mediator.publish(this,v.Km.ImpressionRevenue,{payload:t})})),null===(s=this.adHandler)||void 0===s||s.onNonLinearImpressionRevenue.subscribe((t=>{this.mediator.publish(this,v.Km.ImpressionRevenue,{payload:t})})),null===(n=this.adHandler)||void 0===n||n.onLinearExperienceEvent.subscribe((t=>{c.Uh.UserInteraction===t.type&&this.Hl(t.payload)}));const o=()=>{this.app.services.TrackingService.setAdStart(),this.Tl=!0,this.Ml=!1,this.Rl(),this.Cd.unsubscribe()};this.Cd=null===(r=this.adHandler)||void 0===r?void 0:r.onAdsEnable.subscribe((()=>{o()}))}Id(){this.Td(),this.Ed(),this.Bd()}Td(){this.Bl.push(this.adHandler.onVpaidEvent.subscribe((t=>{switch(t.type){case k.fI.AdImpression:{this.mediator.publish(this,v.Km.AdImpression,t.payload);const{adSourceData:i,customAdData:e,adType:s}=t.payload.payload;this.Wl(i,e,s);break}case k.fI.AdStopped:{if(this.mediator.publish(this,v.Km.AdStopped,t.payload),this.Il&&this.Ql(),!t.payload)return;const{adType:i}=t.payload.payload;this.Gl(i),this.app.services.EventsStorageService.emitAdStopped(i);break}case k.fI.AdError:{const{adType:i}=t.payload;this.mediator.publish(this,v.Km.AdError,t),this.app.services.EventsStorageService.emitAdError(i);break}case k.fI.AdSkipped:{const{adType:i}=t.payload.payload;this.mediator.publish(this,v.Km.AdSkipped,t.payload),this.app.services.EventsStorageService.emitAdSkipped(i),this.Gl(i),this.Il&&this.Ql();break}case k.fI.AdPaused:{const{adType:i}=t.payload.payload;this.app.services.TrackingService.setSessionPlayback(!1),this.app.services.EventsStorageService.emitAdPaused(i),this.mediator.publish(this,v.Km.AdPause,t.payload);break}case k.fI.AdPlaying:{const{adType:i}=t.payload.payload;this.app.services.TrackingService.setSessionPlayback(!0),this.app.services.EventsStorageService.emitAdPlaying(i),this.mediator.publish(this,v.Km.AdPlay,t.payload);break}case k.fI.AdVideoFirstQuartile:{const{adType:i}=t.payload.payload;this.mediator.publish(this,v.Km.AdCompleted25,t.payload),this.app.services.EventsStorageService.emitAdVideoFirstQuartile(i);break}case k.fI.AdVideoMidpoint:{const{adType:i}=t.payload.payload;this.mediator.publish(this,v.Km.AdCompleted50,t.payload),this.app.services.EventsStorageService.emitAdVideoMidpoint(i);break}case k.fI.AdVideoThirdQuartile:{const{adType:i}=t.payload.payload;this.mediator.publish(this,v.Km.AdCompleted75,t.payload),this.app.services.EventsStorageService.emitAdVideoThirdQuartile(i);break}case k.fI.AdVideoComplete:{const{adType:i}=t.payload.payload;this.mediator.publish(this,v.Km.AdCompleted100,t.payload),this.app.services.EventsStorageService.emitAdVideoComplete(i);break}case k.fI.AdClickThru:{const{adType:i}=t.payload.payload;this.mediator.publish(this,v.Km.AdClick,t.payload),this.app.services.EventsStorageService.emitAdClickThru(i);break}case k.fI.AdInteraction:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(i);break}case k.fI.AdUserAcceptInvitation:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(i);break}case k.fI.AdUserClose:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(i);break}case k.fI.AdUserMinimize:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(i);break}case k.fI.AdVideoStart:{const{adSourceData:i,adType:e}=t.payload,s={duration:i&&i.length,mediaPlayerVolume:this.getVolume()};this.app.services.EventsStorageService.emitAdVideoStart(s,e);break}case k.fI.AdLoaded:{const{payload:i}=t.payload,{adType:e}=i,{adLoadedData:s}=i;(null==s?void 0:s.skipOffset)<0&&(s.skipOffset=void 0);const n=this.Ld(s);this.app.services.EventsStorageService.emitAdLoaded(n,e);break}case k.fI.AdVolumeChange:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdVolumeChange(i);break}case k.fI.AdLog:}})))}Ed(){this.Bl.push(this.adHandler.onMissedImpression.subscribe((t=>{t.setTimeUntilNextOpportunity(this.xd.getTheoreticalDurationUntilNextOpportuinity())})),this.adHandler.onLinearEvent.subscribe((t=>{switch(t.type){case N.ShowLinearEvent:this.xd.onAdImpression(t.payload,lt.LINEAR),this.Od();break;case N.HideLinearEvent:this.Rd();break;case N.PauseLinearEvent:this.xd.onLinearAdPause();break;case N.ResumeLinearEvent:this.xd.onLinearAdPlay();break;case N.SkipLinearEvent:const i=!0;this.floatingModule&&(this.floatingModule.enabled=!0),this.Rd(i)}})))}Bd(){this.Bl.push(this.adHandler.onNonLinearEvent.subscribe((t=>{switch(t.type){case U.ShowNonLinearEvent:this.xd.onAdImpression(t.payload,lt.NONLINEAR);break;case U.HideNonLinearEvent:const i=!1;this.xd.onAdFinished(this.adHandler.nonLinearInImpression,lt.NONLINEAR,i)}})))}Od(){this.bd.adStarted(),this.adHandler.showLinear()}Dd(){this.adHandler.hideLinear()}Rd(t=!1){let i=this.bd.isInAdPod();t&&(i=!1,this.bd.endPod()),this.xd.onAdFinished(this.adHandler.linearInImpression,lt.LINEAR,i),this.Dd(),this.Fd.isCloseButton&&this.adHandler&&this.adHandler.firstLinearAdShown&&(this.Fd.closeButtonMode!==r.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd||(0,it.pv)(this.$playerContainer,d.s6.CloseHover)||(0,it.cn)(this.$playerContainer,d.s6.CloseHover),this.Fd.floatingSettings.floatingCloseButtonMode!==r.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd||(0,it.pv)(this.$playerContainer,d.s6.CloseFloatHover)||(0,it.cn)(this.$playerContainer,d.s6.CloseFloatHover))}$d(t){this.adHandler.enterAdPodLoadingState(),this.bd.enterPodTimeout((()=>{this.bd.endPod(),t()}))}jd(){(0,it.Tp)(this.$playerContainer),this.xd=this.Vd(),(0,l.BZ)(ft(this.Fd.lineItemSettings.lineItems,lt.LINEAR))||this.xd.onLinearNoDemand(),this.subscribe(tt,this.xd,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.enableAds(lt.NONLINEAR)})),this.subscribe(K,this.xd,(t=>{var i;const e=t.payload;null===(i=this.adHandler)||void 0===i||i.disableAds(lt.NONLINEAR,e)})),this.subscribe(G,this.xd,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.enableAds(lt.LINEAR)})),this.subscribe(J,this.xd,(t=>{var i;const e=t.payload;null===(i=this.adHandler)||void 0===i||i.disableAds(lt.LINEAR,e)})),this.subscribe(Q,this.xd,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.stopAd("forceStopAdSlot")})),this.subscribe(Y,this.xd,(()=>{if(this.adHandler)if(this.adHandler.linearInImpression)this.bd.endPod(),this.adHandler.stopAd("forceStopAdPod");else{const t=!0;this.Rd(t)}})),this.subscribe(Z,this.xd,(t=>{var i;null===(i=this.adHandler)||void 0===i||i.updateLinearPodRemainingTime(t.payload.remainingTime)})),this.subscribe(X,this.xd,(t=>{var i,e;const s=t.payload.adBreakType,n=null===(i=this.adHandler)||void 0===i?void 0:i.getLinearAdContainerWidth(),r={adBreak:s,playerWidth:(0,H.$K)(n)?n:this.$playerContainer.clientWidth};this.app.services.TrackingService.trackAdOpportunity(r),null===(e=this.adHandler)||void 0===e||e.newLinearAdOpportunity()}))}Nd(){this.app.services.ViewabilityService.on(this.$playerContainer,this.Ol,{threshold:this.gl,callbackDelay:this.ml}),this.app.services.ViewabilityService.on(this.$playerContainer,((t,i)=>this.Gc(t,i)),{threshold:this.fl}),this.app.services.ViewabilityService.subscribe(v.rl.OmidViewabilityThreshold,(t=>{this.mediator.publish(this,v.rl.OmidViewabilityThreshold,{payload:{threshold:t}})})),this.app.config.os.os===A.M.Ios&&this.app.services.PageFocusService.on(this.Dl)}Rl(){this.Cl&&this.Tl&&this.mediator.publish(this,c.Xh.SessionView)}Gc(t,i=!1){this.xd.setToggleAdsReason({isAppBackgrounded:i}),this.app.config.isInApp&&(i?(this.Ud=this.getVolume(),this.setVolume(0)):this.Ud&&(this.setVolume(this.Ud),this.Ud=null)),this.Il=t,this.mediator.publish(this,v.Km.IsViewable,{payload:t}),this.xd.viewabilityStateChanged(this.checkFloatingViewability(t),this.bd.isInAdPod(),this.bd.isInPodTimeout()),this.app.services.TrackingService.setSessionViewability(t)}checkFloatingViewability(t){const i=this.app.services.ViewabilityService.getIsTabInFocus();return!(t||!this.floatingModule||!this.floatingModule.isInFloating||!i)||t}Ts(){var t,i,e;const n=this.$playerContainer.clientWidth,r=this.$playerContainer.clientHeight,o=this.kl?k.zc.Fullscreen:k.zc.Normal;null===(t=this.adHandler)||void 0===t||t.resizeAd(n,r,o,this.Us);try{null===(i=this.xd)||void 0===i||i.onResize(n,r)}catch(t){(0,s.n)({message:"BaseExperience_onResize_player",callStack:t.stack,exception:t.message,level:s.D.WARN})}null===(e=this.adHandler)||void 0===e||e.setPlayerOrientation(this.Hd(n,r)),this.breakPointsHandler.updateWidth(n),this.app.services.TrackingService.updatePlayerDimensions(n,r),setTimeout((()=>{this.mediator.publish(this,v.Km.SizeChanged,{payload:{width:n,height:r}}),this.qd()}))}isBelowSmBreakpoint(t){return t<this.Ll}Hd(t,i){return t<i?x.Portrait:t>i?x.Landscape:x.None}qd(){this.kl||this.rd()}zd(){this.app.services.ResizeObserver.on(this.$playerContainer,(()=>{this.Ts()}))}Wd(){var t;this.kl=!0,this.app.services.InteractionService.disableScrollEvent(),this.od(),null===(t=this.adHandler)||void 0===t||t.setVastViewMode(k.zc.Fullscreen)}Gd(){var t;this.kl=!1,this.app.services.InteractionService.enableScrollEvent(),this.hd(),null===(t=this.adHandler)||void 0===t||t.setVastViewMode(k.zc.Normal)}Jd(){const t=`<cnx class='${d.oV}'></cnx>`,i=this.app.services.GlobalDomUtilsService.createElementByString(t);return this.Qd(i),i}Qd(t){(0,it.T7)(t,{"padding-bottom":`${this.Yd()}%`})}Yd(){return this.Fd.playerSize.ratioHeight/this.Fd.playerSize.ratioWidth*100}Xd(){this.El.push(this.floatingModule.onFloatingEnterStart.subscribe((()=>{this.mediator.publish(this,v.Zr.PlayerFloatChanged,{payload:y.Float}),this.mediator.publish(this,v.Zr.FloatingEnterStart,{payload:!0})})),this.floatingModule.onFloatingExitStart.subscribe((()=>{this.mediator.publish(this,v.Zr.FloatingExitStart,{payload:!0})})),this.floatingModule.onFloatingExitStop.subscribe((()=>{this.mediator.publish(this,v.Zr.PlayerFloatChanged,{payload:y.Embed}),this.mediator.publish(this,v.Zr.FloatingExitStop,{payload:!0})})),this.floatingModule.onFloatingEnterStop.subscribe((()=>{this.mediator.publish(this,v.Zr.FloatingEnterStop,{payload:!0}),this.Gc(!0)})))}Zd(){this.floatingModule=new ht(this.app.services.ViewabilityService,this.app.services.ResizeObserver,this.$playerContainer,this.Fd.floatingSettings,this.app.config.device,this.app.services.GlobalDomUtilsService,this.Kd),this.Xd(),this.floatingModule.start()}tu(){this.alwaysFloatingModule=new ot(this.app.services.ResizeObserver,this.$experienceContainer,this.Fd.floatingSettings,this.app.config.device,this.app.services.GlobalDomUtilsService),this.El.push(this.alwaysFloatingModule.onFloatingEnterStop.subscribe((()=>{this.app.services.ViewabilityService.triggerRecheck(this.$playerContainer)}))),this.alwaysFloatingModule.start()}setNewVolume(t){var i;null===(i=this.adHandler)||void 0===i||i.setLinearVolume(t)}eu(){var t;this.su(),null===(t=this.adHandler)||void 0===t||t.onLinearExperienceEvent.subscribe((t=>{var i;t.type===c.Uh.UserInteraction&&(null===(i=t.payload)||void 0===i?void 0:i.volume)&&this.nu()}))}ru(t){this.subscribe(c.Uh.UserInteraction,t,(({payload:{volume:t}})=>{t&&this.nu()}))}ws(t){this.mediator.publish(this,v.Km.VolumeChanged,{payload:t}),this.app.services.EventsStorageService.emitVolumeChange(t)}Nl(t){this.getVolume()!==t&&this.setNewVolume(t)}su(){this.vl=!0,this.$playerContainer.addEventListener("mouseover",this.Vl),this.$playerContainer.addEventListener("mouseout",this.Ul)}nu(){this.vl&&(this.vl=!1,this.$playerContainer.removeEventListener("mouseover",this.Vl),this.$playerContainer.removeEventListener("mouseout",this.Ul))}ou(){this.breakPointsHandler=new et(this.$playerContainer,this.app.config.device,this.hu,this.au),this.breakPointsHandler.updateWidth(this.$playerContainer.clientWidth)}cu(){if(this.Fd.isCloseButton){switch(this.adHandler&&this.ki.push(this.adHandler.onLinearUiComponentEvent.subscribe((t=>{t.type===bt.Close&&this.handleClose()}))),this.Fd.closeButtonMode){case r.ProtoPlayerCloseButtonMode.AlwaysOn:(0,it.cn)(this.$playerContainer,d.s6.CloseOn);break;case r.ProtoPlayerCloseButtonMode.Off:(0,it.cn)(this.$playerContainer,d.s6.CloseOff);break;case r.ProtoPlayerCloseButtonMode.OnHover:(0,it.cn)(this.$playerContainer,d.s6.CloseHover)}switch(this.Fd.floatingSettings.floatingCloseButtonMode){case r.ProtoPlayerCloseButtonMode.AlwaysOn:(0,it.cn)(this.$playerContainer,d.s6.CloseFloatOn);break;case r.ProtoPlayerCloseButtonMode.Off:(0,it.cn)(this.$playerContainer,d.s6.CloseFloatOff);break;case r.ProtoPlayerCloseButtonMode.OnHover:(0,it.cn)(this.$playerContainer,d.s6.CloseFloatHover)}}}Ld(t){const{skipOffset:i}=t;return{isAutoPlay:this.Fd.playbackMode===r.ProtoPlayerPlaybackModeEnum.Autoplay,skipOffset:i,isSkippable:(0,H.kE)(i)}}lu(){this.Tl=!0,this.app.services.TrackingService.setContentStart(),this.Rl()}$l(){const{clientWidth:t,clientHeight:i}=this.$experienceContainer;return!(0,_t.ON)({width:t,height:i})&&!this.isBelowSmBreakpoint(t)||((0,it.cn)(this.$experienceContainer,d.Gj.NoHeight),this.du())}du(){return At.includes(this.app.config.bundleID)}uu(t){try{const{display:i,width:e,height:s,flex:n,maxWidth:r,minWidth:o}=this.app.services.GlobalDomUtilsService.getComputedStyle(t),{width:h,height:a}=t.getBoundingClientRect(),c={display:i,compWidth:e,boundWidth:h,compHeight:s,boundHeight:a,flex:n,maxWidth:r,minWidth:o};return{type:t.nodeName,styles:JSON.stringify(c)}}catch(t){return{err:"BaseExperience_getElementInfo_error"}}}pu(){if(!(0,wt.Vm)([95,5]))return;const t={parent:this.uu(this.$experienceContainer.parentElement),main:this.uu(this.$experienceContainer)};(0,s.n)({message:"BaseExperience_invalid_dimensions",level:s.D.INFO,exception:JSON.stringify(t)})}fu(){this.bd=new q(this.Fd.adBreaks)}Ba(t,i,e,s){this.Fd=t,this.app=i,this.$experienceContainer=e,s&&s(),this.zl(),this.app.services.ViewabilityService.setViewableThreshold(this.yl),this.generateHTML(),this.fu(),this.app.services.ResizeObserver.on(this.$experienceContainer,this.Fl),this.$l()?this.mediator.publish(this,c.Uh.CanStart):this.pu()}start(){return St(this,void 0,void 0,(function*(){this.bl=!0,this.app.services.TrackingService.updatePlayerDimensions(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight),(0,it.cn)(this.$experienceContainer,d.sN.MainContainerFlex),this.mediator.publish(this,c.Xh.SessionRendered),this.ou(),this.zd(),this.Fd.floatingSettings.floatingMode===r.ProtoPlayerFloatingMode.Always?this.tu():(this.rd(),this.Zd()),this.Fd.lineItemSettings.lineItems.length>0&&!this.Fd.disableAdvertising&&!p._.isBannerBlocked&&(this.app.config.isOVPDomain?this.ki.push(p._.onAdBlockerDetected().subscribe((t=>{t||this.Pd()}))):this.Pd()),this.app.config.isMobile||this.Fd.soundMode!==r.ProtoPlayerSoundMode.Hover||this.eu(),this.Fd.isCloseButton&&this.cu(),this.Fd.displayAdCountdown&&(0,it.cn)(this.$playerContainer,d.s6.AdShowCountdown);try{this.jd()}catch(t){(0,s.n)({message:"BaseExperience_initAdsController",exception:t.message,callStack:t.stack,level:s.D.INFO})}p._.isBannerBlocked||p._.detectUsingScript().then((t=>{t&&(this.app.services.TrackingService.trackSessionAdBlocker(r.ProtoAdBlockDetectionTypeEnum.Network),this.xd.disableAdvertising())}))}))}play(){var t;null===(t=this.adHandler)||void 0===t||t.play()}pause(){var t;null===(t=this.adHandler)||void 0===t||t.pause()}setVolume(t){this.setNewVolume(t),this.nu()}getSize(){return{width:this.$experienceContainer.clientWidth,height:this.$experienceContainer.clientHeight}}setSize(t,i){(0,_t.ON)({width:t,height:i})||(0,it.T7)(this.$experienceContainer,{width:`${t}px`,height:`${i}px`})}setCustomMacros(t){this.app.services.MacrosService.addExtraMacros(t)}isViewable(){return this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.fl})}setViewableThreshold(t){this.app?this.app.services.ViewabilityService.setViewableThreshold(t):this.yl=t}setAmpUserConsent(t){this.app.services.UserManagerService.setAmpUserConsent(t)}triggerDestroy(){this.app.services.EventsStorageService.destroy(),this.mediator.publish(this,c.Uh.Destroy)}disableAdvertising(){this.xd.disableAdvertising()}enableAdvertising(){this.xd.enableAdvertising()}enableFloatingMode(){var t;null===(t=this.floatingModule)||void 0===t||t.enableFloatingMode()}disableFloatingMode(){var t;null===(t=this.floatingModule)||void 0===t||t.disableFloatingMode()}isFloatingModeEnabled(){return this.floatingModule?this.floatingModule.isFloatingModeEnabled():!!this.alwaysFloatingModule}setFloatingSettings(t){this.floatingModule?this.floatingModule.setFloatingSettings(t):this.alwaysFloatingModule.setFloatingSettings(t)}destroy(){(0,Pt.i)(this.ki),this.adHandler&&((0,Pt.i)(this.Bl),this.Cd.unsubscribe(),this.adHandler.destroy()),this.xd&&this.xd.destroy(),this.floatingModule&&(this.floatingModule.destroy(),this.floatingModule=null,(0,Pt.i)(this.El))}}var Ct,Tt,Mt;!function(t){t[t.Unknown=0]="Unknown",t[t.TimeoutBetweenAds=1]="TimeoutBetweenAds",t[t.InImpression=2]="InImpression",t[t.LinearDemandMissing=3]="LinearDemandMissing"}(Ct||(Ct={}));class Et extends a._{constructor(t,i,e,s,n,r,o,h){super(),this.mediator=t,this.Oe=i,this.gu=e,this.mu=s,this.yu=n,this.vu=r,this.pl=o,this.bu=h,this.xu=k.zc.Normal,this.wu=[],this._u=new rt.x,this.Pu=new rt.x,this.Su=new rt.x,this.Au=new rt.x,this.Iu=new rt.x,this.ku=new rt.x,this.Cu=new rt.x,this.Tu=new rt.x,this.Mu=new rt.x,this.Eu=new rt.x,this.Bu=new rt.x,this.Lu=new rt.x,this.Ou=new rt.x,this.Ru=this.Du(),this.Fu(),this.$u=this.Vu(),this.Nu(),this.Uu=this.Hu(),this.Uu&&this.qu()}get onMissedImpression(){return this.Mu.asObservable()}zu(t,i){const e=[{container:this.Wu,width:t,height:i,type:r.ProtoAdType.Overlay},{container:this.Wu,width:t,height:i,type:r.ProtoAdType.Video},{container:this.Gu,width:t,height:i,type:r.ProtoAdType.Nonlinear}];return this.Gu||e.pop(),e}Fu(){this.wu.push(this.Ru.onAdsEnable.subscribe((t=>{this._u.next(t)})))}qu(){var t,i,e;this.wu.push(null===(t=this.Uu)||void 0===t?void 0:t.onVpaidEvent.subscribe((t=>{this.Pu.next(t)})),null===(i=this.Uu)||void 0===i?void 0:i.onNonLinearEvent.subscribe((t=>{t.type===U.ShowNonLinearEvent&&this.linearInImpression&&this.Uu.pause(),this.Eu.next(t)})),null===(e=this.Uu)||void 0===e?void 0:e.onExperienceEvent.subscribe((t=>{this.Bu.next({type:t.type,payload:t.payload})})),this.Ru.onNonlinearImpressionPrice.subscribe((t=>{this.Lu.next(t)})),this.Ru.onNonlinearImpressionRevenue.subscribe((t=>{this.Ou.next(t)})))}Nu(){this.wu.push(this.$u.onVpaidEvent.subscribe((t=>{this.Pu.next(t)})),this.$u.onUiComponentEvent.subscribe((t=>{this.Au.next(t)})),this.$u.onExperienceEvent.subscribe((t=>{this.Iu.next({type:t.type,payload:t.payload})})),this.$u.onLinearEvent.subscribe((t=>{var i;t.type===N.ShowLinearEvent&&(null===(i=this.Uu)||void 0===i||i.pause()),this.Su.next(t)})),this.Ru.onLinearImpressionPrice.subscribe((t=>{this.ku.next(t)})),this.Ru.onMissedImpression.subscribe((t=>{this.Mu.next(t)})),this.Ru.onLinearImpressionRevenue.subscribe((t=>{this.Cu.next(t)})),this.Ru.onLinearNoFill.subscribe((()=>{this.Tu.next()})))}Ju(t,i,e){this.Ru.initAd(t,i,this.xu,1,e,this.zu(t,i),this.vu)}adStateChange(t,i){var e;this.$u.adStateChange(t,i),null===(e=this.Uu)||void 0===e||e.adStateChange(t,i)}contentPlaybackStateChanged(t){var i;null===(i=this.Uu)||void 0===i||i.contentPlaybackStateChanged(t)}disableAds(t,i){this.Ru.disableAds(t,i)}enableAds(t){this.Ru.enableAds(t)}start(t,i,e,s=!1,n=!1){n&&this.startNonLinear(),this.startLinear(e,s),this.Ju(t,i,e)}stopAd(t){var i;this.$u.stopAd(t),null===(i=this.Uu)||void 0===i||i.stopAd(t)}play(){this.$u.play()}pause(){var t;this.$u.pause(),null===(t=this.Uu)||void 0===t||t.pause()}resumeWithoutUserInteraction(t){var i;this.$u.resumeWithoutUserInteraction(),null===(i=this.Uu)||void 0===i||i.resumeWithoutUserInteraction(t)}resizeAd(t,i,e,s){var n;this.setVastViewMode(e),this.$u.resizeAd(t,i),null===(n=this.Uu)||void 0===n||n.resizeAd(t,i,s)}setPlayerOrientation(t){this.Ru.setPlayerOrientation(t)}setVastViewMode(t){this.xu=t,this.Ru.setVastViewMode(t)}contentChanged(){this.Ru.onContentChange()}newLinearAdOpportunity(){this.Ru.newLinearAdOpportunity()}destroy(){var t,i,e;(0,Pt.i)(this.wu),this.$u.destroy(),null===(t=this.Uu)||void 0===t||t.destroy(),null===(i=this.Ru)||void 0===i||i.disableAds(lt.LINEAR,{disableReason:Ct.Unknown}),null===(e=this.Ru)||void 0===e||e.disableAds(lt.NONLINEAR,{disableReason:Ct.Unknown}),this.Ru.destroy()}get onAdsEnable(){return this._u.asObservable()}get onVpaidEvent(){return this.Pu.asObservable()}startNonLinear(){var t;null===(t=this.Uu)||void 0===t||t.start()}contentEnded(){var t;null===(t=this.Uu)||void 0===t||t.pause()}get onNonLinearEvent(){return this.Eu.asObservable()}get onNonLinearExperienceEvent(){return this.Bu.asObservable()}get onNonLinearImpressionPrice(){return this.Lu.asObservable()}get onNonLinearImpressionRevenue(){return this.Ou.asObservable()}get nonLinearInImpression(){return!!this.Uu&&this.Uu.inImpression}get Gu(){var t;return null===(t=this.Uu)||void 0===t?void 0:t.adContainer}startLinear(t,i=!1){this.$u.start(t,i)}setMediaRestrictions(t){this.Ru.setMediaRestrictions(t)}getLinearVolume(){return this.$u.getVolume()}setLinearVolume(t){this.$u.setVolume(t)}hideLinear(){this.$u.hide()}showLinear(){this.$u.show()}updateContinueReadingCard(){this.$u.updateContinueReadingCard()}setContinueReadingCard(t){this.$u.setContinueReadingCard(t)}hideContinueReadingCard(){this.$u.hideContinueReadingCard()}setAdMarkerTitle(t){this.$u.setAdMarkerTitle(t)}hideAdMarkerTitle(){this.$u.hideAdMarkerTitle()}enterAdPodLoadingState(){this.$u.enterAdPodLoadingState()}setAdLoadingBackgroundUrl(t){this.$u.setAdLoadingBackgroundUrl(t)}updateLinearPodRemainingTime(t){this.Ru.updateLinearPodRemainingTime(t)}get onLinearEvent(){return this.Su.asObservable()}get onLinearUiComponentEvent(){return this.Au.asObservable()}get onLinearExperienceEvent(){return this.Iu.asObservable()}get onLinearImpressionPrice(){return this.ku.asObservable()}get onLinearImpressionRevenue(){return this.Cu.asObservable()}get onLinearNoFill(){return this.Tu.asObservable()}get linearInImpression(){return this.$u.inImpression}get Wu(){return this.$u.adContainer}get Qu(){return this.$u.secondaryAdContainer}get linearAdUserInterface(){return this.$u.adUserInterface}get onFullcreenChange(){return this.$u.onFullcreenChange}get linearAdInWin(){return this.$u.adInWin}get firstLinearAdShown(){return this.$u.firstAdShown}get inAdPodLoadingState(){return this.$u.inAdPodLoadingState}getLinearAdContainerWidth(){return this.$u.getMainAdContainerWidth()}userInteraction(t){this.Ru.userInteraction(t)}}class Bt{constructor(){this.Yu=(0,wt.qs)()}get id(){return this.Yu}}!function(t){t[t.NoPrefetch=0]="NoPrefetch",t[t.StartSessionPrefetch=1]="StartSessionPrefetch",t[t.MidSessionPrefetch=2]="MidSessionPrefetch"}(Tt||(Tt={})),function(t){t[t.ON_BID=0]="ON_BID",t[t.ON_BID_LOADING=1]="ON_BID_LOADING",t[t.ON_BID_READY=2]="ON_BID_READY",t[t.ON_BID_STARTED=3]="ON_BID_STARTED",t[t.ON_BID_LOADING_CONSUMED=4]="ON_BID_LOADING_CONSUMED",t[t.ON_BID_READY_CONSUMED=5]="ON_BID_READY_CONSUMED"}(Mt||(Mt={}));function Lt(t){return 2*(t+41)}function Ot(t){return t/2-41}class Rt{constructor(){this.Xu=Date.now(),this.Zu={advertiser:{}}}addPrebid(t){(0,H.$K)(this.Zu.advertiser[t])||this.Ku(t),this.Zu.advertiser[t].prebidData.push({timestamp:Date.now()})}addBid(t,i){(0,H.$K)(this.Zu.advertiser[t])||this.Ku(t),this.Zu.advertiser[t].bidsFloorPriceList.push({timestamp:Date.now(),floorPrice:i})}addImpression(t,i){(0,H.$K)(this.Zu.advertiser[t])||this.Ku(t),this.Zu.advertiser[t].impressionRevenueList.push({timestamp:Date.now(),obfuscatedPrice:i})}shouldRequestLineItem(t){const i=Date.now();return!(this.ep(i,3)&&this.sp(t,i,5)<-.5&&this.np(t,i,3)>=11.5&&this.rp(t,i,10,.1)<.35)}ep(t,i){return t-this.Xu>=i*I.uD}sp(t,i,e){const s=this.Zu.advertiser[t];if(!(0,H.$K)(s))return-1;const n=this.op(s.impressionRevenueList,i,e).map((t=>t.obfuscatedPrice));let r=0;return(0,l.BZ)(n)&&(r=n.reduce(((t,i)=>t+Lt(i)))),this.ap(r)}np(t,i,e){const s=this.Zu.advertiser[t];if(!(0,H.$K)(s))return-1;const n=this.op(s.prebidData,i,e).length;return this.ap(n)}rp(t,i,e,s){const n=this.Zu.advertiser[t];if(!(0,H.$K)(n))return-1;const r=this.op(n.impressionRevenueList,i,e).map((t=>t.floorPrice)),o=this.cp(r,s);return this.ap(o)}op(t,i,e){const s=i-I.s_,n=i-e*I.uD,r=[];for(let i=t.length-1;i>=0&&t[i].timestamp>=n;i--)t[i].timestamp<=s&&r.push(t[i]);return r}ap(t){return 0===t?-1:t}Ku(t){this.Zu.advertiser[t]={prebidData:[],bidsFloorPriceList:[],impressionRevenueList:[]}}cp(t,i){if(0===t.length)return 0;if(i<=0)return t[0];if(i>=1)return t[t.length-1];const e=((t=t.sort(((t,i)=>t-i))).length-1)*i,s=Math.floor(e),n=s+1,r=e%1;return n>=t.length?t[s]:t[s]*(1-r)+t[n]*r}}class Dt{constructor(){this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.impression=[],this.viewable_impression=[],this.complete=[],this.mute=[],this.unmute=[],this.pause=[],this.rewind=[],this.resume=[],this.fullscreen=[],this.exitFullscreen=[],this.expand=[],this.collapse=[],this.close=[],this.closeLinear=[],this.acceptInvitationLinear=[],this.acceptInvitation=[],this.skip=[],this.progress=[],this.playerExpand=[],this.playerCollapse=[],this.adExpand=[],this.adCollapse=[],this.fullScreen=[],this.canPlayThrough=[],this.stalled=[],this.waiting=[],this.otherAdInteraction=[]}}class Ft{constructor(t){this.clickTrackings=[],this.customClicks=[],this.errorUrls=[],this.impressions=[],this.trackingEvents=new Dt,t.inLine?this.lp(t.inLine):this.dp(t.wrapper)}lp(t){this.up(t.errors),this.pp(t.impressions),this.fp(t.creatives)}dp(t){this.up(t.errors),this.pp(t.impressions),this.fp(t.creatives)}gp(t){this.mp(t.trackingEvents),this.yp(t.videoClicks)}yp(t){t&&(this.vp(t.clickTrackings),this.bp(t.customClicks))}vp(t){this.clickTrackings.push(...t)}bp(t){this.customClicks.push(...t)}mp(t){t.forEach((t=>{try{this.trackingEvents[t.name].push(t.uri)}catch(i){(0,s.n)({message:"AdManager_VastResponse_tracker",exception:`${t.name}`,callStack:i.stack,level:s.D.INFO})}}))}fp(t){t.forEach((t=>{t.linear?this.gp(t.linear):t.nonLinear&&this.mp(t.nonLinear.trackingEvents)}))}up(t){this.errorUrls.push(...t)}pp(t){this.impressions.push(...t)}}const $t={[r.ProtoTrackerTriggerType.Impression]:"adImpression",[r.ProtoTrackerTriggerType.Complete25Pc]:"adQuartileFirst",[r.ProtoTrackerTriggerType.Complete50Pc]:"adQuartileSecond",[r.ProtoTrackerTriggerType.Complete75Pc]:"adQuartileThird",[r.ProtoTrackerTriggerType.ViewCompletion]:"adQuartileFourth",[r.ProtoTrackerTriggerType.VideoClick]:"adClick",[r.ProtoTrackerTriggerType.Pause]:"adPause",[r.ProtoTrackerTriggerType.Resume]:"adResume",[r.ProtoTrackerTriggerType.Mute]:"adMute",[r.ProtoTrackerTriggerType.Unmute]:"adUnmute"};class jt{constructor(){this.adError=[],this.adWin=[],this.adImpression=[],this.adViewableImpression=[],this.adStarted=[],this.adVideoStart=[],this.adQuartileFirst=[],this.adQuartileSecond=[],this.adQuartileThird=[],this.adQuartileFourth=[],this.adClick=[],this.adPause=[],this.adResume=[],this.adSkip=[],this.adMute=[],this.adUnmute=[],this.adUserClose=[],this.adUserAcceptInvitation=[],this.adUserMinimize=[]}static track(t,i,e,s){if(!Array.isArray(t))return;const{width:n,height:o}=s.adContainerState.get(e.adType),{adBreakType:h}=s.adBreakState,{mediaDescription:a,mediaDuration:c,mediaId:l,mediaUrl:d,mediaTitle:u}=s.media;t.forEach((t=>{if(t.url)try{const s=i.replace(t.url,e.vendorId,{adMacros:{adWidth:n,adHeight:o,adPostion:h},mediaMacros:{mediaDescription:a,mediaDuration:c,mediaId:l,mediaUrl:d,mediaTitle:u}});switch(t.type){case r.ProtoTrackerType.Image:(0,wt.Hh)([s],window);break;case r.ProtoTrackerType.Javascript:(0,it.dZ)({src:s},window.document.head,window)}}catch(t){}}))}}function Vt(t,i){t.forEach((t=>function(t,i){(function(t,i){return i[$t[t]]})(t.trigger,i).push({type:t.type,url:t.url})}(t,i)))}function Nt(t){return{type:r.ProtoTrackerType.Image,url:t}}function Ut(t){return t.map((t=>Nt(t)))}var Ht;!function(t){t[t.HandlingSdkUrl=0]="HandlingSdkUrl",t[t.NetworkRequestUrl=1]="NetworkRequestUrl",t[t.XmlInvalidString=2]="XmlInvalidString",t[t.XmlParseGeneral=3]="XmlParseGeneral",t[t.XmlInvalidTree=4]="XmlInvalidTree",t[t.XmlInvalidAd=5]="XmlInvalidAd",t[t.XmlAdaptorWrapperLimit=6]="XmlAdaptorWrapperLimit",t[t.HTMLUnknownMimeType=7]="HTMLUnknownMimeType",t[t.ImaAdsManagerInit=8]="ImaAdsManagerInit",t[t.ImaVastEmptyResponse=9]="ImaVastEmptyResponse",t[t.ImaRequestException=10]="ImaRequestException",t[t.ImaTimeout=11]="ImaTimeout",t[t.ImaInvalidResponse=12]="ImaInvalidResponse",t[t.InvalidCreativeUrl=13]="InvalidCreativeUrl",t[t.BidIsNotTargetingAllowedEver=14]="BidIsNotTargetingAllowedEver"}(Ht||(Ht={}));const qt={[Ht.HandlingSdkUrl]:r.ConnatixNoBidReasonEnum.CsRequestException,[Ht.NetworkRequestUrl]:r.ConnatixNoBidReasonEnum.CsRequestException,[Ht.XmlInvalidString]:r.ConnatixNoBidReasonEnum.CsEmptyResponse,[Ht.XmlParseGeneral]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[Ht.XmlInvalidTree]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[Ht.XmlInvalidAd]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[Ht.XmlAdaptorWrapperLimit]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[Ht.HTMLUnknownMimeType]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[Ht.ImaAdsManagerInit]:r.ConnatixNoBidReasonEnum.CsRequestException,[Ht.ImaVastEmptyResponse]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[Ht.ImaRequestException]:r.ConnatixNoBidReasonEnum.CsRequestException,[Ht.ImaTimeout]:r.ConnatixNoBidReasonEnum.Timeout,[Ht.ImaInvalidResponse]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[Ht.InvalidCreativeUrl]:r.ConnatixNoBidReasonEnum.CsRequestException,[Ht.BidIsNotTargetingAllowedEver]:r.ConnatixNoBidReasonEnum.BidIsNotTargetingAllowedEver};var zt,Wt;!function(t){t.VOLUME_DETECTED="volume_detected",t.MALWARE_DETECTED="malware_detected",t.BADURI_DETECTED="baduri_detected"}(zt||(zt={})),function(t){t[t.None=0]="None",t[t.Mute=1]="Mute",t[t.ScrollHijack=2]="ScrollHijack",t[t.MemoryLeak=4]="MemoryLeak",t[t.Malware=8]="Malware",t[t.All=15]="All"}(Wt||(Wt={}));class Gt{constructor(){this.Pu=new rt.x}get onVpaidEvent(){return this.Pu.asObservable()}handshakeVersion(t="2.0"){return"2.0"}}var Jt,Qt,Yt=h(2157);h(7417);!function(t){t.Timeout="timeout",t.TimeoutLoaded="timeout_loaded",t.ImaError="imaError",t.ImaScriptFailure="imaScriptFailure",t.ImaObjectNotFound="imaObjectNotFound",t.ImaManagerInit="imaManagerInit",t.ImaInitSdkError="initImasdkError",t.VastVideoTagEventError="vastVideoTagEventError",t.VastUnsupportedMedia="vastUnsupportedMedia",t.VastPlayPromiseReject="playPromiseReject",t.VastNonLinearImageLoadFailure="nonLinearVastImageLoadFailure",t.AdStopped="adStopped",t.MuteEnforce="muteEnforce",t.VpaidOnLoad="vpaidOnLoad",t.VpaidInvalid="vpaidInvalid",t.VpaidGetVpaidAdError="vpaidGetVpaidAdError",t.CnxMediaNoRenditions="noRenditions",t.CnxMediaSrcNotSupported="srcNotSupported",t.InvalidVpaidEvent="invalidVpaidEvent",t.AdxOverlayNoFill="adxOverlayNoFill",t.AdxOverlayGptScriptLoad="adxOverlayGptScriptLoad",t.DisplayIntegratorIframeLoad="displayIntegratorIframeLoad",t.EnforcementMalware="malwareDetected",t.EnforcementVolume="volumeDetected",t.Cancelled="adManagerRemoved",t.DomainBlocked="domainBlocked",t.AdaptorStartAdError="adaptorStartAdError",t.AdaptorInitAdError="adaptorInitAdError",t.WrapperStartAdError="wrapperStartAdError",t.WrapperInitAdError="wrapperInitAdError",t.NonLinearZeroDimensions="nonLinearzeroDimensions",t.NonLinearImageToLarge="nonLinearImageToLarge",t.NonLinearUnsupportedMedia="nonLinearUnsupportedMedia"}(Jt||(Jt={})),function(t){t[t.Win=0]="Win",t[t.AdLoaded=1]="AdLoaded",t[t.AdStarted=2]="AdStarted",t[t.AdImpression=3]="AdImpression"}(Qt||(Qt={}));class Xt{constructor(t){this.xp=t,this.wp=new Map,(0,H.$K)(this.xp.settings.bidLifecycle)||(this.xp.settings.bidLifecycle={})}onTrackingLifecycleEvent(t){switch(this.wp.set(t,Date.now()),t){case Qt.AdLoaded:this._p();break;case Qt.AdImpression:this.Pp()}}_p(){this.xp.settings.bidLifecycle.winToAdLoadedTime=this.Sp}Pp(){this.xp.settings.bidLifecycle.startAdToImpressionTime=this.Ap}get Ap(){return this.wp.get(Qt.AdImpression)&&this.wp.get(Qt.AdStarted)?this.wp.get(Qt.AdImpression)-this.wp.get(Qt.AdStarted):0}get Sp(){return this.wp.get(Qt.AdLoaded)&&this.wp.get(Qt.Win)?this.wp.get(Qt.AdLoaded)-this.wp.get(Qt.Win):0}}const Zt={[r.ProtoCreativeTypeEnum.External]:t=>t.floorPrice||t.customCpm,[r.ProtoCreativeTypeEnum.ThirdParty]:t=>t.floorPrice||t.customCpm,[r.ProtoCreativeTypeEnum.MediaFile]:t=>t.floorPrice||t.customCpm,[r.ProtoCreativeTypeEnum.HeaderBidder]:t=>t.cpm,[r.ProtoCreativeTypeEnum.Rtb]:t=>Lt(t.obfuscatedPrice),[r.ProtoCreativeTypeEnum.Tam]:t=>Lt(t.obfuscatedPrice),[r.ProtoCreativeTypeEnum.TamDeal]:t=>Lt(t.obfuscatedPrice),[r.ProtoCreativeTypeEnum.TamPrivateAuction]:t=>Lt(t.obfuscatedPrice)};function Kt(t){return(0,Zt[t.creativeType])(t)}var ti;!function(t){t.IMPRESSION_TIMEOUT="IMPRESSION_TIMEOUT",t.VIEWABLE_IMPRESSION_TIMEOUT="VIEWABLE_IMPRESSION_TIMEOUT",t.SKIP_AD_TIMEOUT="SKIP_AD_TIMEOUT",t.STOP_AD_TIMEOUT="STOP_AD_TIMEOUT",t.AD_LOADED_TIMEOUT="AD_LOADED_TIMEOUT"}(ti||(ti={}));const ii="cnx-ad-bid-slot-selected",ei="Connatix Ad";class si extends Gt{constructor(t,i){super(),this.kp=t,this.settings=i,this.Cp=null,this.Mp=null,this.Ep=null,this.Lp=null,this.Op=void 0,this.Rp=!1,this.Ja=!1,this.Dp=!1,this.Fp=!1,this.$p=null,this.wu=[],this.jp=new rt.x,this.Vp=new rt.x,this.Np=()=>{this.qp({type:k.fI.AdError,payload:{errorMessage:Jt.Timeout}}),this.zp()},this.Wp=()=>{this.Gp(),this.Jp(ti.VIEWABLE_IMPRESSION_TIMEOUT).clearTimeout(),this.settings.viewabilityService.off(this.Cp,this.Qp)},this.Qp=t=>{const i=this.Jp(ti.VIEWABLE_IMPRESSION_TIMEOUT);this.Vp.next(t),t?i.timeoutHandle.timeoutId||i.setTimeout():i.clearTimeout()},this.Yp=()=>{this.qp({type:k.fI.AdSkipped}),this.zp()},this.Xp=()=>{this.qp({type:k.fI.AdStopped,payload:{shouldTrackPostBid:!0}}),this.zp()},this.Zp=()=>{this.qp({type:k.fI.AdError,payload:{errorMessage:Jt.TimeoutLoaded}}),this.zp()},this.Jp=t=>{const i=this.tf[t];return{timeoutHandle:i,setTimeout:()=>{i.timeoutId=this.kp.setTimeout((()=>{i.callback()}),i.timeout)},clearTimeout:()=>{null!==i.timeoutId&&(this.kp.clearTimeout(i.timeoutId),i.timeoutId=null)}}},this.if=Date.now(),this.creativeId=this.settings.externalCreativeId,this.ef=`cnx-ad-bid-slot-id-${this.settings.requestMetadata.data.cnxBidId}`,this.sf=`cnx-ad-slot-${this.settings.id}`;const{adType:e}=this.settings.adManagerLineItem.protoLineItem;this.tf={[ti.IMPRESSION_TIMEOUT]:{callback:this.Np,timeout:25e3,timeoutId:null},[ti.VIEWABLE_IMPRESSION_TIMEOUT]:{callback:this.Wp,timeout:Yt.xs[e],timeoutId:null},[ti.SKIP_AD_TIMEOUT]:{callback:this.Yp,timeout:500,timeoutId:null},[ti.STOP_AD_TIMEOUT]:{callback:this.Xp,timeout:500,timeoutId:null},[ti.AD_LOADED_TIMEOUT]:{callback:this.Zp,timeout:25e3,timeoutId:null}},this.pl=i.urlSuffixerService}get createdTimestamp(){return this.if}get onAdSlotViewabilityChanged(){return this.Vp.asObservable()}getPrice(){const{advertiserLineItemId:t,creativeType:i,floorPrice:e,lineItemPriority:s,customCpm:n,successRate:r}=this.settings.adManagerLineItem.protoLineItem;return Kt({lineItemId:t,bidId:this.settings.id,creativeType:i,floorPrice:e,obfuscatedPrice:this.settings.obfuscatedPrice,successRate:this.settings.successRate||r,priority:s,cpm:this.settings.cpm,customCpm:n})}skipAd(){this.Jp(ti.SKIP_AD_TIMEOUT).setTimeout()}stopAd(t){this.Jp(ti.STOP_AD_TIMEOUT).setTimeout()}startAd(){this.Fp&&(0,s.n)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"startAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.sf}`,level:s.D.CRITICAL}),this.Fp=!0,this.Jp(ti.IMPRESSION_TIMEOUT).setTimeout()}initAd(t,i,e,n,r,o,h){this.Dp&&(0,s.n)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"initAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.sf}`,level:s.D.CRITICAL}),this.Dp=!0,this.Jp(ti.AD_LOADED_TIMEOUT).setTimeout(),this.nf(h),this.rf=new Xt(this),this.rf.onTrackingLifecycleEvent(Qt.Win)}setAdVolume(t){this.Mp.volume=t,(0,it.Q1)(this.Mp,t),t<=0?this.settings.adEnforcer.start(Wt.Mute):this.settings.adEnforcer.stop(Wt.Mute)}get impressionStarted(){return this.Rp}get creativeId(){return this.Op}set creativeId(t){(0,H.QM)(this.creativeId)||(this.Op=t)}get onAdViewableImpression(){return this.jp.asObservable()}hf(t){let i;(0,H.kE)(t.payload.skipOffset)&&(i=t.payload.skipOffset);const e={type:k.fI.AdLoaded,payload:{adType:this.settings.adManagerLineItem.protoLineItem.adType,adLoadedData:{skipOffset:i},adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode}};return this.settings.adLoadedPayload=e,e}af(t){return{type:k.fI.AdImpression,payload:{adType:this.settings.adManagerLineItem.protoLineItem.adType,adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),adVideoUrl:this.adVideoUrl,name:ei,skipOffset:this.settings.adLoadedPayload.payload.adLoadedData.skipOffset},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId}}}}cf(t){return{type:k.fI.AdVideoStart,payload:{adType:this.settings.adManagerLineItem.protoLineItem.adType,adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),name:ei},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId}}}}qp(t){if(t.payload||(t.payload={}),t.payload.adType=this.settings.adManagerLineItem.protoLineItem.adType,this.lf(t))switch(t.type){case k.fI.AdLoaded:0,this.rf.onTrackingLifecycleEvent(Qt.AdLoaded),this.Jp(ti.AD_LOADED_TIMEOUT).clearTimeout(),this.Pu.next(this.hf(t));break;case k.fI.AdImpression:this.rf.onTrackingLifecycleEvent(Qt.AdImpression),this.Jp(ti.IMPRESSION_TIMEOUT).clearTimeout(),this.df(),(0,it.cn)(this.Ep,ii),this.Pu.next(this.af(t)),this.Rp=!0;break;case k.fI.AdVideoStart:this.rf.onTrackingLifecycleEvent(Qt.AdStarted),this.Pu.next(this.cf(t));break;case k.fI.AdStopped:case k.fI.AdSkipped:case k.fI.AdError:this.Ja&&(0,s.n)({message:"AdManager_ABaseBidAdaptor_double_destroy",exception:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,level:s.D.WARN}),this.Dc(),this.Pu.next(t);break;default:this.Pu.next(t)}else this.qp({type:k.fI.AdError,payload:{errorMessage:Jt.InvalidVpaidEvent}})}nf(t){this.Lp=this.uf(),this.Ep=this.Lp.slotsContainer,(0,it.cn)(this.Ep,this.ef),this.Cp=this.Lp.adSlot,this.Cp.id=this.sf,this.Ep.id=this.settings.bidSlotId,this.Mp=this.Lp.videoSlot,this.Mp.volume=t,(0,it.Q1)(this.Mp,t),this.settings.adEnforcer.registerContainer(this.Ep,this.sf),this.wu.push(this.settings.adEnforcer.onEnforcerEvent.subscribe((t=>{this.pf(t)}))),this.settings.adEnforcer.start(Wt.All)}uf(){return this.settings.adSlotContainerRecycler.requestAdSlot(this.settings.adContainer)}Dc(){this.Ja=!0,(0,it.IV)(this.Ep,ii),(0,it.IV)(this.Ep,this.ef),this.Cp.removeAttribute("id"),this.Ep.removeAttribute("id"),(0,Pt.i)(this.wu),this.zp(),this.settings.adEnforcer.deregisterContainer(this.Ep),this.settings.viewabilityService.off(this.Cp,this.Qp),null!==this.$p&&this.kp.clearTimeout(this.$p),this.ff()}ff(){this.$p=this.kp.setTimeout((()=>{this.settings.adSlotContainerRecycler.destroyAdSlot(this.Lp)}),500)}Gp(){const{advertiserLineItemId:t,publisherLineItemId:i}=this.settings.adManagerLineItem.protoLineItem;this.jp.next({advertiserLineItemId:t,publisherLineItemId:i,rtbSeatId:this.settings.requestMetadata.data.rtbSeatId,dspId:this.settings.requestMetadata.data.dspId,rtbAdomain:this.settings.requestMetadata.data.rtbAdomain})}df(){const t=Yt.fJ,i=this.Cp;this.settings.viewabilityService.on(i,this.Qp,{threshold:t}),this.Qp(this.settings.viewabilityService.check({threshold:t,element:i}))}zp(){Object.keys(this.tf).forEach((t=>{this.Jp(t).clearTimeout()}))}lf(t){return!(!this.Rp&&(t.type===k.fI.AdStopped||t.type===k.fI.AdSkipped))}pf(t){if(t.detectedContainer!==this.Ep)return;let i;switch(t.type){case zt.BADURI_DETECTED:i="AdManager_enforcer_BadUri";break;case zt.MALWARE_DETECTED:i="AdManager_enforcer_malware",this.qp({type:k.fI.AdError,payload:{errorMessage:Jt.EnforcementMalware}});break;case zt.VOLUME_DETECTED:i="AdManager_enforcer_soundBlock",this.qp({type:k.fI.AdError,payload:{errorMessage:Jt.EnforcementVolume}})}(0,s.n)({message:i,exception:t.message,level:s.D.WARN})}gf(t,i,e){const n=this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,r=this.creativeId;(0,s.n)({message:`AdManager_${t}_${i}`,exception:`advertiserLineItemId:${n}_creativeId:${r}_errorMessage:${null==e?void 0:e.message}`,callStack:null==e?void 0:e.stack,level:s.D.WARN},{throttle:5})}}var ni;!function(t){t.BANNED_IMA_ADS_ID=["9026814","9053547"],t.KEYWORDS_FOR_BANNED_VAST=["nrb-v.ybp.yahoo.comvasterror","pr.ybp.yahoo.com/vasterror","//s.yimg.com/ff/vista.js"]}(ni||(ni={}));var ri=h(3640);class oi extends Gt{constructor(t,i,e,s,n,r,o){super(),this.yf=t,this.ii=i,this.vf=e,this.bf=s,this.xf=n,this.wf=r,this.Pf=o,this.Sf=new rt.x,this.Af=t=>{if(!this.If(t))return;let i="";try{i=t.getError().getMessage()+"_"+t.getError().getErrorCode()+"_"+t.getError().getVastErrorCode()}catch(t){}this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.ImaError+"_"+i}})},this.kf=t=>{const i=this.yf.AdEvent.Type;switch(t.type){case i.CLICK:this.Pu.next({type:k.fI.AdClickThru,payload:{}});break;case i.LOADED:this.ks(t);break;case i.IMPRESSION:const e={adsManager:this.xf,adContainer:this.Cf,viewMode:this.Tf(this.Mf),adTag:this.bf};this.Pu.next({type:k.fI.AdVideoStart}),this.Pu.next({type:k.fI.AdImpression,payload:{imaMetadata:e}});break;case i.STARTED:this.Pu.next({type:k.fI.AdStarted});break;case i.FIRST_QUARTILE:this.Pu.next({type:k.fI.AdVideoFirstQuartile});break;case i.MIDPOINT:this.Pu.next({type:k.fI.AdVideoMidpoint});break;case i.THIRD_QUARTILE:this.Pu.next({type:k.fI.AdVideoThirdQuartile});break;case i.COMPLETE:this.Pu.next({type:k.fI.AdVideoComplete}),this.Pu.next({type:k.fI.AdStopped,payload:{shouldTrackPostBid:!0}});break;case i.ALL_ADS_COMPLETED:break;case i.DURATION_CHANGE:this.Pu.next({type:k.fI.AdDurationChange});break;case i.PAUSED:this.Pu.next({type:k.fI.AdPaused});break;case i.RESUMED:this.Pu.next({type:k.fI.AdPlaying});break;case i.LINEAR_CHANGED:this.Pu.next({type:k.fI.AdLinearChange});break;case i.SKIPPABLE_STATE_CHANGED:this.Pu.next({type:k.fI.AdSkippableStateChange});break;case i.SKIPPED:this.Pu.next({type:k.fI.AdSkipped});break;case i.VOLUME_CHANGED:this.Pu.next({type:k.fI.AdVolumeChange});break;case i.USER_CLOSE:this.Pu.next({type:k.fI.AdUserClose});break;case i.LOG:this.Pu.next({type:k.fI.AdLog})}},this.Ef()}get onCreativeReceived(){return this.Sf.asObservable()}initAd(t,i,e,s,n,r){this.Cf=r.slot,this.Bf=r.videoSlot,this.Mf=e||k.zc.Normal;try{this.xf.setVolume(0),this.xf.init(t,i,this.Tf(this.Mf))}catch(t){this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.ImaManagerInit}})}}startAd(){try{this.xf.start()}catch(t){this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.WrapperStartAdError+`_${t.message}`}})}}stopAd(t){this.xf.stop(),this.Pu.next({type:k.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}resizeAd(t,i,e){this.xf.resize(t,i,this.Tf(e))}pauseAd(){this.xf.pause()}resumeAd(){this.xf.resume(),this.ii===A.M.Ios&&(0,it.UR)(this.Bf)}expandAd(){this.xf.expand()}collapseAd(){this.xf.collapse()}skipAd(){this.xf.skip()}getAdRemainingTime(){return this.xf.getRemainingTime()||0}getAdDuration(){return this.Lf?this.Lf.getDuration():0}getAdVolume(){return this.xf.getVolume()}getAdMediaWidth(){return this.Lf?this.Lf.getVastMediaWidth():0}getAdMediaHeight(){return this.Lf?this.Lf.getVastMediaHeight():0}setAdVolume(t){this.xf.setVolume(t)}getMediaFile(){return this.Lf?this.Lf.getMediaUrl():void 0}Ef(){this.vf.addEventListener(this.yf.AdErrorEvent.Type.AD_ERROR,this.Af),this.xf.addEventListener(this.yf.AdErrorEvent.Type.AD_ERROR,this.Af),Object.keys(this.yf.AdEvent.Type).forEach((t=>{this.xf.addEventListener(this.yf.AdEvent.Type[t],this.kf,!1)}))}Rf(){this.vf.removeEventListener(this.yf.AdErrorEvent.Type.AD_ERROR,this.Af),this.xf.removeEventListener(this.yf.AdErrorEvent.Type.AD_ERROR,this.Af),Object.keys(this.yf.AdEvent.Type).forEach((t=>{this.xf.removeEventListener(this.yf.AdEvent.Type[t],this.kf,!1)}))}Tf(t){return t===k.zc.Fullscreen?this.yf.ViewMode.FULLSCREEN:this.yf.ViewMode.NORMAL}Df(t){return ni.BANNED_IMA_ADS_ID.some((i=>i===t))}If(t){const i=t.getUserRequestContext();return!i||i.id===this.wf.id}ks(t){if(this.Lf=t.getAd(),this.Df(this.Lf.getAdId()))return void this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.VpaidInvalid}});this.Sf.next(this.Lf.getCreativeId());let i=-1,e="";try{i=this.Lf.getSkipTimeOffset();const s=t.getAdData().clickThroughUrl;e=(0,H.QM)(s)?s:void 0}catch(t){}(0,ri.A)(this.Pf,e).then((t=>{t?this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.DomainBlocked}}):this.Pu.next({type:k.fI.AdLoaded,payload:{skipOffset:i}})}))}destroy(){try{this.Rf(),setTimeout((()=>{this.xf.destroy()}))}catch(t){}}}const hi={ImaObjectNotFound:Jt.ImaObjectNotFound,ImaScriptFailure:Jt.ImaScriptFailure},ai="//imasdk.googleapis.com/js/sdkloader/ima3.js";class ci{static preloadImaSdk(t){(0,it._w)(ai,t)}static fetchImaSdk(t,i){return new Promise(((e,n)=>{const r=ci.Ff(t);if(r)return void e(r);const o=i&&1===(0,wt.Vm)([95,5]);(0,it.dZ)({src:ai},t.document.head,t,(()=>{const i=ci.Ff(t);i?e(i):(o&&(0,s.n)({message:"AdManager_ImaIntegrator_no_image_object_found_after_loading_script",level:s.D.CRITICAL},{throttle:2,sendMaxLog:!1}),n(hi.ImaObjectNotFound))}),(()=>{n(hi.ImaScriptFailure)}),o,"AdManager_ImaIntegrator_unable_to_insert_ima_sdk_script")}))}static Ff(t){return t.google&&t.google.ima}}class li extends si{constructor(t,i){super(t,i),this.kp=t,this.settings=i,this.Lp=null,this.adMediaType="ima",this.adSourceType=r.ProtoAdsourceTypeEnum.Ima,this.$f=[],this.Lp=this.settings.imaAdSlotContainer,this.jf=new oi(this.settings.imaSdk,this.settings.os,this.settings.imaAdsLoader,this.settings.url,this.settings.imaAdsManager,this.settings.requestAdsContext,this.settings.adManagerLineItem.protoLineItem.publisherLineItemId)}initAd(t,i,e,s,n,r,o){try{super.initAd(t,i,e,s,n,r,o),this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled&&this.Vf(),this.$f.push(this.jf.onVpaidEvent.subscribe((t=>{this.qp(t)})),this.jf.onCreativeReceived.subscribe((t=>{this.creativeId=t}))),this.jf.initAd(t,i,e,s,n,{slot:this.Cp,videoSlot:this.Mp})}catch(t){this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.jf.startAd()}catch(t){this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){try{super.stopAd(t),this.jf.stopAd(t)}catch(t){this.gf("ImaBidAdaptor","stopAd",t)}}resizeAd(t,i,e){try{this.jf.resizeAd(t,i,e)}catch(t){this.gf("ImaBidAdaptor","resizeAd",t)}}pauseAd(){try{this.jf.pauseAd()}catch(t){this.gf("ImaBidAdaptor","pauseAd",t)}}resumeAd(){try{this.jf.resumeAd()}catch(t){this.gf("ImaBidAdaptor","resumeAd",t)}}expandAd(){try{this.jf.expandAd()}catch(t){this.gf("ImaBidAdaptor","expandAd",t)}}collapseAd(){try{this.jf.collapseAd()}catch(t){this.gf("ImaBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.jf.skipAd()}catch(t){this.gf("ImaBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.jf.getAdRemainingTime()}catch(t){return this.gf("ImaBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.jf&&this.jf.getAdDuration()||this.settings.adManagerLineItem.protoLineItem.duration}catch(t){return this.gf("ImaBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.jf.getAdVolume()}catch(t){return this.gf("ImaBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){return{width:this.jf.getAdMediaWidth(),height:this.jf.getAdMediaHeight()}}setAdVolume(t){try{super.setAdVolume(t),this.jf.setAdVolume(t)}catch(t){this.gf("ImaBidAdaptor","setAdVolume",t)}}get adVideoUrl(){return this.jf.getMediaFile()}get declaredDurationInSeconds(){return this.jf.getAdDuration()}af(t){const i=super.af(t);return i.payload.adSourceData.imaMetadata=t.payload.imaMetadata,i}uf(){return this.Lp}ff(){this.settings.adSlotContainerRecycler.recycleAdSlot(this.Lp)}Vf(){ci.fetchImaSdk(this.settings.globalDomUtilsService.getGlobalClosestTop().topFrame,!1)}Dc(){try{super.Dc(),(0,Pt.i)(this.$f),this.jf.destroy()}catch(t){this.gf("ImaBidAdaptor","_destroy",t)}}}class di{constructor(t,i,e,s,n,r,o){this.yf=t,this.vf=i,this.il=e,this.el=s,this.bf=n,this.Bf=r,this.Ne=o,this.Nf=new rt.x,this.Uf=new rt.x,this.Hf={id:(0,wt.qs)()},this.xf=null,this.Af=t=>{if(!this.If(t))return;switch(t.getError().getErrorCode()){case this.yf.AdError.ErrorCode.VAST_EMPTY_RESPONSE:this.qf(Ht.ImaVastEmptyResponse);break;case this.yf.AdError.ErrorCode.VAST_WRAPPER_ERROR:case this.yf.AdError.ErrorCode.VAST_MALFORMED_RESPONSE:this.qf(Ht.ImaInvalidResponse);break;default:this.qf(Ht.ImaRequestException)}},this.zf=t=>{this.If(t)&&(this.xf=t.getAdsManager(this.Bf,{loadVideoTimeout:25*I.s_}),this.Wf(),this.Nf.next({imaAdsManager:this.xf,requestAdsContext:this.Hf}))},this.vf.addEventListener(this.yf.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.zf),this.vf.addEventListener(this.yf.AdErrorEvent.Type.AD_ERROR,this.Af)}get onSuccess(){return this.Nf.asObservable()}get onError(){return this.Uf.asObservable()}loadAd(){const t=new this.yf.AdsRequest;t.adTagUrl=this.bf,t.linearAdSlotWidth=t.nonLinearAdSlotWidth=this.il,t.linearAdSlotHeight=t.nonLinearAdSlotHeight=this.el,t.pageUrl=this.Ne,this.vf.requestAds(t,this.Hf)}qf(t){this.Uf.next(t)}Wf(){this.vf.removeEventListener(this.yf.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.zf),this.vf.removeEventListener(this.yf.AdErrorEvent.Type.AD_ERROR,this.Af)}If(t){const i=t.getUserRequestContext();return!i||i.id===this.Hf.id}destroy(){var t;try{this.Wf(),null===(t=this.xf)||void 0===t||t.destroy()}catch(t){}}}var ui;!function(t){t[t.Transient=0]="Transient",t[t.Singleton=1]="Singleton",t[t.ResolutionScoped=2]="ResolutionScoped",t[t.ContainerScoped=3]="ContainerScoped"}(ui||(ui={}));const pi=ui;var fi=function(t,i){return fi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])},fi(t,i)};function gi(t,i){function e(){this.constructor=t}fi(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}function mi(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function yi(t,i){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var s,n,r=e.call(t),o=[];try{for(;(void 0===i||i-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return o}function vi(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(yi(arguments[i]));return t}function bi(t){return!!t.useClass}function xi(t){return!!t.useFactory}var wi=function(){function t(t){this.wrap=t,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return t.prototype.createProxy=function(t){var i,e=this,s=!1;return new Proxy({},this.createHandler((function(){return s||(i=t(e.wrap()),s=!0),i})))},t.prototype.createHandler=function(t){var i={};return this.reflectMethods.forEach((function(e){i[e]=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];i[0]=t();var n=Reflect[e];return n.apply(void 0,vi(i))}})),i},t}();function _i(t){return"string"==typeof t||"symbol"==typeof t}function Pi(t){return"object"==typeof t&&"token"in t&&"transform"in t}function Si(t){return!!t.useToken}function Ai(t){return null!=t.useValue}const Ii=function(){function t(){this.Gf=new Map}return t.prototype.entries=function(){return this.Gf.entries()},t.prototype.getAll=function(t){return this.ensure(t),this.Gf.get(t)},t.prototype.get=function(t){this.ensure(t);var i=this.Gf.get(t);return i[i.length-1]||null},t.prototype.set=function(t,i){this.ensure(t),this.Gf.get(t).push(i)},t.prototype.setAll=function(t,i){this.Gf.set(t,i)},t.prototype.has=function(t){return this.ensure(t),this.Gf.get(t).length>0},t.prototype.clear=function(){this.Gf.clear()},t.prototype.ensure=function(t){this.Gf.has(t)||this.Gf.set(t,[])},t}();const ki=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return gi(i,t),i}(Ii);const Ci=function(){this.scopedResolutions=new Map};function Ti(t,i,e){var s,n,r=yi(t.toString().match(/constructor\(([\w, ]+)\)/)||[],2)[1],o=function(t,i){return null===t?"at position #"+i:'"'+t.split(",")[i].trim()+'" at position #'+i}(void 0===r?null:r,i);return s="Cannot inject the dependency "+o+' of "'+t.name+'" constructor. Reason:',void 0===n&&(n="    "),vi([s],e.message.split("\n").map((function(t){return n+t}))).join("\n")}var Mi=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return gi(i,t),i}(Ii),Ei=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return gi(i,t),i}(Ii);const Bi=function(){this.preResolution=new Mi,this.postResolution=new Ei};var Li=new Map,Oi=function(){function t(t){this.parent=t,this.Jf=new ki,this.interceptors=new Bi}return t.prototype.register=function(t,i,e){var s;if(void 0===e&&(e={lifecycle:pi.Transient}),s=function(t){return bi(t)||Ai(t)||Si(t)||xi(t)}(i)?i:{useClass:i},Si(s))for(var n=[t],r=s;null!=r;){var o=r.useToken;if(n.includes(o))throw new Error("Token registration cycle detected! "+vi(n,[o]).join(" -> "));n.push(o);var h=this.Jf.get(o);r=h&&Si(h.provider)?h.provider:null}if((e.lifecycle===pi.Singleton||e.lifecycle==pi.ContainerScoped||e.lifecycle==pi.ResolutionScoped)&&(Ai(s)||xi(s)))throw new Error('Cannot use lifecycle "'+pi[e.lifecycle]+'" with ValueProviders or FactoryProviders');return this.Jf.set(t,{provider:s,options:e}),this},t.prototype.registerType=function(t,i){return _i(i)?this.register(t,{useToken:i}):this.register(t,{useClass:i})},t.prototype.registerInstance=function(t,i){return this.register(t,{useValue:i})},t.prototype.registerSingleton=function(t,i){if(_i(t)){if(_i(i))return this.register(t,{useToken:i},{lifecycle:pi.Singleton});if(i)return this.register(t,{useClass:i},{lifecycle:pi.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var e=t;return i&&!_i(i)&&(e=i),this.register(t,{useClass:e},{lifecycle:pi.Singleton})},t.prototype.resolve=function(t,i){void 0===i&&(i=new Ci);var e=this.getRegistration(t);if(!e&&_i(t))throw new Error('Attempted to resolve unregistered dependency token: "'+t.toString()+'"');if(this.executePreResolutionInterceptor(t,"Single"),e){var s=this.resolveRegistration(e,i);return this.executePostResolutionInterceptor(t,s,"Single"),s}if(function(t){return"function"==typeof t||t instanceof wi}(t)){s=this.construct(t,i);return this.executePostResolutionInterceptor(t,s,"Single"),s}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},t.prototype.executePreResolutionInterceptor=function(t,i){var e,s;if(this.interceptors.preResolution.has(t)){var n=[];try{for(var r=mi(this.interceptors.preResolution.getAll(t)),o=r.next();!o.done;o=r.next()){var h=o.value;"Once"!=h.options.frequency&&n.push(h),h.callback(t,i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(s=r.return)&&s.call(r)}finally{if(e)throw e.error}}this.interceptors.preResolution.setAll(t,n)}},t.prototype.executePostResolutionInterceptor=function(t,i,e){var s,n;if(this.interceptors.postResolution.has(t)){var r=[];try{for(var o=mi(this.interceptors.postResolution.getAll(t)),h=o.next();!h.done;h=o.next()){var a=h.value;"Once"!=a.options.frequency&&r.push(a),a.callback(t,i,e)}}catch(t){s={error:t}}finally{try{h&&!h.done&&(n=o.return)&&n.call(o)}finally{if(s)throw s.error}}this.interceptors.postResolution.setAll(t,r)}},t.prototype.resolveRegistration=function(t,i){if(t.options.lifecycle===pi.ResolutionScoped&&i.scopedResolutions.has(t))return i.scopedResolutions.get(t);var e,s=t.options.lifecycle===pi.Singleton,n=t.options.lifecycle===pi.ContainerScoped,r=s||n;return e=Ai(t.provider)?t.provider.useValue:Si(t.provider)?r?t.instance||(t.instance=this.resolve(t.provider.useToken,i)):this.resolve(t.provider.useToken,i):bi(t.provider)?r?t.instance||(t.instance=this.construct(t.provider.useClass,i)):this.construct(t.provider.useClass,i):xi(t.provider)?t.provider.useFactory(this):this.construct(t.provider,i),t.options.lifecycle===pi.ResolutionScoped&&i.scopedResolutions.set(t,e),e},t.prototype.resolveAll=function(t,i){var e=this;void 0===i&&(i=new Ci);var s=this.getAllRegistrations(t);if(!s&&_i(t))throw new Error('Attempted to resolve unregistered dependency token: "'+t.toString()+'"');if(this.executePreResolutionInterceptor(t,"All"),s){var n=s.map((function(t){return e.resolveRegistration(t,i)}));return this.executePostResolutionInterceptor(t,n,"All"),n}var r=[this.construct(t,i)];return this.executePostResolutionInterceptor(t,r,"All"),r},t.prototype.isRegistered=function(t,i){return void 0===i&&(i=!1),this.Jf.has(t)||i&&(this.parent||!1)&&this.parent.isRegistered(t,!0)},t.prototype.reset=function(){this.Jf.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},t.prototype.clearInstances=function(){var t,i;try{for(var e=mi(this.Jf.entries()),s=e.next();!s.done;s=e.next()){var n=yi(s.value,2),r=n[0],o=n[1];this.Jf.setAll(r,o.filter((function(t){return!Ai(t.provider)})).map((function(t){return t.instance=void 0,t})))}}catch(i){t={error:i}}finally{try{s&&!s.done&&(i=e.return)&&i.call(e)}finally{if(t)throw t.error}}},t.prototype.createChildContainer=function(){var i,e,s=new t(this);try{for(var n=mi(this.Jf.entries()),r=n.next();!r.done;r=n.next()){var o=yi(r.value,2),h=o[0],a=o[1];a.some((function(t){return t.options.lifecycle===pi.ContainerScoped}))&&s.Jf.setAll(h,a.map((function(t){return t.options.lifecycle===pi.ContainerScoped?{provider:t.provider,options:t.options}:t})))}}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(i)throw i.error}}return s},t.prototype.beforeResolution=function(t,i,e){void 0===e&&(e={frequency:"Always"}),this.interceptors.preResolution.set(t,{callback:i,options:e})},t.prototype.afterResolution=function(t,i,e){void 0===e&&(e={frequency:"Always"}),this.interceptors.postResolution.set(t,{callback:i,options:e})},t.prototype.getRegistration=function(t){return this.isRegistered(t)?this.Jf.get(t):this.parent?this.parent.getRegistration(t):null},t.prototype.getAllRegistrations=function(t){return this.isRegistered(t)?this.Jf.getAll(t):this.parent?this.parent.getAllRegistrations(t):null},t.prototype.construct=function(t,i){var e=this;if(t instanceof wi)return t.createProxy((function(t){return e.resolve(t,i)}));var s=Li.get(t);if(!s||0===s.length){if(0===t.length)return new t;throw new Error('TypeInfo not known for "'+t.name+'"')}var n=s.map(this.resolveParams(i,t));return new(t.bind.apply(t,vi([void 0],n)))},t.prototype.resolveParams=function(t,i){var e=this;return function(s,n){var r,o,h,a;try{return"object"==typeof(a=s)&&"token"in a&&"multiple"in a?Pi(s)?s.multiple?(r=e.resolve(s.transform)).transform.apply(r,vi([e.resolveAll(s.token)],s.transformArgs)):(o=e.resolve(s.transform)).transform.apply(o,vi([e.resolve(s.token,t)],s.transformArgs)):s.multiple?e.resolveAll(s.token):e.resolve(s.token,t):Pi(s)?(h=e.resolve(s.transform,t)).transform.apply(h,vi([e.resolve(s.token,t)],s.transformArgs)):e.resolve(s,t)}catch(t){throw new Error(Ti(i,n,t))}}},t}(),Ri=new Oi;var Di="injectionTokens";const Fi=function(){return function(t){Li.set(t,function(t){var i=Reflect.getMetadata("design:paramtypes",t)||[],e=Reflect.getOwnMetadata(Di,t)||{};return Object.keys(e).forEach((function(t){i[+t]=e[t]})),i}(t))}};const $i=function(){return function(t){Fi()(t),Ri.registerSingleton(t)}};if("undefined"==typeof Reflect||!Reflect.getMetadata)throw new Error("tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.");class ji{constructor(t=Ri){this.Qf=t}static getInstance(){return this.Yf||(this.Yf=new ji),this.Yf}static getGlobalContainer(){return this.getInstance().globalContainer}get globalContainer(){return this.Qf}}var Vi=h(655),Ni=h(5720),Ui=function(t){function i(i,e){return t.call(this)||this}return(0,Vi.ZT)(i,t),i.prototype.schedule=function(t,i){return void 0===i&&(i=0),this},i}(Ni.w0),Hi={setInterval:function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e=Hi.delegate;return((null==e?void 0:e.setInterval)||setInterval).apply(void 0,(0,Vi.ev)([],(0,Vi.CR)(t)))},clearInterval:function(t){var i=Hi.delegate;return((null==i?void 0:i.clearInterval)||clearInterval)(t)},delegate:void 0},qi=h(3699),zi=function(t){function i(i,e){var s=t.call(this,i,e)||this;return s.scheduler=i,s.work=e,s.pending=!1,s}return(0,Vi.ZT)(i,t),i.prototype.schedule=function(t,i){if(void 0===i&&(i=0),this.closed)return this;this.state=t;var e=this.id,s=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(s,e,i)),this.pending=!0,this.delay=i,this.id=this.id||this.requestAsyncId(s,this.id,i),this},i.prototype.requestAsyncId=function(t,i,e){return void 0===e&&(e=0),Hi.setInterval(t.flush.bind(t,this),e)},i.prototype.recycleAsyncId=function(t,i,e){if(void 0===e&&(e=0),null!=e&&this.delay===e&&!1===this.pending)return i;Hi.clearInterval(i)},i.prototype.execute=function(t,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var e=this.Zf(t,i);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},i.prototype.Zf=function(t,i){var e,s=!1;try{this.work(t)}catch(t){s=!0,e=t||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),e},i.prototype.unsubscribe=function(){if(!this.closed){var i=this.id,e=this.scheduler,s=e.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,qi.P)(s,this),null!=i&&(this.id=this.recycleAsyncId(e,i,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},i}(Ui),Wi={now:function(){return(Wi.delegate||Date).now()},delegate:void 0},Gi=function(){function t(i,e){void 0===e&&(e=t.now),this.schedulerActionCtor=i,this.now=e}return t.prototype.schedule=function(t,i,e){return void 0===i&&(i=0),new this.schedulerActionCtor(this,t).schedule(e,i)},t.now=Wi.now,t}(),Ji=new(function(t){function i(i,e){void 0===e&&(e=Gi.now);var s=t.call(this,i,e)||this;return s.actions=[],s.Kf=!1,s.tg=void 0,s}return(0,Vi.ZT)(i,t),i.prototype.flush=function(t){var i=this.actions;if(this.Kf)i.push(t);else{var e;this.Kf=!0;do{if(e=t.execute(t.state,t.delay))break}while(t=i.shift());if(this.Kf=!1,e){for(;t=i.shift();)t.unsubscribe();throw e}}},i}(Gi))(zi),Qi=Ji,Yi=h(1480),Xi=h(8474);function Zi(t){return t&&(0,Xi.m)(t.schedule)}function Ki(t,i,e){void 0===t&&(t=0),void 0===e&&(e=Qi);var s=-1;return null!=i&&(Zi(i)?e=i:s=i),new Yi.y((function(i){var n,r=(n=t)instanceof Date&&!isNaN(n)?+t-e.now():t;r<0&&(r=0);var o=0;return e.schedule((function(){i.closed||(i.next(o++),0<=s?this.schedule(void 0,s):i.complete())}),r)}))}var te,ie=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},ee=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)};let se=te=class{constructor(){var t,i;this.ig=new Map,this.eg=0,this.sg=(void 0===(t=te.TIME_BETWEEN_TICKS)&&(t=0),void 0===i&&(i=Ji),t<0&&(t=0),Ki(t,t,i)),this.sg.subscribe((()=>this.ng()))}setTimeout(t,i=0){return this.rg(t,i,!0)}clearTimeout(t){this.ig.delete(t)}setInterval(t,i=0){return this.rg(t,i,!1)}clearInterval(t){this.ig.delete(t)}hg(t){try{t.callback()}catch(t){(0,s.n)({message:"TimerService_error",callStack:t.stack,exception:t.message,level:s.D.INFO},{throttle:1})}}ng(){const t=(new Date).getTime(),i=[];for(const[e,s]of this.ig)t-s.startTime<s.duration*(s.intervalTimesCalled+1)||(this.hg(s),s.isTimeout?i.push(e):s.intervalTimesCalled++);for(const t of i)this.ig.delete(t)}rg(t,i,e){const s=++this.eg;return this.ig.set(s,{startTime:(new Date).getTime(),isTimeout:e,callback:t,duration:i,intervalTimesCalled:0}),s}};se.TIME_BETWEEN_TICKS=100,se=te=ie([$i(),ee("design:paramtypes",[])],se);class ne{constructor(t){this.settings=t,this.ag=!1,this.cg=[],this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime(),this.dg=this.settings.adSlotContainerRecycler.requestAdSlotIma(this.settings.adContainer);const t=new Promise(((t,i)=>{setTimeout((()=>{i(Ht.ImaTimeout)}),25e3)})),i=this.ug(this.dg);return Promise.race([i,t]).then((t=>(this.metrics.fetchEnd=(new Date).getTime(),this.ag=!0,this.pg&&(0,Pt.i)(this.cg),t))).catch((t=>{throw this.metrics.fetchEnd=(new Date).getTime(),this.ag=!0,this.pg&&((0,Pt.i)(this.cg),this.pg.destroy(),this.settings.adSlotContainerRecycler.recycleAdSlot(this.dg)),t}))}ug(t){return t.fetchImaDependencies().then((t=>(this.fg=t,this.gg(t)))).then((t=>this.mg(t))).catch((t=>{throw(0,H.$K)(t)?t:Ht.ImaRequestException}))}gg(t){return this.ag?Promise.reject():new Promise(((i,e)=>{const s=this.yg();this.pg=new di(t.imaSdk,t.imaAdsLoader,s.width,s.height,this.settings.url,this.dg.videoSlot,this.settings.pageUrl),this.cg.push(this.pg.onSuccess.subscribe((t=>{i(t)})),this.pg.onError.subscribe((t=>{e(t)}))),this.pg.loadAd()}))}yg(){return this.settings.callingState.adContainerState.get(this.settings.adManagerLineItem.protoLineItem.adType)}mg(t){const i=ji.getGlobalContainer().resolve(se);return new li(i,{id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,url:this.settings.url,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,externalCreativeId:this.settings.creativeId,imaSdk:this.fg.imaSdk,imaAdsLoader:this.fg.imaAdsLoader,imaAdsManager:t.imaAdsManager,requestAdsContext:t.requestAdsContext,imaAdSlotContainer:this.dg,bidSlotId:this.settings.bidSlotId,pageUrl:this.settings.pageUrl,urlSuffixerService:this.settings.urlSuffixerService})}}var re,oe,he,ae=h(2324);!function(t){t[t.Javascript=0]="Javascript",t[t.Video=1]="Video"}(re||(re={})),function(t){function i(t){return/^\s*$/.test(t)?null:/^(?:true|false)$/i.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):isFinite(Date.parse(t))?new Date(t):"string"==typeof t?t.trim():t}t.JXONTree=function t(e){let s=0,n="";if(this.keyAttributes||(this.keyAttributes={}),e.hasChildNodes()){for(let i,s,r,o=0;o<e.childNodes.length;o++)i=e.childNodes.item(o),(i.nodeType-1|1)===Node.TEXT_NODE?n+=i.nodeType===Node.TEXT_NODE?i.nodeValue.trim():i.nodeValue:1!==i.nodeType||i.prefix||(s=i.nodeName.toLowerCase(),r=new t(i),this.hasOwnProperty(s)?(this[s].constructor!==Array&&(this[s]=[this[s]]),this[s].push(r)):this[s]=r);this.keyValue=n?i(n):null}if(void 0===e.hasAttributes?e.attributes.length>0:e.hasAttributes()){let t;for(;s<e.attributes.length;s++)t=e.attributes.item(s),this.keyAttributes[t.name.toLowerCase()]=i(t.value.trim())}},t.getKeyValue=function(t){if(t&&t.keyValue)return t.keyValue},t.decodeXMLText=function(t){if("string"==typeof t)return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")}}(oe||(oe={}));class ce{constructor(t){this.vg=["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],this.bg="VPAID",this.delivery=void 0,this.type=void 0,this.width=0,this.height=0,this.codec=void 0,this.id=void 0,this.bitrate=void 0,this.minBitrate=void 0,this.maxBitrate=void 0,this.scalable=void 0,this.maintainAspectRatio=void 0,this.apiFramework=void 0,this.src=void 0,this.delivery=t.keyAttributes.delivery,this.type=t.keyAttributes.type,this.width=t.keyAttributes.width,this.height=t.keyAttributes.height,this.codec=t.keyAttributes.codec,this.id=t.keyAttributes.id,this.bitrate=t.keyAttributes.bitrate,this.minBitrate=t.keyAttributes.minbitrate,this.maxBitrate=t.keyAttributes.maxbitrate,this.scalable=t.keyAttributes.scalable,this.maintainAspectRatio=t.keyAttributes.maintainaspectratio,this.apiFramework=t.keyAttributes.apiframework,this.src=oe.getKeyValue(t)}isSupported(){return!("application/x-shockwave-flash"===this.type||"video/x-flv"===this.type)}getMediaFileType(){return this.apiFramework===this.bg||(0,l.d3)(this.type,this.vg)?re.Javascript:re.Video}}class le{constructor(t){this.clickThrough=void 0,this.clickTrackings=[],this.customClicks=[],this.clickThrough=oe.getKeyValue(t.clickthrough),this.clickTrackings=this.xg((0,l.qo)(t.clicktracking)),this.customClicks=this.xg((0,l.qo)(t.customclick))}xg(t){const i=[];return void 0!==t[0]&&t.forEach((t=>{i.push(oe.getKeyValue(t))})),i}}class de{constructor(t){this.duration=void 0,this.mediaFiles=[],this.trackingEvents=[],this.skipoffset=void 0,this.videoClicks=void 0,this.duration=(0,ae.pP)(oe.getKeyValue(t.duration)),this.skipoffset=(0,ae.QI)(t.keyAttributes.skipoffset,this.duration),t.mediafiles&&(this.mediaFiles=this.wg((0,l.qo)(t.mediafiles.mediafile))),t.trackingevents&&(this.trackingEvents=he.parseTrackingEvents((0,l.qo)(t.trackingevents.tracking),this.duration)),t.videoclicks&&(this.videoClicks=new le(t.videoclicks)),t.adparameters&&(this.adParameters=oe.getKeyValue(t.adparameters),t.adparameters["@xmlEncoded"]&&(this.adParameters=oe.decodeXMLText(this.adParameters)))}wg(t){const i=[];return void 0!==t[0]&&t.forEach((t=>{const e=new ce(t);e.isSupported()&&i.push(e)})),i}isSupported(){return!0}}class ue{constructor(t){var i;this.minSuggestedDuration=void 0,this.staticResource={},this.htmlResource={},this.iframeResource={},this.nonLinearClickTracking={},this.id=t.keyAttributes.id,this.width=t.keyAttributes.width,this.height=t.keyAttributes.height,this.expandedWidth=t.keyAttributes.expandedheight,this.expandedHeight=t.keyAttributes.expandedwidth,this.scalable=t.keyAttributes.scalable,this.maintainAspectRatio=t.keyAttributes.maintainaspectratio,this.apiFramework=t.keyAttributes.apiframework,this.minSuggestedDuration=(0,ae.pP)(t.keyAttributes.minsuggestedduration),this.nonLinearClickThrough=null===(i=t.nonlinearclickthrough)||void 0===i?void 0:i.keyValue,t.nonlinearclicktracking&&(this.nonLinearClickTracking.id=t.nonlinearclicktracking.keyAttributes.id,this.nonLinearClickTracking.uri=t.nonlinearclicktracking.keyValue),t.staticresource&&(this.staticResource.creativeType=t.staticresource.keyAttributes.creativetype,this.staticResource.uri=t.staticresource.keyValue),t.iframeresource&&(this.iframeResource.uri=t.iframeresource.keyValue),t.htmlresource&&(this.htmlResource.uri=t.htmlresource.keyValue)}isSupported(){return"VPAID"===this.apiFramework?((0,s.n)({message:"AdManager_NonLinearAd_VPAID_found",level:s.D.INFO}),!1):this.width&&this.height?!(!this.staticResource.creativeType||!this.staticResource.uri)||(this.htmlResource.uri&&(0,s.n)({message:"AdManager_NonLinearAd_htmlResource_found",level:s.D.INFO}),this.iframeResource.uri&&(0,s.n)({message:"AdManager_NonLinearAd_iframeResource_found",level:s.D.INFO}),!1):((0,s.n)({message:"AdManager_NonLinearAd_no_dimensions",level:s.D.INFO}),!1)}}class pe{constructor(t){this.nonLinearAdList=[],this.trackingEvents=[],t.nonlinear&&(this.nonLinearAdList=this._g((0,l.qo)(t.nonlinear))),t.trackingevents&&(this.trackingEvents=he.parseTrackingEvents((0,l.qo)(t.trackingevents.tracking))),t.adparameters&&(this.adParameters=oe.getKeyValue(t.adparameters),t.adparameters["@xmlEncoded"]&&(this.adParameters=oe.decodeXMLText(this.adParameters)))}isSupported(){return!0}_g(t){const i=[];return t.forEach((t=>{const e=new ue(t);e.isSupported()&&i.push(e)})),i}}class fe{constructor(t){if(this.id=void 0,this.sequence=void 0,this.adId=void 0,this.linear=void 0,this.nonLinear=void 0,this.id=t.keyAttributes.id,this.sequence=t.keyAttributes.sequence,this.adId=t.keyAttributes.adid,t.linear)try{this.linear=new de(t.linear)}catch(t){(0,s.n)({callStack:t.stack,level:s.D.WARN,exception:t.message,message:"Creative_Linear"})}if(t.nonlinearads)try{this.nonLinear=new pe(t.nonlinearads)}catch(t){(0,s.n)({callStack:t.stack,level:s.D.WARN,exception:t.message,message:"Creative_NonLinear"})}}isSupported(){return!0}}class ge{constructor(t,i){this.name=t.keyAttributes.event,this.uri=oe.getKeyValue(t),"progress"===this.name&&(this.offset=(0,ae.QI)(t.keyAttributes.offset,i))}}!function(t){function i(t){const i=[];return void 0!==t[0]&&t.forEach((t=>{i.push(oe.getKeyValue(t))})),i}t.parseImpressions=function(t){return i(t)},t.parseCretives=function(t){const i=[];return t.forEach((t=>{i.push(new fe(t))})),i},t.parseErrors=function(t){return i(t)},t.parseTrackingEvents=function(t,i){const e=[];return void 0!==t[0]&&t.forEach((t=>{e.push(new ge(t,i))})),e}}(he||(he={}));class me{constructor(t){var i;this.description=void 0,this.advertiser=void 0,this.surveys=void 0,this.errors=void 0,this.pricing=void 0,this.extensions=void 0,this.adTitle=oe.getKeyValue(t.adtitle),this.adSystem=oe.getKeyValue(t.adsystem),this.impressions=he.parseImpressions((0,l.qo)(t.impression)),this.creatives=(null===(i=t.creatives)||void 0===i?void 0:i.creative)?he.parseCretives((0,l.qo)(t.creatives.creative)):[],this.description=oe.getKeyValue(t.description),this.advertiser=oe.getKeyValue(t.advertiser),this.surveys=oe.getKeyValue(t.survey),this.errors=he.parseErrors((0,l.qo)(t.error)),this.pricing=oe.getKeyValue(t.pricing),this.extensions=oe.getKeyValue(t.extensions)}isSupported(){return!0}}class ye{constructor(t){var i;this.adSystem=void 0,this.impressions=[],this.VASTAdTagURI=void 0,this.creatives=[],this.errors=void 0,this.extensions=void 0,this.fallowAdditionalWrappers=void 0,this.allowMultipleAds=void 0,this.fallbackOnNoAd=void 0,this.adSystem=oe.getKeyValue(t.adsystem),this.impressions=he.parseImpressions((0,l.qo)(t.impression)),this.VASTAdTagURI=oe.getKeyValue(t.vastadtaguri),this.creatives=(null===(i=t.creatives)||void 0===i?void 0:i.creative)?he.parseCretives((0,l.qo)(t.creatives.creative)):[],this.errors=he.parseErrors((0,l.qo)(t.error)),this.extensions=t.extensions,this.fallowAdditionalWrappers=!t.keyAttributes.followadditionalwrappers||t.keyAttributes.followadditionalwrappers,this.allowMultipleAds=t.keyAttributes.allowmultipleads,this.fallbackOnNoAd=t.keyAttributes.fallbackonnoad}}class ve{constructor(t){Array.isArray(t)?this.Pg(t):this.Sg(t)}isSupported(){return!0}Sg(t){this.id=t.keyAttributes.id,this.sequence=t.keyAttributes.sequence,t.inline?this.inLine=new me(t.inline):t.wrapper&&(this.wrapper=new ye(t.wrapper))}Pg(t){const i=t.filter((t=>{const i=this.Ag(t).filter((t=>t.linear));return!!(0,l.BZ)(i)}));(0,l.BZ)(i)&&this.Sg(i[0])}Ag(t){return t.inline?(0,l.qo)(t.inline.creatives.creative):t.wrapper?(0,l.qo)(t.wrapper.creatives.creative):[]}}class be{constructor(t=2){this.kg=t}parseVastXml(t){try{if(!this.Cg(t))return{error:!0,errorReason:Ht.XmlInvalidString};if(this.Tg(t))return{error:!0,errorReason:Ht.XmlInvalidAd};const i=(new DOMParser).parseFromString(t,"application/xml"),e=new oe.JXONTree(i.documentElement);if(!this.Mg(e,this.kg))return{error:!0,errorReason:Ht.XmlInvalidTree};const s=new ve(e.ad);return this.Eg(s)?{error:!1,result:s}:{error:!0,errorReason:Ht.XmlInvalidAd}}catch(t){return{error:!0,errorReason:Ht.XmlParseGeneral}}}Cg(t){return(0,H.QM)(t)}Tg(t){return ni.KEYWORDS_FOR_BANNED_VAST.some((i=>t.includes(i)))}Mg(t,i){if(!t.ad)return!1;const e=parseInt(t.keyAttributes.version,10);return!(e&&e<i)}Eg(t){const i=t.wrapper,e=t.inLine;if(!e&&!i)return!1;if(i&&!i.VASTAdTagURI)return!1;if(!i){const t=[...e.creatives].filter((t=>{var i;return null===(i=null==t?void 0:t.linear)||void 0===i?void 0:i.mediaFiles.length})),i=[...e.creatives].filter((t=>{var i;return null===(i=null==t?void 0:t.nonLinear)||void 0===i?void 0:i.nonLinearAdList.length}));if(!(0,l.BZ)(t)&&!(0,l.BZ)(i))return!1}return!0}}class xe{constructor(t){this.mediaFiles=[],this.nonLinearFiles=[],this.adTitle=void 0,this.adParameters=void 0,this.linearClickThrough=void 0,this.creativeId=void 0,t.forEach((t=>{t.inLine?(this.adTitle=t.inLine.adTitle,this.fp(t.inLine.creatives)):t.wrapper&&this.fp(t.wrapper.creatives)}))}gp(t){this.duration=t.duration,this.Bg(t.mediaFiles),this.Og(t.skipoffset),this.Rg(t.adParameters),t.videoClicks&&t.videoClicks.clickThrough&&this.Dg(t.videoClicks.clickThrough)}Fg(t){this.$g(t.nonLinearAdList),this.Rg(t.adParameters)}$g(t){this.nonLinearFiles=[...this.nonLinearFiles,...t]}Rg(t){this.adParameters=t}Og(t){this.skipoffset=t}Bg(t){this.mediaFiles=[...this.mediaFiles,...t]}Dg(t){this.linearClickThrough=t}fp(t){t.forEach((t=>{this.creativeId=t.id,t.linear&&this.gp(t.linear),t.nonLinear&&this.Fg(t.nonLinear)}))}}var we,_e=h(2817);!function(t){t[t.FirstQuartile=0]="FirstQuartile",t[t.SecondQuartile=1]="SecondQuartile",t[t.ThirdQuartile=2]="ThirdQuartile",t[t.FourthQuartile=3]="FourthQuartile"}(we||(we={}));var Pe,Se,Ae,Ie;!function(t){t.absolute="absolute",t.relative="relative"}(Pe||(Pe={})),function(t){t.auto="auto",t.all="all"}(Se||(Se={})),function(t){t.errorIframe="Error creating iframe"}(Ae||(Ae={}));class ke{constructor(t,i,e){this._r=t,this.ca=i,this.en=e}jg(t,i,e){let s=!1;return n=>{n.contentWindow&&!s&&(s=!0,this.Vg(n,this.Ug(t,i),e))}}Hg(t,i,e,s,n,r,o,h,a,c=!0){return this.qg(t,this.jg(i,e,s),n,r,o,h,a,c)}qg(t,i,e=Pe.absolute,s=Se.auto,n,r,o,h=!0){const a=this._r.createElement("iframe",r);let c="100%",l="100%";return(null==o?void 0:o.scalable)?(c=o.scalable.maxHeightPercent+"%",l=o.scalable.maxWidthPercent+"%"):(null==o?void 0:o.width)&&(null==o?void 0:o.height)&&(c=o.height+"px",l=o.width+"px"),a.allow="autoplay",a.src="javascript:false",a.srcdoc="",a.width=l,a.height=c,a.style.position=e,a.style.left="0",a.style.top="0",a.style.margin="0px",a.style.padding="0px",a.style.border="0px",a.style.width=l,a.style.height=c,a.style.pointerEvents=s,h||(a.style.display="none"),a.setAttribute("SCROLLING","NO"),null==n||n.forEach((t=>{a.setAttribute(t.key,t.value)})),a.onload=()=>{i(a)},t.appendChild(a),i(a),a}Vg(t,i,e){const s=(0,it.LT)(t);(class{static executeAsync(t,i){this.zg(t)(i)}static Wg(t){return!!t.cnxProxyTask}static zg(t){return this.Wg(t)||this.Jg(t),t.cnxProxyTask}static Jg(t){const i=t.document.head;(0,it.ML)(i,t,"\n    window.cnxProxyTask = function(task) {\n        setTimeout(function(){\n            task();\n        }, 0);\n    }\n")}}).executeAsync(s,(()=>{try{const e=t.contentWindow&&t.contentWindow.document;e.open(),e.write(i)}catch(i){this.Qg(t,i),t=null}e(t)}))}Ug(t,i){return Object.keys(i).forEach((function(e){const s="object"==typeof i[e]?JSON.stringify(i[e]):i[e];t=t.replace(new RegExp(`{{${e}}}`,"g"),s)})),t}loadIframe(t){const i='<!DOCTYPE html><html lang="en"><head>'+(t.customHead?t.customHead:"")+'<meta charset="UTF-8"></head><body style="margin:0;padding:0">'+(t.customHtml?t.customHtml:"")+'<script type="text/javascript">window.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'*\');<\/script></body></html>',e="cnx-iframe_"+(0,wt.qs)();return new Promise(((n,r)=>{const o=i=>{if(null===i)return void r(Ae.errorIframe);const s=t=>{let o;try{o=JSON.parse(t.data)}catch(t){return}o.id===e&&(i.contentWindow?(i.contentWindow.document.close(),i.contentWindow.removeEventListener("message",s),n({iframe:i})):r("The Iframe is no longer in the DOM"))};try{if(i.contentWindow.addEventListener("message",s),!t.customReportingLog||!this.ca)return;const{advertiserLineItemId:e,heavyAdBlockTypeEnum:n}=t.customReportingLog;this.Yg=new u(this.Xg.contentWindow,this.ca,{advertiserLineItemId:e,heavyAdBlockTypeEnum:n})}catch(t){this.Qg(i,t),r("Iframe callback error")}};try{this.Xg=this.Hg(t.container,i,{iframeID:e},o,t.iframePosition,t.iframePointerEvents,t.customIframeAttributes,this.en,t.iframeCustomDimensions,t.visible)}catch(t){(0,s.n)({message:"IframeLoader_error_creating_iframe",level:s.D.WARN,exception:t.message,callStack:t.stack})}}))}get iframe(){return this.Xg}destroy(){var t;null===(t=this.Yg)||void 0===t||t.destroy(),this.Xg=null}Qg(t,i){this._r.isDetachedFromDOM(t)?(0,s.n)({message:"iframeLoader_(inDom_false)",exception:i.message,callStack:i.stack,level:s.D.WARN},{sendMaxLog:!1,throttle:1}):(0,s.n)({message:"iframeLoader_(inDom_true)",exception:i.message,callStack:i.stack,level:s.D.WARN},{sendMaxLog:!1,throttle:1}),(0,it.bX)(t)}}!function(t){t.Html="text/html",t.Javascript="application/javascript"}(Ie||(Ie={}));const Ce=`\n            <div id=cnx-htmlBidAdaptor-id class=cnx-ad-close-non-linear-button>\n                ${h(5522)}\n            </div>`.trim();class Te{constructor(t,i,e,s,n,r,o,h){this.Zg=t,this.Kg=i,this.tm=e,this.Cp=s,this._r=n,this.ca=r,this.im=o,this.nm=h,this.rm="div-cnx-display",this.om=new rt.x,this.hm=new rt.x,this.Uf=new rt.x,this.am=new rt.x,this.lm=t=>{this.hm.next()},this.dm=t=>{this.am.next()}}get onDisplayAd(){return this.om.asObservable()}get onError(){return this.Uf.asObservable()}get onClickClose(){return this.hm.asObservable()}get onClickAd(){return this.am.asObservable()}createBanner(t){this.um=new ke(this._r,this.ca),this.pm=t?this.fm(this.Cp,t):this.Cp;let i="";this.tm===Ie.Html&&(i=this.Kg);let e="",s="";switch(this.Zg){case r.ProtoAdType.Overlay:e=`#${this.rm}{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}`,s=`#${this.rm}{border:3px solid white}`;break;case r.ProtoAdType.Nonlinear:e=`#${this.rm}{width: 100%; height: 100%}`}const n="<style>html, body {position:relative;width:100%;height:100%}"+e+s+"#"+this.rm+" iframe{display:block}</style>";this.um.loadIframe({customHead:n,customHtml:'<div id="'+this.rm+'">'+i+"</div>",container:this.pm,customReportingLog:{heavyAdBlockTypeEnum:r.ProtoHeavyAdBlockTypeEnum.OverlayIframe,advertiserLineItemId:this.im},iframePosition:this.Zg===r.ProtoAdType.Nonlinear?Pe.relative:Pe.absolute,iframeCustomDimensions:this.nm?this.nm:void 0,iframePointerEvents:Se.all}).then((t=>{this.gm=t.iframe;const i=this.gm.contentWindow;if(this.vm=i.document.getElementById(this.rm),this.tm===Ie.Javascript&&(0,it.ML)(this.vm,i,this.Kg),""===this.gm.contentWindow.document.head.innerHTML){const t=n;this.bm(t)}(0,it.AX)(this.gm.contentWindow,"AdHtmlWrapper"),this.Zg===r.ProtoAdType.Nonlinear&&this.xm(),this.om.next()})).catch((t=>{this.Uf.next()}))}getAdMediaDimensions(){return{width:this.vm.clientWidth||this.gm.contentWindow.document.body.clientWidth,height:this.vm.clientHeight||this.gm.contentWindow.document.body.clientHeight}}destroy(){var t;null===(t=this.vm)||void 0===t||t.removeEventListener("click",this.dm),this.wm&&(this.wm.removeEventListener("click",this.lm),this.pm.removeChild(this.wm)),this.gm&&this.Cp&&(0,it.bX)(this.gm),this.um&&(this.um.destroy(),this.um=null)}xm(){var t;this.wm=this._r.createElementByString(Ce),this.pm.appendChild(this.wm),this.wm.addEventListener("click",this.lm),null===(t=this.vm)||void 0===t||t.addEventListener("click",this.dm)}bm(t){const i=this.gm.contentWindow.document.createElement("style"),e=this.gm.contentWindow.document.createTextNode(t);i.appendChild(e),this.gm.contentWindow.document.head.appendChild(i)}fm(t,i){if(!i.width||!i.height)return t;let e,s;if(this.Zg===r.ProtoAdType.Nonlinear)e=s="100%";else e=i.width+"px",s=i.height+"px";const n=this._r.createElementByString(`<div class="cnx-iframe-container" style="width: ${e}; height: ${s}"></div>`);return t.appendChild(n),n}}class Me extends a._{constructor(t,i,e,s){super(),this.imageUrl=t,this._m=i,this.ca=e,this.im=s,this.om=new rt.x,this.Uf=new rt.x,this.am=new rt.x,this.hm=new rt.x,this.wu=[]}get onDisplayAd(){return this.om.asObservable()}get onError(){return this.Uf.asObservable()}get onClickAd(){return this.am.asObservable()}get onClickClose(){return this.hm.asObservable()}destroy(){var t;null===(t=this.Pm)||void 0===t||t.destroy()}initializeAd(t,i,e,s){this.Am=t,this.Im(s,i,e)}getAdMediaDimensions(){var t;return null===(t=this.Pm)||void 0===t?void 0:t.getAdMediaDimensions()}Im(t,i,e){this.km=this._m.createElement("img"),this.km.onload=()=>{this.Cm(t,i,e)},this.km.onerror=()=>{this.Uf.next(Jt.VastNonLinearImageLoadFailure)},this.km.src=this.imageUrl}Cm(t,i,e){const s=this.Tm(t,i,e);this.Mm(s,t,i)}Tm(t,i,e){let s;return s=t?this.Em(i,e):`height:${i.height}px; width: ${i.width}px;`,`<img src="${this.imageUrl}" style="${s} display: block; pointer-events: all; cursor: pointer">`}Mm(t,i,e){this.Pm=new Te(r.ProtoAdType.Nonlinear,t,Ie.Html,this.Am,this._m,this.ca,this.im,{height:e.height,width:e.width,scalable:i?{maxHeightPercent:V.NON_LINEAR_MAX_HEIGHT_PERCENT,maxWidthPercent:V.NON_LINEAR_MAX_WIDTH_PERCENT}:null}),this.wu.push(this.Pm.onDisplayAd.subscribe((()=>{this.om.next()})),this.Pm.onClickClose.subscribe((()=>{this.hm.next()})),this.Pm.onClickAd.subscribe((()=>{this.am.next()})),this.Pm.onError.subscribe((()=>{this.Uf.next(Jt.DisplayIntegratorIframeLoad)}))),this.Pm.createBanner(e)}Em(t,i){const e=(0,_t.Tc)(i.height,V.NON_LINEAR_MAX_HEIGHT_PERCENT),s=(0,_t.Tc)(i.width,V.NON_LINEAR_MAX_WIDTH_PERCENT),n=t.height/e;return t.width/s>n?"width: 100%;":"height: 100%;"}}class Ee{constructor(t,i=0,e=1e3){this.kp=t,this.timerDuration=i,this.Bm=e,this.Lm=0,this.Om=null,this.Rm=!1,this.Dm=!1,this.Fm=new rt.x,this.$m=new rt.x,this.jm=new rt.x,this.Nm=[{event:we.FirstQuartile,quartile:1},{event:we.SecondQuartile,quartile:2},{event:we.ThirdQuartile,quartile:3},{event:we.FourthQuartile,quartile:4}],this.Um=null,this.Hm=()=>{this.qm(),this.Fm.next(),this.zm(this.Lm,this.timerDuration),this.Wm(),this.Gm=(new Date).getTime()},i||this.disable()}start(){this.Dm=!0,null===this.Om&&this.Jm()}stop(){this.Dm=!1,null!==this.Om&&(this.qm(),this.Qm())}reset(t){t&&(this.timerDuration=t),this.Lm=0,this.Rm=!1,this.Um=null,(null!==this.Om||this.Dm)&&(this.Qm(),this.Jm())}get timeElapsed(){return this.Lm}get timeRemaining(){return this.timerDuration-this.Lm}disable(){this.Rm=!0,this.Qm()}get onTimeUpdate(){return this.Fm.asObservable()}get onTimeElapsed(){return this.$m.asObservable()}get onQuartile(){return this.jm.asObservable()}qm(){this.Lm+=(new Date).getTime()-this.Gm}Jm(){this.Rm||(this.Wm(),this.Gm=(new Date).getTime(),this.Om=this.kp.setInterval(this.Hm,this.Bm))}Qm(){this.kp.clearInterval(this.Om),this.Om=null}Ym(){this.disable(),this.$m.next(),this.Lm=0}Wm(){this.Lm/I.s_>=this.timerDuration/I.s_&&this.Ym()}zm(t,i){const e=Math.floor((0,_t.dQ)(0,i,1,4,t));this.Um<=e&&this.Nm.forEach((({event:t,quartile:i})=>{i===e&&i!==this.Um&&(this.jm.next(t),this.Um=i)}))}}const Be={[we.FirstQuartile]:k.fI.AdVideoFirstQuartile,[we.SecondQuartile]:k.fI.AdVideoMidpoint,[we.ThirdQuartile]:k.fI.AdVideoThirdQuartile,[we.FourthQuartile]:k.fI.AdVideoComplete};class Le extends si{constructor(t,i){super(t,i),this.kp=t,this.settings=i,this.adMediaType="nonLinearVast",this.adSourceType=r.ProtoAdsourceTypeEnum.VastMedia,this.Xm=[],this.Bm=500,this.Zm=0,this.nonLinearOnClick=()=>{this.ty.nonLinearClickTracking.uri&&this.settings.globalDomUtilsService.trackWithImages([this.ty.nonLinearClickTracking.uri]),this.ty.nonLinearClickThrough&&this.settings.globalDomUtilsService.open(this.ty.nonLinearClickThrough,_e.bS.Blank),this.qp({type:k.fI.AdClickThru,payload:{}})}}initAd(t,i,e,s,n,r,o){try{if(super.initAd(t,i,e,s,n,r,o),this.ty=this.iy(),!this.ty)return void this.qp({type:k.fI.AdError,payload:{errorMessage:Jt.NonLinearUnsupportedMedia}});this.ey(),this.sy(),this.qp({type:k.fI.AdLoaded,payload:{}})}catch(t){this.qp({type:k.fI.AdError,payload:{errorMessage:Jt.AdaptorInitAdError+`_${t.message}`}})}}startAd(){super.startAd(),this.ny.start(),this.Xm.push(this.oy.onDisplayAd.subscribe((()=>{this.qp({type:k.fI.AdStarted}),this.qp({type:k.fI.AdVideoStart}),this.qp({type:k.fI.AdImpression,payload:{}})})),this.oy.onError.subscribe((t=>{this.qp({type:k.fI.AdError,payload:{errorMessage:t}})})),this.oy.onClickAd.subscribe((()=>this.nonLinearOnClick())),this.oy.onClickClose.subscribe((()=>{this.qp({type:k.fI.AdUserClose,payload:{}}),this.stopAd(k.r5)})));const t={height:this.ty.height,width:this.ty.width},i={height:this.Mp.clientHeight,width:this.Mp.clientWidth};this.oy.initializeAd(this.Cp,t,i,this.ty.scalable)}get adVideoUrl(){return this.hy}get declaredDurationInSeconds(){return this.Zm/I.s_}getAdMediaSize(){var t;return null===(t=this.oy)||void 0===t?void 0:t.getAdMediaDimensions()}resizeAd(t,i,e){}pauseAd(){this.ny.stop()}resumeAd(){this.ny.start()}expandAd(){}collapseAd(){}getAdRemainingTime(){return this.ny.timeRemaining}getAdDuration(){return this.Zm/I.s_}getAdVolume(){return 0}ey(){this.ty.staticResource&&(this.oy=new Me(this.ty.staticResource.uri,this.settings.globalDomUtilsService,this.settings.trackingService,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId),this.hy=this.ty.staticResource.creativeType,this.ly())}ly(){this.Mp.style.visibility="hidden"}sy(){var t;this.Zm=(null===(t=this.settings.adManagerLineItem.protoLineItem.nonlinearLineItemSettings)||void 0===t?void 0:t.nonLinearAdTimeSeconds)*I.s_,this.ny=new Ee(this.kp,this.Zm,this.Bm),this.Xm.push(this.ny.onTimeUpdate.subscribe((()=>{this.qp({type:k.fI.AdRemainingTimeChange})})),this.ny.onTimeElapsed.subscribe((()=>{this.stopAd("nonLinearTimerElapsed")})),this.ny.onQuartile.subscribe((t=>{this.qp({type:Be[t],payload:{}})})))}Dc(){var t,i;try{super.Dc(),null===(t=this.ny)||void 0===t||t.stop(),(0,Pt.i)(this.Xm),null===(i=this.oy)||void 0===i||i.destroy()}catch(t){this.gf("NonLinearBidAdaptor","_destroy",t)}}iy(){let t;if(t=this.settings.vastResponse.nonLinearFiles.find((t=>!0===t.scalable)),!t){const i=(0,_t.Tc)(this.Mp.clientHeight,V.NON_LINEAR_MAX_HEIGHT_PERCENT);t=this.settings.vastResponse.nonLinearFiles.find((t=>t.height<=i&&t.width<=this.Mp.clientWidth))}return t}}function Oe(t,i){t.sort(((t,i)=>t.width===i.width?t.bitrate-i.bitrate:t.width-i.width));for(let e=0;e<t.length;e++)if(t[e].width>=i)return t[e-1]||t[e];return t[t.length-1]}const Re=()=>`cnx_bid_slot_${(0,wt.qs)()}`,De={enableWorker:!1,capLevelToPlayerSize:!0,cnxRenderWindow:window,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:0};class Fe{constructor(t,i,e,s,n){this.uy=t,this.py=i,this.gy=e,this._m=s,this.my=n,this.yy=[],this.vy=(t,i)=>{if(i.fatal)switch(i.type){case this.uy.ErrorTypes.NETWORK_ERROR:if(i.details===this.uy.ErrorDetails.MANIFEST_PARSING_ERROR||i.details===this.uy.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.by();this.xy.startLoad();break;case this.uy.ErrorTypes.MEDIA_ERROR:this.xy.recoverMediaError();break;default:this.by()}},this.wy=()=>{this.xy.off(this.uy.Events.MEDIA_ATTACHED,this.wy),this.xy.loadSource(this.py),this.xy.once(this.uy.Events.MANIFEST_PARSED,this._y)},this._y=()=>{this.xy.off(this.uy.Events.MANIFEST_PARSED,this._y),this.Py(),this.my.forceMaxLevel&&this.Sy(),this.my.forceResolutionHeight&&this.Ay(this.my.forceResolutionHeight),this.Iy()},(this.my.forceMaxLevel||this.my.forceResolutionHeight)&&(De.capLevelToPlayerSize=!1)}start(t,i){this.Iy=t,this.by=i,this.uy&&this.uy.isSupported()?(this.xy=new this.uy(Object.assign(Object.assign({},De),{cnxRenderWindow:this._m.global})),this.ky()):this.by()}destroy(){this.xy&&(this.xy.destroy(),this.xy=null)}ky(){this.xy.on(this.uy.Events.ERROR,this.vy),this.xy.attachMedia(this.gy),this.xy.once(this.uy.Events.MEDIA_ATTACHED,this.wy)}Sy(){const t=this.xy.levels.length-1;this.Cy(t)}Ay(t){const i=this.yy.find((i=>i.height===t));i&&this.Cy(i.level)}Cy(t){this.xy.currentLevel=t,this.xy.startLevel=t,this.xy.nextLevel=t}Py(){this.xy.levels.forEach(((t,i)=>{this.yy.find((({height:i})=>i===t.height))||this.yy.push({level:i,height:t.height})}))}}var $e=h(2356);const je="huffpost",Ve=540;class Ne extends Gt{constructor(t,i,e,n,r,o,h,a,c,l=!1,d){super(),this._r=t,this.Ty=i,this.Bf=e,this.ii=n,this.My=r,this.Ey=o,this.By=h,this.Ly=a,this.uy=c,this.Oy=l,this.ni=d,this.Ry=!1,this.pageFocus=new $e.v(this._r),this.Dy=Object.values(w),this.Fy=!1,this.$y=!0,this.jy=!1,this.Vy=[{event:k.fI.AdVideoStart,position:0},{event:k.fI.AdVideoFirstQuartile,position:25},{event:k.fI.AdVideoMidpoint,position:50},{event:k.fI.AdVideoThirdQuartile,position:75},{event:k.fI.AdVideoComplete,position:100}],this.Ny=this.Vy[0],this.Uy=t=>{try{switch(t.type){case w.Pause:if(this.Ey&&!this.$y)return this.$y=!0,void this.Hy("pause_event_loopAd");this.Fy=!1;break;case w.Play:if(!this.Fy&&this.Oy)return void this.Bf.pause();break;case w.Canplay:case w.Durationchange:this.zy();break;case w.Timeupdate:this.Wy();break;case w.Error:this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.VastVideoTagEventError}});break;case"click":this.Pu.next({type:k.fI.AdClickThru,payload:{}})}}catch(t){(0,s.n)({level:s.D.CRITICAL,callStack:t.stack,message:"AdManager_VastIntegrator_onVideoEvent",exception:t.message},{throttle:10,sendMaxLog:!1})}}}initAd(t,i,e,s,n,r){try{this.Bf=r.videoSlot,this.width=t,this.height=i,this.Dg(this.My,this.Bf.parentElement),this.resizeAd(t,i,e),this.addVideoEvents(this.Bf),this.Ly&&this.uy&&this.uy.isSupported()?this.Gy(this.uy):(this.Bf.setAttribute("src",this.Ty),this.Bf.setAttribute("preload","metadata"),this.Bf.load()),this.pageFocus.isDocumentVisible()||this.zy()}catch(t){this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.WrapperInitAdError+`_${t.message}`}})}}startAd(){try{(0,it.cn)(this.Bf,"cnx-ad-video-slot"),this.Fy=!0,this.pageFocus.isDocumentVisible()?this.Bf.play().then((()=>{this.Pu.next({type:k.fI.AdStarted}),this.Pu.next({type:k.fI.AdImpression,payload:{}})})).catch((t=>{this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.VastPlayPromiseReject}})})):(this.Pu.next({type:k.fI.AdStarted}),this.Pu.next({type:k.fI.AdImpression,payload:{}}),this.Bf.play())}catch(t){this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.WrapperStartAdError+`_${t.message}`}})}}stopAd(t){this.Oy&&this.Bf.pause(),"videoComplete"===t&&this.Ey?this.Pu.next({type:k.fI.AdStopped,payload:{shouldTrackPostBid:!1}}):this.Pu.next({type:k.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}resizeAd(t,i,e){(0,it.T7)(this.Bf,{width:`${t}px`,height:`${i}px`}),this.Pu.next({type:k.fI.AdSizeChange})}pauseAd(){this.Fy=!1,this.By&&void 0===this.Ny&&(this.Ny=this.Vy[0]),this.Bf.pause(),this.Pu.next({type:k.fI.AdPaused})}resumeAd(){this.Ey&&void 0===this.Ny&&(this.Ny=this.Vy[0]),this.Fy=!0,this.Hy("resumeAd"),this.ii===A.M.Ios&&(0,it.UR)(this.Bf),this.Pu.next({type:k.fI.AdPlaying})}expandAd(){}collapseAd(){}skipAd(){this.Pu.next({type:k.fI.AdSkipped})}getAdRemainingTime(){return this.Bf.duration-this.Bf.currentTime}getAdDuration(){return this.Bf.duration?this.Bf.duration:0}getAdVolume(){return this.Bf.volume}setAdVolume(t){this.Bf.volume=t}getAdMediaWidth(){return this.Bf.videoWidth}getAdMediaHeight(){return this.Bf.videoHeight}destroy(){if(!this.By&&!this.Ey)try{(0,it.IV)(this.Bf,"cnx-ad-video-slot"),this.Jy(this.Bf),this.Bf.removeAttribute("src"),this.Qy&&(this.Qy.destroy(),this.Qy=null)}catch(t){(0,s.n)({level:s.D.WARN,message:"AdManager_VastIntegrator_destroyAd",exception:t.message,callStack:t.stack})}}Gy(t){let i={forceMaxLevel:!0};this.ni&&this.ni.includes(je)&&(i={forceMaxLevel:!1,forceResolutionHeight:Ve}),this.Qy=new Fe(t,this.Ty,this.Bf,this._r,i),this.Qy.start((()=>{this.zy()}),(()=>{this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.CnxMediaSrcNotSupported}})}))}Dg(t,i){this.Yy=this._r.createElement("a"),t&&(this.Yy.href=t,this.Yy.target="_blank"),(0,it.cn)(this.Yy,"cnx-ad-slot"),i.appendChild(this.Yy),this.Yy.addEventListener("click",this.Uy)}addVideoEvents(t){this.Dy.forEach((i=>{t.addEventListener(i,this.Uy)})),this.Yy&&this.Yy.addEventListener("click",this.Uy)}Jy(t){this.Dy.forEach((i=>{t.removeEventListener(i,this.Uy)})),this.Yy&&this.Yy.removeEventListener("click",this.Uy)}zy(){this.Ry||(this.Ry=!0,this.Pu.next({type:k.fI.AdLoaded,payload:{}}))}Wy(){this.Pu.next({type:k.fI.AdRemainingTimeChange});const t=(0,_t.dQ)(0,this.Bf.duration,0,100,this.Bf.currentTime);if(this.Ny&&t>=this.Ny.position){this.jy||this.Pu.next({type:this.Ny.event});const t=this.Ny;this.Ny=this.Vy[this.Vy.indexOf(this.Ny)+1],t.event===k.fI.AdVideoComplete&&(this.Ey&&(this.Bf.currentTime=.01),this.$y=!1,this.stopAd("videoComplete"),this.jy=!0)}}Hy(t){try{this.Bf.play().catch((i=>(0,s.n)({level:s.D.WARN,message:`AdManager_VastIntegrator_play_${t}`,exception:`playError: ${i.message}`,callStack:i.stack})))}catch(i){(0,s.n)({level:s.D.WARN,message:`AdManager_VastIntegrator__play_${t}`,exception:`promiseError: ${i.message}`,callStack:i.stack})}}}class Ue{constructor(t,i,e,s,n){this.Xy=t,this._r=i,this.ca=e,this.Xt=s,this.im=n,this.Zy={bodyTamplate:`<div class="ad-element" id="cnx-ad-element"></div><script type="text/javascript" src="${this.Xy}"><\/script>'\n        <script type="text/javascript">\n            window.Object.defineProperty(Object.prototype, 'cnxInnerTag', { enumerable: !1, writable: !0, value: '${this.Xt}' });\n            window.Object.defineProperty(Function.prototype, 'cnxInnerTag',\n            { enumerable: !1, writable: !0, value: '${this.Xt}' });\n            cnxtimeouts = [];\n            cnxintervals = [];\n            oldSetTimeout = setTimeout;\n            setTimeout = function (e, t) { var n = oldSetTimeout.apply(null, arguments); return cnxtimeouts.push(n), n };\n            oldSetInterval = setInterval;\n            setInterval = function (e, t) { var n = oldSetInterval.apply(null, arguments); return cnxintervals.push(n), n };\n            clearAll = function () {\n                setTimeout = function () { };\n                setInterval = function () { };\n                for (var e = 0; e < cnxtimeouts.length; e++) {\n                    clearTimeout(cnxtimeouts[e]);\n                }\n                for (e = 0; e < cnxintervals.length; e++) {\n                    clearInterval(cnxintervals[e]);\n                }\n            };\n        <\/script>`,headTamplate:" <style>\n            html,\n            body,\n            .ad-element {\n                width: 100%;\n                height: 100%;\n            }\n            </style>"},this.um=new ke(this._r,this.ca)}Ky(t){return this.um.loadIframe({customHead:this.Zy.headTamplate,customHtml:this.Zy.bodyTamplate,container:t,customReportingLog:{heavyAdBlockTypeEnum:r.ProtoHeavyAdBlockTypeEnum.VpaidIframe,advertiserLineItemId:this.im}})}loadAdUnitIframe(t){return new Promise(((i,e)=>{this.Ky(t).then((t=>{t.adContainer=t.iframe.contentWindow.document.querySelector(".ad-element"),i(t)})).catch((t=>{e(t)}))}))}destroyAdUnit(){try{const t=this.um.iframe.contentWindow.clearAll;t&&t()}catch(t){(0,s.n)({message:"AdManager_VPAIClient_destroyAdUnit",exception:null==t?void 0:t.message,callStack:null==t?void 0:t.stack,level:s.D.WARN},{throttle:2,sendMaxLog:!0})}this.um.destroy(),this.um=null}}var He;!function(t){t[t.handshakeVersion=0]="handshakeVersion",t[t.initAd=1]="initAd",t[t.startAd=2]="startAd",t[t.stopAd=3]="stopAd",t[t.skipAd=4]="skipAd",t[t.resizeAd=5]="resizeAd",t[t.pauseAd=6]="pauseAd",t[t.resumeAd=7]="resumeAd",t[t.expandAd=8]="expandAd",t[t.collapseAd=9]="collapseAd",t[t.subscribe=10]="subscribe",t[t.unsubscribe=11]="unsubscribe"}(He||(He={}));class qe extends Gt{constructor(t,i,e,n,r,o,h){super(),this.Ty=t,this._r=i,this.ca=e,this.tv=n,this.im=r,this.Op=o,this.ii=h,this.iv=[],this.sv=new Set,this.nv=new Set,this.rv=(t,i,e)=>{const s={url:t,playerHandles:e};this.ov(k.fI.AdClickThru,s)},this.ov=(t,i)=>{if(this.nv.add(t),!this.sv.has(t))return t!==k.fI.AdImpression||this.nv.has(k.fI.AdLoaded)?void this.hv(t,i):((0,s.n)({message:"AdManager_AdVpaidWrapper_ImpressionBeforeAdLoaded",exception:`advertiserLineItemId:${this.im}_creativeId:${this.Op}_vpaidSrc:${this.Ty}`,callStack:JSON.stringify((0,l.ee)(this.nv)),level:s.D.WARN},{throttle:1e3}),this.sv.add(k.fI.AdLoaded),void this.hv(k.fI.AdLoaded,i))},this.hv=(t,i)=>{switch(t){case k.fI.AdError:this.Pu.next({type:k.fI.AdError,payload:{errorMessage:(0,H.HD)(i)?i:JSON.stringify(i)}});break;case k.fI.AdLoaded:this.Pu.next({type:k.fI.AdLoaded,payload:{skipOffset:(0,H.as)(i)?i.skipOffset:void 0}});break;case k.fI.AdImpression:this.Pu.next({type:k.fI.AdImpression,payload:{}});break;case k.fI.AdClickThru:this.Pu.next({type:k.fI.AdClickThru,payload:(0,H.as)(i)?i:{}});break;default:this.Pu.next({type:k.fI[t]})}}}initAd(t,i,e,s,n,r){try{this.il=t,this.el=i,this.Mf=e,this.av=s,this.lv=n,this.dv=r,this.uv=new Ue(this.Ty,this._r,this.ca,this.tv,this.im),this.fv=this.uv.loadAdUnitIframe(r.slot).then((t=>{this.gv(t)})).catch((t=>{this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.VpaidOnLoad}})}))}catch(t){this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.VpaidOnLoad}})}}startAd(){try{this.nv.has(k.fI.AdImpression)&&!this.sv.has(k.fI.AdImpression)&&((0,s.n)({message:"AdManager_AdVpaidWrapper_brokenImpressionHandle",exception:`advertiserLineItemId:${this.im}_creativeId:${this.Op}_vpaidSrc:${this.Ty}`,callStack:JSON.stringify((0,l.ee)(this.nv)),level:s.D.WARN},{throttle:1e3}),this.sv.add(k.fI.AdImpression),this.Pu.next({type:k.fI.AdImpression,payload:{}})),this.mv.startAd()}catch(t){this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.WrapperStartAdError}})}}stopAd(t){var i;null===(i=this.fv)||void 0===i||i.then((()=>{this.mv?this.mv.stopAd(t):(0,s.n)({message:"stopAd",exception:t,level:s.D.WARN})}))}resizeAd(t,i,e){this.mv.resizeAd(t,i,e)}pauseAd(){this.mv.pauseAd()}resumeAd(){this.mv.resumeAd(),this.ii===A.M.Ios&&(0,it.UR)(this.dv.videoSlot)}expandAd(){this.mv.expandAd()}collapseAd(){this.mv.collapseAd()}skipAd(){this.mv.skipAd()}getAdRemainingTime(){return this.mv.getAdRemainingTime()}getAdDuration(){var t;return null===(t=this.mv)||void 0===t?void 0:t.getAdDuration()}getAdVolume(){return this.mv.getAdVolume()}setAdVolume(t){this.mv.setAdVolume(t)}destroy(){var t;this.yv(),this.iv.length=0,this.mv=null,null===(t=this.uv)||void 0===t||t.destroyAdUnit()}gv(t){const i=t.iframe.contentWindow.getVPAIDAd;if("function"==typeof i){const e=i();this.mv=e,this.vv(),this.bv(e)?e.initAd(this.il,this.el,this.Mf,this.av,this.lv,{slot:t.adContainer,videoSlot:this.dv.videoSlot}):this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.VpaidInvalid}})}else this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.VpaidGetVpaidAdError}})}vv(){Object.keys(k.fI).forEach((t=>{let i=this.ov.bind(this,k.fI[t]);k.fI[t]===k.fI.AdClickThru&&(i=this.rv),this.iv.push({handler:i,event:t}),this.mv.subscribe(i,t)}))}yv(){this.iv.forEach((t=>{this.mv.unsubscribe(t.handler,t.event)}))}bv(t){return Object.keys((0,l.ti)(He)).every((i=>(0,H.mf)(t[He[i]])))}}var ze=h(525);class We extends si{constructor(t,i){super(t,i),this.kp=t,this.settings=i,this.adSourceType=r.ProtoAdsourceTypeEnum.Unknown,this.xv=[],this.creativeId=i.vastResponse.creativeId}initAd(t,i,e,s,n,o,h){try{super.initAd(t,i,e,s,n,o,h),(0,ri.A)(this.settings.adManagerLineItem.protoLineItem.publisherLineItemId,this.settings.vastResponse.linearClickThrough).then((n=>{var o;if(n)return void this.qp({type:k.fI.AdError,payload:{errorMessage:Jt.DomainBlocked}});if(this.wv=this._v(t,this.Mp),null===this.wv)return void this.qp({type:k.fI.AdError,payload:{errorMessage:Jt.VastUnsupportedMedia}});(null===(o=this.wv.src)||void 0===o?void 0:o.includes(ze.n.endPoints.base.video))&&(this.wv.src=this.pl.appendParamsToUrl(this.wv.src)),this.adMediaType=this.wv.type,this.wv.getMediaFileType()===re.Video?(this.Pv=new Ne(this.settings.globalDomUtilsService,this.wv.src,this.Mp,this.settings.os,this.settings.vastResponse.linearClickThrough,this.settings.loopAdWhenFinished),this.adSourceType=r.ProtoAdsourceTypeEnum.VastMedia):(this.Pv=new qe(this.wv.src,this.settings.globalDomUtilsService,this.settings.trackingService,this.sf,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.creativeId,this.settings.os),this.adSourceType=r.ProtoAdsourceTypeEnum.Vpaid),this.xv.push(this.Pv.onVpaidEvent.subscribe((t=>{if(t.type===k.fI.AdLoaded&&(t.payload.skipOffset=this.settings.vastResponse.skipoffset),t.type===k.fI.AdClickThru){this.Sv=t.payload.url;const i=t.payload.url||this.settings.vastResponse.linearClickThrough;i&&t.payload.playerHandles&&this.settings.globalDomUtilsService.open(i,_e.bS.Blank)}this.qp(t)})));const h={AdParameters:this.settings.vastResponse.adParameters,adParameters:this.settings.vastResponse.adParameters};this.Pv.initAd(t,i,e,s,h,{slot:this.Cp,videoSlot:this.Mp})})).catch((t=>this.Iv(t)))}catch(t){this.Iv(t)}}startAd(){try{super.startAd(),this.Pv.startAd()}catch(t){this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){super.stopAd(t),this.Pv?this.Pv.stopAd(t):(0,s.n)({message:"stopAd",exception:t,level:s.D.WARN})}resizeAd(t,i,e){try{this.Pv.resizeAd(t,i,e)}catch(t){this.gf("VastBidAdaptor","resizeAd",t)}}pauseAd(){try{this.Pv.pauseAd()}catch(t){this.gf("VastBidAdaptor","pauseAd",t)}}resumeAd(){try{this.Pv.resumeAd()}catch(t){this.gf("VastBidAdaptor","resumeAd",t)}}expandAd(){try{this.Pv.expandAd()}catch(t){this.gf("VastBidAdaptor","expandAd",t)}}collapseAd(){try{this.Pv.collapseAd()}catch(t){this.gf("VastBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.Pv.skipAd()}catch(t){this.gf("VastBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.Pv.getAdRemainingTime()}catch(t){return this.gf("VastBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.Pv&&this.Pv.getAdDuration()||Math.round(this.settings.vastResponse.duration/I.s_)}catch(t){return this.gf("VastBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.Pv.getAdVolume()}catch(t){return this.gf("VastBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){let t=0,i=0;return this.Pv instanceof Ne?(t=this.Pv.getAdMediaWidth(),i=this.Pv.getAdMediaHeight()):(t=this.wv.width,i=this.wv.height),{width:t,height:i}}setAdVolume(t){try{super.setAdVolume(t),this.Pv.setAdVolume(t)}catch(t){this.gf("VastBidAdaptor","setAdVolume",t)}}get adVideoUrl(){var t;return null===(t=this.wv)||void 0===t?void 0:t.src}get declaredDurationInSeconds(){return this.settings.vastResponse.duration/I.s_}cf(t){const i=super.cf(t);return this.kv(i)}af(t){const i=super.af(t);return this.kv(i)}Dc(){var t;if(!this.settings.loopAdWhenFinished)try{super.Dc(),(0,Pt.i)(this.xv),null===(t=this.Pv)||void 0===t||t.destroy()}catch(t){this.gf("VastBidAdaptor","_destroy",t)}}kv(t){var i;return t.payload.adSourceData.name=null===(i=this.settings.vastResponse)||void 0===i?void 0:i.adTitle,t.payload.clickThroughUrl=this.Sv||this.settings.vastResponse.linearClickThrough,t}Cv(t,i){return t.filter((t=>t.getMediaFileType()===re.Video&&i.canPlayType(t.type)))}_v(t,i){const e=this.Cv(this.settings.vastResponse.mediaFiles,i),s=e.filter((t=>"video/mp4"===t.type));if(s.length)return Oe(s,t);if(e.length)return Oe(e,t);const n=this.settings.vastResponse.mediaFiles.filter((t=>t.getMediaFileType()===re.Javascript));return n.length?Oe(n,t):null}Iv(t){this.Pu.next({type:k.fI.AdError,payload:{errorMessage:Jt.AdaptorInitAdError+`_${t.message}`}})}}class Ge{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()},this.settings.vastAdsChain||(this.settings.vastAdsChain=[]),void 0===this.settings.maxWrapperLimit&&(this.settings.maxWrapperLimit=10)}fetchBid(){return this.metrics.fetchStart=(new Date).getTime(),this.Tv(this.settings.xml).then((t=>(this.metrics.fetchEnd=(new Date).getTime(),t))).catch((t=>{throw this.metrics.fetchEnd=(new Date).getTime(),t}))}Tv(t){return new Promise(((i,e)=>{const s=new be(2).parseVastXml(t);!0!==s.error?(this.Mv(s.result),i(this.Ev(s.result))):e(s.errorReason)}))}Ev(t){return new Promise(((i,e)=>{if(t.wrapper){this.settings.maxWrapperLimit<=0&&e(Ht.XmlAdaptorWrapperLimit);const s=this.settings.maxWrapperLimit-1;i(new Xe({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,maxWrapperLimit:s,url:t.wrapper.VASTAdTagURI,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adMacroReplacer:this.settings.adMacroReplacer,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,trackingService:this.settings.trackingService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,requestWithCredentials:this.settings.requestWithCredentials,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,creativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,loopAdWhenFinished:this.settings.loopAdWhenFinished,pageUrl:this.settings.pageUrl,urlSuffixerService:this.settings.urlSuffixerService}).fetchBid())}else{let t;const e={id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,externalCreativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,urlSuffixerService:this.settings.urlSuffixerService},s=ji.getGlobalContainer().resolve(se);if(this.settings.adManagerLineItem.protoLineItem.adType===r.ProtoAdType.Nonlinear){const i=Object.assign(Object.assign({},e),{trackingService:this.settings.trackingService,vastResponse:new xe(this.settings.vastAdsChain)});t=new Le(s,i)}else{const i=Object.assign(Object.assign({},e),{vastResponse:new xe(this.settings.vastAdsChain),trackingService:this.settings.trackingService,loopAdWhenFinished:this.settings.loopAdWhenFinished});t=new We(s,i)}i(t)}}))}Mv(t){!function(t,i){const e=new Ft(t);i.adError.push(...Ut(e.errorUrls)),i.adImpression.push(...Ut(e.impressions)),i.adViewableImpression.push(...Ut(e.trackingEvents.viewable_impression)),i.adClick.push(...Ut(e.clickTrackings)),i.adMute.push(...Ut(e.trackingEvents.mute)),i.adPause.push(...Ut(e.trackingEvents.pause)),i.adQuartileFirst.push(...Ut(e.trackingEvents.firstQuartile)),i.adQuartileSecond.push(...Ut(e.trackingEvents.midpoint)),i.adQuartileThird.push(...Ut(e.trackingEvents.thirdQuartile)),i.adQuartileFourth.push(...Ut(e.trackingEvents.complete)),i.adResume.push(...Ut(e.trackingEvents.resume)),i.adSkip.push(...Ut(e.trackingEvents.skip)),i.adStarted.push(...Ut(e.trackingEvents.creativeView)),i.adVideoStart.push(...Ut([...e.trackingEvents.start])),i.adUnmute.push(...i.adUnmute,...Ut(e.trackingEvents.unmute)),i.adUserAcceptInvitation.push(...Ut([...e.trackingEvents.acceptInvitation,...e.trackingEvents.acceptInvitationLinear])),i.adUserClose.push(...Ut(e.trackingEvents.close)),i.adUserMinimize.push(...i.adUserMinimize,...Ut([...e.trackingEvents.collapse,...e.trackingEvents.playerCollapse,...e.trackingEvents.adCollapse]))}(t,this.settings.trackersInformation),this.settings.vastAdsChain.push(t)}}var Je,Qe=h(158);!function(t){t[t.None=0]="None",t[t.Ima=1]="Ima"}(Je||(Je={}));const Ye={[Je.Ima]:".g.doubleclick.net"};class Xe{constructor(t){this.settings=t,void 0===this.settings.requestWithCredentials&&(this.settings.requestWithCredentials=true),this.metrics={created:(new Date).getTime()}}fetchBid(){return this.metrics.fetchStart=(new Date).getTime(),this.Bv(this.settings.url).then((t=>t.fetchBid())).then((t=>(this.metrics.fetchEnd=(new Date).getTime(),t))).catch((t=>{throw this.metrics.fetchEnd=(new Date).getTime(),t}))}Ov(t){let i=Je.None;return Object.keys(Ye).forEach((e=>{t.includes(Ye[e])&&(i=parseInt(e,10))})),i}Bv(t){let i;try{i=this.Rv(t)}catch(t){return Promise.reject(Ht.InvalidCreativeUrl)}let e=this.Ov(t);switch(this.settings.adManagerLineItem.protoLineItem.adType===r.ProtoAdType.Nonlinear&&(e===Je.Ima&&(0,s.n)({message:"AdManager_VastUrlCallAdaptor_found_ima_in_nonLinear",level:s.D.INFO}),e=Je.None),e){case Je.None:return this.Dv(i);case Je.Ima:return this.Fv(i);default:return Promise.reject(Ht.HandlingSdkUrl)}}Fv(t){return Promise.resolve(new ne({url:t,id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,creativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,pageUrl:this.settings.pageUrl,urlSuffixerService:this.settings.urlSuffixerService}))}Dv(t){return Qe.n.fetchXMLRequest(t,this.settings.requestWithCredentials).catch((()=>!1===this.settings.requestWithCredentials?Promise.reject(Ht.NetworkRequestUrl):Qe.n.fetchXMLRequest(t,!1))).catch((()=>Promise.reject(Ht.NetworkRequestUrl))).then((t=>new Ge({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,vastAdsChain:this.settings.vastAdsChain,xml:t,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adMacroReplacer:this.settings.adMacroReplacer,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,trackingService:this.settings.trackingService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,requestWithCredentials:this.settings.requestWithCredentials,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,creativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,loopAdWhenFinished:this.settings.loopAdWhenFinished,pageUrl:this.settings.pageUrl,urlSuffixerService:this.settings.urlSuffixerService,interactionService:this.settings.interactionService})))}Rv(t){const{width:i,height:e}=this.settings.callingState.adContainerState.get(this.settings.adManagerLineItem.protoLineItem.adType),s={adHeight:e,adWidth:i,adPostion:this.settings.callingState.adBreakState.adBreakType},n={mediaDescription:this.settings.callingState.media.mediaDescription,mediaDuration:this.settings.callingState.media.mediaDuration,mediaId:this.settings.callingState.media.mediaId,mediaTitle:this.settings.callingState.media.mediaTitle,mediaUrl:this.settings.callingState.media.mediaUrl};return this.settings.adMacroReplacer.replace(t,this.settings.adManagerLineItem.protoLineItem.vendorId,{adMacros:s,mediaMacros:n})}}class Ze{constructor(t){this.data=t,(0,H.QM)(this.data.cnxBidId)||(this.data.cnxBidId=(0,wt.qs)())}}var Ke=h(7577);class ts{constructor(t,i,e,s,n,r,o){this.$v=t,this.jv=i,this.im=e,this._r=s,this.ca=n,this.Zg=r,this.Vv=o,this.om=new rt.x,this.hm=new rt.x,this.Uf=new rt.x,this.wu=[]}get onDisplayAd(){return this.om.asObservable()}get onError(){return this.Uf.asObservable()}get onClickClose(){return this.hm.asObservable()}initializeAd(t,i){try{let e;if(this.Zg===r.ProtoAdType.Nonlinear){const{width:t,height:i}=this.Vv;e={width:t,height:i}}this.Pm=new Te(this.Zg,this.jv,this.$v,t,this._r,this.ca,this.im,e),this.wu.push(this.Pm.onDisplayAd.subscribe((()=>{this.om.next()})),this.Pm.onError.subscribe((()=>{this.Uf.next(Jt.DisplayIntegratorIframeLoad)})),this.Pm.onClickClose.subscribe((()=>{this.hm.next()}))),this.Pm.createBanner(i)}catch(t){this.Uf.next(Jt.WrapperInitAdError)}}getAdMediaDimensions(){var t;return null===(t=this.Pm)||void 0===t?void 0:t.getAdMediaDimensions()}destroy(){var t;(0,Pt.i)(this.wu),null===(t=this.Pm)||void 0===t||t.destroy()}}const is={[we.FirstQuartile]:k.fI.AdVideoFirstQuartile,[we.SecondQuartile]:k.fI.AdVideoMidpoint,[we.ThirdQuartile]:k.fI.AdVideoThirdQuartile,[we.FourthQuartile]:k.fI.AdVideoComplete};class es extends si{constructor(t,i){var e;let s;super(t,i),this.kp=t,this.settings=i,this.adSourceType=r.ProtoAdsourceTypeEnum.Unknown,this.Bm=500,this.Nv=[],this.settings.adManagerLineItem.protoLineItem.adType===r.ProtoAdType.Nonlinear?(this.adMediaType="displayHtmlNonLinear",this.hy="htmlNonLinear",s=null===(e=this.settings.adManagerLineItem.protoLineItem.nonlinearLineItemSettings)||void 0===e?void 0:e.nonLinearAdTimeSeconds):(this.adMediaType="displayHtml",this.hy="html",s=this.settings.adManagerLineItem.protoLineItem.overlayTime);const n=s*I.s_;this.ny=new Ee(this.kp,n,this.Bm),this.Nv.push(this.ny.onTimeUpdate.subscribe((()=>{this.qp({type:k.fI.AdRemainingTimeChange})})),this.ny.onTimeElapsed.subscribe((()=>{this.stopAd("htmlTimerElapsed")})),this.ny.onQuartile.subscribe((t=>{this.qp({type:is[t],payload:{}})})))}get adVideoUrl(){return this.hy}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.overlayTime}initAd(t,i,e,s,n,r,o){try{super.initAd(t,i,e,s,n,r,o),this.il=t,this.el=i,this.qp({type:k.fI.AdLoaded,payload:{}})}catch(t){this.qp({type:k.fI.AdError,payload:{errorMessage:Jt.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.ny.start(),this.Uv=new ts(this.settings.mime,this.settings.html,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.settings.globalDomUtilsService,this.settings.trackingService,this.settings.adManagerLineItem.protoLineItem.adType,this.settings.dimensions),this.Nv.push(this.Uv.onDisplayAd.subscribe((()=>{this.qp({type:k.fI.AdStarted}),this.qp({type:k.fI.AdVideoStart}),this.qp({type:k.fI.AdImpression,payload:{}})})),this.Uv.onError.subscribe((t=>{this.qp({type:k.fI.AdError,payload:{errorMessage:t}}),this.ny.stop()})),this.Uv.onClickClose.subscribe((()=>{this.qp({type:k.fI.AdUserClose,payload:{}}),this.stopAd(k.r5)}))),this.Uv.initializeAd(this.Cp,{width:this.il,height:this.el})}catch(t){this.qp({type:k.fI.AdError,payload:{errorMessage:Jt.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){try{super.stopAd(t),this.ny.stop(),this.qp({type:k.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}catch(t){this.gf("HtmlBidAdaptor","stopAd",t)}}skipAd(){try{super.skipAd(),this.qp({type:k.fI.AdSkipped})}catch(t){this.gf("HtmlBidAdaptor","skipAd",t)}}pauseAd(){try{this.ny.stop(),this.qp({type:k.fI.AdPaused})}catch(t){this.gf("HtmlBidAdaptor","pauseAd",t)}}resumeAd(){try{this.ny.start(),this.qp({type:k.fI.AdPlaying})}catch(t){this.gf("HtmlBidAdaptor","resumeAd",t)}}collapseAd(){}expandAd(){}getAdDuration(){return this.ny.timerDuration/I.s_}getAdRemainingTime(){return this.ny.timeRemaining/I.s_}getAdVolume(){return 0}getAdMediaSize(){var t;return null===(t=this.Uv)||void 0===t?void 0:t.getAdMediaDimensions()}setAdVolume(t){}resizeAd(t,i,e){this.il=t,this.el=i}Dc(){var t;try{super.Dc(),this.ny.stop(),(0,Pt.i)(this.Nv),null===(t=this.Uv)||void 0===t||t.destroy()}catch(t){this.gf("HtmlBidAdaptor","_destroy",t)}}}class ss{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()}}fetchBid(){if(this.metrics.fetchStart=(new Date).getTime(),!this.Hv(this.settings.mime))return Promise.reject(Ht.HTMLUnknownMimeType);const t=ji.getGlobalContainer().resolve(se),i=new es(t,{id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,html:this.settings.html,mime:this.settings.mime,minDimensions:this.settings.dimensions,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,globalDomUtilsService:this.settings.globalDomUtilsService,trackingService:this.settings.trackingService,viewabilityService:this.settings.viewabilityService,adContainer:this.settings.adContainer,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,externalCreativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,urlSuffixerService:this.settings.urlSuffixerService,dimensions:this.settings.dimensions});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(i)}Hv(t){return Object.keys(Ie).some((i=>Ie[i]===t))}}var ns=h(6615),rs=h(1886),os=h(5348);class hs{constructor(t,i,e,s,n,r,o,h){this.qv=t,this.zv=i,this.vu=e,this.Wv=s,this.Gv=n,this.Jv=r,this.Qv=o,this.Yv=h,this.Xv=new Map,this.Zv=new Map}request(t){const{width:i,height:e}=t.callingState,n=this.Kv(i,e),r=this.tb(t);return!n||Object.keys(r.lineItems).length<=0?Promise.resolve({bids:[],noBids:[]}):this.ib(r).then((i=>(r.liveRampAtsEnvelope&&os.$.setEnvelopeStatus(i.liveRampEnvelopeStatus),this.eb(i,t)))).catch((t=>((0,s.n)({message:"RtbCallAggregator",exception:t.message,level:s.D.CRITICAL}),{bids:[],noBids:[]})))}destroy(){}eb(t,i){const e={bids:[],noBids:[]};return t.lineItemResponses.forEach((n=>{const o=mt(i.lineItemRequestDataList,n.id);if((0,H.$K)(n.cachedFloorPrice))this.Zv.set(n.id,n.cachedFloorPrice);else{const t={cachedFloorPriceOld:(0,H.r)(n.cachedFloorPriceOld)?n.cachedFloorPriceOld:void 0,predictedFloorPrice:n.predictedFloorPrice};this.Xv.set(n.id,t)}n.bids.forEach((n=>{const h=o.protoLineItem;if(n=Object.assign(Object.assign({},n),this.sb(h)),this.nb(h,n))return(0,s.n)({level:s.D.WARN,message:"RtbCallAggregator_nonLinear_banner_0_dimensions",exception:`lineItemId:${o.protoLineItem.advertiserLineItemId}`},{throttle:5}),void e.noBids.push(this.rb({connatixReason:r.ConnatixNoBidReasonEnum.InvalidResponse,floorPriceFactorIndex:n.floorPriceFactorIndex,partnerCustomHeaders:"",partnerReason:r.PartnerNoBidReasonEnum.Unknown,requestedFloorPrice:n.requestedFloorPrice,syncedUser:n.syncedUser},o,t));const a=this.ob(n,o,t,i.callingState);a&&e.bids.push(a)})),n.noBids.forEach((i=>{e.noBids.push(this.rb(i,o,t))}))})),e}sb(t){return{}}nb(t,i){var e;return vt(t.adType,null===(e=t.nonlinearLineItemSettings)||void 0===e?void 0:e.nonLinearRequestType)&&(!i.height||!i.width)}rb(t,i,e){var s;const n=null===(s=this.Xv.get(i.protoLineItem.advertiserLineItemId))||void 0===s?void 0:s.predictedFloorPrice;return{lineItem:i,requestMetadata:new Ze({requestedFloorPrice:t.requestedFloorPrice,requestedFloorPriceIndex:t.floorPriceFactorIndex,requestNumber:i.historicalMetrics.requestNumber,syncedUser:t.syncedUser,partnerCustomHeaders:t.partnerCustomHeaders,partnerReason:t.partnerReason,requestTrackingHandledByServer:!0,predictedFloorPrice:n}),reason:t.connatixReason}}ob(t,i,e,s){var n;const r=t,o=this.hb(r,i);let h;this.Xv.has(i.protoLineItem.advertiserLineItemId)&&(h=null===(n=this.Xv.get(i.protoLineItem.advertiserLineItemId))||void 0===n?void 0:n.predictedFloorPrice);const a=new Ze({requestedFloorPrice:r.requestedFloorPrice,requestedFloorPriceIndex:r.floorPriceFactorIndex,syncedUser:r.syncedUser,requestNumber:i.historicalMetrics.requestNumber,encryptedPrice:r.encryptedPrice,dspId:r.dspId,rtbAdomain:r.adomain,rtbSeatId:r.seatId,rtbCampainId:r.campaignId,cnxBidId:r.cnxBidId,requestTrackingHandledByServer:!0,logAuctionInformation:r.logAuctionInformation,predictedFloorPrice:h,auctionBidId:r.auctionBidId,rtbRequestId:r.rtbRequestId,liveRampAts:r.liveRampAts,floorPriceFactor:r.floorPriceFactor,floorPriceBypassReason:r.floorPriceBypassReason,floorPriceInformation:r.floorPriceInformation}),c=Re(),l={id:(0,wt.qs)(),adContainer:this.Gv.get(i.protoLineItem.adType),adEnforcer:this.Qv,adManagerLineItem:i,adSlotContainerRecycler:this.Yv,bidSlotId:c,callingState:s,globalDomUtilsService:this.vu.services.GlobalDomUtilsService,os:this.vu.config.os.os,replaceTrackingMacros:!0,requestMetadata:a,trackersInformation:o,urlSuffixerService:this.vu.services.UrlSuffixerService,viewabilityService:this.vu.services.ViewabilityService,creativeId:r.creativeId,interactionService:this.vu.services.InteractionService,obfuscatedPrice:r.gtkpbp,successRate:r.successRate,trackingService:this.vu.services.TrackingService};return this.ab(i.protoLineItem)?new Ge(Object.assign(Object.assign({},l),{xml:r.vastTag,adMacroReplacer:this.Wv,pageUrl:this.vu.config.pageUrl})):new ss(Object.assign(Object.assign({},l),{dimensions:{width:r.width,height:r.height},html:r.vastTag,mime:r.mime}))}ab(t){var i;return t.adType===r.ProtoAdType.Nonlinear&&(null===(i=t.nonlinearLineItemSettings)||void 0===i?void 0:i.nonLinearRequestType)===r.ProtoNonlinearRequestType.Video||t.adType===r.ProtoAdType.Video}hb(t,i){const e=new jt;Vt(i.protoLineItem.trackers,e);const s=[...t.billingNoticeUrlList,t.adQualityCheckUrl].filter((t=>(0,H.QM)(t))).map((t=>Nt(t)));return e.adImpression.push(...s),(0,H.QM)(t.winNoticeUrl)&&e.adWin.push(Nt(t.winNoticeUrl)),e}cb(t,i){if(t.protoLineItem.adType!==r.ProtoAdType.Overlay)return null;const e=i.adContainerState.get(r.ProtoAdType.Video),s=i.adContainerState.get(r.ProtoAdType.Overlay);return e.height!==s.height||e.width!==s.width?{width:s.width,height:s.height}:void 0}lb(t,i){const e={};return t.filter((t=>this.ub(t))).forEach((t=>{const s=t.adManagerLineItem,n=this.cb(s,i);let r,o;this.Zv.has(s.protoLineItem.advertiserLineItemId)?o=this.Zv.get(s.protoLineItem.advertiserLineItemId):this.Xv.has(s.protoLineItem.advertiserLineItemId)&&(r=this.Xv.get(s.protoLineItem.advertiserLineItemId));const h=this.pb(s);e[s.protoLineItem.advertiserLineItemId]=Object.assign({availableRequests:t.maxAvailableRequests,gdprConsent:this.vu.services.UserManagerService.isConsent(s.protoLineItem.vendorId),cachedFloorPriceOld:null==r?void 0:r.cachedFloorPriceOld,predictedFloorPrice:null==r?void 0:r.predictedFloorPrice,cachedFloorPrice:o,publisherLineItemId:s.protoLineItem.publisherLineItemId,slotHeight:null==n?void 0:n.height,slotWidth:null==n?void 0:n.width,requestNumber:s.historicalMetrics.requestNumber},h)})),e}pb(t){const i=yt({playerSkippability:this.zv.skippability,playerSkipMin:this.zv.skipMin,playerSkipAfter:this.zv.skipAdAfter,lineItemSkippability:t.protoLineItem.skippability,lineItemSkipMin:t.protoLineItem.skipMin}),e=i.skippable?r.ProtoSkipEnabledEnum.Yes:r.ProtoSkipEnabledEnum.No;return Object.assign(Object.assign({},i),{skip:e})}ub(t){return!!t.adManagerLineItem.protoLineItem.forceCallingInEveryAO||this.Jv.shouldRequestLineItem(t.adManagerLineItem.protoLineItem.advertiserLineItemId)}tb(t){const{width:i,height:e,viewability:s}=t.callingState,{playerWidth:n,playerHeight:r}=this.vu.services.TrackingService.getPlayerSize();return{metadata:this.vu.services.TrackingService.getMetadataModel(),gdprCompliant:this.vu.services.UserManagerService.isGDPR(),gdprConsentData:this.vu.services.UserManagerService.getConsentPayload(),soundOn:t.callingState.sound,videoHeight:e,videoWidth:i,testMode:"true"===(0,ns.Ph)("cnxRtbTest",this.vu.config.pageUrl),explorationMode:this.vu.config.explorationMode,viewability:s,outstream:this.qv,domainURL:this.vu.config.domainURL,isClickToPlay:t.callingState.clickToPlay,appVersion:this.vu.config.appVersion,deviceID:this.vu.services.UserManagerService.getDeviceId(),isCcpaBlockingUserInfo:!this.vu.services.UserManagerService.isSellUserAllowed(),usPrivacyString:this.vu.services.UserManagerService.getUsPrivacyString(),gdprConsentMode:this.vu.services.UserManagerService.gdprConsentMode,customMacros:this.vu.services.MacrosService.getExtraMacros(),maxAdDuration:t.maxAdDuration,lineItems:this.lb(t.lineItemRequestDataList,t.callingState),maxBidPrice:t.maxBidPrice,playerWidth:n,playerHeight:r,useNewSkippability:!0,liveRampAtsEnvelope:this.vu.services.UserManagerService.identityEnvelope}}ib(i){return Qe.n.sendProtoRequest({endpoint:ze.n.endPoints.api.rtb,ProtoRequest:r.ProtoRtbRequest,ProtoResponse:r.ProtoRtbResponse,requestData:i,queryParams:Object.assign({[Ke.Fk]:t.g.version},rs.f.getCidKeyValueObject()),logError:!1})}Kv(t,i){return 0!==t&&0!==i||((0,s.n)({message:"AdManager_BidderCaller_dimensions",exception:`width:${t}_height:${i}_destroyed:${f.S.playerDestroyed}`,level:s.D.CRITICAL},{throttle:5}),!1)}}var as;!function(t){t.AppNexus="appnexus",t.DistrictM="districtm",t.IndexExchange="ix",t.OneVideo="oneVideo",t.OpenX="openx",t.Pubmatic="pubmatic",t.RhythmOne="rhythmone",t.Rubicon="rubicon",t.SpotX="spotx",t.Telaria="telaria",t.MediaNet="medianet",t.Adman="adman",t.SynacorMedia="synacormedia",t.Undertone="undertone",t.AmxRTB="amx",t.Smaato="smaato",t.SmartAdServer="smartadserver",t.TheMediaGrid="grid",t.Rise="rise",t.YahooSSP="yahoossp",t.Unruly="unruly",t.Kargo="kargo",t.SmileWanted="smilewanted",t.TrustX="trustx",t.EmxDigital="emx_digital",t.KrushMedia="krushmedia"}(as||(as={}));const cs=(t,i)=>{try{const e=JSON.parse(t);return e.length>1&&(0,s.n)({message:"AdManager_AdSourceWrappe_multiple_bidders",level:s.D.WARN,callStack:i,exception:t},{throttle:1,sendMaxLog:!1}),e[0].bidder}catch(e){(0,s.n)({message:"AdManager_AdSourceWrapper_cannot_get_bidder",level:s.D.WARN,callStack:i,exception:t},{throttle:2,sendMaxLog:!1})}},ls=1,ds=["video/mp4","video/webm","application/javascript","video/ogg","video/mpeg"],us={VAST_1:1,VAST_2:2,VAST_3:3,VAST_1_WRAPPER:4,VAST_2_WRAPPER:5,VAST_3_WRAPPER:6,VAST_4:7,VAST_4_WRAPPER:8},ps={VPAID_1:1,VPAID_2:2},fs=[us.VAST_2_WRAPPER,us.VAST_2,us.VAST_3,us.VAST_3_WRAPPER],gs=[ps.VPAID_1,ps.VPAID_2],ms=(t,i,e,s,n)=>{const{skip:r,skippable:o,skipmin:h,skipafter:a}=n;return{video:{playerSize:[Math.floor(t),Math.floor(i)],context:e?"outstream":"instream",mimes:ds,protocols:fs,linearity:ls,api:gs,frameworks:[ps.VPAID_1,ps.VPAID_2],maxduration:s,minDuration:0,skip:r,skippable:o,skipmin:h,skipafter:a}}},ys="https://prebid.adnxs.com/pbc/v1/cache",vs=()=>({cmpApi:"iab",timeout:2e3,defaultGdprScope:!0,allowAuctionWithoutConsent:!1,rules:[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0},{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0},{purpose:"measurement",enforcePurpose:!0,enforceVendor:!0}]}),bs=()=>({cmpApi:"iab",timeout:2e3});var xs;!function(t){t.CACHE_ID="CACHE_ID"}(xs||(xs={}));var ws;!function(t){t.Banner="banner",t.Video="video",t.All="all"}(ws||(ws={}));const _s=(t,i,e,s)=>{const n=Object.assign(Object.assign(Object.assign(Object.assign({usePrebidCache:!0},{userSync:{syncEnabled:!0,iframeEnabled:!0,pixelEnabled:!0,filterSettings:{iframe:{bidders:"*",filter:"include"},image:{bidders:"*",filter:"include"}},syncsPerBidder:0,syncDelay:3e3,auctionDelay:0,aliasSyncEnabled:!0,userIds:[{name:"criteo"},{name:"pubCommonId",params:{enableSharedId:!0},storage:{type:"cookie",name:"_pubcid",expires:180}},{name:"flocId",params:{token:"A3dHTSoNUMjjERBLlrvJSelNnwWUCwVQhZ5tNQ+sll7y+LkPPVZXtB77u2y7CweRIxiYaGwGXNlW1/dFp8VMEgIAAAB+eyJvcmlnaW4iOiJodHRwczovL3NoYXJlZGlkLm9yZzo0NDMiLCJmZWF0dXJlIjoiSW50ZXJlc3RDb2hvcnRBUEkiLCJleHBpcnkiOjE2MjYyMjA3OTksImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"}},{name:"uid2"}]}}),{ix:{timeout:900}}),{targetingControls:{addTargetingKeys:[xs.CACHE_ID]}}),{yahoossp:{mode:ws.Video}});return(0,H.QM)(s)&&(n.pageUrl=s),n.usePrebidCache&&(n.cache={url:ys}),e&&(n.schain=(t=>({validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:t.businessDomain,hp:1,sid:(0,H.QM)(t.supplyChainId)?t.supplyChainId:null}]}}))(e)),(t||i)&&(n.consentManagement=((t,i)=>t?{gdpr:vs()}:i?{usp:bs()}:{})(t,i)),n};class Ps{constructor(t){this._r=t,this.um=new ke(this._r)}loadPrebidJs(t){return new Promise(((i,e)=>{if(this.fb)return i(this.fb);this.insertPrebidJs().then((e=>{this.fb=e,this.fb.setConfig(t),i(e)})).catch((t=>e(t)))}))}insertPrebidJs(){return new Promise(((t,i)=>{this.um.loadIframe({customHead:"<style> html, body {display: none}</style>",customHtml:`<script id='cnx-prebid-loader' type='text/javascript' src='${ze.n.endPoints.assets.plugins.prebidScript}'><\/script>`,customIframeAttributes:[{key:"class",value:"cnx-prebid-loader"}],container:this._r.querySelector("body"),visible:!1}).then((e=>{if(e.iframe.contentWindow.pbjs)return t(e.iframe.contentWindow.pbjs);i(new Error("pbjs could not be found on the iframe window"))})).catch((t=>{i(t)}))}))}}class Ss{get config(){return this.gb}}const As={[as.AppNexus]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:32,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{floorPrice:s,skippabilitySettings:{skip:n,skipafter:r}}=i;return(0,H.r)(s)&&(e.reserve=s),e.video=Object.assign(Object.assign({},e.video),{skippable:!!n,skipoffset:r}),e}},[as.DistrictM]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:144,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{floorPrice:s,skippabilitySettings:{skip:n,skipafter:r}}=i;return(0,H.r)(s)&&(e.reserve=s),e.video=Object.assign(Object.assign({},e.video),{skippable:!!n,skipoffset:r}),e}},[as.IndexExchange]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:10,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=t.siteId,{playerWidth:n,playerHeight:r,maxDuration:o,floorPrice:h,lineItemId:a}=i;if(!(0,H.QM)(e))return void(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_IX_adapter_missing_siteId",callStack:a});const c={siteId:e,size:[Math.floor(n),Math.floor(r)],video:{mimes:ds,minduration:0,maxduration:o,protocols:Object.keys(us).map((t=>us[t]))}};return(0,H.kE)(t.minduration)&&(c.video.minduration=t.minduration),(0,H.kE)(t.maxduration)&&t.maxduration<=o&&(c.video.maxduration=t.maxduration),(0,H.QM)(t.id)&&(c.id=t.id),(0,H.r)(h)&&(c.bidFloor=h,c.bidFloorCur="USD"),c}},[as.OneVideo]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:25,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){(0,H.QM)(t.pubId)||(0,s.n)({message:"AdManager_HeaderBidder_OneVideo_pubId_missing",level:s.D.CRITICAL},{throttle:2,sendMaxLog:!1});const{playerWidth:e,playerHeight:n,pageUrl:r,floorPrice:o}=i,h=Object.assign(Object.assign({},t),{pubId:t.pubId,video:{playerWidth:Math.floor(e),playerHeight:Math.floor(n),mimes:ds,protocols:fs,api:gs},site:{page:r}});return(0,H.r)(o)&&(h.bidfloor=o),h}},[as.OpenX]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:69,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{floorPrice:s}=i;return(0,H.r)(s)&&(e.customFloor=s),e}},[as.Pubmatic]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:76,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),s=i.floorPrice;(0,H.r)(s)&&(e.kadfloor=String(s));const n=e.dctr;if((0,H.$K)(n)){const t=[];Object.keys(n).forEach((i=>{t.push(`${i}=${n[i]}`)})),e.dctr=t.join("|")}return e}},[as.RhythmOne]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:36,gdprSupport:!0,ccpaSupport:!1}}getBidParams(t,i){return(0,H.QM)(t.placementId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_RhythmOne_adapter_missing_placementId",callStack:i.lineItemId}),t}},[as.Rubicon]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:52,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),s=i.floorPrice;return(0,H.r)(s)&&(e.floor=s),e}},[as.SpotX]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:165,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{floorPrice:s,isOutstream:n,bidSlotId:r}=i;return e.hide_skin=!0,(0,H.r)(s)&&(e.price_floor=s),n&&(e.outstream_options={slot:r}),e}},[as.Telaria]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:52,gdprSupport:!0,ccpaSupport:!1}}getBidParams(t,i){const e=Object.assign({},t);return t.srcPageUrl||(e.srcPageUrl=i.pageUrl),e}},[as.MediaNet]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:142,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{playerWidth:n,playerHeight:r,maxDuration:o,lineItemId:h,floorPrice:a}=i;return(0,H.QM)(e.cid)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_MediaNet_adapter_missing_cid",callStack:h}),(0,H.QM)(e.crid)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_MediaNet_adapter_missing_crid",callStack:h}),(0,H.r)(a)&&(e.bidFloor=a),e.video={api:Object.keys(ps).map((t=>ps[t])),mimes:Object.keys(ds).map((t=>ds[t])),protocols:Object.keys(us).map((t=>us[t])),maxDuration:o,w:Math.floor(n),h:Math.floor(r)},e}},[as.Adman]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:149,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:n,floorPrice:r}=i;return(0,H.QM)(e.placementId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_Adman_adapter_missing_placementId",callStack:n}),(0,H.r)(r)&&(e.bidfloor=r),e}},[as.SynacorMedia]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:void 0,gdprSupport:!1,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);(0,H.QM)(e.seatId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_SynacorMedia_adapter_missing_seatId",callStack:i.lineItemId}),(0,H.QM)(e.tagId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_SynacorMedia_adapter_missing_tagId",callStack:i.lineItemId});const{floorPrice:n,maxDuration:r}=i;return(0,H.r)(n)&&(e.bidfloor=n),e.video={api:Object.keys(ps).map((t=>ps[t])),mimes:Object.keys(ds).map((t=>ds[t])),protocols:Object.keys(us).map((t=>us[t])),maxduration:r},e}},[as.Undertone]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:677,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);return(0,H.QM)(e.placementId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_Undertone_adapter_missing_placementId",callStack:i.lineItemId}),(0,H.kE)(e.publisherId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_Undertone_adapter_missing_publisherId",callStack:i.lineItemId}),e.video=Object.assign(Object.assign({},e.video),{skippable:!!i.skippabilitySettings.skip}),e}},[as.AmxRTB]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:737,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),s=i.floorPrice;return(0,H.r)(s)&&(e.floor=s),e}},[as.Smaato]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:82,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:n}=i;return(0,H.QM)(e.publisherId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_Smaato_adapter_missing_publisherId",callStack:n}),(0,H.QM)(e.adspaceId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_Smaato_adapter_missing_adspaceId",callStack:n}),e}},[as.SmartAdServer]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:18,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{floorPrice:n,lineItemId:r}=i;(0,H.r)(n)&&(e.bidfloor=n);const o=Object.assign(Object.assign({},t.video),{protocol:us.VAST_3_WRAPPER});return e.video=o,(0,H.r)(e.networkId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_SmartAdServer_adapter_missing_networkId_integer",callStack:r}),(0,H.r)(e.formatId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_SmartAdServer_adapter_missing_formatId_integer",callStack:r}),(0,H.r)(e.pageId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_SmartAdServer_adapter_missing_pageId_integer",callStack:r}),(0,H.r)(e.siteId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_SmartAdServer_adapter_missing_siteId_integer",callStack:r}),e}},[as.TheMediaGrid]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:686,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{floorPrice:n}=i;return(0,H.r)(n)&&(e.bidFloor=n),(0,H.r)(e.uid)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_TheMediaGrid_adapter_missing_uid_integer",callStack:i.lineItemId}),e}},[as.Rise]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:1043,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:n,floorPrice:r}=i;return(0,H.QM)(e.org)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_Rise_adapter_missing_org",callStack:n}),(0,H.r)(r)&&(e.floorPrice=r),e}},[as.YahooSSP]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:25,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){let e=Object.assign({},t);const n=e.bidOverride||{},r=n.imp||{},o=(0,H.QM)(e.pos)&&(0,H.QM)(e.dcn),h=(0,H.QM)(e.pubId);return o||h||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_YahooSSP_adapter_missing_required_fields",callStack:i.lineItemId}),(0,H.r)(i.floorPrice)&&(e=Object.assign(Object.assign({},e),{bidOverride:Object.assign(Object.assign({},n),{imp:Object.assign(Object.assign({},r),{bidfloor:i.floorPrice})})})),e}},[as.Unruly]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:36,gdprSupport:!1,ccpaSupport:!1}}getBidParams(t,i){const e=Object.assign({},t);return(0,H.kE)(e.siteId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_Unruly_adapter_missing_publisherId",callStack:i.lineItemId}),i.isOutstream&&(e.featureOverrides={canRunUnmissable:!0}),(0,H.r)(i.floorPrice)&&(e.floor=i.floorPrice),e}},[as.Kargo]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:972,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);return(0,H.QM)(e.placementId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_Kargo_adapter_missing_placementId",callStack:i.lineItemId}),e}},[as.SmileWanted]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:639,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);return(0,H.QM)(e.zoneId)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_SmileWanted_adapter_missing_zoneId",callStack:i.lineItemId}),(0,H.r)(i.floorPrice)&&(e.bidfloor=i.floorPrice),e}},[as.TrustX]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);return(0,H.kE)(e.uid)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_TrustX_adapter_missing_uid",callStack:i.lineItemId}),(0,H.r)(i.floorPrice)&&(e.bidFloor=i.floorPrice),e}},[as.EmxDigital]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:183,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);return(0,H.QM)(e.tagid)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_EmxDigital_adapter_missing_tagid",callStack:i.lineItemId}),(0,H.r)(i.floorPrice)&&(e.bidfloor=i.floorPrice.toString()),e}},[as.KrushMedia]:new class extends Ss{constructor(){super(...arguments),this.gb={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);return(0,H.QM)(e.key)||(0,s.n)({level:s.D.CRITICAL,message:"PrebidJS_KrushMedia_adapter_missing_key",callStack:i.lineItemId}),(0,H.r)(i.floorPrice)&&(e.bidfloor=i.floorPrice),e}}};class Is{constructor(t,i,e,s,n,r,o,h){this.mb=t,this.Ne=i,this.qv=e,this.yb=s,this.vb=n,this._r=r,this.bb=o,this.xb=h,this.wb=new Ps(this._r)}requestHeaderBidder(t,i,e){return new Promise(((s,n)=>{this._b().then((n=>{const r=t.map((t=>this.Pb(n,t,i,e).then((t=>t))));Promise.all(r).then((t=>{s(t)}))})).catch((t=>{n(r.ConnatixNoBidReasonEnum.NoBid)}))}))}Sb(t,i){const e={lineItemSkippability:t,lineItemSkipMin:i,playerSkippability:this.bb.skippability,playerSkipMin:this.bb.skipMin,playerSkipAfter:this.bb.skipAdAfter},s=yt(e),n=s.skippable?1:0;return Object.assign({skip:n},s)}Pb(t,i,e,s){return new Promise((n=>{let o=[];if(i.availableRequests>0)if((0,H.$K)(i.lineItem.floorPricesNew)&&(0,l.BZ)(i.lineItem.floorPricesNew.floorPrices)){const n=i.lineItem.floorPricesNew.floorPrices.map((t=>t.price));o=this.Ab(i.lineItem.floorPricesNew,i.availableRequests,i.maxBidPrice).map((r=>this.Ib(t,i.lineItem,e,s,n,i.maxAdDuration,r)))}else if((0,l.BZ)(i.lineItem.floorPriceData)){const n=i.lineItem.floorPriceData.map((t=>t.price));o=this.kb(i.lineItem.floorPriceData,i.availableRequests,i.maxBidPrice).map((r=>this.Ib(t,i.lineItem,e,s,n,i.maxAdDuration,r)))}else{const n=i.lineItem.floorPriceData.map((t=>t.price)),h={floorPrice:i.lineItem.floorPrice,floorPriceIndex:-1,floorPriceFactor:null,floorPriceBypassReason:r.FloorPriceBypassReasonEnum.FixedCpm},a=this.Ib(t,i.lineItem,e,s,n,i.maxAdDuration,h);o.push(a)}Promise.all(o).then((t=>{const e=[],s=[],r=i.lineItem.advertiserLineItemId;t.forEach((t=>{t.reason?s.push(t):e.push(t)}));n({bids:e,noBids:s,lineItemId:r})}))}))}Ib(t,i,e,s,n,r,o){return new Promise((h=>{this.Cb(t,i,e,s,n,r,o).then((t=>{h(t)})).catch((t=>{h(t)}))}))}_b(){const t=_s(this.yb,this.vb,this.mb,this.Ne);return new Promise(((i,e)=>{this.wb.loadPrebidJs(t).then((t=>{i(t)})).catch((t=>{(0,s.n)({message:"AdManager_HeaderBidder_unable_to_load_prebidJs_script",exception:t.message,callStack:t.stack,level:s.D.CRITICAL}),e(t)}))}))}Cb(t,i,e,n,o,h,a){return new Promise(((c,l)=>{const d=this.Sb(i.skippability,i.skipMin),u=cs(i.headerBidderBids,i.advertiserLineItemId),p=((t,i,e,s,n,r,o)=>{const h={code:(0,wt.qs)(),mediaTypes:ms(t,i,e,s,r),bids:[]};return e||o!==as.Smaato||(h.mediaTypes.video.startdelay=0),(0,H.r)(n)&&(h.floors=(t=>({currency:"USD",schema:{fields:["mediaType"]},values:{video:t}}))(n)),h})(e,n,this.qv,h,a.floorPrice,d,u);try{const t=this.xb.replaceMacrosInJsonString(i.headerBidderBids);p.bids=JSON.parse(t)}catch(t){return(0,s.n)({message:"AdManager_HeaderBidder_unable_to_parse_header_bidder",exception:t.message,callStack:t.stack,level:s.D.WARN}),void l({bidderName:u,reason:r.ConnatixNoBidReasonEnum.NoBid,floorPrice:a.floorPrice,floorPriceIndex:a.floorPriceIndex})}const f=Re();p.bids.forEach((t=>this.Tb(t,e,n,a.floorPrice,i.advertiserLineItemId,h,f,d))),t.que.push((()=>{t.addAdUnits(p);const e={timeout:i.headerBidderTimeout,adUnits:[p],bidsBackHandler:()=>{try{const e=t.getHighestCpmBids(p.code)[0];if(!e)return void l({bidderName:u,reason:r.ConnatixNoBidReasonEnum.CsEmptyResponse,floorPrice:a.floorPrice,floorPriceIndex:a.floorPriceIndex});let n,h;if(this.Mb(e))n=(t=>`${ys}?uuid=${t.adserverTargeting.hb_cache_id}`)(e);else if(n=e.vastUrl,h=e.vastXml,!n&&!h)return(0,s.n)({level:s.D.WARN,message:"AdManager_HeaderBidder_no_content",exception:JSON.stringify(e)}),void l({bidderName:u,reason:r.ConnatixNoBidReasonEnum.CsInvalidResponse,floorPrice:a.floorPrice,floorPriceIndex:a.floorPriceIndex});const d=e.cpm||e.adResponse.ad.cpm,{advertiserLineItemId:g}=i,m=Object.assign(Object.assign({},a),{bidderName:u,adTagUrl:n,adTagXml:h,lineItemId:g,cpm:d,slotId:f,bidId:p.code});(0,H.r)(a.floorPrice)&&d<a.floorPrice&&(0,s.n)({message:"AdManager_HeaderBidderRequester_cpm_lower_than_floorprice",level:s.D.WARN,exception:`floorPrices_${o}_index_${a.floorPriceIndex}_floorPrice_${a.floorPrice}_cpm_${d}_li_${i.advertiserLineItemId}`,callStack:cs(i.headerBidderBids,i.advertiserLineItemId)},{sendMaxLog:!1,throttle:5}),c(m)}catch(t){(0,s.n)({level:s.D.WARN,message:"AdManager_HeaderBidder_Prebidjs_error",exception:t.message,callStack:t.stack}),l({bidderName:u,reason:r.ConnatixNoBidReasonEnum.NoBid,floorPrice:a.floorPrice,floorPriceIndex:a.floorPriceIndex})}}};t.requestBids(e)}))}))}Tb(t,i,e,s,n,r,o,h){const a=As[t.bidder].getBidParams;a&&(t.params=a(t.params,{playerWidth:i,playerHeight:e,maxDuration:r,pageUrl:this.Ne,floorPrice:s,lineItemId:n,isOutstream:this.qv,bidSlotId:o,skippabilitySettings:h}))}Mb(t){return t.adserverTargeting&&(0,H.QM)(t.adserverTargeting.hb_cache_id)}Ab(t,i,e){if(0===i)return[];const{floorPrices:s,recommended:n}=t,r=s.map(((t,i)=>{if(i<n)return{floorPrice:t.price,floorPriceIndex:i,floorPriceBypassReason:t.floorPriceBypassReason}})).filter((t=>(0,H.$K)(t)));return this.Eb(r,i,e,!1)}kb(t,i,e){if(0===i)return[];const s=t.map(((t,i)=>({floorPrice:t.price,floorPriceIndex:i,floorPriceFactor:t.factor,floorPriceBypassReason:null})));return this.Eb(s,i,e,!0)}Eb(t,i,e,s){let n=i;const o=t.filter((({floorPrice:t})=>t>=e&&n>0&&(n--,!0)));if((0,l.BZ)(o))return o;const h={floorPrice:e,floorPriceIndex:-1,floorPriceBypassReason:r.FloorPriceBypassReasonEnum.BidInHand};return s&&(h.floorPriceFactor=null),[h]}}var ks=h(7432);class Cs{constructor(t){this.so=t}isAdapterCallable(t){const i=(t=>{const i=Object.keys(as).find((i=>as[i]===t));if(i)return as[i]})(t);return!!i&&(this.so.isGDPR()?this.Bb(i):!this.so.isCcpaApplicable()||this.Lb(i))}Ob(t){return As[t].config.gdprSupport}Bb(t){if(this.Ob(t))return!0;const i=As[t].config.vendorId,e=(0,H.kE)(i)?`${i}`:"";return this.so.isConsent(e,ks.Z)}Lb(t){return!!As[t].config.ccpaSupport||!!this.so.isSellUserAllowed()}}class Ts{constructor(t,i,e,s,n,r,o,h,a){this.qv=t,this.mb=i,this.vu=e,this.Wv=s,this.Gv=n,this.Qv=r,this.Yv=o,this.Ey=h,this.bb=a,this.Rb=new Map,this.Db=new Is(this.mb,this.vu.config.pageUrl,this.qv,this.vu.services.UserManagerService.isGDPR(),this.vu.services.UserManagerService.isCcpaApplicable(),this.vu.services.GlobalDomUtilsService,this.bb,this.vu.services.MacrosService),this.Fb=new Cs(this.vu.services.UserManagerService)}request(t){const{width:i,height:e}=t.callingState,s=this.Kv(i,e),n=this.$b(t.lineItemRequestDataList);return(0,l.BZ)(n)&&s?(t.lineItemRequestDataList=n,this.jb(t).then((i=>Promise.resolve(this.Vb(i,t)))).catch((()=>Promise.resolve({bids:[],noBids:[]})))):Promise.resolve({bids:[],noBids:[]})}destroy(){}Vb(t,i){const e={bids:[],noBids:[]};return t.forEach((t=>{const s=mt(i.lineItemRequestDataList,t.lineItemId);t.bids.forEach((t=>{const n=t.bidId,r=new jt,o=new Ze({requestedFloorPrice:t.floorPrice,requestedFloorPriceIndex:t.floorPriceIndex,prebidJsBidderName:t.bidderName,requestNumber:s.historicalMetrics.requestNumber,predictedFloorPrice:s.protoLineItem.predictedFloorPrice,floorPriceFactor:t.floorPriceFactor,floorPriceBypassReason:t.floorPriceBypassReason,floorPriceInformation:this.Ub(s,t.floorPriceIndex,t.floorPriceBypassReason)});Vt(s.protoLineItem.trackers,r),t.adTagUrl?e.bids.push(new Xe({id:n,adManagerLineItem:s,replaceTrackingMacros:!0,requestMetadata:o,trackersInformation:r,url:t.adTagUrl,callingState:i.callingState,adMacroReplacer:this.Wv,adContainer:this.Gv.get(s.protoLineItem.adType),globalDomUtilsService:this.vu.services.GlobalDomUtilsService,viewabilityService:this.vu.services.ViewabilityService,trackingService:this.vu.services.TrackingService,cpm:t.cpm,adEnforcer:this.Qv,os:this.vu.config.os.os,adSlotContainerRecycler:this.Yv,bidSlotId:t.slotId,loopAdWhenFinished:this.Ey,pageUrl:this.vu.config.pageUrl,urlSuffixerService:this.vu.services.UrlSuffixerService})):t.adTagXml&&e.bids.push(new Ge({id:n,adManagerLineItem:s,replaceTrackingMacros:!0,requestMetadata:o,trackersInformation:r,xml:t.adTagXml,callingState:i.callingState,adMacroReplacer:this.Wv,adContainer:this.Gv.get(s.protoLineItem.adType),globalDomUtilsService:this.vu.services.GlobalDomUtilsService,viewabilityService:this.vu.services.ViewabilityService,trackingService:this.vu.services.TrackingService,cpm:t.cpm,adEnforcer:this.Qv,os:this.vu.config.os.os,adSlotContainerRecycler:this.Yv,bidSlotId:t.slotId,loopAdWhenFinished:this.Ey,pageUrl:this.vu.config.pageUrl,urlSuffixerService:this.vu.services.UrlSuffixerService}))})),t.noBids.forEach((t=>{const i=new Ze({requestedFloorPrice:t.floorPrice,requestedFloorPriceIndex:t.floorPriceIndex,requestNumber:s.historicalMetrics.requestNumber,predictedFloorPrice:s.protoLineItem.predictedFloorPrice,prebidJsBidderName:t.bidderName,floorPriceInformation:this.Ub(s,t.floorPriceIndex)});e.noBids.push({lineItem:s,requestMetadata:i,reason:t.reason})}))})),e}Ub(t,i,e){if(!(0,H.$K)(t.protoLineItem.floorPricesNew))return;const s={floorPrices:t.protoLineItem.floorPricesNew.floorPrices.map((t=>t.price)),floorPriceIndexUsed:i};return(0,H.$K)(e)&&(s.floorPriceBypassReason=e),s}jb(t){const{width:i,height:e}=t.callingState,s=t.lineItemRequestDataList.map((i=>this.Hb(i,t.maxAdDuration,t.maxBidPrice)));return this.Db.requestHeaderBidder(s,i,e)}Hb(t,i,e){const s=t.adManagerLineItem;return{availableRequests:t.maxAvailableRequests,lineItem:s.protoLineItem,maxAdDuration:i,maxBidPrice:e}}$b(t){return t.filter((t=>{const i=this.qb(t.adManagerLineItem);return this.Rb.has(t.adManagerLineItem)||this.Rb.set(t.adManagerLineItem,i),this.zb(i)}))}Kv(t,i){return 0!==t&&0!==i||((0,s.n)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${t}_height:${i}_destroyed:${f.S.playerDestroyed}`,level:s.D.CRITICAL},{throttle:5}),!1)}zb(t){return this.Fb.isAdapterCallable(t)}qb(t){const i=this.Rb.get(t);return(0,H.QM)(i)?i:cs(t.protoLineItem.headerBidderBids,t.protoLineItem.advertiserLineItemId)||""}}var Ms,Es=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class Bs{constructor(t){this.vu=t}callCoreTam(t){return Es(this,void 0,void 0,(function*(){const i=t.map((t=>{const i={lineItemId:t.lineItemId,code:t.coreTamCode,metadata:this.vu.services.TrackingService.getMetadataModel(),exploration:this.vu.config.explorationMode};return this.Gb(i)}));return Promise.all(i)}))}Gb(i){return Es(this,void 0,void 0,(function*(){try{const e=yield Qe.n.sendProtoRequest({endpoint:ze.n.endPoints.api.tam,ProtoRequest:r.ProtoCoreTamBidRequest,ProtoResponse:r.ProtoCoreTamBidResponse,requestData:i,queryParams:{[Ke.Fk]:t.g.version},logError:!0});return(0,H.QM)(e.errorMessage)?{lineItemId:i.lineItemId,coreTamCode:i.code,coreTamBidResponse:null,rejectReason:r.ConnatixNoBidReasonEnum.RequestException}:(0,H.QM)(e.encryptedBidPrice)?{lineItemId:i.lineItemId,coreTamCode:i.code,coreTamBidResponse:e,rejectReason:null}:{lineItemId:i.lineItemId,coreTamCode:i.code,coreTamBidResponse:null,rejectReason:r.ConnatixNoBidReasonEnum.InvalidResponse}}catch(t){return{lineItemId:i.lineItemId,coreTamCode:i.code,coreTamBidResponse:null,rejectReason:r.ConnatixNoBidReasonEnum.RequestException}}}))}}!function(t){t.SDK_NAME_ON_PUB_WINDOW="apstag",t.MEDIA_TYPE="video",t.VAST_TAG_BASE_URL="https://aax.amazon-adsystem.com/e/dtb/vast"}(Ms||(Ms={}));class Ls{constructor(t){this.Jb=t.amznbid,this.Qb=t.amzniid}static getTargetingFromBid(t){var i,e;return{amzniid:t.amzniid||(null===(i=t.targeting)||void 0===i?void 0:i.amzniid),amznbid:t.amznbid||(null===(e=t.targeting)||void 0===e?void 0:e.amznbid)}}static hasTargeting(t){const i=Ls.getTargetingFromBid(t);return(0,H.QM)(i.amzniid)&&(0,H.QM)(i.amznbid)}get amazonBidCode(){return this.Jb}getVast(){return`${Ms.VAST_TAG_BASE_URL}?b=${this.Qb}&pp=${this.Jb}&rnd=${(0,wt.qs)()}`}}class Os{constructor(t){this.Yb=t.targetingDeal,this.Xb=t.targetingKey,this.Zb=t.targetingValue}static hasTargetings(t){const i=Os.getTargetingsFromBid(t);return(0,l.BZ)(i)}static getTargetingsFromBid(t){const i=Os.getDeals(t);return(0,l.BZ)(i)?i.map((i=>{const e=`${i}amzniid`;return{targetingDeal:i,targetingKey:e,targetingValue:t.targeting[e]}})).filter((t=>(0,H.QM)(t.targetingValue))):[]}static getDeals(t){var i;return t.amzndeals||(null===(i=t.targeting)||void 0===i?void 0:i.amzndeals)}get targetingDeal(){return this.Yb}get targetingKey(){return this.Xb}get targetingValue(){return this.Zb}getVast(){return`${Ms.VAST_TAG_BASE_URL}?b=${this.Zb}&rnd=${(0,wt.qs)()}`}}class Rs{constructor(t){this.Jb=t.amznbid_sp,this.Qb=t.amzniid_sp}static getTargetingFromBid(t){var i,e;return{amzniid_sp:t.amzniid_sp||(null===(i=t.targeting)||void 0===i?void 0:i.amzniid_sp),amznbid_sp:t.amznbid_sp||(null===(e=t.targeting)||void 0===e?void 0:e.amznbid_sp)}}static hasTargeting(t){const i=Rs.getTargetingFromBid(t);return(0,H.QM)(i.amzniid_sp)&&(0,H.QM)(i.amznbid_sp)}get amazonBidCode(){return this.Jb}getVast(){return`${Ms.VAST_TAG_BASE_URL}?b=${this.Qb}&rnd=${(0,wt.qs)()}`}}class Ds{constructor(t,i){this.Kb=t,this.tx=[],i.forEach((t=>{const i=class{static createObjects(t,i){const e=[];switch(t.creativeType){case r.ProtoCreativeTypeEnum.Tam:if(Ls.hasTargeting(i)){const t=Ls.getTargetingFromBid(i);e.push(new Ls(t))}break;case r.ProtoCreativeTypeEnum.TamDeal:if(Os.hasTargetings(i)){const s=Os.getTargetingsFromBid(i).filter((i=>i.targetingDeal===t.amazonDealId)).map((t=>new Os(t)));e.push(...s)}break;case r.ProtoCreativeTypeEnum.TamPrivateAuction:if(Rs.hasTargeting(i)){const t=Rs.getTargetingFromBid(i);e.push(new Rs(t))}}return e}}.createObjects(this.Kb,t);this.tx.push(...i)}))}get amazonBidList(){return this.tx}get lineItem(){return this.Kb}get hasCoreTamDependency(){return this.tx.every((t=>(0,H.QM)(t.amazonBidCode)))}}var Fs=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};const $s="load";class js{constructor(t,i,e){this.vu=t,this.sx=i,this.nx=e,this.ox=()=>{this.hx||this.lx(),this.ux&&clearInterval(this.ux),this.hx||(0,s.n)({message:"TamRequester_TAM_lib_not_found_on_page_loaded",level:s.D.WARN})};const n=this.vu.config.topWindow;this.gx=(0,wt.pE)(n).topFrame,this.lx()}requestBids(t){return this.mx(t)}destroy(){this.ux&&clearInterval(this.ux),this.gx.removeEventListener($s,this.ox)}mx(t){return Fs(this,void 0,void 0,(function*(){try{const i=yield this.yx(),e=this.vx(t,i),s=yield this.xx(e);return this.wx(e,s)}catch(i){return this._x(t,i)}}))}_x(t,i){return i.message?t.map((t=>({bids:[],lineItemId:t.advertiserLineItemId,noBids:[{reason:r.ConnatixNoBidReasonEnum.CsRequestException}]}))):t.map((t=>({bids:[],lineItemId:t.advertiserLineItemId,noBids:[{reason:i}]})))}wx(t,i){return t.map((t=>{const e=i.filter((i=>t.lineItem.advertiserLineItemId===i.lineItemId));return this.Px(t,e)}))}Px(t,i){return t.hasCoreTamDependency?this.Sx(t,i):this.Ax(t)}Ax(t){const i=t.amazonBidList.map((i=>({encryptedPrice:null,vastTag:i.getVast(),ofskp:Ot(t.lineItem.floorPrice),successRate:t.lineItem.successRate,slotId:Re()})));return(0,l.BZ)(i)?{bids:i,lineItemId:t.lineItem.advertiserLineItemId,noBids:[]}:{bids:[],lineItemId:t.lineItem.advertiserLineItemId,noBids:[{reason:r.ConnatixNoBidReasonEnum.NoBid}]}}Sx(t,i){const e=i.map((i=>this.Ix(t,i))).filter((t=>t.amazonBid&&!(0,H.Cz)(t.coreTamRequestOutput.rejectReason,r.ConnatixNoBidReasonEnum))).map((t=>({encryptedPrice:t.coreTamRequestOutput.coreTamBidResponse.encryptedBidPrice,vastTag:t.amazonBid.getVast(),ofskp:t.coreTamRequestOutput.coreTamBidResponse.ofskp,successRate:t.coreTamRequestOutput.coreTamBidResponse.successRate,slotId:Re()}))),s=i.filter((t=>t.rejectReason)).map((t=>({reason:t.rejectReason})));return(0,l.BZ)(e)||(0,l.BZ)(s)?{bids:e,noBids:s,lineItemId:t.lineItem.advertiserLineItemId}:{bids:[],lineItemId:t.lineItem.advertiserLineItemId,noBids:[{reason:r.ConnatixNoBidReasonEnum.NoBid}]}}Ix(t,i){return{coreTamRequestOutput:i,amazonBid:t.amazonBidList.find((t=>t.amazonBidCode===i.coreTamCode))}}xx(t){return Fs(this,void 0,void 0,(function*(){const i=t.reduce(this.kx,[]);return this.Cx(i)}))}kx(t,i){return[...t,...i.amazonBidList.filter((t=>t.amazonBidCode)).map((t=>({lineItemId:i.lineItem.advertiserLineItemId,coreTamCode:t.amazonBidCode})))]}vx(t,i){return t.map((t=>new Ds(t,i)))}Cx(t){return this.nx.callCoreTam(t)}yx(){return new Promise(((t,i)=>{this.hx?this.hx.fetchBids({slots:[{slotID:this.sx,mediaType:Ms.MEDIA_TYPE}]},(e=>{(0,l.BZ)(e)?t(e):i(r.ConnatixNoBidReasonEnum.EmptyResponse)})):i(r.ConnatixNoBidReasonEnum.NoLibInPage)}))}lx(){const t=this.gx[Ms.SDK_NAME_ON_PUB_WINDOW];t?this.hx=t:this.ux||"complete"!==this.gx.document.readyState&&(this.gx.addEventListener($s,this.ox),this.ux=setInterval((()=>{this.lx()}),I.s_)),this.hx&&clearInterval(this.ux)}}class Vs{constructor(t,i,e,s,n,r){this.vu=t,this.Tx=i,this.Wv=e,this.Gv=s,this.Qv=n,this.Yv=r,this.Mx=new js(this.vu,this.Tx,new Bs(this.vu))}request(t){const{width:i,height:e}=t.callingState;return this.Kv(i,e)?this.Ex(t).then((i=>Promise.resolve(this.Bx(i,t)))).catch((()=>Promise.resolve({bids:[],noBids:[]}))):Promise.resolve({bids:[],noBids:[]})}destroy(){this.Mx.destroy()}Ex(t){const i=t.lineItemRequestDataList.map((t=>t.adManagerLineItem.protoLineItem));return this.Mx.requestBids(i)}Bx(t,i){const e={bids:[],noBids:[]};return t.forEach((t=>{const s=mt(i.lineItemRequestDataList,t.lineItemId);t.bids.forEach((t=>{const n=new jt,r=new Ze({encryptedPrice:t.encryptedPrice,requestNumber:s.historicalMetrics.requestNumber});Vt(s.protoLineItem.trackers,n),e.bids.push(new Xe({id:(0,wt.qs)(),adManagerLineItem:s,replaceTrackingMacros:!0,requestMetadata:r,trackersInformation:n,url:t.vastTag,bidSlotId:t.slotId,callingState:i.callingState,adMacroReplacer:this.Wv,adContainer:this.Gv.get(s.protoLineItem.adType),globalDomUtilsService:this.vu.services.GlobalDomUtilsService,viewabilityService:this.vu.services.ViewabilityService,trackingService:this.vu.services.TrackingService,adEnforcer:this.Qv,requestWithCredentials:!1,successRate:t.successRate,obfuscatedPrice:t.ofskp,os:this.vu.config.os.os,adSlotContainerRecycler:this.Yv,pageUrl:this.vu.config.pageUrl,urlSuffixerService:this.vu.services.UrlSuffixerService}))})),t.noBids.forEach((t=>{e.noBids.push({lineItem:s,requestMetadata:new Ze({requestNumber:s.historicalMetrics.requestNumber}),reason:t.reason})}))})),e}Kv(t,i){return 0!==t&&0!==i||((0,s.n)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${t}_height:${i}_destroyed:${f.S.playerDestroyed}`,level:s.D.CRITICAL},{throttle:5}),!1)}}const Ns=[[88,31],[120,20],[120,30],[120,60],[120,90],[125,125],[168,28],[168,42],[180,150],[200,200],[200,446],[216,36],[216,54],[220,90],[234,60],[240,133],[250,250],[250,360],[292,30],[300,31],[300,50],[300,75],[300,100],[300,250],[320,50],[320,100],[320,240],[336,280],[400,350],[468,60],[480,320]];class Us{constructor(t,i,e){this.Lx=t,this.Ox=i,this.Rx=e,this.rm=`div-gpt-ad-1589549806211-${(0,wt.qs)()}`,this.om=new rt.x,this.Uf=new rt.x,this.Sf=new rt.x}get onCreativeReceived(){return this.Sf.asObservable()}get onDisplayAd(){return this.om.asObservable()}get onError(){return this.Uf.asObservable()}getAdMediaHeight(){return this.Fx?this.Fx.clientHeight:0}getAdMediaWidth(){return this.Fx?this.Fx.clientWidth:0}initializeAd(t,i){try{this.$x=t,this.nf(t);const e=this.jx(i.width,i.height);this.Lx.cmd.push((()=>{this.Vx=this.Lx.defineSlot(this.Rx,e,this.rm).addService(this.Lx.pubads()).setTargeting("domains",this.Ox),this.Lx.enableServices(),this.Nx(this.Vx),this.Lx.pubads().isInitialLoadDisabled()&&this.Lx.pubads().refresh([this.Vx]),this.Lx.display(this.rm)}))}catch(t){this.Uf.next(Jt.WrapperInitAdError)}}destroy(){this.Lx.cmd.push((()=>{this.Lx.destroySlots&&this.Vx&&this.Lx.destroySlots([this.Vx])}))}Nx(t){this.Lx.pubads().addEventListener("slotOnload",(i=>{var e,n;if(i.slot===t){try{const t=null===(n=null===(e=null==i?void 0:i.slot)||void 0===e?void 0:e.getResponseInformation())||void 0===n?void 0:n.creativeId;t&&this.Sf.next(t.toString())}catch(t){(0,s.n)({message:"AdManager_GptWrapper_creativeId",level:s.D.WARN,exception:t.message,callStack:t.stack})}this.om.next()}})),this.Lx.pubads().addEventListener("slotRenderEnded",(t=>{var i;if(t.slot===this.Vx){try{this.Fx=null===(i=this.$x)||void 0===i?void 0:i.getElementsByTagName("iframe")[0],(0,H.$K)(this.Vx)&&(0,it.AX)(this.Fx.contentWindow,"GPTWrapper")}catch(t){}t.isEmpty&&this.Uf.next(Jt.AdxOverlayNoFill)}}))}nf(t){t.id=this.rm}jx(t,i){return Ns.filter((e=>!Array.isArray(e)||!(0,l.fn)(e)||(0,l.BZ)(e)&&e[0]<=t&&e[1]<=i))}}var Hs=h(5049);class qs extends si{constructor(t,i){super(t,i),this.kp=t,this.settings=i,this.adMediaType="displayAdx",this.adSourceType=r.ProtoAdsourceTypeEnum.Unknown,this.hy="adx",this.Ux={[we.FirstQuartile]:k.fI.AdVideoFirstQuartile,[we.SecondQuartile]:k.fI.AdVideoMidpoint,[we.ThirdQuartile]:k.fI.AdVideoThirdQuartile,[we.FourthQuartile]:k.fI.AdVideoComplete},this.Hx=[];const e=this.settings.adManagerLineItem.protoLineItem.overlayTime*I.s_;this.ny=new Ee(this.kp,e,500),this.Hx.push(this.ny.onTimeUpdate.subscribe((()=>{this.qp({type:k.fI.AdRemainingTimeChange})})),this.ny.onTimeElapsed.subscribe((()=>{this.stopAd("adxTimerElapsed")})),this.ny.onQuartile.subscribe((t=>{this.qp({type:this.Ux[t],payload:{}})})))}initAd(t,i,e,s,n,r,o){try{super.initAd(t,i,e,s,n,r,o),this.qx={width:t,height:i},this.zx().then((t=>{this.Wx=new Us(t,this.settings.domain,this.settings.adxAdUnitPath),this.Hx.push(this.Wx.onCreativeReceived.subscribe((t=>{this.creativeId=t}))),this.qp({type:k.fI.AdLoaded,payload:{skipOffset:0}})})).catch((t=>{this.qp({type:k.fI.AdError,payload:{errorMessage:Jt.AdxOverlayGptScriptLoad+`_${t.message}`}})}))}catch(t){this.qp({type:k.fI.AdError,payload:{errorMessage:Jt.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.Hx.push(this.Wx.onDisplayAd.subscribe((()=>{this.qp({type:k.fI.AdStarted}),this.qp({type:k.fI.AdVideoStart}),this.qp({type:k.fI.AdImpression,payload:{}}),this.ny.start()})),this.Wx.onError.subscribe((t=>{this.qp({type:k.fI.AdError,payload:{errorMessage:t}}),this.ny.stop()}))),this.Wx.initializeAd(this.Cp,this.qx)}catch(t){this.qp({type:k.fI.AdError,payload:{errorMessage:Jt.AdaptorStartAdError+`_${t.exception}`}})}}stopAd(t){try{super.stopAd(t),this.ny.stop(),this.qp({type:k.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}catch(t){this.gf("AdxBidAdaptor","stopAd",t)}}resizeAd(t,i,e){this.qx&&(this.qx.width=t,this.qx.height=i)}pauseAd(){try{this.ny.stop(),this.qp({type:k.fI.AdPaused})}catch(t){this.gf("AdxBidAdaptor","pauseAd",t)}}resumeAd(){try{this.ny.start(),this.qp({type:k.fI.AdPlaying})}catch(t){this.gf("AdxBidAdaptor","resumeAd",t)}}expandAd(){}collapseAd(){}skipAd(){try{super.skipAd(),this.qp({type:k.fI.AdSkipped})}catch(t){this.gf("AdxBidAdaptor","skipAd",t)}}getAdRemainingTime(){return this.ny.timeRemaining/I.s_}getAdDuration(){return this.ny.timerDuration/I.s_}getAdVolume(){return 0}getAdMediaSize(){return{width:this.Wx.getAdMediaWidth(),height:this.Wx.getAdMediaHeight()}}setAdVolume(t){}get adVideoUrl(){return this.hy}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}zx(){const t=(0,wt.pE)(window).topFrame;if(t.googletag)return Promise.resolve(t.googletag);{const i={cmd:[]};return t.googletag=window.googletag||i,new Promise(((i,e)=>{(0,it.dZ)({src:Hs.x},t.document.head,t,(()=>{i(t.googletag)}),(()=>{e()}))}))}}Dc(){var t;try{super.Dc(),this.ny.stop(),(0,Pt.i)(this.Hx),null===(t=this.Wx)||void 0===t||t.destroy()}catch(t){this.gf("AdxBidAdaptor","_destroy",t)}}}class zs{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime();const t=ji.getGlobalContainer().resolve(se),i=new qs(t,{id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,adxAdUnitPath:this.Gx(this.settings.url),requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,domain:this.settings.pageDomain,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,successRate:this.settings.successRate,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,bidSlotId:this.settings.bidSlotId,urlSuffixerService:this.settings.urlSuffixerService});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(i)}Gx(t){return t.substr("https://adx.connatix.com".length)}}var Ws=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};function Gs(){return Ws(this,void 0,void 0,(function*(){try{const t=yield(0,wt.Up)((()=>Ws(this,void 0,void 0,(function*(){return yield h.e("hls").then(h.t.bind(h,490,23))}))));if(!t||"object"!=typeof t)throw new Error("no_hls_module");if("function"==typeof t.isSupported)return t;if("function"!=typeof t.default||0===Object.keys(t.default).length)throw new Error("empty_hls_module");if("function"!=typeof t.default.isSupported)throw new Error("no_hls_isSupported");return t.default}catch(t){return(0,s.n)({callStack:t.stack,exception:t.message,level:s.D.WARN,message:"HLS_dynamicImport"}),null}}))}class Js extends si{constructor(t,i){super(t,i),this.kp=t,this.settings=i,this.adMediaType="cnxMedia",this.adSourceType=r.ProtoAdsourceTypeEnum.CnxMedia,this.Jx=[]}initAd(t,i,e,s,n,r,o){try{let h;super.initAd(t,i,e,s,n,r,o);let a=!1;if((0,H.QM)(this.settings.externalMediaFile))h=this.Qx(this.settings.externalMediaFile);else if((0,H.QM)(this.settings.externalHlsFile))h=this.Qx(this.settings.externalHlsFile),a=!0;else{if(!(0,l.BZ)(this.settings.renditions))return void this.qp({type:k.fI.AdError,payload:{errorMessage:Jt.CnxMediaNoRenditions}});h=this.Yx(this.settings.renditions,i,this.settings.mediaId)}this.Xx=h,this.Zx=new Ne(this.settings.globalDomUtilsService,this.Xx,this.Mp,this.settings.os,this.settings.clickUrl,this.settings.loopAdWhenFinished,this.settings.pauseAdWhenFinished,a,this.settings.hlsModule,this.settings.inApp,this.settings.pageDomain),this.Jx.push(this.Zx.onVpaidEvent.subscribe((t=>{this.qp(t)}))),this.Zx.initAd(t,i,e,s,n,{slot:this.Cp,videoSlot:this.Mp})}catch(t){this.qp({type:k.fI.AdError,payload:{errorMessage:Jt.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.Zx.startAd()}catch(t){this.qp({type:k.fI.AdError,payload:{errorMessage:Jt.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){super.stopAd(t),this.Zx?this.Zx.stopAd(t):(0,s.n)({message:"stopAd",exception:t,level:s.D.WARN})}resizeAd(t,i,e){try{this.Zx.resizeAd(t,i,e)}catch(t){this.gf("CnxMediaBidAdaptor","resizeAd",t)}}pauseAd(){try{this.Zx.pauseAd()}catch(t){this.gf("CnxMediaBidAdaptor","pauseAd",t)}}resumeAd(){try{this.Zx.resumeAd()}catch(t){this.gf("CnxMediaBidAdaptor","resumeAd",t)}}expandAd(){try{this.Zx.expandAd()}catch(t){this.gf("CnxMediaBidAdaptor","expandAd",t)}}collapseAd(){try{this.Zx.collapseAd()}catch(t){this.gf("CnxMediaBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.Zx.skipAd()}catch(t){this.gf("CnxMediaBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.Zx.getAdRemainingTime()}catch(t){return this.gf("CnxMediaBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.Zx?this.Zx.getAdDuration():this.settings.adManagerLineItem.protoLineItem.duration}catch(t){return this.gf("CnxMediaBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.Zx.getAdVolume()}catch(t){return this.gf("CnxMediaBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){return{width:this.Zx.getAdMediaWidth(),height:this.Zx.getAdMediaHeight()}}setAdVolume(t){try{super.setAdVolume(t),this.Zx.setAdVolume(t)}catch(t){this.gf("CnxMediaBidAdaptor","setAdVolume",t)}}get adVideoUrl(){return this.Xx}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}Dc(){var t;if(!this.settings.pauseAdWhenFinished&&!this.settings.loopAdWhenFinished)try{super.Dc(),(0,Pt.i)(this.Jx),null===(t=this.Zx)||void 0===t||t.destroy()}catch(t){this.gf("CnxMediaBidAdaptor","_destroy",t)}}Qx(t){return(null==t?void 0:t.includes(ze.n.endPoints.base.video))?this.pl.appendParamsToUrl(t):t}Yx(t,i,e){let s;s=t.filter((t=>t.codec===S.H264));const n=(0,_t.DE)(i,s.map((t=>t.height)));return s=s.filter((t=>t.height===n)),s.length>0?this.pl.appendParamsToUrl(`${ze.n.endPoints.base.video}${e}/${s[0].file}`):null}}var Qs,Ys,Xs,Zs=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class Ks{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()}}fetchBid(){return Zs(this,void 0,void 0,(function*(){let t;if(this.metrics.fetchStart=(new Date).getTime(),(0,H.QM)(this.settings.adManagerLineItem.protoLineItem.externalHlsFile)&&(t=yield Gs(),!t))throw Ht.NetworkRequestUrl;const i=ji.getGlobalContainer().resolve(se),e=new Js(i,{hlsModule:t,id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,mediaId:this.settings.mediaId,renditions:this.settings.renditions,clickUrl:this.settings.clickUrl,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,adContainer:this.settings.adContainer,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,externalMediaFile:this.settings.adManagerLineItem.protoLineItem.externalMediaFile,externalHlsFile:this.settings.adManagerLineItem.protoLineItem.externalHlsFile,pauseAdWhenFinished:this.settings.pauseAdWhenFinished,loopAdWhenFinished:this.settings.loopAdWhenFinished,inApp:this.settings.inApp,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,bidSlotId:this.settings.bidSlotId,urlSuffixerService:this.settings.urlSuffixerService,pageDomain:this.settings.pageDomain});return this.metrics.fetchEnd=(new Date).getTime(),e}))}}!function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.STOPPING=2]="STOPPING"}(Qs||(Qs={}));class tn{constructor(t){this.Kx=t,this.tw=Qs.IDLE,this.iw=Promise.resolve()}start(){(this.tw===Qs.IDLE||this.tw===Qs.STOPPING)&&(this.tw=Qs.RUNNING,this.ew())}stop(){this.tw=Qs.STOPPING}setPromiseNotifier(t){return this.rw=t,this}setIdleNotifier(t){return this.ow=t,this}getState(){return this.tw}hw(){const t=this.Kx();void 0!==t?this.iw=t.then((t=>{this.rw&&this.rw(t)})).then((()=>{this.tw===Qs.STOPPING&&(this.tw=Qs.IDLE)})):this.tw=Qs.IDLE}ew(){this.tw===Qs.IDLE?this.ow&&this.ow():this.tw===Qs.RUNNING&&(this.hw(),this.iw.then((()=>{this.ew()})))}}class en{constructor(t,i=1){this.Kx=t,this.aw=i,this.cw=[],this.lw(i)}start(){return this.cw.forEach((t=>{t.start()})),this}stop(){return this.cw.forEach((t=>{t.stop()})),this}setPromiseNotifier(t){return this.cw.forEach((i=>{i.setPromiseNotifier(t)})),this}setAllThreadsIdleNotifier(t){return this.dw=t,this.uw(),this}setNumberOfThreads(t){if(t<=0)return;this.aw=t;const i=t-this.aw;i>0?this.lw(i):i<0&&this.pw(i)}getState(){return this.cw.reduce(((t,i)=>(t[i.getState()]++,t)),{[Qs.IDLE]:0,[Qs.RUNNING]:0,[Qs.STOPPING]:0})}lw(t){for(let i=0;i<t;i++){const t=new tn(this.Kx).setPromiseNotifier(this.rw);this.cw.push(t)}}pw(t){t=Math.min(t,this.cw.length);for(let i=0;i<t;i++)this.cw.pop().stop()}uw(){const t=()=>{this.getState()[Qs.IDLE]===this.cw.length&&this.dw()};this.cw.forEach((i=>{i.setIdleNotifier(t)}))}}!function(t){t[t.IDLE=0]="IDLE",t[t.LOADING=1]="LOADING",t[t.READY=2]="READY",t[t.STARTED=3]="STARTED",t[t.IMPRESSION=4]="IMPRESSION"}(Ys||(Ys={})),function(t){t[t.BID_LOADING_CONSUMED=0]="BID_LOADING_CONSUMED",t[t.BID_READY_CONSUMED=1]="BID_READY_CONSUMED",t[t.BID_INVALIDATED=2]="BID_INVALIDATED"}(Xs||(Xs={}));class sn{constructor(){this.fw=new Set}static getInstance(){return this.Yf||(this.Yf=new sn),this.Yf}addPlatformCappedLineItemIdList(t,i){i||(0,s.n)({message:"PlatformCappedLineItemRepository_bidPool_not_provided",level:s.D.CRITICAL,exception:`${t}`},{throttle:1,sendMaxLog:!1}),t.forEach((t=>{if((0,H.QM)(t)&&!this.fw.has(t)&&(this.fw.add(t),i)){i.getAllBidsForLineItem(t).forEach((t=>i.consumeBid(t,Xs.BID_INVALIDATED)))}}))}isLineItemPlatformCapped({advertiserLineItemId:t,publisherLineItemId:i}){return this.fw.has(t)||this.fw.has(i)}clear(){this.fw.clear()}}class nn{constructor(t){this.settings=t,this.gw=new Map,this.wu=[],this.mw=!1,this.yw=new rt.x,this.bw=()=>{const t=this.xw();if(t)return this.ww(t.lineItemList),this.Pw(t.lineItemList,t.state).then((()=>{this.Sw(t.lineItemList),this.Aw()})).catch((()=>{this.Sw(t.lineItemList),this.Aw()}));this.settings.auctionManager.onNothingToCall()},this.Iw=(t,i)=>this.settings.adCallerYo.getWinningYoScore(i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,i.settings.id)-this.settings.adCallerYo.getWinningYoScore(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.id),this.settings.lineItemList.forEach((t=>{gt(t.protoLineItem.creativeType)?t.protoLineItem.timeBetweenRequests=10:t.protoLineItem.timeBetweenRequests=6})),this.wu.push(this.settings.lineItemServices.lineItemServicesTimer.onTimer().subscribe((()=>{this.kw()})),this.settings.adBidPool.getBidPoolBidEvents(Mt.ON_BID_LOADING).subscribe((()=>{this.kw()})),this.settings.adBidPool.getBidPoolBidEvents(Mt.ON_BID_LOADING_CONSUMED).subscribe((()=>{this.kw()})),this.settings.adBidPool.getBidPoolBidEvents(Mt.ON_BID_READY_CONSUMED).subscribe((()=>{this.kw()}))),this.Cw=new en(this.bw,5),this.Tw(dt.Rtb)&&this.gw.set(dt.Rtb,{auctionPending:!1,caller:new hs(this.settings.isOutstream,this.settings.skipAdSettings,this.settings.app,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adRequestGatekeeper,this.settings.adEnforcer,this.settings.adSlotContainerRecycler)}),this.Tw(dt.HeaderBidder)&&this.gw.set(dt.HeaderBidder,{auctionPending:!1,caller:new Ts(this.settings.isOutstream,this.settings.schainSettings,this.settings.app,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adEnforcer,this.settings.adSlotContainerRecycler,this.settings.loopAdWhenFinished,this.settings.skipAdSettings)}),this.Tw(dt.Tam)&&this.gw.set(dt.Tam,{auctionPending:!1,caller:new Vs(this.settings.app,this.settings.amazonSlotId,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adEnforcer,this.settings.adSlotContainerRecycler)}),this.Cw.setAllThreadsIdleNotifier((()=>{this.settings.lineItemServices.lineItemServicesTimer.start()}))}get onFirstAggregatedBatchFinished(){return this.yw.asObservable()}call(t){this.Cw.setNumberOfThreads(t.maxParallelCalls),this.Mw=t,this.mw=!0,this.kw()}stop(){this.mw=!1,this.Cw.stop()}destroy(){this.stop(),this.settings.callingValidationAggregator.destroy(),this.gw.forEach((t=>{t.caller.destroy()})),(0,Pt.i)(this.wu)}Tw(t){return this.settings.lineItemList.some((i=>ut[i.protoLineItem.creativeType]===t))}Aw(){let t=!0;this.gw.forEach((i=>{i.auctionPending&&(t=!1)})),t&&this.yw.next()}kw(){this.mw&&this.Cw.start()}xw(){const t=this.settings.adCallerYo.getCallableLineItems(this.settings.lineItemList,this.Mw.stateSettings),i=this.settings.adCallerYo.getBestLineItem(t,this.Mw.stateSettings);if(i)return i}ww(t){this.settings.adCallingPool.addCallingLineItems(t)}Sw(t){this.settings.adCallingPool.removeCallingLineItems(t)}Pw(t,i){return gt(t[0].protoLineItem.creativeType)?this.Ew(t,i):this.Bw(t[0],i)}Bw(t,i){const e=this.Lw(t,i);return this.settings.callingValidationAggregator.registerRequestForLineItem(t,this.Ow()),t.historicalMetrics.requestNumber++,this.Rw(e),this.Dw(e)}Ew(t,i){const e=this.gw.get(ut[t[0].protoLineItem.creativeType]);t.forEach((t=>t.aggregators.add(e.caller))),e.auctionPending=!0;const s={lineItemRequestDataList:t.map((t=>({adManagerLineItem:t,maxAvailableRequests:this.settings.lineItemServices.requestCapsService.getAvailableRequestsForLineItem(t,this.Ow())}))),callingState:i,maxAdDuration:i.adBreakState.maxAdDuration,maxBidPrice:this.Fw(i)};return e.caller.request(s).then((s=>{s.bids.length||s.noBids.length||t.forEach((t=>{this.settings.callingValidationAggregator.registerRequestForLineItem(t,this.Ow())})),t.forEach((t=>{t.aggregators.delete(e.caller),t.historicalMetrics.requestNumber++})),s.noBids.forEach((t=>{this.settings.callingValidationAggregator.registerRequestForLineItem(t.lineItem,this.Ow()),this.$w(i,t.lineItem,t.reason,t.requestMetadata)})),s.bids.forEach((t=>this.Rw(t))),s.bids.sort(this.Iw);const n=s.bids.map((t=>(this.settings.callingValidationAggregator.registerRequestForLineItem(t.settings.adManagerLineItem,this.Ow()),this.Dw(t))));return Promise.all(n)})).catch().then((()=>{e.auctionPending=!1}))}Dw(t){return t.settings.adManagerLineItem.callers.add(t),t.fetchBid().catch((i=>{t.settings.adManagerLineItem.callers.delete(t);const e=t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,s=t.settings.id;this.settings.adCallerYo.registerPreBidFromBid(e,s);const n=qt[i]?qt[i]:r.ConnatixNoBidReasonEnum.RequestException;return this.$w(t.settings.callingState,t.settings.adManagerLineItem,n,t.settings.requestMetadata,t.settings.trackersInformation,Date.now()-t.metrics.fetchStart),Promise.reject()})).then((i=>{t.settings.adManagerLineItem.callers.delete(t),this.jw(i,Date.now()-t.metrics.fetchStart)})).catch((t=>{void 0!==t&&(0,s.n)({message:"AdManager_AdCallerController_handleCallAdaptorRequest",exception:t.message,callStack:t.stack,level:s.D.CRITICAL},{throttle:5})}))}jw(t,i){const e=t.settings.adManagerLineItem,s=t.settings.requestMetadata;if(t.settings.requestMetadata.data.requestTrackingHandledByServer||this.settings.trackingService.addBid({advertiserLineItemId:e.protoLineItem.advertiserLineItemId,publisherLineItemId:e.protoLineItem.publisherLineItemId,requestedFloorPrice:s.data.requestedFloorPrice,requestNumber:s.data.requestNumber,syncedUser:s.data.syncedUser,prebidJsBidderName:s.data.prebidJsBidderName,customClientPrice:t.settings.cpm,timeSpent:i,dspId:s.data.dspId,encryptedPrice:s.data.encryptedPrice,rtbAdomain:s.data.rtbAdomain,creativeId:t.creativeId,rtbSeatId:s.data.rtbSeatId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,predictedFloorPrice:t.settings.requestMetadata.data.predictedFloorPrice,floorPriceFactor:t.settings.requestMetadata.data.floorPriceFactor,floorPriceFactorBypassReason:t.settings.requestMetadata.data.floorPriceBypassReason,floorPriceInformation:t.settings.requestMetadata.data.floorPriceInformation}),this.settings.adRequestGatekeeper.addBid(e.protoLineItem.advertiserLineItemId,s.data.requestedFloorPrice),!this.settings.adCallerYo.isBidTargetingAllowedEverInSession(t,t.settings.callingState)||sn.getInstance().isLineItemPlatformCapped(t.settings.adManagerLineItem.protoLineItem)){0;const i=t.settings.id,e=t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId;return this.settings.adCallerYo.registerPreBidFromBid(e,i),void this.settings.auctionInfoLogging.bidIsNotWinnableEverInSession(t)}this.settings.adBidPool.addBid(t)}$w(t,i,e,s,n,r){n&&jt.track(n.adError,this.settings.adMacroReplacer,i.protoLineItem,t),s.data.requestTrackingHandledByServer||this.settings.trackingService.addPrebid({advertiserLineItemId:i.protoLineItem.advertiserLineItemId,publisherLineItemId:i.protoLineItem.publisherLineItemId,partnerCustomHeaders:s.data.partnerCustomHeaders,partnerReason:s.data.partnerReason,requestedFloorPrice:s.data.requestedFloorPrice,requestNumber:s.data.requestNumber,syncedUser:s.data.syncedUser,prebidJsBidderName:s.data.prebidJsBidderName,reason:e,timeSpent:r,predictedFloorPrice:s.data.predictedFloorPrice,floorPriceInformation:s.data.floorPriceInformation}),this.settings.adRequestGatekeeper.addPrebid(i.protoLineItem.advertiserLineItemId)}Lw(t,i){const e=new jt;Vt(t.protoLineItem.trackers,e);const s={id:(0,wt.qs)(),adManagerLineItem:t,replaceTrackingMacros:!0,requestMetadata:new Ze({requestNumber:t.historicalMetrics.requestNumber}),trackersInformation:e,callingState:i,adContainer:this.settings.adContainerMap.get(t.protoLineItem.adType),globalDomUtilsService:this.settings.app.services.GlobalDomUtilsService,viewabilityService:this.settings.app.services.ViewabilityService,cpm:t.protoLineItem.floorPrice||t.protoLineItem.customCpm,adEnforcer:this.settings.adEnforcer,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,bidSlotId:Re(),urlSuffixerService:this.settings.app.services.UrlSuffixerService,interactionService:this.settings.app.services.InteractionService};switch(t.protoLineItem.creativeType){case r.ProtoCreativeTypeEnum.External:case r.ProtoCreativeTypeEnum.ThirdParty:return t.protoLineItem.adType===r.ProtoAdType.Overlay?new zs(Object.assign(Object.assign({},s),{url:t.protoLineItem.adTag,pageDomain:this.settings.app.config.pageDomain})):new Xe(Object.assign(Object.assign({},s),{url:t.protoLineItem.adTag,adMacroReplacer:this.settings.adMacroReplacer,trackingService:this.settings.trackingService,loopAdWhenFinished:this.settings.loopAdWhenFinished,pageUrl:this.settings.app.config.pageUrl}));case r.ProtoCreativeTypeEnum.MediaFile:return new Ks(Object.assign(Object.assign({},s),{clickUrl:t.protoLineItem.mediaCreativeClickUrl,mediaId:t.protoLineItem.mediaCreativeId,renditions:t.protoLineItem.renditions,pauseAdWhenFinished:this.settings.pauseAdWhenFinished,loopAdWhenFinished:this.settings.loopAdWhenFinished,inApp:this.settings.app.config.isInApp,pageDomain:this.settings.app.config.pageDomain}))}}Rw(t){const{creativeType:i,floorPrice:e,successRate:s,advertiserLineItemId:n,lineItemPriority:r,customCpm:o}=t.settings.adManagerLineItem.protoLineItem;this.settings.adCallerYo.registerBiddingInformation({creativeType:i,floorPrice:e,lineItemId:n,priority:r,bidId:t.settings.id,cpm:t.settings.cpm,obfuscatedPrice:t.settings.obfuscatedPrice,successRate:t.settings.successRate||s,customCpm:o})}Ow(){return(this.Mw.stateSettings.currentState||this.Mw.stateSettings.predictedState).adOpportunity.id}Fw(t){const i=[...this.settings.adBidPool.getBidsByStatus([Ys.IDLE,Ys.LOADING,Ys.READY])].filter((i=>this.settings.adCallerYo.isBidTargetingAllowed(i,t,this.settings.lineItemServices.impressionCapsService)));return(0,l.BZ)(i)?Math.max(...i.map((t=>t.getPrice()))):0}}const rn="uncategorized";class on{resetCapsBasedOnExternalEvent(t){const i=this.Pt.keys();for(const e of i)this.Vw(e,t)&&this.Nw(e,rn)}Vw(t,i){return t.protoLineItem.resetCapType===i}Uw(t){return this.Vw(t,r.ProtoResetCapTypeEnum.TimeCapping)&&this.Hw(t)>0}}class hn{constructor(t){this.qw=t,this.zw=new Map}setNumberOfImpressions({value:t,categoryId:i}){(0,H.$K)(i)&&this.qw===r.ProtoResetCapTypeEnum.OpportunityCapping||(i=rn),this.zw.set(i,t)}getNumberOfImpressions({categoryId:t}){return(0,H.$K)(t)&&this.qw===r.ProtoResetCapTypeEnum.OpportunityCapping||(t=rn),this.zw.get(t)||0}}class an extends on{constructor(t=Date.now()){super(),this.Ww=t,this.Pt=new Map}canCall(t,i){this.Gw(t);const e=this.Pt.get(t);return void 0===e||(0===t.protoLineItem.impressionCap||e.getNumberOfImpressions({categoryId:i})<t.protoLineItem.impressionCap)}registerImpressionForLineItem(t,i){let e=this.Pt.get(t);return void 0===e&&(this.Pt.set(t,new hn(t.protoLineItem.resetCapType)),e=this.Pt.get(t),this.Uw(t)&&(e.nextImpressionCapResetTimestamp=this.Qw(this.Hw(t)))),e.setNumberOfImpressions({value:e.getNumberOfImpressions({categoryId:i})+1,categoryId:i}),this}registerRequestForLineItem(t,i){return this}destroy(){this.Pt.clear()}Nw(t,i){this.Pt.get(t).setNumberOfImpressions({value:0,categoryId:i})}Hw(t){return t.protoLineItem.resetImpressionsCapTime*I.s_}Gw(t,i=Date.now()){if(!this.Uw(t))return;const e=this.Pt.get(t);void 0!==e&&this.Yw(t,i)&&(e.setNumberOfImpressions({value:0}),e.nextImpressionCapResetTimestamp=this.Qw(this.Hw(t),i))}Yw(t,i){return i>=this.Pt.get(t).nextImpressionCapResetTimestamp}Qw(t,i=Date.now()){const e=Math.ceil((i-this.Ww)/t)*t;return this.Ww+e}}class cn{constructor(t){this.qw=t,this.Xw=new Map}setNumberOfRequests({value:t,categoryId:i}){(0,H.$K)(i)&&this.qw===r.ProtoResetCapTypeEnum.OpportunityCapping||(i=rn),this.Xw.set(i,t)}getNumberOfRequests({categoryId:t}){return(0,H.$K)(t)&&this.qw===r.ProtoResetCapTypeEnum.OpportunityCapping||(t=rn),this.Xw.get(t)||0}}class ln extends on{constructor(t=Date.now()){super(),this.Ww=t,this.allowResetOnTime=!0,this.Pt=new Map}canCall(t,i){this.Gw(t);const e=this.Pt.get(t);return void 0===e||(0===t.protoLineItem.requestCap||e.getNumberOfRequests({categoryId:i})<t.protoLineItem.requestCap)}registerRequestForLineItem(t,i,e=Date.now()){let s=this.Pt.get(t);return void 0===s&&(this.Pt.set(t,new cn(t.protoLineItem.resetCapType)),s=this.Pt.get(t),this.Uw(t)&&(s.nextRequestCapResetTimestamp=this.Qw(this.Hw(t)))),s.setNumberOfRequests({value:s.getNumberOfRequests({categoryId:i})+1,categoryId:i}),this}registerImpressionForLineItem(t){return this}getAvailableRequestsForLineItem(t,i){const e=this.Pt.get(t);return void 0===e?t.protoLineItem.requestCap:t.protoLineItem.requestCap-e.getNumberOfRequests({categoryId:i})}restoreOneCapForLineItem(t,i){if(t.protoLineItem.ignoreFilledRequests){const e=this.Pt.get(t);if(void 0===e)return;const s=e.getNumberOfRequests({categoryId:i});s>0&&e.setNumberOfRequests({value:s-1,categoryId:i})}}destroy(){this.Pt.clear()}Nw(t,i){this.Pt.get(t).setNumberOfRequests({value:0,categoryId:i})}Hw(t){return t.protoLineItem.resetRequestsCapTime*I.s_}Gw(t,i=Date.now()){if(!this.Uw(t))return;const e=this.Pt.get(t);void 0!==e&&this.Yw(t,i)&&(e.setNumberOfRequests({value:0}),e.nextRequestCapResetTimestamp=this.Qw(this.Hw(t),i))}Yw(t,i){return i>=this.Pt.get(t).nextRequestCapResetTimestamp&&this.allowResetOnTime}Qw(t,i=Date.now()){const e=Math.ceil((i-this.Ww)/t)*t;return this.Ww+e}}class dn{constructor(){this.Pt=new Map}registerRequestForLineItem(t,i,e=Date.now()){let s=this.Pt.get(t);return void 0===s&&(this.Pt.set(t,{}),s=this.Pt.get(t)),s.lastRequestTimestamp=e,s.categoryId=i,this}registerImpressionForLineItem(t){return this}canCall(t,i,e=Date.now()){const s=this.Pt.get(t);if(void 0===s)return!0;if(0===t.protoLineItem.timeBetweenRequests)return!0;if(e>=s.lastRequestTimestamp+t.protoLineItem.timeBetweenRequests*I.s_)return!0;return!(s.categoryId===i||t.protoLineItem.resetCapType!==r.ProtoResetCapTypeEnum.OpportunityCapping)}destroy(){this.Pt.clear()}}class un{constructor(t){this.kp=t,this.Zw=null,this.Kw=new rt.x}start(){return this.t_(),this}stop(){return this.i_(),this}onTimer(){return this.Kw.asObservable()}destroy(){this.i_()}t_(){null===this.Zw&&(this.Zw=this.kp.setInterval((()=>{this.Kw.next()}),500))}i_(){this.kp.clearInterval(this.Zw),this.Zw=null}}class pn extends a._{constructor(t,i,e,s){super(),this.e_=t,this.n_=i,this.r_=e,this.jc=s,this.o_=new rt.x,this.a_=new Map,this.c_=[],this.forceTriggerUpdateState=()=>{this.c_.forEach((t=>this.l_(t)))},this.l_=(t,i)=>{this.a_.set(t,this.d_(this.n_.get(t),i))},this.u_=t=>{this.p_([r.ProtoAdType.Video],t)},this.f_=t=>{this.p_([r.ProtoAdType.Overlay],t)},this.g_=t=>{this.p_([r.ProtoAdType.Nonlinear],t)},this.Tr=()=>{this.p_(this.c_)},this.p_=(t,i)=>{t.forEach((t=>this.l_(t,i))),this.o_.next()},this.m_={[r.ProtoAdType.Video]:this.u_,[r.ProtoAdType.Overlay]:this.f_,[r.ProtoAdType.Nonlinear]:this.g_},this.c_=[...this.n_.keys()],this.c_.forEach((t=>this.l_(t))),this.y_()}get onContainerStateUpdate(){return this.o_.asObservable()}getContainerMap(){return this.n_}getContainerStateMap(){return this.a_}getMainContainer(){return this.n_.get(this.e_)}getMainContainerState(){return this.getContainerStateMap().get(this.e_)}destroy(){this.n_.forEach(((t,i)=>{this.r_.off(t,this.Tr),this.jc.off(t,this.m_[i])}))}y_(){this.n_.forEach(((t,i)=>{this.r_.on(t,this.Tr),this.jc.on(t,this.m_[i],{threshold:b})}))}d_(t,i){let e=i;return void 0===e&&(e=this.jc.check({element:t,threshold:b})),{width:t.clientWidth,height:t.clientHeight,viewability:e}}}const fn="cnxpl-vl",gn="cnxpl-rf";class mn{constructor(){this.v_=!0,this.b_=new rt.x,this.x_=[],this.w_=t=>{if(this.v_)return;const i=t.target;if(i.volume>0&&(i.volume=0,!i.paused)){const t=i.getAttribute(gn);this.b_.next(t)}t.preventDefault?t.preventDefault():t.returnValue=!1}}get onVolumeDetected(){return this.b_.asObservable()}enforce(t,i){let e=t;(0,H.cL)(t)&&(e=t.contentDocument||t.contentWindow.document),this.v_=!1;(0,l.Sz)(e.getElementsByTagName("video")).forEach((t=>{this.__(t,i)}))}stopEnforce(){this.v_=!0}clearEnforce(t){try{const i=[];this.x_=this.x_.filter((e=>e.getAttribute(gn)!==t||(i.push(e),!1))),i.forEach((t=>{t.removeAttribute(fn),t.removeAttribute(gn),t.removeEventListener("volumechange",this.w_)}))}catch(t){}}__(t,i){t&&!t.getAttribute("cnxpl-vl")&&(t.volume=0,t.setAttribute(fn,"true"),t.setAttribute(gn,i),t.addEventListener("volumechange",this.w_),this.x_.push(t))}}class yn{P_(t){const i=function(){};t.Element.prototype.scrollIntoView=i,t.Element.prototype.scrollIntoViewIfNeeded=i,t.scroll=i,t.scrollTo=i,t.scrollBy=i}enforce(t){(0,H.cL)(t)&&this.P_(t.contentWindow)}stopEnforce(){}clearEnforce(){}}class vn{constructor(t){this.S_=t=>t.cnxEnfStorage?t.cnxEnfStorage:null,this.Ue=t;try{this.S_(this.Ue)||this.A_(this.Ue)}catch(t){(0,s.n)({message:"AdManager_EnforcerMemory_bind_enforcement",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}A_(t){(0,it.ML)(t.document.head,t,'!function(){function n(n){window["cnx"+n]||(window["cnx"+n]=window[n],window[n]=function(e){var t="";try{e&&(t=function n(e,t){try{if(!e)return"";if(e.cnxInnerTag)return e.cnxInnerTag;if(t<2){var r=t+1;return n(e.caller,r)}}catch(n){return""}return""}(e))}catch(n){}var r=window["cnx"+n].apply(null,arguments);if(t){var i=window.cnxEnfStorage;i[n][t]=i[n][t]||[],i[n][t].push(r)}return r})}window.cnxEnfStorage={setTimeout:{},setInterval:{},eventListeners:{},errors:[]};var e=window.location.hostname.split("."),t=window.btoa(e[e.length-2]+"."+e[e.length-1]);-1===["dG16LmNvbQ==","YmlsbGJvYXJkLmNvbQ==","aG9sbHl3b29kcmVwb3J0ZXIuY29t","dmliZS5jb20=","aG9yb3Njb3BlLmNvbQ==","YXN0cm9sb2d5LmNvbQ==","YWhvcmFtaXNtby5jb20="].indexOf(t)&&(!function(){const n=window.EventTarget?window.EventTarget.prototype:window.document;n.cnxAddEventListener||(n.cnxAddEventListener=n.addEventListener,n.addEventListener=function(n,e,t){var r=this||window;if(e&&e.cnxInnerTag){var i=window.cnxEnfStorage;i.eventListeners[e.cnxInnerTag]=i.eventListeners[e.cnxInnerTag]||[],i.eventListeners[e.cnxInnerTag].push({element:r,type:n,handler:e,options:t})}try{r.cnxAddEventListener(n,e,t)}catch(n){n.message="adlstn_"+n.message,i.errors.push(n)}})}(),n("setTimeout"),n("setInterval"))}();')}enforce(t,i){if((0,H.cL)(t))try{t.contentWindow.self===top||t.contentWindow.Function.prototype.cnxInnerTag||t.contentWindow.Object.defineProperty(t.contentWindow.Function.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:i}),t.contentWindow.self===top||t.contentWindow.Object.prototype.cnxInnerTag||t.contentWindow.Object.defineProperty(t.contentWindow.Object.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:i})}catch(t){}}stopEnforce(){}clearEnforce(t){try{const i=this.S_(this.Ue);i.eventListeners[t]&&(i.eventListeners[t].forEach((t=>{t.element.removeEventListener(t.type,t.handler,t.options)})),i.eventListeners[t]=[]),i.setInterval[t]&&(i.setInterval[t].forEach((t=>this.Ue.clearInterval(t))),i.setInterval[t]=[]),i.setTimeout[t]&&(i.setTimeout[t].forEach((t=>this.Ue.clearTimeout(t))),i.setTimeout[t]=[])}catch(t){}}}class bn{constructor(){this.I_=["viralgains","serving-sys.com","commercialadsdistributor"],this.k_=["beachfrontmedia","commercialadsdistributor"],this.C_=["commercialadsdistributor"],this.T_=["pixel.clearstream.tv","pixel.clrstm.com"],this.M_=new rt.x,this.E_=new rt.x}get onMalwareDetected(){return this.M_.asObservable()}get onBadUriDetected(){return this.E_.asObservable()}enforce(t,i){if((0,H.cL)(t)){this.B_=i;try{this.O_(t),this.R_(t),this.D_(t),this.F_(t)}catch(t){}}}stopEnforce(){}clearEnforce(){}j_(t,i,e,s){t.every((t=>!e.includes(t)))&&!i.getAttribute("cnx")&&(i.setAttribute("cnx","true"),this.E_.next({referenceId:this.B_,enforcementMessage:`${s}-${i}`}))}O_(t){const i=t.getAttribute("src");i&&(this.I_.forEach((t=>{i.includes(t)&&this.M_.next({referenceId:this.B_,enforcementMessage:`malware-${t}`})})),this.j_(["//","about:blank","about:self","javascript:"],t,i,"iframe"))}R_(t){(0,l.Sz)(t.contentDocument.getElementsByTagName("script")).forEach((t=>{const i=t.getAttribute("src");i&&(this.k_.forEach((t=>{i.includes(t)&&this.M_.next({referenceId:this.B_,enforcementMessage:`malware-${t}`})})),this.j_(["//"],t,i,"script"))}))}D_(t){(0,l.Sz)(t.contentDocument.getElementsByTagName("a")).forEach((t=>{const i=t.getAttribute("href");i&&this.C_.forEach((t=>{i.includes(t)&&this.M_.next({referenceId:this.B_,enforcementMessage:`malware-${t}`})}))}))}F_(t){(0,l.Sz)(t.contentDocument.getElementsByTagName("img")).forEach((t=>{const i=t.getAttribute("src");i&&this.T_.forEach((t=>{i.includes(t)&&this.M_.next({referenceId:this.B_,enforcementMessage:`malware-${t}`})}))}))}}class xn{constructor(t,i,e){if(this.V_=e,this.N_=null,this.U_=new Map,this.H_=Wt.None,this.q_=300,this.wu=[],this.z_=new Map,this.pf=new rt.x,this.U_.set(Wt.MemoryLeak,new vn(i)),e||this.U_.set(Wt.ScrollHijack,new yn),!t){const t=new mn;this.U_.set(Wt.Mute,t),this.wu.push(t.onVolumeDetected.subscribe((t=>{this.W_(zt.VOLUME_DETECTED,t,"")})))}const s=new bn;this.wu.push(s.onBadUriDetected.subscribe((t=>{this.W_(zt.BADURI_DETECTED,t.referenceId,t.enforcementMessage)})),s.onMalwareDetected.subscribe((t=>{this.W_(zt.MALWARE_DETECTED,t.referenceId,t.enforcementMessage)}))),this.U_.set(Wt.Malware,s)}get onEnforcerEvent(){return this.pf.asObservable()}registerContainer(t,i){this.z_.get(t)||this.z_.set(t,i)}deregisterContainer(t){this.z_.get(t)&&(this.U_.forEach((i=>{i.clearEnforce(this.z_.get(t))})),this.z_.delete(t),this.z_.size||this.stop(Wt.All))}start(t){this.V_&&(t^=Wt.ScrollHijack),this.H_|=t,null===this.N_&&(this.N_=setInterval((()=>{try{this.z_.forEach(((t,i)=>{this.G_(i,t)}))}catch(t){}}),this.q_))}stop(t){this.H_&=~t,this.H_===Wt.None&&(clearInterval(this.N_),this.N_=null),this.U_.forEach(((i,e)=>{t&e&&i.stopEnforce()}))}destroy(){this.stop(Wt.All),(0,Pt.i)(this.wu),this.z_.forEach(((t,i)=>{this.deregisterContainer(i)}))}G_(t,i){(0,l.Sz)(t.getElementsByTagName("iframe")).forEach((t=>{try{this.G_(t,i)}catch(t){}})),this.U_.forEach(((e,s)=>{this.H_&s&&e.enforce(t,i)}))}W_(t,i,e){let s;this.z_.forEach(((t,e)=>{t===i&&(s=e)})),this.pf.next({message:e,type:t,detectedContainer:s})}}class wn{constructor(){this.J_={},this.Q_=Date.now()}setOutOfViewAdPrice(t){this.J_.outOfViewAdPrice=t}setOutOfViewAdLineItemId(t){this.J_.outOfViewAdLineItemId=t}setInViewAdPrice(t){this.J_.inViewAdPrice=t}setDistanceWhenOutOfViewStarted(t){this.J_.distanceWhenOutOfViewStarted=t}setTimeUntilNextOpportunity(t){this.J_.timeUntilNextOpportunity=t}setSessionId(t){this.J_.sessionId=t}get missedImpressionsLogs(){return this.J_.timeUntilNextOpportunity=Date.now()-this.Q_,this.J_}}class _n{static createRecord(t){const i=new wn;return _n.Y_.set(t,i),i}static getPlayerRecord(t){return _n.Y_.get(t)}}_n.Y_=new Map;class Pn{constructor(t){this.Gt=t,this.X_=!1,this.Z_=void 0,this.K_=!1,this.tP=[],this.wu=[],this.iP=!1,this.eP=new rt.x,this.sP=new rt.x,this.Mu=new rt.x,this.nP=!1,this.rP=[],this.wu.push(this.Gt.adBidPool.getBidPoolBidEvents(Mt.ON_BID_READY).subscribe((()=>{this.oP()})),this.Gt.impressionCapsTimer.onTimer().subscribe((()=>{this.oP()})))}get onAdSelected(){return this.eP.asObservable()}get onAdFinished(){return this.sP.asObservable()}start(t){this.hP=t,this.X_=!0,this.oP()}stop(){this.X_=!1}destroy(){this.stop(),(0,Pt.i)(this.wu),this.Z_||this.aP()}get onMissedImpression(){return this.Mu.asObservable()}oP(){if(!this.X_||this.K_)return;const t=this.cP(this.hP);if(!t)return;const i=this.lP(t);this.Z_&&this.Gt.removeBidIfHigherYoScore&&i?(this.aP(),this.Z_.stopAd("removeStartedBid"),this.uP(t)):this.Z_||this.uP(t)}uP(t){this.Z_=t,this.rP=[],this.Gt.adBidPool.changeBidStatus(t,Ys.STARTED),this.eP.next(t),this.fP(t),t.startAd()}aP(){this.Z_&&((0,Pt.i)(this.tP),this.tP=[],this.Gt.adBidPool.consumeBid(this.Z_,Xs.BID_READY_CONSUMED),this.Z_=void 0,this.rP=[])}cP(t){const i=this.Gt.adBidPool.getBidsByStatus([Ys.READY]);return this.Gt.adImpressionerYo.getBestBid(i,t,this.Gt.impressionCapsService)}lP(t){return!!this.Z_&&this.Gt.adImpressionerYo.getBetterBid(t,this.Z_)!==this.Z_}gP(t,i,e){this.K_&&(0,s.n)({message:"AdManager_ABaseBidAdaptor_multipleImpressions",exception:`advertiserLineItemId:${t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${t.creativeId}`,callStack:`${t.adMediaType}`,level:s.D.CRITICAL},{throttle:1e3}),this.Gt.adImpressionerYo.registerImpression(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.id),this.iP=this.mP(e,t.getAdDuration()),this.K_=!0,this.Gt.adRequestGatekeeper.addImpression(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.obfuscatedPrice),this.Gt.impressionCapsService.registerImpressionForLineItem(t.settings.adManagerLineItem,this.hP.adOpportunity.id),this.Gt.requestCapsService.restoreOneCapForLineItem(t.settings.adManagerLineItem,this.hP.adOpportunity.id),this.Gt.adBidPool.changeBidStatus(t,Ys.IMPRESSION);const n=this.Gt.auctionInfoLogging.onImpression(t);this.yP(t,i,n)}vP(t,i,e,s=!0){this.bP(t,i,e,s),this.Gt.loopAdWhenFinished?t.resumeAd():this.Gt.pauseAdWhenFinished?t.pauseAd():(this.sP.next(t),this.aP(),this.oP())}bP(t,i,e,s=!0){if(this.K_)return this.nP=!1,void(this.K_=!1);if(!s)return;this.Gt.adImpressionerYo.registerPostBid(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.id);const n=this.Gt.auctionInfoLogging.onPostBid(t);this.xP(t,e,i,n)}wP(t,i){this.nP=!0,t.setOutOfViewAdLineItemId(i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId),t.setOutOfViewAdPrice(i.getPrice());const e=this._P();(0,H.r)(e)&&t.setInViewAdPrice(e);const s=(0,it.oW)(i.settings.adContainer);t.setDistanceWhenOutOfViewStarted(s.top)}_P(){const t=this.Gt.adBidPool.getBidsByStatus([Ys.READY]).filter((t=>t.settings.adManagerLineItem.protoLineItem.viewability)).map((t=>t.getPrice())).sort(((t,i)=>t-i));if((0,l.BZ)(t))return Math.max(...t);return-1}yP(t,i,e){var s,n;const r=this.hP.adBreakState,o=(0,H.kE)((0,_t.oK)(t.getAdDuration(),2))?(0,_t.oK)(t.getAdDuration(),2):0,h=(0,H.kE)((0,_t.oK)(t.declaredDurationInSeconds,2))?(0,_t.oK)(t.declaredDurationInSeconds,2):0,a=o-h,c=(0,ae.H8)(t.createdTimestamp),l=this.hP.adContainerState.get(t.settings.adManagerLineItem.protoLineItem.adType).viewability;l||this.wP(_n.createRecord(this.Gt.playerId),t);const d={adPodSlotPosition:r.adPodSlotIndex,adsourceType:t.adSourceType,advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,customClientPrice:t.settings.cpm,encryptedPrice:t.settings.requestMetadata.data.encryptedPrice,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,rtbAdomain:t.settings.requestMetadata.data.rtbAdomain,creativeId:t.creativeId,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,syncedUser:t.settings.requestMetadata.data.syncedUser,timeSpent:i,vastMediaType:t.adMediaType,dspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(s=t.settings.bidLifecycle)||void 0===s?void 0:s.winToAdLoadedTime,startAdToImpressionTime:null===(n=t.settings.bidLifecycle)||void 0===n?void 0:n.startAdToImpressionTime,impressionDuration:a,declaredDuration:h,useExploration:this.Gt.explorationMode,requestNumber:t.settings.requestMetadata.data.requestNumber,floorPrice:t.settings.requestMetadata.data.requestedFloorPrice,predictedFloorPrice:t.settings.requestMetadata.data.predictedFloorPrice,floorPriceFactor:t.settings.requestMetadata.data.floorPriceFactor,floorPriceBypassReason:t.settings.requestMetadata.data.floorPriceBypassReason,floorPriceInformation:t.settings.requestMetadata.data.floorPriceInformation,bidElapsedTimeSeconds:c,adBreakType:r.adBreakType,liveRampAts:t.settings.requestMetadata.data.liveRampAts,dynamicElkFieldsValues:{1:t.settings.requestMetadata.data.rtbRequestId,2:t.settings.requestMetadata.data.auctionBidId,4:`${l}`,5:`${t.settings.adManagerLineItem.protoLineItem.viewability}`},hasAdSkip:this.iP};(0,H.$K)(e)&&(d.auctionInformation=e),this.Gt.trackingService.trackVideoAdImpression(d)}xP(t,i,e,s){var n;const r=this.hP.adBreakState,o=(0,ae.H8)(t.createdTimestamp),h={adPodSlotPosition:r.adPodSlotIndex,adsourceType:t.adSourceType,advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,error:i,loaded:!0,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:t.adMediaType,syncedUser:t.settings.requestMetadata.data.syncedUser,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,rtbAdomain:t.settings.requestMetadata.data.rtbAdomain,creativeId:t.creativeId,timeSpent:e,dspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(n=t.settings.bidLifecycle)||void 0===n?void 0:n.winToAdLoadedTime,requestNumber:t.settings.requestMetadata.data.requestNumber,floorPrice:t.settings.requestMetadata.data.requestedFloorPrice,predictedFloorPrice:t.settings.requestMetadata.data.predictedFloorPrice,floorPriceInformation:t.settings.requestMetadata.data.floorPriceInformation,liveRampAts:t.settings.requestMetadata.data.liveRampAts,bidElapsedTimeSeconds:o,adBreakType:r.adBreakType};(0,H.$K)(s)&&(h.auctionInformation=s,h.auctionPostbidReason=this.Gt.auctionInfoLogging.getGeneralPostbidReason(i)),this.Gt.trackingService.addPostBid(h)}PP(t,i){const e=this.rP.indexOf(i)>=0&&!(this.Gt.pauseAdWhenFinished||this.Gt.loopAdWhenFinished),n=this.hP.adBreakState;e?1===(0,wt.Vm)([99,1])&&(0,s.n)({message:"AdManager_AdImpressionerController_handleQuartilesTracking_track_same_quartile_twice",level:s.D.WARN,exception:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,callStack:t.adMediaType}):(this.rP.push(i),this.Gt.trackingService.trackVideoAdQuartile({advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,quartile:i,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,dspId:t.settings.requestMetadata.data.dspId,adBreakType:n.adBreakType,hasAdSkip:this.iP,rtbAdomain:t.settings.requestMetadata.data.rtbAdomain}))}fP(t){const i=Date.now();this.tP.push(t.onAdSlotViewabilityChanged.subscribe((t=>{if(t&&this.nP){const t=_n.getPlayerRecord(this.Gt.playerId);this.Mu.next(t),this.nP=!1}})),t.onVpaidEvent.subscribe((e=>{var n;const o=function(t,i){switch(t){case k.fI.AdImpression:return i.adImpression;case k.fI.AdClickThru:return i.adClick;case k.fI.AdStarted:return i.adStarted;case k.fI.AdVideoStart:return i.adVideoStart;case k.fI.AdVideoFirstQuartile:return i.adQuartileFirst;case k.fI.AdVideoMidpoint:return i.adQuartileSecond;case k.fI.AdVideoThirdQuartile:return i.adQuartileThird;case k.fI.AdVideoComplete:return i.adQuartileFourth;case k.fI.AdPaused:return i.adPause;case k.fI.AdPlaying:return i.adResume;case k.fI.AdSkipped:return i.adSkip;case k.fI.AdUserClose:return i.adUserClose;case k.fI.AdUserAcceptInvitation:return i.adUserAcceptInvitation;case k.fI.AdUserMinimize:return i.adUserMinimize;case k.fI.AdError:return i.adError}}(e.type,t.settings.trackers),h=Date.now()-i;switch(o||e.type!==k.fI.AdImpression||(this.SP("AdManager_AdImpressionController_tracker_impression_not_found"),(0,s.n)({message:"AdManager_AdImpressionController_tracker_impression_not_found",level:s.D.CRITICAL},{sendMaxLog:!1})),jt.track(o,this.Gt.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState),e.type){case k.fI.AdError:this.vP(t,h,e.payload.errorMessage);break;case k.fI.AdSkipped:this.vP(t,h,Jt.AdStopped);break;case k.fI.AdStopped:this.vP(t,h,Jt.AdStopped,null===(n=e.payload)||void 0===n?void 0:n.shouldTrackPostBid);break;case k.fI.AdImpression:this.gP(t,h,e.payload.adSourceData.skipOffset);break;case k.fI.AdVideoFirstQuartile:this.PP(t,r.ProtoQuartilesEnum.First);break;case k.fI.AdVideoMidpoint:this.PP(t,r.ProtoQuartilesEnum.Second);break;case k.fI.AdVideoThirdQuartile:this.PP(t,r.ProtoQuartilesEnum.Third);break;case k.fI.AdVideoComplete:this.PP(t,r.ProtoQuartilesEnum.Fourth)}}))),this.tP.push(t.onAdViewableImpression.subscribe((i=>{i.adBreakType=this.hP.adBreakState.adBreakType,i.hasAdSkip=this.iP,this.Gt.trackingService.trackVideoAdImpressionViewable(i),jt.track(t.settings.trackers.adViewableImpression,this.Gt.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState)})))}mP(t,i){if((0,H.kE)(t)&&t>=0)return!0;return j(i,this.Gt.skipAdSettings)}SP(t,i){(0,s.n)({message:t,level:s.D.CRITICAL,exception:null==i?void 0:i.message,callStack:null==i?void 0:i.stack},{sendMaxLog:!1})}}const Sn={[r.ProtoAdBreakTypeEnum.PreRoll]:"preRoll",[r.ProtoAdBreakTypeEnum.MidRoll]:"midRoll",[r.ProtoAdBreakTypeEnum.PostRoll]:"postRoll"};class An{constructor(t,i){this.xb=t,this.so=i}replace(t,i,e){this.xb.setAdWidth(e.adMacros.adWidth),this.xb.setAdHeight(e.adMacros.adHeight),this.xb.setAdPosition(Sn[e.adMacros.adPostion]),e.mediaMacros.mediaDescription&&this.xb.setVideoDescription(e.mediaMacros.mediaDescription),e.mediaMacros.mediaDuration&&this.xb.setVideoDuration(e.mediaMacros.mediaDuration),e.mediaMacros.mediaId&&this.xb.setVideoId(e.mediaMacros.mediaId),e.mediaMacros.mediaTitle&&this.xb.setVideoTitle(e.mediaMacros.mediaTitle),e.mediaMacros.mediaUrl&&this.xb.setVideoUrl(e.mediaMacros.mediaUrl);const s=this.so.isConsent(i);this.xb.setGDPR(this.so.isConsentRequired()?1:0),this.xb.setConsent(s?1:0),this.xb.setGDPRConsent(this.so.getConsentPayload()),this.xb.setNPA(this.so.isPersonalisedAdsAllowed()?0:1);const n=this.so.getTrackableUser(),r=this.so.isConsentConnatix()&&s?n:void 0;return this.xb.setUUID(r),this.xb.setupMacros(t)}}var In=h(6798),kn=h(2566);function Cn(t,i){return(0,In.e)((function(e,s){var n=0;e.subscribe((0,kn.x)(s,(function(e){s.next(t.call(i,e,n++))})))}))}var Tn=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function Mn(t){return(0,Xi.m)(null==t?void 0:t.then)}var En=h(6766);function Bn(t){return(0,Xi.m)(t[En.L])}function Ln(t){return Symbol.asyncIterator&&(0,Xi.m)(null==t?void 0:t[Symbol.asyncIterator])}function On(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var Rn="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Dn(t){return(0,Xi.m)(null==t?void 0:t[Rn])}function Fn(t){return(0,Vi.FC)(this,arguments,(function(){var i,e,s;return(0,Vi.Jh)(this,(function(n){switch(n.label){case 0:i=t.getReader(),n.label=1;case 1:n.trys.push([1,,9,10]),n.label=2;case 2:return[4,(0,Vi.qq)(i.read())];case 3:return e=n.sent(),s=e.value,e.done?[4,(0,Vi.qq)(void 0)]:[3,5];case 4:return[2,n.sent()];case 5:return[4,(0,Vi.qq)(s)];case 6:return[4,n.sent()];case 7:return n.sent(),[3,2];case 8:return[3,10];case 9:return i.releaseLock(),[7];case 10:return[2]}}))}))}function $n(t){return(0,Xi.m)(null==t?void 0:t.getReader)}var jn=h(5);function Vn(t){if(t instanceof Yi.y)return t;if(null!=t){if(Bn(t))return n=t,new Yi.y((function(t){var i=n[En.L]();if((0,Xi.m)(i.subscribe))return i.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(Tn(t))return s=t,new Yi.y((function(t){for(var i=0;i<s.length&&!t.closed;i++)t.next(s[i]);t.complete()}));if(Mn(t))return e=t,new Yi.y((function(t){e.then((function(i){t.closed||(t.next(i),t.complete())}),(function(i){return t.error(i)})).then(null,jn.h)}));if(Ln(t))return Nn(t);if(Dn(t))return i=t,new Yi.y((function(t){var e,s;try{for(var n=(0,Vi.XA)(i),r=n.next();!r.done;r=n.next()){var o=r.value;if(t.next(o),t.closed)return}}catch(t){e={error:t}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(e)throw e.error}}t.complete()}));if($n(t))return Nn(Fn(t))}var i,e,s,n;throw On(t)}function Nn(t){return new Yi.y((function(i){(function(t,i){var e,s,n,r;return(0,Vi.mG)(this,void 0,void 0,(function(){var o,h;return(0,Vi.Jh)(this,(function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),e=(0,Vi.KL)(t),a.label=1;case 1:return[4,e.next()];case 2:if((s=a.sent()).done)return[3,4];if(o=s.value,i.next(o),i.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return h=a.sent(),n={error:h},[3,11];case 6:return a.trys.push([6,,9,10]),s&&!s.done&&(r=e.return)?[4,r.call(e)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return i.complete(),[2]}}))}))})(t,i).catch((function(t){return i.error(t)}))}))}function Un(t,i,e,s,n){void 0===s&&(s=0),void 0===n&&(n=!1);var r=i.schedule((function(){e(),n?t.add(this.schedule(null,s)):this.unsubscribe()}),s);if(t.add(r),!n)return r}function Hn(t,i,e){return void 0===e&&(e=1/0),(0,Xi.m)(i)?Hn((function(e,s){return Cn((function(t,n){return i(e,t,s,n)}))(Vn(t(e,s)))}),e):("number"==typeof i&&(e=i),(0,In.e)((function(i,s){return function(t,i,e,s,n,r,o,h){var a=[],c=0,l=0,d=!1,u=function(){!d||a.length||c||i.complete()},p=function(t){return c<s?f(t):a.push(t)},f=function(t){r&&i.next(t),c++;var h=!1;Vn(e(t,l++)).subscribe((0,kn.x)(i,(function(t){null==n||n(t),r?p(t):i.next(t)}),(function(){h=!0}),void 0,(function(){if(h)try{c--;for(var t=function(){var t=a.shift();o?Un(i,o,(function(){return f(t)})):f(t)};a.length&&c<s;)t();u()}catch(t){i.error(t)}})))};return t.subscribe((0,kn.x)(i,p,(function(){d=!0,u()}))),function(){null==h||h()}}(i,s,t,e)})))}var qn=h(278);function zn(t){return void 0===t&&(t=1/0),Hn(qn.y,t)}var Wn=new Yi.y((function(t){return t.complete()}));function Gn(t){return t[t.length-1]}function Jn(t){return Zi(Gn(t))?t.pop():void 0}function Qn(t,i){return"number"==typeof Gn(t)?t.pop():i}function Yn(t,i){return void 0===i&&(i=0),(0,In.e)((function(e,s){e.subscribe((0,kn.x)(s,(function(e){return Un(s,t,(function(){return s.next(e)}),i)}),(function(){return Un(s,t,(function(){return s.complete()}),i)}),(function(e){return Un(s,t,(function(){return s.error(e)}),i)})))}))}function Xn(t,i){return void 0===i&&(i=0),(0,In.e)((function(e,s){s.add(t.schedule((function(){return e.subscribe(s)}),i))}))}function Zn(t,i){if(!t)throw new Error("Iterable cannot be null");return new Yi.y((function(e){Un(e,i,(function(){var s=t[Symbol.asyncIterator]();Un(e,i,(function(){s.next().then((function(t){t.done?e.complete():e.next(t.value)}))}),0,!0)}))}))}function Kn(t,i){if(null!=t){if(Bn(t))return function(t,i){return Vn(t).pipe(Xn(i),Yn(i))}(t,i);if(Tn(t))return function(t,i){return new Yi.y((function(e){var s=0;return i.schedule((function(){s===t.length?e.complete():(e.next(t[s++]),e.closed||this.schedule())}))}))}(t,i);if(Mn(t))return function(t,i){return Vn(t).pipe(Xn(i),Yn(i))}(t,i);if(Ln(t))return Zn(t,i);if(Dn(t))return function(t,i){return new Yi.y((function(e){var s;return Un(e,i,(function(){s=t[Rn](),Un(e,i,(function(){var t,i,n;try{i=(t=s.next()).value,n=t.done}catch(t){return void e.error(t)}n?e.complete():e.next(i)}),0,!0)})),function(){return(0,Xi.m)(null==s?void 0:s.return)&&s.return()}}))}(t,i);if($n(t))return function(t,i){return Zn(Fn(t),i)}(t,i)}throw On(t)}function tr(t,i){return i?Kn(t,i):Vn(t)}var ir=h(4975);function er(t,i){return void 0===i&&(i=!1),(0,In.e)((function(e,s){var n=0;e.subscribe((0,kn.x)(s,(function(e){var r=t(e,n++);(r||i)&&s.next(e),!r&&s.complete()})))}))}function sr(t,i,e){var s=(0,Xi.m)(t)||i||e?{next:t,error:i,complete:e}:t;return s?(0,In.e)((function(t,i){var e;null===(e=s.subscribe)||void 0===e||e.call(s);var n=!0;t.subscribe((0,kn.x)(i,(function(t){var e;null===(e=s.next)||void 0===e||e.call(s,t),i.next(t)}),(function(){var t;n=!1,null===(t=s.complete)||void 0===t||t.call(s),i.complete()}),(function(t){var e;n=!1,null===(e=s.error)||void 0===e||e.call(s,t),i.error(t)}),(function(){var t,i;n&&(null===(t=s.unsubscribe)||void 0===t||t.call(s)),null===(i=s.finalize)||void 0===i||i.call(s)})))})):qn.y}class nr{constructor(t){this.bid=t,this.cancelled=!1,this.AP=new rt.x,this.IP=!1,this.Nf=this.bid.onVpaidEvent.pipe((0,ir.h)((t=>t.type===k.fI.AdLoaded)),er((()=>!this.IP)),sr((()=>{this.IP=!0}))),this.Uf=this.bid.onVpaidEvent.pipe((0,ir.h)((t=>t.type===k.fI.AdError)),Cn((t=>t.payload.errorMessage)),er((()=>!this.IP)),sr((()=>{this.IP=!0})))}get onSuccess(){return this.Nf}get onFailure(){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e=Jn(t),s=Qn(t,1/0),n=t;return n.length?1===n.length?Vn(n[0]):zn(s)(tr(n,e)):Wn}(this.AP,this.Uf)}loadBid(t,i,e,s,n){this.bid.initAd(t,i,e,s,void 0,void 0,n)}}class rr{constructor(t){this.Gt=t,this.kP=new Set,this.wu=[],this.Nc=!1,this.CP=()=>{const t=Date.now();if(this.TP())return void this.Gt.auctionManager.onNothingToWin();const i=this.MP(),{selectedBid:e}=i;return e?(this.Gt.auctionInfoLogging.winBid(e),this.EP(i,this.BP.vastViewMode).catch((s=>{const n=this.Gt.auctionInfoLogging.onPostBid(i.selectedBid);throw this.LP(e,t,s,n),this.OP(),i})).then((()=>{this.OP()})).catch((t=>{if(t===i)return;let e="";try{e=JSON.stringify(t)}catch(t){}(0,s.n)({message:"AdManager_winBid_failed",level:s.D.CRITICAL,exception:t,callStack:e},{throttle:3,sendMaxLog:!1})}))):void 0},this.Cw=new en(this.CP,10),this.wu.push(this.Gt.adBidPool.getBidPoolBidEvents(Mt.ON_BID).subscribe((t=>{const i=this.MP();this.Gt.auctionInfoLogging.newBidAdded(t,i),this.OP()})),this.Gt.adBidPool.getBidPoolBidEvents(Mt.ON_BID_STARTED).subscribe((()=>{this.OP()})),this.Gt.adBidPool.getBidPoolBidEvents(Mt.ON_BID_READY_CONSUMED).subscribe((()=>{this.OP()})),this.Gt.impressionCapsTimer.onTimer().subscribe((()=>{this.OP()})))}isLoadingBids(){return this.kP.size>0}win(t){this.BP=t,this.Cw.setNumberOfThreads(t.maxParallelWins),this.Nc=!0,this.OP()}stop(){this.Nc=!1,this.Cw.stop()}destroy(){this.stop(),(0,Pt.i)(this.wu)}OP(){this.Nc&&this.Cw.start()}MP(){const t=this.RP(),i=this.DP();return this.FP(t,i)}FP(t,i){const e=Object.assign({},t);return t.selectedBid&&i.selectedBid?(this.$P(i.selectedBid,t.selectedBid)&&(e.selectedBid=void 0,e.unselectedBidList.push({bid:t.selectedBid,lossReason:r.ProtoAuctionLossReasonEnum.CompetitorPriority})),e):e}TP(){if(-1===this.Gt.maxNumberOfWins)return!1;const t=this.Gt.adBidPool.getBidsByStatus([Ys.READY]),i=this.Gt.adBidPool.getBidsByStatus([Ys.STARTED]),e=this.Gt.adBidPool.getBidsByStatus([Ys.IMPRESSION]);this.jP(i,e);return t.length+this.kP.size+(i[0]?1:0)+(e[0]?1:0)>=this.Gt.maxNumberOfWins}jP(t,i){t.length+i.length<=1||(0,s.n)({message:"AdWinnerController_multiple_bids_started",level:s.D.CRITICAL,callStack:`${t.length}`,exception:`${i.length}`},{throttle:2,sendMaxLog:!1})}RP(){return this.VP(this.Gt.adBidPool.getBidsByStatus([Ys.IDLE]))}DP(){const t=[...(0,l.ee)(this.kP).map((t=>t.bid)),...this.Gt.adBidPool.getBidsByStatus([Ys.READY])];return this.VP(t)}VP(t){return this.Gt.adWinnerYo.selectBestBid(t,this.BP.stateSettings,this.Gt.impressionCapsService)}$P(t,i){return!(this.Gt.adWinnerYo.getWinningYoScore(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.id)<=this.Gt.adWinnerYo.getWinningYoScore(i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,i.settings.id))}EP(t,i){return new Promise(((e,s)=>{const{selectedBid:n,state:r}=t,o=new nr(n);this.kP.add(o),this.Gt.adBidPool.changeBidStatus(n,Ys.LOADING),o.onSuccess.subscribe((()=>{this.kP.delete(o),this.NP(n),this.Gt.adBidPool.changeBidStatus(n,Ys.READY),e()})),o.onFailure.subscribe((t=>{this.kP.delete(o),this.Gt.adBidPool.consumeBid(n,Xs.BID_LOADING_CONSUMED),s(t)}));const{width:h,height:a}=r.adContainerState.get(n.settings.adManagerLineItem.protoLineItem.adType);o.loadBid(h,a,i,this.Gt.desiredBitRateForWins,r.soundValue),jt.track(n.settings.trackers.adWin,this.Gt.adMacroReplacer,n.settings.adManagerLineItem.protoLineItem,r)}))}NP(t){const{creativeType:i,floorPrice:e,customCpm:s,successRate:n,advertiserLineItemId:r,lineItemPriority:o}=t.settings.adManagerLineItem.protoLineItem,{id:h,cpm:a,obfuscatedPrice:c,successRate:l}=t.settings,d=t.getAdDuration();this.Gt.adWinnerYo.registerWinningInformation({lineItemId:r,bidId:h,creativeType:i,floorPrice:e,obfuscatedPrice:c,cpm:a,successRate:l||n,priority:o,adDuration:d,customCpm:s})}LP(t,i,e,s){this.UP(t,Date.now()-i,e,s),this.Gt.adWinnerYo.registerPostBid(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.id)}UP(t,i,e,s){var n,r,o,h,a;jt.track(t.settings.trackers.adError,this.Gt.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState);const c=(null===(r=null===(n=this.BP.stateSettings)||void 0===n?void 0:n.currentState)||void 0===r?void 0:r.adBreakState)||(null===(h=null===(o=this.BP.stateSettings)||void 0===o?void 0:o.predictedState)||void 0===h?void 0:h.adBreakState),l=(0,ae.H8)(t.createdTimestamp),d={adPodSlotPosition:c.adPodSlotIndex,adsourceType:t.adSourceType,advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,error:e,loaded:!1,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:t.adMediaType,syncedUser:t.settings.requestMetadata.data.syncedUser,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,rtbAdomain:t.settings.requestMetadata.data.rtbAdomain,creativeId:t.creativeId,timeSpent:i,dspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(a=t.settings.bidLifecycle)||void 0===a?void 0:a.winToAdLoadedTime,requestNumber:t.settings.requestMetadata.data.requestNumber,floorPrice:t.settings.requestMetadata.data.requestedFloorPrice,predictedFloorPrice:t.settings.requestMetadata.data.predictedFloorPrice,floorPriceInformation:t.settings.requestMetadata.data.floorPriceInformation,liveRampAts:t.settings.requestMetadata.data.liveRampAts,bidElapsedTimeSeconds:l};(0,H.$K)(s)&&(d.auctionInformation=s,d.auctionPostbidReason=this.Gt.auctionInfoLogging.getGeneralPostbidReason(e)),this.Gt.trackingService.addPostBid(d)}}var or,hr,ar;!function(t){function i(t,i){return!t.protoLineItem.sound||i.sound}function e(t,i){const e=i.adContainerState.get(t.protoLineItem.adType).viewability;return!t.protoLineItem.viewability||e}function s(t,i){return!t.protoLineItem.adBreakSettings||t.protoLineItem.adBreakSettings.adBreakTargeting.some((t=>{if(t.adRollType===i.adBreakState.adBreakType)return function(t,i){switch(t){case r.ProtoLineItemAdBreakTypeEnum.All:return!0;case r.ProtoLineItemAdBreakTypeEnum.AdPod:return i;case r.ProtoLineItemAdBreakTypeEnum.SingleAd:return!i}}(t.adBreakTypeEnum,i.adBreakState.isAdPodBreak)}))}function n(t,i){return!(t.protoLineItem.mediaIdTargeting&&!d(i.media.mediaId,t.protoLineItem.mediaIdTargeting))&&(!(t.protoLineItem.mediaKeywordsTargeting&&!d(i.media.mediaKeywords,t.protoLineItem.mediaKeywordsTargeting))&&!(t.protoLineItem.mediaLanguageTargeting&&!d(i.media.mediaLanguage,t.protoLineItem.mediaLanguageTargeting)))}function o(t,i){var e,s,n;const{advertiserContextualTargeting:r,publisherContextualTargeting:o}=t.protoLineItem,h=(null===(e=i.media.mediaInsights)||void 0===e?void 0:e.insights)||[],a=!!(null===(s=i.media.mediaInsights)||void 0===s?void 0:s.insightsFallback),c=(null===(n=i.page.insights)||void 0===n?void 0:n.insights)||[];return!((0,l.BZ)(r)&&!u(r,h,a,c))&&!((0,l.BZ)(o)&&!u(o,h,a,c))}function h(t,i){const{playerSizeTargetings:e}=t.protoLineItem,{width:s}=i.adContainerState.get(t.protoLineItem.adType);return!(0,H.as)(e)||!(0,H.kE)(s)||(e.sizeChoiceCriteria===r.ProtoSizeChoiceCriteriaEnum.GreaterThan?!(0,H.kE)(e.minWidth)||s>=e.minWidth:e.sizeChoiceCriteria===r.ProtoSizeChoiceCriteriaEnum.SmallerThan?!(0,H.kE)(e.maxWidth)||s<=e.maxWidth:e.sizeChoiceCriteria!==r.ProtoSizeChoiceCriteriaEnum.Between||(!(0,H.kE)(e.maxWidth)||!(0,H.kE)(e.minWidth)||s>=e.minWidth&&s<=e.maxWidth))}function a(t,i){const{playerOrientationTargeting:e}=t.protoLineItem;switch(e){case r.ProtoPlayerOrientationTargetingEnum.Landscape:if(i.playerOrientation===x.Portrait)return!1;break;case r.ProtoPlayerOrientationTargetingEnum.Portrait:if(i.playerOrientation===x.Landscape)return!1}return!0}function c(t,i){var e;const s=null===(e=t.protoLineItem.adBreakSettings)||void 0===e?void 0:e.adPodTargeting;if(!s)return!0;if(!i.adBreakState.isAdPodBreak)return!0;const n=i.adBreakState.adPodSlotIndex;let o=!0;switch(s.adSlotTargetingType){case r.ProtoLineItemAdSlotTargetingTypeEnum.Interval:(n<s.adSlotPositions[0]||n>s.adSlotPositions[1])&&(o=!1);break;case r.ProtoLineItemAdSlotTargetingTypeEnum.SpecificSlots:-1===s.adSlotPositions.indexOf(n)&&(o=!1)}return s.targetingType===r.ProtoLineItemTargetingTypeEnum.Except&&(o=!o),o}function d(t,i){if((0,l.BZ)(i.items)&&Array.isArray(t)){const e=(0,l.tN)(t,i.items).length;return i.choiceCriteria===r.ProtoChoiceCriteriaEnum.Only?e>0:0===e}const e=(0,l.d3)(t,i.items);return i.choiceCriteria===r.ProtoChoiceCriteriaEnum.Only?e:!e}function u(t,i,e,s){return t.some((t=>function(t,i,e,s){for(let n=0;n<t.filters.length;n++){const o=t.filters[n],h=e?o.items:o.hashedItemsIds,a=o.hashedItemsIds,c=i.filter((t=>h.includes(t))).length,l=s.filter((t=>a.includes(t))).length,d=p(o.type,c,h),u=p(o.type,l,a);switch(o.level){case r.ProtoContextualTargetingLevelEnum.Media:if(!d)return!1;break;case r.ProtoContextualTargetingLevelEnum.Page:if(!u)return!1;break;case r.ProtoContextualTargetingLevelEnum.Both:if(!d||!u)return!1}}return!0}(t,i,e,s)))}function p(t,i,e){switch(t){case r.ProtoLineItemContextualTargetingEnum.IncludeAny:if(0===i)return!1;break;case r.ProtoLineItemContextualTargetingEnum.IncludeAll:if(i!==e.length)return!1;break;case r.ProtoLineItemContextualTargetingEnum.ExcludeAny:if(i>0)return!1;break;case r.ProtoLineItemContextualTargetingEnum.ExcludeAll:if(i===e.length)return!1}return!0}t.isLineItemTargetingAllowed=function(t,r){return e(t,r)&&i(t,r)&&s(t,r)&&n(t,r)&&c(t,r)&&o(t,r)&&h(t,r)&&a(t,r)},t.isAllowedBySound=i,t.isAllowedByViewability=e,t.isAllowedByAdBreakType=s,t.isAllowedByMediaTargeting=n,t.isAllowedByContextualTargeting=o,t.isAllowedByPlayerSizeTargeting=h,t.isAllowedByPlayerOrientationTargeting=a,t.isAllowedByPodTargeting=c,t.isAllowedRegardingDuration=function(t,i){return!t||0===i||t<=i},t.isDimensionsAllowedForNonLinearBanner=function(t,i,e,s){if(!vt(t,null==i?void 0:i.nonLinearRequestType))return!0;const n=Math.ceil((0,_t.Tc)(s.height,V.NON_LINEAR_MAX_HEIGHT_PERCENT));return!(!e||(null==e?void 0:e.width)>s.width||(null==e?void 0:e.height)>n)}}(or||(or={}));class cr{constructor(t){this.HP=t}registerBiddingInformation(t){this.HP.registerBiddingInformation(t)}registerWinningInformation(t){return this.HP.registerWinningInformation(t)}registerPreBidFromBid(t,i){this.HP.registerPreBidFromBid(t,i)}registerImpression(t,i){this.HP.registerImpression(t,i)}registerPostBid(t,i){this.HP.registerPostBid(t,i)}getCallingYoScore(t){return this.HP.getCallingYoScore(t)}getWinningYoScore(t,i){return this.HP.getWinningYoScore(t,i)}getImpressionYoScore(t,i){return this.HP.getImpressionYoScore(t,i)}qP(t,i){const e=t.getAdDuration(),s=i.adBreakState.sessionMaxAdDuration;return or.isAllowedRegardingDuration(e,s)}zP(t,i){const e=t.getAdDuration(),s=i.adBreakState.remainingAdDuration;return or.isAllowedRegardingDuration(e,s)}WP(t,i){const e=t.settings.adManagerLineItem.protoLineItem;return or.isDimensionsAllowedForNonLinearBanner(e.adType,e.nonlinearLineItemSettings,t.settings.dimensions,i)}GP(t,i,e){return e.canCall(t.settings.adManagerLineItem,i.adOpportunity.id)&&or.isLineItemTargetingAllowed(t.settings.adManagerLineItem,i)&&this.qP(t,i)&&this.zP(t,i)&&this.WP(t,i)}}class lr extends cr{constructor(t,i,e,s,n,r){super(t),this.JP=e,this.QP=s,this.YP=n,this.XP=r}getBestLineItem(t,i){const e=i.currentState||i.predictedState;if(!e)return;const s=this.ZP(t);return s?{state:e,lineItemList:this.KP(s,t)}:void 0}getCallableLineItems(t,i){const e=i.currentState||i.predictedState;return t.filter((t=>{if(t.aggregators.size>0)return!1;const i=[Ys.IMPRESSION],s=this.QP.getAllBidsForLineItem(t.protoLineItem.advertiserLineItemId,i);return!(!gt(t.protoLineItem.creativeType)&&(s.length>0||t.callers.size>0)&&!t.protoLineItem.forceCallingInEveryAO)&&this.XP.canCall(t,e.adOpportunity.id)})).filter((t=>!sn.getInstance().isLineItemPlatformCapped({advertiserLineItemId:t.protoLineItem.advertiserLineItemId,publisherLineItemId:t.protoLineItem.publisherLineItemId}))).filter((t=>or.isLineItemTargetingAllowed(t,e))).filter((t=>this.tS(t,e)))}isBidTargetingAllowed(t,i,e){return this.GP(t,i,e)}isBidTargetingAllowedEverInSession(t,i){return this.qP(t,i)}tS(t,i){if(gt(t.protoLineItem.creativeType))return!0;if(t.protoLineItem.forceCallingInEveryAO)return!0;const e=this.QP.getBidsExceptStatus([Ys.STARTED,Ys.IMPRESSION]).filter((t=>this.isBidTargetingAllowed(t,i,this.YP))),s=t.protoLineItem.floorPrice||t.protoLineItem.customCpm,n=this.getCallingYoScore(t.protoLineItem.advertiserLineItemId),r=this.JP.callingLineItems,o=[...e.map((t=>t.getPrice()))],h=[...r.map((t=>this.getCallingYoScore(t.protoLineItem.advertiserLineItemId)))];for(let t=0;t<o.length;t++)if(s<o[t])return!1;for(let t=0;t<h.length;t++)if(n<h[t])return!1;return!0}ZP(t){let i=t;return t.some((t=>gt(t.protoLineItem.creativeType)))&&(i=i.filter((t=>gt(t.protoLineItem.creativeType)))),this.iS(i)[0]}iS(t=[]){return t.sort(((t,i)=>this.getCallingYoScore(i.protoLineItem.advertiserLineItemId)-this.getCallingYoScore(t.protoLineItem.advertiserLineItemId)))}KP(t,i){const{creativeType:e}=t.protoLineItem;return gt(e)?this.iS(i.filter((t=>e===t.protoLineItem.creativeType))):[t]}}class dr extends cr{getBestBid(t,i,e){return this.eS(t,i,e)}getBetterBid(t,i){const e=t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,s=t.settings.id,n=i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,r=i.settings.id;return this.getImpressionYoScore(e,s)>this.getImpressionYoScore(n,r)?t:i}eS(t,i,e){return[...t].filter((t=>this.GP(t,i,e))).sort(((t,i)=>{const e=t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,s=t.settings.id,n=i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,r=i.settings.id;return this.getImpressionYoScore(n,r)-this.getImpressionYoScore(e,s)}))[0]}}class ur extends cr{constructor(){super(...arguments),this.sS=(t,i,e)=>{const s=[],n=[];for(const r of t){this.GP(r,i.currentState||i.predictedState,e)?s.push(r):n.push(r)}return{allowedBidList:s,notAllowedBidList:n}}}selectBestBid(t,i,e){const s=this.sS(t,i,e),{allowedBidList:n,notAllowedBidList:o}=s,h=i.currentState||i.predictedState,a=this.nS(n),c=o.map((t=>({bid:t,lossReason:this.rS(t,h)}))),l=n.filter((t=>t!==a)).map((t=>({bid:t,lossReason:r.ProtoAuctionLossReasonEnum.CompetitorPriority})));return{state:h,selectedBid:a,unselectedBidList:[...c,...l]}}isBetterBid(t,i){const e=t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,s=t.settings.id,n=i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,r=i.settings.id;return this.getWinningYoScore(e,s)>this.getWinningYoScore(n,r)}nS(t){if((0,l.BZ)(t))return[...t].sort(((t,i)=>{const e=t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,s=t.settings.id,n=i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,r=i.settings.id;return this.getWinningYoScore(n,r)-this.getWinningYoScore(e,s)}))[0]}rS(t,i){return this.zP(t,i)?r.ProtoAuctionLossReasonEnum.AdOpportunityEnd:r.ProtoAuctionLossReasonEnum.TargetingMismatch}}!function(t){t[t.ON_STARTED=0]="ON_STARTED",t[t.ON_END=1]="ON_END"}(hr||(hr={}));class pr{constructor(t){this.Gt=t,this.oS=new rt.x,this.hS=[],this.aS=!1,this.cS=!1,this.wu=[]}get onAuctionMechanismEnded(){return this.oS.asObservable()}startNewAuction(t){this.lS=t.callingState,this.cS=t.waitForNewReadyBid,this.dS(),this.uS(),this.pS(),this.fS()}cancelAuction(){this.dS()}updateState(t){if(this.lS=t,0===this.hS.length)return;const i=this.Gt.adCallingPool.callingLineItems.map((t=>t.protoLineItem.advertiserLineItemId)),e=this.Gt.adCallerYo.getCallableLineItems(this.Gt.lineItems,this.lS.stateSettings).map((t=>t.protoLineItem.advertiserLineItemId));this.hS=this.hS.filter((t=>t.isAdCalled||(0,l.d3)(t.lineItemId,e)||(0,l.d3)(t.lineItemId,i))),this.fS()}onNothingToWin(){0!==this.hS.length&&this.hS.every((t=>!0===t.isAdCalled))&&this.fS()}onNothingToCall(){0!==this.hS.length&&(this.gS(),this.fS())}gS(){const t=this.Gt.adCallingPool.callingLineItems.map((t=>t.protoLineItem.advertiserLineItemId));this.hS=this.hS.filter((i=>!0===i.isAdCalled||!1===i.isAdCalled&&(0,l.d3)(i.lineItemId,t)))}mS(){this.dS(),this.oS.next()}pS(){this.wu.push(this.Gt.adBidPool.getBidPoolBidEvents(Mt.ON_BID_READY).subscribe((t=>{this.aS=!0,this.fS()})),this.Gt.adBidPool.getBidPoolBidEvents(Mt.ON_BID_LOADING_CONSUMED).subscribe((t=>{this.fS()})),this.Gt.adCallingPool.getAdCallingPoolEvents(hr.ON_END).subscribe((t=>{this.yS(t),this.fS()})))}yS(t){this.hS.forEach((i=>{t.some((t=>t.protoLineItem.advertiserLineItemId===i.lineItemId))&&(i.isAdCalled=!0)}))}vS(){(0,Pt.i)(this.wu)}fS(){this.cS&&!this.aS||(0!==this.hS.length?this.hS.every((t=>!0===t.isAdCalled))&&this.xS()&&this.mS():this.mS())}xS(){const t=this.wS(this.Gt.adBidPool.getBidsByStatus([Ys.READY]));if(!t)return!1;const i=this.Gt.adWinnerYo.selectBestBid(this.Gt.adBidPool.getBidsByStatus([Ys.IDLE]),this.lS.stateSettings,this.Gt.impressionCapsService),e=[...this.Gt.adBidPool.getBidsByStatus([Ys.LOADING])];i.selectedBid&&e.push(i.selectedBid);const s=this.wS(e);if(!s)return!0;return this.Gt.adWinnerYo.getWinningYoScore(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.id)>=this.Gt.adWinnerYo.getWinningYoScore(s.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,s.settings.id)}wS(t){if(t&&0!==t.length)return t.reduce(((t,i)=>this.Gt.adWinnerYo.getWinningYoScore(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.id)>this.Gt.adWinnerYo.getWinningYoScore(i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,i.settings.id)?t:i))}dS(){this.hS=[],this.aS=!1,this.vS()}uS(){this._S(this.lS.stateSettings),this.PS(this.lS.stateSettings),this.SS()}SS(){this.Gt.adCallingPool.callingLineItems.forEach((t=>{this.AS(t)}))}PS(t){const i=this.kS(),e=this.Gt.adCallerYo.getCallableLineItems(i,t),s=e.filter((t=>t.protoLineItem.forceCallingInEveryAO)),n=this.CS(e,t);if(!n)return void this.TS(s);this.MS()>this.Gt.adCallerYo.getCallingYoScore(n.protoLineItem.advertiserLineItemId)?this.TS(s):(this.AS(n),s.filter((t=>t!==n)).forEach((t=>{this.AS(t)})))}_S(t){const i=this.ES();this.Gt.adCallerYo.getCallableLineItems(i,t).forEach((t=>{this.AS(t)}))}kS(){return this.Gt.lineItems.filter((t=>!gt(t.protoLineItem.creativeType)))}ES(){return this.Gt.lineItems.filter((t=>gt(t.protoLineItem.creativeType)))}CS(t,i){const e=this.Gt.adCallerYo.getBestLineItem(t,i);if(e&&(0,l.BZ)(e.lineItemList))return e.lineItemList[0]}MS(){const t=this.Gt.adBidPool.getBidsByStatus([Ys.READY]),i=this.wS(t);return i?this.Gt.adWinnerYo.getWinningYoScore(i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,i.settings.id):0}AS(t){this.hS.some((i=>i.lineItemId===t.protoLineItem.advertiserLineItemId))||this.hS.push({isAdCalled:!1,lineItemId:t.protoLineItem.advertiserLineItemId})}TS(t){t.forEach((t=>{this.AS(t)}))}}!function(t){t.ShortCircuitEnd="short",t.TimeoutEnd="timeout",t.Prefetch="prefetched"}(ar||(ar={}));class fr{constructor(t,i){this.kp=t,this.BS=null,this.LS=new rt.x,this.oS=new rt.x,this.OS=null,this.RS={inPrefetchMode:!1,startTime:0,prefetchEnded:!1},this.DS={id:"",auctionEnded:!1},this.FS=new pr({lineItems:i.lineItems,impressionCapsService:i.impressionCapsService,requestCapsService:i.requestCapsService,yoScoreManager:i.yoScoreManager,adCallerYo:i.adCallerYo,adWinnerYo:i.adWinnerYo,adCallingPool:i.adCallingPool,adBidPool:i.adBidPool}),this.$S()}get onAuctionStopCalling(){return this.oS.asObservable()}get onAuctionEnd(){return this.LS.asObservable()}updateState(t){this.FS.updateState(t)}cancelAuction(){this.RS.inPrefetchMode=!1,this.FS.cancelAuction(),this.jS()}startPrefetch(t){this.jS(),this.RS={inPrefetchMode:!0,startTime:Date.now(),prefetchEnded:!1},this.FS.startNewAuction({callingState:t,waitForNewReadyBid:!0})}startAuction(t,i,e=3e3){if(0===e)return void this.mS();if(this.DS.id===i)return void(this.DS.auctionEnded&&this.mS());this.BS=Date.now(),this.DS={auctionEnded:!1,id:i},this.jS();let s=e;this.RS.inPrefetchMode?(s-=Date.now()-this.RS.startTime,s<0||this.RS.prefetchEnded?this.mS(ar.Prefetch):this.VS(s)):(this.FS.startNewAuction({callingState:t,waitForNewReadyBid:!1}),this.VS(s)),this.RS.inPrefetchMode=!1}onNothingToWin(){this.FS.onNothingToWin()}onNothingToCall(){this.FS.onNothingToCall()}destroy(){this.HS.unsubscribe(),this.HS=null}$S(){this.HS=this.FS.onAuctionMechanismEnded.subscribe((()=>{this.qS()}))}qS(){this.RS.prefetchEnded=!0,this.oS.next(),this.RS.inPrefetchMode||this.mS(ar.ShortCircuitEnd)}VS(t){this.OS=this.kp.setTimeout((()=>{this.mS(ar.TimeoutEnd)}),t)}mS(t){null!==this.BS&&(0,H.$K)(t)&&(this.zS(t,Date.now()-this.BS),this.BS=null),this.DS.auctionEnded=!0,this.cancelAuction(),this.LS.next()}jS(){this.kp.clearTimeout(this.OS),this.OS=null}zS(t,i){(0,wt.Vm)([99,1])&&(0,s.n)({message:"AuctionManager_end_auction",exception:t,callStack:this.WS(i),level:s.D.INFO},{sendMaxLog:!1,throttle:1e4})}WS(t,i=0){const e=[0,.25,.5,.75,1,1.25,1.5,1.75,2,2.25,2.5,2.75,3,4,5][i];return void 0===e?"over_5s":t<=1e3*e?`${e}`:this.WS(t,i+1)}}class gr{constructor(){this.requestNumber=0}}class mr{constructor(t){this.protoLineItem=t,this.historicalMetrics=new gr,this.callers=new Set,this.aggregators=new Set}}class yr{constructor(t,i){this.parentContainer=t,this._m=i,this.isImaSlot=!1,this.slotsContainer=this._m.createElementByString('<div class= "cnx-ad-bid-slot"></div>'),this.adSlot=this._m.createElementByString('<div class="cnx-ad-slot"></div>'),this.videoSlot=this._m.createElementByString('<video class="cnx-ad-slot cnx-ad-video-slot"></video>'),this.videoSlot.setAttribute("playsinline",""),this.videoSlot.setAttribute("webkit-playsinline",""),this.slotsContainer.appendChild(this.videoSlot),this.slotsContainer.appendChild(this.adSlot),this.parentContainer.appendChild(this.slotsContainer)}destroy(){this.parentContainer.removeChild(this.slotsContainer)}sanitize(){}}class vr extends yr{constructor(){super(...arguments),this.isImaSlot=!0,this.GS=!1,this.JS={imaAdDisplayContainer:void 0,imaAdsLoader:void 0,imaSdk:void 0}}fetchImaDependencies(){return ci.fetchImaSdk(window,!0).then((t=>this.QS(t)))}destroy(){this.JS.imaAdsLoader&&this.JS.imaAdsLoader.destroy(),this.JS.imaAdDisplayContainer&&this.JS.imaAdDisplayContainer.destroy(),super.destroy()}sanitize(){this.JS.imaAdsLoader.contentComplete(),super.sanitize()}QS(t){if(this.GS)return this.JS;t.settings.setDisableCustomPlaybackForIOS10Plus(!0);const i=this.YS(t),e=this.XS(t,i);return this.JS={imaSdk:t,imaAdDisplayContainer:i,imaAdsLoader:e},this.GS=!0,this.JS}YS(t){const i=new t.AdDisplayContainer(this.adSlot,this.videoSlot);return i.initialize(),i}XS(t,i){const e=new t.AdsLoader(i);return e.getSettings().setVpaidMode(t.ImaSdkSettings.VpaidMode.INSECURE),e.getSettings().setAutoPlayAdBreaks(!1),e}}class br{constructor(t){this.settings=t,this.ZS=new Set,this.KS=new Set,this.tA=[10,15,20],this.iA=0}preloadImaSdkSlots(t){ci.preloadImaSdk(window);for(let i=1;i<=3;i++){const i=new vr(t,this.settings.globalDomUtilsService);i.fetchImaDependencies(),this.ZS.add(i)}}requestAdSlot(t){const i=new yr(t,this.settings.globalDomUtilsService);return this.sA(i),this.nA(),i}requestAdSlotIma(t){let i=this.rA();return i||(i=new vr(t,this.settings.globalDomUtilsService)),this.sA(i),this.nA(),i}destroyAdSlot(t){this.KS.delete(t),t.destroy()}recycleAdSlot(t){this.KS.delete(t),this.oA(t)?(t.sanitize(),this.ZS.add(t)):this.destroyAdSlot(t)}oA(t){return t.isImaSlot}rA(){let t=null;return this.ZS.forEach((i=>{this.oA(i)&&null===t&&(t=i)})),t}sA(t){this.ZS.delete(t),this.KS.add(t)}nA(){const t=this.ZS.size+this.KS.size;t===this.tA[this.iA]&&(this.hA(this.tA[this.iA]),t===this.tA[this.tA.length-1]&&this.tA.push(this.tA[this.tA.length-1]+20),this.iA++)}hA(t){(0,s.n)({message:"AdSlotContainerRecycler_slotcount",exception:`${t}`,callStack:"",level:s.D.INFO},{throttle:20})}}class xr{constructor(t){this.aA=new Map,t.forEach((t=>{this.aA.set(t.advertiserLineItemId,Math.random())}))}getCallingYoScore(t){return this.cA(t)}getWinningYoScore(t,i){return this.cA(t)}getImpressionYoScore(t,i){return this.cA(t)}cA(t){return this.aA.get(t)}}var wr;!function(t){t[t.CALLING=0]="CALLING",t[t.WINNING=1]="WINNING",t[t.IMPRESSION=2]="IMPRESSION"}(wr||(wr={}));class _r{constructor(t){this.lA=t}getScore(){return this.dA}uA(){const{successRate:t,cpm:i,priority:e}=this.lA;return this.pA(t)*i+Yt.XY*e}pA(t){let i=0===t?Math.random():t;return i=1,1}}class Pr extends _r{constructor(t,i){super(i),this.fA=t,this.lA=i,gt(this.fA)?this.dA=Math.random():this.dA=this.uA()}get metrics(){return this.lA}}class Sr extends _r{constructor(t){super(t),this.lA=t,this.dA=this.uA()}get metrics(){return this.lA}}class Ar extends _r{constructor(t){super(t),this.lA=t,this.gA=20,this.dA=this.uA(),this.mA=this.vA()}get scoreIncludingDuration(){return this.mA}vA(){const{successRate:t,cpm:i,priority:e,adDuration:s}=this.lA;return this.pA(t)*i/this.bA(s)+Yt.XY*e}bA(t){return(0,H.r)(t)?t:this.gA}}class Ir{constructor(t){this.xA=new Map,this.wA(t)}registerBiddingInformation(t){const{successRate:i,priority:e,bidId:s}=t,n=Kt(t),r=new Sr({successRate:i,cpm:n,priority:e}),o=this.xA.get(t.lineItemId);o?o.winningBidYoScoreMap.set(s,r):this._A("registerBiddingInformation",t.lineItemId)}registerPreBidFromBid(t,i){this.PA(t,i,"registerPreBidFromBid")}registerWinningInformation(t){const{successRate:i,priority:e,adDuration:s,bidId:n}=t,r=Kt(t),o=new Ar({successRate:i,cpm:r,priority:e,adDuration:s}),h=this.xA.get(t.lineItemId);h?h.impressionBidYoScoreMap.set(n,o):this._A("registerWinningInformation",`lineItemId:${t.lineItemId}_bidId:${t.bidId}`)}registerPostBid(t,i){this.PA(t,i,"registerPostBid")}registerImpression(t,i){this.PA(t,i,"registerImpression")}getCallingYoScore(t){const i=this.xA.get(t);return this.cA(i,wr.CALLING)}getWinningYoScore(t,i){const e=this.xA.get(t);return this.cA(e,wr.WINNING,i)}getImpressionYoScore(t,i){const e=this.xA.get(t);return this.cA(e,wr.IMPRESSION,i)}wA(t){t.forEach((t=>{this.SA(t)}))}SA(t){const{floorPrice:i,lineItemPriority:e,successRate:s,advertiserLineItemId:n,creativeType:r}=t,o={cpm:i,priority:e,successRate:s};this.xA.set(n,{callingLineItemYoScore:new Pr(r,o),winningBidYoScoreMap:new Map,impressionBidYoScoreMap:new Map})}PA(t,i,e){const s=this.xA.get(t);s?(s.winningBidYoScoreMap.has(i)&&s.winningBidYoScoreMap.delete(i),s.impressionBidYoScoreMap.has(i)&&s.impressionBidYoScoreMap.delete(i)):this._A(`unregisterBiddingInformation:${e}`,`lineItemId:${t}_bidId:${i}`)}cA(t,i,e){var s,n;if(!(0,H.$K)(t))return this._A("getYoScore",`${i}`),0;switch(i){case wr.CALLING:return t.callingLineItemYoScore.getScore();case wr.WINNING:return null===(s=t.winningBidYoScoreMap.get(e))||void 0===s?void 0:s.getScore();case wr.IMPRESSION:return null===(n=t.impressionBidYoScoreMap.get(e))||void 0===n?void 0:n.getScore();default:return 0}}_A(t,i=""){(0,s.n)({message:t,level:s.D.INFO,callStack:`YoScoreManager_${t}`,exception:i})}}class kr{constructor(t,i){this.HP=i?new xr(t):new Ir(t)}registerBiddingInformation(t){this.HP.registerBiddingInformation&&this.HP.registerBiddingInformation(t)}registerPreBidFromBid(t,i){this.HP.registerPreBidFromBid&&this.HP.registerPreBidFromBid(t,i)}registerWinningInformation(t){this.HP.registerWinningInformation&&this.HP.registerWinningInformation(t)}registerPostBid(t,i){this.HP.registerPostBid&&this.HP.registerPostBid(t,i)}registerImpression(t,i){this.HP.registerImpression&&this.HP.registerImpression(t,i)}getCallingYoScore(t){return this.HP.getCallingYoScore(t)}getWinningYoScore(t,i){return this.HP.getWinningYoScore(t,i)}getImpressionYoScore(t,i){return this.HP.getImpressionYoScore(t,i)}}class Cr{constructor(t,i){this.ca=t,this.QP=i,this.AA=new Map}bidIsNotWinnableEverInSession(t){if(!this.IA(t))return;const i=[...this.kA(),t.getPrice()].sort(((t,i)=>i-t)),e=this.CA(i);this.TA(t.settings.requestMetadata.data.cnxBidId,e,r.ProtoAuctionLossReasonEnum.TargetingMismatch)}newBidAdded(t,i){this.IA(t)&&(i.selectedBid?i.selectedBid!==t?this.MA(t,i):this.EA(t):this.MA(t,i))}winBid(t){if(!this.IA(t))return;const i=this.kA(),e=this.CA(i);this.AA.set(t,e)}onPostBid(t){return this.BA(t)}onImpression(t){return this.BA(t)}IA(t){return t.settings.requestMetadata.data.logAuctionInformation}EA(t){const{cnxBidId:i}=t.settings.requestMetadata.data,e=this.kA(),s=this.CA(e);this.TA(i,s,r.ProtoAuctionLossReasonEnum.CompetitorPriority)}BA(t){const i=this.LA(t);return this.OA(t),i}MA(t,i){var e,s,n,r;const{cnxBidId:o}=t.settings.requestMetadata.data,h=this.kA(),a=this.RA(t,i),c=this.CA(h);(0,H.$K)(a)?this.TA(o,c,a):this.DA("AdManager_AuctionInfoLogging_lossReason_cannot_be_found",t.settings.requestMetadata.data.cnxBidId,null===(r=null===(n=null===(s=null===(e=i.selectedBid)||void 0===e?void 0:e.settings)||void 0===s?void 0:s.requestMetadata)||void 0===n?void 0:n.data)||void 0===r?void 0:r.cnxBidId)}LA(t){if(this.AA.has(t))return this.AA.get(t);this.IA(t)&&this.DA("AdManager_AuctionInfoLogging_cannot_find_win_bid_snapshot",t.settings.requestMetadata.data.cnxBidId)}OA(t){this.AA.has(t)&&this.AA.delete(t)}RA(t,i){var e;return null===(e=i.unselectedBidList.find((i=>i.bid===t)))||void 0===e?void 0:e.lossReason}getGeneralPostbidReason(t){switch(t){case Jt.ImaScriptFailure:case Jt.ImaObjectNotFound:case Jt.ImaManagerInit:case Jt.ImaInitSdkError:case Jt.AdxOverlayGptScriptLoad:case Jt.DisplayIntegratorIframeLoad:return r.ProtoAuctionPostbidReasonEnum.SDKFailure;case Jt.VastUnsupportedMedia:case Jt.CnxMediaSrcNotSupported:return r.ProtoAuctionPostbidReasonEnum.UnsupportedMedia;case Jt.DomainBlocked:case Jt.AdaptorInitAdError:case Jt.AdaptorStartAdError:case Jt.WrapperInitAdError:case Jt.WrapperStartAdError:return r.ProtoAuctionPostbidReasonEnum.TargetingMismatch;default:return r.ProtoAuctionPostbidReasonEnum.CreativeError}}kA(){return this.QP.getAllBids().map((t=>t.getPrice())).sort(((t,i)=>i-t))}CA(t){const i=t[0]?Ot(t[0]):void 0,e=t[1]?Ot(t[1]):void 0;return i||this.DA("AdManager_AuctionInfoLogging_highestBidPrice_missing",`${i}`),{bidDensity:t.length,highestObfuscatedBidPrice:i,secondHighestObfuscatedBidPrice:e}}TA(t,i,e){this.ca.trackAuctionInfoForBid({cnxBidId:t,auctionInformation:i,auctionLossReason:e})}DA(t,i="",e=""){(0,s.n)({message:t,level:s.D.CRITICAL,callStack:i,exception:e},{throttle:5})}}class Tr{constructor(){this.FA=[]}canCall(t,i){return this.FA.every((e=>e.canCall(t,i)))}registerRequestForLineItem(t,i){return this.FA.forEach((e=>{e.registerRequestForLineItem(t,i)})),this}registerImpressionForLineItem(t,i){return this.FA.forEach((e=>{e.registerImpressionForLineItem(t,i)})),this}registerCallingValidator(t){return this.FA.push(t),this}registerCallingValidators(t){return t.forEach((t=>{this.registerCallingValidator(t)})),this}destroy(){this.FA.forEach((t=>{t.destroy()}))}}class Mr{constructor(){this.$A=new rt.x,this.jA=new rt.x,this.VA={[hr.ON_STARTED]:this.$A,[hr.ON_END]:this.jA},this.NA={[hr.ON_STARTED]:t=>this.$A.next(t),[hr.ON_END]:t=>this.jA.next(t)}}getCallingObservable(t){return this.VA[t].asObservable()}triggerEvent(t,i){(0,this.NA[t])(i)}}class Er{constructor(){this.UA=[],this.HA=new Mr}get callingLineItems(){return this.UA}addCallingLineItems(t){this.UA=[...this.callingLineItems,...t],this.HA.triggerEvent(hr.ON_STARTED,t)}removeCallingLineItems(t){this.UA=this.callingLineItems.filter((i=>!(0,l.d3)(i,t))),this.HA.triggerEvent(hr.ON_END,t)}getAdCallingPoolEvents(t){return this.HA.getCallingObservable(t)}}class Br{constructor(){this.qA=new rt.x,this.zA=new rt.x,this.WA=new rt.x,this.GA=new rt.x,this.JA=new rt.x,this.QA=new rt.x,this.YA=new rt.x,this.ZA={[Mt.ON_BID]:this.qA,[Mt.ON_BID_LOADING]:this.zA,[Mt.ON_BID_READY]:this.WA,[Mt.ON_BID_STARTED]:this.GA,[Mt.ON_BID_LOADING_CONSUMED]:this.QA,[Mt.ON_BID_READY_CONSUMED]:this.YA},this.KA={[Ys.IDLE]:t=>{this.qA.next(t)},[Ys.LOADING]:t=>{this.zA.next(t)},[Ys.READY]:t=>{this.QA.next(t),this.WA.next(t)},[Ys.STARTED]:t=>{this.GA.next(t)},[Ys.IMPRESSION]:t=>{this.JA.next(t)}},this.tI={[Xs.BID_LOADING_CONSUMED]:t=>{this.QA.next(t)},[Xs.BID_READY_CONSUMED]:t=>{this.YA.next(t)},[Xs.BID_INVALIDATED]:(t,i)=>{[Ys.IDLE,Ys.LOADING].includes(i)?this.QA.next(t):this.YA.next(t)}}}getBidObservable(t){return this.ZA[t].asObservable()}bidStatusChanged(t,i){(0,this.KA[i])(t)}bidConsumed(t,i,e){(0,this.tI[e])(t,i)}}class Lr{constructor(){this.iI=[],this.eI=new Br,this.sI=[]}getBidPoolBidEvents(t){return this.eI.getBidObservable(t)}addBid(t){this.iI.push({bid:t,status:Ys.IDLE}),this.eI.bidStatusChanged(t,Ys.IDLE)}getAllBids(){return this.nI(),this.iI.map((t=>t.bid))}getAllBidsForLineItem(t,i=[]){return this.nI(),this.iI.filter((t=>!i.includes(t.status))).filter((i=>i.bid.settings.adManagerLineItem.protoLineItem.advertiserLineItemId===t||i.bid.settings.adManagerLineItem.protoLineItem.publisherLineItemId===t)).map((t=>t.bid))}getBidsByStatus(t){return this.nI(),this.iI.filter((i=>t.includes(i.status))).map((t=>t.bid))}getBidsExceptStatus(t){return this.nI(),this.iI.filter((i=>!t.includes(i.status))).map((t=>t.bid))}changeBidStatus(t,i){const e=this.oI(t);return e?(e.status=i,this.eI.bidStatusChanged(t,i),!0):(this.hI(t.settings.id)||this.aI("AdBidPool_update_bid_not_found",i),!1)}consumeBid(t,i){const e=this.oI(t);return e?((0,l.sj)(this.iI,e),this.eI.bidConsumed(e.bid,e.status,i),i===Xs.BID_INVALIDATED&&this.sI.push(t.settings.id),!0):(this.hI(t.settings.id)||this.aI("AdBidPool_consume_bid_not_found",i),!1)}nI(){this.cI().forEach((t=>{this.consumeBid(t.bid,Xs.BID_INVALIDATED)}))}cI(){return this.iI.filter((t=>{const i=t.bid.createdTimestamp,e=t.bid.settings.adManagerLineItem.protoLineItem.networkExpiryTimeSeconds;return(0,H.r)(e)&&(0,ae.H8)(i)>=e}))}oI(t){return this.iI.find((i=>i.bid===t))}hI(t){return this.sI.includes(t)}aI(t,i){(0,s.n)({message:t,exception:i?`${i}`:"",level:s.D.CRITICAL},{sendMaxLog:!1,throttle:2})}}var Or=h(4974);class Rr{constructor(t){this.dI=t,this.uI=!1,this.pI=!1,this.gI=!1}get predictMode(){return this.uI}get adFetchingAllowed(){return this.pI}get impressionsAllowed(){return this.gI}get currentAdPlayerState(){return this.mI}get predictedAdPlayerState(){return this.yI}partialStateUpdate(t){this.mI&&(this.mI=Object.assign(Object.assign({},this.mI),t)),this.yI&&(this.yI=Object.assign(Object.assign({},this.yI),t))}getCurrentAdManagerState(t=!1){let i=this.mI;!this.currentAdPlayerState&&t&&(i=this.yI);const e=this.dI.getContainerStateMap();return this.vI(i,e)}getPredictedAdManagerState(){const t=this.yI,i=this.bI();return this.vI(t,i)}vI(t,i){if(!t)return;const{width:e,height:s,viewability:n}=this.dI.getMainContainerState(),{clickToPlay:r,mediaMetadata:o,sound:h,adBreakState:a,linearAdOpportunity:c,playerOrientation:l}=t;return{width:e,height:s,viewability:n,clickToPlay:r,media:o,sound:!!h,soundValue:h,adContainerState:i,adBreakState:a,adOpportunity:c,playerOrientation:l,page:{insights:Or.k.pageInsights}}}bI(){let t;return this.yI.prefetchStateType===Tt.StartSessionPrefetch?(t=new Map,this.dI.getContainerStateMap().forEach(((i,e)=>{t.set(e,Object.assign(Object.assign({},i),{viewability:!0}))}))):t=this.dI.getContainerStateMap(),t}getCallSettings(){return{maxParallelCalls:V.PARALLEL_CALLS_DEFAULT,stateSettings:{currentState:this.getCurrentAdManagerState(),predictedState:this.getPredictedAdManagerState()}}}getWinSettings(){return{desiredBitRate:V.DEFAULT_DESIRED_BITRATE,maxParallelWins:V.PARALLEL_WINS_DEFAULT,vastViewMode:this.currentAdPlayerState?this.currentAdPlayerState.vastViewMode:this.predictedAdPlayerState.vastViewMode,stateSettings:{currentState:this.getCurrentAdManagerState(),predictedState:this.getPredictedAdManagerState()}}}enableImpression(t){this.uI=!1,this.mI=t,this.yI||(this.yI=this.mI),this.pI=!0}disableImpression(){this.gI=!1,this.pI=!1}enablePredict(t,i){this.mI=null,this.uI=!0,this.yI=t,this.yI.prefetchStateType=i,this.pI=!0}auctionEnd(){this.gI=!0}auctionStopCalling(){this.predictMode&&(this.pI=!1)}}const Dr=30*I.s_;class Fr{constructor(){this.xI=null}onAdRemoved(){this.xI=null,this.wI()}pauseViaUserInteraction(){this.xI&&(this.xI.pausedWithUserInteraction=!0)}resumeViaUserInteraction(){this.xI&&(this.xI.pausedWithUserInteraction=!1,this.wI())}_I(t){this.xI={currentAd:t,isPaused:!1,pausedWithUserInteraction:!1,remainingTimeForAdToBePaused:Dr,lastAdPausedStartedTimestamp:void 0},this.wI()}checkPauseAd(t,i){t&&(null===this.xI&&this._I(t),i?this.SI(t):this.AI(t))}AI(t){this.II(t)&&(this.xI.isPaused=!0,this.xI.lastAdPausedStartedTimestamp=Date.now(),t.pauseAd(),this.wI(),this.kI=setTimeout((()=>{t.stopAd("pauseOutOfView"),this.xI=null,this.wI()}),this.xI.remainingTimeForAdToBePaused))}SI(t){t.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&t.impressionStarted&&this.xI.isPaused&&!this.xI.pausedWithUserInteraction&&(this.wI(),this.xI.isPaused=!1,this.xI.remainingTimeForAdToBePaused=this.xI.remainingTimeForAdToBePaused-(Date.now()-this.xI.lastAdPausedStartedTimestamp),t.resumeAd())}wI(){clearTimeout(this.kI),this.kI=void 0}II(t){return t.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&t.impressionStarted&&!this.xI.isPaused&&!this.xI.pausedWithUserInteraction}}class $r{constructor(t,i,e){this.CI=t,this.dI=i,this.TI=e,this.ns=!1,this.MI=new Fr,this.Pu=new rt.x,this.EI()}get onVpaidEvent(){return this.Pu.asObservable()}get inImpression(){return this.ns}setVastViewMode(t){this.TI=t;const{width:i,height:e}=this.dI.getContainerStateMap().get(this.CI.settings.adManagerLineItem.protoLineItem.adType);this.CI.resizeAd(i,e,t)}getAdVolume(){return this.CI.getAdVolume()}setAdVolume(t,i){if(i){const{adMacroReplacer:e,adManagerState:s}=i;this.BI(t,s,e)}this.CI.setAdVolume(t)}resizeAd(){const{width:t,height:i,viewability:e}=this.dI.getContainerStateMap().get(this.CI.settings.adManagerLineItem.protoLineItem.adType);this.MI.checkPauseAd(this.CI,e),this.CI.resizeAd(t,i,this.TI)}skipAd(){this.CI.setAdVolume(0),this.CI.skipAd()}stopAd(t){this.CI.stopAd(t)}pauseAd(t){this.CI.pauseAd(),t&&this.MI.pauseViaUserInteraction()}resumeAd(t){this.CI.resumeAd(),t&&this.MI.resumeViaUserInteraction()}getMediaSize(){const t=this.CI.getAdMediaSize().width,i=this.CI.getAdMediaSize().height,{widthRatio:e,heightRatio:s}=(0,_t.dO)(t,i);return{width:t,height:i,widthRatio:e,heightRatio:s,adType:this.CI.settings.adManagerLineItem.protoLineItem.adType}}getMetadata(){return{advertiserLineItemId:this.CI.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:this.CI.settings.adManagerLineItem.protoLineItem.publisherLineItemId,adType:this.CI.settings.adManagerLineItem.protoLineItem.adType,duration:this.CI.getAdDuration(),adSkipMode:this.CI.settings.adManagerLineItem.protoLineItem.skipMode,moatTrackingEnabled:this.CI.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled}}destroy(){this.ns=!1,this.MI.onAdRemoved(),this.LI.unsubscribe(),this.LI=null}EI(){this.LI=this.CI.onVpaidEvent.subscribe((t=>{t.type===k.fI.AdImpression&&this.OI(),this.Pu.next(t)}))}OI(){this.ns=!0;const{viewability:t}=this.dI.getContainerStateMap().get(this.CI.settings.adManagerLineItem.protoLineItem.adType);this.MI.checkPauseAd(this.CI,t)}BI(t,i,e){const s=this.CI.getAdVolume();let n=null;0===s&&t>0?n=this.CI.settings.trackers.adUnmute:s>0&&0===t&&(n=this.CI.settings.trackers.adMute);const r=this.CI.settings.adManagerLineItem.protoLineItem;n&&jt.track(n,e,r,i)}}class jr{constructor(t){this.Gt=t,this.RI=!1,this.Pu=new rt.x,this.DI=new rt.x,this.Mu=new rt.x,this.FI=new rt.x,this.wu=[],this.Kr=t=>{sn.getInstance().addPlatformCappedLineItemIdList(t,this.QP)},this.io=t=>{this.DI.next(t)},this.$I=(t,i,e)=>{const s=t.find((t=>t.protoLineItem.advertiserLineItemId===i));s&&(s.protoLineItem.viewability=e)},this.o_=()=>{var t;null===(t=this.VI)||void 0===t||t.resizeAd(),this.NI()};const i=this.Gt.adContainerMap.get(this.UI());this.HI=(0,it.LT)(i),this.Gt.app.services.TrackingService.startBidTrackingInterval(),this.qI=this.Gt.lineItemList.map((t=>new mr(t))),this.zI(),this.WI(),this.GI(),this.JI()}get onVpaidEvent(){return this.Pu.asObservable()}get onImpressionRevenueEvent(){return this.DI.asObservable()}get onNoFill(){return this.FI.asObservable()}setAdVolume(t){var i;this.YI.partialStateUpdate({sound:t});const e={adManagerState:this.YI.getCurrentAdManagerState(!0),adMacroReplacer:this.Wv};null===(i=this.VI)||void 0===i||i.setAdVolume(t,e)}setAdViewMode(t){var i;this.YI.partialStateUpdate({vastViewMode:t}),null===(i=this.VI)||void 0===i||i.setVastViewMode(t)}getCurrentAdMetadata(){var t;return null===(t=this.VI)||void 0===t?void 0:t.getMetadata()}getCurrentAdMediaSize(){var t;return null===(t=this.VI)||void 0===t?void 0:t.getMediaSize()}pauseAd(t){var i;null===(i=this.VI)||void 0===i||i.pauseAd(t)}resumeAd(t){var i;null===(i=this.VI)||void 0===i||i.resumeAd(t)}skipAd(){var t;null===(t=this.VI)||void 0===t||t.skipAd()}stopAd(t){var i;null===(i=this.VI)||void 0===i||i.stopAd(t)}setPlayerOrientation(t){this.YI.partialStateUpdate({playerOrientation:t}),this.NI()}enableImpressions(t){this.YI.enableImpression(t),this.dI.forceTriggerUpdateState(),this.XI.allowResetOnTime=!0,this.ZI(t),this.KI()}disableImpressions(){this.YI.impressionsAllowed&&(this.tk.stop(),this.ik.stop(),this.YI.disableImpression(),this.VI&&!this.VI.inImpression&&this.Gt.app.config.isInApp&&this.VI.stopAd("inApp_disable"))}enablePredict(t,i){switch(this.YI.enablePredict(t,i),i){case Tt.StartSessionPrefetch:this.XI.allowResetOnTime=!1;break;case Tt.MidSessionPrefetch:this.XI.allowResetOnTime=!0}this.KI();const e=this.YI.getCallSettings();this.ek.startPrefetch(e)}isLoadingAds(){return!!this.VI||!!this.sk.isLoadingBids()}getMainContainerState(){return this.dI.getMainContainerState()}getMainContainer(){return this.dI.getMainContainer()}destroy(){var t;this.disableImpressions(),(0,Pt.i)(this.wu),this.ik.destroy(),this.sk.destroy(),this.tk.destroy(),this.nk.destroy(),this.rk(),null===(t=this.VI)||void 0===t||t.stopAd("adManagerDestroy"),this.hk()}zI(){const t=ji.getGlobalContainer().resolve(se);this.nk=new un(t),this.YP=new an,this.XI=new ln,this.ak=new dn,this.XP=(new Tr).registerCallingValidators([this.XI,this.YP,this.ak]),this.Jv=new Rt,this.Wv=new An(this.Gt.app.services.MacrosService,this.Gt.app.services.UserManagerService)}WI(){this.ck=new Er,this.QP=new Lr,this.dI=new pn(this.UI(),this.Gt.adContainerMap,this.Gt.app.services.ResizeObserver,this.Gt.app.services.ViewabilityService),this.Yv=new br({globalDomUtilsService:this.Gt.app.services.GlobalDomUtilsService,recycleAdSlots:!0}),this.YI=new Rr(this.dI);const t=new kr(this.Gt.lineItemList,this.Gt.app.config.explorationMode),i=new lr(t,this.Gt.skipPlayerSettings,this.ck,this.QP,this.YP,this.XP),e=new ur(t);this.lk=new dr(t);const s=ji.getGlobalContainer().resolve(se);this.ek=new fr(s,{lineItems:this.qI,adCallingPool:this.ck,adBidPool:this.QP,impressionCapsService:this.YP,requestCapsService:this.XI,yoScoreManager:t,adCallerYo:i,adWinnerYo:e});const n=new Cr(this.Gt.app.services.TrackingService,this.QP);this.ik=new nn({lineItemList:this.qI,adCallingPool:this.ck,adBidPool:this.QP,auctionInfoLogging:n,adCallerYo:i,adContainerMap:this.Gt.adContainerMap,amazonSlotId:this.Gt.amazonTamSlotId,app:this.Gt.app,isOutstream:this.Gt.outstream,schainSettings:this.Gt.pbjsSchainSettings,skipAdSettings:this.Gt.skipPlayerSettings,trackingService:this.Gt.app.services.TrackingService,adMacroReplacer:this.Wv,lineItemServices:{impressionCapsService:this.YP,lineItemServicesTimer:this.nk,requestCapsService:this.XI},adRequestGatekeeper:this.Jv,adEnforcer:new xn(this.Gt.app.config.isMobile,this.HI,this.Gt.disableScrollHijackEnforcement),pauseAdWhenFinished:this.Gt.pauseAdWhenFinished,loopAdWhenFinished:this.Gt.loopAdWhenFinished,os:this.Gt.app.config.os.os,adSlotContainerRecycler:this.Yv,callingValidationAggregator:this.XP,auctionManager:this.ek}),this.sk=new rr({adBidPool:this.QP,adWinnerYo:e,auctionInfoLogging:n,desiredBitRateForWins:V.DEFAULT_DESIRED_BITRATE,maxNumberOfWins:V.MAX_WINS_DEFAULT,trackingService:this.Gt.app.services.TrackingService,impressionCapsService:this.YP,impressionCapsTimer:this.nk,adMacroReplacer:this.Wv,playerId:this.Gt.app.config.playerId,auctionManager:this.ek}),this.tk=new Pn({adContainer:this.dI,adBidPool:this.QP,adImpressionerYo:this.lk,auctionInfoLogging:n,impressionCapsService:this.YP,impressionCapsTimer:this.nk,requestCapsService:this.XI,removeBidIfHigherYoScore:V.REMOVE_BIDS_DEFAULT,trackingService:this.Gt.app.services.TrackingService,adRequestGatekeeper:this.Jv,pauseAdWhenFinished:this.Gt.pauseAdWhenFinished,loopAdWhenFinished:this.Gt.loopAdWhenFinished,adMacroReplacer:this.Wv,explorationMode:this.Gt.app.config.explorationMode,playerId:this.Gt.app.config.playerId,skipAdSettings:this.Gt.skipPlayerSettings})}GI(){this.wu.push(this.Gt.app.services.TrackingService.onLineItemPlatformCapped.subscribe((t=>{this.Kr(t)})),this.Gt.app.services.TrackingService.onImpressionRevenue.subscribe((t=>{this.io(t)})),this.Gt.app.services.TrackingService.onLineItemViewabilityChange.subscribe((([t,i])=>{this.$I(this.qI,t,i)})))}JI(){this.wu.push(this.ek.onAuctionEnd.subscribe((()=>{this.LS()})),this.ek.onAuctionStopCalling.subscribe((()=>{this.dk()})),this.dI.onContainerStateUpdate.subscribe((()=>{this.o_()})),this.tk.onAdSelected.subscribe((t=>{this.eP(t)})),this.tk.onAdFinished.subscribe((t=>{this.sP()})),this.tk.onMissedImpression.subscribe((t=>{this.Mu.next(t)})))}get onMissedImpression(){return this.Mu.asObservable()}LS(){this.YI.auctionEnd(),this.uk()}dk(){this.YI.predictMode&&this.ik.stop(),this.YI.auctionStopCalling()}eP(t){const{currentAdPlayerState:i,predictedAdPlayerState:e}=this.YI,s=(i||e).vastViewMode;this.VI=new $r(t,this.dI,s),this.pk(),this.VI.setAdVolume(this.YI.currentAdPlayerState.sound),this.fk(t)}fk(t){var i;this.Pu.next({type:k.fI.AdLoaded,payload:null===(i=t.settings.adLoadedPayload)||void 0===i?void 0:i.payload})}sP(){this.hk()}NI(){this.YI.adFetchingAllowed&&this.KI(),this.YI.impressionsAllowed&&this.uk()}KI(){this.RI||(this.RI=!0,this.Gt.app.services.UserManagerService.ccpaInfoLogging(this.Gt.app.config.playerId));const t=this.YI.getCallSettings();this.ik.call(t);const i=this.YI.getWinSettings();this.sk.win(i)}uk(){(this.YI.currentAdPlayerState||this.YI.predictedAdPlayerState)&&this.YI.currentAdPlayerState&&this.tk.start(this.YI.getCurrentAdManagerState())}pk(){this.gk=this.VI.onVpaidEvent.subscribe((t=>{t.type===k.fI.AdImpression&&this.VI.setAdVolume(this.YI.currentAdPlayerState.sound),this.Pu.next(t)}))}hk(){var t;null===(t=this.VI)||void 0===t||t.destroy(),this.VI=null,this.rk()}rk(){var t;null===(t=this.gk)||void 0===t||t.unsubscribe(),this.gk=null}ZI(t){const i=[this.YP,this.XI];t.newContent&&i.forEach((t=>{t.resetCapsBasedOnExternalEvent(r.ProtoResetCapTypeEnum.ContentCapping)}))}}class Vr extends jr{constructor(t){super(t),this.LS=()=>{this.mk()||this.FI.next(),super.LS()};const i=this.dI.getMainContainer();this.Yv.preloadImaSdkSlots(i),this.QP.getBidPoolBidEvents(Mt.ON_BID_READY_CONSUMED).subscribe((()=>{this.mk()||this.FI.next()}))}enableImpressions(t){super.enableImpressions(t);const i=this.YI.getCallSettings();this.ek.startAuction(i,t.linearAdOpportunity.id)}disableImpressions(){this.YI.impressionsAllowed&&(this.ek.cancelAuction(),super.disableImpressions())}KI(){const t=this.YI.getCallSettings();this.ek.updateState(t),super.KI()}UI(){return r.ProtoAdType.Video}mk(){if(!(0,l.BZ)(this.QP.getAllBids()))return!1;return!!this.lk.getBestBid(this.QP.getAllBids(),this.YI.getCurrentAdManagerState()||this.YI.getPredictedAdManagerState(),this.YP)}}class Nr extends jr{UI(){return r.ProtoAdType.Nonlinear}enableImpressions(t){super.enableImpressions(t),this.LS()}}const Ur={[r.ProtoAdSlotsEnum.PreRoll]:r.ProtoAdBreakTypeEnum.PreRoll,[r.ProtoAdSlotsEnum.MidRoll]:r.ProtoAdBreakTypeEnum.MidRoll,[r.ProtoAdSlotsEnum.PostRoll]:r.ProtoAdBreakTypeEnum.PostRoll};var Hr,qr;!function(t){t.remainTimeForAdPod=(t,i)=>!(i<=0)&&!(Math.round(i/I.s_)>t.remainingAdDuration)}(Hr||(Hr={})),function(t){t.adLoadedPayload=t=>({payload:{adType:t.payload.adType,adSkipMode:t.payload.adSkipMode,adLoadedData:{skipOffset:t.payload.adLoadedData.skipOffset}}}),t.impressionPayload=(t,i)=>{const{adId:e,adVideoUrl:s,creativeId:n,name:r,length:o,imaMetadata:h,moatTrackingEnabled:a}=t.payload.adSourceData,{adType:c,adSkipMode:l,clickThroughUrl:d,customAdData:u,adSourceData:p}=t.payload;return{payload:{adType:c,adSkipMode:l,adSourceData:{moatTrackingEnabled:a,adId:e,length:o,imaMetadata:h,adVideoUrl:s,creativeId:n,name:r},clickThroughUrl:d,customAdData:{ADVERTISER:null==u?void 0:u.ADVERTISER,CAMPAIGN_ID:null==u?void 0:u.CAMPAIGN_ID,CREATIVE_ID:u.CREATIVE_ID},adDuration:p.length,selectedAdSlot:i}}},t.defaultPayload=t=>({payload:{adType:t.payload.adType}})}(qr||(qr={}));class zr{constructor(t,i){this.yk=t,this.vk=i,this.bk=new rt.x,this.wu=[],this.xk=!1;const e=ji.getGlobalContainer().resolve(se);this.ny=new Ee(e),this.wk(),this.vv(),this._k()}get onAdLifeEnding(){return this.bk.asObservable()}isDurationExpired(){return this.xk}destroy(){this.ny.disable(),this.wu.forEach((t=>t.unsubscribe()))}wk(){this.wu.push(this.ny.onTimeElapsed.subscribe((()=>{this.ny.stop(),this.xk=!0,this.bk.next()})))}vv(){this.wu.push(this.yk.subscribe((t=>{switch(t.type){case k.fI.AdImpression:this.Pk(t.payload.adSourceData.length);break;case k.fI.AdPlaying:this._k();break;case k.fI.AdPaused:this._s();break;case k.fI.AdStopped:case k.fI.AdSkipped:case k.fI.AdError:this.Sk();break;case k.fI.AdVideoFirstQuartile:this.Ak()}})))}_s(){this.ny.stop()}_k(){this.ny.start()}Pk(t){if(this.Ik=Date.now(),t){this.kk=t*I.s_;const i=this.kk-this.vk;this.Ck(i),this.ny.start()}}Sk(){this.ny.stop(),this.xk=!1}Ak(){if(this.kk)return;const t=Date.now()-this.Ik;this.kk=4*t;const i=this.kk-t-this.vk;this.Ck(i)}Ck(t){const i=t<0?0:t;this.ny.reset(i)}}class Wr{constructor(t,i){this.Ey=t,this.Tk=new rt.x,this.Mk=Tt.NoPrefetch,this.Ek=i===r.ProtoAdPlaybackMode.ScrollToPlay}get prefetchType(){return this.Mk}get startSessionPrefetch(){return this.Ek}set startSessionPrefetch(t){this.Ek=t}get onMidSessionPrefetchReady(){return this.Tk.asObservable()}enablePrefetch(t,i,e){this.Ek=!1,this.Mk=t,null==e||e.enablePredict(i,t)}disablePrefetch(){this.Mk=Tt.NoPrefetch}tryPreparingMidSessionPrefetch(t,i){if(!this.Bk(t))return;const e=null==t?void 0:t.disableReason;e===Ct.TimeoutBetweenAds&&this.Tk.next(Tt.MidSessionPrefetch),e===Ct.InImpression&&this.Lk(t,i)&&this.Tk.next(Tt.MidSessionPrefetch)}Bk(t){return this.Mk===Tt.NoPrefetch&&null!==t}Lk(t,i){return i&&t.adBreakLength<=V.MID_SESSION_PREFETCH_MINIMUM_TIME&&!this.Ey}}class Gr{constructor(t,i){this.Gt={[lt.LINEAR]:{enable:!1,disablePayload:null,usePrefetch:!0},[lt.NONLINEAR]:{enable:!1,disablePayload:null,usePrefetch:!1}},this.Tk=new rt.x,this.wu=[],this.Rk(t,i)}get onMidSessionPrefetchReady(){return this.Tk.asObservable()}getAllLinearityKeys(){return Object.keys(this.Gt)}enable(t){this.Gt[t].enable=!0,this.Gt[t].disablePayload=null}disable(t,i){this.Gt[t].enable=!1,this.Gt[t].disablePayload=i}getDisablePayload(t){return this.Gt[t].disablePayload}setAdManager(t,i){this.Gt[t].adManager=i,this.Gt[t].usePrefetch&&(this.Gt[t].adLifecycleObserver=new zr(i.onVpaidEvent,V.MID_SESSION_PREFETCH_MINIMUM_TIME),this.wu.push(this.Gt[t].adLifecycleObserver.onAdLifeEnding.subscribe((()=>{const i=this.getDisablePayload(t),e=this.Gt[t].adLifecycleObserver.isDurationExpired();this.Gt[t].adPrefetch.tryPreparingMidSessionPrefetch(i,e)}))))}isAdManagerEnable(t){return this.Gt[t].enable}getAllAdManagers(){return this.getAllLinearityKeys().map((t=>this.Gt[t].adManager))}getAllAvailableAdManagers(){return this.getAllAdManagers().filter((t=>(0,H.$K)(t)))}getAdManagerByLinearity(t){return this.Gt[t].adManager}usePrefetch(t){return this.Gt[t].usePrefetch}enablePrefetch(t,i,e,s){this.usePrefetch(t)&&this.Gt[t].adPrefetch.enablePrefetch(i,e,s)}startSessionPrefetch(t,i){this.Gt[t].adPrefetch.startSessionPrefetch=i}disablePrefetch(t){this.usePrefetch(t)&&this.Gt[t].adPrefetch.disablePrefetch()}getPrefetchType(t){if(this.usePrefetch(t))return this.Gt[t].adPrefetch.prefetchType}hasStartSessionPrefetch(t){return!!this.usePrefetch(t)&&this.Gt[t].adPrefetch.startSessionPrefetch}tryPreparingMidSessionPrefetch(t,i){var e;if(!this.usePrefetch(t))return;const s=(null===(e=this.Gt[t].adLifecycleObserver)||void 0===e?void 0:e.isDurationExpired())||!1;this.Gt[t].adPrefetch.tryPreparingMidSessionPrefetch(i,s)}destroy(){(0,Pt.i)(this.wu),this.getAllAvailableAdManagers().forEach((t=>t.destroy()))}Rk(t,i){this.getAllLinearityKeys().forEach((e=>{this.Gt[e].usePrefetch&&(this.Gt[e].adPrefetch=new Wr(t,i),this.Dk(e))}))}Dk(t){const i=this.Gt[t].adPrefetch;this.wu.push(i.onMidSessionPrefetchReady.subscribe((i=>{this.Tk.next({prefetchType:i,linearity:lt[t]})})))}}class Jr{constructor(t,i,e){this.Oe=t,this.bu=i,this.yu=e,this.wu=[],this._u=new rt.x,this.$k=new rt.x,this.jk=new rt.x,this.Cu=new rt.x,this.Vk=new rt.x,this.ku=new rt.x,this.Lu=new rt.x,this.Tu=new rt.x,this.Mu=new rt.x,this.Gv=new Map,this.Nk=!0,this.Uk={[lt.LINEAR]:t=>{const i=new Vr(t);this.Gt.setAdManager(lt.LINEAR,i)},[lt.NONLINEAR]:t=>{const i=new Nr(t);this.Gt.setAdManager(lt.NONLINEAR,i)}},this.Hk={mediaMetadata:{},clickToPlay:!1,linearAdOpportunity:new Bt,newContent:!1,sound:0,vastViewMode:k.zc.Normal,adBreakState:this.yu.getAdBreakState(),playerOrientation:this.bu},this.Gt=new Gr(this.Oe.loopAdWhenFinished,this.Oe.adPlaybackMode),this.Nk=this.Oe.canPrefetch}get onMissedImpression(){return this.Mu.asObservable()}get onLinearNoFill(){return this.Tu.asObservable()}get onAdsEnable(){return this._u.asObservable()}get onLinearVpaidEvent(){return this.$k.asObservable()}get onNonlinearVpaidEvent(){return this.jk.asObservable()}get onLinearImpressionRevenue(){return this.Cu.asObservable()}get onNonlinearImpressionRevenue(){return this.Vk.asObservable()}get onLinearImpressionPrice(){return this.ku.asObservable()}get onNonlinearImpressionPrice(){return this.Lu.asObservable()}getCurrentAdBreakType(){return this.Hk.adBreakState.adBreakType}initAd(t,i,e,s,n,r,o){this.qk(r),this.Ju(o),this.Gt.getAllLinearityKeys().forEach((t=>{this.zk(lt[t],{sound:n})}))}getAdContainerSize(t){const i=this.Gv.get(t);return{height:(null==i?void 0:i.clientHeight)||0,width:(null==i?void 0:i.clientWidth)||0}}getMainAdContainerWidth(t){var i;return null===(i=this.Gt.getAdManagerByLinearity(t))||void 0===i?void 0:i.getMainContainerState().width}getCurrentAdMetadata(t){var i;return null===(i=this.Gt.getAdManagerByLinearity(t))||void 0===i?void 0:i.getCurrentAdMetadata()}getCurrentAdMediaSize(t){var i;return null===(i=this.Gt.getAdManagerByLinearity(t))||void 0===i?void 0:i.getCurrentAdMediaSize()}isAdInWin(t){const i=this.Gt.getAdManagerByLinearity(t);return(null==i?void 0:i.isLoadingAds())||!1}enableAds(t){this.Gt.enable(t),this.zk(t),this._u.next(t)}disableAds(t,i){this.Gt.disable(t,i);const e=this.Gt.getAdManagerByLinearity(t);e&&(e.disableImpressions(),this.Gt.usePrefetch(t)&&this.Gt.tryPreparingMidSessionPrefetch(t,i))}setAdVolume(t,i){var e;null===(e=this.Gt.getAdManagerByLinearity(t))||void 0===e||e.setAdVolume(i),this.zk(t,{sound:i})}pauseAd(t,i){var e;null===(e=this.Gt.getAdManagerByLinearity(t))||void 0===e||e.pauseAd(i)}resumeAd(t,i){var e;null===(e=this.Gt.getAdManagerByLinearity(t))||void 0===e||e.resumeAd(i)}skipAd(t){var i;null===(i=this.Gt.getAdManagerByLinearity(t))||void 0===i||i.skipAd()}stopAd(t,i){var e;null===(e=this.Gt.getAdManagerByLinearity(t))||void 0===e||e.stopAd(i)}onAdStateChange(t,i,e){const s=Ur[i];this.Wk(t,e,s),s===r.ProtoAdBreakTypeEnum.PreRoll&&(this.Nk=!0)}onContentChange(){this.Gt.getAllLinearityKeys().forEach((t=>{this.zk(lt[t],{newContent:!0})}))}setMediaRestrictions(t){const i=Object.assign(this.Hk.mediaMetadata,t);this.Gt.getAllLinearityKeys().forEach((t=>{const e=lt[t];if(this.zk(e,{mediaMetadata:i}),this.Gt.usePrefetch(e)&&this.Gt.hasStartSessionPrefetch(e)){const t=this.Gt.getAdManagerByLinearity(e);this.Gk(e,Tt.StartSessionPrefetch,t)}}))}userInteraction(t){this.Gt.getAllLinearityKeys().forEach((t=>{this.zk(lt[t],{clickToPlay:!0})}))}setPlayerOrientation(t){this.Hk.playerOrientation=t,this.Gt.getAllAvailableAdManagers().forEach((i=>i.setPlayerOrientation(t)))}setVastViewMode(t){this.Jk({vastViewMode:t})}newLinearAdOpportunity(){const t=lt.LINEAR;this.Gt.usePrefetch(t)&&(this.Gt.getPrefetchType(t)===Tt.NoPrefetch&&(this.Hk.linearAdOpportunity=new Bt),this.zk(t,{linearAdOpportunity:this.Hk.linearAdOpportunity}),this.Gt.disablePrefetch(t))}updateLinearPodRemainingTime(t){const i=this.Hk.adBreakState;Hr.remainTimeForAdPod(i,t)&&this.Wk(lt.LINEAR,t,i.adBreakType)}destroy(){try{(0,Pt.i)(this.wu),this.Gt.destroy()}catch(t){(0,s.n)({message:"AdManagerBridge_destroy",level:s.D.WARN,exception:t.message,callStack:t.stack})}}qk(t){t.forEach((t=>{this.Gv.set(t.type,t.container)}))}Wk(t,i,e){this.zk(t,{adBreakState:this.yu.getAdBreakState({adSlotDuration:i,adBreakType:e})})}zk(t,i){this.Jk(i);const e=this.Gt.getAdManagerByLinearity(t);if(e&&this.Gt.isAdManagerEnable(t)){if(this.Gt.usePrefetch(t)){const i=!1;this.Gt.startSessionPrefetch(t,i)}e.enableImpressions(this.Hk),this.Qk()}}Jk(t){Object.assign(this.Hk,t),this.Hk.adBreakState=this.yu.getAdBreakState({adSlotDuration:this.Hk.adBreakState.remainingAdDuration,adBreakType:this.Hk.adBreakState.adBreakType})}Qk(){this.Jk({clickToPlay:!1,newContent:!1})}Gk(t,i,e){this.Nk&&(this.Hk.linearAdOpportunity=new Bt,this.Gt.enablePrefetch(t,i,this.Hk,e))}Ju(t){const i=ft(this.Oe.adSourceSettings.lineItems,lt.NONLINEAR),e=ft(this.Oe.adSourceSettings.lineItems,lt.LINEAR);(0,l.BZ)(i)&&this.Xk(lt.NONLINEAR,i,t),(0,l.BZ)(e)&&this.Xk(lt.LINEAR,e,t),this.Zk(),this.tC(),this.iC()}iC(){const t=this.Gt.getAdManagerByLinearity(lt.LINEAR);this.wu.push(null==t?void 0:t.onMissedImpression.subscribe((t=>{this.Mu.next(t)})))}Xk(t,i,e){const s={lineItemList:i,adBreakHelper:this.yu,adContainerMap:this.Gv,amazonTamSlotId:this.Oe.amazonTamSlotId,outstream:this.Oe.outstreamPlayer,pbjsSchainSettings:this.Oe.prebidJsSupplyChain,skipPlayerSettings:this.Oe.skipPlayerSettings,disableScrollHijackEnforcement:!this.Oe.adSourceSettings.disableScrollHijackEnforcement,pauseAdWhenFinished:this.Oe.pauseAdWhenFinished,loopAdWhenFinished:this.Oe.loopAdWhenFinished,app:e};(0,this.Uk[t])(s),this.wu.push(this.Gt.onMidSessionPrefetchReady.subscribe((i=>{const{linearity:e,prefetchType:s}=i,n=this.Gt.getAdManagerByLinearity(e);this.Gk(t,s,n)})))}Zk(){const t={[lt.LINEAR]:this.$k,[lt.NONLINEAR]:this.jk};Object.keys(t).forEach((i=>{const e=lt[i];this.eC(e,t[e])}))}eC(t,i){const e=this.Gt.getAdManagerByLinearity(t);e&&this.wu.push(e.onVpaidEvent.subscribe((e=>{var s,n;switch(e.type){case k.fI.AdLoaded:i.next({type:k.fI.AdLoaded,payload:qr.adLoadedPayload(e)});break;case k.fI.AdImpression:{const r=null===(n=null===(s=this.Gt.getAdManagerByLinearity(t))||void 0===s?void 0:s.getCurrentAdMetadata())||void 0===n?void 0:n.adType,o=this.Gv.get(r);i.next({type:k.fI.AdImpression,payload:qr.impressionPayload(e,o)});break}case k.fI.AdVideoStart:case k.fI.AdError:i.next(e);break;default:i.next({type:e.type,payload:qr.defaultPayload(e)})}})))}tC(){const t=this.Gt.getAdManagerByLinearity(lt.LINEAR),i=this.Gt.getAdManagerByLinearity(lt.NONLINEAR);t&&this.wu.push(t.onImpressionRevenueEvent.subscribe((t=>{this.Cu.next(t),this.ku.next(t.impressionRevenue)})),t.onNoFill.subscribe((()=>{this.Tu.next()}))),i&&this.wu.push(i.onImpressionRevenueEvent.subscribe((t=>{this.Vk.next(t),this.Lu.next(t.impressionRevenue)})))}}const Qr="cnx-in-ps-portrait",Yr="cnx-in-ps-landscape",Xr="cnx-playspace-container",Zr="cnx-playspace-content",Kr="cnx-playspace-footer",to="cnx-playspace-slider",io="cnx-playspace-slide-container",eo="cnx-ui-ps-image-wrapper",so="cnx-ui-ps-image-background",no="cnx-is-media-logo",ro="cnx-ad-video-size-slot",oo="cnx-top-title",ho="cnx-top-title-logo-container",ao="cnx-top-title-logo",co="cnx-top-title-logo-portrait",lo="cnx-top-title-logo-landscape",uo="cnx-top-title-logo-animation",po="cnx-top-title-text-container",fo="cnx-top-title-story-text",go="cnx-top-title-slide-text",mo="cnx-top-title-highlight-text-placeholder",yo="cnx-top-title-highlight-text",vo="cnx-top-title-highlight-text-outer-container",bo="cnx-top-title-highlight-text-inner-container",xo="cnx-top-title-slide-in",wo="cnx-top-title-slide-out",_o="cnx-top-title-slide-down",Po="cnx-top-title-slide-initial";var So;!function(t){t[t.PlayButton=0]="PlayButton",t[t.BigPlayButton=1]="BigPlayButton",t[t.VolumeButton=2]="VolumeButton",t[t.VolumeProgress=3]="VolumeProgress",t[t.VolumeControls=4]="VolumeControls",t[t.ExpandButton=5]="ExpandButton",t[t.SettingsButton=6]="SettingsButton",t[t.CaptionButton=7]="CaptionButton",t[t.CaptionComponent=8]="CaptionComponent",t[t.CastButton=9]="CastButton",t[t.ShareButton=10]="ShareButton",t[t.UpNextButton=11]="UpNextButton",t[t.UpNextBox=12]="UpNextBox",t[t.PreviousButton=13]="PreviousButton",t[t.LogoComponent=14]="LogoComponent",t[t.LogoOutstream=15]="LogoOutstream",t[t.MoreButton=16]="MoreButton",t[t.ElapsedTimeLabel=17]="ElapsedTimeLabel",t[t.TotalDurationLabel=18]="TotalDurationLabel",t[t.RemainingDurationLabel=19]="RemainingDurationLabel",t[t.ProgressBar=20]="ProgressBar",t[t.QualityMenu=21]="QualityMenu",t[t.QueStateOverlay=22]="QueStateOverlay",t[t.Loader=23]="Loader",t[t.ContextMenu=24]="ContextMenu",t[t.ElementsSettingsMenu=25]="ElementsSettingsMenu",t[t.CloseButton=26]="CloseButton",t[t.SkipAdButton=27]="SkipAdButton",t[t.AdLoadingScreen=28]="AdLoadingScreen",t[t.CtaButton=29]="CtaButton",t[t.PlayspaceProgressBar=30]="PlayspaceProgressBar",t[t.PlayspaceSettingsMenu=31]="PlayspaceSettingsMenu",t[t.ClickToPlayButton=32]="ClickToPlayButton",t[t.OverlayComponent=33]="OverlayComponent",t[t.SlideTitle=34]="SlideTitle",t[t.SkipAd=35]="SkipAd",t[t.TopTitle=36]="TopTitle",t[t.TopLogo=37]="TopLogo",t[t.TopSlideTitle=38]="TopSlideTitle",t[t.TopStoryTitle=39]="TopStoryTitle",t[t.TextLabel=40]="TextLabel",t[t.LivePoster=41]="LivePoster",t[t.LiveIcon=42]="LiveIcon",t[t.ElementsCaptionMenu=43]="ElementsCaptionMenu"}(So||(So={}));var Ao,Io,ko=h(5874);function Co(t,i,e,s){t.style.top=`${function(t,i,e,s,n){let r=i-s.clientY;const o=s.clientY+s.height-i;n.alignTop&&r>t.offsetHeight?r-=t.offsetHeight:!n.alignTop&&o<t.offsetHeight?r-=t.offsetHeight-o:(r+=e,r+t.offsetHeight>s.height&&(r=s.height-t.offsetHeight));return r}(t,i.clientY,i.height,e,s)}px`,t.style.left=`${function(t,i,e,s){const n=s.distanceFromMargin?s.distanceFromMargin:0;let r=Math.ceil(i)-Math.ceil(e.clientX),o=i,h=o+t.offsetWidth;const a=e.clientX+e.width;if(s.alignMiddle){const i=t.offsetWidth/2;r-=Math.ceil(i),o-=i,h-=i}if(s.alignMiddle||s.forceRight)return e.clientX>o?r=0+n:a<h&&(r-=Math.ceil(h)-Math.ceil(a)+n),r;h>a&&(r-=t.offsetWidth);return r}(t,i.clientX,e,s)}px`}!function(t){t[t.Top=1]="Top",t[t.Bottom=2]="Bottom",t[t.Right=4]="Right",t[t.Left=8]="Left",t[t.Middle=16]="Middle"}(Ao||(Ao={}));class To extends a._{constructor(t,i,e,s,n){super(),this.mediator=t,this._r=i,this.sC=e,this.Yt=n,this.nC=i.createElementByString(s)}getContainer(){return this.nC}getCoordinates(t){const i=this._r.getElementCoordinates(this.nC);return this.Yt&&t?((t&Ao.Top)===Ao.Top&&(i.clientY-=this.nC.clientHeight),(t&Ao.Right)===Ao.Right&&(i.clientX+=this.nC.clientWidth)):i.clientX+=i.width/2,i}showComponent(t=!1){if(!this.nC||!this.nC.parentElement)return;const i=(0,it.pv)(this.nC.parentElement,"cnx-ui-btn")?this.nC.parentElement:this.nC;t&&(0,it.GF)(i)?(0,it.Ji)(i):(0,it.Ho)(i)}hideComponent(t=!1){if(!this.nC||!this.nC.parentElement)return;const i=(0,it.pv)(this.nC.parentElement,"cnx-ui-btn")?this.nC.parentElement:this.nC;t&&!(0,it.GF)(i)?(0,it.U6)(i,(()=>(0,it.MV)(i))):(0,it.MV)(i)}destroy(){this.nC.innerHTML="",this.nC.style.display="none",this.sC.unregisterAll(this)}}class Mo extends To{constructor(){super(...arguments),this.eventList=[ko.Z[ko.Z.Scroll],ko.Z[ko.Z.Click]],this.rC=t=>{this.onInteractionHandler(t)},this.onBeforeClick=t=>{t.stopPropagation()},this.onClick=t=>{this.onInteractionHandler(t),this.onClickHandler(t)}}onInteractionHandler(t){t.stopPropagation()}onClickHandler(t){}initComponent(){const t={interactionstart:this.onBeforeClick,interaction:this.rC,click:this.onClick};this.sC.register(this.nC,this,this.sC,t),this.Yt&&(this.subscribe(ko.Z[ko.Z.Click],this.sC,(()=>{this.onClickHandler()})),this.relay(ko.Z[ko.Z.Scroll],this.sC,this,this.mediator))}destroy(){this.unsubscribeAll(this.sC),super.destroy()}}class Eo extends Mo{constructor(){super(...arguments),this.onClick=t=>{this.onInteractionHandler(t),this.onClickHandler(),this.addBoomEffect()}}addBoomEffect(){(0,it.cn)(this.nC,"cnx-boom"),(0,it.Tp)(this.nC),(0,it.cn)(this.nC,"cnx-boom-anim");const t=i=>{"transform"===i.propertyName&&((0,it.IV)(this.nC,"cnx-boom"),(0,it.IV)(this.nC,"cnx-boom-anim"),this.nC.removeEventListener("transitionend",t))};this.nC.addEventListener("transitionend",t)}initComponent(){super.initComponent(),this.nC.appendChild(this._r.createElementByString('<cnx class="cnx-boom-elem"></cnx>'))}}class Bo extends Eo{constructor(){super(...arguments),this.eventList=[bt[bt.HoverStart],bt[bt.HoverEnd],...this.eventList],this.onStartHover=()=>{(0,it.cn)(this.nC,d.Gj.HoverStart),(0,it.cn)(this.nC,d.Gj.HoverEnd),this.mediator.publish(this,bt[bt.HoverStart])},this.onEndHover=()=>{(0,it.IV)(this.nC,d.Gj.HoverEnd),this.mediator.publish(this,bt[bt.HoverEnd])}}initComponent(){super.initComponent(),this.Yt?(this.nC.addEventListener("touchstart",this.onStartHover,{passive:!0}),this.nC.addEventListener("touchend",this.onEndHover),this.nC.addEventListener("touchcancel",this.onEndHover)):(this.nC.addEventListener("mouseenter",this.onStartHover),this.nC.addEventListener("mouseleave",this.onEndHover))}destroy(){this.Yt?(this.nC.removeEventListener("touchstart",this.onStartHover),this.nC.removeEventListener("touchend",this.onEndHover),this.nC.removeEventListener("touchcancel",this.onEndHover)):(this.nC.removeEventListener("mouseenter",this.onStartHover),this.nC.removeEventListener("mouseleave",this.onEndHover)),super.destroy()}onInteractionHandler(t){this.onEndHoverClick()}onEndHoverClick(){(0,it.IV)(this.nC,d.Gj.HoverEnd),(0,it.IV)(this.nC,d.Gj.HoverStart)}}!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(Io||(Io={}));class Lo extends Bo{constructor(t,i,e,s,n){super(t,i,e,s,n),this.hC=!1,this.eventList=[bt[bt.Play],bt[bt.Pause],bt[bt.Replay],bt[bt.StateChanged],...this.eventList],this.aC="Play",this.cC="Pause",this.setState(Io.Pause)}onClickHandler(){this.tw===Io.Pause?this.mediator.publish(this,bt[bt.Pause]):this.hC?this.mediator.publish(this,bt[bt.Replay]):this.mediator.publish(this,bt[bt.Play])}lC(){}toggleReplay(t){this.hC=t}setState(t){this.tw!==t&&(this.tw=t,this.lC(),this.mediator.publish(this,bt[bt.StateChanged]))}get tooltip(){return this.tw===Io.Play?this.aC:this.cC}}class Oo{constructor(t){this.context=t}onClick(){}canTransitionToState(t){return!0}enterState(){this.initState(),this.context.currentState=this}}class Ro extends Oo{initState(){this.context.$uiContainer.classList.add(d.s_.Playing);const t=this.context.getComponent(So.PlayButton);t&&t.setState(Io.Pause);const i=this.context.getComponent(So.BigPlayButton);i&&i.setState(Io.Pause)}exitState(){this.context.$uiContainer.classList.remove(d.s_.Playing)}}class Do extends Ro{constructor(){super(...arguments),this.dC=100}uC(){if(this.elapsedTimeoutId||!this.context.duration)return;const t=Date.now();this.elapsedTimeoutId=setTimeout((()=>{this.context.elapsedTime+=(Date.now()-t)/1e3;const i=this.context.getComponent(So.ProgressBar);i&&i.setProgress((0,_t.dQ)(0,this.context.duration,0,100,this.context.elapsedTime)),this.elapsedTimeoutId=null,this.uC()}),this.dC)}initState(){super.initState(),this.context.duration&&this.uC()}exitState(){super.exitState(),this.context.duration&&(clearTimeout(this.elapsedTimeoutId),this.elapsedTimeoutId=null)}}class Fo extends Oo{initState(){this.context.$uiContainer.classList.add(d.s_.Paused);const t=this.context.getComponent(So.PlayButton);t&&t.setState(Io.Play);const i=this.context.getComponent(So.BigPlayButton);i&&i.setState(Io.Play)}exitState(){this.context.$uiContainer.classList.remove(d.s_.Paused)}}class $o extends Fo{initState(){super.initState()}exitState(){super.exitState()}}class jo{constructor(t,i){this.pC=t,this._r=i,this.fC=/\[\[([0-9]+)]]/g,this.gC=[],this.mC=[],this.yC=this._r.createElementByString(this.vC(this.pC))}bC(t){return`<cnx class="pl_${t}"></cnx>`}vC(t){return t.replace(this.fC,((t,i)=>(this.gC.push(parseInt(i,10)),this.bC(i))))}xC(t,i){return this.mC.some((i=>i.slotName===t))||this.mC.some((t=>t.component===i))?null:this.yC.getElementsByClassName(`pl_${t}`)[0]}getComponentList(){return this.gC}getRenderedDom(){return this.yC}registerSlot(t,i){const e=this.xC(t,i);if(null!==e){const s=i.getContainer();return e.parentNode.replaceChild(s,e),this.mC.push({component:i,slotName:t}),!0}return!1}initComponents(){this.mC.forEach((t=>t.component.initComponent()))}}class Vo extends a._{constructor(t,i,e){super(),this.globalDomUtilsService=t,this.templateString=i,this.componentFactory=e,this.wC={},this._C=new jo(i,t),this.addComponents()}addComponents(){this._C.getComponentList().forEach((t=>{const i=this.componentFactory.createComponent(t,this);this.registerComponent(t,i)}))}registerComponent(t,i){this._C.registerSlot(t,i),this.wC[t]=i,this.PC(i)}PC(t){t.eventList.forEach((i=>{this.subscribe(i,t,(e=>{i===bt[bt.RebindComponent]&&this.rebindComponentEvents(t),this.handleComponentEvent(i,e,t)}))}))}rebindComponentEvents(t){t&&(this.unsubscribeAll(t),this.PC(t))}getComponent(t){return this.wC[t]}destroy(){Object.keys(this.wC).forEach((t=>{this.wC[t].destroy()}))}}class No extends Vo{constructor(t,i,e,s,n){super(e,s,n),this.mediator=t,this.$container=i,this.$uiContainer=this._C.getRenderedDom(),i.appendChild(this.$uiContainer),this._C.initComponents()}changeState(t){const i=this.SC[t];i!==this.currentState&&this.currentState.canTransitionToState(i)&&(this.currentState.exitState(i),i.enterState())}hide(){(0,it.cn)(this.$uiContainer,d.Gj.DisplayNone)}show(){(0,it.IV)(this.$uiContainer,d.Gj.DisplayNone)}destroy(){super.destroy(),this.$uiContainer.parentNode.removeChild(this.$uiContainer)}}class Uo{constructor(t,i){this.AC=t,this._r=i,this.IC=[],this.kC={top:12,bottom:24,margin:4},this.CC=!1}TC(){this.MC=this._r.getElementCoordinates(this.AC.parentElement)}EC(t,i){t.getElementsByClassName("cnx-tooltip-text")[0].innerHTML=i}BC(t){if(!t||!t.tooltip||this.CC)return;if(this.IC.find((i=>i.component===t)))return;const i=this._r.createElementByString('<cnx class="cnx-tooltip-holder cnx-color-tt-bg"><cnx class="cnx-tooltip-text cnx-color-tt-text">TEST</cnx></cnx>');this.EC(i,t.tooltip),this.TC();const e=t.getCoordinates();let s=!1;const{clientY:n,height:r}=e,{clientY:o,height:h}=this._r.getElementCoordinates(this.AC);n<=o+h/2-r?e.clientY+=this.kC.top:(e.clientY-=this.kC.bottom,s=!0),this.AC.appendChild(i),Co(i,e,this.MC,{alignMiddle:!0,alignTop:s,forceRight:!0,distanceFromMargin:this.kC.margin}),(0,it.Tp)(i),(0,it.cn)(i,d.hQ.OpacityInTransition),this.IC.push({component:t,domElement:i})}LC(t){if(!t.tooltip)return;const i=this.IC.find((i=>i.component===t));if(!i)return;const e=i.domElement;this.AC.removeChild(e),this.IC=this.IC.filter((i=>i.component!==t))}OC(t){if(!t.tooltip)return;const i=this.IC.find((t=>t.component===this.RC));i&&this.EC(i.domElement,t.tooltip)}DC(){this.RC=null,this.IC.forEach((t=>this.LC(t.component)))}setDistanceValues(t){this.kC=Object.assign(Object.assign({},this.kC),t)}hoverStart(t){this.RC=t,this.BC(t)}hoverEnd(t){this.RC=null,this.LC(t)}stateChanged(t){this.RC===t&&this.OC(t)}disableTooltips(){this.CC=!0,this.DC()}enableTooltips(){this.CC=!1,this.BC(this.RC)}}var Ho,qo;!function(t){t[t.expand=0]="expand",t[t.collapse=1]="collapse"}(Ho||(Ho={}));class zo extends Bo{constructor(){super(...arguments),this.eventList=[bt[bt.Expand],bt[bt.Collapse],...this.eventList],this.$C="Full Screen",this.jC="Exit Full Screen"}onClickHandler(){switch(this.tw){case Ho.collapse:this.mediator.publish(this,bt[bt.Expand]);break;case Ho.expand:this.mediator.publish(this,bt[bt.Collapse]);break;default:this.mediator.publish(this,bt[bt.Expand])}}lC(){this.nC&&(this.tw===Ho.expand?this.nC.classList.add(d.Gj.Active):this.nC.classList.remove(d.Gj.Active))}setState(t){this.tw!==t&&(this.tw=t,this.lC())}get tooltip(){return this.tw===Ho.expand?this.jC:this.$C}}class Wo extends No{constructor(t,i,e,s,n){super(t,i,e,s,n),this.VC=new Uo(this.$uiContainer,e)}handleComponentEvent(t,i,e){let s=e;switch(i.payload&&i.payload.targetComponent&&(s=i.payload.targetComponent),t){case bt[bt.HoverStart]:this.VC.hoverStart(s);break;case bt[bt.HoverEnd]:this.VC.hoverEnd(s);break;case bt[bt.StateChanged]:this.VC.stateChanged(s)}}updateDuration(t,i){if(!(0,it.pv)(this.$uiContainer,d.s6.ShowControls))return;const e=this.getComponent(So.ElapsedTimeLabel),s=this.getComponent(So.TotalDurationLabel),n=this.getComponent(So.ProgressBar);if(e&&e.setTime(t),s&&s.setTime(i),n){const e=0,s=i,r=0,o=100;n.setProgress((0,_t.dQ)(e,s,r,o,t))}}updateVolume(t){}expand(){this.getComponent(So.ExpandButton).setState(Ho.expand)}collapse(){this.getComponent(So.ExpandButton).setState(Ho.collapse)}}!function(t){t[t.SimpleMenuItem=0]="SimpleMenuItem",t[t.ToggleMenuItem=1]="ToggleMenuItem",t[t.SubmenuMenuItem=2]="SubmenuMenuItem"}(qo||(qo={}));class Go extends To{constructor(t,i,e,s,n,r,o,h){super(t,i,e,s,h),this.eventName=n,this.NC=r,this.UC=o,this.HC=[],this.eventList=[bt[bt.RebindComponent],ko.Z[ko.Z.HoldStart],ko.Z[ko.Z.HoldEnd],bt[bt.ContextMenuOpen],bt[bt.ContextMenuClose]],this.qC=!1,this.zC=10,this.WC=t=>{this.GC.removeChild(t.target),this.GC.style.width=`${this.nC.clientWidth}px`},this.close=t=>{t&&(0,wt.Of)(t.target,d.s6.ContextController,this.zC)||!1!==this.isOpen&&(this.qC&&(this.mediator.publish(this,ko.Z[ko.Z.HoldEnd]),(0,it.IV)(this.UC,d.Gj.OnHold),this.qC=!1),this.isOpen=!1,this.mediator.publish(this,bt[bt.ContextMenuClose]),(0,it.cn)(this.nC,d.Gj.Invisible),this.sC.removeGlobalActions(this.nC),this.closeAllSubmenuItems())},this.close(),this.cacheCoordinates(),this.eventList.push(this.eventName),this.GC=this.nC.getElementsByClassName(d.Ng.Container)[0],this.JC=this._r.createElementByString(`<cnx class="${d.Ng.Items}"></cnx>`),this.GC.appendChild(this.JC),(0,it.cn)(this.GC,d.s6.ContextController)}addNewItemsEvent(t){const i=t.filter((t=>!(0,l.d3)(t,this.eventList)));i.length>0&&(this.eventList=[...this.eventList,...i],this.mediator.publish(this,bt[bt.RebindComponent],{payload:this.NC}))}cacheCoordinates(){this.MC=this._r.getElementCoordinates(this.UC)}positionContextMenu(t){this.cacheCoordinates(),Co(this.nC,t,this.MC,{alignMiddle:this.alignMiddle,alignTop:this.alignTop,forceRight:this.forceRight})}QC(t){switch(t.type){case qo.SimpleMenuItem:this.close();break;case qo.SubmenuMenuItem:this.YC(t)}}sendEvent(t,i){this.mediator.publish(this,t,i)}YC(t){const i=this.nC.clientWidth;t.isOpen?(t.$menuContainer.addEventListener("transitionend",this.WC),this.JC.style.left="0px",t.$menuContainer.style.left="0px"):(t.$menuContainer.removeEventListener("transitionend",this.WC),this.GC.style.width=2*i+"px",this.GC.appendChild(t.$menuContainer),(0,it.Tp)(this.GC),this.JC.style.left=-i+"px",t.$menuContainer.style.left=-i+"px"),t.isOpen=!t.isOpen}closeAllSubmenuItems(){this.HC.forEach((t=>{t.type===qo.SubmenuMenuItem&&t.isOpen&&this.YC(t)}))}buildContextMenu(t){let i=[];this.JC.innerHTML="",this.GC.style.width=`${this.nC.clientWidth}px`,this.HC.forEach((t=>this.unsubscribeAll(t))),this.HC=t,this.HC.forEach((t=>{i=[...i,...t.eventList],t.eventList.forEach((i=>this.subscribe(i,t,(e=>{this.QC(t),this.sendEvent(i,e)})))),t.initComponent(),this.JC.appendChild(t.getContainer())})),this.addNewItemsEvent(i)}getAnchorCoordinatesTo(t){return null==t?void 0:t.getCoordinates()}open(t,i=!1){i&&(this.qC=i,this.mediator.publish(this,ko.Z[ko.Z.HoldStart]),(0,it.cn)(this.UC,d.Gj.OnHold)),this.isOpen=!0,this.mediator.publish(this,bt[bt.ContextMenuOpen]),this.positionContextMenu(t);const e={interactionend:this.close};this.sC.addGlobalActions(this.nC,e),(0,it.IV)(this.nC,d.Gj.Invisible)}}class Jo extends Mo{constructor(t,i,e,s,n){super(t,i,e,Jo.getTemplate(n),s),this.mediator=t,this.XC=!1,this.type=qo.SimpleMenuItem,this.eventList=[],this.event=n.activeEvent,this.name=n.name,n.eventList?this.eventList=n.eventList:this.eventList.push(this.event),this.ZC=this.nC.getElementsByClassName(d.Ng.ItemTitle)[0],this.KC=this.nC.getElementsByClassName(d.Ng.ItemIcon)[0]}static getTemplate(t){const i=`<cnx class="${d.Ng.ItemIcon}">${t.icon}</cnx>`,e=`<cnx class="${d.Ng.ItemExtra}">${t.label}</cnx>`;return`<cnx class="${d.Ng.ClickOption}">\n                    ${t.icon?i:""}\n                    <cnx class="${d.Ng.ItemTitle}">${t.name}</cnx>\n                    ${t.label?e:""}\n                </cnx>`}onClickHandler(t){this.mediator.publish(this,this.event)}changeItemName(t){this.ZC.innerHTML=t}changeItemIcon(t){this.KC.innerHTML=t}get isActive(){return this.XC}set isActive(t){this.XC=t,this.XC?(0,it.cn)(this.nC,d.Gj.Active,d.iu.AccentColor):(0,it.IV)(this.nC,d.Gj.Active,d.iu.AccentColor)}}var Qo;!function(t){t.MainContainer="cnx-scrollbar",t.Wrapper="cnx-scrollbar-wrapper",t.Content="cnx-scrollbar-content",t.Horizontal="cnx-scrollbar-horizontal",t.Handle="cnx-scrollbar-handle",t.PreventSelect="cnx-scrollbar-prevent-select",t.ShowOnHover="cnx-scrollbar-show-on-hover"}(Qo||(Qo={}));class Yo{constructor(t,i={}){if(this.tT=t,this.Gt=i,this.iT=0,this.eT=t=>{t.preventDefault(),this.sT=t.pageY,this.nT=t.pageX,(0,it.cn)(this.rT,Qo.PreventSelect),(0,it.cn)(this.Ue.document.body,Qo.PreventSelect),this.Ue.document.addEventListener("mousemove",this.oT),this.Ue.document.addEventListener("mouseup",this.hT)},this.oT=t=>{const i=this.Gt.horizontal?t.pageX-this.nT:t.pageY-this.sT;this.sT=t.pageY,this.nT=t.pageX,(0,it.PM)(this.Ue,(()=>{this.Gt.horizontal?this.aT.scrollLeft+=i/this.cT:this.aT.scrollTop+=i/this.cT}))},this.hT=t=>{(0,it.IV)(this.rT,Qo.PreventSelect),(0,it.IV)(this.Ue.document.body,Qo.PreventSelect),this.Ue.document.removeEventListener("mousemove",this.oT),this.Ue.document.removeEventListener("mouseup",this.hT)},this.lT=t=>{if(!this.Gt.horizontal)return;const i=t.deltaMode?100*(t.deltaY<0?-1:1):t.deltaY,e=Math.floor(i)/33*20,s=this.iT+e;s>=-1*this.rT.clientWidth&&s<=this.aT.scrollWidth-this.rT.clientWidth&&(this.iT=s),(0,it.PM)(this.Ue,(()=>this.aT.scrollLeft=this.iT))},this.dT=()=>{clearTimeout(this.uT),this.uT=setTimeout((()=>{this.fT()}),50)},this.fT=()=>{const t=this.Gt.horizontal?this.aT.scrollWidth:this.aT.scrollHeight,i=this.Gt.horizontal?this.tT.clientWidth:this.tT.clientHeight;this.cT=i/t;const e=-1*(this.tT.clientWidth-(this.rT.clientWidth||4)-4),s=this.tT.clientHeight-this.rT.clientHeight-4;(0,it.PM)(this.Ue,(()=>{if(this.cT>=1)(0,it.MV)(this.rT);else{if((0,it.Ho)(this.rT),this.Gt.horizontal)return void(0,it.T7)(this.rT,{width:`${Math.max(100*this.cT,10)}%`,height:"",top:`${s}px`,right:"",left:this.aT.scrollLeft/t*100+"%"});(0,it.T7)(this.rT,{width:"",height:`${Math.max(100*this.cT,10)}%`,top:this.aT.scrollTop/t*100+"%",right:`${e}px`,left:""})}}))},this.Ue=(0,it.LT)(t),!this.Ue)throw new Error("window was not found");this.gT(),this.rT.addEventListener("mousedown",this.eT),this.Gt.overrideNativeHorizontalScroll&&this.aT.addEventListener("wheel",this.lT,{passive:!0}),this.Ue.addEventListener("resize",this.dT),this.aT.addEventListener("scroll",this.fT),this.aT.addEventListener("mouseenter",this.fT),(0,it.cn)(this.tT,Qo.MainContainer,this.Gt.horizontal?Qo.Horizontal:void 0,this.Gt.showOnHover?Qo.ShowOnHover:void 0),this.fT();const e=(0,it.Dx)(this.tT,this.Ue);"0px"===e.height&&"0px"!==e.maxHeight&&(0,it.T7)(this.tT,{height:e.maxHeight})}gT(){for(this.rT=(0,it.G$)(`<cnx class="${Qo.Handle}">`,this.Ue),this.mT=(0,it.G$)(`<cnx class="${Qo.Wrapper}">`,this.Ue),this.aT=(0,it.G$)(`<cnx class="${Qo.Content}">`,this.Ue),this.mT.appendChild(this.aT);this.tT.firstChild;)this.aT.appendChild(this.tT.firstChild);this.tT.appendChild(this.mT),this.tT.insertAdjacentElement("beforeend",this.rT)}destroy(){for(this.removeListeners(),(0,it.bX)(this.rT);this.aT.firstChild;)this.tT.appendChild(this.aT.firstChild);(0,it.bX)(this.mT),(0,it.IV)(this.tT,Qo.MainContainer,Qo.Horizontal,Qo.ShowOnHover)}removeListeners(){this.Ue.document.removeEventListener("mousemove",this.oT),this.Ue.document.removeEventListener("mouseup",this.hT),this.rT.removeEventListener("mousedown",this.eT),this.aT.removeEventListener("wheel",this.lT),this.Ue.removeEventListener("resize",this.dT),this.aT.removeEventListener("scroll",this.fT),this.aT.removeEventListener("mouseenter",this.fT)}}class Xo extends Go{constructor(t,i,e,s,n,r,o,h,a){super(t,i,e,s,n,r,o,h),this.resizeObserver=a,this.alignMiddle=!0,this.alignTop=!0,this.forceRight=!1,this.yT=[],this.vT=new Jo(this,this._r,this.sC,this.Yt,{name:"Off",activeEvent:null}),this.bT=[],this.xT=!1}sendEvent(t){this.updateCaptionSelection(t),this.mediator.publish(this,this.eventName,{payload:{event:t?bt[bt.CaptionOn]:bt[bt.CaptionOff],data:t}})}createCaptionsMenu(t){if(this.bT===t)return;0===this.yT.length?this.yT.push(this.vT):this.yT=this.yT.slice(0,1),t.forEach((t=>{this.yT.push(new Jo(this,this._r,this.sC,this.Yt,{name:t.title,activeEvent:t.file}))}));const i=this.bT.find((t=>{var i;return t.title===(null===(i=this.wT)||void 0===i?void 0:i.name)}));this.wT&&i&&this.updateCaptionSelection(i.file),(0,it.T7)(this.getContainer(),{height:"auto"}),this.bT=t,this.resizeObserver&&!this.xT&&(this.resizeObserver.on(this.getContainer(),(t=>this._T(t))),this.xT=!0),this.buildContextMenu(this.yT)}initComponent(){}onResize(t){this.cacheCoordinates(),this.isOpen&&this.positionContextMenu(t)}updateCaptionSelection(t){this.yT.forEach((t=>t.isActive=!1));const i=this.bT.find((i=>i.file===t));i?this.wT=this.yT.find((t=>t.name===i.title)):t||(this.wT=this.yT.find((t=>"Off"===t.name))),this.wT&&(this.wT.isActive=!0)}_T(t){t.clientHeight>=188&&(0,it.T7)(t,{height:"188px"}),this.PT||(this.PT=new Yo(t,{horizontal:!1}),(0,it.cn)(t,d.Gj.HasCustomScrollbar))}}class Zo extends Bo{constructor(){super(...arguments),this.eventList=[bt[bt.Settings],...this.eventList],this.ST="Settings"}onClickHandler(){this.mediator.publish(this,bt[bt.Settings])}toggleHDFlag(t){t?(0,it.cn)(this.nC,d.Gj.Active):(0,it.IV)(this.nC,d.Gj.Active)}get tooltip(){return this.ST}}const Ko='<cnx class="cnx-icon-button cnx-button-settings cnx-context-controller cnx-ui-btn-hoverable"><cnx class="cnx-btn-container"><cnx class="cnx-settings-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><path d="M18.454 5.847l-2.642 1.05-1.03-.784a6.014 6.014 0 00-1.39-.8l-1.205-.488-.404-2.786H10.22l-.404 2.786-1.205.488a6.48 6.48 0 00-1.413.817L6.17 6.9 3.546 5.847l-.783 1.34 2.232 1.727-.16 1.266c-.042.33-.062.59-.062.82s.02.49.062.82l.16 1.266-2.233 1.727.783 1.34 2.642-1.05 1.03.784c.444.338.904.603 1.39.8l1.205.488.404 2.786h1.563l.404-2.786 1.205-.488a6.48 6.48 0 001.413-.817l1.025-.76 2.625 1.043.783-1.34-2.233-1.727.16-1.266c.043-.337.062-.584.062-.82s-.02-.483-.062-.82l-.16-1.266 2.233-1.727-.783-1.34zm.71 6.227l2.32 1.81a.55.55 0 01.132.702l-2.198 3.793c-.132.24-.418.34-.67.24l-2.736-1.096c-.57.427-1.187.8-1.857 1.074l-.418 2.905a.535.535 0 01-.538.46H8.802a.534.534 0 01-.538-.46l-.418-2.905a8.045 8.045 0 01-1.857-1.074l-2.736 1.096a.553.553 0 01-.67-.24L.385 14.584a.553.553 0 01.132-.702l2.32-1.81A8.67 8.67 0 012.758 11a8.67 8.67 0 01.077-1.074l-2.32-1.81a.54.54 0 01-.132-.702l2.198-3.793c.132-.24.418-.34.67-.24L5.99 4.478c.57-.427 1.187-.8 1.857-1.074L8.264.5a.535.535 0 01.538-.46h4.396c.275 0 .506.197.538.46l.418 2.905c.67.274 1.286.636 1.857 1.074l2.736-1.096a.553.553 0 01.67.24l2.198 3.793a.553.553 0 01-.132.702l-2.32 1.81A8.52 8.52 0 0119.242 11a8.52 8.52 0 01-.077 1.074zM11 14.256A3.26 3.26 0 0014.256 11 3.26 3.26 0 0011 7.744 3.26 3.26 0 007.744 11 3.26 3.26 0 0011 14.256zm0-2A1.26 1.26 0 019.744 11 1.26 1.26 0 0111 9.744 1.26 1.26 0 0112.256 11 1.26 1.26 0 0111 12.256z"/></svg></cnx><cnx class="cnx-hd-flag"><svg markup-inline xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 11"><g fill="none"><rect class="cnx-color-accent" width="17" height="11" rx="2" fill="#09F"/><path class="cnx-color-icon" d="M8 9H6.9V5.9H4.1V9H3V2h1.1v2.9h2.8V2H8v7zm2 0V2h2c.6 0 1.1.2 1.6.4.4.3.8.7 1 1.2.3.5.4 1.1.4 1.7v.4c0 .7-.1 1.2-.4 1.7-.2.5-.6.9-1.1 1.2-.4.3-1 .4-1.6.4H10zm1-6v5h1.2c.6 0 1-.2 1.3-.6.3-.4.5-1 .5-1.7v-.4c0-.7-.2-1.3-.5-1.7-.3-.4-.7-.6-1.3-.6H11z"/></g></svg></cnx></cnx></cnx>';class th extends Bo{constructor(t,i,e,s,n,r=!1,o){super(t,i,e,s,o),this.AT=n,this.isActive=r}onClickHandler(){this.isActive=!this.isActive,this.onStateChange()}get isActive(){return this.tw}set isActive(t){this.tw=t,this.tw?(0,it.cn)(this.nC,this.AT):(0,it.IV)(this.nC,this.AT)}}class ih extends th{constructor(){super(...arguments),this.eventList=[bt[bt.CaptionMenu],bt[bt.CaptionOn],bt[bt.CaptionOff],bt[bt.StateChanged],...this.eventList],this.ST="Closed Captions"}onClickHandler(){this.mediator.publish(this,bt[bt.CaptionMenu])}onStateChange(){this.mediator.publish(this,this.isActive?bt[bt.CaptionOn]:bt[bt.CaptionOff]),this.mediator.publish(this,bt[bt.StateChanged])}get tooltip(){return this.ST}}const eh='<cnx class="cnx-icon-button cnx-button-caption cnx-context-controller cnx-ui-btn-hoverable"><cnx class="cnx-btn-container"><cnx class="cnx-caption-off-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.556 5H3.444C3.163 5 3 5.15 3 5.25v13.5c0 .1.163.25.444.25h17.11c.275 0 .444-.156.444-.25V5.25c0-.094-.17-.25-.444-.25zm0-2C21.9 3 23 4.013 23 5.25v13.5c0 1.238-1.1 2.25-2.444 2.25H3.444C2.088 21 1 19.988 1 18.75V5.25C1 4.013 2.088 3 3.444 3h17.11zM11 11H9.5v-.5h-2v3h2V13H11v1c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1zm7 0h-1.5v-.5h-2v3h2V13H18v1c0 .55-.45 1-1 1h-3c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1z" fill-rule="evenodd"/></svg></cnx><cnx class="cnx-caption-on-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="none"><path d="M20.6 3C21.9 3 23 4 23 5.3v13.5c0 1.2-1.1 2.2-2.4 2.2H3.4C2.1 21 1 20 1 18.8V5.3C1 4 2.1 3 3.4 3h17.2z" class="cnx-color-accent"/><path d="M11 11H9.5v-.5h-2v3h2V13H11v1c0 .6-.4 1-1 1H7c-.5 0-1-.4-1-1v-4c0-.5.5-1 1-1h3c.6 0 1 .5 1 1v1zm7 0h-1.5v-.5h-2v3h2V13H18v1c0 .6-.4 1-1 1h-3c-.5 0-1-.4-1-1v-4c0-.5.5-1 1-1h3c.6 0 1 .5 1 1v1z" class="cnx-color-icon"/></g></svg></cnx></cnx></cnx>';class sh extends Mo{constructor(){super(...arguments),this.Il=!1,this.eventList=[bt[bt.Next]]}onClickHandler(){this.mediator.publish(this,bt[bt.Next])}show(){this.Il=!0,this.nC.classList.add("cnx-fade-in-up-next")}hide(){this.Il=!1,this.nC.classList.remove("cnx-fade-in-up-next")}isInView(){return this.Il}updateCard(t,i){const e=this.nC.getElementsByTagName("img")[0];e.setAttribute("src",t),e.style.display="none",e.onload=()=>{e.style.display="block"};this.nC.getElementsByClassName("cnx-up-next-box-text")[0].innerHTML=(0,H.QM)(i)?i:""}}var nh=h(7953);class rh extends To{constructor(t,i,e,s,n){super(t,i,e,s),this.settings=n,this.eventList=[],this.IT=144,this.kT=36}createLogo(){let t=this._r.createElement("img");t.onload=()=>{t=this.resizeLogo(t),this.nC.appendChild(t)},t.src=this.settings.logoUrl,t.alt=""}resizeLogo(t){const i=t.naturalWidth,e=t.naturalHeight;if(!i||!e)return t;if(this.settings.logoPosition===nh.ProtoLogoPositionMode.ControlBar)t.style.setProperty("height",`${this.kT}px`,"important"),t.style.setProperty("width",`${this.kT}px`,"important");else{const s=i/e;this.kT*s>this.IT?(t.style.setProperty("width",`${this.IT}px`,"important"),t.style.setProperty("height","auto","important")):(t.style.setProperty("width","auto","important"),t.style.setProperty("height",`${this.kT}px`,"important"))}return t}initComponent(){try{this.createLogo()}catch(t){(0,s.n)({message:"LogoComponent_createLogo",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}}class oh extends To{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){(0,it.Ho)(this.nC)}hide(){(0,it.MV)(this.nC)}}const hh='<cnx class="cnx-ui-loader"><svg class="cnx-color-accent" version="1.1" viewBox="0 0 79 90" xmlns="http://www.w3.org/2000/svg"><polygon points="21 73.322 11 79 11 12 21 17.678" fill="none" stroke-linecap="round" stroke-linejoin="round"/><polygon points="27 70 27 21 38 27.267 38 63.733" fill="transparent" stroke-linecap="round" stroke-linejoin="round"/><polygon points="44 61 44 31 54 36.769 54 55.231" fill="none" stroke-linecap="round" stroke-linejoin="round"/><polygon points="60 51 60 40 70 45.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg></cnx>';const ah='<cnx class="cnx-ui-cm cnx-ui-cm-settings"><cnx class="cnx-cm-container"></cnx></cnx>';var ch=h(7089);class lh extends Go{constructor(){super(...arguments),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!0}CT(){const i=t.g.version?`V${t.g.version}`:"dev",e=[new Jo(this,this._r,this.sC,this.Yt,{activeEvent:bt[bt.AboutClick],name:"About Connatix",icon:ch,label:i})];this.buildContextMenu(e)}initComponent(){this.CT()}onResize(){this.cacheCoordinates(),this.close()}}const dh="About Connatix",uh="Closed Captions";var ph=h(9335);class fh extends Mo{constructor(t,i,e,s,n){super(t,i,e,fh.getTemplate(n),s),this.mediator=t,this.HC=[],this.XC=!1,this.type=qo.SubmenuMenuItem,this.eventList=[],this.isOpen=!1,this.event=n.event,this.eventList.push(this.event),this.TT=new Jo(this,i,e,s,{activeEvent:n.event,name:n.name.toUpperCase(),icon:""}),this.$menuContainer=this._r.createElementByString(`<cnx class="${d.Ng.Items}"></cnx>`),this.MT=this.nC.getElementsByClassName(d.Ng.ItemExtra)[0]}static getTemplate(t){const i=`<cnx class="${d.Ng.ItemIcon}">${t.icon}</cnx>`;return`<cnx class="${d.Ng.SubmenuOption}">\n                    ${t.icon?i:""}\n                    <cnx class="${d.Ng.ItemTitle}">${t.name}</cnx>\n                    <cnx class="${d.Ng.ItemExtra} ${d.iu.AccentColor}">${t.label?t.label:""}${ph}</cnx>\n                </cnx>`}onClickHandler(t){this.mediator.publish(this,this.event)}handleItemsEvents(t){this.mediator.publish(this,this.event,{payload:t===this.event?void 0:t})}buildContextMenu(t){this.$menuContainer.innerHTML="",this.HC.forEach((t=>this.unsubscribeAll(t))),this.HC=[this.TT,...t],this.HC.forEach((t=>{t.eventList.forEach((i=>this.subscribe(i,t,(()=>this.handleItemsEvents(i))))),t.initComponent(),this.$menuContainer.appendChild(t.getContainer())}))}changeLabel(t){this.MT.innerHTML=`${t}${ph}`}get isActive(){return this.XC}set isActive(t){this.XC=t,this.XC?(0,it.cn)(this.nC,d.Gj.Active):(0,it.IV)(this.nC,d.Gj.Active)}}class gh extends fh{constructor(t,i,e,s,n,r,o){super(t,i,e,s,{event:bt[bt.CaptionMenu],name:n,icon:eh,options:[]}),this.mediator=t,this.resizeObserver=o,this.yT=[],this.vT=new Jo(this,this._r,this.sC,this.Yt,{name:"Off",activeEvent:null}),this.bT=[],this.isActive=r}handleItemsEvents(t){t!==bt[bt.CaptionMenu]&&this.isOpen&&(this.updateSelection(t),(0,it.T7)(this.$menuContainer,{height:"0"}),this.mediator.publish(this,this.event,{payload:{event:t?bt[bt.CaptionOn]:bt[bt.CaptionOff],data:t}}))}createCaptionsMenu(t){0===this.yT.length?this.yT.push(this.vT):this.yT=this.yT.slice(0,1),t.forEach((t=>{this.yT.push(new Jo(this,this._r,this.sC,this.Yt,{name:t.title,activeEvent:t.file}))}));let i=!1;this.bT.length!==t.length&&(i=!0),this.updateMenu(),this.bT=t;const e=this.bT.find((t=>{var i;return t.title===(null===(i=this.wT)||void 0===i?void 0:i.name)}));this.wT&&e&&this.updateSelection(e.file),this.buildContextMenu(this.yT),this.resizeObserver&&i&&(this.resizeObserver.off(this.$menuContainer,(t=>this._T(t))),this.resizeObserver.on(this.$menuContainer,(t=>this._T(t))))}updateSelection(t){this.yT.forEach((t=>t.isActive=!1));const i=this.bT.find((i=>i.file===t));i?this.wT=this.yT.find((t=>t.name===i.title)):t||(this.wT=this.yT.find((t=>"Off"===t.name))),this.wT&&(this.wT.isActive=!0)}updateMenu(){(0,it.T7)(this.$menuContainer,{height:"auto"})}reset(){var t;this.resizeObserver.off(this.$menuContainer,(t=>this._T(t))),null===(t=this.PT)||void 0===t||t.removeListeners(),this.PT=null,this.bT=[]}_T(t){t.clientHeight>=188&&(0,it.T7)(t,{height:"188px"}),this.PT||(this.PT=new Yo(t,{horizontal:!1}),(0,it.cn)(t,d.Gj.HasCustomScrollbar))}}class mh extends Go{constructor(i,e,s,n,r,o,h,a,c,l=!0,d){super(i,e,s,n,r,o,h,c),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!1,this.ET=[new Jo(this,this._r,this.sC,this.Yt,{activeEvent:bt[bt.AboutClick],name:dh,icon:ch,label:t.g.version?`V${t.g.version}`:"dev"})],this.BT=new gh(this,this._r,this.sC,this.Yt,uh,l,d),this.OT=[this.BT],this.RT=a}DT(){let t=this.ET;this.RT===d.Rq.Lg&&(t=[...this.OT,...this.ET]),this.buildContextMenu(t)}initComponent(){this.DT()}onResize(t,i){this.isOpen&&this.positionContextMenu(t),this.RT!==i?(this.RT=i,this.closeAllSubmenuItems(),this.DT()):this.RT=i}toggleCaptionState(t){this.BT.isActive!==t&&(this.BT.isActive=t)}hideCaptionOption(){this.BT.hideComponent()}showCaptionOption(){this.BT.showComponent()}updateCaptionSelection(t){this.BT.updateSelection(t)}updateMenu(){this.BT.updateMenu()}getAnchorCoordinatesTo(t){let i=Ao.Right;return this.RT!==d.Rq.Xl&&this.RT!==d.Rq.Xxl&&(i|=Ao.Top),t.getCoordinates(i)}createCaptionsMenu(t){this.BT.createCaptionsMenu(t)}reset(){var t;null===(t=this.BT)||void 0===t||t.reset()}}var yh=h(8852);class vh extends To{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.FT=this.nC.getElementsByClassName(d.Yk.CaptionContainer)[0]}updateCaptions(t){this.FT.innerHTML=t&&t.text?(0,yh.f5)(t.text,"<br>"):""}}class bh extends rh{constructor(){super(...arguments),this.$T="cnx-logo-height",this.jT="cnx-logo-width"}createLogo(){this.nC.onload=()=>{this.nC.style.visibility="visible",this.resizeLogo(this.nC)},this.nC.style.visibility="hidden",this.nC.src=this.settings.logoUrl}resizeLogo(t){const i=t.naturalWidth,e=t.naturalHeight;return i&&e?(i>e?(0,it.cn)(t,this.jT):(0,it.cn)(t,this.$T),t):t}}var xh=h(834),wh=h(1639);class _h extends To{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.VT=0,this.NT=null,this.UT=0,this.qT=0,this.zT=100,this.cacheDomElements()}cacheDomElements(){this.WT=this.nC.getElementsByClassName("cnx-progress-fill")[0],this.GT=this.nC.getElementsByClassName("cnx-progress-rail")[0]}cacheWidths(){this.VT=this.fixedRailWidth?this.fixedRailWidth:this.GT.getBoundingClientRect().width,this.NT=this.GT.getBoundingClientRect().left}updateUi(t){const i=this.getComputedTranslation(t);this.UT=i,this.WT.style.transform=`translateX(${i}px)`}isValidTranslation(){return this.UT>=0&&this.UT<=this.VT}getComputedTranslation(t){return t<0?0:t>this.VT?this.VT:t}setProgress(t){this.cacheWidths();const i=this.getComputedTranslation((0,_t.dQ)(0,100,0,this.VT,t));this.updateUi(i)}disableTransition(){(0,it.cn)(this.nC,d.Gj.NoTransition)}enableTransition(){(0,it.IV)(this.nC,d.Gj.NoTransition)}JT(t){this.disableTransition(),this.setProgress(t),(0,it.Tp)(this.WT),this.enableTransition()}forceStartState(){this.JT(this.qT)}forceEndState(){this.JT(this.zT)}initComponent(){this.cacheWidths()}destroy(){super.destroy()}}class Ph extends _h{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.QT=0,this._n=null,this.YT=!1,this.eventList=[bt[bt.DraggingStart],bt[bt.DraggingStopped]],this.XT=t=>{this.cacheWidths(),this.KT(this.tM(t)),this.Yt?this.nC.addEventListener(this.iM,this.eM):this._r.addEventListenerOnGlobal(this.iM,this.eM),this.onDragStart()},this.eM=t=>{null===this._n&&(this.YT||(this.YT=!0,this.disableTransition()),this._n=this._r.requestAnimationFrameHelper((()=>{const i=this.sM+(this.tM(t)-this.nM);this.isValidTranslation()&&this.oM(i),this._n=null})))},this.hM=t=>{t.stopPropagation(),this.Yt?this.nC.removeEventListener(this.iM,this.eM):this._r.removeEventListenerOnGlobal(this.iM,this.eM),this.YT=!1,this.enableTransition(),this.onDragEnd()},this.iM=n?"touchmove":"mousemove"}cacheDomElements(){super.cacheDomElements(),this.aM=this.nC.getElementsByClassName("cnx-progress-handle")[0]}cacheWidths(){super.cacheWidths(),this.QT=this.aM.getBoundingClientRect().width/2}updateUi(t){super.updateUi(t);const i=this.getComputedTranslation(t);this.aM.style.transform=`translateX(${i-this.QT}px)`}onDragEnd(){this.mediator.publish(this,bt[bt.DraggingStopped])}onDragStart(){this.mediator.publish(this,bt[bt.DraggingStart])}tM(t){return this.Yt?t.touches.item(0).clientX:t.clientX}KT(t){this.sM=t-this.NT,this.nM=t,this.oM(this.sM)}oM(t){if(this.isValidTranslation()){const i=this.getComputedTranslation(t),e=0,s=this.VT,n=0,r=100;this.updateUi(i),this.onProgressChange((0,_t.dQ)(e,s,n,r,i))}}setProgress(t){super.setProgress(t)}initComponent(){super.initComponent();const t={interactionstart:this.XT,interactionend:this.hM};this.sC.register(this.nC,this,this.sC,t)}destroy(){super.destroy()}}class Sh extends Ph{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.cM=80,this.fixedRailWidth=this.cM,this.eventList.push(bt[bt.Volume])}onProgressChange(t){this.mediator.publish(this,bt[bt.Volume],{payload:t})}}function Ah(t,i,e){const s=e?_[_.Auto]:i.height.toString();t.forEach((t=>t.name.includes(s)?t.isActive=!0:t.isActive=!1));const n=t.find((t=>_[t.event]===_.Auto));if(e){const e=t.find((t=>t.event===i.height.toString()));if(e){const t=`${n.name} (${e.name})`;n.changeItemName(t)}}else n.changeItemName(n.name)}class Ih extends Go{constructor(){super(...arguments),this.alignMiddle=!0,this.alignTop=!0,this.forceRight=!1,this.yT=[],this.lM={height:360,quality:_.Auto},this.dM=!0}sendEvent(t){this.dM=_[t]===_.Auto,this.mediator.publish(this,this.eventName,{payload:{height:this.dM?this.lM.height:parseInt(t,10),quality:this.dM?_.Auto:_.Strict}})}initComponent(){}createQualityMenu(t){this.yT=[],this.uM=t,this.uM.forEach((t=>{this.yT.push(new Jo(this,this._r,this.sC,this.Yt,{name:`${t.videoHeight}p`,activeEvent:t.videoHeight.toString(),label:t.isHD?"HD":void 0}))})),this.yT.push(new Jo(this,this._r,this.sC,this.Yt,{name:_[_.Auto],activeEvent:_[_.Auto]})),Ah(this.yT,this.lM,this.dM),this.buildContextMenu(this.yT)}onResize(t){this.cacheCoordinates(),this.isOpen&&this.positionContextMenu(t)}updateQuality(t){(0,l.BZ)(this.uM)&&(this.dM=t.quality===_.Auto,this.lM.quality=t.quality,this.lM.height=(0,_t.DE)(t.height,this.uM.map((t=>t.videoHeight))),Ah(this.yT,this.lM,this.dM))}}class kh extends To{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){(0,it.Ho)(this.nC),(0,it.Tp)(this.nC),(0,it.cn)(this.nC,d.Gj.Active)}hide(){(0,it.IV)(this.nC,d.Gj.Active),(0,it.MV)(this.nC)}}class Ch extends Bo{constructor(t,i,e,s,n,r,o){super(t,i,e,s,n),this.tooltip=o,this.pM=So[r],this.eventList.push(this.pM)}onClickHandler(){this.mediator.publish(this,this.pM)}}class Th extends Mo{constructor(t,i,e,s,n,r,o){super(t,i,e,s,n),this.tooltip=o,this.eventList=[],this.pM=So[r],this.eventList.push(this.pM)}onClickHandler(){this.mediator.publish(this,this.pM)}}class Mh{constructor(t,i,e,s){this._r=t,this.sC=i,this.Yt=e,this.fM=new Map,Object.keys(s).forEach((t=>this.gM(So[t],s[t])))}getButton(t,i){const{isHoverable:e,template:s,tooltip:n}=this.mM(t);return e?new Ch(i,this._r,this.sC,s,this.Yt,t,n):new Th(i,this._r,this.sC,s,this.Yt,t,n)}isGeneralComponent(t){return this.fM.has(t)}mM(t){return this.fM.get(t)}gM(t,i){this.fM.set(t,i)}}var Eh=h(1215);function Bh(t,i,e=!0){return e?`\n            <cnx class="cnx-icon-button cnx-button-${So[t].toLowerCase()} cnx-ui-btn-hoverable">\n                <cnx class="cnx-btn-container">\n                    ${i}\n                </cnx>\n            </cnx>\n        `.trim():`<cnx class="cnx-button-${So[t].toLowerCase()}">${i}</cnx>`}var Lh=h(9040),Oh=h(89);const Rh={[So[So.MoreButton]]:{template:Bh(So.MoreButton,Oh),tooltip:"More",isHoverable:!0},[So[So.CloseButton]]:{template:Bh(So.CloseButton,Eh),tooltip:"Close Player",isHoverable:!0},[So[So.UpNextButton]]:{template:Bh(So.UpNextButton,Lh),tooltip:"Next",isHoverable:!0},[So[So.PreviousButton]]:{template:Bh(So.PreviousButton,Lh),tooltip:"Previous",isHoverable:!0}};class Dh extends Bo{constructor(){super(...arguments),this.eventList=[bt[bt.SkipAd],...this.eventList],this.yM=-1,this.vM=-1}initComponent(){super.initComponent(),this.hideComponent(),this.bM=this.nC.getElementsByTagName("cnx-span")[0],this.bM.innerHTML="Ad",this.xM=this.nC.querySelectorAll(`.${d.Hs.Timer} svg`)[0]}setSecondsUntilSkip(t){this.yM=Math.ceil(t),this.vM=-1,this.yM>0&&(0,it.T7)(this.xM,{"animation-duration":this.yM+"s"})}tickDown(t){const i=this.yM-Math.floor(t);if(i<0||0===this.vM)return;const e=(0,it.pv)(this.nC,d.Hs.InTimer);this.vM=i,0===this.vM?(e&&(0,it.IV)(this.nC,d.Hs.InTimer),this.bM.innerHTML="Ad"):(e||(0,it.cn)(this.nC,d.Hs.InTimer),this.bM.innerHTML=`in ${this.vM}s`)}get tooltip(){}onClickHandler(){0===this.vM&&this.mediator.publish(this,bt[bt.SkipAd])}}var Fh=h(4670);class $h extends To{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.wM=this.nC.getElementsByClassName(d.mr.BackgroundImg)[0],this._M=this.nC.getElementsByClassName(d.mr.Icon)[0],this._M.innerHTML=Fh,this.SM=this.nC.getElementsByClassName(d.mr.ButtonContainer)[0];const t=this.nC.getElementsByClassName(d.mr.Button)[0];this.AM=this._r.createElementByString(`<a class="${d.mr.Wrapper}" href="#">`),this.AM.target=_e.bS.Blank,this.AM.appendChild(t),this.SM.innerHTML="",this.SM.appendChild(this.AM),this.IM=this.nC.getElementsByClassName(d.mr.InfoContainer)[0],this.kM=this.nC.getElementsByClassName(d.mr.FallbackContainer)[0],this.CM=this.nC.getElementsByClassName(d.mr.SlotCountText)[0]}setBackgroundImg(t){(0,H.QM)(t)?((0,it.IV)(this.wM,d.Gj.DisplayNone),this.wM.src=t):(0,it.cn)(this.wM,d.Gj.DisplayNone)}setClickUrl(t){if(!(0,H.QM)(t))return(0,it.Ho)(this.kM),void(0,it.MV)(this.IM);(0,it.Ho)(this.IM),(0,it.MV)(this.kM),this.AM.href=t}setFallbackText(t,i){const e=t||1,s=i||1;this.CM.innerHTML=`Loading ad ${e}/${s}`}}class jh extends To{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.TM=this.nC.getElementsByTagName("cnx-span")[0]}setTime(t){isNaN(t)||"number"!=typeof t?(0,it.cn)(this.nC,d.Gj.Invisible):(this.TM.innerHTML=(0,ae.to)(t),(0,it.IV)(this.nC,d.Gj.Invisible))}}const Vh='<cnx class="cnx-ui-progress-label"><cnx-span></cnx-span></cnx>';class Nh extends Ph{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.MM=!1,this.EM=t=>{(0,it.cn)(this.nC,d.Gj.HoverEnd),this.MM=!0},this.BM=t=>{const i=this.getComputedTranslation(t.clientX-this.NT);this.LM.style.transform=`translateX(${i}px)`},this.OM=t=>{this.LM.style.transform="translateX(0)",this.MM=!1,this.RM()},this.eventList=this.eventList.concat([bt[bt.Seek],bt[bt.SeekingStart],bt[bt.SeekingStopped]])}onProgressChange(t){this.mediator.publish(this,bt[bt.Seek],{payload:t-.1})}onDragEnd(){super.onDragEnd(),this.mediator.publish(this,bt[bt.SeekingStopped]),this.RM()}onDragStart(){super.onDragStart(),this.mediator.publish(this,bt[bt.SeekingStart])}RM(){this.MM||this.YT||(0,it.IV)(this.nC,d.Gj.HoverEnd)}initComponent(){super.initComponent(),this.nC.addEventListener("mousemove",this.BM),this.nC.addEventListener("mouseenter",this.EM),this.nC.addEventListener("mouseleave",this.OM),this.LM=this.nC.getElementsByClassName("cnx-progress-follow")[0]}hide(){(0,it.MV)(this.nC)}show(){(0,it.Ho)(this.nC)}destroy(){super.destroy(),this.nC.removeEventListener("mousemove",this.BM),this.nC.removeEventListener("mouseenter",this.EM),this.nC.removeEventListener("mouseleave",this.OM)}}var Uh;!function(t){t[t.Mute=0]="Mute",t[t.Unmute=1]="Unmute"}(Uh||(Uh={}));class Hh extends Bo{constructor(t,i,e,s,n,r){super(t,i,e,s,r),this.eventList=[bt[bt.Mute],bt[bt.Unmute],bt[bt.StateChanged],...this.eventList],this.DM="Mute",this.FM="Unmute",this.tw=n}onClickHandler(){this.tw===Uh.Mute?(this.mediator.publish(this,bt[bt.Unmute]),this.setState(Uh.Unmute)):(this.mediator.publish(this,bt[bt.Mute]),this.setState(Uh.Mute))}lC(){this.tw===Uh.Mute?(0,it.L_)(this.nC,"cnx-sound-on","cnx-sound-off"):(0,it.L_)(this.nC,"cnx-sound-off","cnx-sound-on")}get tooltip(){return this.tw===Uh.Mute?this.FM:this.DM}initComponent(){super.initComponent(),this.lC()}setState(t){this.tw!==t&&(this.tw=t,this.lC(),this.mediator.publish(this,bt[bt.StateChanged]))}setVolume(t){t>0?this.setState(Uh.Unmute):this.setState(Uh.Mute)}}class qh{constructor(t,i,e,s={},n={}){this._r=t,this.sC=i,this.nC=e,this.Gt=s,this.$M={[So.PlayButton]:t=>this.jM(!1,t),[So.BigPlayButton]:t=>this.jM(!0,t),[So.VolumeProgress]:t=>new Sh(t,this._r,this.sC,'<cnx class="cnx-progress-bar"><cnx class="cnx-progress-rail-container"><cnx class="cnx-progress-rail"></cnx><cnx class="cnx-progress-fill cnx-color-icon"></cnx></cnx><cnx class="cnx-progress-handle cnx-color-icon"></cnx></cnx>'),[So.ExpandButton]:t=>new zo(t,this._r,this.sC,'<cnx class="cnx-icon-button cnx-ui-btn-hoverable"><cnx class="cnx-btn-container"><cnx class="cnx-expand-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.6 3H10v2H5v5H3V4.6A1.58 1.58 0 014.6 3zM5 14v5h5v2H4.6A1.58 1.58 0 013 19.4V14h2zM19.4 3A1.58 1.58 0 0121 4.6V10h-2V5h-5V3h5.4zM19 14h2v5.4a1.58 1.58 0 01-1.6 1.6H14v-2h5v-5z" fill-rule="evenodd"/></svg></cnx><cnx class="cnx-collapse-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill-rule="evenodd"><path d="M16.6 15a1.58 1.58 0 00-1.6 1.6V22h2v-5h5v-2h-5.4zM17 2h-2v5.4A1.58 1.58 0 0016.6 9H22V7h-5V2zM7.4 15A1.58 1.58 0 019 16.6V22H7v-5H2v-2h5.4zM7 2h2v5.4A1.58 1.58 0 017.4 9H2V7h5V2z"/></svg></cnx></cnx></cnx>',this.Gt.isMobile),[So.QualityMenu]:t=>new Ih(t,this._r,this.sC,'<cnx class="cnx-ui-cm cnx-ui-cm-quality"><cnx class="cnx-cm-container"></cnx></cnx>',bt[bt.Quality],So.QualityMenu,this.nC,this.Gt.isMobile),[So.Loader]:t=>new kh(t,this._r,this.sC,hh),[So.SkipAdButton]:t=>new Dh(t,this._r,this.sC,'<cnx class="cnx-ad-skip-button cnx-ui-btn"><cnx class="cnx-icon-button"><cnx class="cnx-skip-ad-text">Skip&nbsp;<cnx-span></cnx-span></cnx><cnx class="cnx-skip-ad-icon"><svg markup-inline viewBox="0 0 24 24" class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule="evenodd"/></svg></cnx></cnx><cnx class="cnx-timer-loader"><svg markup-inline xmlns="http://www.w3.org/2000/svg" width="36" height="36"><circle class="cnx-svg-circle-stroke" cx="18" cy="18" r="17"/></svg></cnx></cnx>',this.Gt.isMobile),[So.AdLoadingScreen]:t=>new $h(t,this._r,this.sC,'<cnx class="cnx-pod-loading-screen-container"><img alt="Loading Pods" class="cnx-pod-loading-background"><cnx class="cnx-pod-loading-info"><cnx class="cnx-pod-open-new-icon"></cnx><cnx class="cnx-pod-visit-website-text"><cnx-span>Visit Advertiser website</cnx-span></cnx><cnx class="cnx-pod-read-more-container"><cnx-span class="cnx-pod-read-more-btn">GO TO PAGE</cnx-span></cnx></cnx><cnx class="cnx-pod-loading-fallback"><cnx class="cnx-pod-loading-spinner"></cnx><cnx-span class="cnx-pod-slot-count-text"></cnx-span></cnx></cnx>'),[So.ElapsedTimeLabel]:t=>new jh(t,this._r,this.sC,Vh),[So.TotalDurationLabel]:t=>new jh(t,this._r,this.sC,Vh),[So.RemainingDurationLabel]:t=>new jh(t,this._r,this.sC,Vh),[So.ProgressBar]:t=>new Nh(t,this._r,this.sC,'<cnx class="cnx-progress-bar cnx-video-progress"><cnx class="cnx-progress-rail-container"><cnx class="cnx-progress-rail"></cnx><cnx class="cnx-progress-fill cnx-color-accent"></cnx><cnx class="cnx-progress-follow"></cnx></cnx><cnx class="cnx-progress-handle cnx-color-accent"></cnx><cnx class="cnx-progress-hitarea"></cnx></cnx>',this.Gt.isMobile),[So.VolumeButton]:t=>new Hh(t,this._r,this.sC,'<cnx class="cnx-icon-button cnx-ui-btn-hoverable"><cnx class="cnx-btn-container"><cnx class="cnx-unmute-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 7.913v7.913h4.946l5.935 5.045V1.978L4.946 7.913zm16.815 3.957a5.476 5.476 0 00-2.967-4.946v9.9a5.475 5.475 0 002.967-4.945zM13.848 0v2.077a10.39 10.39 0 010 19.585v2.077a12.05 12.05 0 008.9-11.87A12.05 12.05 0 0013.848 0z"/></svg></cnx><cnx class="cnx-mute-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 2L8.25 4.25 11 7zM0 7v9h5l6 5v-6.5L3.85 7zm17 4.5c0-1.965-1.2-3.735-3-4.5v3l2.8 2.8a3.73 3.73 0 00.2-1.3zm3.4 7.45l-1.85-1.85-2.65-2.6-1.9-1.95-3-3-4.15-4.1-4.95-5L1.45 0 0 1.45 17.15 18.6 19 20.4l3.55 3.6L24 22.55zM14 23a11.83 11.83 0 003.65-1.55l-1.25-1.3c-.747.498-1.553.902-2.4 1.2V23zm9-11.5A11.77 11.77 0 0014 0v1.6A10.53 10.53 0 0120 16l1.45 1.45A11.99 11.99 0 0023 11.5z"/></svg></cnx></cnx></cnx>',Uh.Mute,this.Gt.isMobile)},this.jM=(t,i)=>new Lo(i,this._r,this.sC,function(t=!1){return`\n    <cnx class="cnx-icon-button cnx-ui-btn-hoverable ${t?"cnx-button-big-play":""}">\n        <cnx class="cnx-btn-container">\n            <cnx class="cnx-play-icon">${xh}</cnx>\n            <cnx class="cnx-pause-icon">${wh}</cnx>\n        </cnx>\n    </cnx>\n`.trim()}(t),this.Gt.isMobile),this.VM=t=>i=>{const e=this.$M[t];if(e)return e(i)},this.NM=new Mh(this._r,this.sC,this.Gt.isMobile,Object.assign(Object.assign({},Rh),n))}createComponent(t,i){const e=this.VM(t)(i);return e||(this.NM.isGeneralComponent(t)?this.NM.getButton(t,i):void 0)}}class zh extends Vo{constructor(t,i,e,s){super(i,e,s),this.mediator=t,this.nC=this._C.getRenderedDom()}getContainer(){return this.nC}initComponent(){this._C.initComponents()}showComponent(){(0,it.Ho)(this.nC)}hideComponent(){(0,it.MV)(this.nC)}}class Wh extends zh{constructor(t,i,e,s){super(t,i,e,s),this.UM=null,this.eventList=[bt[bt.Volume],bt[bt.VolumeHoverStart],bt[bt.VolumeHoverStopped],bt[bt.DraggingStopped],bt[bt.DraggingStart],bt[bt.HoverStart],bt[bt.HoverEnd],bt[bt.StateChanged]],this.HM=.2,this.qM=600,this.zM=!1,this.WM=t=>{clearTimeout(this.UM),(0,it.cn)(this.nC,"cnx-mod-hover"),this.mediator.publish(this,bt[bt.VolumeHoverStart])},this.GM=()=>{this.zM||(null!==this.UM&&clearTimeout(this.UM),this.UM=setTimeout((()=>{(0,it.IV)(this.nC,"cnx-mod-hover"),this.mediator.publish(this,bt[bt.VolumeHoverStopped])}),this.qM))},this.JM=this.HM,this.YM=this.getComponent(So.VolumeButton),this.XM=this.getComponent(So.VolumeProgress),(0,it.IV)(this.YM.getContainer(),d.Gj.HovarableButton)}handleComponentEvent(t,i,e){let s;switch(t){case bt[bt.Volume]:s=i.payload/100,this.ZM(s),this.KM(i.payload);break;case bt[bt.Mute]:s=0,this.setVolumeProgress(0);break;case bt[bt.Unmute]:s=this.JM,this.setVolumeProgress(100*this.JM);break;case bt[bt.DraggingStopped]:this.zM=!1,this.mediator.publish(this,bt[bt.DraggingStopped]),this.GM();break;case bt[bt.DraggingStart]:this.zM=!0,this.mediator.publish(this,bt[bt.DraggingStart]);break;case bt[bt.HoverStart]:this.mediator.publish(this,bt[bt.HoverStart],{payload:{targetComponent:e}});break;case bt[bt.HoverEnd]:this.mediator.publish(this,bt[bt.HoverEnd],{payload:{targetComponent:e}});break;case bt[bt.StateChanged]:this.mediator.publish(this,bt[bt.StateChanged],{payload:{targetComponent:e}})}void 0!==s&&this.tE(s)}ZM(t){t<this.HM?this.JM=this.HM:this.JM=t}tE(t){this.mediator.publish(this,bt[bt.Volume],{payload:t})}KM(t){0===t?this.YM.setState(Uh.Mute):this.YM.setState(Uh.Unmute)}setVolumeProgress(t){this.XM.setProgress(t)}initComponent(){super.initComponent(),this.nC.addEventListener("mouseenter",this.WM),this.nC.addEventListener("mouseleave",this.GM)}setVolume(t){const i=100*t;this.KM(i),this.setVolumeProgress(i)}destroy(){super.destroy(),this.nC.removeEventListener("mouseenter",this.WM),this.nC.removeEventListener("mouseleave",this.GM)}}const Gh=`\n    <cnx class="cnx-volume-container">\n        <cnx class="cnx-ui-btn cnx-volume-btn">\n            [[${So.VolumeButton}]]\n        </cnx>\n        <cnx class="cnx-volume-bar">\n            [[${So.VolumeProgress}]]\n        </cnx>\n    </cnx>\n`.trim();var Jh=h(2040),Qh=h(8808);const Yh={[So[So.ShareButton]]:{template:Bh(So.ShareButton,Qh),tooltip:"Share",isHoverable:!0},[So[So.CastButton]]:{template:Bh(So.CastButton,Jh),tooltip:"Cast",isHoverable:!0}};var Xh=h(1505),Zh=h(3653);const Kh=90*I.Y0,ta="This live stream will start shortly";class ia extends To{constructor(){super(...arguments),this.eventList=[],this.iE=null}initComponent(){this.eE=this._r.createElementByString("<img/>"),this.nC.appendChild(this.eE),this.sE=this.nC.getElementsByTagName("cnx-span")[0],this.nE=this.nC.getElementsByClassName("cnx-live-message")[0],this.rE=this.nC.getElementsByClassName("cnx-live-icon")[0]}setPosterSrc(t){(0,H.QM)(t)&&(this.eE.src=t)}setPosterAltText(t){this.eE.alt=t}setIconToStarting(){this.rE.innerHTML=`${Xh}`}setIconToEnded(){this.rE.innerHTML=`${Zh}`}setMessageToStarting(){this.oE(ta)}setMessageToEnded(){this.oE("This live stream is not currently available. Please check again shortly")}setMessageToNotSupported(){this.oE("Live stream not supported by browser")}handleDelayedStart(t){(0,H.r)(Date.parse(t))&&(this.hE=new Date(t),this.aE()>0&&(this.cE(),clearInterval(this.iE),this.iE=setInterval((()=>{this.cE()}),I.s_*I.Y0)))}showMessage(){(0,it.Ho)(this.rE),(0,it.Ho)(this.nE)}hideMessage(){(0,it.MV)(this.rE),(0,it.MV)(this.nE)}show(){(0,it.Ho)(this.nC),(0,it.cn)(this.nC,d.Gj.Active)}hide(){(0,it.IV)(this.nC,d.Gj.Active),(0,it.MV)(this.nC)}destroy(){super.destroy(),clearInterval(this.iE)}cE(){const t=this.aE();if(t>0){const i=this.lE(t);this.oE(`Live in ${i}`)}else this.oE(ta),clearInterval(this.iE),this.iE=null}aE(){return(Math.max(this.hE.getTime(),Date.now())-Date.now())/I.s_}lE(t){const i=t>=Kh?Math.round(t/(I.Y0*I.oG)):Math.ceil(t/I.Y0);return`${i} ${t>=Kh?"hours":"minute"+(1===i?"":"s")}`}oE(t){this.sE.innerHTML=t}}class ea extends To{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hideComponent()}}class sa extends qh{constructor(t,i,e,s,n,r){super(t,i,e,s,Yh),this.dE=n,this.Er=r,this.uE={[So.VolumeControls]:t=>new Wh(t,this._r,Gh,this),[So.SettingsButton]:t=>new Zo(t,this._r,this.sC,Ko,this.Gt.isMobile),[So.CaptionButton]:t=>new ih(t,this._r,this.sC,eh,d.Gj.Active,this.Gt.closedCaptionDefault,this.Gt.isMobile),[So.UpNextBox]:t=>new sh(t,this._r,this.sC,'<cnx class="cnx-up-next-container cnx-hide-on-single-video"><cnx class="cnx-up-next-box"><cnx class="cnx-up-next-box-image"><img></cnx><cnx class="cnx-up-next-box-gradient"></cnx><cnx class="cnx-up-next-box-text"></cnx><cnx class="cnx-up-next-box-button"><cnx class="cnx-up-next-box-button-text">NEXT</cnx></cnx></cnx></cnx>',this.Gt.isMobile),[So.LogoComponent]:t=>{if(!(0,H.$K)(this.Gt.logoUrl)&&!(0,H.$K)(this.Gt.logoPosition))throw new Error("custom logo is undefined");return new rh(t,this._r,this.sC,'<cnx class="cnx-logo"></cnx>',{logoUrl:this.Gt.logoUrl,logoPosition:this.Gt.logoPosition})},[So.LogoOutstream]:t=>{if(!(0,H.$K)(this.Gt.logoUrl)&&!(0,H.$K)(this.Gt.logoPosition))throw new Error("outstream logo undefined");return new bh(t,this._r,this.sC,'<img class="cnx-home-screen-logo" />',{logoUrl:this.Gt.logoUrl})},[So.LivePoster]:t=>new ia(t,this._r,this.sC,'<cnx class="cnx-live-poster cnx-mod-active"><cnx class="cnx-live-broadcast"><cnx class="cnx-live-icon"><svg class="cnx-live-icon-starting" markup-inline viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="none"><path d="M22 15.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13z" fill="#FFF"/><path d="M22 18a4 4 0 110 8 4 4 0 010-8z" fill="#FF4047"/><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653zM6.028 7.541c-7.955 7.972-8.036 20.846-.243 28.918l.243.248 1.77-1.765c-6.985-7-7.062-18.302-.233-25.397l.233-.238-1.77-1.766zm4.722 5.225c-4.34 4.926-4.415 12.803-.224 17.831l.224.262 1.876-1.653c-3.515-3.989-3.583-10.465-.203-14.55l.203-.236-1.876-1.653z" fill="#FFF"/></g></svg> <svg class="cnx-live-icon-ended" markup-inline viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="#FFF" fill-rule="evenodd"><rect class="cnx-live-icon-svg-rectangle" transform="rotate(90 22.06 21.43)" x="20.059" y="15.929"/><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653zM6.028 7.541c-7.955 7.972-8.036 20.846-.243 28.918l.243.248 1.77-1.765c-6.985-7-7.062-18.302-.233-25.397l.233-.238-1.77-1.766zm4.722 5.225c-4.34 4.926-4.415 12.803-.224 17.831l.224.262 1.876-1.653c-3.515-3.989-3.583-10.465-.203-14.55l.203-.236-1.876-1.653z" fill-rule="nonzero" opacity=".5"/></g></svg></cnx><cnx class="cnx-live-message"><cnx-span></cnx-span></cnx></cnx></cnx>'),[So.LiveIcon]:t=>new ea(t,this._r,this.sC,'<cnx class="cnx-ui-live-badge-wrapper cnx-d-md-none"><cnx class="cnx-ui-live-badge"><svg markup-inline xmlns="http://www.w3.org/2000/svg" viewBox="0 0 37 9"><path d="M15.223 9V7.816H11.35V.47H9.868V9h5.356zm3.7 0V.47h-1.477V9h1.477zm6.555 0L28.55.47h-1.63l-2.168 6.674L22.608.47h-1.623L24.043 9h1.436zm10.6 0V7.816h-4.096V5.2h3.504V4.02h-3.504V1.664h4.055V.47H30.5V9h5.578zM3 2a3 3 0 100 6 3 3 0 100-6z" fill="#fff"/><path d="M3 3a2 2 0 110 4 2 2 0 110-4z" fill="#ff4047"/></svg></cnx></cnx>'),[So.QueStateOverlay]:t=>new oh(t,this._r,this.sC,hh),[So.ContextMenu]:t=>new lh(t,this._r,this.sC,'<cnx class="cnx-ui-cm cnx-ui-cm-context"><cnx class="cnx-cm-container"></cnx></cnx>',bt[bt.ContextClick],So.ContextMenu,this.nC,this.Gt.isMobile),[So.ElementsSettingsMenu]:t=>new mh(t,this._r,this.sC,ah,bt[bt.SettingsMenu],So.ElementsSettingsMenu,this.nC,this.dE,this.Gt.isMobile,this.Gt.closedCaptionDefault,this.Er),[So.ElementsCaptionMenu]:t=>new Xo(t,this._r,this.sC,'<cnx class="cnx-ui-cm cnx-ui-cm-captions"><cnx class="cnx-cm-container"></cnx></cnx>',bt[bt.CaptionMenu],So.ElementsCaptionMenu,this.nC,this.Gt.isMobile,this.Er),[So.CaptionComponent]:t=>new vh(t,this._r,this.sC,'<cnx class="cnx-captions"><cnx class="cnx-captions-container"><cnx-span class="cnx-captions-text-holder"></cnx-span></cnx></cnx>')},this.fE=t=>i=>{const e=this.uE[t];if(e)return e(i)}}createComponent(t,i){return this.fE(t)(i)||super.createComponent(t,i)}}var na;!function(t){t.InPod="cnx-ad-in-pod",t.AdMarkerInPodTextContainer="cnx-ad-marker-text",t.AdDurationLabel="cnx-ad-duration",t.AdTitleLabel="cnx-ad-title",t.AdMarkerTitleContainer="cnx-ad-marker-title",t.AdMarkerTitleText="cnx-ad-title-text",t.CardImage="cnx-ad-card-image",t.CardTitle="cnx-ad-card-title",t.AdUiContent="cnx-ui-ad-content"}(na||(na={}));class ra extends Wo{constructor(t,i,e,s,n,r,o={},h){super(t,n,i,r,h||new sa(i,s,n,o)),this.mediator=t,this.globalDomUtilsService=i,this.jc=e,this.$container=n,this.settings=o,this.SC={[P.PlayingState]:new Do(this),[P.PausedState]:new $o(this)},this.gE=0,this._n=null,this.mE=t=>{(0,it.og)(this.$uiContainer,d.s6.UiInView,t)},this.VC.setDistanceValues({top:4,bottom:4}),this.SC[P.PausedState].enterState(),this.yE=this.$container.querySelector(`.${na.CardImage}`),this.vE=this.$container.querySelector(`.${na.CardTitle}`),this.bE=this.$container.querySelector(`.${na.AdMarkerTitleText}`),this.xE=this.$container.querySelector(`.${na.AdUiContent}`)}handleComponentEvent(t,i,e){switch(super.handleComponentEvent(t,i,e),t){case bt[bt.Volume]:this.mediator.publish(this,bt[bt.Volume],i);break;case bt[bt.Mute]:this.mediator.publish(this,bt[bt.Mute]);break;case bt[bt.Unmute]:this.mediator.publish(this,bt[bt.Unmute]);break;case So[So.CloseButton]:this.mediator.publish(this,bt[bt.Close]);break;case bt[bt.Expand]:this.mediator.publish(this,bt[bt.Expand]);break;case bt[bt.Collapse]:this.mediator.publish(this,bt[bt.Collapse]);break;default:this.mediator.publish(this,t,i)}}updateDuration(t){const i=this.getComponent(So.ProgressBar),e=this.getComponent(So.TotalDurationLabel),s=this.getComponent(So.SkipAdButton);!t&&s&&(s.setSecondsUntilSkip(0),s.tickDown(0)),t||!i?(this.elapsedTime=0,this.duration=t,i&&i.setProgress((0,_t.dQ)(0,t,0,100,0)),e&&e.setTime(t),this.wE(this.gE)):i.setProgress(100)}updateVolume(t){const i=this.getComponent(So.VolumeControls),e=this.getComponent(So.VolumeButton);i&&i.setVolume(t),e&&e.setVolume(t)}get elapsedTime(){return this.gE}set elapsedTime(t){this.gE=t,this.wE(this.gE)}showSkipAdButton(t){const i=this.getComponent(So.SkipAdButton);i&&(i.showComponent(),i.setSecondsUntilSkip(t))}hideSkipAdButton(){const t=this.getComponent(So.SkipAdButton);t&&t.hideComponent()}addPodAdMarker(t,i){(0,it.cn)(this.$uiContainer,na.InPod);(0,l.Sz)(this.$uiContainer.getElementsByClassName(na.AdMarkerInPodTextContainer)).forEach((e=>{e.innerHTML=`${t+1}/${i}`}))}removeAddPodAdMarker(){(0,it.IV)(this.$uiContainer,na.InPod)}addDurationAdMarker(){(0,it.cn)(this.$uiContainer,na.AdDurationLabel)}removeDurationAdMarker(){(0,it.IV)(this.$uiContainer,na.AdDurationLabel)}wE(t){const i=this.getComponent(So.ElapsedTimeLabel);i&&i.setTime(t);const e=this.getComponent(So.SkipAdButton);e&&e.tickDown(t);const s=this.getComponent(So.RemainingDurationLabel);if(s&&this.duration){const i=this.duration-t;i>=0&&s.setTime(i)}}hideAdLoadingScreen(){const t=this.getComponent(So.AdLoadingScreen);t&&t.hideComponent(),(0,it.IV)(this.$container,d.s6.PodLoadingScreen)}showAdLoadingScreen(t,i,e,s){const n=this.getComponent(So.AdLoadingScreen);n&&(n.showComponent(),n.setBackgroundImg(t),n.setClickUrl(i),n.setFallbackText(e,s),(0,it.cn)(this.$container,d.s6.PodLoadingScreen))}hideAdMarker(){const t=this.$container.querySelector(".cnx-ad-marker");(0,it.MV)(t)}hideProgressBar(){this.getComponent(So.ProgressBar).hideComponent()}setContinueReadingCard(t){this.yE.style.backgroundImage=`url("${t.imageSrc}")`,this.vE.innerText=t.title}addAdMarkerTitle(t){this.bE.innerHTML=t}cardHasData(){return(0,H.QM)(this.yE.style.backgroundImage)&&(0,H.QM)(this.vE.innerHTML)}showContinueReadingCard(t){(0,it.cn)(this.$container,d.s6.AdShowCard),null===this._n&&(this._n=this.globalDomUtilsService.requestAnimationFrameHelper((()=>{this._n=null,(0,it.T7)(t,{height:`${this.xE.clientHeight}px`})})))}hideContinueReadingCard(t){(0,it.IV)(this.$container,d.s6.AdShowCard),(0,it.aQ)(t,"height")}showAdMarkerTitle(){(0,it.cn)(this.$uiContainer,na.AdTitleLabel)}hideAdMarkerTitle(){(0,it.IV)(this.$uiContainer,na.AdTitleLabel)}show(){super.show(),this.jc.on(this.$uiContainer,this.mE,{threshold:.5})}hide(){super.hide();(0,it.og)(this.$uiContainer,d.s6.UiInView,!1),this.jc.off(this.$uiContainer,this.mE)}expand(){this.getComponent(So.ExpandButton).setState(Ho.expand)}collapse(){this.getComponent(So.ExpandButton).setState(Ho.collapse)}}var oa=h(3204);class ha{constructor(t){this.showExpandButton=t}get template(){return`\n            <cnx class="cnx-ui cnx-ui-ad">\n                <cnx class="cnx-ui-ad-content ${this.showExpandButton?"cnx-ad-fs":""}">\n                    <cnx class="cnx-ad-marker">\n                        <cnx class="cnx-marker-cnt-first">\n                            <cnx class="cnx-marker-cnt-second">\n                                <cnx class="cnx-ad-marker-svg">${oa}</cnx>\n                                <cnx class="cnx-ad-marker-text">1/1</cnx>\n                            </cnx>\n                            <cnx class="cnx-ad-marker-duration">[[${So.RemainingDurationLabel}]]</cnx>\n                        </cnx>\n                        <cnx class="cnx-ad-marker-title"><cnx-span class="cnx-ad-title-text"></cnx-span></cnx>\n                    </cnx>\n                    <cnx class="cnx-ad-close-button cnx-ui-btn">[[${So.CloseButton}]]</cnx>\n                    <cnx class="cnx-ad-buttons">\n                        <cnx class="cnx-ad-play-button cnx-ui-btn">[[${So.PlayButton}]]</cnx>\n                        <cnx class="cnx-ad-volume-controls">[[${So.VolumeControls}]]</cnx>\n                        <cnx class="cnx-ad-volume-button cnx-ui-btn">[[${So.VolumeButton}]]</cnx>\n                    </cnx>\n                    [[${So.SkipAdButton}]]\n                    ${this.getExpandTemplate()}\n                    <cnx class="cnx-ad-progress-bar">[[${So.ProgressBar}]]</cnx>\n                </cnx>\n                <cnx class="cnx-ad-card">\n                    <svg class="${na.CardImage}" viewBox="0 0 16 9" />\n                    <cnx class="cnx-ad-card-text">\n                        <cnx>Continue watching</cnx>\n                        <cnx class="${na.CardTitle}"></cnx>\n                        <cnx>after the ad</cnx>\n                    </cnx>\n                </cnx>\n                [[${So.AdLoadingScreen}]]\n            </cnx>\n        `.trim()}getExpandTemplate(){return this.showExpandButton?`<cnx class="cnx-ad-expand-button cnx-ui-btn cnx-hide-on-volume-hover cnx-d-sm-none">[[${So.ExpandButton}]]</cnx>`:""}}class aa{static getScaledImageUrl(t,i,e,s,n){if(t&&!(0,_t.ON)({width:i,height:e}))return(0,H.r)(n)&&(i=(0,_t.Tc)(i,n),e=(0,_t.Tc)(e,n)),s.appendParamsToUrl(`${t}${aa.getScaledImageQueryParams(i,e)}`.trim())}static getScaledImageQueryParams(t,i){return(0,_t.ON)({width:t,height:i})?"":`?width=${t}&height=${i}&fit=bounds`}static getSmartCroppedImageUrl(t,i,e,s){return(0,H.QM)(t)||(t=ze.n.endPoints.base.image),(0,_t.ON)({width:i,height:e})&&(i=140,e=80),s.appendParamsToUrl(`${t}${aa.getSmartCroppedImageQueryParams(i,e)}`)}static getSmartCroppedImageQueryParams(t,i){return(0,_t.ON)({width:t,height:i})?"":`?crop=${t}:${i},smart&width=${t}&height=${i}&format=jpeg&quality=60&fit=crop`}}class ca extends a._{constructor(t,i,e,s,n,r,o,h,a){super(),this.mediator=t,this.Oe=i,this.gu=e,this.mu=s,this.yu=n,this.vu=r,this.pl=o,this.bu=h,this.Ru=a,this._E=[],this.PE=!1,this.SE=!1,this.ns=!1,this.AE=0,this.IE=!0,this.CE=!1,this.TE=!1,this.wu=[],this.Su=new rt.x,this.Pu=new rt.x,this.ME=new rt.x,this.EE=new rt.x,this.LE=new rt.x}OE(){let t;this.wu.push(this.Ru.onLinearVpaidEvent.subscribe((i=>{switch(t=!1,i.type){case k.fI.AdLoaded:this.CE=this.RE(i.payload),this.CE&&(i.payload.payload.adLoadedData.skipOffset=this.Oe.skipAdAfter);break;case k.fI.AdPaused:this.FE.changeState(P.PausedState);break;case k.fI.AdPlaying:this.FE.changeState(P.PlayingState);break;case k.fI.AdImpression:this.$E(i.payload);break;case k.fI.AdSkipped:this.jE(r.ProtoAdClickTypeEnum.AdSkipClick),this.VE(),t=!0;break;case k.fI.AdStopped:case k.fI.AdError:if(this.NE())return;this.VE(),t=!0;break;case k.fI.AdClickThru:this.jE(r.ProtoAdClickTypeEnum.AdClickThrough)}this.IE&&(this.Pu.next(i),this.UE(i)),this.IE=!0,t&&(this.ns=!1,this.FE.changeState(P.PausedState))}))),this.subscribe(bt[bt.Volume],this.FE,(({payload:t})=>{this.setVolume(t),this.jE(r.ProtoAdClickTypeEnum.VolumeClick)})),this.subscribe(bt[bt.Play],this.FE,(()=>{this.jE(r.ProtoAdClickTypeEnum.PlayClick),this.play()})),this.subscribe(bt[bt.Pause],this.FE,(()=>{this.jE(r.ProtoAdClickTypeEnum.PauseClick),this.pause()})),this.subscribe(bt[bt.Expand],this.FE,(()=>{this.jE(r.ProtoAdClickTypeEnum.FullScreenClick),this.LE.next(bt.Expand)})),this.subscribe(bt[bt.Collapse],this.FE,(()=>{this.jE(r.ProtoAdClickTypeEnum.ExitFullScreenClick),this.LE.next(bt.Collapse)})),this.subscribe(bt[bt.Close],this.FE,(()=>{this.EE.next({type:c.Uh.UserInteraction,payload:{playback:!1}}),this.ME.next({type:bt.Close})})),this.subscribe(bt[bt.Mute],this.FE,(()=>{this.setVolume(0),this.jE(r.ProtoAdClickTypeEnum.MuteClick)})),this.subscribe(bt[bt.Unmute],this.FE,(()=>{this.setVolume(1),this.jE(r.ProtoAdClickTypeEnum.UnmuteClick)})),this.subscribe(bt[bt.SkipAd],this.FE,(()=>this.HE()))}UE(t){switch(t.type){case k.fI.AdPaused:this.Su.next({type:N.PauseLinearEvent});break;case k.fI.AdPlaying:this.Su.next({type:N.ResumeLinearEvent});break;case k.fI.AdImpression:this.Su.next({type:N.ShowLinearEvent,payload:t.payload});break;case k.fI.AdSkipped:this.Su.next({type:N.SkipLinearEvent});break;case k.fI.AdStopped:this.Su.next({type:N.HideLinearEvent});break;case k.fI.AdError:this.inImpression&&this.Su.next({type:N.HideLinearEvent})}}$E(t){var i;this.qE(),this.updateContinueReadingCard(),t.payload.adDuration=null===(i=this.Ru.getCurrentAdMetadata(lt.LINEAR))||void 0===i?void 0:i.duration,t.payload.adDuration||this.PE||this.show(),this.PE=!0,this.ns=!0,this.CE&&this.zE(),t.payload.adDuration?this.FE.addDurationAdMarker():this.FE.removeDurationAdMarker(),this.FE.updateDuration(t.payload.adDuration),this.FE.changeState(P.PlayingState),this.WE=t.payload.clickThroughUrl,this.GE(t.payload.selectedAdSlot),this.yu.getTotalNumberOfSlots()>1?this.FE.addPodAdMarker(this.yu.getCurrentSlotIndex(),this.yu.getTotalNumberOfSlots()):this.FE.removeAddPodAdMarker()}JE(t=!1){const i=(e=this.Oe,s=this.vu.config,{logoUrl:e.logoUrl,isMobile:s.isMobile,closeButtonMode:e.closeButtonMode,floatingCloseButtonMode:e.floatingSettings.floatingCloseButtonMode,isCloseButton:e.isCloseButton,uiComponentsVisibility:e.uiComponentsVisibility,sharingDestinations:e.sharingDestinations});var e,s;this.FE=new ra(this,this.vu.services.GlobalDomUtilsService,this.vu.services.ViewabilityService,this.vu.services.InteractionService,this.gu,new ha(t).template,i),this.FE.hide()}QE(){this.dI=this.YE(),this.XE(this.dI),this._E.push(this.dI)}YE(t=""){return this.vu.services.GlobalDomUtilsService.createElementByString(`<div class= "cnx-ad-container cnx-full-height ${t}"></div>`)}XE(t){this.gu.appendChild(t)}zE(){this.FE.showSkipAdButton(this.Oe.skipAdAfter)}jE(t){var i;const e=null===(i=this.Ru)||void 0===i?void 0:i.getCurrentAdMetadata(lt.LINEAR);if(!e)return;const{advertiserLineItemId:s,publisherLineItemId:n}=e,r=this.Ru.getCurrentAdBreakType();this.vu.services.TrackingService.trackAdClick({advertiserLineItemId:s,publisherLineItemId:n,adBreakType:r,type:t})}RE(t){var i;if(t.payload.adLoadedData.skipOffset&&t.payload.adLoadedData.skipOffset>=0)return!1;const e=null===(i=this.Ru)||void 0===i?void 0:i.getCurrentAdMetadata(lt.LINEAR);return!!e&&j(e.duration,this.Oe)}GE(t){this._E.filter((i=>i!==t)).forEach((t=>{(0,it.cn)(t,d.Gj.Hide)}))}VE(){this._E.forEach((t=>{(0,it.IV)(t,d.Gj.Hide)}))}ZE(){this.TE=!1,this.FE.hideAdLoadingScreen()}qE(){this.FE.hideSkipAdButton()}start(t,i=!1){try{this.JE(i),this.QE(),this.setVolume(t),this.OE()}catch(t){(0,s.n)({callStack:t.stack,level:s.D.CRITICAL,exception:t.message,message:"linearAdhandler_start"})}}getVolume(){return this.AE}hide(){(0,it.IV)(this.gu,d.s6.Ad,d.s6.AdOverlayType),this.FE.hide()}show(){var t,i;const e=[d.s6.Ad],s=null===(i=null===(t=this.Ru)||void 0===t?void 0:t.getCurrentAdMetadata(lt.LINEAR))||void 0===i?void 0:i.adType;s===r.ProtoAdType.Overlay&&e.push(d.s6.AdOverlayType),this.KE=s,(0,it.cn)(this.gu,...e),this.FE.show(),this.FE.updateVolume(this.AE),this.ZE()}setVolume(t){this.AE=t,this.Ru.setAdVolume(lt.LINEAR,t),this.FE&&this.FE.updateVolume(t),this.EE.next({type:c.Uh.UserInteraction,payload:{volume:!0}}),this.ME.next({type:bt.Volume,payload:{volume:t}})}resizeAd(t,i){this.inImpression&&(this.updateContinueReadingCard(),this.updateShowAdMarkerTitle())}adStateChange(t,i){this.Ru.onAdStateChange(lt.LINEAR,t,i)}getMainAdContainerWidth(){return this.Ru.getMainAdContainerWidth(lt.LINEAR)}resumeWithoutUserInteraction(){this.inImpression&&this.Ru.resumeAd(lt.LINEAR,!1)}play(){if(!this.inImpression)return;this.Ru.resumeAd(lt.LINEAR,!0),this.EE.next({type:c.Uh.UserInteraction,payload:{playback:!0}})}tB(t){if((0,ns.Ph)("cnxShowAdCard",this.vu.config.pageUrl))return!0;let i=!1;if(t.adType===r.ProtoAdType.Video){const e=this.gu.clientWidth*(t.heightRatio/t.widthRatio);i=this.gu.clientHeight-e>=76}return t.adType===r.ProtoAdType.Overlay&&(i=this.gu.clientHeight-t.height>=76),i}updateContinueReadingCard(){const t=this.Ru.getCurrentAdMediaSize(lt.LINEAR);(0,H.$K)(t)&&(this.tB(t)?this.FE.showContinueReadingCard(this.dI):this.FE.hideContinueReadingCard(this.dI))}updateShowAdMarkerTitle(){this.SE&&this.gu.clientWidth>=320?this.FE.showAdMarkerTitle():this.FE.hideAdMarkerTitle()}setContinueReadingCard(t){this.FE.setContinueReadingCard({imageSrc:aa.getSmartCroppedImageUrl(t.imageSrc,270,150,this.pl),title:t.title})}hideContinueReadingCard(){this.FE.hideContinueReadingCard(this.dI)}setAdMarkerTitle(t){this.FE.addAdMarkerTitle(t),this.SE=!0,this.gu.clientWidth>=320&&this.FE.showAdMarkerTitle()}hideAdMarkerTitle(){this.FE.hideAdMarkerTitle()}pause(){if(!this.inImpression)return;this.Ru.pauseAd(lt.LINEAR,!0),this.EE.next({type:c.Uh.UserInteraction,payload:{playback:!1}})}stopAd(t){if(!this.inImpression)return;const i=()=>{this.Pu.next({type:k.fI.AdStopped,payload:{payload:{adType:r.ProtoAdType.Video}}}),this.Su.next({type:N.HideLinearEvent}),this.IE=!1};this.Ru?(i(),this.Ru.stopAd(lt.LINEAR,t)):this.inAdPodLoadingState&&i()}HE(){this.Ru&&this.inImpression?this.Ru.skipAd(lt.LINEAR):this.TE&&(this.Pu.next({type:k.fI.AdSkipped}),this.ZE())}enterAdPodLoadingState(){this.TE=!0;const{width:t,height:i}=this.Ru.getAdContainerSize(this.KE);this.FE.showAdLoadingScreen(aa.getSmartCroppedImageUrl(this.iB,t,i,this.pl),this.WE,this.yu.getNextSlotIndex(),this.yu.getTotalNumberOfSlots())}setAdLoadingBackgroundUrl(t){this.iB=t}destroy(){var t;this.FE&&this.unsubscribeAll(this.FE),(0,Pt.i)(this.wu),null===(t=this.FE)||void 0===t||t.destroy()}get onVpaidEvent(){return this.Pu.asObservable()}get onUiComponentEvent(){return this.ME.asObservable()}get onExperienceEvent(){return this.EE.asObservable()}get onLinearEvent(){return this.Su.asObservable()}get adUserInterface(){return this.FE}get adContainer(){return this.dI}get secondaryAdContainer(){return this.Qu}get firstAdShown(){return this.PE}get inImpression(){return this.ns}get adInWin(){return this.Ru.isAdInWin(lt.LINEAR)}get inAdPodLoadingState(){return this.TE}get onFullcreenChange(){return this.LE.asObservable()}}class la extends ca{eB(){this.Qu=this.YE(ro),this.XE(this.Qu),this._E.push(this.Qu)}QE(){super.QE(),this.eB()}GE(t){super.GE(t),t===this.Qu&&(0,it.cn)(this.gu,d.s6.AdFullSize)}HE(){super.HE(),this.Ru.userInteraction(!0)}NE(){return!1}updateContinueReadingCard(){const t=this.Ru.getCurrentAdMediaSize(lt.LINEAR);(0,H.$K)(t)&&(this.tB(t)?this.FE.showContinueReadingCard(this.dI):this.FE.hideContinueReadingCard(this.dI))}}class da extends Et{Du(){const t={adSourceSettings:this.Oe.lineItemSettings,outstreamPlayer:!1,pauseAdWhenFinished:this.Oe.pauseAdWhenFinished,loopAdWhenFinished:this.Oe.loopAdWhenFinished,skipPlayerSettings:{skipAdAfter:this.Oe.skipAdAfter,skipMin:this.Oe.skipMin,skippability:this.Oe.skippability},adPlaybackMode:this.Oe.adPlaybackMode,amazonTamSlotId:this.Oe.amazonTamSlotId,prebidJsSupplyChain:this.Oe.supplyChainSettings,canPrefetch:!0};return new Jr(t,this.bu,this.yu)}zu(t,i){return[{container:this.Wu,width:this.Wu.offsetWidth,height:this.Wu.offsetHeight,type:r.ProtoAdType.Overlay},{container:this.Qu,width:this.Qu.offsetWidth,height:this.Qu.offsetHeight,type:r.ProtoAdType.Video}]}Vu(){return new la(this,this.Oe,this.gu,this.mu,this.yu,this.vu,this.pl,this.bu,this.Ru)}Hu(){}}const ua={ProgressBarItemClicked:"progressBarItemClicked",CallToAction:"callToAction",CloseButtonClicked:"closeButtonClicked",GeneralClickInteraction:"generalClickInteraction"},pa={ChangeSlide:"changeSlide",ContentStart:"contentStart",ContentComplete:"contentComplete",LayoutChanged:"layoutChanged"},fa=Object.assign(Object.assign({},c.dP),{ContentHandlerReady:"contentHandlerReady",NewStory:"newStory",ContentStart:"ContentStart",ContentEnd:"ContentEnd"}),ga="slideTransitionStart",ma="slideChanged",ya="slideTransitionEnd",va="slideTimeUpdate",ba="slideCycleEnd",xa=Object.assign(Object.assign({},pa),ua);class wa{constructor(t,i=0){this.sB=t,this.setCurrentSlide(i)}nB(t=this.sB.indexOf(this.rB)){return $(this.sB,t)}get currentSlide(){return this.rB}getCurrentThumbnailUrlParams(t,i){return this.rB.media.getThumbnailUrlParams(t,i)}getCurrentMetadata(){return this.rB.metadata}setCurrentSlide(t){this.rB=this.sB[t]}get currentSlideIndex(){return this.nB().currentIndex}get nextSlideIndex(){return this.nB().nextIndex}get prevSlideIndex(){return this.nB().prevIndex}get firstSlideIndex(){return this.nB().firstIndex}get lastSlideIndex(){return this.nB().lastIndex}get slides(){return this.sB}get nextSlide(){return this.slides[this.nextSlideIndex]}get prevSlide(){return this.slides[this.prevSlideIndex]}getAdjacentSlides(t=this.nB().currentIndex){const i=[];for(let e=0,s=t,n=t;e<2;e++)s=this.nB(s).nextIndex,n=this.nB(n).prevIndex,i.push(this.sB[n],this.sB[s]);return(0,l.gX)(i)}}var _a;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(_a||(_a={}));class Pa extends a._{constructor(t,i){super(),this.mediator=t,this.oB=i,this.inTransition=!1,this.hB=0,this.aB=null,this.cB=!1,this.lB=400,this.dB=!0,this.uB=()=>{clearTimeout(this.aB),this.aB=null,this.cB=!1,this.pB(),this.hB=this.fB(this.gB),this.mediator.publish(this,ya),this.mB()},this.yB=t=>{t.stopPropagation();t.target.parentElement===this.oB&&this.vB()&&(this.aB=setTimeout((()=>{this.cB&&this.bB()}),this.lB))},this.xB=t=>{t.stopPropagation();t.target.parentElement===this.oB&&this.inTransition&&this.cB&&this.vB()&&this.bB()},this.wB=(0,l.Sz)(this.oB.childNodes),this.oB.addEventListener("transitionstart",this.yB),this.oB.addEventListener("transitionend",this.xB)}destroy(){clearTimeout(this.aB),this.aB=null,this.oB.removeEventListener("transitionend",this.xB),this.oB.removeEventListener("transitionstart",this.yB)}setCurrentSlide(t,i,e=!0){this.gB=t,this.dB||(e=!1),e&&!this._B(this.gB)&&this.PB()&&this.dB?this.inTransition||(this.hB<this.fB(this.gB)?this.SB(i):this.SB(_a.Left)):this.AB()}offsetSlides(t,i){this.inTransition||((0,it.cn)(i,d.PK.NextSlide),this.pB(),this.IB(t))}removeNextClass(t){t.forEach((t=>{(0,it.IV)(t,d.PK.NextSlide)}))}cleanLastSlide(t,i){(0,it.aQ)(t,"transform"),(0,it.IV)(i,d.PK.NextSlide)}setAnimationAllowed(t){this.dB=t}IB(t){(0,it.T7)(this.kB(),{transform:`translate(${t}px)`})}AB(){(0,it.IV)(this.kB(),d.PK.CurrentSlide,d.PK.SlideLeft,d.PK.SlideRight),this.CB(this.fB(this.gB)),(0,it.cn)(this.gB,d.PK.CurrentSlide),this.uB()}SB(t){this.CB(this.fB(this.gB)),this.TB(),(0,it.cn)(this.gB,d.PK.NextSlide),t===_a.Right?((0,it.cn)(this.gB,d.PK.CurrentSlide),(0,it.cn)(this.kB(),d.PK.SlideLeft)):t===_a.Left&&((0,it.cn)(this.gB,d.PK.CurrentSlide),(0,it.cn)(this.kB(),d.PK.SlideRight)),(0,it.aQ)(this.kB(),"transform")}_B(t){return t===this.kB()}mB(){this.mediator.publish(this,ma)}CB(t){this.cB=!0,this.mediator.publish(this,ga,{payload:{nextIndex:t}})}PB(){return(0,H.$K)(this.kB())}fB(t){return(0,it.oG)(t,this.oB)}kB(){return this.wB[this.hB]}TB(){this.MB(),this.EB()}pB(){this.BB(),this.LB()}LB(){(0,it.cn)(this.oB,d.Gj.NoTransition)}MB(){(0,it.IV)(this.oB,d.Gj.NoTransition)}BB(){this.inTransition=!1}EB(){this.inTransition=!0}OB(){(0,it.IV)(this.kB(),d.PK.CurrentSlide,d.PK.SlideLeft,d.PK.SlideRight),(0,it.L_)(this.gB,d.PK.NextSlide,d.PK.CurrentSlide)}bB(){this.OB(),this.uB()}vB(){return(0,it.pv)(this.kB(),d.PK.SlideLeft)||(0,it.pv)(this.kB(),d.PK.SlideRight)}}class Sa extends a._{constructor(t,i,e,s,n,r){super(),this.mediator=t,this._m=i,this.RB=e,this.DB=s,this.FB=n,this.$B=r,this.jB=!1,this.VB=[],this.NB=!1,this.UB=()=>{this.goToNextSlide()},this.HB=()=>{this.mediator.publish(this,va,{payload:{elapsedTime:this.ny.timeElapsed,duration:this.qB.currentSlide.media.duration}})},this.zB=this._m.createElementByString(`<cnx class="${to}"></cnx>`),this.DB.appendChild(this.zB),this.WB()}GB(){this.RB.on((t=>{this.NB=t,this.JB.setAnimationAllowed(t)}))}QB(t=_a.Right){this.JB.setCurrentSlide(this.qB.currentSlide.$container,t)}YB(){let t;this.qB.currentSlide.load(),t=this.$B?[...this.qB.slides]:[...this.qB.getAdjacentSlides()],t.forEach((t=>t.load()))}XB(){this.JB=new Pa(this,this.zB),this.subscribe(ga,this.JB,(({payload:{nextIndex:t}})=>{this.NB&&this.ny.disable(),this.mediator.publish(this,ga,{payload:{nextSlide:this.qB.slides[t]}})})),this.subscribe(ma,this.JB,(()=>{this.ny.reset(this.qB.currentSlide.media.duration),this.qB.slides.forEach((t=>t.media.reset()));const t={payload:{index:this.qB.currentSlideIndex}};this.mediator.publish(this,ma,t),this.jB?this.qB.currentSlide.media.play():this.pause()})),this.subscribe(ya,this.JB,(()=>{this.mediator.publish(this,ya)}))}WB(){const t=ji.getGlobalContainer().resolve(se);this.ny=new Ee(t,0,100),this.ny.onTimeElapsed.subscribe(this.UB),this.ny.onTimeUpdate.subscribe(this.HB)}ZB(t){this.VB=t;const i=this.KB(t),e=t.map((t=>{const e=this.FB.getSlide(t,this,i);return this.subscribe(ua.CallToAction,e,(()=>{this.mediator.publish(this,ua.CallToAction)})),this.relay(ua.GeneralClickInteraction,e,this,this.mediator),this.subscribe(bt[bt.Next],e,(()=>{this.mediator.publish(this,bt[bt.Next])})),e}));this.qB=new wa(e),this.ny.reset(this.qB.currentSlide.media.duration),this.zB.innerHTML="",this.qB.slides.forEach((t=>{(0,it.jG)(t.$container,this.zB),this.relay(O,t.media,this,this.mediator)}))}KB(t){const i=t.map((t=>t.slideDuration)).reduce(((t,i)=>t+i),0);return(0,H.r)(i)?Math.ceil(i/I.Y0):1}tL(){const t=this.qB.getAdjacentSlides().map((t=>t.$container));this.JB.removeNextClass(t)}iL(t){return(t>0?this.qB.prevSlide:this.qB.nextSlide).$container}getNextSlide(){return this.qB.nextSlide}setCurrentSlide(t,i){this.JB.inTransition||(this.qB.currentSlide&&this.qB.currentSlide.media.pause(),this.qB.setCurrentSlide(t),this.YB(),this.QB(i))}getCurrentSlide(){if(this.qB)return this.qB.currentSlide}getCurrentThumbnailUrlParams(t,i){if(this.qB)return this.qB.getCurrentThumbnailUrlParams(t,i)}getCurrentMetadata(){if(this.qB)return this.qB.getCurrentMetadata()}goToNextSlide(){if(this.qB.currentSlideIndex===this.qB.lastSlideIndex)return this.JB.cleanLastSlide(this.getCurrentSlide().$container,this.getNextSlide().$container),void this.mediator.publish(this,ba);this.setCurrentSlide(this.qB.nextSlideIndex,_a.Right)}goToPrevSlide(){this.setCurrentSlide(this.qB.prevSlideIndex,_a.Left)}resetSlider(){this.setCurrentSlide(this.qB.firstSlideIndex)}setVolume(t){this.qB&&this.qB.slides.forEach((i=>{i.media.type===r.ProtoMediaTypeEnum.Video&&(i.media.volume=t)}))}play(){this.jB=!0,this.ny.start(),this.qB.currentSlide.media.play()}pause(){this.jB=!1,this.ny.stop(),this.qB.currentSlide.media.pause()}stop(){this.qB.setCurrentSlide(this.qB.firstSlideIndex),this.YB(),this.pause(),this.JB.setCurrentSlide(this.qB.currentSlide.$container,null,!1)}get remainingTime(){return this.ny.timeRemaining}setQuality(t){this.qB.slides.forEach((i=>{if(i.media.type===r.ProtoMediaTypeEnum.Video){const e={height:i.media.getClosestSourceQuality(t.height).videoHeight,quality:t.quality};i.media.setQuality(e)}}))}getQuality(){const{currentSlide:t}=this.qB;if(t.media.type===r.ProtoMediaTypeEnum.Image)return;const{getClosestSourceQuality:i,currentQuality:e}=t.media;return i(e.height).videoHeight}start(t){try{this.ZB(t),this.XB(),this.GB()}catch(t){(0,s.n)({message:"SlidesManager_start",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}offsetSlides(t){if(this.tL(),0===t)return;const i=this.iL(t);this.JB.offsetSlides(t,i)}destroy(){this.ny.disable(),this.JB&&this.JB.destroy()}get isPlaying(){return this.jB}onPlayerContainerResize(){(0,H.$K)(this.qB)&&(0,l.BZ)(this.qB.slides)&&this.qB.slides.forEach((t=>t.media.onSlideResizeCallback()))}get slides(){return(0,H.$K)(this.qB)&&(0,l.BZ)(this.qB.slides)?this.qB.slides:[]}get currentSlideIndex(){return(0,H.$K)(this.qB)?this.qB.currentSlideIndex:0}updateCapabilityMetadata(t,i){if(!(0,H.$K)(this.qB)||!(0,l.BZ)(this.qB.slides))return;const e=this.qB.slides[t];e&&e.updateCapabilityMetadata(i)}get slidesMetadata(){return this.VB}}var Aa=h(5648);class Ia{constructor(t){this.eL=t}get template(){return`\n        <cnx class="cnx-ui cnx-ui-ps">\n            [[${So.OverlayComponent}]]\n            <cnx class="${Zr}">\n                [[${So.ClickToPlayButton}]]\n                <cnx class="cnx-ui-ratio-container">\n                    <cnx class="cnx-ui-ps-head">\n                    <cnx class="cnx-ui-ps-nav">\n                        ${this.sL()}\n                    </cnx>\n                    <cnx class="cnx-ui-ps-subhead cnx-ui-ps-side-mg">\n                        <cnx class="cnx-ui-ps-branding">\n                            [[${So.TopTitle}]]\n                        </cnx>\n                        <cnx class="cnx-ui-ps-btns">\n                            <cnx class="cnx-ui-btn ${d.s6.ContextController}">[[${So.MoreButton}]]</cnx>\n                            <cnx class="cnx-ui-btn cnx-close-button">[[${So.CloseButton}]]</cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n                <cnx class="cnx-ui-ps-controls--wrapper cnx-ui-ps-side-mg">\n                    <cnx class="cnx-ui-ps-controls">\n                        <cnx class="cnx-ui-btn cnx-ui-ps-nav-btn">[[${So.PreviousButton}]]</cnx>\n                        <cnx class="cnx-ui-btn">[[${So.PlayButton}]]</cnx>\n                        <cnx class="cnx-ui-btn cnx-ui-ps-nav-btn">[[${So.UpNextButton}]]</cnx>\n                        <cnx class="cnx-ui-btn">[[${So.VolumeButton}]]</cnx>\n                    </cnx>\n                </cnx>\n                <cnx class="cnx-ui-ps-footer cnx-ui-ps-side-mg"></cnx>\n                [[${So.PlayspaceSettingsMenu}]]\n                </cnx>\n            </cnx>\n            <cnx class="${Kr}">\n                <cnx class="cnx-ui-ps-content cnx-ui-ps-side-mg">\n                    ${this.nL()}\n                </cnx>\n            </cnx>\n            [[${So.Loader}]]\n        </cnx>\n        `.trim()}sL(){return this.eL.disableStoryProgressBarRendering?"":`[[${So.PlayspaceProgressBar}]]`}nL(){return this.eL.disableTitleRendering?"":`[[${So.SlideTitle}]]`}}class ka extends _h{constructor(){super(...arguments),this.rL=100,this.eventList=[ko.Z[ko.Z.Scroll]],this.isEndState=!1,this.oL=()=>{this.mediator.publish(this,ua.ProgressBarItemClicked,{payload:this.nC})},this.hL=t=>{t.stopPropagation()}}aL(){const t=this._r.getComputedTranslateX(this.WT),i=this.VT;return(0,_t.dQ)(0,i,0,100,t)}lL(t){(0,it.T7)(this.WT,{transition:`transform ${t}ms linear`})}dL(){(0,it.T7)(this.WT,{transition:"none"})}startProgress(t){this.lL(t),this.setProgress(this.rL)}pauseProgress(){this.setProgress(this.aL()),this.dL()}forceEndState(){this.dL(),super.forceEndState(),this.isEndState=!0}forceStartState(){this.dL(),super.forceStartState(),this.isEndState=!1}initComponent(){super.initComponent();const t={click:this.oL,interactionstart:this.hL};this.sC.register(this.nC,this,this.sC,t),this.Yt&&(this.subscribe(ko.Z[ko.Z.Click],this.sC,(()=>{this.oL()})),this.relay(ko.Z[ko.Z.Scroll],this.sC,this,this.mediator))}destroy(){super.destroy()}onResize(t,i){this.setProgress(this.aL()),this.dL(),i&&(this.setProgress(this.rL),this.lL(t))}}class Ca extends To{constructor(){super(...arguments),this.eventList=[ua.ProgressBarItemClicked,ko.Z[ko.Z.Scroll]],this.sB=[],this.uL=({payload:t})=>{const i=(0,it.oG)(t,this.nC);this.mediator.publish(this,ua.ProgressBarItemClicked,{payload:i})}}pL(t){const i=this.sB[t];i.forceStartState(),i.startProgress(this.fL)}startProgress(){if((0,H.$K)(this.hB)){for(let t=0;t<this.sB.length;t++)t<this.hB?this.sB[t].forceEndState():(t!==this.hB||this.sB[t].isEndState)&&this.sB[t].forceStartState();this.sB[this.hB].startProgress(this.fL)}}pauseProgress(){this.sB[this.hB]&&this.sB[this.hB].pauseProgress()}resetProgress(){(0,H.$K)(this.hB)&&this.sB.forEach((t=>t.forceStartState()))}setSlides(t){if(!t)throw new Error("PlayspaceProgressBar: no slides provided");for(let i=0;i<t;i++){const t=new ka(this,this._r,this.sC,'<cnx class="cnx-progress-bar"><cnx class="cnx-progress-rail-container"><cnx class="cnx-progress-rail"></cnx><cnx class="cnx-progress-fill cnx-color-accent"></cnx><cnx class="cnx-progress-follow"></cnx></cnx><cnx class="cnx-progress-hitarea"></cnx></cnx>',this.Yt);this.subscribe(ua.ProgressBarItemClicked,t,this.uL),this.relay(ko.Z[ko.Z.Scroll],t,this,this.mediator),this.sB.push(t),t.initComponent(),this.nC.appendChild(t.getContainer())}}setDuration(t){this.fL=t}setCurrentIndex(t){t===this.hB&&this.pL(t),this.hB=t}initComponent(){}destroy(){super.destroy(),this.sB.forEach((t=>t.destroy()))}resizeProgressBar(t,i){this.sB.forEach(((e,s)=>{s<this.hB&&e.forceEndState(),s===this.hB&&e.onResize(t,i)}))}}class Ta extends fh{constructor(t,i,e,s,n){super(t,i,e,s,{event:bt[bt.Quality],name:n,icon:Ko,options:[]}),this.mediator=t,this.lM={height:360,quality:_.Auto},this.dM=!0}handleItemsEvents(t){if(t===bt[bt.Quality])return;this.dM=t===_[_.Auto];const i={height:this.dM?this.lM.height:parseInt(t,10),quality:this.dM?_.Auto:_.Strict};this.mediator.publish(this,this.event,{payload:i})}gL(){let t=null;if(this.dM)t=_[_.Auto];else{const i=this.mL.find((t=>t.event===this.lM.height.toString()));i&&(t=i.name)}t&&this.changeLabel(t)}updateQuality(t,i=!1){(0,l.BZ)(this.uM)&&(this.dM=t.quality===_.Auto,this.lM.quality=t.quality,this.lM.height=(0,_t.DE)(t.height,this.uM.map((t=>t.videoHeight))),this.gL(),Ah(this.mL,this.lM,this.dM),this.isActive=i)}updateAvailableQualities(t){this.mL=[],this.uM=t,this.mL=this.uM.map((t=>new Jo(this,this._r,this.sC,this.Yt,{name:`${t.videoHeight}p`,activeEvent:t.videoHeight.toString(),label:t.isHD?"HD":void 0}))),this.mL.push(new Jo(this,this._r,this.sC,this.Yt,{name:_[_.Auto],activeEvent:_[_.Auto]})),this.gL(),Ah(this.mL,this.lM,this.dM),this.buildContextMenu(this.mL)}}var Ma=h(3409),Ea=h(9479);const Ba="About Connatix",La="Video Settings",Oa="Full Screen";class Ra extends Go{constructor(){super(...arguments),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!1}initComponent(){this.yL=new Jo(this,this._r,this.sC,this.Yt,{activeEvent:bt[bt.Expand],eventList:[bt[bt.Expand],bt[bt.Collapse]],icon:Ma,name:Oa}),this.vL=new Ta(this,this._r,this.sC,this.Yt,La),this.buildContextMenu([this.vL,this.yL,new Jo(this,this._r,this.sC,this.Yt,{activeEvent:bt[bt.AboutClick],name:Ba,icon:ch,label:t.g.version?`V${t.g.version}`:"dev"})])}setExpand(){this.yL.event=bt[bt.Collapse],this.yL.changeItemIcon(Ea)}setCollapse(){this.yL.event=bt[bt.Expand],this.yL.changeItemIcon(Ma)}showExpandButton(){this.yL.showComponent()}hideExpandButton(){this.yL.hideComponent()}updateQualityMenu(t){(0,l.BZ)(t)?(this.vL.updateAvailableQualities(t),this.vL.showComponent()):this.vL.hideComponent()}updateQuality(t,i=!1){this.vL.updateQuality(t,i)}}var Da,Fa;!function(t){t[t.VolumeControls=0]="VolumeControls",t[t.PlaybackControls=1]="PlaybackControls",t[t.PlaylistControls=2]="PlaylistControls",t[t.CtaButton=3]="CtaButton",t[t.SlideTitle=4]="SlideTitle",t[t.TopLogo=5]="TopLogo",t[t.TopStoryTitle=6]="TopStoryTitle",t[t.TopSlideTitle=7]="TopSlideTitle",t[t.TextLabel=8]="TextLabel"}(Da||(Da={})),function(t){t[t.Default=0]="Default",t[t.Description=1]="Description",t[t.Quote=2]="Quote",t[t.Bullet=3]="Bullet",t[t.Cover=4]="Cover",t[t.Instagram=5]="Instagram"}(Fa||(Fa={}));const $a="cnx-cta-btn-timer-label",ja="cnx-svg-circle-stroke",Va="cnx-cta-btn-text",Na="cnx-cta-btn-content",Ua="cnx-cta-align-with-content";class Ha extends Mo{constructor(t,i,e,s,n,r,o){super(t,i,e,n.template,r),this.Er=s,this.bL=n,this.xL=o,this.eventList=[ua.CallToAction,ko.Z[ko.Z.Scroll]],this.wL=!1,this._L=!1,this.PL=!1,this.Tr=()=>{this.SL()},this.Fm=()=>{const t=Math.round(this.ny.timeRemaining/I.s_);this.AL(t.toString())},this.IL=this.nC.querySelector(".cnx-ui-ps-cta")}startProgress(){this.wL=!0,this.ny&&(this.ny.start(),this.Fm())}pauseProgress(){this.wL=!1,this.ny&&(this.ny.stop(),this.Fm())}changeLabel(t){(0,H.QM)(t)&&(this.TM.innerHTML=t.substring(0,16))}initComponent(){super.initComponent(),this.TM=this.nC.querySelector(`.${Va}`),this.MT=this.nC.querySelector(`.${Na}`)}onSlideTimeUpdate(){}onSlideTransitionEnd(){}onSlideTransitionStart(t){if(!(0,l.BZ)(t))return;const i=t.find((({type:t})=>t===Da.CtaButton));if(!i||!i.metadata)return;const{url:e,label:s,duration:n,ctaAlignToContent:r,ctaAlignToFooter:o,title:h}=i.metadata;this._L=o,this.kL(e,h),this.changeLabel(s);const a=(0,H.r)(n);this.CL(a),this.TL(a,n),this.EL(r),this.BL()}setFooterElement(t){this.LL=t,this.BL()}handleCapabilities(t){this.onSlideTransitionStart(t)}hideComponent(){super.hideComponent(),this.OL()}EL(t){t?(0,it.cn)(this.IL,Ua):(0,it.IV)(this.IL,Ua)}onClickHandler(){const t={payload:null};(0,H.QM)(this.RL)&&(t.payload=this.RL),this.mediator.publish(this,ua.CallToAction,t)}BL(){this.PL||this.LL&&this._L&&(this.Er.on(this.LL,this.Tr),this.PL=!0)}SL(){if(!this.LL)return void(0,it.aQ)(this.nC,"bottom");const t=(this.LL.clientHeight-this.nC.clientHeight)/2*-1;(0,it.T7)(this.nC,{bottom:`${t}px`})}CL(t){t?this.DL||this.FL():this.$L()}FL(){this.DL=this._r.createElementByString(this.bL.getTimerTemplate()),(0,it.Vt)(this.MT,this.DL),this.jL(this.DL)}jL(t){this.VL=t.querySelector(`.${$a}`),this.NL=t.querySelector(`.${ja}`)}$L(){(0,it.bX)(this.DL),this.DL=null,this.VL=null,this.NL=null}TL(t,i){t?(this.UL(),this.ny.reset(i*I.s_),this.AL(i.toString()),this.wL&&this.ny.start(),this.HL(),(0,it.T7)(this.NL,{"animation-duration":`${i}s`})):this.OL()}UL(){if(this.ny)return;const t=ji.getGlobalContainer().resolve(se);this.ny=new Ee(t),this.qL=this.ny.onTimeUpdate.subscribe(this.Fm)}OL(){this.ny&&(this.qL.unsubscribe(),this.ny.disable(),this.ny=null)}HL(){(0,it.L_)(this.NL,ja,ja,!0)}AL(t){this.VL&&(0,H.QM)(t)&&(this.VL.innerText=t)}kL(t,i){if(this.RL=t,t&&(this.IL.title=i,!this.xL)){this.IL.href=t;const i=this._r.isURLSameDomainToTop(t);this.IL.target=i?_e.bS.Top:_e.bS.Blank,this.IL.rel="nofollow"}}}var qa=h(3475),za=h(889),Wa=h(4368);class Ga{get template(){return`\n        <cnx class="cnx-ui-ps-cta-placeholder">\n            <a class="cnx-ui-ps-cta">\n                <cnx class="cnx-cta-btn cnx-color-accent">\n                    <cnx class="cnx-cta-btn-container">\n                        <cnx class="cnx-cta-btn-content">\n                            <cnx-span class="cnx-cta-btn-instagram">\n                                ${za}\n                            </cnx-span>\n                            <cnx-span class="cnx-cta-btn-text">\n                                READ MORE\n                            </cnx-span>\n                            <cnx-span class="cnx-cta-btn-arrow">\n                                ${Wa}\n                            </cnx-span>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </a>\n        </cnx>\n        `.trim()}getTimerTemplate(){return`\n            <cnx class="cnx-cta-btn-timer-container">\n                <cnx class="cnx-cta-btn-timer-loader-wrapper">\n                    ${qa}\n                    ${qa}\n                </cnx>\n                <cnx class="cnx-cta-btn-timer-label-wrapper">\n                    <cnx class="${$a}">\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class Ja extends Mo{constructor(){super(...arguments),this.eventList=[bt[bt.Play]]}onClickHandler(){this.mediator.publish(this,bt[bt.Play])}}var Qa;!function(t){t[t.TopLogo=0]="TopLogo",t[t.TopSlideTitle=1]="TopSlideTitle",t[t.TopStoryTitle=2]="TopStoryTitle"}(Qa||(Qa={}));const Ya={[Da.TopLogo]:Qa.TopLogo,[Da.TopSlideTitle]:Qa.TopSlideTitle,[Da.TopStoryTitle]:Qa.TopStoryTitle},Xa={[Qa.TopLogo]:Da.TopLogo,[Qa.TopSlideTitle]:Da.TopSlideTitle,[Qa.TopStoryTitle]:Da.TopStoryTitle},Za=[Qa.TopLogo,Qa.TopStoryTitle,Qa.TopSlideTitle];class Ka extends zh{constructor(t,i,e,s){super(t,i,e,s),this.eventList=[bt[bt.LogoClicked],ko.Z[ko.Z.Scroll]],this.zL=[],this.WL={},this.GL=this.nC.querySelector(`.${po}`)}triggerLogoAnimation(){const t=this.getComponent(So.TopLogo);t&&t.triggerLogoAnimation()}onSlideTransitionStart(t){const i=this.JL(t);this.WL=Object.assign({},i),this.QL(t)}onSlideTransitionEnd(){}onSlideTimeUpdate(t,i){}handleComponentEvent(t,i,e){this.mediator.publish(this,t,i)}YL(t){return t.map((({type:t})=>Ya[t])).filter((t=>(0,H.$K)(t)))}JL(t){return t.reduce(((t,{type:i,metadata:e})=>{switch(i){case Xa[Qa.TopStoryTitle]:if(!e.label&&!e.useFallbackLabel)return t;const i=e.label||"Top Articles";return Object.assign(Object.assign({},t),{[Qa[Qa.TopStoryTitle]]:this.XL(i,e.useTransition)});case Xa[Qa.TopSlideTitle]:return Object.assign(Object.assign({},t),{[Qa[Qa.TopSlideTitle]]:this.XL(e.label,e.useTransition)});case Xa[Qa.TopLogo]:return Object.assign(Object.assign({},t),{[Qa[Qa.TopLogo]]:Object.assign({},e)});default:return t}}),{})}XL(t,i=!1){return{useTransition:i,label:this.ZL(t)}}ZL(t){if(t)return t.length>36?`${t.substring(0,36)}...`:t}QL(t,i=!1){const e=this.YL(t),s=(0,l.V7)(Za,e),n=(0,l.V7)(e,this.zL),r=(0,l.tN)(e,this.zL);this.zL=e,this.tO(e),(0,it.Tp)(this.GL),s.forEach((t=>this.iO(t,i))),n.forEach((t=>this.eO(t,i))),r.forEach((t=>this.sO(t,i)))}tO(t){switch(!0){case this.nO(t):this.rO();break;case this.oO(t):this.hO();break;default:this.aO()}}nO(t){return t.includes(Qa.TopSlideTitle)&&t.includes(Qa.TopStoryTitle)}oO(t){const i=t.includes(Qa.TopSlideTitle)&&!t.includes(Qa.TopStoryTitle),e=!t.includes(Qa.TopSlideTitle)&&t.includes(Qa.TopStoryTitle);return i||e}rO(){(0,it.IV)(this.GL,_o),(0,it.cn)(this.GL,Po)}hO(){(0,it.IV)(this.GL,Po),(0,it.cn)(this.GL,_o)}aO(){(0,it.IV)(this.GL,Po,_o)}iO(t,i=!1){const e=this.cO(t);if(!e)return;const s=this.lO(t);i&&(s.useTransition=!1),e.hide(s)}eO(t,i=!1){const e=this.cO(t);if(!e)return;const s=this.lO(t);i&&(s.useTransition=!1),e.show(s)}sO(t,i=!1){const e=this.cO(t);if(!e)return;const s=this.lO(t);i&&(s.useTransition=!1),e.update(s)}cO(t){return this.getComponent(So[Qa[t]])}lO(t){return this.WL[Qa[t]]||{}}}var tc,ic,ec;!function(t){t.Wrapper="cnx-ui-ps__wrapper",t.Container="cnx-ui-ps__container",t.Placeholder="cnx-ui-ps__placeholder",t.Text="cnx-ui__span--text",t.Label="cnx-ui__span--label",t.Title="cnx-ui__span--title",t.VerticalLine="cnx-ui-ps__vertical-line",t.Instagram="cnx-ui-ps__slide--instagram",t.Cover="cnx-ui-ps__slide--cover",t.HighlightInner="cnx-top-title-highlight-text-inner-container",t.HighlightText="cnx-ui-ps-highlight-text"}(tc||(tc={})),function(t){t.Default="cnx-ui-ps__sliding--default",t.Basic="cnx-ui-ps__sliding--basic",t.Cover="cnx-ui-ps__sliding--cover",t.SlideIn="cnx-title-slide-in",t.SlideOut="cnx-title-slide-out"}(ic||(ic={})),function(t){t.Cover="cnx-ui-ps__title--cover",t.Quote="cnx-ui-ps__title--quote",t.Bullet="cnx-ui-ps__title--bullet",t.Default="cnx-ui-ps__title--default",t.Description="cnx-ui-ps__title--description",t.Instagram="cnx-ui-ps__title--instagram"}(ec||(ec={}));const sc="em";class nc{constructor(t,i=0,e=true){if(this.uO=t,this.pO=e,!(0,l.BZ)(this.uO))throw new Error("PlaylistManager: list was not supplied");this.setCurrentItem(i)}setCurrentItem(t){this.fO=this.uO[t]}get currentItem(){return this.fO}goToNextItem(){this.nB().nextIndex===this.nB().firstIndex&&this.pO?this.setCurrentItem(this.nB().firstIndex):this.setCurrentItem(this.nB().nextIndex)}get listLength(){return this.uO.length}get previousItem(){return this.uO[this.nB().prevIndex]}get currentItemIndex(){return this.nB().currentIndex}nB(t=this.uO.indexOf(this.fO)){return $(this.uO,t)}}class rc{constructor(t){this.gO=t}getChunks(t){return(0,yh.k0)(t)?this.mO(t):this.yO(t)}yO(t){const i=[];let e="";for(let s=0;s<t.length;s++)e+=t[s],this.vO(t[s])&&(i.push(e),e="");return e.length>0&&i.push(e),i}mO(t){try{const i=document.createElement("cnx");i.innerHTML=t;const e=[];return(0,l.Sz)(i.childNodes).forEach((t=>{t.outerHTML?e.push(t.outerHTML):e.push(...this.yO(t.nodeValue))})),e}catch(i){return(0,s.n)({message:"TextChunker_splitHtmlStringIntoWords",exception:i.message,level:s.D.INFO,callStack:i.stack},{throttle:1,sendMaxLog:!1}),[t]}}vO(t){return this.gO.some((i=>i(t)))}}const oc="cnx-aux",hc="cnx-aux-container";class ac{constructor(t){this._r=t,this.bO=new rc([t=>/\s/.test(t)])}xO(t,i){const{maxLineWidth:e,maxLines:n,minLines:r}=i,o=[...t],h=[],a=t.map((t=>t.innerHTML)).some((t=>(0,yh.Ft)(t)));if(!o.length||!(0,H.r)(e))return h;let c=0,l=-1,d=0;for(;o.length>0;){if(c=0,l++,h[l]=[],d++,d>=250){(0,s.n)({message:"Split text base line wrap infinite loop",level:s.D.INFO},{throttle:1,sendMaxLog:!1});break}for(;o[0]&&c+o[0].width<=e;)if(c+=o[0].width,h[l].push(o.shift()),d++,d>=250){(0,s.n)({message:"Split text base line wrap infinite loop",level:s.D.INFO},{throttle:1,sendMaxLog:!1});break}if(o[0]&&h.length>=n){h[l].push(...o);break}if(1===o.length&&o[0].width>e){h[l].push(...o);break}}return h.length<r&&h[0].length>4&&(h[1]=h[0].splice(-2,2)),!a&&h[l].length<2&&h.length>1&&h[l].unshift(h[l-1].pop()),h}wO(t){return t.map((t=>({innerHTML:t.nodeName.toLowerCase()===oc?t.innerHTML:t.outerHTML,width:t.getBoundingClientRect().width,height:t.getBoundingClientRect().height})))}getWordsHtml(t){if(!(0,H.QM)(t))return"";return this.bO.getChunks(t.trim()).map((t=>`<cnx-aux>${t}</cnx-aux>`)).join("")}_O(t,i){const e=t.querySelectorAll(i),s=t.clientWidth?t.clientWidth:t.getBoundingClientRect().width;(0,l.Sz)(e).forEach((t=>{const i=(0,l.Sz)(t.querySelectorAll(oc)),e=t.parentElement;if(!i.length||t.nodeType!==Node.ELEMENT_NODE)return;const n=this._r.getComputedStyle(t),r=parseInt(this._r.getComputedStyle(t,"before").getPropertyValue("width"),10),o=parseInt(n.getPropertyValue("--max-title-lines"),10),h=parseInt(n.getPropertyValue("--min-title-lines"),10),a=parseInt(n.getPropertyValue("font-size"),10),c={maxLineWidth:r||t.getBoundingClientRect().width-20,maxLines:o||15,minLines:h||1},d=this.wO(i),u=this.xO(d,c),p=this._r.createElementByString("<cnx class='cnx-ui-lines'></cnx>");p.dataset.split=s.toString(),p.dataset.split+=","+a,u.forEach((i=>{const e=t.cloneNode();(0,it.IV)(e,hc);const s=i.filter((t=>(0,H.as)(t))).map((t=>t.innerHTML));e.innerHTML+=s.join("").trim(),p.dataset.split+=","+i.length,(0,it.jG)(e,p)})),this.PO(p).lines!==this.PO(e).lines?t.classList.contains(hc)?this._r.requestAnimationFrameHelper((()=>{null!==e.parentNode&&(0,it.BE)(e,p),(0,it.bX)(e)})):this._r.requestAnimationFrameHelper((()=>{null!==t.parentNode&&(0,it.BE)(t,p),(0,it.bX)(t)})):(0,it.bX)(t)}))}brakeLongLines(t,i){const e=t.querySelectorAll(i);if(!e.length)return;const s=t.clientWidth?t.clientWidth:t.getBoundingClientRect().width,n=this.PO(e[0].parentElement);if(isNaN(n.width))return void this._O(t,i);if(n.width&&0===Math.abs(n.width-s))return;const r=t.querySelectorAll(".cnx-ui-lines[data-split]");(0,l.Sz)(r).forEach((t=>{const e=t.querySelectorAll(i),s=e[0].cloneNode(!1),n=(0,l.Sz)(e).map((t=>t.innerHTML)).join("");s.innerHTML=this.getWordsHtml(n),(0,it.cn)(s,hc),t.prepend(s)})),this._O(t,i)}PO(t){const i=t.dataset.split?t.dataset.split.split(","):[],e=i.shift();return{width:parseInt(e,10),lines:i.join("")}}}class cc extends Mo{constructor(t,i,e,s,n,r){super(t,i,e,r.template,n),this.mediator=t,this._r=i,this.Er=s,this.Yt=n,this.SO=r,this.splitTextSelector=`.${tc.Text}`,this.Tr=()=>{this._r.requestAnimationFrameHelper((()=>{this.AO.brakeLongLines(this.nC,this.splitTextSelector)}))},this.IO=i.createDocumentFragment(),this.AO=new ac(i)}get $templateFragment(){return this.IO}kO(t,i){const e=this.SO.titleTemplate(t,i);return this._r.createElementByString(e)}CO(t,i){const e=this.SO.labelTemplate(t,i);return this._r.createElementByString(e)}TO(t,i){const e=this.SO.textTemplate(t,i);return this._r.createElementByString(e)}MO(){const t=this.SO.placeholderTemplate();return this._r.createElementByString(t)}SL(){}EO(){this.resetAnimation(),(0,it.cn)(this.nC,ic.SlideIn)}BO(){this.resetAnimation(),(0,it.cn)(this.nC,ic.SlideOut)}onSlideTransitionStart(t){this.LO(t),this.resetAnimation(),this.render()}onSlideTransitionEnd(){this.EO()}onSlideTimeUpdate(t,i){}resetAnimation(){const t=[ic.SlideIn,ic.SlideOut];(0,it.IV)(this.nC,...t)}initComponent(t){super.initComponent(),this.OO=t,this.Er.on(this.OO,this.Tr)}render(){(0,it.SH)(this.nC,this.IO),(0,it.jG)(this.nC,this.OO)}setFooterElement(t){return this.LL=t,this.SL(),this.LL}destroy(){this.Er.off(this.OO,this.Tr),(0,it.bX)(this.nC),this.nC=this._r.createElementByString(this.SO.template),this.unsubscribeAll(this.sC),this.sC.unregisterAll(this)}}function lc(t,i){const e=(0,yh.hF)(t);return(0,yh.V7)((0,yh.J5)(e),i)}const dc={[Aa.ProtoPlayspaceColorSchemeEnum.Accent]:d.iu.AccentColor,[Aa.ProtoPlayspaceColorSchemeEnum.Primary]:d.iu.PrimaryColor,[Aa.ProtoPlayspaceColorSchemeEnum.Secondary]:d.iu.SecondaryColor};class uc extends cc{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this._r=i,this.Yt=n,this.SO=r,this.eventList=[],this.className=ec.Description}RO(t){return t/this.DO.listLength*(this.DO.currentItemIndex+1)}FO(t){const i=t.map(((t,i)=>{const e=this.$O(t);return(0,it.jG)(e,this.$templateFragment),0===i&&(0,it.cn)(e,"active"),Object.assign(Object.assign({},t),{shown:!1,element:e})}));this.DO=new nc(i)}jO(t){return this.CO(t.text,dc[t.colorScheme])}$O(t){return this.TO(this.AO.getWordsHtml(lc(t.text,sc)),dc[t.colorScheme])}LO(t){const{descriptionChunkList:i,label:e,labelColorScheme:s}=t,n={text:e,colorScheme:s};(0,H.QM)(n.text)&&(0,it.jG)(this.jO(n),this.$templateFragment),(0,l.BZ)(i)&&this.FO(i)}VO(){this.DO.currentItem.shown=!0,(0,it.IV)(this.DO.currentItem.element,"active"),this.DO.goToNextItem(),this._r.requestAnimationFrameHelper((()=>{this.resetAnimation(),this._r.requestAnimationFrameHelper((()=>{(0,it.cn)(this.DO.currentItem.element,"active"),this.EO()}))}))}onSlideTimeUpdate(t,i){t>=i||t>=this.RO(i)&&!this.DO.currentItem.shown&&this.VO()}}class pc{get template(){return`<cnx class="${d.iu.TitleComponent}"></cnx>`}titleTemplate(t,i){return`<cnx class="${tc.Title} ${i}">${t}</cnx>`}labelTemplate(t,i){return`<cnx class="${tc.Label} ${i} ">${t}</cnx>`}textTemplate(t,i){return`<cnx class="${tc.Text} ${i}">${t}</cnx>`}containerTemplate(){return`<cnx class="${tc.Container}"></cnx>`}placeholderTemplate(){return`<cnx class="${tc.Placeholder}"></cnx>`}wrapeprTemplate(){return`<cnx class="${tc.Wrapper}"></cnx>`}}class fc extends pc{get template(){return`<cnx class="${ic.Basic} ${d.iu.TitleComponent}"></cnx>`}textTemplate(t,i){return`<cnx class="${tc.Placeholder}">\n            <cnx class="${tc.Text} ${i}">${t}</cnx>\n        </cnx>`}}class gc extends pc{get template(){return`<cnx class="${ic.Default} ${d.iu.TitleComponent}">\n            <cnx class="${tc.VerticalLine} ${d.iu.AccentColor}"></cnx>\n        </cnx>`.trim()}textTemplate(t){return`<cnx class="${d.ed.InheritBodyFontFamily} ${tc.Text} ${d.iu.PrimaryColor} ${tc.HighlightInner} ${tc.HighlightText}">${t}</cnx>`.trim()}}class mc extends cc{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this._r=i,this.Yt=n,this.SO=r,this.className=ec.Default,this.NO=!0,this.eventList=[...this.eventList,ua.CallToAction]}LO(t){const{url:i,label:e}=t;if(i?(this.nC.setAttribute("title",i),(0,it.cn)(this.nC,d.iu.TitleLink)):(this.nC.removeAttribute("title"),(0,it.IV)(this.nC,d.iu.TitleLink)),(0,H.QM)(e)){const t=this.AO.getWordsHtml(lc(e,sc));(0,it.jG)(this.TO(t),this.$templateFragment)}}onClickHandler(){this.mediator.publish(this,ua.CallToAction)}onSlideTransitionEnd(){super.onSlideTransitionEnd(),this.NO=!0}onSlideTimeUpdate(t,i){this.NO&&i-t<1200&&(this.BO(),this.NO=!1)}destroy(){super.destroy(),this.unsubscribeAll(this.sC),this.sC.unregisterAll(this)}}class yc extends cc{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this._r=i,this.Yt=n,this.SO=r,this.eventList=[],this.className=ec.Bullet}FO(t){const i=t.map((t=>{if(!(0,H.QM)(t.title))return;const i=this.UO(t);return(0,it.jG)(i,this.$templateFragment),Object.assign(Object.assign({},t),{activated:!1,element:i,titleElement:i.firstChild,containerElement:i.querySelector(`.${tc.Container}`)})}));this.HO=new nc(i)}qO(t){const i=t.element.querySelector(`.${tc.Container}`),e=i.querySelectorAll(`.${tc.Text}`),s=(0,H.$K)(e)?e.length:0,n=(0,H.$K)(e[0])?e[0].clientHeight:0;(0,it.T7)(i,{"max-height":s*n+"px"}),t.activated=!0,(0,it.L_)(t.titleElement,d.iu.PrimaryColor,d.iu.SecondaryColor),(0,it.cn)(t.element,"active")}zO(t){const i=t.element.querySelector(`.${tc.Container}`);(0,it.aQ)(i,"max-height"),(0,it.L_)(t.titleElement,d.iu.SecondaryColor,d.iu.PrimaryColor),(0,it.IV)(t.element,"active")}WO(t){const i=this.SO.labelTemplate(t);return this._r.createElementByString(i)}UO(t){const i=this.WO(t.title),e=this.TO(this.AO.getWordsHtml(t.description)),s=this.MO();return(0,it.jG)([i,e],s),s}LO(t){const{label:i,bulletChunkList:e}=t;(0,H.QM)(i)&&(0,it.jG)(this.kO(i),this.$templateFragment),(0,l.BZ)(e)&&this.FO(e.slice(0,3))}onSlideTimeUpdate(t,i){const e=this.HO;e&&!e.currentItem.activated&&(0===e.currentItemIndex?t>=1e3&&(this.qO(e.currentItem),e.goToNextItem()):(i-1e3)/e.listLength*e.currentItemIndex+1e3<t&&(this.zO(e.previousItem),this.qO(e.currentItem),e.goToNextItem()))}}class vc extends pc{get template(){return`<cnx class="${ic.Basic} ${d.iu.TitleComponent}"></cnx>`}titleTemplate(t){return`<cnx class="${tc.Title} ${d.iu.AccentColor}">${t}</cnx>`}labelTemplate(t){return`<cnx class="${tc.Label} ${d.iu.PrimaryColor}">\n            <cnx class="${tc.VerticalLine} ${d.iu.AccentColor}"></cnx>\n            ${t}\n        </cnx>`.trim()}textTemplate(t){return`<cnx class="${tc.Container}">\n                    <cnx class="${tc.Text}  ${d.iu.SecondaryColor}">${t}</cnx>\n                </cnx>\n        `.trim()}}class bc extends cc{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this._r=i,this.Yt=n,this.SO=r,this.eventList=[],this.className=ec.Cover,this.splitTextSelector=`.${tc.Text}, .${tc.Title}`,this.Tr=()=>{this._r.requestAnimationFrameHelper((()=>{if(this.AO.brakeLongLines(this.nC,this.splitTextSelector),this.LL){const t=this.LL.clientHeight/2*-1;(0,it.T7)(this.labelElement,{bottom:`${t}px`,position:"absolute"})}}))}}LO(t){let{coverChunk:{title:i,subtitle:e}}=t;const{label:s}=t;if((0,H.QM)(i)&&(i=lc(i,sc),(0,it.jG)(this.kO(this.AO.getWordsHtml(i)),this.$templateFragment)),(0,H.QM)(e)&&(e=lc(e,sc),(0,it.jG)(this.TO(this.AO.getWordsHtml(e)),this.$templateFragment)),(0,H.QM)(s)){if(this.labelElement=this.CO(s),this.LL){const t=(this.LL.clientHeight-this.nC.clientHeight)/2*-1;(0,it.T7)(this.labelElement,{bottom:`${t}px`,position:"absolute"})}(0,it.jG)(this.labelElement,this.$templateFragment)}}}class xc extends pc{get template(){return`<cnx class="${ic.Cover} ${d.iu.TitleComponent}"></cnx>`}titleTemplate(t){return`<cnx class="${tc.Placeholder}">\n            <cnx class="${tc.Title} ${d.iu.PrimaryColor}">${t}</cnx>\n        </cnx>`}textTemplate(t){return`<cnx class="${tc.Placeholder}">\n            <cnx class="${tc.Text} ${d.iu.SecondaryColor}">${t}</cnx>\n        </cnx>`}labelTemplate(t){return`<cnx class="${tc.Placeholder}">\n            <cnx class="${tc.Label}">${t}</cnx>\n        </cnx>`}}var wc=h(4562);class _c extends cc{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this._r=i,this.Yt=n,this.SO=r,this.eventList=[],this.className=ec.Quote}LO(t){const{quote:i,source:e}=t;if((0,H.QM)(i)){const t=this.AO.getWordsHtml(`${wc}${(0,yh.J5)(i)}${wc}`);(0,it.jG)(this.TO(t),this.$templateFragment)}(0,H.QM)(e)&&(0,it.jG)(this.CO(e),this.$templateFragment)}}class Pc extends pc{get template(){return`\n            <cnx class="${ic.Basic} ${d.iu.TitleComponent}"></cnx>\n        `.trim()}textTemplate(t){return`\n        <cnx class="${tc.Text} ${d.iu.PrimaryColor}"> ${t}</cnx>`.trim()}labelTemplate(t){return`<cnx class="${tc.Label}">${t}</cnx>`.trim()}}class Sc extends cc{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this._r=i,this.Yt=n,this.SO=r,this.eventList=[],this.className=ec.Instagram}LO(t){const{instagramMetadata:{createdDate:i,comments:e,likes:s},label:n}=t;this.GO({createdDate:i,comments:e,likes:s}),(0,H.QM)(n)&&(0,it.jG)(this.kO(n),this.$templateFragment)}GO(t){const{createdDate:i,comments:e,likes:s}=t,n=this._r.createElementByString(this.SO.instagramMetaTemplate(i,s,e));if(this.JO(e)&&this.JO(s)){const t=n.querySelector(`.${tc.Instagram}-date cnx-span`);(0,it.cn)(t,d.Gj.Show)}(0,it.jG)(n,this.$templateFragment)}JO(t){return!(0,H.QM)(t)||"0"===t}}var Ac=h(6514),Ic=h(1954),kc=h(8757);class Cc extends pc{get template(){return`<cnx class="${ic.Basic} ${d.iu.TitleComponent}"></cnx>`.trim()}instagramMetaTemplate(t,i,e){const s=(0,H.QM)(t)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-date ${d.ed.InheritBodyFontFamily}">\n                ${kc}\n                <cnx-span class="cnx-date-label ${d.ed.InheritBodyFontFamily}">Posted </cnx-span>${(0,ae.VG)(t)}\n            </cnx-span>`.trim():"",n=(0,H.QM)(i)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-likes ${d.ed.InheritBodyFontFamily}">\n                ${Ac} ${(0,_t.uc)(parseInt(i,10))}\n            </cnx-span>`.trim():"",r=(0,H.QM)(e)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-comments ${d.ed.InheritBodyFontFamily}">\n                ${Ic} ${(0,_t.uc)(parseInt(e,10))}\n            </cnx-span>`.trim():"";return`\n            <cnx class="cnx-ui-ps-instagram-title-row ${d.ed.InheritBodyFontFamily}">\n                ${s}\n                ${n}\n                ${r}\n            </cnx>\n        `.trim()}titleTemplate(t){return`\n            <cnx class="cnx-ui-ps-instagram-title-row ${tc.Instagram}-title ${d.ed.InheritBodyFontFamily}">\n                ${t}\n            </cnx>\n        `.trim()}}class Tc extends To{constructor(t,i,e,s,n,r,o){super(t,i,e,s,r),this.mediator=t,this._r=i,this.Er=n,this.Yt=r,this.xL=o,this.eventList=[],this.YO=new Map,this.XO()}setFooterElement(t){this.YO.forEach((i=>{i.setFooterElement(t)}))}onSlideTransitionStart(t){(0,it.Kk)(this.nC),this.nC.removeAttribute("title");const i=t.find((({type:t})=>t===Da.SlideTitle)),e=t.find((({type:t})=>t===Da.CtaButton));if(e&&e.metadata&&e.metadata.url){if(this.ZO=e.metadata.url,!this.xL){this.nC.href=this.ZO;const t=this._r.isURLSameDomainToTop(this.ZO);this.nC.target=t?_e.bS.Top:_e.bS.Blank}this.nC.title=i.metadata.label,e.metadata.title=i.metadata.label}if(!(0,H.as)(i)||!(0,H.as)(i.metadata))return;const s=this.YO.get(i.metadata.titleType);if(s){if(this.KO(s),(0,H.QM)(i.metadata.label)){(0,yh.Ft)(i.metadata.label)&&(0,it.cn)(this.nC,"cnx-japanese-charset")}this.tR.onSlideTransitionStart(i.metadata)}}onSlideTransitionEnd(){this.tR&&this.tR.onSlideTransitionEnd()}onSlideTimeUpdate(t,i){this.tR&&this.tR.onSlideTimeUpdate(t,i)}initComponent(){}KO(t){this.tR?(this.tR.destroy(),(0,it.L_)(this.nC,this.iR,t.className)):(0,it.cn)(this.nC,t.className),this.iR=t.className,this.nC.innerHTML="",this.tR=t,this.tR.initComponent(this.nC)}XO(){this.YO.set(Fa.Default,new mc(this,this._r,this.sC,this.Er,this.Yt,new gc)),this.YO.set(Fa.Description,new uc(this,this._r,this.sC,this.Er,this.Yt,new fc)),this.YO.set(Fa.Quote,new _c(this,this._r,this.sC,this.Er,this.Yt,new Pc)),this.YO.set(Fa.Bullet,new yc(this,this._r,this.sC,this.Er,this.Yt,new vc)),this.YO.set(Fa.Cover,new bc(this,this._r,this.sC,this.Er,this.Yt,new xc)),this.YO.set(Fa.Instagram,new Sc(this,this._r,this.sC,this.Er,this.Yt,new Cc)),this.YO.forEach((t=>{t.eventList.forEach((i=>{this.subscribe(i,t,(()=>{const t={payload:null};i===ua.CallToAction&&(t.payload=this.ZO),this.mediator.publish(this,i,t)}))}))}))}destroy(){super.destroy(),this.tR&&this.tR.destroy()}}const Mc="Skip Ad",Ec={[So[So.SkipAd]]:{template:Bh(So.SkipAd,Mc,!1),tooltip:Mc,isHoverable:!1}};class Bc{constructor(t){this.eR=t}get template(){return`\n            <cnx class="${oo}">\n                ${this.sR()}\n                <cnx class="${po}">\n                    [[${So.TopStoryTitle}]]\n                    [[${So.TopSlideTitle}]]\n                </cnx>\n            </cnx>\n        `.trim()}sR(){return this.eR?`[[${So.TopLogo}]]`:""}}class Lc{get template(){return`<a class="${tc.Wrapper}"></a>`}}class Oc extends Mo{constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.mediator=t,this.Yt=n,this.eventList=[...this.eventList,bt[bt.LogoClicked]],this.hideComponent(!1),this.nR=this.nC.querySelector(`.${ao}`),this.nR.src=`${r}`,this.nR.alt="",this.nR.onload=()=>{this.rR()}}show(t){this.showComponent(t.useTransition)}hide(t){this.hideComponent(t.useTransition)}update(t){this.showComponent(t.useTransition)}triggerLogoAnimation(){(0,it.cn)(this.nC,uo)}onClickHandler(){this.mediator.publish(this,bt[bt.LogoClicked])}rR(){this.nR.naturalHeight>this.nR.naturalWidth?this.nR.naturalWidth>this.nR.parentElement.clientWidth&&this.nR.naturalWidth/this.nR.naturalHeight>=.8?(0,it.cn)(this.nR,lo):(0,it.cn)(this.nR,co):this.nR.naturalHeight>this.nR.parentElement.clientHeight&&this.nR.naturalHeight/this.nR.naturalWidth>=.8?(0,it.cn)(this.nR,co):(0,it.cn)(this.nR,lo)}}class Rc{get template(){return`\n            <cnx class="${ho}">\n                <img class="${ao}" />\n            </cnx>\n        `.trim()}}class Dc{get template(){return`\n            <cnx class="${go} ${d.ed.InheritTitleFontFamily}">\n                <cnx class="${mo}">\n                    <cnx class="${yo} ${d.iu.SecondaryColor}">\n                        <cnx class="${vo}">\n                            <cnx class="${bo}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class Fc{get template(){return`\n            <cnx class="${fo} ${d.ed.InheritTitleFontFamily}">\n                <cnx class="${mo}">\n                    <cnx class="${yo} ${d.iu.SecondaryColor}">\n                        <cnx class="${vo}">\n                            <cnx class="${bo}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class $c extends To{constructor(t,i,e,s,n){super(t,i,e,s,n),this.mediator=t,this.eventList=[],this.oR=this.nC.querySelector(`.${bo}`)}show(t){if(!this.oR)return;const{label:i,useTransition:e}=t;(0,H.QM)(i)&&i!==this.jO&&(clearTimeout(this.hR),this.jO=i,this.aR(i),this.EO(e))}initComponent(){}hide(t){const{useTransition:i}=t;clearTimeout(this.hR),this.BO(i),this.jO=null}update(t){if(!this.oR)return;const{label:i,useTransition:e}=t;(0,H.QM)(i)&&i!==this.jO&&(clearTimeout(this.hR),this.BO(e),this.jO=i,this.hR=setTimeout((()=>{this.aR(i),this.EO(e)}),600))}aR(t){(0,H.QM)(t)&&(0,yh.Ft)(t)&&(0,it.cn)(this.nC,"cnx-japanese-charset"),this.oR.innerHTML=t}EO(t=!1){if(t){if((0,it.pv)(this.nC,xo))return;this.cR(),(0,it.IV)(this.nC,d.Gj.Hide,d.Gj.Active),(0,it.Tp)(this.nC),(0,it.L_)(this.nC,wo,xo)}else(0,it.L_)(this.nC,d.Gj.Hide,d.Gj.Active),(0,it.IV)(this.nC,xo,wo)}BO(t=!1){t?((0,it.IV)(this.nC,d.Gj.Hide,d.Gj.Active),(0,it.L_)(this.nC,xo,wo)):((0,it.L_)(this.nC,d.Gj.Active,d.Gj.Hide),(0,it.IV)(this.nC,xo,wo))}cR(){const t=[xo,wo];(0,it.IV)(this.oR,...t),(0,it.Tp)(this.oR)}}class jc extends To{constructor(){super(...arguments),this.eventList=[]}initComponent(){}onSlideTimeUpdate(){}onSlideTransitionEnd(){}onSlideTransitionStart(t){const i=this.lR(t);i&&this.dR(i.metadata.label)}lR(t){return t.find((({type:t,metadata:i})=>t===Da.TextLabel&&(0,H.as)(i)))}dR(t){(0,H.QM)(t)&&(this.nC.innerText=t)}}class Vc extends qh{constructor(t,i,e,s,n){super(t,i,s,n,Ec),this.Ha=e,this.uE={[So.PlayspaceProgressBar]:t=>new Ca(t,this._r,this.sC,'<cnx class="cnx-slides-progress-bar"></cnx>',this.Gt.isMobile),[So.PlayspaceSettingsMenu]:t=>new Ra(t,this._r,this.sC,ah,bt[bt.SettingsMenu],So.PlayspaceSettingsMenu,this.nC,this.Gt.isMobile),[So.CtaButton]:t=>new Ha(t,this._r,this.sC,this.Ha,new Ga,this.Gt.isMobile,this.Gt.disableClickUrl),[So.ClickToPlayButton]:t=>new Ja(t,this._r,this.sC,'<cnx class="cnx-ui-click-to-play-btn"><cnx class="cnx-ui-click-to-play-btn-content"><svg markup-inline class="cnx-click-to-play-btn-icon cnx-color-accent" class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 1v22l18-11.083z"/></svg><cnx class="cnx-onion-ring"></cnx><cnx-span class="cnx-click-to-play-btn-text">PLAY</cnx-span></cnx></cnx>',this.Gt.isMobile),[So.OverlayComponent]:t=>new Ja(t,this._r,this.sC,'<cnx class="cnx-ui-click-to-play-overlay"></cnx>',this.Gt.isMobile),[So.TopTitle]:t=>new Ka(t,this._r,new Bc(this.Gt.logoUrl).template,this),[So.TopLogo]:t=>new Oc(t,this._r,this.sC,(new Rc).template,this.Gt.isMobile,this.Gt.logoUrl),[So.TopSlideTitle]:t=>new $c(t,this._r,this.sC,(new Dc).template,this.Gt.isMobile),[So.TopStoryTitle]:t=>new $c(t,this._r,this.sC,(new Fc).template,this.Gt.isMobile),[So.SlideTitle]:t=>new Tc(t,this._r,this.sC,(new Lc).template,this.Ha,this.Gt.isMobile,this.Gt.disableClickUrl),[So.VolumeControls]:t=>new Wh(t,this._r,Gh,this),[So.TextLabel]:t=>new jc(t,this._r,this.sC,'<cnx class="cnx-button-text-label">1 min. story</cnx>')},this.fE=t=>i=>{const e=this.uE[t];if(e)return e(i)}}createComponent(t,i){return this.fE(t)(i)||super.createComponent(t,i)}}class Nc{constructor(t){this.uR=t}pR(t){return this.uR.filter((i=>t.instance!==i.instance))}fR(t){return this.uR.find((({name:i})=>t===i))}gR(t){t.forEach((({instance:t})=>{t.isOpen&&t.close()}))}toggleContextMenu(t,i={}){const e=this.fR(t);if(e.instance.isOpen)return e.instance.close(),!1;{const{targetCoordinates:t,holdPause:s}=i,n=t||e.instance.getAnchorCoordinatesTo(e.linkedComponent);return e.instance.open(n,s),this.gR(this.pR(e)),!0}}isAnyContextMenuOpen(){return!!this.uR.find((({instance:t})=>t.isOpen))}closeContextMenu(t){const i=this.fR(t).instance;i.isOpen&&i.close()}closeAllContextMenus(){this.gR(this.uR)}}class Uc extends Ro{enterState(){super.enterState();const t=this.context.getComponent(So.PlayspaceProgressBar);t&&t.startProgress();const i=this.context.getComponent(So.CtaButton);i&&i.startProgress(),this.context.interactionService.enableSpecialInteractions(this.context.$container),this.context.autoHideHandler&&this.context.autoHideHandler.startAutoHide()}exitState(){super.exitState(),this.context.autoHideHandler&&this.context.autoHideHandler.showUi()}updateDuration(){const t=this.context.getComponent(So.PlayspaceProgressBar);t&&t.startProgress()}}class Hc extends Fo{enterState(){super.enterState();const t=this.context.getComponent(So.PlayspaceProgressBar);t&&t.pauseProgress();const i=this.context.getComponent(So.CtaButton);i&&i.pauseProgress(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState()}updateDuration(){}}class qc extends Hc{enterState(){super.enterState(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState()}}class zc extends Hc{enterState(){super.enterState(),(0,it.cn)(this.context.$uiContainer,d.s_.Preroll);const t=this.context.getComponent(So.Loader);t&&t.show(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState(),(0,it.IV)(this.context.$uiContainer,d.s_.Preroll);const t=this.context.getComponent(So.Loader);t&&t.hide()}}class Wc extends Hc{enterState(){super.enterState(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState()}updateDuration(){const t=this.context.getComponent(So.PlayspaceProgressBar);t&&t.resetProgress()}}const Gc={[Da.PlaybackControls]:[So.PlayButton],[Da.VolumeControls]:[So.VolumeButton],[Da.CtaButton]:[So.CtaButton],[Da.PlaylistControls]:[So.UpNextButton,So.PreviousButton],[Da.SlideTitle]:[So.SlideTitle],[Da.TextLabel]:[So.TextLabel]};class Jc{constructor(){this.mR=Object.keys(Gc).reduce(((t,i)=>[...t,...Gc[i]]),[])}setCapabilityList(t){this.yR=t.map((t=>Gc[t.type])).filter((t=>Array.isArray(t))).reduce(((t,i)=>[...t,...i]),[])}getComponentList(){return{excludedComponents:(0,l.V7)(this.mR,this.yR),includedComponents:(0,l.tN)(this.mR,this.yR)}}}class Qc{constructor(t){this.nC=t,this.vR=!1}isUIHidden(){return this.vR}startAutoHide(){this.bR=setTimeout((()=>{this.xR()}),3e3)}showUi(){clearTimeout(this.bR),this.wR()}resetAutoHideTimer(){clearTimeout(this.bR),this.wR(),this.startAutoHide()}xR(){(0,it.cn)(this.nC,d.s6.HideUI),this.vR=!0}wR(){(0,it.IV)(this.nC,d.s6.HideUI),this.vR=!1}}var Yc=h(5256);class Xc extends No{constructor(t,i,e,s,n,r,o,h,a){super(t,i,e,n,new Vc(e,a,s,i,r)),this.mediator=t,this.$container=i,this.globalDomUtilsService=e,this.settings=r,this.Xt=o,this.interactionService=a,this._R=80,this.PR=[So.SlideTitle,So.CtaButton,So.TopTitle,So.TextLabel],this.SC={[P.PlayingState]:new Uc(this),[P.PausedState]:new Hc(this),[P.StoppedState]:new qc(this),[P.HiddenState]:new Wc(this),[P.PrerollState]:new zc(this),[P.PostrollState]:new zc(this)},this.SR=new Jc,this.LL=this.$container.querySelector(`.${Kr}`),this.AR(),this.IR(),this.kR(),this.TR(),this.SC[h].enterState(),this.MR(),this.ER(!1),this.BR(),this.LR=this.$uiContainer.querySelector(`.${Zr}`)}AR(){const t=this.getComponent(So.SlideTitle);t&&t.setFooterElement(this.footer)}OR(t,i){const e=this.getComponent(So.PlayspaceProgressBar);e&&e.resizeProgressBar(t,i)}handleComponentEvent(t,i,e){switch(this.RR(t),t){case bt[bt.Mute]:this.mediator.publish(this,bt[bt.Volume],{payload:0});break;case bt[bt.Unmute]:this.mediator.publish(this,bt[bt.Volume],{payload:1});break;case So[So.CloseButton]:this.mediator.publish(this,bt[bt.Close]);break;case So[So.MoreButton]:const e={holdPause:!0};this.DR.toggleContextMenu(So.PlayspaceSettingsMenu,e);break;case bt[bt.AboutClick]:this.globalDomUtilsService.open(Ke.br,_e.bS.Blank);break;case bt[bt.Quality]:i.payload&&this.mediator.publish(this,bt[bt.Quality],{payload:i.payload});break;case So[So.UpNextButton]:this.mediator.publish(this,bt[bt.Next]);break;case So[So.PreviousButton]:this.mediator.publish(this,bt[bt.Prev]);break;case ua.CallToAction:(0,H.QM)(i.payload)?this.mediator.publish(this,ua.CallToAction,i):this.mediator.publish(this,bt[bt.Next]);break;default:this.mediator.publish(this,t,i)}}RR(t){switch(t){case ua.CallToAction:this.mediator.publish(this,ua.GeneralClickInteraction,{payload:r.ProtoMediaClickTypeEnum.UrlClick});break;case ko.Z[ko.Z.Scroll]:this.mediator.publish(this,ua.GeneralClickInteraction,{payload:r.ProtoMediaClickTypeEnum.ScrollClick});break;case So[So.VolumeButton]:case So[So.VolumeProgress]:case So[So.VolumeControls]:this.mediator.publish(this,ua.GeneralClickInteraction,{payload:r.ProtoMediaClickTypeEnum.VolumeClick});break;case So[So.PlayButton]:case So[So.BigPlayButton]:case So[So.ClickToPlayButton]:case bt[bt.Play]:this.mediator.publish(this,ua.GeneralClickInteraction,{payload:r.ProtoMediaClickTypeEnum.PlayClick});break;case bt[bt.Pause]:this.mediator.publish(this,ua.GeneralClickInteraction,{payload:r.ProtoMediaClickTypeEnum.PauseClick});break;case bt[bt.Next]:case So[So.UpNextButton]:case So[So.UpNextBox]:case ko.Z[ko.Z.TapRight]:this.mediator.publish(this,ua.GeneralClickInteraction,{payload:r.ProtoMediaClickTypeEnum.NextClick});break;case bt[bt.Prev]:case So[So.PreviousButton]:case ko.Z[ko.Z.TapLeft]:this.mediator.publish(this,ua.GeneralClickInteraction,{payload:r.ProtoMediaClickTypeEnum.PreviousClick});break;case bt[bt.Mute]:this.mediator.publish(this,ua.GeneralClickInteraction,{payload:r.ProtoMediaClickTypeEnum.MuteClick});break;case bt[bt.Unmute]:this.mediator.publish(this,ua.GeneralClickInteraction,{payload:r.ProtoMediaClickTypeEnum.UnmuteClick});break;case bt[bt.Close]:case So[So.CloseButton]:this.mediator.publish(this,ua.GeneralClickInteraction,{payload:r.ProtoMediaClickTypeEnum.CloseClick})}}kR(){const t=[],i=this.FR();i&&t.push({instance:i,linkedComponent:this.getComponent(So.MoreButton),name:So.PlayspaceSettingsMenu}),this.DR=new Nc(t)}TR(){this.settings.isMobile&&this.$R(),this.interactionService.register(this.$uiContainer,this,this.interactionService,{},[Yc.WR.Hold,Yc.WR.Swipe]);const t=this.interactionService.getNonInterruptibleInteractions();Object.keys(ko.Z).filter((t=>isNaN(parseInt(t,10)))).forEach((i=>{this.subscribe(i,this.interactionService,(e=>{const s=!t.includes(ko.Z[i]);if(this.autoHideHandler&&s){if(this.autoHideHandler.isUIHidden())return void this.autoHideHandler.resetAutoHideTimer();this.autoHideHandler.resetAutoHideTimer()}this.RR(i),this.mediator.publish(this,i,e)}))}))}$R(){this.autoHideHandler=new Qc(this.$container)}IR(){const t=`id_${this.Xt}`;this.$uiContainer.id=t;const{bodyFontFamily:i,titleFontFamily:e}=this.jR(),s=`\n            #${t} .${d.iu.AccentColor} {\n                fill: ${this.settings.accentColorList.background};\n                background-color: ${this.settings.accentColorList.background};\n                color: ${this.settings.accentColorList.foreground};\n                stroke: ${this.settings.accentColorList.background};\n            }\n            #${t} .${d.iu.AccentColor} .cnx-cta-btn-arrow svg{\n                fill: ${this.settings.accentColorList.foreground};\n            }\n            @keyframes ${t}-bar {\n                1% {\n                  fill: transparent; transform: scaleY(1)\n                }\n                30% {fill: ${this.settings.accentColorList.background}; transform: scaleY(1.1)}\n                60% {fill: transparent; transform: scaleY(1)}\n                100% {fill: transparent; transform: scaleY(1)}\n            }\n            #${t} .cnx-ui-loader polygon {\n                animation-name: ${t}-bar;\n            }\n            #${t} .${d.iu.PrimaryColor} {\n                background: ${this.settings.primaryColorList.background};\n                color: ${this.settings.primaryColorList.foreground};\n            }\n            #${t} .${d.iu.SecondaryColor} {\n                background: ${this.settings.secondaryColorList.background};\n                color: ${this.settings.secondaryColorList.foreground};\n            }\n            #${t} .${d.iu.TitleComponent}.${d.iu.TitleLink}:${this.settings.isMobile?"active":"hover"} .${tc.Text} {\n                background-color: ${(0,wt.Xf)(this.settings.accentColorList.background,this._R)}\n            }\n            #${t} .${d.iu.SlideProgressBar} .${d.iu.ProgressFill}.${d.iu.AccentColor} {\n                background-color: ${this.settings.useAccentColorForProgressBar?this.settings.accentColorList.background:d.QO.Icons}\n            }\n            #${t} em {\n                color: ${this.settings.accentColorList.background};\n            }\n            #${t} .${d.ed.InheritTitleFontFamily} {\n                font-family: ${e} !important;\n            }\n            #${t} .${d.ed.InheritBodyFontFamily} {\n                font-family: ${i} !important;\n            }\n        `.trim();this.globalDomUtilsService.addCssString(s)}jR(){const{bodyFontFamily:t,titleFontFamily:i}=this.settings.fontFamilySettings;return(0,H.QM)(t)&&(0,H.QM)(i)?this.settings.fontFamilySettings:{titleFontFamily:(0,it.nw)(this.$container),bodyFontFamily:(0,it.fj)(this.$container)}}BR(){this.VR()&&this.hideExpandButton()}VR(){return this.NR()||!this.HR()}NR(){return this.settings.os===A.M.Ios}HR(){return!0===this.settings.expandButtonEnabled}qR(t={}){const i=this.getComponent(So.CtaButton);i&&(0,H.QM)(t.label)&&i.changeLabel(t.label)}hideExpandButton(){this.FR().hideExpandButton()}showExpandButton(){this.FR().showExpandButton()}FR(){return this.getComponent(So.PlayspaceSettingsMenu)}MR(t=[]){this.SR.setCapabilityList(t)}ER(t=!0){const{excludedComponents:i,includedComponents:e}=this.SR.getComponentList();i.map((t=>this.getComponent(t))).forEach((i=>i&&i.hideComponent(t))),e.map((t=>this.getComponent(t))).forEach((i=>i&&i.showComponent(t)))}updateQualityMenu(t){const i=this.getComponent(So.PlayspaceSettingsMenu);i&&i.updateQualityMenu(t)}updateQuality(t){const i=this.getComponent(So.PlayspaceSettingsMenu);i&&i.updateQuality(t)}setTotalSlides(t){const i=this.getComponent(So.PlayspaceProgressBar);i&&i.setSlides(t)}setDuration(t){const i=this.getComponent(So.PlayspaceProgressBar);i&&(i.setDuration(t),this.currentState.updateDuration())}setCurrentIndex(t){const i=this.getComponent(So.PlayspaceProgressBar);i&&i.setCurrentIndex(t)}updateVolume(t){const i=this.getComponent(So.VolumeButton);i&&i.setState(t>0?Uh.Unmute:Uh.Mute)}expand(){this.FR().setExpand()}collapse(){this.FR().setCollapse()}onResizeUi(t,i){this.DR.closeAllContextMenus(),this.OR(t,i)}onFirstTimeInView(){const t=this.getComponent(So.TopTitle);t&&t.triggerLogoAnimation()}hide(){super.hide()}setMediaContainerRatio(t){(0,it.SH)(this.LR,t)}get $mediaContainer(){return this.LR}onSlideTransitionStart(t){const i=this.getComponent(So.PlayspaceProgressBar);i&&i.pauseProgress(),this.MR(t),this.ER(),this.PR.forEach((i=>{const e=this.getComponent(i);e&&e.onSlideTransitionStart&&e.onSlideTransitionStart(t)}))}onSlideTransitionEnd(){this.PR.forEach((t=>{const i=this.getComponent(t);i&&i.onSlideTransitionEnd&&i.onSlideTransitionEnd()}))}onSlideTimeUpdate(t,i){this.PR.forEach((e=>{const s=this.getComponent(e);s&&s.onSlideTimeUpdate&&s.onSlideTimeUpdate(t,i)}))}updateCapabilityMetadata(t){if(t.type===Da.CtaButton)this.qR(t.metadata)}get footer(){return this.LL}destroy(){this.interactionService.unregisterAll(this),this.unsubscribeAll(this),super.destroy()}}const Zc="stateChanged",Kc="contentReset";class tl{constructor(t,i,e,s,n,r,o){this.mediator=t,this.zR=i,this.GR=e,this.JR=s,this.QR=n,this.YR=r,this.XR=o,this.ZR=!1,this.KR=!1,this.tD=!1,this.Il=!1,this.iD=!1,this.eD=!0,this.sD=()=>{this.ZR=!0,this.nD===P.PlayingState?this.play(!1):this.pause(!1)},this.rD=()=>{switch(this.KR=!0,this.YR){case Aa.ProtoEndOfSlideCycleMode.Loop:this.reset();break;case Aa.ProtoEndOfSlideCycleMode.Stop:this.stop()}},this.oD=null,this.hD=null,this.XR&&(this.ZR=!0)}aD(t){this.oD!==t&&(this.hD=this.oD,this.oD=t,this.mediator.publish(this,Zc,{payload:this.oD}))}cD(t){return this.oD===t}resume(){this.hD&&this.aD(this.hD)}stop(){this.zR.stop(),this.aD(P.StoppedState)}handleSlidesEnd(){this.lD()}dD(){this.aD(P.PrerollState)}lD(){this.mediator.publish(this,fa.ContentEnd),this.QR?this.aD(P.PostrollState):this.rD()}pD(t){return t===P.PrerollState||t===P.PostrollState}fD(t){return t===P.PrerollState&&this.ZR||t===P.PostrollState&&this.KR}setViewabilityState(t){this.Il=t}play(t){if(this.nD=P.PlayingState,!(this.cD(P.PlayingState)||this.cD(P.HiddenState)&&this.tD||this.pD(this.oD)&&!this.fD(this.oD)||this.cD(P.StoppedState)&&!t))if(!this.JR||this.ZR){if(this.cD(P.StoppedState))return this.ZR=!1,void this.reset();this.GR.setDuration(this.zR.remainingTime),this.zR.play(),this.aD(P.PlayingState),this.eD&&(this.eD=!1,this.mediator.publish(this,fa.ContentStart))}else this.dD()}reset(){this.mediator.publish(this,Kc),this.oD=null,this.KR=!1,this.eD=!0,this.zR.resetSlider(),this.play(!1)}pause(t){this.nD=P.PausedState,this.cD(P.PausedState)||this.cD(P.HiddenState)||this.pD(this.oD)&&!this.fD(this.oD)||this.cD(P.StoppedState)&&!t||(this.zR.pause(),this.aD(P.PausedState))}pauseToggle(){if(this.cD(P.PausedState)||this.cD(P.PlayingState))return this.cD(P.PausedState)&&this.iD?(this.iD=!1,void this.play(!1)):this.cD(P.PlayingState)?(this.iD=!0,void this.pause(!1)):void 0}hide(){this.zR.pause(),this.tD=!0,this.aD(P.HiddenState)}show(){this.cD(P.HiddenState)&&(this.tD=!1,this.hD!==P.PostrollState?this.hD!==P.PrerollState?this.Il?this.goToNextSlide():this.nD===P.PlayingState?this.play(!1):this.pause(!1):this.sD():this.rD())}setCurrentSlide(t){this.pD(this.oD)&&!this.fD(this.oD)||this.zR.setCurrentSlide(t)}goToNextSlide(){this.pD(this.oD)&&!this.fD(this.oD)||(this.zR.goToNextSlide(),this.cD(P.StoppedState)||this.play(!1))}goToPrevSlide(){this.pD(this.oD)||(this.play(!1),this.zR.goToPrevSlide())}exitRollBreak(){this.oD!==P.PostrollState?this.sD():this.rD()}set hasPreroll(t){this.JR=t,this.ZR=!0}set hasPostroll(t){this.QR=t}}class il extends a._{constructor(t,i,e,s,n){super(),this.mediator=t,this.gD=i,this._m=e,this.Ha=s,this.pl=n,this.XC=!1,this.mD=!1,(0,H.QM)(i.imageUrl)||(i.imageUrl=ze.n.endPoints.base.image),this.ql=new ct(n),this.LR=this._m.createElementByString(this.yD()),this.vD()}set isLoaded(t){this.mD=t}get isLoaded(){return this.mD}bD(t,i){const e=t>i?at.Landscape:at.Portrait;return{imageUrl:this.xD[e],altText:(0,H.$K)(this.gD.altText)?this.gD.altText:"",queryParams:this.gD.mediaContext===Aa.ProtoMediaContextEnum.Logo?aa.getScaledImageQueryParams(t,i):aa.getSmartCroppedImageQueryParams(t,i),width:t,height:i}}vD(){const{imageUrl:t,portraitImageUrl:i}=this.gD;this.xD={[at.Landscape]:t,[at.Portrait]:(0,H.QM)(i)?i:t}}get duration(){return this.gD.slideDuration*I.s_}getThumbnailUrlParams(t,i){return this.bD(t,i)}destroy(){}}class el extends il{constructor(t,i,e,s,n){super(t,i,e,s,n),this.type=r.ProtoMediaTypeEnum.Image,this.wD=t=>{t.preventDefault()},this._D()}_D(){this.gD.mediaContext===Aa.ProtoMediaContextEnum.Logo&&(0,it.cn)(this.LR,no)}PD(){this.SD=this.LR.clientWidth,this.AD=this.LR.clientHeight}ID(){this.kD=setTimeout((()=>{const{clientWidth:t,clientHeight:i}=this.LR.parentElement,{imageUrl:e,altText:s,width:n,height:r,queryParams:o}=this.bD(t,i),h=this.ql.getImage(e,s,n,r,o,!0);this.eE&&this.LR.removeChild(this.eE),h&&(this.LR.appendChild(h),this.eE=h,this.CD(this.eE))}),0)}TD(){this.eE&&(0,H.QM)(this.gD.imageUrl)&&this.ID()}MD(){return(0,H.$K)(this.LR)&&(0,H.$K)(this.SD)&&(0,H.$K)(this.AD)}ED(t){return!!this.MD()&&Math.abs(this.SD-this.LR.clientWidth)>=this.SD/t}BD(t){return!!this.MD()&&Math.abs(this.AD-this.LR.clientHeight)>=this.AD/t}CD(t){t.addEventListener("mousedown",this.wD)}LD(t){t.removeEventListener("mousedown",this.wD)}yD(){return'<cnx class="cnx-ui-ps-image-container cnx-ui-ps-image-background"></cnx>'}reset(){this.isLoaded&&(this.LR.style.transitionDuration="",this.LR.style.transform="matrix(1.1, 0, 0, 1.1, 0, 0)")}onSlideResizeCallback(){(this.ED(10)||this.BD(10))&&(this.TD(),this.PD())}play(){this.isLoaded&&(this.LR.style.transform="",this.LR.style.transitionDuration=`${this.gD.slideDuration}s`,(0,it.L_)(this.LR,d.s_.Paused,d.s_.Playing))}pause(){this.isLoaded&&(this.LR.style.transitionDuration="",this.LR.style.transform=this._m.getTransformPropertyValue(this.LR),(0,it.L_)(this.LR,d.s_.Playing,d.s_.Paused))}load(t){this.isLoaded||(this.isLoaded=!0,t.appendChild(this.LR),this.PD(),this.pause(),this.ID())}destroy(){this.eE&&this.LD(this.eE),clearTimeout(this.kD),super.destroy()}}class sl{constructor(t){this.OD=[{id:S.H264,extension:"mp4",type:"video/mp4"},{id:S.Hevc,extension:"mp4",type:"video/mp4"}],this.RD=this.OD.find((i=>i.id===t))}get type(){const t=this.RD.codecs?`codecs=${this.RD.codecs}`:"";return`${this.RD.type}; ${t}`}get id(){return this.RD.id}}var nl=h(6515);class rl{constructor(t,i){this.Ha=t,this.DD=i,this.FD={quality:_.Auto,height:360},this.resizeObserverBinded=!1,this.$D=new rt.x,this.jD=new nl.X(this.FD),this.VD=30,this.ic=()=>{const t=this.DD.clientHeight;if(this.ND(t)&&this.currentQualitySettings.quality===_.Auto){const i={height:t,quality:_.Auto};this.setCurrentQualitySettings(i),this.jD.next(i)}}}setCurrentQualitySettings(t){this.FD.quality=t.quality,this.FD.height!==t.height&&(this.FD.height=t.height,this.$D.next())}ND(t){return!this.FD.height||t/this.FD.height*100-100>this.VD}addResizeObserver(){this.resizeObserverBinded=!0,this.Ha.on(this.DD,this.ic)}removeResizeObserver(){this.resizeObserverBinded=!1,this.Ha.off(this.DD,this.ic)}setQuality(t){t.quality===_.Auto?this.resizeObserverBinded||(this.setCurrentQualitySettings({height:t.height,quality:t.quality}),this.addResizeObserver(),this.ic()):(this.resizeObserverBinded&&this.removeResizeObserver(),this.setCurrentQualitySettings(t)),this.jD.next(this.FD)}get currentQualitySettings(){return this.FD}get onQualityChange(){return this.$D.asObservable()}get onCurrentQuality(){return this.jD.asObservable()}destroy(){this.removeResizeObserver()}}class ol{constructor(t,i){this._m=t,this.gy=i,this.UD=new rt.x,this.$D=new rt.x,this.jD=new rt.x,this.onTrackLoaded=this.UD.asObservable(),this.onQualityChange=this.$D.asObservable(),this.onCurrentQuality=this.jD.asObservable(),this.qD=()=>{this.UD.next()}}zD(t){this.WD=t}GD(t){this.gy.innerHTML="",t.forEach((t=>{this.gy.appendChild(t)}))}JD(){return this.QD}YD(t){var i;if(null===(i=this.QD)||void 0===i||i.remove(),this.QD=null,this.WD&&this.WD.subtitles&&t){this.gy.childNodes.forEach((t=>{"track"===t.nodeName.toLowerCase()&&t.remove()}));const i=this._m.createElement("track");i.src=t.file,i.srclang=t.code,i.label=t.title,i.kind="subtitle",i.default=!0,i.addEventListener("load",this.qD,!1),i.addEventListener("loaded",this.qD,!1),this.gy.appendChild(i),this.QD=i}}}var hl,al,cl;!function(t){t[t.MP4=0]="MP4",t[t.HLS=1]="HLS"}(hl||(hl={}));class ll extends ol{constructor(t,i,e,s,n={},r){super(t,s),this.Ha=i,this.gu=e,this.XD=r,this.ZD=[],this.KD=null,this.tF=10.13,this.handlerType=hl.MP4,this.iF=this.eF(n)}start(){try{this.sF=new rl(this.Ha,this.gu),this.nF(),this.setQuality(this.XD)}catch(t){(0,s.n)({message:"Mp4SourceHandler_start",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}onQualityChanged(){return this.attachMedia()}setSource(t,i=!1){this.zD(t),this.rF(this.oF(),i)}setQuality(t){this.sF.setQuality(t)}get currentQualitySettings(){return this.sF.currentQualitySettings}attachMedia(){return new Promise((t=>{this.aF(),t()}))}detachMedia(){this.gy.removeAttribute("src"),this.rF(null)}destroy(){this.sF.destroy(),(0,Pt.i)(this.ZD)}updateSubtitleTrackSource(t){this.YD(t)}nF(){const t=this.sF.onCurrentQuality.subscribe((t=>this.jD.next(t))),i=this.sF.onQualityChange.subscribe((()=>this.cF(this.sF.currentQualitySettings.height)));this.ZD.push(t,i)}cF(t){this.rF(this.oF()),this.$D.next(t)}lF(t){this.GD(t),this.gy.load()}oF(){return[...this.dF(),...this.JD()?[this.JD()]:[]]}dF(){if(!this.gy||!this.WD)return[];const t=[];return this.WD.getSources(this.sF.currentQualitySettings.height,this.iF).forEach((i=>{const e=this._m.createElement("source");e.src=i.src,e.type=i.type,t.push(e)})),t}aF(){this.KD&&(this.lF(this.KD),this.KD=null)}rF(t,i=!1){this.KD=t,i&&this.aF()}eF(t){let i;switch(t.os){case A.M.Ios:i=[S.Hevc,S.H264];break;case A.M.Mac:i=t.osVersion>this.tF&&t.browser===_e.lI.Safari?[S.Hevc,S.H264]:[S.H264];break;default:i=[S.H264]}return i.map((t=>new sl(t)))}}!function(t){t.UnexpectedError="unexpectedError",t.BufferingError="bufferingError",t.FragBuffered="fragBuffered",t.ManifestLoaded="manifestLoaded",t.LevelSwitching="levelSwitching",t.StreamEnded="streamEnded"}(al||(al={})),function(t){t.Http="http",t.Https="https"}(cl||(cl={}));var dl=h(1995);const ul={enableWorker:!1,capLevelToPlayerSize:!0,cnxRenderWindow:window,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:0};class pl extends ol{constructor(t,i,e,s,n,r,o,h){super(t,i),this.uy=e,this.uF=s,this.XD=n,this.pF=r,this.pl=o,this.fF=h,this.gF=new rt.x,this.onHlsEvent=this.gF.asObservable(),this.yy=[],this.mF=_.Auto,this.yF=320,this.bF=!1,this.xF=!1,this.wF=!1,this.handlerType=hl.HLS,this._F=new nl.X(0),this.PF=!1,this.wy=()=>{this.xy.off(this.uy.Events.MEDIA_ATTACHED,this.wy);const t=this.SF(this.AF);this.xy.loadSource(t),this.xy.once(this.uy.Events.MANIFEST_PARSED,this._y)},this._y=()=>{this.xy.off(this.uy.Events.MANIFEST_PARSED,this._y),this.xy.on(this.uy.Events.LEVEL_SWITCHING,this.IF),this.xy.on(this.uy.Events.LEVEL_SWITCHED,this.kF),this.xy.on(this.uy.Events.FRAG_BUFFERED,this.CF),this.xy.on(this.uy.Events.FRAG_LOADING,this.TF),this.xy.on(this.uy.Events.FRAG_LOADED,this.MF),this.xy.on(this.uy.Events.BUFFER_APPENDING,this.EF),this.xy.on(this.uy.Events.BUFFER_APPENDED,this.BF),this.xy.on(this.uy.Events.BUFFER_EOS,this.LF),this.AF=null,this.Py(),this.OF(),this.RF(),this.DF.resolve()},this.FF=()=>{this.AF=null,this.gy.removeEventListener(w.LoadedMetadata,this.FF),this.$F.resolve()},this.OF=()=>{const t=this.yy.map((t=>({videoHeight:t.height,isHD:t.height>=720,label:t.level.toString()})));this.gF.next({type:al.ManifestLoaded,payload:{qualityList:t}})},this.CF=()=>{this.gF.next({type:al.FragBuffered})},this.TF=()=>{this.bF=!0},this.MF=()=>{this.bF=!1},this.EF=()=>{this.xF=!0},this.BF=()=>{this.xF=!1},this.LF=()=>{this.gF.next({type:al.StreamEnded})},this.vy=(t,i)=>{if(i.details===this.uy.ErrorDetails.BUFFER_STALLED_ERROR&&(this.bF||this.xF?this.gF.next({type:al.BufferingError}):(this.wF||(this.shouldRecoverMediaError()&&this.xy.recoverMediaError(),this.gy.play().then((()=>{this.wF=!1})).catch((()=>{this.wF=!1}))),this.wF=!0)),i.fatal)switch(i.type){case this.uy.ErrorTypes.NETWORK_ERROR:if(i.details===this.uy.ErrorDetails.MANIFEST_PARSING_ERROR)return void this.jF("hls_network_error_manifest_parsing_error_FATAL");if(i.details===this.uy.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.gF.next({type:al.UnexpectedError});if(i.details===this.uy.ErrorDetails.LEVEL_LOAD_ERROR&&this._F.next(this._F.value+1),this.PF)return this.LF(),void(this.PF=!1);this.xy.startLoad();break;case this.uy.ErrorTypes.MEDIA_ERROR:this.xy.recoverMediaError();break;default:this.jF("hls_unexpected_error_FATAL",`type_${i.type}_details_${i.details}`)}else i.type===this.uy.ErrorTypes.MEDIA_ERROR&&i.details===this.uy.ErrorDetails.BUFFER_APPENDING_ERROR&&this.jF("hls_media_error_buffer_appending_error"),i.type===this.uy.ErrorTypes.NETWORK_ERROR&&i.details===this.uy.ErrorDetails.MANIFEST_PARSING_ERROR&&this.jF("hls_network_error_manifest_parsing_error")},this.VF=()=>{this.jF("hls_video_tag_error",`code_${this.gy.error.code}_message_${this.gy.error.message}`)},this.kF=(t,i)=>{this.yF=this.yy.find((t=>t.level===i.level)).height,this.$D.next(this.currentQualitySettings.height),this.jD.next(this.currentQualitySettings)},this.IF=()=>{this.gF.next({type:al.LevelSwitching})},this.uy.isSupported()&&(this.xy=this.NF(),this.pF&&(this.xy.autoLevelCapping=1)),this.yF=this.XD.height,this.mF=this.XD.quality}start(){}get liveSyncPosition(){if(this.xy)return this.xy.liveSyncPosition}setSource(t,i=!1){this.UF=t.id,this.zD(t),this.AF=t,i&&this.attachMedia()}attachMedia(){return!this.xy&&this.uy.isSupported()&&(this.xy=this.NF()),new Promise((t=>{if(this.xy?this.xy.on(this.uy.Events.ERROR,this.vy):this.gy.addEventListener(w.Error,this.VF),this.initLiveStreamRetry(),this.AF){const i=this.JD()?[this.JD()]:[];this.GD(i),this.xy?this.HF().then((()=>{t()})):this.qF().then((()=>{t()}))}else t()}))}detachMedia(){this.yy=[],this.xy?(this.xy.detachMedia(),this.destroy()):(this.gy.removeAttribute("src"),this.gy.removeEventListener(w.LoadedMetadata,this.FF),this.gy.removeEventListener(w.Error,this.VF))}setQuality(t){this.mF=t.quality,this.yF=t.height,this.xy&&this.RF(),this.$D.next(this.currentQualitySettings.height),this.jD.next(this.currentQualitySettings)}get currentQualitySettings(){return{quality:this.mF,height:this.yF}}onQualityChanged(){return new Promise((()=>{}))}shouldRecoverMediaError(){return!this.fF}destroy(){this.xy?(this.zF(),this.xy.destroy(),this.xy=null):(this.gy.removeEventListener(w.LoadedMetadata,this.FF),this.gy.removeEventListener(w.Error,this.VF))}updateSubtitleTrackSource(t){this.YD(t)}HF(){return this.DF=new dl.C,this.xy.attachMedia(this.gy),this.xy.once(this.uy.Events.MEDIA_ATTACHED,this.wy),this.DF.promise}qF(){return this.$F=new dl.C,this.gy.src=this.SF(this.AF),this.gy.addEventListener(w.LoadedMetadata,this.FF),this.$F.promise}zF(){this.xy.off(this.uy.Events.MEDIA_ATTACHED,this.wy),this.xy.off(this.uy.Events.MANIFEST_PARSED,this._y),this.xy.off(this.uy.Events.ERROR,this.vy),this.xy.off(this.uy.Events.LEVEL_SWITCHING,this.IF),this.xy.off(this.uy.Events.LEVEL_SWITCHED,this.kF),this.xy.off(this.uy.Events.FRAG_BUFFERED,this.CF),this.xy.off(this.uy.Events.FRAG_LOADING,this.TF),this.xy.off(this.uy.Events.FRAG_LOADED,this.MF),this.xy.off(this.uy.Events.BUFFER_APPENDING,this.EF),this.xy.off(this.uy.Events.BUFFER_APPENDED,this.BF),this.xy.off(this.uy.Events.BUFFER_EOS,this.LF)}Py(){this.xy.levels.forEach(((t,i)=>{this.pF&&i>1||this.yy.find((({height:i})=>i===t.height))||this.yy.push({level:i,height:t.height})}))}jF(t,i){(0,s.n)({message:t,exception:this.UF,level:s.D.WARN,callStack:i}),this.gF.next({type:al.UnexpectedError})}RF(){if(this.mF===_.Auto)this.xy.currentLevel=-1;else try{this.xy.currentLevel=this.yy.find((t=>t.height===this.yF)).level}catch(t){(0,s.n)({message:"HlsSourceHandler_quality_not_present_in_hls_manifest",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}SF(t){try{const i=t.getHlsSource(),e=(0,wt.bx)(i);return e&&e.protocol?this.pl.appendParamsToUrl(i):this.pl.appendParamsToUrl(`${this.uF}:${i}`)}catch(t){(0,s.n)({exception:t.message,message:"HlsSourceHandler_undefined_sourceMeta",level:s.D.CRITICAL,callStack:t.stack},{throttle:5,sendMaxLog:!1})}}NF(){return new this.uy(Object.assign(Object.assign({},ul),{cnxRenderWindow:this._m.global}))}initLiveStreamRetry(){var t;null===(t=this.WF)||void 0===t||t.unsubscribe(),this.WF=this._F.pipe(function(t){for(var i,e,s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];var r=null!==(i=Jn(s))&&void 0!==i?i:Ji,o=null!==(e=s[0])&&void 0!==e?e:null,h=s[1]||1/0;return(0,In.e)((function(i,e){var s=[],n=!1,a=function(t){var i=t.buffer;t.subs.unsubscribe(),(0,qi.P)(s,t),e.next(i),n&&c()},c=function(){if(s){var i=new Ni.w0;e.add(i);var n={buffer:[],subs:i};s.push(n),Un(i,r,(function(){return a(n)}),t)}};null!==o&&o>=0?Un(e,r,c,o,!0):n=!0,c();var l=(0,kn.x)(e,(function(t){var i,e,n=s.slice();try{for(var r=(0,Vi.XA)(n),o=r.next();!o.done;o=r.next()){var c=o.value,l=c.buffer;l.push(t),h<=l.length&&a(c)}}catch(t){i={error:t}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(i)throw i.error}}}),(function(){for(;null==s?void 0:s.length;)e.next(s.shift().buffer);null==l||l.unsubscribe(),e.complete(),e.unsubscribe()}),void 0,(function(){return s=null}));i.subscribe(l)}))}(5e3),(0,ir.h)((t=>t.length<3))).subscribe((()=>{this.PF=!0,this._F.next(0)}))}}var fl;!function(t){t.Disabled="disabled",t.Hidden="hidden",t.Showing="showing"}(fl||(fl={}));class gl{constructor(t,i,e,n){this.gy=t,this.Dy=i,this.vu=n,this.JF=!1,this.QF=!1,this.YF=fl.Hidden,this.Fy=!1,this.ZF=new rt.x,this.KF=!1,this.t$=t=>{let i=!1;switch(t.type){case w.Play:if(!this.Fy&&this.vu.config.isInAppAndroid)return void this.pause();this.JF=!0;break;case w.Playing:clearTimeout(this.i$),this.vu.config.os.os===A.M.Ios&&this.KF&&((0,it.UR)(this.gy),this.KF=!1),this.e$(),this.ZF.next({type:t.type});break;case w.Timeupdate:this.s$()&&(i=this.n$(t.type)),this.ZF.next({type:t.type,payload:{payload:this.JF,isCorruptedCurrentTime:i}});break;case w.Ended:this.ZF.next({type:t.type,payload:{isCorruptedCurrentTime:i}});break;case w.Seeked:i=this.n$(t.type),this.ZF.next({type:t.type,payload:{isCorruptedCurrentTime:i}});break;case w.Error:clearTimeout(this.i$);const e=this.gy.error?this.gy.error.message:"";this.ZF.next({type:t.type,payload:{payload:e}});break;case w.LoadedMetadata:this.QF=!0,(0,H.kE)(this.r$)&&(this.currentTime=this.r$,this.r$=null),this.ZF.next({type:t.type});break;case w.Pause:clearTimeout(this.i$),this.ZF.next({type:t.type});break;default:this.ZF.next({type:t.type})}},this.play=()=>{this.Fy=!0,clearTimeout(this.i$),this.i$=setTimeout((()=>{this.ZF.next({type:w.Error,payload:{payload:"play_timeout"}})}),25e3),this.gy.play().catch((t=>{(0,s.n)({message:"ContentPlayer_play_promise_catch",exception:t,level:s.D.INFO})}))},this.pause=()=>{clearTimeout(this.i$),this.gy.pause(),this.JF=!1,this.Fy=!1},this.volume=e,this.nF()}get videoEvents(){return this.ZF.asObservable()}nF(){this.Dy.forEach((t=>{this.gy.addEventListener(t,this.t$)}))}n$(t){return this.vu.config.os.os===A.M.Ios&&this.gy.currentTime>this.gy.duration&&((0,it.UR)(this.gy),(0,s.n)({message:"ContentPlayer__CorruptedCurrentTime",callStack:`Event type: ${t}`,level:s.D.WARN},{throttle:10}),!0)}s$(){return this.gy.currentTime-this.gy.duration>.1}e$(){this.gy.textTracks&&0!==this.gy.textTracks.length&&Object.keys(this.gy.textTracks).forEach((t=>{this.YF===this.gy.textTracks[t].mode&&(this.gy.textTracks[t].mode=this.YF===fl.Hidden?fl.Disabled:fl.Hidden),this.gy.textTracks[t].mode=this.YF}))}setUnfreeze(){this.KF=!0}set poster(t){(0,H.QM)(t)&&(this.gy.poster=t)}get poster(){return this.gy.poster}get volume(){return this.Ud}set volume(t){this.Ud=t<=1?t:t/100,this.gy.volume=this.Ud,(0,it.Q1)(this.gy,this.Ud)}get currentTime(){return this.gy.currentTime}set currentTime(t){this.QF?this.gy.currentTime=t:this.r$=t}get duration(){return this.gy.duration}get playing(){return this.JF}destroy(){this.Dy.forEach((t=>{this.gy.removeEventListener(t,this.t$)}))}setTrackModes(t){this.YF=t,this.e$()}setMetaLoaded(t){this.QF=t}setCrossOriginAttribute(){this.gy.getAttribute("crossorigin")||this.gy.setAttribute("crossorigin","anonymous")}setPoster(t){this.poster=t.getThumbnailUrl(this.gy.clientWidth,this.gy.clientHeight)}getCurrentTrack(){return this.gy.textTracks&&0!==this.gy.textTracks.length?this.gy.textTracks[0]:null}}const ml={height:0,quality:_.Auto};var yl=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class vl extends a._{constructor(t,i,e,s,n,r,o={},h,a){super(),this.mediator=t,this.vu=i,this._m=e,this.gu=s,this.Ha=n,this.o$=r,this.RD=o,this.h$=h,this.XD=a,this.a$=!0,this.c$=!1,this.l$=!1,this.Uy=new rt.x,this.fl=.01,this.ZD=[],this.d$=t=>{var i;const e={[al.LevelSwitching]:B,[al.StreamEnded]:L,[al.FragBuffered]:E,[al.BufferingError]:M}[t.type];if((0,H.QM)(e))this.mediator.publish(this,e);else{if(t.type===al.UnexpectedError)return this.l$=!0,void this.u$();if(t.type===al.ManifestLoaded){const e=null===(i=t.payload)||void 0===i?void 0:i.qualityList;this.mediator.publish(this,D,{payload:{qualityList:e,videoMeta:this.p$}}),this.f$.setMetaLoaded(!0)}}},this.g$=()=>{let t;this.currentTrack.activeCues&&this.currentTrack.activeCues.length>0&&(t=this.currentTrack.activeCues[0]),this.mediator.publish(this,bt[bt.CaptionUpdate],{payload:t})},this.qD=()=>{this.currentTrack&&(this.currentTrack.mode=this.m$?fl.Hidden:fl.Disabled,this.currentTrack.oncuechange=this.g$)},this.y$(),this.v$.appendChild(this.gy),this.gu.appendChild(this.v$),this.XD=this.XD||ml,this.b$=new ll(e,this.Ha,this.gu,this.gy,this.RD,this.XD),this.vu.config.os.os===A.M.Ios&&this.vu.services.ViewabilityService.on(this.gy,((t,i)=>{!i&&t||this.f$.setUnfreeze()}),{threshold:this.fl})}initHlsSourceHandler(t){const i=this._m.isHttpsProtocolUsed()?cl.Https:cl.Http,e=(0,H.QM)(this.vu.config.bundleID);this.Qy=new pl(this._m,this.gy,t,i,this.XD,e,this.vu.services.UrlSuffixerService,this.vu.config.browser.browserType===_e.lI.Safari)}x$(){return yl(this,void 0,void 0,(function*(){if(this.Qy)return!0;const t=yield Gs();return t&&t.isSupported()||(i=this.gy,(0,H.QM)(i.canPlayType("application/vnd.apple.mpegurl")))?(this.initHlsSourceHandler(t),this.w$(),this._$(),!0):(this.a$=!1,(0,s.n)({message:"Hls_not_supported",level:s.D.INFO}),!1);var i}))}get onVideoEvents(){return this.Uy.asObservable()}start(){try{this.Dy=Object.values(w),this.f$=new gl(this.gy,this.Dy,this.o$,this.vu),this.P$(),this.w$(),this.S$()}catch(t){(0,s.n)({message:"VideoHandler_start",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}u$(){this.A$=this.currentTime,this.setSource(this.p$,!0,!0),this.I$.attachMedia().then((()=>{this.f$.play()})).catch((t=>{this.l$=!1,this.Uy.next(w.Error),(0,s.n)({message:"VideoHandler_hls_error_attach_media",exception:t.message,callStack:t.callStack,level:s.D.CRITICAL})}))}_$(){this.ZD.push(this.Qy.onHlsEvent.subscribe((t=>this.d$(t))))}P$(){this.C$(this.b$)}w$(){this.Qy&&this.C$(this.Qy)}C$(t){t.start(),this.T$(t)}S$(){this.f$.videoEvents.subscribe((t=>{if(t.payload&&t.payload.isCorruptedCurrentTime)this.I$.handlerType===hl.HLS&&this.u$();else{if(t.type===w.Canplay&&this.h$&&(this.currentTime=this.h$,this.h$=null),this.Uy.next(t.type),this.l$&&(this.l$=!1,t.type===w.Playing&&(this.f$.currentTime=this.A$)),t.type===w.Error)return(0,s.n)({message:"VideoHandler_play_error_event",exception:t.payload.payload,level:s.D.WARN}),void this.mediator.publish(this,C,t.payload);this.mediator.publish(this,t.type,t.payload)}}))}T$(t){this.ZD.push(t.onTrackLoaded.subscribe((()=>this.qD())),t.onQualityChange.subscribe((t=>this.onQualityChanged(t))),t.onCurrentQuality.subscribe((t=>{this.mediator.publish(this,R,{payload:t})})))}M$(t,i=!1){return yl(this,void 0,void 0,(function*(){if(i)this.E$();else{if(t){if(yield this.x$())return void(this.I$=this.Qy)}this.E$()}}))}get width(){return this.v$.getBoundingClientRect().width}get height(){return this.v$.getBoundingClientRect().height}get currentTime(){return this.f$.currentTime}set currentTime(t){this.f$.currentTime=t}forceCurrentTime(t){this.f$.currentTime=t,this.h$=t}get duration(){return this.f$.duration}get volume(){return this.f$.volume}set volume(t){this.f$.volume=t}get playing(){return this.f$.playing}get isIosFullscreen(){return this.c$}set isIosFullscreen(t){this.c$=t,this.c$&&this.m$?this.B$():this.L$()}get currentQualitySettings(){var t;return null===(t=this.I$)||void 0===t?void 0:t.currentQualitySettings}hide(){(0,it.cn)(this.v$,d.pT)}show(){(0,it.IV)(this.v$,d.pT)}setSource(t,i=!1,e=!1){return yl(this,void 0,void 0,(function*(){try{this.p$=t,this.I$&&this.I$.detachMedia();const s=(0,H.QM)(t.hlsFilePath);return yield this.M$(s,e),t&&t.subtitles&&this.f$.setCrossOriginAttribute(),this.f$.setPoster(t),this.f$.setTrackModes(this.m$?fl.Hidden:fl.Disabled),i&&this.f$.setMetaLoaded(!1),this.I$.setSource(t,!0),void this.mediator.publish(this,T)}catch(t){return void(0,s.n)({message:"VideoHandler_set_video_source",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}))}setQuality(t){this.I$.setQuality(t)}pause(){this.f$.pause(),this.Uy.next(w.Pause)}play(){var t;return this.O$=new dl.C,null===(t=this.I$)||void 0===t||t.attachMedia().then((()=>{this.f$.play()})).catch((t=>{this.Uy.next(w.Error),(0,s.n)({message:"VideoHandler_public_play_attach_media_error",exception:t.message,callStack:t.callStack,level:s.D.CRITICAL})})),this.O$.promise}hasSubtitles(){return(0,l.BZ)(this.p$.subtitles)}getSubtitles(){return this.p$.subtitles}toggleCaptions(){this.I$.updateSubtitleTrackSource(this.p$.getDefaultSubtitle()),this.m$=!0,this.f$.setTrackModes(fl.Hidden)}showCaptions(t){this.I$.updateSubtitleTrackSource(this.p$.subtitles.find((i=>i.file===t))),this.m$=!0,this.f$.setTrackModes(fl.Hidden)}hideCaptions(){this.I$.updateSubtitleTrackSource(),this.m$=!1,this.f$.setTrackModes(fl.Disabled),this.mediator.publish(this,bt[bt.CaptionUpdate])}destroy(){this.I$.destroy(),this.v$.parentNode.removeChild(this.v$)}y$(){this.v$=this._m.createElementByString('<cnx class="cnx-video-wrapper"></cnx>'),this.gy=this._m.createElementByString('<video class="cnx-video-tag"></video>'),this.RD.os===A.M.Ios&&(this.gy.setAttribute("playsinline",""),this.gy.setAttribute("webkit-playsinline",""))}E$(){this.I$=this.b$,this.I$.setQuality({quality:_.Auto,height:0})}onQualityChanged(t){const i=this.f$.playing;this.h$=this.currentTime,i&&this.I$.onQualityChanged&&this.I$.onQualityChanged().then((()=>{this.f$.setMetaLoaded(!1),this.f$.play()})),this.mediator.publish(this,O,{payload:t})}get currentTrack(){return this.f$.getCurrentTrack()}B$(){this.currentTrack&&(this.currentTrack.oncuechange=null,this.mediator.publish(this,bt[bt.CaptionUpdate]),this.currentTrack.mode=fl.Showing)}L$(){if(this.currentTrack){switch(this.currentTrack.mode){case fl.Showing:case fl.Hidden:this.m$=!0;break;case fl.Disabled:this.m$=!1}this.mediator.publish(this,this.m$?bt[bt.CaptionOn]:bt[bt.CaptionOff])}this.qD()}}class bl extends class{constructor(t,i,e,n,r,o){var h,a;if(this.Yu=t,this.pl=e,this.R$=r,this.ha=o,this.D$=[],this.F$=[],this.$$=[],this.j$=[],this.V$={insights:[],insightsFallback:!1},this.uM=[],this.N$=i.title,this.tl=i.altText,this.U$=i.description,this.My=i.clickUrl,this.D$=i.keywordList,this.H$=i.languageId,this.F$=i.trackList,this.F$&&this.F$.length>0){this.F$.forEach((t=>{t.file=this.pl.appendParamsToUrl(this.q$(ze.n.endPoints.base.video,t.file))}));const t=this.F$.findIndex((t=>t.title.indexOf("English")>-1));if(t>-1){const i=this.F$.splice(t,1);this.F$.unshift(...i)}}this.z$=i.thumbnail,this.fL=i.duration,this.j$=i.customFields,this.W$=i.hlsFilePath,this.J$=i.sourceItemId,(0,l.BZ)(null===(h=this.R$)||void 0===h?void 0:h.insights)?(this.V$.insightsFallback=!1,this.V$.insights=this.R$.insights):(this.V$.insightsFallback=!0,this.V$.insights=i.videoIndexes),Array.isArray(null===(a=this.R$)||void 0===a?void 0:a.insights)&&this.R$.insights.length!==i.videoIndexes.length&&(0,s.n)({message:"VideoSourceMeta_insights_mismatch",exception:`media:${this.Yu}, revision:${n}`,callStack:`insights:${this.R$.insights} videoIndexes:${i.videoIndexes}`,level:s.D.WARN},{sendMaxLog:!1}),(0,l.BZ)(i.renditionList)&&(this.$$=this.Q$(i.renditionList),this.Y$(i.renditionList))}Q$(t){return t.sort(((t,i)=>t.height-i.height))}setAvailableQualities(t){this.uM=t}Y$(t){(0,l.qy)("height",t).forEach(((t,i)=>{this.uM.push({videoHeight:t.height,label:`${t.height}p`,isHD:t.height>=720})}))}X$(t,i){return this.$$.find((e=>e.codec===t&&e.height===i))}q$(t,i){let e=`${t}${this.Yu}/`;return(0,H.QM)(this.ha)?e+=`${this.ha}/${i}`:e+=i,e}Z$(t,i){const e=(0,_t.DE)(t,this.uM.map((t=>t.videoHeight)));return this.X$(i,e)}get hlsFilePath(){return this.W$}getAvailableQualities(){return this.uM}getClosestSourceQuality(t){let i;const e=(0,_t.DE)(t,this.uM.map((t=>t.videoHeight)));return this.uM.forEach((t=>{t.videoHeight===e&&(i=t)})),i}getSources(t,i){const e=[];return i.forEach((i=>{const s=this.Z$(t,i.id);(0,l.BZ)(e)||s&&e.push({src:this.pl.appendParamsToUrl(this.q$(ze.n.endPoints.base.video,s.file)),type:i.type})})),e}getHlsSource(){return this.q$(ze.n.endPoints.base.video,this.W$)}getThumbnailUrl(t,i){const e=this.q$(ze.n.endPoints.base.image,this.z$);return aa.getSmartCroppedImageUrl(e,t,i,this.pl)}getDefaultSubtitle(){const t=this.F$.find((t=>t.title.indexOf("English")>-1));return t||this.F$[0]}get title(){return this.N$}get altText(){return(0,H.$K)(this.tl)?this.tl:""}get description(){return this.U$}get clickUrl(){return this.My}get keywords(){return this.D$}get languageId(){return this.H$}get sourceItemId(){return this.J$}get subtitles(){return(0,l.BZ)(this.F$)?this.F$:void 0}get spriteSheet(){return this.K$}get duration(){return this.fL}get id(){return this.Yu}get customFields(){return this.j$}get insights(){return this.V$}get sentimentAnalysis(){var t;return null===(t=this.R$)||void 0===t?void 0:t.sentimentAnalysis}}{constructor(t,i){super(null,t,i,null,null),this.pl=i}getSources(t,i){return i.map((({id:i,type:e})=>{const s=this.Z$(t,i);if(s)return{type:e,src:this.pl.appendParamsToUrl(`${s.file}`)}})).filter((t=>t))}getThumbnailUrl(t,i){return aa.getSmartCroppedImageUrl(this.z$,t,i,this.pl)}}class xl extends il{constructor(t,i,e,s,n,o=0,h={}){super(t,i,s,n,e.services.UrlSuffixerService),this.vu=e,this.o$=o,this.RD=h,this.tj=.1,this.type=r.ProtoMediaTypeEnum.Video,this.ij={[at.Landscape]:{renditionList:[],videoSourceMeta:void 0},[at.Portrait]:{renditionList:[],videoSourceMeta:void 0}},this.ej=null,this.getClosestSourceQuality=t=>(this.nj||this.rj(),this.ij[this.nj].videoSourceMeta.getClosestSourceQuality(t)),this.oj(),this.hj()}oj(){this.gD.videoRendition.renditions.forEach((({codec:t,height:i,width:e,videoUrl:s})=>{const n={codec:Aa.ProtoPlayspaceCodecEnum[t],height:i,file:s};i<e?this.ij[at.Landscape].renditionList.push(n):this.ij[at.Portrait].renditionList.push(n)}));const t=this.ij[at.Landscape].renditionList,i=this.ij[at.Portrait].renditionList;(0,l.BZ)(t)||(0,l.BZ)(i)?((0,l.BZ)(t)||(this.ij[at.Landscape].renditionList=i),(0,l.BZ)(i)||(this.ij[at.Portrait].renditionList=t)):(0,s.n)({message:"SlideVideo_no_renditions",level:s.D.CRITICAL})}hj(){Object.keys(this.ij).forEach((t=>{const i=this.ij[t];i.videoSourceMeta=new bl({title:this.gD.title,altText:this.gD.altText,clickUrl:this.gD.clickUrl,renditionList:i.renditionList,thumbnail:this.gD.imageUrl},this.pl)}))}aj(t){this.cj=new vl(this,this.vu,this._m,t,this.Ha,this.o$,this.RD,this.tj)}lj(){this.subscribe(O,this.cj,(({payload:t})=>{const i=this.getClosestSourceQuality(t);this.mediator.publish(this,O,{payload:i.videoHeight})}))}rj(){const{clientHeight:t,clientWidth:i}=this.LR;this.nj=t<i?at.Landscape:at.Portrait}dj(t){let i;this.cj&&(t&&(i=this.cj.currentTime),this.cj.setSource(this.ij[this.nj].videoSourceMeta,!0).then((()=>{t&&this.cj.forceCurrentTime(i),this.cj.playing&&this.uj()})))}yD(){return'<cnx class="cnx-ui-ps-video-container"></cnx>'}uj(){this.cj.play().catch((()=>{}))}play(){this.isLoaded&&this.uj()}pause(){this.isLoaded&&this.cj.pause()}reset(){this.mD&&(this.cj.currentTime=this.tj)}load(t){this.isLoaded||(t.appendChild(this.LR),this.isLoaded=!0,this.aj(this.LR),this.lj(),this.cj.start(),this.rj(),this.dj(),this.ej&&this.setQuality(this.ej),this.pause())}getAvailableQualities(){return this.ij[this.nj].videoSourceMeta.getAvailableQualities()}get currentQuality(){return this.cj.currentQualitySettings}get volume(){return this.isLoaded?this.cj.volume:this.o$}set volume(t){this.isLoaded?this.cj.volume=t:this.o$=t}setQuality(t){this.cj?this.cj.setQuality(t):this.ej=t}onSlideResizeCallback(){const t=this.nj;this._m.cancelRequestAnimationFrame(this.pj),this.pj=this._m.requestAnimationFrameHelper((()=>{if(this.rj(),t!==this.nj){const t=!0;this.dj(t)}}))}}class wl{constructor(t){this.eL=t}get template(){return`\n        <cnx class="cnx-ui-ps-slide-wrapper">\n            <cnx class="cnx-ui-ps-slide"></cnx>\n            <cnx class="cnx-ui-ps-slide-bg"></cnx>\n            <cnx class="cnx-ui-ps-cta-wrapper">\n                ${this.gj()}\n            </cnx>\n        </cnx>\n        `.trim()}gj(){return this.eL.disableCTARendering?"":`[[${So.CtaButton}]]`}}class _l extends Ro{enterState(){super.enterState();const t=this.context.getComponent(So.PlayspaceProgressBar);t&&t.startProgress();const i=this.context.getComponent(So.CtaButton);i&&i.startProgress()}exitState(){super.exitState()}updateDuration(){const t=this.context.getComponent(So.PlayspaceProgressBar);t&&t.startProgress()}}class Pl extends Fo{enterState(){super.enterState();const t=this.context.getComponent(So.PlayspaceProgressBar);t&&t.pauseProgress();const i=this.context.getComponent(So.CtaButton);i&&i.pauseProgress()}exitState(){super.exitState()}updateDuration(){}}class Sl extends Pl{enterState(){super.enterState()}exitState(){super.exitState()}}class Al extends Pl{enterState(){super.enterState()}exitState(){super.exitState()}}class Il extends Pl{enterState(){super.enterState()}exitState(){super.exitState()}}class kl extends No{constructor(t,i,e,s,n,r,o,h,a){super(t,i,e,n,new Vc(e,a,s,i,{isMobile:r})),this.mediator=t,this.$container=i,this._m=e,this.LL=o,this.mR=[So.CtaButton],this.SR=new Jc,this.SC={[P.PlayingState]:new _l(this),[P.PausedState]:new Pl(this),[P.StoppedState]:new Sl(this),[P.HiddenState]:new Al(this),[P.PrerollState]:new Il(this),[P.PostrollState]:new Il(this)},this.mj(),this.SC[h].enterState(),this.MR(),this.ER(!1)}mj(){const t=this.getComponent(So.CtaButton);t&&t.setFooterElement(this.LL)}MR(t=[]){this.SR.setCapabilityList(t)}ER(t=!0){const{excludedComponents:i,includedComponents:e}=this.SR.getComponentList();i.map((t=>this.getComponent(t))).forEach((i=>i&&i.hideComponent(t))),e.map((t=>this.getComponent(t))).forEach((i=>i&&i.showComponent(t)))}RR(t){switch(t){case ua.CallToAction:this.mediator.publish(this,ua.GeneralClickInteraction,{payload:r.ProtoMediaClickTypeEnum.UrlClick});break;case ko.Z[ko.Z.Scroll]:this.mediator.publish(this,ua.GeneralClickInteraction,{payload:r.ProtoMediaClickTypeEnum.ScrollClick})}}handleComponentEvent(t,i,e){this.RR(t),t===ua.CallToAction?(0,H.QM)(i.payload)?this.mediator.publish(this,ua.CallToAction,i):this.mediator.publish(this,bt[bt.Next]):this.mediator.publish(this,t,i)}handleCapabilityList(t){this.MR(t),this.ER(),this.mR.forEach((i=>{const e=this.getComponent(i);e&&e.handleCapabilities(t)}))}}class Cl extends a._{constructor(t,i,e,s,n,r,o,h,a,c){super(),this.mediator=t,this.gD=i,this._m=e,this.sC=s,this.Ha=n,this.yj=r,this.Yt=o,this.eL=h,this.LL=a,this.Fd=c,this.vj=[{type:Da.TopLogo,metadata:{}}],this.nC=this._m.createElementByString(`<cnx class="${io}"></cnx>`),this.bj(),this.xj=this.nC.querySelector(".cnx-ui-ps-slide")}get $container(){return this.nC}get slideCapabilityList(){return this.vj}get metadata(){return this.gD}get media(){return this.yj}load(){this.yj.load(this.xj)}get clickUrl(){return this.gD.clickUrl}updateCapabilityMetadata(t){if(!(0,l.BZ)(this.vj))return;const i=this.vj.find((({type:i})=>i===t.type));i&&(i.metadata=Object.assign(Object.assign({},i.metadata),t.metadata))}changeState(t){this.GR.changeState(t)}bj(){this.GR=new kl(this,this.nC,this._m,this.Ha,this.yD(),this.Yt,this.LL,this.Fd.playbackMode===Aa.ProtoPlayerPlaybackModeEnum.ClickToPlay?P.StoppedState:P.PausedState,this.sC),this.subscribe(ua.CallToAction,this.GR,(({payload:t})=>{this.mediator.publish(this,ua.CallToAction)})),this.relay(ua.GeneralClickInteraction,this.GR,this,this.mediator),this.subscribe(bt[bt.Next],this.GR,(()=>{this.mediator.publish(this,bt[bt.Next])}))}yD(){return new wl(this.eL).template}wj(t,i){this.vj.push({type:t,metadata:i})}_j(){const t=this.Pj(this.gD);if(!t)return;const i={label:t,useTransition:!0};this.wj(Da.TopSlideTitle,i)}Pj(t){const i=t.publisherName||t.title,e=this._m.stripHtmlTags(i).trim();return t.publisherName?`by <em>${e}</em>`:e}onSlideTransitionStart(t){this.GR&&this.GR.handleCapabilityList(t)}}class Tl extends Cl{constructor(t,i,e,n,r,o,h,a,c,d){super(t,i,e,n,r,o,h,a,c,d),this.type=Aa.ProtoPlayspaceSlideTypeEnum.BulletList,(0,H.as)(i.bulletListMetadata)&&(0,l.BZ)(this.metadata.bulletListMetadata.items)?(this.Sj(),this.onSlideTransitionStart(this.vj)):(0,s.n)({message:"BulletSlide_no_metadata",level:s.D.CRITICAL})}Sj(){this.Aj(),this._j(),this.Ij()}Aj(){const{title:t,items:i}=this.gD.bulletListMetadata;i.length>4&&(i.length=4);const e=Da.SlideTitle,s={bulletChunkList:i,titleType:Fa.Bullet};(0,H.QM)(t)&&(s.label=t),this.wj(e,s)}Ij(){const t={label:this.gD.storyTitle,useFallbackLabel:!0};this.wj(Da.TopStoryTitle,t)}}class Ml extends Cl{constructor(t,i,e,n,r,o,h,a,c,d){super(t,i,e,n,r,o,h,a,c,d),this.type=Aa.ProtoPlayspaceSlideTypeEnum.Description,(0,H.as)(i.descriptionMetadata)&&(0,l.BZ)(this.metadata.descriptionMetadata.chunkList)?(this.kj(),this.Cj(),this.onSlideTransitionStart(this.vj)):(0,s.n)({message:"DescriptionSlide_no_metadata",level:s.D.CRITICAL})}kj(){const{chunkList:t,label:i}=this.gD.descriptionMetadata;let e=!1;const s=t=>(0,H.r)(t);(0,H.as)(i)&&(0,H.QM)(i.text)&&(e=!0,i.colorScheme=s(i.colorScheme)?i.colorScheme:Aa.ProtoPlayspaceColorSchemeEnum.Primary),(0,l.BZ)(t)&&t.forEach(((t,i)=>{t.colorScheme=0!==i||e?s(t.colorScheme)?t.colorScheme:Aa.ProtoPlayspaceColorSchemeEnum.Secondary:s(t.colorScheme)?t.colorScheme:Aa.ProtoPlayspaceColorSchemeEnum.Primary}))}Cj(){this.Tj(),this.Ij(),this._j()}Tj(){const{chunkList:t,label:i}=this.gD.descriptionMetadata,e=Da.SlideTitle,s={descriptionChunkList:t,titleType:Fa.Description};(0,H.as)(i)&&(s.label=i.text,s.labelColorScheme=i.colorScheme),this.wj(e,s)}Ij(){const t={label:this.gD.storyTitle,useFallbackLabel:!0};this.wj(Da.TopStoryTitle,t)}}const El={[r.ProtoMediaTypeEnum.Image]:"Read more",[r.ProtoMediaTypeEnum.Video]:"Continue video"};class Bl extends Cl{constructor(t,i,e,s,n,r,o,h,a,c){super(t,i,e,s,n,r,o,h,a,c),this.type=Aa.ProtoPlayspaceSlideTypeEnum.Default,this.Cj(),this.onSlideTransitionStart(this.vj)}Cj(){this.Mj(),this.Ej(),this.Bj(),this.Lj(),this.Oj(),this.Ij(),this.gD.publisherName&&this._j()}Mj(){const{clickUrl:t,title:i}=this.gD,e={url:t,label:i,titleType:Fa.Default};this.wj(Da.SlideTitle,e)}Ej(){this.wj(Da.PlaybackControls)}Bj(){this.wj(Da.PlaylistControls)}Oj(){const{clickUrl:t,title:i}=this.gD;if(!(0,H.QM)(t))return;const e={url:t,label:this.Rj(this.gD),title:i,ctaAlignToContent:!0};this.wj(Da.CtaButton,e)}Lj(){this.gD.mediaType===r.ProtoMediaTypeEnum.Video&&this.wj(Da.VolumeControls)}Ij(){const t=this._m.stripHtmlTags(this.gD.storyTitle).trim();if(!t)return;const i={label:t,useFallbackLabel:!0};this.wj(Da.TopStoryTitle,i)}Rj(t){const{capabilityList:i,mediaType:e}=t;if(!(0,l.BZ)(i))return El[e];const s=i.find((({type:t})=>t===Aa.ProtoPlayspaceSlideCapabilitiesEnum.CtaButton));return s&&s.metadata?s.metadata.label:El[e]}}class Ll extends Cl{constructor(t,i,e,s,n,r,o,h,a,c,l){super(t,i,e,s,n,r,h,a,c,l),this.Dj=o,this.type=Aa.ProtoPlayspaceSlideTypeEnum.Cover,this.Fj(),this.Cj(),this.onSlideTransitionStart(this.vj)}Fj(){(0,it.cn)(this.nC,tc.Cover)}Cj(){this.Mj(),this.Oj()}Mj(){const t=Da.SlideTitle,i={titleType:Fa.Cover,coverChunk:this.gD.coverMetadata,label:`${this.Dj} min. story`};this.wj(t,i)}Oj(){const t={label:"START",duration:this.gD.slideDuration,ctaAlignToContent:!1,ctaAlignToFooter:!0};this.wj(Da.CtaButton,t)}}class Ol extends Cl{constructor(t,i,e,n,r,o,h,a,c,l){super(t,i,e,n,r,o,h,a,c,l),this.type=Aa.ProtoPlayspaceSlideTypeEnum.Quote,(0,H.as)(i.quoteMetadata)?(this.Cj(),this.onSlideTransitionStart(this.vj)):(0,s.n)({message:"QuoteSlide_no_metadata",level:s.D.CRITICAL})}Cj(){this.Ij(),this._j(),this.$j()}Ij(){const t={label:this.gD.storyTitle,useFallbackLabel:!0};this.wj(Da.TopStoryTitle,t)}$j(){const{text:t,source:i}=this.gD.quoteMetadata,e=Da.SlideTitle,s={quote:t,source:i,titleType:Fa.Quote};this.wj(e,s)}}class Rl extends Cl{constructor(t,i,e,s,n,r,o,h,a,c){super(t,i,e,s,n,r,o,h,a,c),this.type=Aa.ProtoPlayspaceSlideTypeEnum.Instagram,this.Fj(),this.Cj(),this.onSlideTransitionStart(this.vj)}Fj(){(0,it.cn)(this.nC,tc.Instagram)}Cj(){this.jj(),this.Ij(),this._j(),this.Oj()}jj(){const{createdDate:t,comments:i,likes:e}=this.gD.instagramMetadata,s={label:this.gD.title,instagramMetadata:{createdDate:t,comments:i,likes:e},titleType:Fa.Instagram};this.wj(Da.SlideTitle,s)}Ij(){const t={label:this.gD.storyTitle,useFallbackLabel:!0};this.wj(Da.TopStoryTitle,t)}Oj(){const{clickUrl:t,title:i}=this.gD;if(!(0,H.QM)(t))return;const e={url:t,label:"VISIT POST",title:i,ctaAlignToContent:!1,ctaAlignToFooter:!0};this.wj(Da.CtaButton,e)}Vj(t){const i=this.metadata.instagramMetadata.handle||t.publisherName,e=this._m.stripHtmlTags(i).trim();return t.publisherName?`by <em>${e}</em>`:e}_j(){const t=this.Vj(this.gD);if(!t)return;const i={label:t,useTransition:!0};this.wj(Da.TopSlideTitle,i)}}class Dl{constructor(t,i,e,s,n,r,o,h,a,c){this.vu=t,this._m=i,this.sC=e,this.Ha=s,this.o$=n,this.RD=r,this.Yt=o,this.Nj=h,this.LL=a,this.Fd=c,this.Uj={[Aa.ProtoPlayspaceSlideTypeEnum.Description]:Ml,[Aa.ProtoPlayspaceSlideTypeEnum.Default]:Bl,[Aa.ProtoPlayspaceSlideTypeEnum.Quote]:Ol,[Aa.ProtoPlayspaceSlideTypeEnum.BulletList]:Tl,[Aa.ProtoPlayspaceSlideTypeEnum.Instagram]:Rl}}getSlide(t,i,e){const s=this.Uj[t.type]||Bl,n=this.Hj(t,i);return t.type===Aa.ProtoPlayspaceSlideTypeEnum.Cover?new Ll(i,t,this._m,this.sC,this.Ha,n,e,this.Yt,this.Nj,this.LL,this.Fd):new s(i,t,this._m,this.sC,this.Ha,n,this.Yt,this.Nj,this.LL,this.Fd)}Hj(t,i){if(t.mediaType===r.ProtoMediaTypeEnum.Video)return new xl(i,t,this.vu,this._m,this.Ha,this.o$,this.RD);if(t.mediaType===r.ProtoMediaTypeEnum.Image)return new el(i,t,this._m,this.Ha,this.vu.services.UrlSuffixerService);throw new Error("Slide not found")}}var Fl=h(7593),$l=h(5732),jl=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class Vl extends a._{constructor(t,i,e,s,n,o,h){super(),this.mediator=t,this._m=i,this.Ha=e,this.Fd=s,this.vu=n,this.DB=o,this.qj=h,this.zj=new Fl.t(Aa.ProtoPlayspaceMediaMetadataResponse,"PlayspaceContentHandler"),this.Wj=0,this.Jj=!1,this.Qj=new nl.X(!1),this.Yj=t=>{t&&(this.GR.onFirstTimeInView(),this.vu.services.ViewabilityService.off(this.DB,this.Yj))},this.Xj(),this.bj(),this.Zj(),this.Kj(),this.volume=this.Fd.soundMode===r.ProtoPlayerSoundMode.On?1:0,this.OE(),this.vu.services.ViewabilityService.on(this.DB,this.Yj,{threshold:.5})}tV(t){return new Promise(((i,e)=>{this.zj.fetchMetadata(t).then((t=>{if(window.parent.cnx_ps_slide_list&&(0,ns.Ph)("cnx_ps_slide_list",this.vu.config.pageUrl)&&(t.slides=[...window.parent.cnx_ps_slide_list,...t.slides]),t.slides=this.iV(t.slides),t.slides=this.eV(t.slides),t.slides.length>=2)i(t);else{if(this.Jj)return void e({message:"fallbackstory_already_used"});this.Jj=!0,this.sV().then((t=>{const e=this.vu.services.UrlSuffixerService.appendParamsToUrl(`${ze.n.endPoints.base.metadata}${t.storyId}/${t.activeVersionId}.bin`);i(this.tV(e))})).catch((t=>{(0,s.n)({level:s.D.CRITICAL,message:"PlayspaceContentH_error_getting_default_story"}),e(t)}))}})).catch((t=>{e(t)}))}))}sV(){return new Promise(((t,i)=>{this.nV&&t(this.nV),Qe.n.sendProtoRequest({ProtoResponse:Aa.ProtoFallbackStoryResponse,endpoint:ze.n.endPoints.api.fallbackstory,logError:!0}).then((i=>{this.nV=i,t(i)})).catch((t=>{i(t)}))}))}iV(t){const i=["newsid"],{hostname:e,pathname:s,search:n}=this.rV(this.vu.config.appPageURL),r={};(0,H.QM)(n)&&i.forEach((t=>{n.indexOf(t)>-1&&(r[t]=(0,ns.Ph)(t,n))}));let o=`${e}${s}`;return Object.keys(r).forEach((t=>{o=(0,ns.Bp)(o,t,r[t])})),t.filter((t=>{const i=(0,wt.bx)(t.clickUrl);return!(i&&i.hostname+i.pathname===o)}))}rV(t){const{hostname:i,pathname:e,search:s}=(0,H.QM)(t)?(0,wt.bx)(t):this._m.getGlobalLocationProperties();return{hostname:i,pathname:e,search:s}}eV(t){return t.filter((t=>t.type!==Aa.ProtoPlayspaceSlideTypeEnum.Stock))}Zj(){const{browserType:t}=this.vu.config.browser,{os:i,osVersion:e}=this.vu.config.os,s={disableCTARendering:this.Fd.disableCTARendering};this.zR=new Sa(this,this._m,this.vu.services.PageFocusService,this.GR.$mediaContainer,new Dl(this.vu,this._m,this.vu.services.InteractionService,this.Ha,this.Fd.soundMode===r.ProtoPlayerSoundMode.On?1:0,{browser:t,os:i,osVersion:e},this.vu.config.isMobile,s,this.GR.footer,this.Fd),this.Fd.isSeoTraffic)}Xj(){this.hV={logoUrl:this.Fd.logoUrl,isMobile:this.vu.config.isMobile,closeButtonMode:this.Fd.closeButtonMode,floatingCloseButtonMode:this.Fd.floatingSettings.floatingCloseButtonMode,isCloseButton:this.Fd.isCloseButton,sharingDestinations:this.Fd.sharingDestinations,os:this.vu.config.os.os,expandButtonEnabled:this.Fd.uiComponentsVisibility.expandButton,primaryColorList:{background:this.Fd.primaryColorList.background||d.QO.PrimaryBackground,foreground:this.Fd.primaryColorList.foreground||d.QO.PrimaryForeground},secondaryColorList:{background:this.Fd.secondaryColorList.background||d.QO.SecondaryBackground,foreground:this.Fd.secondaryColorList.foreground||d.QO.SecondaryForeground},accentColorList:{background:this.Fd.accentColorList.background,foreground:this.Fd.accentColorList.foreground||d.QO.AccentForeground},useAccentColorForProgressBar:this.Fd.useAccentColorForProgressBar,disableClickUrl:this.Fd.disableClickUrl,fontFamilySettings:this.Fd.fontFamilySettings}}bj(){const t=new Ia({disableStoryProgressBarRendering:this.Fd.disableStoryProgressBarRendering,disableTitleRendering:this.Fd.disableTitleRendering});this.GR=new Xc(this,this.DB,this.vu.services.GlobalDomUtilsService,this.vu.services.ResizeObserver,t.template,this.hV,this.vu.config.appId,this.Fd.playbackMode===r.ProtoPlayerPlaybackModeEnum.ClickToPlay?P.StoppedState:P.PausedState,this.vu.services.InteractionService),this.GR.setMediaContainerRatio(this.qj.getContentRatioContainer()),this.GR.show()}OE(){this.subscribe(ga,this.zR,(({payload:{nextSlide:t}})=>{const i=t;let e=[];i.media.type===r.ProtoMediaTypeEnum.Video&&(e=i.media.getAvailableQualities(),this.GR.updateQuality(i.media.currentQuality)),this.GR.updateQualityMenu(e),this.GR.onSlideTransitionStart(i.slideCapabilityList),i.onSlideTransitionStart(i.slideCapabilityList)})),this.subscribe(ya,this.zR,(()=>{this.GR.onSlideTransitionEnd()})),this.subscribe(va,this.zR,(({payload:{elapsedTime:t,duration:i}})=>{this.GR.onSlideTimeUpdate(t,i)})),this.subscribe(ma,this.zR,(({payload:{index:t}})=>{this.GR.setCurrentIndex(t),this.GR.setDuration(this.zR.remainingTime),this.mediator.publish(this,pa.ChangeSlide)})),this.subscribe(ba,this.zR,(()=>{this.aV.handleSlidesEnd()})),this.subscribe(O,this.zR,(({payload:t})=>{const i=this.zR.getCurrentSlide();i&&i.media.type===r.ProtoMediaTypeEnum.Video&&this.GR.updateQuality(i.media.currentQuality),this.mediator.publish(this,O,{payload:t})})),this.subscribe(bt[bt.Play],this.GR,(()=>{this.mediator.publish(this,c.Uh.UserInteraction,{payload:{playback:!0}});this.play(!0)})),this.subscribe(bt[bt.Pause],this.GR,(()=>{this.mediator.publish(this,c.Uh.UserInteraction,{payload:{playback:!1}});this.pause(!0)})),this.subscribe(bt[bt.Volume],this.GR,(({payload:t})=>{this.volume=t,this.mediator.publish(this,c.Uh.UserInteraction,{payload:{volume:!0}}),this.mediator.publish(this,bt[bt.Volume],{payload:{volume:t}})})),this.subscribe(bt[bt.Close],this.GR,(()=>{this.mediator.publish(this,c.Uh.UserInteraction,{payload:{playback:!1}}),this.mediator.publish(this,bt[bt.Close])})),this.subscribe(bt[bt.LogoClicked],this.GR,(()=>{this.mediator.publish(this,bt[bt.LogoClicked])})),this.subscribe(ua.ProgressBarItemClicked,this.GR,(({payload:t})=>{this.mediator.publish(this,c.Uh.UserInteraction,{payload:{playback:!0}}),this.setSlide(t),this.mediator.publish(this,ua.ProgressBarItemClicked,{payload:t})})),this.subscribe(ua.CallToAction,this.zR,(()=>{this.mediator.publish(this,ua.CallToAction)})),this.subscribe(bt[bt.Expand],this.GR,(()=>{this.mediator.publish(this,bt[bt.Expand])})),this.subscribe(bt[bt.Collapse],this.GR,(()=>{this.mediator.publish(this,bt[bt.Collapse])})),this.subscribe(ko.Z[ko.Z.HoldStart],this.GR,(()=>{this.aV.pauseToggle()})),this.subscribe(ko.Z[ko.Z.HoldEnd],this.GR,(()=>{this.aV.pauseToggle()})),this.subscribe(ko.Z[ko.Z.TapLeft],this.GR,(()=>{this.cV(),this.goToPrevSlide()})),this.subscribe(ko.Z[ko.Z.TapRight],this.GR,(()=>{this.cV(),this.goToNextSlide()})),this.subscribe(ko.Z[ko.Z.SwipeEnd],this.GR,(({payload:t})=>{t===Yc.Av.Left?this.aV.goToNextSlide():this.aV.goToPrevSlide()})),this.subscribe(ko.Z[ko.Z.SwipeMove],this.GR,(({payload:t})=>{this.zR.offsetSlides(t)})),this.subscribe(bt[bt.Quality],this.GR,(({payload:t})=>{this.zR.setQuality(t)})),this.subscribe(bt[bt.Next],this.GR,(()=>{this.cV(),this.goToNextSlide()})),this.subscribe(bt[bt.Next],this.zR,(()=>{this.cV(),this.goToNextSlide()})),this.subscribe(bt[bt.Prev],this.GR,(()=>{this.cV(),this.goToPrevSlide()})),this.relay(ua.GeneralClickInteraction,this.GR,this,this.mediator),this.relay(ua.GeneralClickInteraction,this.zR,this,this.mediator)}lV(){if((0,H.$K)(this.Fd.storyMetadata)){const t=this.Fd.storyMetadata;this.dV(t)}else{let{storyId:t,activeVersion:i}=this.Fd;const e=(0,ns.Ph)("cnx_force_fallback",this.vu.config.pageUrl);e&&(t="00000000-0000-0000-0000-000000000002",i=e);const n=this.vu.services.UrlSuffixerService.appendParamsToUrl(`${ze.n.endPoints.base.metadata}${t}/${i}.bin`);if(!(0,H.QM)(i))return void this.uV();this.tV(n).catch((t=>{throw this.uV(),t})).then((t=>{this.dV(t)})).catch((t=>{(0,s.n)({message:"PlayspaceContentH_error_fetchMetadata",level:s.D.CRITICAL,exception:t.message,callStack:t.stack})}))}}uV(){this.sV().then((t=>{const i=this.vu.services.UrlSuffixerService.appendParamsToUrl(`${ze.n.endPoints.base.metadata}${t.storyId}/${t.activeVersionId}.bin`);return this.tV(i)})).then((t=>{this.Jj=!0,this.dV(t)}))}dV(t){return jl(this,void 0,void 0,(function*(){const i=yield this.pV();t.slides=t.slides.map((i=>Object.assign(Object.assign({},i),{storyTitle:t.storyTitle,publisherName:this.Fd.publisherName}))),this.fV=Object.assign(Object.assign({},i),t),this.zR.start(t.slides),this.GR.setTotalSlides(t.slides.length);const e=this.Fd.storyPosition&&this.Fd.storyPosition<t.slides.length?this.Fd.storyPosition:0;this.zR.setCurrentSlide(e),this.mediator.publish(this,fa.ContentHandlerReady),this.Qj.next(!0)}))}pV(){return jl(this,void 0,void 0,(function*(){try{let t=this.Fd.storyId,i=this.Fd.activeVersion;if(this.Jj){const e=yield this.sV();t=e.storyId,i=e.activeVersionId}const e=yield Or.k.loadInsights({insightsInputType:$l.i.Story,id:t,versionId:i});return{storyId:t,activeVersion:i,insights:e}}catch(t){return{}}}))}Kj(){const{preRollBreak:t,postRollBreak:i}=this.Fd,e=(0,H.r)(t),s=(0,H.r)(i);this.aV=new tl(this,this.zR,this.GR,e,s,this.Fd.endOfSlideCycleMode,null!==this.Fd.storyPosition),this.gV()}gV(){this.subscribe(Zc,this.aV,(({payload:t})=>{this.GR.changeState(t);const i=this.zR.getCurrentSlide();i&&i.changeState(t),this.mediator.publish(this,fa.StateChanged,{payload:t})})),this.subscribe(Kc,this.aV,(()=>{this.mediator.publish(this,fa.NewStory)})),this.relay([fa.ContentStart,fa.ContentEnd],this.aV,this,this.mediator)}cV(){this.mediator.publish(this,c.Uh.UserInteraction,{payload:{playback:!0}})}set hasPostroll(t){this.aV.hasPostroll=t}set hasPreroll(t){this.aV.hasPreroll=t}setViewabilityState(t){this.aV.setViewabilityState(t)}goToNextSlide(){this.aV.goToNextSlide()}goToPrevSlide(){this.aV.goToPrevSlide()}getNextSlide(){return this.zR.getNextSlide()}getCurrentThumbnailUrlParams(t,i){return this.zR.getCurrentThumbnailUrlParams(t,i)}getCurrentMetadata(){return this.zR.getCurrentMetadata()}getCurrentStoryMeta(){return this.fV}start(){return jl(this,void 0,void 0,(function*(){this.lV()}))}get volume(){return this.Wj}set volume(t){this.Wj=t,this.zR.setVolume(t),this.GR.updateVolume(t)}play(t){this.aV.play(t)}pause(t){this.aV.pause(t)}show(){this.aV.show()}hide(){this.aV.hide()}enterFullscreen(){this.GR.expand()}exitFullscreen(){this.GR.collapse()}setSlide(t){this.play(!1),this.aV.setCurrentSlide(t)}onResize(){this.zR.onPlayerContainerResize(),this.GR.onResizeUi(this.zR.remainingTime,this.zR.isPlaying)}get currentSlideIndex(){return this.zR.currentSlideIndex}get slides(){return this.zR.slides}updateCtaLabel(t,i){const e={type:Da.CtaButton,metadata:{label:i}};this.zR.updateCapabilityMetadata(t,e),t===this.zR.currentSlideIndex&&this.GR.updateCapabilityMetadata(e)}get slidesMetadata(){return this.zR.slidesMetadata}toggleExpandButton(t){t?this.GR.showExpandButton():this.GR.hideExpandButton()}getQuality(){return this.zR.getQuality()}setQuality(t){const i={height:t,quality:_.Strict};this.zR.setQuality(i)}stop(){this.aV&&this.aV.stop()}resume(){this.aV&&this.aV.resume()}startContent(){this.aV.exitRollBreak()}canPlay(){return this.Qj.asObservable()}destroy(){this.zR&&this.zR.destroy(),this.GR&&this.GR.destroy()}}var Nl;!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(Nl||(Nl={}));class Ul{constructor(t,i){switch(this.mediator=t,this.inView=!1,this.mV=!1,this.yV=!1,this.vV=!1,this.bV=()=>{},i){case r.ProtoPlayerPlaybackModeEnum.Autoplay:this.xV(this.wV);break;case r.ProtoPlayerPlaybackModeEnum.ClickToPlay:this.xV(this._V);break;case r.ProtoPlayerPlaybackModeEnum.ScrollToPlay:this.xV(this.PV)}}xV(t){this.bV=()=>{this.mV||t.call(this)}}wV(){this.vV&&!this.yV&&this.inView&&(this.yV=!0,this.mediator.publish(this,Nl[Nl.Play]))}PV(){this.vV&&(this.SV&&(this.Ud=this.volume),this.inView||this.kl&&!this.inView?(this.mediator.publish(this,Nl[Nl.Play],{payload:{volume:this.Ud}}),this.Ud=null):(this.Ud=this.volume,this.mediator.publish(this,Nl[Nl.Pause],{payload:{volume:0}})))}_V(){}setViewability(t){this.inView=t,this.bV()}setIsAppBackgrounded(t){this.SV=t}setSoundVolume(t){this.volume=t}setUserPlayback(t){!this.yV&&t&&(this.yV=t),this.mV=!t}setCanPlay(t){this.vV=t,this.mV||!this.inView&&!this.yV||this.bV()}setIsFullscreen(t){this.kl=t}}const Hl={xl:720,lg:320,md:204,sm:142,xs:0},ql={[r.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:142,xs:0},[r.ProtoDeviceType.Tablet]:Object.assign({},Hl),[r.ProtoDeviceType.Smartphone]:Object.assign({},Hl)},zl={xl:720,lg:320,md:204,sm:142,xs:0},Wl={[r.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:142,xs:0},[r.ProtoDeviceType.Tablet]:Object.assign({},zl),[r.ProtoDeviceType.Smartphone]:Object.assign({},zl)},Gl=176,Jl=160,Ql=144,Yl=112,Xl={xl:zl.xl+Gl,lg:zl.lg+Jl,md:zl.md+Ql,sm:zl.sm+Yl},Zl={[r.ProtoDeviceType.Desktop]:{xl:468+Gl,lg:388+Jl,md:248+Ql,sm:142+Yl,xs:0},[r.ProtoDeviceType.Tablet]:Object.assign({},Xl),[r.ProtoDeviceType.Smartphone]:Object.assign({},Xl)},Kl={lg:320,md:204,sm:0},td={[r.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:0},[r.ProtoDeviceType.Tablet]:Object.assign({},Kl),[r.ProtoDeviceType.Smartphone]:Object.assign({},Kl)},id={xxl:1080,xl:0},ed={[r.ProtoDeviceType.Desktop]:{xxl:720,xl:0},[r.ProtoDeviceType.Tablet]:Object.assign({},id),[r.ProtoDeviceType.Smartphone]:Object.assign({},id)},sd=(nh.ProtoGalleryOrientationEnum.Landscape,nh.ProtoGalleryStyleMode.Detailed,nh.ProtoGalleryStyleMode.Visual,nh.ProtoGalleryOrientationEnum.Portrait,nh.ProtoGalleryStyleMode.Detailed,nh.ProtoGalleryStyleMode.Visual,Object.assign(Object.assign({},v.Km),xa));var nd;!function(t){t[t.PlayerOrientationChange=0]="PlayerOrientationChange",t[t.MainOrientationChange=1]="MainOrientationChange"}(nd||(nd={}));class rd{constructor(t,i,e,s){this.mediator=t,this.Gt=i,this.AV=e,this._r=s,this.kV={current:null,previous:null},this.CV={current:null,previous:null},this.TV=!1}setFloatingModule(t){this.EV=t}start(t){this.Re=t,this.BV(this.Gt.orientation),this.LV(this.Gt.orientation)}forceOrientation(t){this.TV=!1,this.setMainOrientation(t),this.setPlayerClassByOrientation(t),this.TV=!0}setPlayerClassByOrientation(t=this.Gt.orientation){this.BV(t),this.kV.previous&&this.kV.current===this.kV.previous||(this.OV(this.AV),this.kV.previous=this.kV.current,this.mediator.publish(this,nd[nd.PlayerOrientationChange],{payload:this.kV.current}))}setMainOrientation(t=this.Gt.orientation){this.LV(t),this.CV.previous&&this.CV.previous===this.CV.current||(this.CV.previous=this.CV.current,this.mediator.publish(this,nd[nd.MainOrientationChange],{payload:this.CV.current}))}get playerOrientation(){return this.kV.current}get mainOrientation(){return this.CV.current}shouldChangeMainOrientation(){return!this.Wa()}BV(t){this.kV.current=this.Hd(t)}LV(t){this.CV.current=this.RV(t)}Hd(t){return this.Wa()?Aa.ProtoPlayerOrientationEnum.Landscape:this.TV?this.CV.current:t===Aa.ProtoPlayerOrientationEnum.Mixed?this.DV():t}RV(t){return this.TV?this.CV.current:t===Aa.ProtoPlayerOrientationEnum.Mixed?this.DV():t}Wa(){return this.EV&&this.EV.isInFloating}DV(){return this._r.getViewportWidth()<this.Gt.orientationBreakpoint?Aa.ProtoPlayerOrientationEnum.Portrait:Aa.ProtoPlayerOrientationEnum.Landscape}OV(t){this.kV.previous?(0,it.L_)(this.Re,t(this.kV.previous),t(this.kV.current)):(0,it.cn)(this.Re,t(this.kV.current))}}class od{constructor(t){this._m=t,this.FV=[]}createRatioContainer(t){const i=this.$V();return this.FV.push(i),this.setRatio(t),i}setRatio(t){this.jV=t,this.VV()}$V(){return this._m.createElementByString(`<cnx class='${d.oV}'></cnx>`)}VV(){this.FV.forEach((t=>{(0,it.T7)(t,{"padding-bottom":`${this.jV}%`})}))}}class hd{constructor(t,i){this.NV={width:1,height:1},this.UV=t,this.HV=i}start(t){this.qV(t)}getComputedPlayspaceRatio(t){return this.zV(t)/this.WV(t)*100}getComputedContentRatio(t){return this.GV(t)/this.JV(t)*100}qV(t){this.QV=t}WV(t){if(t===Aa.ProtoPlayerOrientationEnum.Landscape){if(!this.QV.clientWidth)return this.UV.width;const t=this.YV();return this.QV.clientWidth/t}return this.HV.width}zV(t){if(t===Aa.ProtoPlayerOrientationEnum.Landscape){if(!this.QV.clientWidth)return this.UV.height;return this.XV()/this.YV()}return this.HV.height}XV(){return this.UV.height/this.UV.width*this.QV.clientWidth+72}YV(){const t=this.XV();return(0,_t.aX)(this.QV.clientWidth,t)}JV(t){return t===Aa.ProtoPlayerOrientationEnum.Landscape?this.UV.width:this.NV.width}GV(t){return t===Aa.ProtoPlayerOrientationEnum.Landscape?this.UV.height:this.NV.height}}class ad extends a._{constructor(t,i,e,s,n){super(),this.mediator=t,this.Gt=i,this._m=n,this.ZV(),this.KV=new hd(e,s),this.iN=new od(n),this.eN=new od(n)}setFloatingModule(t){this.nN.setFloatingModule(t),this.setRatio()}start(t,i){this.nN.start(t),this.KV.start(i)}getPlayspaceRatioContainer(){return this.iN.createRatioContainer(this.rN())}getContentRatioContainer(){return this.eN.createRatioContainer(this.oN())}setRatio(t=!1){this.nN.setPlayerClassByOrientation(),(t||this.nN.shouldChangeMainOrientation())&&(this.nN.setMainOrientation(),this.iN.setRatio(this.rN())),this.eN.setRatio(this.oN())}getOrientation(){return this.nN.playerOrientation}setOrientation(t){this.nN.forceOrientation(t),this.iN.setRatio(this.rN()),this.eN.setRatio(this.oN())}ZV(){this.nN=new rd(this,this.Gt,this.AV,this._m),this.subscribe(nd[nd.PlayerOrientationChange],this.nN,(({payload:t})=>{this.mediator.publish(this,nd[nd.PlayerOrientationChange],{payload:t})})),this.subscribe(nd[nd.MainOrientationChange],this.nN,(({payload:t})=>{this.mediator.publish(this,nd[nd.MainOrientationChange],{payload:t})}))}rN(){const t=this.nN.mainOrientation;return this.KV.getComputedPlayspaceRatio(t)}oN(){const t=this.nN.playerOrientation;return this.KV.getComputedContentRatio(t)}AV(t){return t===Aa.ProtoPlayerOrientationEnum.Portrait?Qr:Yr}}const cd={PlaybackModeEnum:{AutoPlay:r.ProtoPlayerPlaybackModeEnum.Autoplay,ScrollToPlay:r.ProtoPlayerPlaybackModeEnum.ScrollToPlay,ClickToPlay:r.ProtoPlayerPlaybackModeEnum.ClickToPlay},DefaultSoundModeEnum:{On:r.ProtoPlayerSoundMode.On,Off:r.ProtoPlayerSoundMode.Mute,OnHover:r.ProtoPlayerSoundMode.Hover},InsertPositionEnum:{WithinContainer:r.ProtoPlayerInsertMode.WithinContainer,BeforeContainer:r.ProtoPlayerInsertMode.BeforeContainer,AfterContainer:r.ProtoPlayerInsertMode.AfterContainer,ReplaceContainer:r.ProtoPlayerInsertMode.ReplaceContainer,HideContainer:r.ProtoPlayerInsertMode.HideContainer},CloseButtonModeEnum:{Off:r.ProtoPlayerCloseButtonMode.Off,On:r.ProtoPlayerCloseButtonMode.OnHover,OnAfterFirstAd:r.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,OnHover:r.ProtoPlayerCloseButtonMode.OnHover,OnHoverAfterFirstAd:r.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,AlwaysOn:r.ProtoPlayerCloseButtonMode.AlwaysOn},QualityEnum:F,LineItemExcludedSlotsEnum:{PreRoll:r.ProtoAdSlotsEnum.PreRoll,MidRoll:r.ProtoAdSlotsEnum.MidRoll,PostRoll:r.ProtoAdSlotsEnum.PostRoll},ErrorTypesEnum:{SetupError:v.n9.SetupError,NoPlayer:v.n9.NoPlayer},FloatingModeEnum:{Off:r.ProtoPlayerFloatingMode.Off,OnPageLoad:r.ProtoPlayerFloatingMode.OnPageLoad,AfterInView:r.ProtoPlayerFloatingMode.AfterInView,Always:r.ProtoPlayerFloatingMode.Always},FloatingDevicesEnum:{Desktop:r.ProtoDeviceType.Desktop,Smartphone:r.ProtoDeviceType.Smartphone,Tablet:r.ProtoDeviceType.Tablet,Other:r.ProtoDeviceType.GameConsole},FloatingFixedPositionModeEnum:{Page:r.ProtoFloatingFixedPositionMode.Page,Element:r.ProtoFloatingFixedPositionMode.Element},FloatingScrollPositionEnum:{BottomRight:r.ProtoPositionMode.BottomRight,BottomLeft:r.ProtoPositionMode.BottomLeft,TopRight:r.ProtoPositionMode.TopRight,TopLeft:r.ProtoPositionMode.TopLeft},FloatingStatesEnum:{Float:y.Float,Embed:y.Embed},FloatingAppendLocationEnum:{Above:r.ProtoFloatingAppendLocationEnum.Above,Below:r.ProtoFloatingAppendLocationEnum.Below,Within:r.ProtoFloatingAppendLocationEnum.Within},ImplementationTypeEnum:{Amp:r.ProtoImplementationType.Amp,Web:r.ProtoImplementationType.Web}},ld=Object.assign(Object.assign({},cd),{EndOfSlideCycleEnum:{Loop:Aa.ProtoEndOfSlideCycleMode.Loop,Stop:Aa.ProtoEndOfSlideCycleMode.Stop},LayoutEnum:{Portrait:at.Portrait,Landscape:at.Landscape},OrientationEnum:{Mixed:Aa.ProtoPlayerOrientationEnum.Mixed,Portrait:Aa.ProtoPlayerOrientationEnum.Portrait,Landscape:Aa.ProtoPlayerOrientationEnum.Landscape}});class dd{constructor(t,i,e,s,n=1200){this.hN=t,this.aN=i,this.cN=e,this.lN=s,this.dN=n,this.uN=null,this.pN=!1,this.fN=()=>{if(this.jS(),!this.pN&&this.aN&&this.aN.linearAdInWin)return this.pN=!0,void this.gN(this.dN);this.hN.startContent()}}destroy(){this.jS()}changeState(t){switch(t){case P.PrerollState:this.pN=!1,this.gN(this.cN);break;case P.PostrollState:this.pN=!1,this.gN(this.lN);break;default:this.uN&&this.jS()}}setPreRollBreak(t){this.cN=t}setPostRollBreak(t){this.lN=t}jS(){clearTimeout(this.uN),this.uN=null}gN(t){this.jS(),this.uN=setTimeout(this.fN,t)}}class ud{constructor(t,i){this.mN=t,this.yN=i,this.vN=null,this.bN=null,this.xN=0,this.wN=0,this._N=!1,this.PN=new Map,this.SN=new rt.x,this.AN=new rt.x,this.IN=new rt.x,this.kN=new rt.x,this.CN=new rt.x,this.TN=new rt.x,this.MN=new rt.x,this.EN=new rt.x,this.BN=new rt.x,this.wu=[],this.LN={inImpression:!1}}start(){this.RN();const{totalAdBreakLength:t}=this.mN.linearAdsControllerData;if(t){const i=ji.getGlobalContainer().resolve(se);this.DN=new Ee(i,t),this.PN.set(this.DN,[this.DN.onTimeElapsed.subscribe((()=>{this.AN.next()}))])}}get currentPlayerAdSlot(){return this.vN}get onExperienceControllerStateChange(){return this.BN.asObservable()}get onAdSlotDurationElapsed(){return this.SN.asObservable()}get onAdPodDurationElapsed(){return this.IN.asObservable()}get onAdPodTimeUpdate(){return this.kN.asObservable()}get onAdOpportunity(){return this.CN.asObservable()}get onAdsDisabled(){return this.TN.asObservable()}get onAdsEnabled(){return this.MN.asObservable()}get onTotalAdBreakDurationExpired(){return this.AN.asObservable()}get onMidRollCapped(){return this.EN.asObservable()}contentPlaybackStateChanged(t){var i,e;null===(e=(i=this.yN).contentPlaybackStateChanged)||void 0===e||e.call(i,t)}slideChanged(t){var i,e;null===(e=(i=this.yN).slideChanged)||void 0===e||e.call(i,t)}updateStoryTimeline(t){var i,e;null===(e=(i=this.yN).updateStoryTimeline)||void 0===e||e.call(i,t)}onAdImpression(t,i){this.yN.onAdImpression(t,this.vN,i),this.LN.inImpression=!0,this.FN(),this.$N()}contentChanged(t){this.yN.contentChanged(this.vN,t),this.wN=0}onAdFinished(t,i,e){this.yN.onAdFinished(this.vN,i,e),this.jN=this.VN(this.jN),i||(this.NN=this.VN(this.NN),this.vN===r.ProtoAdSlotsEnum.MidRoll?this.wN++:this.xN++),this.UN()&&!i&&this.EN.next(),t&&(this._N=!0),this.LN.inImpression=!1}viewabilityStateChanged(t,i){var e,s;null===(s=(e=this.yN).viewabilityStateChanged)||void 0===s||s.call(e,this.vN,t,i)}onStop(){this.vN=null}onAdStateChange(t,i,e,s){this.yN.onAdStateChange(t,e,s),this.mN.linearAdsControllerData.maxAdSlotDuration=i.maxAdSlotDuration,this.mN.linearAdsControllerData.maxAdPodDuration=i.maxAdPodDuration,s||(t!==r.ProtoAdSlotsEnum.MidRoll&&(this.xN=0),null===t&&this.bN===r.ProtoAdSlotsEnum.MidRoll||(this._N=!0),this.bN=t,this.vN=t)}canEnableAds(t){const i=this.yN.canEnableAds(this.vN,t);return i.enableAds?this.LN.inImpression?{enableAds:!1,disableReason:Ct.InImpression}:this.vN===r.ProtoAdSlotsEnum.MidRoll&&this.UN()||this.vN!==r.ProtoAdSlotsEnum.MidRoll&&this.xN>0?{enableAds:!1,disableReason:Ct.Unknown}:{enableAds:!0,disableReason:Ct.Unknown}:i}enableAds(){this.MN.next(),this.DN&&this.DN.start()}disableAds(t,i){const e={disableReason:t,adBreakLength:this.yN.getAdBreakDuration(i)};this.TN.next({payload:e}),this.DN&&!this.LN.inImpression&&this.DN.stop()}getTheoreticalDurationUntilNextOpportuinity(t){return this.vN===r.ProtoAdSlotsEnum.MidRoll&&this.UN()?-1:this.yN.getDurationUntilNextOpportunity(t)}onAdPlay(){this.NN&&this.NN.start(),this.jN&&this.jN.start(),this.DN&&this.DN.start()}onAdPause(){this.NN&&this.NN.stop(),this.jN&&this.jN.stop(),this.DN&&this.DN.stop()}triggerAdOpportunity(){this._N&&(this._N=!1,this.CN.next({payload:{adBreakType:Ur[this.vN]}}))}startAds(t){var i,e;null===(e=(i=this.yN).startAds)||void 0===e||e.call(i,this.vN,t)}destroy(){(0,Pt.i)(this.wu),this.DN&&this.DN.disable(),this.jN=this.VN(this.jN),this.NN=this.VN(this.NN),this.yN.destroy()}RN(){this.wu.push(this.yN.onExperienceControllerStateChange.subscribe((()=>{this.BN.next()}))),this.yN.start()}UN(){const{numberOfMidRolls:t}=this.mN.linearAdsControllerData;return this.wN>=t&&-1!==t}VN(t){if(t)return t.stop(),(0,Pt.i)(this.PN.get(t)),this.PN.delete(t),null}FN(){const{maxAdSlotDuration:t}=this.mN.linearAdsControllerData;if(!t||this.jN)return;const i=ji.getGlobalContainer().resolve(se);this.jN=new Ee(i,t),this.jN.start(),this.PN.set(this.jN,[this.jN.onTimeElapsed.subscribe((()=>{this.SN.next()}))])}$N(){const{maxAdPodDuration:t}=this.mN.linearAdsControllerData;if(!t||this.NN)return;const i=ji.getGlobalContainer().resolve(se);this.NN=new Ee(i,t),this.NN.start(),this.PN.set(this.NN,[this.NN.onTimeElapsed.subscribe((()=>{this.IN.next()})),this.NN.onTimeUpdate.subscribe((()=>{const t=this.NN.timeRemaining;this.kN.next(t)}))])}}class pd{constructor(t,i){this.mN=t,this.HN=i,this.TN=new rt.x,this.MN=new rt.x,this.qN=0,this.BN=new rt.x,this.PN=new Map,this.wu=[],this.LN={inImpression:!1,linearInImpression:!1,inPrePostRoll:!1,contentPaused:!0,linearInOpportunity:!1},this.zN=!1,this.WN=!0}start(){this.RN(),this.initTimer()}get onExperienceControllerStateChange(){return this.BN.asObservable()}initTimer(){const t=ji.getGlobalContainer().resolve(se);this.GN=new Ee(t,this.mN.resetNumberOfNonLinearAdsAfter),this.PN.set(this.GN,[this.GN.onTimeElapsed.subscribe((()=>{this.qN=0,this.BN.next()}))])}RN(){this.wu.push(this.HN.onExperienceControllerStateChange.subscribe((()=>{this.BN.next()}))),this.HN.start()}get onAdsDisabled(){return this.TN.asObservable()}get onAdsEnabled(){return this.MN.asObservable()}onLinearImpressionStateChange(t){this.LN.linearInImpression=t,t?(this.GN.stop(),this.qN=0):(this.GN.reset(),this.GN.start(),this.HN.onLinearAdFinished())}onLinearOpportunityChange(t){this.LN.linearInOpportunity=t}onAdStateChange(t){this.LN.inPrePostRoll=!(t===r.ProtoAdSlotsEnum.MidRoll)}onAdFinished(){this.HN.onAdFinished(),this.LN.inImpression=!1,this.qN++}onAdImpression(){this.LN.inImpression=!0,0===this.qN&&(this.GN.reset(),this.GN.start())}canEnableAds(){return!!this.HN.canEnableAds()&&(!(this.LN.inImpression||this.LN.inPrePostRoll||this.LN.linearInImpression||this.LN.linearInOpportunity&&this.WN||this.LN.contentPaused&&this.zN)&&!(this.qN>=this.mN.numberOfNonlinearAds&&this.mN.numberOfNonlinearAds>0))}viewabilityStateChanged(t){this.zN=t}onLinearNoDemand(){this.WN=!1}enableAds(){this.MN.next()}disableAds(){this.TN.next()}contentPlaybackStateChanged(t){this.LN.contentPaused=!t,this.BN.next()}destroy(){var t;(0,Pt.i)(this.wu),null===(t=this.HN)||void 0===t||t.destroy()}}class fd{constructor(t,i,e,s,n){var r;this.mediator=t,this.mN=e,this.wu=[],this.LN={stopped:!1,viewability:!1,forceDisable:!1,zeroDimension:!1,isAppBackgrounded:!1},this.JN=new ud(e,s),this.QN(s),this.viewabilityStateChanged(i),this.onResize(this.mN.playerDimensions.width,this.mN.playerDimensions.height),this.JN.start(),(0,H.kE)(null===(r=e.nonLinearAdsControllerData)||void 0===r?void 0:r.numberOfNonlinearAds)&&n&&this.YN(e.nonLinearAdsControllerData,n),this.onContentStop()}QN(t){this.wu.push(this.JN.onAdSlotDurationElapsed.subscribe((()=>{this.mediator.publish(this,Q)})),this.JN.onAdPodDurationElapsed.subscribe((()=>{this.mediator.publish(this,Y)})),this.JN.onAdPodTimeUpdate.subscribe((t=>{this.mediator.publish(this,Z,{payload:{remainingTime:t}})})),this.JN.onAdOpportunity.subscribe((t=>{var i;null===(i=this.XN)||void 0===i||i.onLinearOpportunityChange(!0),this.mediator.publish(this,X,t)})),this.JN.onAdsDisabled.subscribe((t=>{this.mediator.publish(this,J,t)})),this.JN.onAdsEnabled.subscribe((()=>{this.mediator.publish(this,G)})),this.JN.onTotalAdBreakDurationExpired.subscribe((()=>{this.mediator.publish(this,W)})),this.JN.onMidRollCapped.subscribe((()=>{this.mediator.publish(this,z)})),this.JN.onExperienceControllerStateChange.subscribe((()=>{this.ZN()})))}YN(t,i){this.XN=new pd(t,i),this.wu.push(this.XN.onAdsDisabled.subscribe((()=>{this.mediator.publish(this,K)})),this.XN.onAdsEnabled.subscribe((()=>{this.mediator.publish(this,tt)})),this.XN.onExperienceControllerStateChange.subscribe((()=>{this.ZN()}))),this.XN.start()}slideChanged(t){this.JN.slideChanged(t)}updateStoryTimeline(t){this.JN.updateStoryTimeline(t)}contentPlaybackStateChanged(t){var i;this.JN.contentPlaybackStateChanged(t),null===(i=this.XN)||void 0===i||i.contentPlaybackStateChanged(t)}forceRecheck(){this.ZN()}onAdImpression(t,i){var e;switch(i){case lt.LINEAR:this.JN.onAdImpression(t,this.Il);const i=!0;null===(e=this.XN)||void 0===e||e.onLinearImpressionStateChange(i);break;case lt.NONLINEAR:this.XN.onAdImpression()}this.ZN()}getTheoreticalDurationUntilNextOpportuinity(){return this.JN.canEnableAds(this.Il).enableAds?0:this.JN.getTheoreticalDurationUntilNextOpportuinity(this.Il)}onAdFinished(t,i,e=!1){var s,n;switch(i){case lt.LINEAR:if(this.JN.onAdFinished(t,e,this.Il),e)this.KN();else{const t=!1;null===(s=this.XN)||void 0===s||s.onLinearImpressionStateChange(t)}break;case lt.NONLINEAR:null===(n=this.XN)||void 0===n||n.onAdFinished()}e||this.ZN()}onLinearAdPause(){this.JN.onAdPause()}onLinearAdPlay(){this.JN.onAdPlay()}onContentStop(){this.JN.onStop(),this.LN.stopped=!0,this.ZN()}onAdStateChange(t,i,e){var s;null===(s=this.XN)||void 0===s||s.onAdStateChange(t);const n=t===this.JN.currentPlayerAdSlot&&t===r.ProtoAdSlotsEnum.MidRoll;n?this.JN.onAdStateChange(t,i,e,n):(this.JN.onAdStateChange(t,i,e,n),this.tU())}tU(){this.JN.startAds(this.Il),this.LN.stopped=!1,this.ZN()}contentChanged(){this.JN.contentChanged(this.Il),this.ZN()}viewabilityStateChanged(t,i=!1,e=!1){var s;this.JN.viewabilityStateChanged(t,i),null===(s=this.XN)||void 0===s||s.viewabilityStateChanged(t),this.Il=t,this.mN.viewabilityPolicy===r.ProtoAdViewabilityPolicy.Strict&&(this.LN.viewability=!t),e||this.ZN()}setToggleAdsReason({isAppBackgrounded:t}){this.LN.isAppBackgrounded=t,this.ZN()}onLinearNoFill(){var t;null===(t=this.XN)||void 0===t||t.onLinearOpportunityChange(!1),this.iU()}onLinearNoDemand(){var t;null===(t=this.XN)||void 0===t||t.onLinearNoDemand(),this.iU()}disableAdvertising(){this.LN.forceDisable=!0,this.ZN()}enableAdvertising(){this.LN.forceDisable=!1,this.ZN()}get inView(){return this.Il}onResize(t,i){this.LN.zeroDimension=0===t||0===i,this.ZN()}destroy(){(0,Pt.i)(this.wu),this.JN.destroy()}ZN(){const t=this.eU();t.enableAds?(this.sU(),this.iU()):(this.nU(t.disableReason),this.rU())}sU(){const t=this.JN.canEnableAds(this.Il);t.enableAds?this.KN():this.nU(t.disableReason)}iU(){var t;(null===(t=this.XN)||void 0===t?void 0:t.canEnableAds())?this.oU():this.rU()}rU(){var t;null===(t=this.XN)||void 0===t||t.disableAds()}oU(){var t;null===(t=this.XN)||void 0===t||t.enableAds()}nU(t){this.JN.disableAds(t,this.Il)}eU(){return Object.keys(this.LN).some((t=>this.LN[t]))?{enableAds:!1,disableReason:Ct.Unknown}:{enableAds:!0,disableReason:Ct.Unknown}}KN(){this.JN.triggerAdOpportunity(),this.JN.enableAds()}}var gd;!function(t){t[t.None=0]="None",t[t.MinSlidesBeforeFirstAd=1]="MinSlidesBeforeFirstAd",t[t.SlidesBetweenAds=2]="SlidesBetweenAds"}(gd||(gd={}));class md{constructor(t){this.mN=t,this.hU=!1,this.aU=0,this.cU=0,this.dU=[],this.uU=0,this.LN={slides:!1},this.BN=new rt.x}get onExperienceControllerStateChange(){return this.BN.asObservable()}start(){this.pU()}canEnableAds(t,i){return t===r.ProtoAdSlotsEnum.MidRoll&&this.LN.slides&&i?{enableAds:!1,disableReason:Ct.TimeoutBetweenAds}:{enableAds:!0,disableReason:Ct.Unknown}}getAdBreakDuration(t){const i=this.fU();return t&&0!==this.dU.length&&i!==gd.None?i===gd.MinSlidesBeforeFirstAd?this.gU(this.mN.minSlidesBeforeFirstAd-this.cU):i===gd.SlidesBetweenAds?this.gU(this.mN.slidesBetweenAds-this.aU):0:0}onAdImpression(t,i,e){this.aU=0,i===r.ProtoAdSlotsEnum.MidRoll&&(this.hU||(this.hU=!0))}onAdFinished(t,i,e){i||this.pU()}onAdStateChange(t,i,e){t===r.ProtoAdSlotsEnum.MidRoll||e||(this.hU=!1)}contentChanged(t,i){this.pU(),this.hU=!1}slideChanged(t){this.uU=t,this.aU++,this.cU++,this.pU()}updateStoryTimeline(t){this.dU=t}destroy(){}pU(){this.LN.slides=!1;const t=this.fU();t===gd.MinSlidesBeforeFirstAd?this.mU():t===gd.SlidesBetweenAds&&this.yU(),this.BN.next()}mU(){this.cU<=this.mN.minSlidesBeforeFirstAd&&(this.LN.slides=!0)}yU(){this.aU<=this.mN.slidesBetweenAds&&(this.LN.slides=!0)}gU(t){let i=0,e=t;for(let t=0;t<this.dU.length&&0!==e;t++)t<this.uU||(i+=this.dU[t],e--);return i}getDurationUntilNextOpportunity(t){return this.getAdBreakDuration(t)}fU(){return!this.hU&&this.mN.minSlidesBeforeFirstAd?gd.MinSlidesBeforeFirstAd:this.hU&&this.mN.slidesBetweenAds?gd.SlidesBetweenAds:gd.None}}const yd={lg:630,md:400,sm:320,xs:0},vd={[r.ProtoDeviceType.Desktop]:Object.assign({},yd),[r.ProtoDeviceType.Tablet]:Object.assign({},yd),[r.ProtoDeviceType.Smartphone]:Object.assign({},yd)};var bd=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class xd extends kt{constructor(){super(...arguments),this.ZD=[],this.hu=vd,this.au=d.vF,this.Kd=288,this.UV={width:16,height:9},this.HV={width:4,height:5},this.events=Object.assign({},sd),this.vU=()=>{const t=this.bU(this.hN.getCurrentStoryMeta());this.xU(t),this.xd.updateStoryTimeline(this.getStoryTimeline()),this.wU(),this._U(),this.Fd.adPlaybackMode===Aa.ProtoAdPlaybackMode.Autoplay&&this.Fd.playbackMode!==Aa.ProtoPlayerPlaybackModeEnum.ClickToPlay&&0===this.Fd.preRollBreak&&this.pd(Aa.ProtoAdSlotsEnum.MidRoll),this.mediator.publish(this,sd.Ready)}}zl(){const t={orientation:this.Fd.orientation,orientationBreakpoint:this.Fd.orientationBreakpoint};this.PU=new ad(this,t,this.UV,this.HV,this.app.services.GlobalDomUtilsService),this.subscribe(nd[nd.PlayerOrientationChange],this.PU,(({payload:t})=>{this.mediator.publish(this,sd.LayoutChanged,{payload:ld.LayoutEnum[Aa.ProtoPlayerOrientationEnum[t]]})})),this.subscribe(nd[nd.MainOrientationChange],this.PU,(({payload:t})=>{switch(t){case Aa.ProtoPlayerOrientationEnum.Landscape:(0,it.aQ)(this.$experienceContainer,"maxWidth");break;case Aa.ProtoPlayerOrientationEnum.Portrait:(0,it.T7)(this.$experienceContainer,{maxWidth:vd[this.app.config.device].lg-1+"px"})}}))}SU(t){this.PU.setFloatingModule(t)}generateHTML(){this.$playerWrapper=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${d.sN.PlayerWrapper}"></cnx>`),this.$playerContainer=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${Xr}"></cnx>`),this.PU.start(this.$playerContainer,this.$playerWrapper),this.addPlayerSize(),this.$experienceContainer.appendChild(this.$playerWrapper),this.$playerWrapper.appendChild(this.$playerContainer),this.PU.setRatio(),this.AU()}AU(){this.IU=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${eo} ${so}"></cnx>`),this.$playerWrapper.appendChild(this.IU)}kU(){return this.hN.getCurrentThumbnailUrlParams(this.$experienceContainer.clientWidth,this.$experienceContainer.clientHeight)}CU(){const t=this.kU();if(!t)return;const{imageUrl:i,altText:e,width:s,height:n,queryParams:r}=t,o=this.ql.getImage(i,e,s,n,r,!0);o&&(o.className=d.sN.ImagePlaceholder,this.TU&&this.IU.removeChild(this.TU),this.IU.appendChild(o),this.TU=o,this.adHandler&&this.adHandler.setAdLoadingBackgroundUrl(i))}MU(){this.floatingModule&&this.floatingModule.canFloat()&&this.CU()}EU(t=!1){this.IU&&(t?(0,it.cn)(this.IU,no):(0,it.IV)(this.IU,no))}addPlayerSize(){const t=this.PU.getPlayspaceRatioContainer();this.$playerWrapper.appendChild(t),(0,it.cn)(this.$playerWrapper,d.Ig.Responsive)}handleClose(){this.mediator.publish(this,sd.CloseButtonClicked),this.Wa()?(this.floatingModule.destroy(),this.pause()):this.triggerDestroy()}getVolume(){return this.hN.volume}setNewVolume(t){super.setNewVolume(t),this.hN.volume=t,this.ws(t)}destroy(){var t;super.destroy(),null===(t=this.BU)||void 0===t||t.destroy(),this.hN&&this.hN.destroy(),(0,Pt.i)(this.ZD)}LU(){var t;this.hN=new Vl(this,this.app.services.GlobalDomUtilsService,this.app.services.ResizeObserver,this.Fd,this.app,this.$playerContainer,this.PU),this.subscribe(fa.ContentHandlerReady,this.hN,this.vU),this.Fd.isCloseButton&&this.subscribe(bt[bt.Close],this.hN,(()=>this.handleClose())),this.subscribe(bt[bt.Volume],this.hN,(({payload:{volume:t}})=>{this.ws(t),this.adHandler&&this.adHandler.setLinearVolume(t)})),this.subscribe(fa.StateChanged,this.hN,(({payload:t})=>{var i;null===(i=this.BU)||void 0===i||i.changeState(t),this.OU(t),t===P.PlayingState&&this.lu(),this.RU(t)})),this.subscribe(pa.ChangeSlide,this.hN,(()=>{this.xd.slideChanged(this.getStoryPosition());const t=this.DU();if(this.CU(),this.floatingModule&&this.floatingModule.canFloat()){const i=t&&t.mediaContext===Aa.ProtoMediaContextEnum.Logo;this.EU(i)}this.app.services.TrackingService.updateMediaMetadata(this.FU()),this.mediator.publish(this,sd.ChangeSlide,{payload:t})})),this.subscribe(fa.NewStory,this.hN,(()=>{this.wd(),this.wU()})),this.subscribe(fa.ContentStart,this.hN,(()=>{this.app.services.TrackingService.setMediaStart(),this.mediator.publish(this,sd.ContentStart,{payload:this.getStorySlidesMetadata()})})),this.subscribe(fa.ContentEnd,this.hN,(()=>{this.app.services.TrackingService.trackMediaQuartile(r.ProtoQuartilesEnum.Fourth),this.mediator.publish(this,sd.ContentComplete,{payload:this.getStorySlidesMetadata()})})),this.floatingModule&&this.subscribe(c.Uh.UserInteraction,this.hN,this.jl),this.subscribe(ua.ProgressBarItemClicked,this.hN,(({payload:t})=>{this.mediator.publish(this,sd.ProgressBarItemClicked,{payload:this.$U(t)})})),null===(t=this.adHandler)||void 0===t||t.onLinearUiComponentEvent.subscribe((t=>{if(t.type===bt.Volume){const{volume:i}=t.payload;this.ws(i),this.hN.volume=i}})),this.subscribe(ua.CallToAction,this.hN,(()=>{this.mediator.publish(this,sd.CallToAction,{payload:this.DU()})})),this.subscribe(bt[bt.LogoClicked],this.hN,(()=>{this.mediator.publish(this,sd.BrandingClicked)})),this.subscribe(O,this.hN,(({payload:t})=>{this.ej!==t&&(this.ej=t,this.mediator.publish(this,sd.QualityChanged,{payload:t}))})),this.subscribe(ua.GeneralClickInteraction,this.hN,(({payload:t})=>{this.app.services.TrackingService.trackMediaClick(t)}))}jU(t,i){const{preRollBreak:e,postRollBreak:s}=this.Fd;this.BU=new dd(t,i,e,s)}OU(t){switch(t){case P.PlayingState:this.pd(Aa.ProtoAdSlotsEnum.MidRoll);break;case P.PrerollState:this.pd(Aa.ProtoAdSlotsEnum.PreRoll);break;case P.PostrollState:this.pd(Aa.ProtoAdSlotsEnum.PostRoll);break;case P.PausedState:this.Fd.adViewabilityPolicy===r.ProtoAdViewabilityPolicy.Default&&!this.VU.inView||this.xd.onContentStop();break;case P.StoppedState:this.xd.onContentStop()}}RU(t){switch(t){case P.PlayingState:this.app.services.TrackingService.setSessionPlayback(!0),this.mediator.publish(this,sd.Play,{payload:this.DU()});break;case P.PausedState:this.mediator.publish(this,sd.Pause,{payload:this.DU()}),this.app.services.TrackingService.setSessionPlayback(!1);break;case P.StoppedState:this.mediator.publish(this,sd.ContentComplete,{payload:this.getStorySlidesMetadata()}),this.app.services.TrackingService.setSessionPlayback(!1);break;default:this.app.services.TrackingService.setSessionPlayback(!0)}}_U(){this.VU=new Ul(this,this.Fd.playbackMode),this.subscribe(Nl[Nl.Play],this.VU,(t=>{this.hN.play(!1),t.payload&&(0,H.kE)(t.payload.volume)&&super.setNewVolume(t.payload.volume)})),this.subscribe(Nl[Nl.Pause],this.VU,(t=>{this.hN.pause(!1),t.payload&&(0,H.kE)(t.payload.volume)&&super.setNewVolume(t.payload.volume)})),this.subscribe(c.Uh.UserInteraction,this.hN,(({payload:{playback:t}})=>{(0,H.$K)(t)&&this.VU.setUserPlayback(t)})),this.VU.setViewability(this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.fl}));const t=this.hN.canPlay().subscribe((t=>{this.VU.setCanPlay(t)}));this.ZD.push(t)}NU(){this.adHandler&&(this.adHandler.start(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight,this.Fd.soundMode===Aa.ProtoPlayerSoundMode.On?1:0,!1,!1),this.xd.forceRecheck())}Od(){const t=this.getNextSlide();this.adHandler.setContinueReadingCard({imageSrc:t.metadata.imageUrl,title:t.metadata.title}),super.Od(),this.hN.hide()}Dd(){this.bd.isInAdPod()?this.$d((()=>{this.xd.onAdFinished(this.adHandler.linearInImpression,lt.LINEAR,this.bd.isInAdPod()),super.Dd(),this.hN.show()})):(super.Dd(),this.hN.show())}Sd(){return new da(this,this.Fd,this.$playerContainer,this.checkFloatingViewability(this.isViewable()),this.bd,this.app,this.pl,this.Hd(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight))}Vd(){const t=new md({minSlidesBeforeFirstAd:this.Fd.minSlidesBeforeFirstAd,slidesBetweenAds:this.Fd.slidesBetweenAds});return new fd(this,this.isViewable(),{linearAdsControllerData:{numberOfMidRolls:this.Fd.midRollNumber,maxAdSlotDuration:this.bd.getMaxAdSlotDuration(),maxAdPodDuration:this.bd.getMaxAdPodDuration()},viewabilityPolicy:this.Fd.adViewabilityPolicy,playerDimensions:{width:this.$playerContainer.offsetWidth,height:this.$playerContainer.offsetHeight}},t)}Ts(){super.Ts(),this.hN&&this.hN.onResize(),this.PU.setRatio(),this.MU(),this.UU.updateWidth(this.$playerContainer.clientWidth)}Wa(){return this.floatingModule&&this.floatingModule.isInFloating}Gc(t,i=!1){super.Gc(t,i),this.VU&&(this.VU.setViewability(t),this.VU.setIsAppBackgrounded(i),this.VU.setSoundVolume(this.hN.volume)),this.hN&&this.hN.setViewabilityState(t)}HU(){const t=this.app.services.GlobalDomUtilsService.getGlobalClosestTop().topFrame.document.body;this.app.services.ResizeObserver.on(t,(()=>{this.PU.setRatio(!0)}))}Ld(){return{isAutoPlay:this.Fd.playbackMode===Aa.ProtoPlayerPlaybackModeEnum.Autoplay,isSkippable:!0,skipOffset:0}}start(){const t=Object.create(null,{start:{get:()=>super.start}});return bd(this,void 0,void 0,(function*(){try{t.start.call(this),this.SU(this.floatingModule),this.LU(),this.NU(),this.jU(this.hN,this.adHandler),this.ru(this.hN),this.HU(),this.UU=new et(this.$playerContainer,this.app.config.device,ql,d.Rq),this.qU(this.$playerContainer),yield this.hN.start(),this.Nd()}catch(t){(0,s.n)({message:"PlayspaceExperience_start",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}))}setSlide(t){this.hN.setSlide(t)}getNextSlide(){return this.hN.getNextSlide()}play(){super.play();this.hN.play(!1)}pause(){super.pause();this.hN.pause(!1)}getStoryId(){return this.Fd.storyId}getStoryPosition(){return this.hN.currentSlideIndex}getStoryTimeline(){return this.hN.slides.map((t=>t.media.duration/I.s_))}updateCtaLabel(t,i){(0,H.kE)(t)&&(0,H.QM)(i)&&this.hN.updateCtaLabel(t,i)}getStorySlidesMetadata(){return this.hN.slidesMetadata.map((({title:t,clickUrl:i,slideDuration:e})=>({title:t,clickUrl:i,duration:e})))}getQuality(){return this.hN.getQuality()}setQuality(t){this.hN.setQuality(t)}getOrientation(){return this.PU.getOrientation()}setOrientation(t){this.PU.setOrientation(t)}setPreRollBreak(t){var i;this.Fd.setPreRollBreak(t),null===(i=this.BU)||void 0===i||i.setPreRollBreak(this.Fd.preRollBreak),this.hN.hasPreroll=(0,H.r)(this.Fd.preRollBreak)}setPostRollBreak(t){var i;this.Fd.setPostRollBreak(t),null===(i=this.BU)||void 0===i||i.setPostRollBreak(this.Fd.postRollBreak),this.hN.hasPostroll=(0,H.r)(this.Fd.postRollBreak)}DU(){return this.hN.getCurrentMetadata()}$U(t){if(!(t<0||this.hN.slidesMetadata.length<t))return this.hN.slidesMetadata[t]}wU(){this.app.services.TrackingService.setNewMedia(this.FU())}FU(){const t=this.hN.getCurrentStoryMeta(),i=this.hN.getCurrentMetadata(),e=i.title||i.coverMetadata&&i.coverMetadata.title;return{mediaId:(null==t?void 0:t.storyId)||this.Fd.storyId,clickUrl:i.clickUrl,slideTitle:e,slideNumber:this.hN.currentSlideIndex+1,slideMediaType:i.mediaType,insights:(null==t?void 0:t.insights.insights)||[],sentimentAnalysis:(null==t?void 0:t.insights.sentimentAnalysis)||{}}}xU(t){this.adHandler&&this.adHandler.setMediaRestrictions(t)}bU(t){return{mediaInsights:{insights:t.insights.insights,insightsFallback:!1}}}qU(t){if(!(0,H.QM)(this.Fd.sdkVersion)&&(0,H.QM)(this.app.config.bundleID)){const i=this.app.services.GlobalDomUtilsService.querySelector("body");(0,it.T7)(i,{margin:"0"}),t.clientWidth>=300&&((0,it.T7)(t,{"min-height":"250px"}),(0,it.Tp)(t)),(0,wt.Vm)([95,5])&&(0,s.n)({message:"PlayspaceExperience_start",exception:"IN_APP_RENDER_PLAYER_SIZE",callStack:`width: ${this.$playerContainer.clientWidth}: height: ${this.$playerContainer.clientHeight} `,level:s.D.INFO})}}zU(){}}class wd{constructor(){this.wu={}}on(t,i){if(this.wu[t]=this.wu[t]||[],!(0,H.mf)(i))throw new Error(`${t} event callback is not a function`);return this.wu[t].push(i),()=>this.wu[t]=this.wu[t].filter((t=>t!==i))}once(t,i){const e=this.on(t,(t=>{try{i(t)}catch(t){}e()}))}remove(t,i){this.wu[t]&&(this.wu[t]=this.wu[t].filter((t=>t!==i)))}removeAll(){this.wu={}}trigger(t,i){this.wu[t]&&this.wu[t].forEach((t=>{try{t(i)}catch(t){}}))}}class _d extends class{constructor(t){this.experience=t,this.WU=(t,i)=>this.ga.on(t,i),this.GU=(t,i)=>{this.ga.remove(t,i)},this.JU=()=>{this.ga.removeAll()},this.QU=(t,i)=>{this.ga.once(t,i)},this.YU=()=>this.experience.isViewable(),this.XU=t=>{this.experience.setViewableThreshold(t)},this.ZU=()=>{this.experience.play()},this.KU=()=>{this.experience.pause()},this.tH=()=>this.experience.getVolume(),this.iH=t=>{this.experience.setVolume(t)},this.Dc=()=>{this.experience.triggerDestroy()},this.eH=()=>{this.experience.disableAdvertising()},this.nH=()=>{this.experience.enableAdvertising()},this.rH=()=>{this.experience.enableFloatingMode()},this.oH=()=>{this.experience.disableFloatingMode()},this.hH=()=>this.experience.isFloatingModeEnabled(),this.Fc=t=>{this.experience.setFloatingSettings(t)},this.aH=t=>{this.experience.setCustomMacros(t)},this.cH=t=>{this.experience.setAmpUserConsent(t)},this.ga=new wd}trigger(t,i){this.ga.trigger(t,i)}setDestroyed(){this.trigger(v.Km.Removed)}getApiMethods(){return{on:this.WU,remove:this.GU,removeAll:this.JU,once:this.QU,isViewable:this.YU,setViewableThreshold:this.XU,play:this.ZU,pause:this.KU,getVolume:this.tH,setVolume:this.iH,disableAdvertising:this.eH,enableAdvertising:this.nH,enableFloatingMode:this.rH,disableFloatingMode:this.oH,isFloatingModeEnabled:this.hH,setFloatingSettings:this.Fc,setMacros:this.aH,setAmpUserConsent:this.cH,destroy:this.Dc}}}{constructor(){super(...arguments),this.lH=()=>this.experience.getStoryPosition(),this.dH=()=>this.experience.getStoryId(),this.uH=()=>this.experience.getStoryTimeline(),this.pH=t=>{this.experience.setSlide(t)},this.fH=(t,i)=>{this.experience.updateCtaLabel(t,i)},this.pV=()=>this.experience.getStorySlidesMetadata(),this.gH=()=>this.experience.getQuality(),this.mH=t=>{this.experience.setQuality(t)},this.yH=()=>{const t=this.experience.getOrientation();return ld.LayoutEnum[Aa.ProtoPlayerOrientationEnum[t]]},this.vH=t=>{const i=Object.keys(ld.LayoutEnum).find((i=>ld.LayoutEnum[i]===t));i&&Aa.ProtoPlayerOrientationEnum[i]&&this.experience.setOrientation(Aa.ProtoPlayerOrientationEnum[i])},this.bH=()=>this.experience.getSize(),this.xH=t=>{this.experience.setPreRollBreak(t)},this.wH=t=>{this.experience.setPostRollBreak(t)}}getApiMethods(){return Object.assign(Object.assign({},super.getApiMethods()),{getStoryPosition:this.lH,setStoryPosition:this.pH,getStoryId:this.dH,getStoryTimeline:this.uH,setCtaLabel:this.fH,getStoryMetadata:this.pV,getQuality:this.gH,setQuality:this.mH,getLayout:this.yH,setLayout:this.vH,getPlayerSize:this.bH,setPreRollBreak:this.xH,setPostRollBreak:this.wH})}}class Pd extends g{constructor(){super(...arguments),this.Ta="cnx-ps"}createExperience(t,i){this.experience=new xd(this,i,this.app.services.UrlSuffixerService),this.experienceApi=new _d(this.experience)}getApiMethods(){return this.experienceApi.getApiMethods()}isSupportedBreakpoint(t){return!(this.experienceContainer.clientWidth<vd[t].xs)}}var Sd,Ad;!function(t){t[t.none=0]="none",t[t.friendly=1]="friendly",t[t.safe=2]="safe"}(Sd||(Sd={}));class Id{constructor(t,i,e=!1){this.Ue=t,this.RB=i,this._H=[],this.PH=Sd.none,this.AH={intersectionObserver:!1,fallbackImplementation:!1},this.IH=null,this.kH=[0,.01,.1,.2,.5],this.CH=250,this.TH=!1,this.MH=t=>{this.TH=t,this.EH(),f.S.pageFocus=t},this.EH=()=>{this._H.forEach((t=>{const i=this.BH(t.element);this.onViewHandle(t,i)}))},this.LH=()=>{null===this.IH&&(this.IH=setTimeout((()=>{this.EH(),clearTimeout(this.IH),this.IH=null}),this.CH))},this.OH(e),this.RH(),this.DH()}DH(){this.RB.on(this.MH),f.S.pageFocus=this.RB.isDocumentVisible()}OH(t){this.Ue.IntersectionObserver&&!t?this.AH.intersectionObserver=!0:this.AH.fallbackImplementation=!0,this.Ue.self!==this.Ue.top?(this.FH=this.$H(this.Ue),null!==this.FH?this.PH=Sd.friendly:this.PH=Sd.safe):this.FH=this.Ue.frameElement}$H(t){let i;try{if(i=t.parent,i===this.Ue.top)return t.frameElement}catch(t){return null}return this.$H(i)}RH(){this.AH.intersectionObserver?this.jH=new this.Ue.IntersectionObserver(this.onObserverEnter.bind(this),{root:null,rootMargin:"0px",threshold:this.kH}):(this.Ue.addEventListener("scroll",this.LH),this.Ue.addEventListener("load",this.EH),this.Ue.addEventListener("resize",this.EH))}VH(t){return this._H.find((i=>i.element===t))}BH(t){if(this.PH===Sd.safe){const i=this.VH(t);return i?i.cachedPercentInView:0}let i=1;const e=t.getBoundingClientRect(),s={bottomRatio:e.bottom/e.height,topRatio:(this.Ue.top.innerHeight-e.top)/e.height,leftRatio:(this.Ue.top.innerWidth-e.left)/e.width,rightRatio:e.right/e.width};return Object.keys(s).forEach((t=>{s[t]<=0&&(i=0),s[t]>0&&s[t]<1&&(i*=s[t])})),i}onObserverEnter(t){t.forEach((t=>{this._H.filter((i=>i.element===t.target)).forEach((i=>{this.onViewHandle(i,t.intersectionRatio)}))}))}onViewHandle(t,i){t.cachedPercentInView=i,t.list.forEach((t=>{!t.callbackSent&&t.threshold<=i&&this.TH?(t.callbackSent=!0,t.timeout=(0,wt.ld)(t.callback,t.callbackDelay,!0)):t.callbackSent&&(t.threshold>i||!this.TH)&&(t.callbackSent=!1,clearTimeout(t.timeout),t.timeout=(0,wt.ld)(t.callback,0,!1))}))}on(t,i,e={}){let s=!1;if(this.AH.fallbackImplementation)if(this.PH===Sd.friendly&&t.ownerDocument.defaultView!==this.Ue.top)t=this.FH;else if(this.PH===Sd.safe)return void(0,wt.ld)(i,0,!1);let n=this._H.find((i=>i.element===t));n?s=!0:(n={element:t,list:[],cachedPercentInView:0},this._H.push(n)),n.list.push({threshold:e.threshold,callbackSent:!1,callbackDelay:e.callbackDelay,timeout:null,callback:i}),this.AH.intersectionObserver?(s&&this.jH.unobserve(t),this.jH.observe(t)):this.AH.fallbackImplementation&&this.EH()}off(t,i){const e=this._H.find((i=>i.element===t));if(e){let s=e.list.length;for(;s;)s--,e.list[s].callback===i&&e.list.splice(s,1);0===e.list.length&&(this.jH&&this.jH.unobserve(t),this._H.splice(this._H.indexOf(e),1))}}check(t={threshold:.1}){if(!t.element)return!1;let i=t.element;return this.PH===Sd.friendly&&(i=this.FH),this.BH(i)>=t.threshold&&this.TH}triggerRecheck(t){this.AH.fallbackImplementation&&t&&this._H.forEach((i=>{if(i.element===t){const t=this.BH(i.element);this.onViewHandle(i,t)}}))}setViewableThreshold(t){}getIsTabInFocus(){return this.TH}subscribe(t,i){}destroy(){this.Ue.removeEventListener("scroll",this.LH),this.Ue.removeEventListener("load",this.EH),this.Ue.removeEventListener("resize",this.EH);[].slice.call(this._H).forEach((t=>{[].slice.call(t.list).forEach((i=>{this.off(t.element,i.callback),this.Ue.clearTimeout(i.timeout)}))})),this.RB.off(this.MH),clearTimeout(this.IH)}}class kd{constructor(){this._H=[],this.BH=0,this.NH=!1,this.EH=t=>{this._H.forEach((i=>{t&&t!==i.element||this.UH(i,this.BH)}))}}HH(t){let i=this._H.find((i=>i.element===t));return i||(i={element:t,list:[],cachedPercentInView:0},this._H.push(i)),i.list}UH(t,i){t.list.forEach((t=>{!t.callbackSent&&t.threshold<=i?(t.callbackSent=!0,t.timeout=(0,wt.ld)(t.callback,t.callbackDelay,!0,this.NH)):t.callbackSent&&t.threshold>i&&(t.callbackSent=!1,clearTimeout(t.timeout),t.timeout=(0,wt.ld)(t.callback,0,!1,this.NH))}))}on(t,i,e){this.HH(t).push({threshold:e.threshold,callbackSent:!1,callbackDelay:e.callbackDelay,timeout:null,callback:i}),this.EH()}off(t,i){const e=this._H.find((i=>i.element===t));if(e){for(let t=e.list.length;t--;)e.list[t].callback===i&&e.list.splice(t,1);0===e.list.length&&this._H.splice(this._H.indexOf(e))}}check(t={threshold:.1}){return this.BH>=t.threshold}triggerRecheck(t){this.EH(t)}qH(t){this.NH=t}setViewableThreshold(t){this.BH=t,this.triggerRecheck()}getIsTabInFocus(){return!0}subscribe(t,i){}destroy(){for(let t=this._H.length;t--;){const i=this._H[t];for(let t=i.list.length;t--;)clearTimeout(i.list[t].timeout),this.off(i.element,i.list[t].callback)}}}function Cd(t){return(0,H.as)(t)&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function Td(t){return Cd(t)?Md({},t):t}function Md(t,i){return function(t,i){const e={};return Cd(t)&&Object.keys(t).forEach((i=>{e[i]=Td(t[i])})),Object.keys(i).forEach((s=>{Cd(i[s])&&t[s]?e[s]=Md(t[s],i[s]):e[s]=Td(i[s])})),e}(t,i)}!function(t){t[t.Normal=0]="Normal",t[t.Buzzfeed=1]="Buzzfeed"}(Ad||(Ad={}));class Ed{constructor(t=0){this.zH=t,this.WH=16,this.GH=9}getHeightByRatio(t){return Math.round(t/this.WH*this.GH)+this.zH}}class Bd{constructor(t,i,e={}){this.floatingMode=(0,H.$K)(e.mode)?e.mode:t.floatingMode,(0,l.BZ)(e.devices)?this.floatingDeviceMode=e.devices:this.floatingDeviceMode=(0,l.BZ)(t.floatingDeviceMode)?t.floatingDeviceMode:[r.ProtoDeviceType.Desktop],(0,H.$K)(e.closeButton)?this.floatingCloseButtonMode=e.closeButton:(0,H.$K)(t.floatingCloseButtonMode)?this.floatingCloseButtonMode=t.floatingCloseButtonMode:this.floatingCloseButtonMode=r.ProtoPlayerCloseButtonMode.OnHover,this.floatingPosition=(0,H.$K)(e.fixedPosition)?e.fixedPosition:t.floatingFixedPosition,this.floatingScrollPosition=(0,H.$K)(e.scrollPosition)?e.scrollPosition:t.floatingScrollPosition,this.floatingWidth=(0,H.$K)(e.floatingWidth)?e.floatingWidth:t.floatingWidth||400,this.floatingGutterX=(0,H.$K)(e.floatingGutterX)?e.floatingGutterX:t.floatingGutterX,this.floatingGutterY=(0,H.$K)(e.floatingGutterY)?e.floatingGutterY:t.floatingGutterY,this.pageElement=(0,H.$K)(e.floatingPageElement)?e.floatingPageElement:t.floatingPageElement,this.appendLocation=(0,H.$K)(e.floatingAppendLocation)?e.floatingAppendLocation:t.floatingAppendLocation,this.floatingYAxisPadding=(0,H.$K)(e.floatingYAxisPadding)?e.floatingYAxisPadding:t.floatingYAxisPadding,this.setScrollPosition(this.floatingScrollPosition),this.JH=new Ed(i)}setScrollPosition(t){this.QH=t===r.ProtoPositionMode.BottomLeft||t===r.ProtoPositionMode.TopLeft,this.YH=t===r.ProtoPositionMode.BottomRight||t===r.ProtoPositionMode.TopRight,this.XH=t===r.ProtoPositionMode.TopLeft||t===r.ProtoPositionMode.TopRight,this.ZH=t===r.ProtoPositionMode.BottomRight||t===r.ProtoPositionMode.BottomLeft}get isPositionedLeft(){return this.QH}get isPositionedRight(){return this.YH}get isPositionedTop(){return this.XH}get isPositionedBottom(){return this.ZH}set isPositionedLeft(t){this.QH=t}set isPositionedRight(t){this.YH=t}set isPositionedBottom(t){this.ZH=t}set isPositionedTop(t){this.XH=t}set width(t){this.floatingWidth=t}set gutterX(t){this.floatingGutterX=t}set gutterY(t){this.floatingGutterY=t}get width(){return this.floatingWidth}getHeight(t){return`${this.JH.getHeightByRatio(t)}px`}}class Ld extends class{constructor(t,i,e,n,o,h,a,c,l,d,u,p=0){if(this.global=t,this.targetContainer=i,this.KH=e,this.qa=n,this.secondLevelDomain=o,this.apiConfig=h,this.isServerlessMode=a,this.supplyChainSettings=c,this.isSeoTraffic=l,this.pl=d,this.videoPosition=u,this.sharingDestinations=[],this.disableAdvertising=!1,this.adBreaks=[],this.disableClickUrl=!1,this.moatTrackingEnabled=!1,this.pauseAdWhenFinished=!1,this.loopAdWhenFinished=!1,this.adsMustBeSkippableIfLongerThan=Yt.f3,(0,H.QM)(e.initializationSettingsJson))try{const t=JSON.parse(e.initializationSettingsJson);this.apiConfig=Md(this.apiConfig,t)}catch(t){(0,s.n)({message:"invalid_init_json",exception:t.message,callStack:t.callStack,level:s.D.CRITICAL})}if((this.apiConfig.playerMode===Ad.Buzzfeed||this.apiConfig.settings.pauseAdWhenFinished)&&(this.pauseAdWhenFinished=!0),this.tq(this.KH.lineItems),this.soundMode=(0,H.$K)(this.apiConfig.settings.defaultSoundMode)?this.apiConfig.settings.defaultSoundMode:e.soundMode,this.playbackMode=(0,H.$K)(this.apiConfig.settings.playbackMode)?this.apiConfig.settings.playbackMode:e.playbackMode,this.playbackMode===r.ProtoPlayerPlaybackModeEnum.ClickToPlay||this.soundMode===r.ProtoPlayerSoundMode.Mute||(0,wt.we)()||(this.soundMode=r.ProtoPlayerSoundMode.Mute),this.html=e.html,this.css=e.css,this.floatingSettings=new Bd(e,p,this.apiConfig.settings.customization.floating),e.logoResource||(0,H.QM)(this.apiConfig.settings.customization.logoUrl)){let t=`${ze.n.endPoints.base.image}${e.playerId}/${e.logoResource}`;t=this.pl.appendParamsToUrl(t),this.logoUrl=(0,H.QM)(this.apiConfig.settings.customization.logoUrl)?this.apiConfig.settings.customization.logoUrl:t}const f=e.amazonTamSlotId;(0,H.QM)(f)&&(this.amazonTamSlotId=f),(0,H.$K)(this.apiConfig.settings.advertising.macros)&&(this.externalMacros=this.apiConfig.settings.advertising.macros),(0,H.$K)(this.apiConfig.settings.disableAdvertising)&&(this.disableAdvertising=this.apiConfig.settings.disableAdvertising),this.midRollNumber=(0,H.$K)(this.apiConfig.settings.advertising.maxNumberOfMidRolls)?this.apiConfig.settings.advertising.maxNumberOfMidRolls:e.midRollNumber,this.adViewabilityPolicy=e.adViewabilityPolicy,this.preRollBreak=((0,H.$K)(this.apiConfig.settings.advertising.preRollBreak)?(0,ae.qe)(this.apiConfig.settings.advertising.preRollBreak,500):e.preRollBreak)*I.s_,this.postRollBreak=((0,H.$K)(this.apiConfig.settings.advertising.postRollBreak)?(0,ae.qe)(this.apiConfig.settings.advertising.postRollBreak,500):e.postRollBreak)*I.s_,this.playerId=e.playerId,this.floatingSettings.floatingMode===r.ProtoPlayerFloatingMode.Always?this.closeButtonMode=this.floatingSettings.floatingCloseButtonMode:this.closeButtonMode=(0,H.$K)(this.apiConfig.settings.customization.closeButtonMode)?this.apiConfig.settings.customization.closeButtonMode:e.closeButtonMode,this.isCloseButton=!!this.closeButtonMode||!!this.floatingSettings.floatingCloseButtonMode,this.uiComponentsVisibility={casting:!1,expandButton:(0,H.$K)(this.apiConfig.settings.customization.showExpandButton)?this.apiConfig.settings.customization.showExpandButton:e.expandButton},this.sharingDestinations=void 0,this.adPlaybackMode=e.adPlaybackMode,(0,H.$K)(this.apiConfig.settings.disableClickUrl)&&(this.disableClickUrl=this.apiConfig.settings.disableClickUrl);const{skippability:g,skipAdAfter:m,skipMin:y}=h.settings.advertising.skipAdSettings||{};this.skipAdAfter=(0,H.$K)(m)?m:e.skipAdAfter,this.skippability=(0,H.$K)(g)?g:e.skippability,this.skipMin=(0,H.$K)(y)?y:e.skipMin;const{disableTracking:v}=h.settings._connatixInternals;(v||a||this.isSeoTraffic)&&(this.disableTracking=!0),this.sessionId=this.KH.sessionId}setPreRollBreak(t){this.preRollBreak=this.iq(this.preRollBreak,t)}setPostRollBreak(t){this.postRollBreak=this.iq(this.postRollBreak,t)}iq(t,i){const e=(0,ae.w4)(i);return null===e?t:e}eq(){this.sq(),this.nq();let t=[...this.rq(),...this.oq()];t=this.hq(t),t=this.aq(t),t=this.cq(t);const i=(0,H.$K)(this.apiConfig.settings.rendering.scrollHijackingProtection)?this.apiConfig.settings.rendering.scrollHijackingProtection:this.KH.scrollHijackingProtection;this.lineItemSettings={lineItems:t,disableScrollHijackEnforcement:i},this.lq(this.lineItemSettings)}dq(t){return t*I.s_}pq(t,i){i.adTag=(0,H.$K)(t.url)?t.url:i.adTag,i.requestCap=(0,H.$K)(t.contentRequestCap)?t.contentRequestCap:i.requestCap,i.impressionCap=(0,H.$K)(t.contentImpressionCap)?t.contentImpressionCap:i.impressionCap,i.viewability=(0,H.$K)(t.viewability)?t.viewability:i.viewability,i.sound=(0,H.$K)(t.sound)?t.sound:i.sound,i.ignoreFilledRequests=(0,H.$K)(t.ignoreFilledRequests)?t.ignoreFilledRequests:i.ignoreFilledRequests,i.headerBidderBids=(0,H.$K)(t.headerBidderBids)?t.headerBidderBids:i.headerBidderBids,i.prebidJsBidParamsJSONString=(0,H.$K)(t.prebidJsBidParamsJSONString)?t.prebidJsBidParamsJSONString:i.prebidJsBidParamsJSONString,i.headerBidderTimeout=(0,H.$K)(t.headerBidderTimeout)?t.headerBidderTimeout:i.headerBidderTimeout,i.resetRequestsCapTime=(0,H.$K)(t.resetRequestsCapTime)?t.resetRequestsCapTime:i.resetRequestsCapTime,i.resetImpressionsCapTime=(0,H.$K)(t.resetImpressionsCapTime)?t.resetImpressionsCapTime:i.resetImpressionsCapTime,i.resetCapType=(0,H.$K)(t.resetCapType)?t.resetCapType:i.resetCapType,i.timeBetweenRequests=(0,H.$K)(t.timeBetweenRequests)?t.timeBetweenRequests:i.timeBetweenRequests,i.skipMode=(0,H.$K)(t.skipMode)?t.skipMode:i.skipMode,i.floorPrice=(0,H.$K)(t.floorPrice)?t.floorPrice:i.floorPrice,i.adBreakSettings=(0,H.$K)(t.adBreakSettings)?t.adBreakSettings:i.adBreakSettings,i.pauseAdOutOfView=(0,H.$K)(t.pauseAdOutOfView)?t.pauseAdOutOfView:i.pauseAdOutOfView,i.nonlinearLineItemSettings=(0,H.$K)(t.nonlinearLineItemSettings)?this.fq(t.nonlinearLineItemSettings):i.nonlinearLineItemSettings,i.adType=(0,H.$K)(t.nonlinearLineItemSettings)?r.ProtoAdType.Nonlinear:i.adType}fq(t){const i={nonLinearRequestType:t.nonLinearRequestType?t.nonLinearRequestType:r.ProtoNonlinearRequestType.Banner,nonLinearAdTimeSeconds:t.nonLinearAdTimeSeconds?t.nonLinearAdTimeSeconds:15};return i.nonLinearAdTimeSeconds<15&&(i.nonLinearAdTimeSeconds=15),i.nonLinearAdTimeSeconds>180&&(i.nonLinearAdTimeSeconds=180),i}sq(){this.gq(this.apiConfig.settings.advertising.preRollBreak,r.ProtoAdBreakTypeEnum.PreRoll),this.gq(this.apiConfig.settings.advertising.postRollBreak,r.ProtoAdBreakTypeEnum.PostRoll),this.gq(this.apiConfig.settings.advertising.maxNumberOfMidRolls,r.ProtoAdBreakTypeEnum.MidRoll)}gq(t,i){const e=this.mq(this.apiConfig.settings.advertising.adBreaks,i),s=this.mq(this.KH.adBreaks,i),n={maxAdPodDuration:0,maxAdSlotDuration:0,numberOfAdSlots:1,types:[i]};e?this.adBreaks.push(e):!(0,H.$K)(t)||e||s?!e&&s&&this.adBreaks.push(s):this.adBreaks.push(n)}mq(t,i){if(!t)return;let e;return t.forEach((t=>{t.types.includes(i)&&(e=Object.assign({},t),e.types=[i])})),e}aq(t){const{adBreaks:i}=this;let e=t;const s=[];return i.forEach((t=>{t.types.forEach((i=>s.push(Object.assign(Object.assign({},t),{types:[i]}))))})),s.forEach((t=>{e=this.removeCompatibleLineItems(t,e)})),t.filter((t=>!e.includes(t)))}cq(t){return t.filter((t=>t.adType!==r.ProtoAdType.Nonlinear))}removeCompatibleLineItems(t,i){const e=t.types[0],s=t.numberOfAdSlots>1?r.ProtoLineItemAdBreakTypeEnum.AdPod:r.ProtoLineItemAdBreakTypeEnum.SingleAd;return i.filter((t=>!t.adBreakSettings.adBreakTargeting.some((t=>t.adRollType===e&&(t.adBreakTypeEnum===r.ProtoLineItemAdBreakTypeEnum.All||t.adBreakTypeEnum===s)))))}tq(t){t.forEach((t=>{t.adBreakSettings||this.yq(t),this.vq(t)}))}yq(t){t.adBreakSettings={adBreakTargeting:[{adRollType:r.ProtoAdBreakTypeEnum.PreRoll,adBreakTypeEnum:r.ProtoLineItemAdBreakTypeEnum.All},{adRollType:r.ProtoAdBreakTypeEnum.MidRoll,adBreakTypeEnum:r.ProtoLineItemAdBreakTypeEnum.All},{adRollType:r.ProtoAdBreakTypeEnum.PostRoll,adBreakTypeEnum:r.ProtoLineItemAdBreakTypeEnum.All}]}}vq(t){0===t.requestCap&&(t.requestCap=20)}nq(){this.adBreaks.forEach((t=>{t.maxAdSlotDuration=this.dq(t.maxAdSlotDuration),t.maxAdPodDuration=this.dq(t.maxAdPodDuration),t.numberOfAdSlots<=1?t.maxAdPodDuration=0:t.maxAdSlotDuration>t.maxAdPodDuration&&(t.maxAdSlotDuration=t.maxAdPodDuration)}))}bq(t,i){const e=Object.assign({},i);return this.pq(t,e),(0,H.$K)(t.externalMediaFile)&&(e.externalMediaFile=t.externalMediaFile),(0,H.$K)(t.externalHlsFile)&&(e.externalHlsFile=t.externalHlsFile),e.customCpm=t.cpm,e}rq(){const t=[];if(!(0,l.BZ)(this.apiConfig.settings.advertising.lineItems))return[];const i=this.KH.lineItems.filter((t=>t.creativeType===r.ProtoCreativeTypeEnum.External));return this.apiConfig.settings.advertising.lineItems.forEach((e=>{if(this.vq(e),this.isServerlessMode){const i=this.xq(),s=this.bq(e,i);t.push(s)}else i.forEach((i=>{if(e.id===i.advertiserLineItemId&&(e.url||e.headerBidderBids||e.prebidJsBidParamsJSONString||e.externalMediaFile||e.externalHlsFile)){const s=this.bq(e,i);t.push(s)}}))})),t}oq(){return!0===this.apiConfig.settings.advertising.blockConnatixDemand?[]:this.KH.lineItems.filter((t=>t.creativeType!==r.ProtoCreativeTypeEnum.External))}hq(t){return t.forEach((t=>{t.creativeType===r.ProtoCreativeTypeEnum.External&&(t.headerBidderBids&&"[]"!==t.headerBidderBids||(0,H.QM)(t.prebidJsBidParamsJSONString)?t.creativeType=r.ProtoCreativeTypeEnum.HeaderBidder:t.externalMediaFile||t.externalHlsFile?t.creativeType=r.ProtoCreativeTypeEnum.MediaFile:t.creativeType=r.ProtoCreativeTypeEnum.ThirdParty)})),t}xq(){return r.ProtoLineItem.toObject(r.ProtoLineItem.fromObject({}),{defaults:!0,arrays:!0,objects:!0})}lq(t){this.moatTrackingEnabled=t.lineItems.some((t=>t.moatTrackingEnabled))}}{constructor(t,i,e,s,n,r,o,h,a,c,l,d){super(t,i,e,s,n,r,o,h,d,a,c,72),this.global=t,this.targetContainer=i,this.KH=e,this.pl=a,this.videoPosition=c,this.storyPosition=l,this.fontFamilySettings={},this.primaryColorList={},this.secondaryColorList={},this.accentColorList={},this.disableCTARendering=!1,this.disableStoryProgressBarRendering=!1,this.disableTitleRendering=!1,this.activeVersion=this.KH.activeVersion,this.storyId=this.KH.storyId,this.storyMetadata=this.apiConfig.settings.story,this.sdkVersion=this.apiConfig._appSettings.sdkVersion,this.minSlidesBeforeFirstAd=(0,H.$K)(this.apiConfig.settings.advertising.slidesBeforeFirstAd)?this.apiConfig.settings.advertising.slidesBeforeFirstAd:this.KH.minSlidesBeforeFirstAd,this.slidesBetweenAds=(0,H.$K)(this.apiConfig.settings.advertising.slidesBetweenAds)?this.apiConfig.settings.advertising.slidesBetweenAds:this.KH.slidesBetweenAds,this.KH.floatingMode===Aa.ProtoPlayerFloatingMode.Always?this.orientation=Aa.ProtoPlayerOrientationEnum.Landscape:this.orientation=(0,H.$K)(this.apiConfig.settings.customization.orientation)?this.apiConfig.settings.customization.orientation:this.KH.orientation,this.orientationBreakpoint=(0,H.$K)(this.apiConfig.settings.customization.orientationBreakpoint)?this.apiConfig.settings.customization.orientationBreakpoint:this.KH.orientationBreakpoint,(0,H.as)(this.apiConfig.settings.customization.fontFamilySettings)&&(this.fontFamilySettings=this.apiConfig.settings.customization.fontFamilySettings),this.wq(),this._q(),this.Pq(),this.Sq(),this.Aq(),this.Iq(),this.useAccentColorForProgressBar=(0,H.$K)(this.apiConfig.settings.customization.useAccentColorForProgressBar)?this.apiConfig.settings.customization.useAccentColorForProgressBar:this.KH.useAccentColorForProgressBar,this.endOfSlideCycleMode=(0,H.$K)(this.apiConfig.settings.endOfSlideCycleMode)?this.apiConfig.settings.endOfSlideCycleMode:this.KH.endOfCycleMode,this.uiComponentsVisibility.expandButton=!1,this.disableCTARendering=(0,H.$K)(this.apiConfig.settings.disableCTARendering)&&this.apiConfig.settings.disableCTARendering,this.disableStoryProgressBarRendering=(0,H.$K)(this.apiConfig.settings.disableStoryProgressBarRendering)&&this.apiConfig.settings.disableStoryProgressBarRendering,this.disableTitleRendering=(0,H.$K)(this.apiConfig.settings.disableTitleRendering)&&this.apiConfig.settings.disableTitleRendering,this.publisherName=(0,H.QM)(this.apiConfig.settings.customization.publisherName)?this.apiConfig.settings.customization.publisherName:this.KH.publisherName,this.eq(),this.activeVersionHasInsights=this.KH.activeVersionHasInsights,this.activeVersionHasInsights?(0,H.QM)(this.storyId)&&(0,H.QM)(this.activeVersion)&&Or.k.loadInsights({insightsInputType:$l.i.Story,id:this.storyId,versionId:this.activeVersion}):Or.k.markAsUnavailable(this.storyId)}wq(){this.apiConfig.settings.customization.primaryColorList&&(0,H.QM)(this.apiConfig.settings.customization.primaryColorList.background)?this.primaryColorList.background=this.apiConfig.settings.customization.primaryColorList.background:this.KH.primaryColorList&&(0,H.QM)(this.KH.primaryColorList.background)&&(this.primaryColorList.background=this.KH.primaryColorList.background)}_q(){this.apiConfig.settings.customization.primaryColorList&&(0,H.QM)(this.apiConfig.settings.customization.primaryColorList.foreground)?this.primaryColorList.foreground=this.apiConfig.settings.customization.primaryColorList.foreground:this.KH.primaryColorList&&(0,H.QM)(this.KH.primaryColorList.foreground)&&(this.primaryColorList.foreground=this.KH.primaryColorList.foreground)}Pq(){this.apiConfig.settings.customization.secondaryColorList&&(0,H.QM)(this.apiConfig.settings.customization.secondaryColorList.background)?this.secondaryColorList.background=this.apiConfig.settings.customization.secondaryColorList.background:this.KH.secondaryColorList&&(0,H.QM)(this.KH.secondaryColorList.background)&&(this.secondaryColorList.background=this.KH.secondaryColorList.background)}Sq(){this.apiConfig.settings.customization.secondaryColorList&&(0,H.QM)(this.apiConfig.settings.customization.secondaryColorList.foreground)?this.secondaryColorList.foreground=this.apiConfig.settings.customization.secondaryColorList.foreground:this.KH.secondaryColorList&&(0,H.QM)(this.KH.secondaryColorList.foreground)&&(this.secondaryColorList.foreground=this.KH.secondaryColorList.foreground)}Aq(){this.apiConfig.settings.customization.accentColorList&&(0,H.QM)(this.apiConfig.settings.customization.accentColorList.background)?this.accentColorList.background=this.apiConfig.settings.customization.accentColorList.background:this.KH.accentColorList&&(0,H.QM)(this.KH.accentColorList.background)&&(this.accentColorList.background=this.KH.accentColorList.background)}Iq(){this.apiConfig.settings.customization.accentColorList&&(0,H.QM)(this.apiConfig.settings.customization.accentColorList.foreground)?this.accentColorList.foreground=this.apiConfig.settings.customization.accentColorList.foreground:this.KH.accentColorList&&(0,H.QM)(this.KH.accentColorList.foreground)&&(this.accentColorList.foreground=this.KH.accentColorList.foreground)}}function Od(t,i){const e=t.toObject({},{defaults:!0,arrays:!0,objects:!0}),s=function(t){return t.toObject({},{defaults:!0,arrays:!0,objects:!0})}(i);return e.players.push(s),e.browser=r.Browser.toObject(r.Browser.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),e.geoLocation=r.GeoLocation.toObject(r.GeoLocation.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),e}var Rd=h(3344),Dd=h(7382);class Fd extends kd{constructor(t,i){super(),this.Ue=t;try{this.ga=new wd,this.Qh()}catch(t){(0,s.n)({message:"omid_verification_client_error",exception:t.message,callStack:t.callStack,level:i?s.D.CRITICAL:s.D.INFO})}}subscribe(t,i){return this.ga.on(t,i)}Qh(){const t=Dd.$.getVerificationClient(this.Ue);if(!t)throw new Error("omid_verification_client_not_found");if(this.kq=new t,!this.kq.isSupported())throw new Error("omid_not_implemented");this.Cq(),this.OE()}Cq(){this.kq.registerSessionObserver((t=>{t&&t.type===Rd._f.sessionError&&(0,s.n)({message:"omid_verification_client_session_error",exception:t.data.message,level:s.D.WARN})}))}OE(){this.kq.addEventListener(Rd._f.geometryChange,(t=>{try{const{percentageInView:i,reasons:e}=t.data.adView,s=[Rd.li.backgrounded,Rd.li.notFound].some((t=>e.includes(t)));this.qH(s);const n=i/100;this.setViewableThreshold(n),this.ga.trigger(v.rl.OmidViewabilityThreshold,n)}catch(t){(0,s.n)({message:"omid_verification_client_geometry_change_error",exception:t.message,callStack:t.callStack,level:s.D.CRITICAL},{throttle:1})}}))}}const $d=`cnx-playspace-css-${t.g.version}`;class jd extends o.a{pe(){return{id:$d,src:ze.n.endPoints.assets.css.playspace}}getDelegateHandler(){return{getCurrentVolume:()=>this.renderer.getApiMethods().getVolume()}}getRendererInstance(t,i,e,s){return new Pd(this,t,i,e,s)}getViewabilityService(t,i){return this.externalAttributes.settings.useExternalViewabilityService?new kd:this.mi?new Fd(window,this.vi):new Id(t.global,i)}getPlayerResponse(i,e){return new Promise(((e,s)=>{Qe.n.sendProtoRequest({ProtoResponse:Aa.ProtoPlayspaceResponse,ProtoRequest:Aa.ProtoPlayspaceRequest,requestData:i,endpoint:ze.n.endPoints.api.story,withCredentials:!0,queryParams:Object.assign({[Ke.Fk]:t.g.version},rs.f.getCidKeyValueObject()),logError:!0}).then((t=>{this.setApiHostUrl(t.apiHostUrl),window.parent.connatixDummy&&(0,ns.Ph)("connatixDummy",this.pageUrl)&&(t.players[0]=Object.assign(Object.assign({},t.players[0]),window.parent.connatixDummy)),e(t)})).catch((t=>{this.GLOBAL.cnxDummyResponse?e(this.GLOBAL.cnxDummyResponse):s(t)}))}))}getPlayerModel(t,i,e,s){return new Ld(t.insertWindow?t.insertWindow:this.GLOBAL,t.insertContainer,i.players[s],i.browser.device,i.secondLevelDomain,this.externalAttributes,this.isServerlessMode,i.supplyChain,e,this.queryParams.cnxVideoPosition,this.queryParams.cnxStoryPosition,i.isSeoTraffic||this.queryParams.cnxIsSeoTraffic)}getApiConfigEnums(){return ld}getApiConfigEvents(){return sd}getSpecificRequestData(){const t={};return this.queryParams.cnxStoryId?t.forceStoryId=this.queryParams.cnxStoryId:this.externalAttributes.storyId&&(t.forceStoryId=this.externalAttributes.storyId),t}defaultInitFromProto(){return Od(Aa.ProtoPlayspaceResponse,Aa.ProtoPlayspace)}Ei(){super.Ei(),this.externalAttributes.settings.story=void 0}}var Vd=h(1730),Nd=h(3121);class Ud{constructor(t=!1){this._debugLogging=t,this.Tq="eventEmitted",this.ga=new wd}subscribe(t){return this.ga.on(this.Tq,t)}unsubscribe(t){this.ga.remove(this.Tq,t)}emitSessionStart(t){const i={videoMetadata:t};this.Mq({metadata:i,name:Nd.Z.SessionStart})}emitContentComplete(){this.Mq({name:Nd.Z.ContentComplete})}emitSessionEnd(){this.Mq({name:Nd.Z.SessionEnd})}emitPlay(){this.Mq({name:Nd.Z.Play})}emitPause(){this.Mq({name:Nd.Z.Pause})}emitAdPlay(){this.Mq({name:Nd.Z.AdPlay})}emitAdPause(){this.Mq({name:Nd.Z.AdPause})}emitAdPlaying(t){const i={adType:t};this.Mq({name:Nd.Z.AdPlaying,metadata:i})}emitAdPaused(t){const i={adType:t};this.Mq({name:Nd.Z.AdPaused,metadata:i})}emitAdImpression(t,i,e){const s={adMetadata:t,customAdMetadata:i,adType:e};this.Mq({metadata:s,name:Nd.Z.AdImpression})}emitAdComplete(t){const i={adType:t};this.Mq({name:Nd.Z.AdComplete,metadata:i})}emitAdStopped(t){const i={adType:t};this.Mq({name:Nd.Z.AdStopped,metadata:i})}emitAdBreakStart(t){const i={adBreakMetadata:t};this.Mq({metadata:i,name:Nd.Z.AdBreakStart})}emitAdBreakComplete(t){const i={adType:t};this.Mq({name:Nd.Z.AdBreakComplete,metadata:i})}emitPlayerResized(t){const i={playerDimensionsMetadata:t};this.Mq({metadata:i,name:Nd.Z.PlayerResized})}emitOnEnterFullscreen(){this.Mq({name:Nd.Z.OnEnterFullscreen})}emitOnExitFullscreen(){this.Mq({name:Nd.Z.OnExitFullscreen})}emitOnPlayerCollapsed(){this.Mq({name:Nd.Z.PlayerCollapsed})}emitOnPlayerExpanded(){this.Mq({name:Nd.Z.PlayerExpanded})}emitAdError(t){const i={adType:t};this.Mq({name:Nd.Z.AdError,metadata:i})}emitPlayError(){this.Mq({name:Nd.Z.PlayError})}emitRenderError(){this.Mq({name:Nd.Z.RenderError})}emitAdClickThru(t){const i={adType:t};this.Mq({name:Nd.Z.AdClickThru,metadata:i})}emitAdInteraction(t){const i={adType:t};this.Mq({name:Nd.Z.AdInteraction,metadata:i})}emitAdVideoStart(t,i){const e={adVideoStartMetadata:t,adType:i};this.Mq({metadata:e,name:Nd.Z.AdVideoStart})}emitAdLoaded(t,i){const e={adLoadedMetadata:t,adType:i};this.Mq({metadata:e,name:Nd.Z.AdLoaded})}emitAdStateChange(t,i){const e={adStateChangedMetadata:t,adType:i};this.Mq({metadata:e,name:Nd.Z.AdStateChange})}emitAdVideoFirstQuartile(t){const i={adType:t};this.Mq({name:Nd.Z.AdVideoFirstQuartile,metadata:i})}emitAdVideoMidpoint(t){const i={adType:t};this.Mq({name:Nd.Z.AdVideoMidpoint,metadata:i})}emitAdVideoThirdQuartile(t){const i={adType:t};this.Mq({name:Nd.Z.AdVideoThirdQuartile,metadata:i})}emitAdVideoComplete(t){const i={adType:t};this.Mq({name:Nd.Z.AdVideoComplete,metadata:i})}emitVolumeChange(t){this.Mq({name:Nd.Z.VolumeChange,metadata:{volume:t}})}emitAdVolumeChange(t){const i={adType:t};this.Mq({name:Nd.Z.AdVolumeChange,metadata:i})}emitAdSkipped(t){const i={adType:t};this.Mq({name:Nd.Z.AdSkipped,metadata:i})}Mq(t){var i;(null===(i=null==t?void 0:t.metadata)||void 0===i?void 0:i.adType)!==r.ProtoAdType.Nonlinear&&(this._debugLogging&&console.log("Connatix Player Elements debugging: ",t),this.ga.trigger(this.Tq,t))}destroy(){this.Mq({name:Nd.Z.Destroy}),this.ga.removeAll()}}var Hd,qd=h(9207);!function(t){t.connatix="connatix.com",t.elements="elements.video"}(Hd||(Hd={}));Hd.connatix,Hd.elements;const zd=window.parent,Wd=(0,it.bZ)(Ke.ym,window.document.currentScript);rs.f.customerId=Wd;const Gd=[];window.addEventListener("unload",(function(t){Gd.forEach((t=>t.destroy()))}));const Jd=(0,wt.pE)(zd).topFrame;Vd.e.abServiceType=Vd.j.PlayspaceABService;const Qd=function(t,i,e){var o,h;const a=(0,H.QM)(t._appSettings.bundleID),c=(0,H.QM)(t._appSettings.sdkVersion);if(c){const i=parseInt(t._appSettings.sdkVersion.substr(0,1),10);t.settings.useExternalViewabilityService=!(i>=3)}const{cmp:l,tcf:d,usPrivacyString:u,deviceID:p}=t._appSettings,f=((t,i)=>i.AMP_CONTEXT_DATA||t.settings.implementationType===r.ProtoImplementationType.Amp)(t,zd),g={UserManagerService:new n.x(Jd,a,f,{cmp:l,tcf:d,usPrivacyString:u,deviceID:p}),EventsStorageService:new Ud(t.settings.plugins._debugLogging),UrlSuffixerService:new qd.f},m=new jd(g,zd,a,f,c,!1,e);Gd.push(m);const y=function(){const e={id:$d,src:ze.n.endPoints.assets.css.playspace};(0,wt.Up)((()=>function(t){return new Promise(((i,e)=>{if((0,it.rI)(t.id,Jd))return i();(0,it.NS)(t,Jd.document.head,Jd,(()=>i()),(t=>e(t)))||e()}))}(e))).catch((t=>{throw(0,s.n)({message:"Prerender_Playspace_Loader_add_css_link",exception:t.message,callStack:t.stack,level:s.D.INFO},{throttle:1e3}),t})).then((()=>{try{(0,it.Nb)(zd),m.updateQueryParams(),m.loadScriptTag(t,i)?m.insertRenderer():(0,s.n)({message:"Prerender_Playspace_main_no_script_tag",level:s.D.INFO},{throttle:1e3})}catch(t){(0,s.n)({message:"Prerender_Playspace_main_insertRenderer",exception:t.message,callStack:t.stack,level:s.D.INFO},{throttle:1e3})}})).catch((()=>{}))};a?(m.setInappPageUrl(null===(o=null==t?void 0:t._appSettings)||void 0===o?void 0:o.appPageURL),y()):m.findPageUrl(zd,null===(h=null==t?void 0:t.settings)||void 0===h?void 0:h.ampUrl).then((()=>y())).catch((t=>{(0,s.n)({message:"Prerender_Playspace_main_init",exception:t.message,callStack:t.stack,level:s.D.INFO},{throttle:1e3}),m.registerApiError()}))};try{!function(){if((0,wt.oC)())return void(0,s.n)({message:"Prerender_Playspace_main_IE_check",level:s.D.INFO},{throttle:1e3});ze.n.bundleDomain=Hd.connatix;let t=[];zd.cnxps&&(t=zd.cnxps.cmd),zd.cnxps=function(){function t(t){var i;t.settings=t.settings||{},t._appSettings=t._appSettings||{},t._appSettings.cmp=t._appSettings.cmp||{},t._appSettings.tcf=t._appSettings.tcf||{},t.settings.customization=t.settings.customization||{},t.settings.rendering=t.settings.rendering||{},t.settings.advertising=t.settings.advertising||{},t.settings._connatixInternals=t.settings._connatixInternals||{},t.settings.plugins=t.settings.plugins||{},t.settings.advertising.skipAdSettings=t.settings.advertising.skipAdSettings||{};return["602660809","com.thomsonreuters.reuters","12345","com.cnx.androidsdkapp"].includes(null===(i=null==t?void 0:t._appSettings)||void 0===i?void 0:i.bundleID)&&(0,s.n)({level:s.D.INFO,message:"CNX_REUTERS_APPSETTINGS",exception:JSON.stringify(t._appSettings)}),t=(t=>{var i,e,s;const n=Object.assign({},t),r=null===(i=n._appSettings)||void 0===i?void 0:i.cmp;((0,H.QM)(null===(e=n._appSettings)||void 0===e?void 0:e.gdprConsentString)||(0,H.QM)(null===(s=n._appSettings)||void 0===s?void 0:s.gdprParsedVendorString))&&(n._appSettings.cmp={consentString:(0,H.QM)(null==r?void 0:r.consentString)?r.consentString:n._appSettings.gdprConsentString,parsedVendorConsents:(0,H.QM)(null==r?void 0:r.parsedVendorConsents)?r.parsedVendorConsents:n._appSettings.gdprParsedVendorString});const o=Object.assign({},(0,yh.EQ)(Object.assign({},n._appSettings.cmp))),h=Object.assign({},(0,yh.EQ)(Object.assign({},n._appSettings.tcf))),{usPrivacyString:a,deviceID:c,appPageURL:l}=(0,yh.EQ)({usPrivacyString:n._appSettings.usPrivacyString,deviceID:n._appSettings.deviceID,appPageURL:n._appSettings.appPageURL});return n._appSettings=Object.assign(Object.assign({},n._appSettings),{cmp:o,tcf:h,usPrivacyString:a,deviceID:c,appPageURL:l}),n})(t),{render:function(i,e){try{Qd(t,i,e)}catch(t){(0,s.n)({message:"Prerender_Playspace_main_initPlayer",exception:t.message,callStack:t.stack,level:s.D.INFO},{throttle:1e3})}}}}return t.cmd={push:function(t){try{t()}catch(t){(0,s.n)({message:"Prerender_Playspace_main_push_callback",level:s.D.INFO,exception:t.message,callStack:t.stack},{throttle:1e3})}}},t.configEnums=ld,t.configEvents=sd,t}(),t.forEach((t=>{try{t()}catch(t){(0,s.n)({message:"Prerender_Playspace_main_commands_callback",exception:t.message,callStack:t.stack,level:s.D.INFO},{throttle:1e3})}}))}()}catch(t){(0,s.n)({message:"Prerender_Playspace_main",exception:t.message,callStack:t.stack,level:s.D.INFO},{throttle:1e3})}})(),a=h.O(a)})();