(self.webpackChunkbe_fe_time=self.webpackChunkbe_fe_time||[]).push([[9389],{53448:(e,t,n)=>{"use strict";function o(e,t,n,o){var r,c=n.minutes,a=o.path,i=a?" path=".concat(a):"";if(c){var s=new Date;s.setTime(s.getTime()+60*c*1e3),r=s.toGMTString()}var l=r?" expires=".concat(r,";"):"";document.cookie="".concat(e,"=").concat(t,";").concat(l).concat(i)}function r(e){document.cookie="".concat(e,"= ;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;")}n.d(t,{kT:()=>r,pC:()=>o})},38550:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>P});var o=n(20726),r=n(53448),c=n(3283),a=n.n(c),i=n(3581),s=n(4942);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u,p="walletConnected",f="wallet_sub",w="wallet_connect_progress",v=function(){var e=JSON.parse(localStorage.getItem(p)),t={currentProvider:"",isConnected:!1};if(e){var n=e.currentProvider,o=void 0===n?"":n,r=e.isConnected,c=void 0!==r&&r;t=d(d({},t),{},{currentProvider:o,isConnected:c})}return t},h=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];localStorage.removeItem(p),(0,r.kT)(f),(0,r.kT)(w),e&&window.location.reload()},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];localStorage.setItem(p,JSON.stringify({currentProvider:e,isConnected:t})),(0,r.pC)(w,"true",{minutes:1},{path:"/"}),t||window.location.reload()},y=null!==(u=n(34155).env.INFURA_SECRET)&&void 0!==u?u:"3b2a21985f0d430f9f74b1bd86e47ab4",g="metamask",b="walletconnect",_="TIMEPiecesError",L="InvalidWalletProvider";function P(){var e=document.querySelector(".component.connect-crypto-wallet"),t=document.querySelectorAll(".connect-your-wallet__faq-item"),n=document.querySelector(".loading-icon"),c=document.querySelectorAll(".dropdown-content__crypto-wallet-option[data-wallet-type], .connect-your-wallet__providers-button[data-wallet-type]"),s=document.querySelector(".connect-your-wallet__crypto-wallet-status"),l=function(){var e,t=document.querySelector(".dropdown-content__crypto-wallet-disconnect"),n=window.ethereum,c=new o.Z({infuraId:y}),s=v(),l=s.currentProvider,d=s.isConnected,u=!1,p=function(e){return 0===e.length?"":e[0]},f=function(){return e=new(a())(c),c.enable().then((function(){return e.eth.getAccounts()}))},w=function(){c.disconnect().then(h)};return{connect:function(e){var t;if(!e)return Promise.reject({message:"Invalid",type:L,code:_});if(e===g)t=n.request({method:"eth_requestAccounts"});else{if(e!==b)return Promise.reject({message:"".concat(e," is not a valid provider"),type:L,code:_});t=f(),u?window.location.reload():u=!0}return t.then(p).then((function(){return m(e)})).catch(h)},getAccounts:function(){var t;if(n&&l===g)t=(e=new(a())(n)).eth.getAccounts();else{if(l!==b)return Promise.reject({message:"No crypto wallet detected",type:"NoWalletDetected",code:_});t=f()}return t.then(p)},getCryptoSessionData:v,pushCryptoUserData:function(e,t){var n="/collection/timepieces-nft/"===e?"Collection Page":"Connect Crypto Wallet Page",o="Log in success".concat(t?" | TIMEPieces owner":""),r={event:"connectCryptoWalletSuccess",walletName:l,walletCtaLocation:n,walletActionMessage:o};d||(m(l,!0),(0,i.Z)(r))},removeCryptoSessionData:h,setEventListeners:function(e){var o;return l===g?o=n:l===b&&(o=c,t&&(t.addEventListener("click",w),t.addEventListener("touch",w))),o&&o.on("accountsChanged",(function(e){p(e)?((0,r.kT)("wallet_sub"),(0,r.kT)("wallet_connect_progress"),window.location.reload()):h()})),e}}}(),d=l.connect,u=(0,l.getCryptoSessionData)().currentProvider,p=!1,f=function(e){var t=e.currentTarget;t.classList.contains("open")?t.classList.remove("open"):t.classList.add("open")},w=function(){p=!p,e.classList.toggle("opened")},P=function(e){var t=e.currentTarget.dataset.walletType;u||d(t)};e.addEventListener("click",w),e.addEventListener("touch",w),u&&s?(s.classList.remove("hidden"),n.classList.add("hidden")):c.forEach((function(e,t){var o=document.querySelector(".connect-your-wallet__providers-buttons"),r=!1;if("metamask"===e.dataset.walletType){var a=window.matchMedia("only screen and (max-width: 760px)").matches;window.ethereum&&!a||(e.classList.add("hidden"),r=!0)}r||(e.addEventListener("click",P),e.addEventListener("touch",P)),t===c.length-1&&n&&o&&(n.classList.add("hidden"),o.classList.remove("hidden"))})),t.length>0&&(t.forEach((function(e){return e.addEventListener("click",f)})),t.forEach((function(e){return e.addEventListener("touch",f)})))}},3581:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=function(e){window.dataLayer=window.dataLayer||[],window.dataLayer.push(e)}},62859:()=>{},75304:()=>{},88677:()=>{},62808:()=>{},46601:()=>{},89214:()=>{},71922:()=>{},2363:()=>{},85568:()=>{},52361:()=>{},94616:()=>{},6567:()=>{},56773:()=>{},55896:()=>{},87500:()=>{},33557:()=>{}}]);