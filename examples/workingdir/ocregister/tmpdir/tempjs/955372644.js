(window._vfP=window._vfP||[]).push([[142],{534:function(t,n,e){},563:function(t,n,e){"use strict";e.d(n,"a",(function(){return r}));e(29);var i=function(){},o=function(t){return"$".concat(t,"_inListener")},s=function(t){return"$".concat(t,"_outListener")},a=function(t){return"$".concat(t,"_tid")},r=function(t){var n=t.inEvent,e=t.outEvent,r=t.activeClass,u=t.defaultCallback,c=void 0===u?i:u,l=t.outTimeout,f=void 0===l?50:l;return{inserted:function(t,i){var u=i.name,l=i.value,d=void 0===l?c:l,v=i.arg,h=void 0===v?r:v;t[o(u)]=function(){clearTimeout(t[a(u)]),t.classList.add(h),d(!0)},t.addEventListener(n,t[o(u)],{passive:!0}),t[s(u)]=function(){clearTimeout(t[a(u)]),t[a(u)]=setTimeout((function(){t.classList.remove(h),d(!1)}),f)},t.addEventListener(e,t[s(u)],{passive:!0})},unbind:function(t,i){var r=i.name;clearTimeout(t[a(r)]),delete t[a(r)],t.removeEventListener(n,t[o(r)]),delete t[o(r)],t.removeEventListener(e,t[s(r)]),delete t[s(r)]}}}},636:function(t,n){t.exports='<path fill=currentColor fill-rule=evenodd d="M50 3c7 0 13 3 18 7 4 5 7 11 8 18l5 28c2 7 5 10 9 12l3 3c1 1 2 2 2 5 0 2-2 5-5 5H10c-3 0-5-3-5-5 0-3 1-4 2-5l3-3c4-2 7-5 9-12l5-28c1-7 4-13 8-18 5-4 11-7 18-7zM36 83h28v1c0 8-6 14-14 14s-14-6-14-14v-1z"/> '},637:function(t,n,e){"use strict";e(534)},692:function(t,n,e){"use strict";e.r(n);e(24),e(4);var i=e(0),o=e(2),s=e(297),a=e(1),r=e(145),u=e(503),c=e(506),l=e(693),f=e(636),d=e.n(f),v=e(486),h=Object(v.c)("bell_icon",d.a),E=e(487),N=e(6),g=N.c.LIVEBLOG,L=N.c.TRAY_TRIGGER,p=N.c.COMMENTS,b={props:{floating:{type:String,default:"false"},parentComponent:{type:String,default:"",validator:function(t){return-1!==[g,L,p].indexOf(t)}}},created:function(){this.MAXIMUM_BEFORE_TRUNCATION=9},mounted:function(){var t=this;window.vf.context.init(r.a.NOTIFICATIONS),this.$publish(a.b.CHANNEL,a.b.EVENTS.BELL_LOAD,{widget_type:this.parentComponent}),this.$publish(a.H.CHANNEL,a.H.EVENTS.LOADED,this),this.$subscribe(a.H.CHANNEL,a.H.EVENTS.HIDE,(function(){t.hidden=t.isFloating})),this.$subscribe(a.H.CHANNEL,a.H.EVENTS.UNHIDE,(function(){setTimeout((function(){t.hidden=!1}),250)}));var n=window.localStorage.getItem("_vf_notification_queue_last_seen_".concat(this.currentUserUuid));this.isLoggedIn||null===n||this.$store.commit(o.Zb,n)},data:function(){return{dataVfId:-1,hidden:!1}},computed:{countBadgeSize:function(){return this.isFloating?s.a.SMALL:s.a.TINY},isFloating:function(){return"true"===this.floating},isLoggedIn:function(){return this.$store.getters[i.Sb]},currentUserUuid:function(){return this.$store.getters[i.kb]},count:function(){var t=this.$store.state.notifications.broadcasts.guest_user;return this.isLoggedIn||""===t?this.$store.getters[i.oc]:0},ariaCount:function(){return this.$i18n("aria.new_notifications",{num:this.count.toString()})},ariaLabel:function(){return this.$i18n("aria.open_tray")},classes:function(){return{"vf-tray-trigger":!0,"vf-offscreen-text":this.hidden,floating:this.isFloating,"vf-tray-trigger--floating":this.isFloating}},countClasses:function(){return{"vf-tray-count":!0,"vf-tray-count--floating":this.isFloating,"vf-tray-count--has-plus":this.count>9}}},methods:{toggle:function(){this.$publish(a.B.CHANNEL,a.B.EVENTS.TOGGLE,this.$el),this.$publish(a.H.CHANNEL,a.H.EVENTS.CLICKED),this.parentComponent===L?this.$publish(a.b.CHANNEL,a.b.EVENTS.TRAY_TRIGGER_CLICK,{floating:this.isFloating}):this.parentComponent===p?this.$publish(a.b.CHANNEL,a.b.EVENTS.CONVERSATION_BELL_CLICK):this.parentComponent===g&&this.$publish(a.b.CHANNEL,a.b.EVENTS.LIVEBLOG_BELL_CLICK)},trayIntent:function(){this.$publish(a.B.CHANNEL,a.B.EVENTS.OPEN_INTENT)}},components:{roundCountBadge:l.a,vfBellIcon:h,vfButton:E.a},directives:{hovered:c.a,innerFocus:u.a}},C=(e(637),e(45)),m=Object(C.a)(b,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("vf-button",{directives:[{name:"hovered",rawName:"v-hovered",value:t.trayIntent,expression:"trayIntent"},{name:"inner-focus",rawName:"v-inner-focus",value:t.trayIntent,expression:"trayIntent"}],class:t.classes,attrs:{"aria-label":t.ariaLabel,"data-vf-id":t.dataVfId},nativeOn:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.toggle(n)}}},[e("round-count-badge",{directives:[{name:"show",rawName:"v-show",value:t.count>0,expression:"count > 0"}],class:t.countClasses,attrs:{count:t.count,max:t.MAXIMUM_BEFORE_TRUNCATION,"aria-label":t.ariaCount,size:t.countBadgeSize}}),t._v(" "),e("vf-bell-icon",{staticClass:"vf-icon-medium"})],1)}),[],!1,null,"31133ebb",null);n.default=m.exports}}]);
//# sourceMappingURL=tray-trigger.c29c53e7c9cf42c87dd5.js.map