var googletag=googletag||{};googletag.cmd=googletag.cmd||[];var PWT=PWT||{},madops=madops||{};madops.debug={},madops.bidders=[],madops.pbBidders=[],madops.customFunctions=[],madops.gptVideoAdsEnabled=!1,madops.privacy={},madops.prebid={},madops.prebid.REQUEST_BID_TIMEOUT=600,madops.prebid.inUse=null,madops.prebid.receivedBids=[],madops.sizesSupported=[[300,250],[728,90],[300,600],[320,50],[970,250],[970,90],[160,600],[120,600],[300,50],[300,100]],madops.isAmazonNeeded=!1,madops.adUnitCounter=0,madops.adUnits=[],madops.customFunctions=[],madops.stickyElements=[],madops.pixelSegmentsTargeted=!1,madops.waitForPixel=!1,madops.pixelNotOnPage=!1,madops.pixelTimeoutFirstPass=!0,madops.pixelTimeout=500,madops.waitForPixelTimeout=500,madops.pixelTimedOut=!1,madops.activateSegmentWatcher=!0,madops.SEGMENT_TARGETING_TIMEOUT=1e3,madops.debug.forceCallbackLogging=!1,madops.pixelReady=!1,madops.PIXEL_SEGMENTS_MAX_LENGTH=800,madops._rnd=Math.random().toString().substring(2,14),madops.resetCalled=!1,madops.m32_wrapper=null,madops.enableLogs=void 0,madops.canRemoveHB=!1,madops.PREBID_TIMEOUT=2e3,madops.GPT_TIMEOUT=2e3,madops.MIN_REFRESH_PERIOD=30,madops.debug.refreshTimingsMs=[],madops.TABLET_MAX_AREA=1398784,madops.PHONE_MAX_AREA=338253,madops.addedDynamicAds=!1,madops.imaSDKCounts=0,madops.IMASDK_ATTEMPTS=20,madops.IMASDK_TIMEOUTS=100,madops.RESET_TIMEOUT_PERIOD=50,madops.REGISTER_AD_TIMEOUT_PERIOD=50,madops.RUN_PROCESS_TIMEOUT_PERIOD=50,madops.ADD_DYNAMIC_AD_TIMEOUT_PERIOD=50,madops.FETCH_VAST_ELEMENT_TIMEOUT_PERIOD=50,madops.REFRESH_SLOT_TIMEOUT_PERIOD=50,madops.FETCH_ADUNIT_PERIOD_TIMEOUT=50,madops.TARGET_VAST_URL_TIMEOUT_PERIOD=50,madops.VAST_DO_REQUEST_PERIOD=50,madops.MAX_FETCHING_ATTEMPTS=20,madops.fetchVastElementsCounter=0,madops.FETCH_VAST_ELEMENT_TIMEOUT=2e3,madops.SEGMENT_POLL_RATE=100,madops.segmentPollCount=0,madops.userId=!1,madops.privacy.NO_CONSENT=0,madops.privacy.FULL_CONSENT=2,madops.oopDivsCounter=0,madops.initialSection=window.location.pathname,M32DEBUG=!0,madops.PRESETS={"site-header":{sizes:[[970,90],[970,250],[728,90],[320,50]],sizeMapping:[[[0,0],[[320,50]]],[[768,0],[[728,90]]],[[1024,0],[[728,90],[970,250],[970,90]]]],kv:{pos:"top"}},"site-leaderboard":{sizes:[[728,90],[320,50]],sizeMapping:[[[0,0],[[320,50]]],[[768,0],[[728,90]]]]},"site-bigbox-double":{sizes:[[300,250],[300,600]],sizeMapping:[[[0,0],[[300,250]]],[[768,0],[[300,600]]]]},"site-bigbox-double-triple":{sizes:[[300,250],[300,600],[300,1050]],sizeMapping:[[[0,0],[[300,250]]],[[768,0],[[300,250],[300,600],[300,1050]]]]}};var m32shr=m32shr||{HTTP_TIMEOUT:2e3,GEOLOC_JSON_PATH:"https://geoloc.m32.media/json/",GDPR_COUNTRIES:["FR","IM","UA","SK","FO","ME","IE","LV","FI","AD","IT","RO","NL","SE","LT","PL","AX","LU","RU","PT","IS","GB","HU","MT","AT","CH","DK","GI","MD","RS","EE","GG","DE","NO","LI","BE","GR","JE","MC","BG","MK","SI","HR","BA","SJ","SM","ES","BY","VA","CZ","AL","GP","GF","MQ","MF","IC","RE","YT"],privacy:{tcDataLoaded:!1,consentCalled:!1,checkCCPA:!0,cmpListenerSet:!1,cmpcheckCounter:0,CMP_ATTEMPTS:6,CMP_TIMEOUT:50},inIframe:window!==window.top,urlParams:new URLSearchParams(window.location.search),seed:Math.random().toString().substring(2,14)};m32shr.getParameterByName=function(e){return m32shr.urlParams.get(e)},m32shr.loadScript=function(e,t){null==t&&(t={});let s=document.createElement("script");for(var o in e.match(/https:/)||(e="https:"+e),s.src=e,s.async=!0,t)t.hasOwnProperty(o)&&(s[o]=t[o]);document.head.appendChild(s)},m32shr.cookies={ONE_MINUTE:7e-4,MS_PER_DAY:864e5,createCookie:function(e,t,s){let o="";if(s){let e=new Date;e.setTime(e.getTime()+s*this.MS_PER_DAY),o="; expires="+e.toUTCString()}document.cookie=e+"="+t+o+"; path=/; SameSite=None; Secure"},readCookie:function(e){var s=e+"=";let o=document.cookie.split(";");for(let t=0,e=o.length;t<e;t++){let e=o[t].trim();if(0==e.indexOf(s))return e.substring(s.length,e.length)}return null}},m32shr.isPartOfGDPR=function(e){return m32shr.GDPR_COUNTRIES.includes(e)},m32shr.wrapWithErrorLogs=function(m){let l=this;return function(e,t,s,o,i,a,n,d,r,p){if(10<arguments.length)l.log(new Error("Function has an argument list larger than 10. Please add to wrapWithErrorLogs(...)"));else try{m(e,t,s,o,i,a,n,d,r,p)}catch(e){throw l.log(e),e}}},m32shr.log=function(t){var e;if(t instanceof Error){let e={};e.message=t.message,e.stack=t.stack,t=e}const s=new XMLHttpRequest;s.open("POST","https://err-rec.m32connect.com/log_error",!0),s.setRequestHeader("Content-type","application/json"),s.send(JSON.stringify((e=t.message,{version:"1dd97d2",stack_trace:t.stack,error_message:e,script_name:"shared",flags:{correlator:m32shr.seed}})))},m32shr.print=function(e,t){t?console.log(e):console.log("[M32] "+e)},m32shr.getDomain=function(e){if(""!=e)return e;var s=location.hostname.split(".").reverse();if(2===s.length)return location.hostname;var o=s[1];let i=[s[0],o];var a=["qc","nf","ns","nb","on","mb","sk","ab","bc","nu","nt","yk","co","vf-dev2","vf-dev3","vf-test2","vf-test3","scotsman","com"];for(let e=0,t=a.length;e<t;e++)if(o===a[e]){i.push(s[2]);break}return i.reverse().join(".")},madops.getDomain=m32shr.getDomain,m32shr.isObject=function(e){return e===Object(e)&&!Array.isArray(e)},m32shr.copy=function(e){return JSON.parse(JSON.stringify(e))},m32shr.ObjhasNull=function(e){for(var t in e)if(null===e[t])return!0;return!1},m32shr.isEmptyObj=function(e,t){return t?0===Object.keys(e).length:0===Object.keys(e).length&&e.constructor===Object},m32shr.arrayEq=function(e,t){return e.length==t.length&&(e="string"!=typeof e?JSON.stringify(e):e)===(t="string"!=typeof t?JSON.stringify(t):t)},m32shr.getYesterdayStr=function(){let e=new Date,t=new Date(e);t.setDate(e.getDate()-1);let s=t.getDate(),o=t.getMonth()+1;var i=t.getFullYear();return s<10&&(s="0"+s),o<10&&(o="0"+o),i+"-"+o+"-"+s},m32shr.asyncReq=function(e,t,s,o){const i=new XMLHttpRequest;function a(){o&&o()}i.onreadystatechange=m32shr.wrapWithErrorLogs(function(){4===i.readyState&&(200===i.status?s&&s(JSON.parse(i.responseText)):a())}),i.ontimeout=m32shr.wrapWithErrorLogs(function(){a()}),i.open(e,t,!0),i.timeout=m32shr.HTTP_TIMEOUT,i.send()},m32shr.getGeo=function(o,i,e,t,s){function a(){void 0!==window.__m32geoFct&&"function"==typeof window.__m32geoFct&&(window.__m32geoFct(),window.__m32geoFct=null)}window.__m32geoStatus=1,m32shr.asyncReq("GET",m32shr.GEOLOC_JSON_PATH,function(e){let t,s;s=e,void 0===s||!s||m32shr.isEmptyObj(s)||m32shr.ObjhasNull(s)?(window.__m32geo=null,window.__m32geoStatus=3,a(),i()):(s.hasOwnProperty("zip_code")&&(t=s.zip_code,delete s.zip_code,s.postal_code=t),s.hasOwnProperty("region")&&(t=s.region,delete s.region,s.region_name=t),m32shr.cookies.createCookie("m32_pubgeo",btoa(encodeURIComponent(JSON.stringify(s))),5*m32shr.cookies.ONE_MINUTE),window.__m32geo=s,window.__m32geoStatus=2,a(),o())},function(){window.__m32geo=null,window.__m32geoStatus=4,a(),i()})},m32shr.isGeoUnknown=function(){return!(window.hasOwnProperty("__m32geo")&&window.__m32geo&&window.__m32geo.hasOwnProperty("country_code")&&window.__m32geo.hasOwnProperty("region_name"))||""===window.__m32geo.country_code&&""===window.__m32geo.region_name},m32shr.privacy.geo={isGDPR:function(){return window.hasOwnProperty("__m32geo")&&window.__m32geo&&window.__m32geo.hasOwnProperty("country_code")&&m32shr.isPartOfGDPR(window.__m32geo.country_code)},isCCPA:function(){return window.hasOwnProperty("__m32geo")&&window.__m32geo&&window.__m32geo.hasOwnProperty("region_name")&&("California"===window.__m32geo.region_name||"Californie"===window.__m32geo.region_name)}},m32shr.privacy.determineConsentType=function(i,a,n){function d(){void 0!==window.__m32consent.callback&&"function"==typeof window.__m32consent.callback&&(window.__m32consent.callback(),window.__m32consent.callback=null)}function e(){function s(e,t){m32shr.privacy.tcDataLoaded||(t?(e.gdprApplies&&(window.__m32consentDataGDPRv2=e,window.__m32consent.data=e,m32shr.privacy.tcDataLoaded=!0),n&&m32shr.log(new Error("INFO - _tcfapiCallback success, regular ads")),window.__m32consent.status=2,d(),i()):(n&&m32shr.log(new Error("INFO - _tcfapiCallback failure, no ads")),window.__m32consent.status=3,d(),a()))}function t(){var e=window.__tcfapi&&"function"==typeof window.__tcfapi?(o(),!0):(m32shr.inIframe?n&&m32shr.log(new Error("INFO - doDetermineConsentType within iframe, no ads")):n&&m32shr.log(new Error("INFO - CMP failed to load, no ads")),!1);window.__m32consent.src=1,!e&&m32shr.privacy.cmpcheckCounter<m32shr.privacy.CMP_ATTEMPTS?(m32shr.privacy.cmpcheckCounter++,setTimeout(t,m32shr.privacy.CMP_TIMEOUT)):m32shr.privacy.cmpcheckCounter===m32shr.privacy.CMP_ATTEMPTS&&(window.__m32consent.status=3,a())}let o=function(){m32shr.privacy.cmpListenerSet||(window.__tcfapi("addEventListener",2,function(e,t){try{t&&("useractioncomplete"!==e.eventStatus&&"tcloaded"!==e.eventStatus||m32shr.privacy.consentCalled||(m32shr.privacy.consentCalled=!0,window.__tcfapi("getTCData",2,s),window.__tcfapi("removeEventListener",2,function(e){0})))}catch(e){0,n&&m32shr.log(new Error("INFO - CMP had error, no ads"))}}),m32shr.privacy.cmpListenerSet=!0)};t()}function t(){function s(e,t){t?(window.__m32consentDataCCPA=e,window.__m32consent={data:e,src:2,status:2},d(),i()):(window.__m32consent={src:2,status:3},d(),a())}window.__uspapi&&"function"==typeof window.__uspapi?window.__uspapi("uspPing",1,function(e,t){t?window.__uspapi("getUSPData",1,s):(window.__m32consent={src:2,status:3},d(),a())}):(m32shr.inIframe,window.__m32consent={src:2,status:3},d(),a())}void 0===window.__m32consent?(window.__m32consent={status:1},m32shr.privacy.geo.isGDPR()?e():m32shr.privacy.lookForCCPA&&m32shr.privacy.geo.isCCPA()?t():m32shr.isGeoUnknown()?e():(n&&m32shr.log(new Error("INFO - no TCFv2 check, regular ads")),window.__m32consent={status:2,src:0},d(),i())):1==window.__m32consent.status?window.__m32consent.callback=function(){(2===window.__m32consent.status?i:a)()}:(2===window.__m32consent.status?i:a)()},m32shr.acquireGeoAndConsent=function(e,t,s,o,i){var a;void 0===window.__m32geo?1==window.__m32geoStatus?window.__m32geoFct=function(){(2==window.__m32geoStatus?e:t)()}:3==window.__m32geoStatus||4==window.__m32geoStatus?t():null===(a=m32shr.cookies.readCookie("m32_pubgeo"))?m32shr.getGeo(e,t,s,o,i):(window.__m32geo=JSON.parse(decodeURIComponent(atob(a))),window.__m32geoStatus=2,e()):(window.__m32geo&&2===window.__m32geoStatus?e:t)()},madops.loadScript=m32shr.loadScript,madops.cookies=m32shr.cookies,madops.arrayEq=function(e,t){return!(!e||!t)&&m32shr.arrayEq(e,t)},madops.log=function(t){var e;if(t instanceof Error){let e={};e.message=t.message,e.stack=t.stack,t=e}const s=new XMLHttpRequest;s.open("POST","https://err-rec.m32connect.com/log_error",!0),s.setRequestHeader("Content-type","application/json"),s.send(JSON.stringify((e=t.message,{version:"1dd97d2",stack_trace:t.stack,error_message:e,script_name:"madops",flags:{correlator:madops._rnd}})))},madops.wrapWithErrorLogs=function(m){let l=this;return function(e,t,s,o,i,a,n,d,r,p){if(10<arguments.length)l.log(new Error("Function has an argument list larger than 10. Please add to wrapWithErrorLogs(...)"));else try{m(e,t,s,o,i,a,n,d,r,p)}catch(e){throw l.log(e),e}}},PWT.jsLoaded=function(){madops.canRemoveHB=window.owpbjs&&window.owpbjs.hasOwnProperty("removeAdUnit"),madops.loadGPTandStartAdops()},madops.prebidLoaded=function(){null!==madops.pbjsReady&&(clearInterval(madops.intervalPrebid),madops.canRemoveHB=window.pbjs&&window.pbjs.hasOwnProperty("removeAdUnit"))},madops.prebidTimedOut=function(){clearInterval(madops.intervalPrebid),madops.pbjsReady=null,madops.prebid.inUse=!1},madops.gptLoaded=function(){clearInterval(madops.intervalGPT),madops.gptReady=!0,madops.custom.hasOwnProperty("segmentInUse")&&madops.custom.segmentInUse&&!madops.inhibitFirstRegisters&&madops.targetOrTimeoutSegments()},madops.gptTimedOut=function(){clearInterval(madops.intervalGPT),madops.gptReady=null},madops.loadGPTandStartAdops=function(){window.googletag&&googletag.apiReady?madops.gptLoaded():(m32shr.loadScript("https://securepubads.g.doubleclick.net/tag/js/gpt.js",{async:!0}),madops.pushCallback(madops.gptLoaded),madops.intervalGPT=setInterval(madops.gptTimedOut,madops.GPT_TIMEOUT)),madops.startAdOps()},madops.getCustomParameter=function(e,t){return void 0===madops.customParameters||void 0===madops.customParameters[e]?t:madops.customParameters[e]},madops.readCustomFile=function(jsonResp){let _customFileCallback=function(){let e,t;if(Array.isArray(madops.custom.wrapper)&&m32shr.arrayEq(madops.custom.wrapper,[]))e="NOWRAPPER";else if(null==madops.custom.wrapper||0==madops.custom.wrapper.length)e="M32";else if(1==madops.custom.wrapper.length)e=madops.custom.wrapper[0].Type,t=madops.custom.wrapper[0].Id;else{let s=madops.getSubsiteFromBidders(madops.custom.bidders),o=-1;if(null!=s){s=s.toLowerCase();for(let e=0,t=madops.custom.wrapper.length;e<t;e++)if(s==madops.custom.wrapper[e].Subsite.toLowerCase()){o=e;break}}-1==o&&(o=0),e=madops.custom.wrapper[o].Type,t=madops.custom.wrapper[o].Id}let s=!1;if("M32"==e){0,madops.m32_wrapper=!0,madops.prebid.inUse=!0,madops.current_wrapper="M32";let e="https://rdc.m32.media";madops.debug.branch&&(e=e+"/madops/"+madops.debug.branch),m32shr.loadScript(e+"/prebid.1.js",{async:!0}),window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],window.pbjs.que.push(madops.prebidLoaded),madops.intervalPrebid=setInterval(madops.prebidTimedOut,madops.PREBID_TIMEOUT),s=!0}else if("OpenWrap"==e){0,madops.m32_wrapper=!1,madops.prebid.inUse=!0,madops.current_wrapper="OW";let e="";m32shr.getParameterByName("pwtv")&&(e="/"+m32shr.getParameterByName("pwtv")),m32shr.loadScript("https://ads.pubmatic.com/AdServer/js/pwt/158605/"+t+e+"/pwt.js",{async:!0})}else madops.m32_wrapper=!1,madops.prebid.inUse=!1,madops.current_wrapper=null,s=!0;if(madops.custom.hasOwnProperty("needsIMA")&&madops.custom.needsIMA&&(!madops.hasOwnProperty("loadingIMA")||!madops.loadingIMA)){0,madops.loadingIMA=!0;let e="https://imasdk.googleapis.com/js/sdkloader/";madops.debug.branch?e+="ima3_debug.js":e+="ima3.js",m32shr.loadScript(e,{async:!0})}s&&madops.loadGPTandStartAdops()};madops.custom=jsonResp;let custom=madops.custom;madops.bidders=custom.bidders,m32shr.getParameterByName("m32_subsite")?madops.bidders=madops.bidders[m32shr.getParameterByName("m32_subsite")]:(custom.getSubSite?madops.getSubSite=eval(custom.getSubSite):madops.getSubSite=function(){},custom.getBidders?madops.bidders=eval(custom.getBidders).call(madops):madops.bidders=[],null!=madops.bidders&&0==madops.bidders.length&&custom.bidders.hasOwnProperty("default")&&(madops.bidders=custom.bidders.default)),madops.bidders=void 0===madops.bidders?[]:madops.bidders;for(let i=0,mxb=madops.bidders.length;i<mxb;i++)"amazon"===madops.bidders[i].bidder?(madops.isAmazonNeeded=!0,function(s,o,e,t,i){function a(e,t){o[s]._Q.push([e,t])}o[s]||(o[s]={init:function(){a("i",arguments)},fetchBids:function(){a("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(t=e.createElement("script")).async=!0,t.src="//c.amazon-adsystem.com/aax2/apstag.js",(i=e.getElementsByTagName("script")[0]).parentNode.insertBefore(t,i))}("apstag",window,document)):madops.pbBidders.push(madops.bidders[i]);if(madops.bidders.some(function(e){return"teads"==e.bidder})&&(m32shr.loadScript("https://a.teads.tv/analytics/tag.js"),window.teads_analytics=window.teads_analytics||{},window.teads_analytics.analytics_tag_id="PUB_22050",window.teads_analytics.share=function(...e){(window.teads_analytics.shared_data=window.teads_analytics.shared_data||[]).push(e)}),custom.setCustomTargeting?madops.setCustomTargeting=eval(custom.setCustomTargeting):madops.setCustomTargeting=function(){},madops.customParameters=custom.customParameters,custom.customFunctions?Array.isArray(custom.customFunctions)?custom.customFunctions.forEach(function(element){eval(element).call(madops),madops.customFunctions.push(element)}):(eval(custom.customFunctions).call(madops),madops.customFunctions=[custom.customFunctions]):madops.customFunctions=function(){},custom.customReset?madops.customReset=eval(custom.customReset):madops.customReset=function(){},custom.customSlotRendered)if(madops.customSlotRendered){let cusSlotRend=madops.customSlotRendered;madops.customSlotRendered=function(event){"function"==typeof custom.customSlotRendered?custom.customSlotRendered(event):eval(custom.customSlotRendered).call(madops,event),cusSlotRend.call(madops,event)}}else madops.customSlotRendered=eval(custom.customSlotRendered);custom.disableHeaderBidding&&(madops.prebid.REQUEST_BID_TIMEOUT=1),madops.enableLogs=madops.custom.enableLogs,_customFileCallback(),madops.customFileReady=!0},madops.getCustomFile=function(){let e=m32shr.getDomain("");m32shr.getParameterByName("m32_debug_domain")?e=m32shr.getParameterByName("m32_debug_domain"):/localhost/.test(e)&&(e="m32.media");let t="https://rdc.m32.media/adops/custom_files/"+e+"/custom";"true"===m32shr.getParameterByName("m32_debug_staging")&&(t+=".staging"),t+=".json",m32shr.asyncReq("GET",t,madops.readCustomFile,function(){madops.customFileReady=null})},madops.translateSizeMapping=function(s){if(!m32shr.isObject(s[0]))return s;let o=[];for(let e=0,t=s.length;e<t;e++){var i=s[e].sizes,a=[s[e].viewport.min_width,s[e].viewport.min_height];o.push([a,i])}return o},madops.removeFluid=function(e){return e.filter(function(e){return"fluid"!=e})},madops.addPageTargetingFromContext=function(){var e=window.m32_context||void 0,t=window.context||window._context||void 0;let i;if(i=void 0!==e?e:null,i=void 0!==t?t:i,null!=i){for(let o in i){let s=[];if("string"==typeof i[o])s=i[o];else{if("[object Array]"!==Object.prototype.toString.call(i[o]))continue;for(let e=0,t=i[o].length;e<t;e++)s.push(i[o][e])}0,madops.pushCallback(function(){googletag.pubads().setTargeting(o,s)}),madops.outputDebugDiv&&(madops.debug.debugDiv.innerHTML+="googletag.pubads().setTargeting('"+o+"', '"+s+"');\n")}madops._context=i}else madops._context=null},madops.addPageTargeting=function(){if(""!=document.referrer){let e=document.createElement("a");e.href=document.referrer;let t=e.host;madops.pushCallback(function(){googletag.pubads().setTargeting("referer",t)}),madops.outputDebugDiv&&(madops.debug.debugDiv.innerHTML+="googletag.pubads().setTargeting('referer', "+t+");\n")}let s=document.querySelector("title");if(s){let e=s.innerText.replace(/[^a-zA-Z]/g,"-"),t=e.substring(0,30);0,madops.pushCallback(function(){googletag.pubads().setTargeting("title",t),googletag.pubads().setTargeting("full_title",e)}),madops.outputDebugDiv&&(madops.debug.debugDiv.innerHTML+="googletag.pubads().setTargeting('title', '"+t+"');\n",madops.debug.debugDiv.innerHTML+="googletag.pubads().setTargeting('full_title', '"+e+"');\n")}madops.addPageTargetingFromContext()},madops.addKVToUrl=function(e,s,i){if(!i||!e||!s)return e;let a=e.split("&");var t=a[0].split("?");if(1<t.length)a.splice(0,1,t[1]);else if(1===t.length){if(1<a.length)return console.warn("The provided url is invalid: "+e+" it contains kvp pairs but no ? character the mark the start of the param enumeration"),e;a=[]}let n=!1;for(let t=0,e=a.length;t<e;t++){let e=a[t].split("=");if(s===e[0]){n=!0;let s=[],o=!1;if(e.forEach(function(e,t){t&&((e=(e=(e=e.replace("%3D","=")).replace("%26","&")).replace("%2C",","))===i&&(o=!0),s.push(e))}),s=encodeURIComponent(s.join("=")),o)break;e[1]=s+encodeURIComponent("&"+i),a[t]=e[0]+"="+e[1];break}}return e=n?e.split("?")[0]+"?"+a.join("&"):0===a.length?e+"?"+s+"="+encodeURIComponent(i):e+"&"+s+"="+encodeURIComponent(i)},madops.AdUnit=function(e,t){if(this.div=e,this.rendered=!1,this.called=!1,this.received=!1,this.prebidTimeoutBids=[],this.prebidBidsReceived=[],this.prebidBids=[],this.apstagSlot=[],this.id=t?madops.getId(t):madops.getId(madops.adUnitCounter),madops.adUnitCounter+=1,this.div.id=this.id,this.isDisplayed=!1,this.mediaTypes={banner:{sizes:[]}},this.div.dataset.options&&""!=this.div.dataset.options)try{this.options=JSON.parse(this.div.dataset.options),madops.testUnit&&(this.options.dfpAdUnitPath="dart.test.site/"+madops.testUnit,madops.pbTimeout=1)}catch(e){throw this.options={},e.message="Cannot parse div dataset\n"+e.message,madops.enableLogs&&madops.log(e),e}if(void 0!==this.options.madopsPreset){let e=madops.PRESETS[this.options.madopsPreset];for(var s in void 0===e&&console.warn("m32 ad ops script : Preset not found : "+this.options.madopsPreset),e)e.hasOwnProperty(s)&&("kv"===s&&this.options[s]?Object.assign(this.options[s],e[s]):this.options[s]=e[s])}if(!this.options.sizeMapping||this.options["out-of-page"])this.sizeMappingDefinition=null,this.sizeMappingPresent=!1;else{this.sizeMappingPresent=!0;let s=this.options.sizeMapping;"string"==typeof s&&(s=JSON.parse(s)),s=madops.translateSizeMapping(s);for(let e=0,t=s.length;e<t;e++)Array.isArray(s[e][1])&&("fluid"!=s[e][1][0]&&(s[e][1]=Array.isArray(s[e][1][0])?s[e][1]:[s[e][1]]),(m32shr.arrayEq(s[e][1],[[]])||m32shr.arrayEq(s[e][1],[[0,0]]))&&(s[e][1]=[]));this.sizeMappingDefinition=s}void 0===this.options.dfpId&&madops.enableLogs&&madops.log(new Error("The div should have a DFP id")),this.tile=void 0===t?madops.adUnits.length:t;this._computedSize=function(e){if(e["out-of-page"])return[[1,1]];let t;if("string"==typeof e.sizes)t=JSON.parse(e.sizes);else{if(!(e.sizes instanceof Array))return madops.enableLogs&&madops.log(new Error("Type unrecognized in: "+e.sizes.toString())),[];t=e.sizes}return t,t}(this.options),this._sizesToUseForBid=this.filterSizesThatAreSupported(this.getSizesFromSizeMapOrSize()),0==this._sizesToUseForBid.length&&(this.options.noHeaderBidding=!0)},madops.AdUnit.prototype.getSizeForBids=function(){return this._sizesToUseForBid},madops.AdUnit.prototype.setTargeting=function(e,t){this.slot.setTargeting(e,t),madops.outputDebugDiv&&(madops.debug.debugDiv.innerHTML+="slot: setTargeting('"+e+"', '"+t+"')\n")},madops.AdUnit.prototype.getSizesFromSizeMapOrSize=function(){var e=this.getSize();if("fluid"==e)return[];if(this.sizeMappingPresent){let s;var o=this.sizeMappingDefinition;for(let e=0,t=(o=m32shr.copy(o).sort(function(e,t){return e[0][0]-t[0][0]})).length;e<t;e++)"fluid"!==o[e][1]&&window.top.innerWidth>=o[e][0][0]&&window.top.innerHeight>=o[e][0][1]&&(s=o[e][1]);return s}if(!(0<e.length))return[];try{return madops.removeFluid(e)}catch(e){throw madops.enableLogs&&madops.log(e),e}},madops.AdUnit.prototype.filterSizesThatAreSupported=function(s){let o=[];if(s.length&&!Array.isArray(s[0]))return s;for(let e=0,t=s.length;e<t;e++){var i=s[e];for(let e=0,t=madops.sizesSupported.length;e<t;e++)if(m32shr.arrayEq(i,madops.sizesSupported[e])){o.push([parseInt(i[0]),parseInt(i[1])]);break}}return o},madops.AdUnit.prototype.getSize=function(){return this._computedSize},madops.AdUnit.prototype.defineSizeMap=function(){var s=this.sizeMappingDefinition;let o=googletag.sizeMapping();for(let e=0,t=s.length;e<t;e++)o.addSize(s[e][0],s[e][1]);this.slot.defineSizeMapping(o.build())},madops.AdUnit.prototype.define=function(){var s="/"+this.options.dfpId+"/"+this.options.dfpAdUnitPath;if(this.options["out-of-page"]){let e=this.options.oopType,t;"string"==typeof e&&(e=e.toLowerCase(),"interstitial"==e?t=googletag.enums.OutOfPageFormat.INTERSTITIAL:"top_anchor"==e?t=googletag.enums.OutOfPageFormat.TOP_ANCHOR:"bottom_anchor"==e&&(t=googletag.enums.OutOfPageFormat.BOTTOM_ANCHOR)),null==t?this.slot=googletag.defineOutOfPageSlot(s,this.id):(this.slot=googletag.defineOutOfPageSlot(s,t),this.slot&&(this.id=this.slot.getSlotId().getDomId(),this.div.id=this.id,e&&this.setTargeting("M32_oopType",e))),madops.outputDebugDiv&&this.slot&&(madops.debug.debugDiv.innerHTML+='googletag.defineOutOfPageSlot("'+s+", "+t+", "+this.id+");\n")}else{var t=this.getSize();if(this.slot=googletag.defineSlot(s,t,this.id),madops.outputDebugDiv&&(madops.debug.debugDiv.innerHTML+="googletag.defineSlot('"+s+"', "+JSON.stringify(t)+", '"+this.id+"');\n"),this.sizeMappingPresent){if(madops.outputDebugDiv){madops.debug.debugDiv.innerHTML+="--- Size mapping for this slot ---\n";for(let e=0,t=this.sizeMappingDefinition.length;e<t;e++)madops.debug.debugDiv.innerHTML+="Viewport : "+JSON.stringify(this.sizeMappingDefinition[e][0])+"; Sizes : "+JSON.stringify(this.sizeMappingDefinition[e][1])+"\n";madops.debug.debugDiv.innerHTML+="--- End Size mapping ---\n"}this.defineSizeMap()}t=this.options.refresh;if(t){let e=!1;"string"==typeof t?e=parseInt(t):"number"==typeof t&&(e=t),Number.isNaN(e)?console.warn("[M32 define] - Refresh value not a number: "+t+"Refresh will be ignored."):(e<madops.MIN_REFRESH_PERIOD&&(console.warn("[M32 define] - Refresh rythms must be at minimum every 30s. Value: "+e+" is inferior. Will apply 30s"),e=madops.MIN_REFRESH_PERIOD),function(e,t){t="setInterval( function() { let slots = googletag.pubads().getSlots(); for ( let i=0; i<slots.length; i++ ) { if ( slots[i].getSlotElementId() == '"+e+"' ) { console.log( '[M32 refrest_fct] - Refreshing : "+e+"' ); googletag.pubads().refresh( [ slots[i] ] ); } } }, "+1e3*t+" );";let s=document.createElement("script");s.innerHTML=t,document.body.appendChild(s)}(this.id,e))}}if(this.slot){for(var e in this.options.kv)this.setTargeting(e,this.options.kv[e]);this.setTargeting("tile",this.tile.toString()),madops.setCustomTargeting(this),this.slot.addService(googletag.pubads()),this.options.isCompanion&&(this.slot.addService(googletag.companionAds()),googletag.companionAds().setRefreshUnfilledSlots(!1)),madops.outputDebugDiv&&(madops.debug.debugDiv.innerHTML+="\n")}},madops.AdUnit.prototype.isDynamic=function(){return void 0!==this.div.dataset.m32DynamicAd},madops.AdUnit.prototype.call=function(){this.called||(void 0===this.apstagSlot||0===this.apstagSlot.length?this.amazonBidBack=!0:madops.isAmazonNeeded&&this.fetchAmazonBids(),madops.m32_wrapper?this.fetchPrebidBids():this.fetchOpenWrapBids())},madops.AdUnit.prototype.fetchAmazonBids=function(){var t=this;apstag.fetchBids({slots:t.apstagSlot,timeout:madops.prebid.REQUEST_BID_TIMEOUT},function(e){t.amazonBidBack=!0,e&&(t.amazonBid=e);apstag.setDisplayBids(),madops.prebid.inUse&&t.prebidBidBack&&t.refreshSlot()})},madops.AdUnit.prototype.updateForAmazon=function(){if(!madops.amazon_initialized){let e={pubID:"5958391e-88ea-48ec-8c15-5013f0cdbc6d",adServer:"googletag"};m32shr.privacy.geo.isCCPA()&&(e.params={us_privacy:window.__m32consent.data.uspString}),madops.custom.schain.hasOwnProperty("amazon")&&(e.schain={complete:1,ver:"1.0",nodes:madops.custom.schain.amazon}),apstag.init(e),madops.amazon_initialized=!0}var e;void 0===this.mediaTypes&&(e=this.getSizeForBids(),this.mediaTypes.banner.sizes=e||[]),0===this.mediaTypes.banner.sizes.length?this.apstagSlot=[]:this.apstagSlot=[{slotID:this.id,slotName:this.options.dfpAdUnitPath,sizes:this.mediaTypes.banner.sizes}]},madops.AdUnit.prototype.getPrebidBids=function(){let s=[];return madops.pbBidders.forEach(function(e){e.params.default&&s.push({bidder:e.bidder,params:m32shr.copy(e.params.default)})}),this.mediaTypes.banner.sizes.forEach(function(t){madops.pbBidders.forEach(function(e){void 0===e.params.default&&t in e.params&&s.push({bidder:e.bidder,params:m32shr.copy(e.params[t])})})}),s},madops.AdUnit.prototype.updateForPrebid=function(){var e=this.getSizeForBids();if(this.mediaTypes.banner.sizes=e||[],0===this.mediaTypes.banner.sizes.length)this.prebidBids=[];else{this.prebidBids=this.getPrebidBids();let s={code:this.id,mediaTypes:this.mediaTypes,bids:[]};for(let e=0,t=this.prebidBids.length;e<t;e++)s.bids.push(this.prebidBids[e]);window.pbjs.que.push(function(){window.pbjs.addAdUnits(s)})}},madops.AdUnit.prototype.updateForOpenWrap=function(){var e=this.getSizeForBids();this.mediaTypes.banner.sizes=e||[]},madops.AdUnit.prototype.fetchPrebidBids=function(){var s=this;function e(e,t){e&&e.hasOwnProperty(s.id)&&Array.isArray(e[s.id].bids)&&e[s.id].bids.forEach(function(e){s.prebidBidsReceived.push({bid:e,timedOut:e.timeToRespond>=madops.bidderTimeout})}),window.pbjs.que.push(function(){window.pbjs.setTargetingForGPTAsync([s.id])}),s.prebidBidBack=!0,(madops.isAmazonNeeded&&s.amazonBidBack||!madops.isAmazonNeeded)&&s.refreshSlot()}window.pbjs.que.push(function(){window.pbjs.requestBids({timeout:madops.prebid.REQUEST_BID_TIMEOUT,adUnitCodes:[s.id],bidsBackHandler:e})})},madops.AdUnit.prototype.fetchOpenWrapBids=function(){var t=this;var e={code:t.id,divId:t.id,adUnitId:t.options.dfpAdUnitPath,adUnitIndex:"",mediaTypes:t.mediaTypes};PWT.removeKeyValuePairsFromGPTSlots([t.slot]),PWT.requestBids([e],function(e){0;PWT.addKeyValuePairsToGPTSlots(e),t.prebidBidBack=!0,t.prebidBidsReceived.push(e),(madops.isAmazonNeeded&&t.amazonBidBack||!madops.isAmazonNeeded)&&t.refreshSlot()})},madops.AdUnit.prototype.refreshSlot=function(){var t=this;if(madops.custom.hasOwnProperty("segmentInUse")&&madops.custom.segmentInUse&&!madops.pixelSegmentsTargeted&&!madops.pixelTimedOut||!googletag.pubadsReady||m32shr.hasOwnProperty("customFunctionTargetingDone")&&!m32shr.customFunctionTargetingDone)setTimeout(madops.wrapWithErrorLogs(function(){t.refreshSlot()}),madops.REFRESH_SLOT_TIMEOUT_PERIOD);else if(!this.called&&this.slot){0,this.isDynamic()||madops.pushCallback(function(){googletag.display(t.id)});let e=!!madops.resetCalled;madops.pushCallback(function(){googletag.pubads().refresh([t.slot],{changeCorrelator:e})}),madops.resetCalled=!1,this.called=!0}},madops.AdUnit.prototype.isInView=function(){return madops.isDivInViewPortWithOffset(this.div)},madops.AdUnit.prototype.impressionViewable=function(){"sticky"in this.options&&this.options.sticky&&!("staySticky"in this.options&&this.options.staySticky)&&(this.options.stickyHover&&(this.stickyDiv.style.zIndex=this.stickyOriginalStyle.zIndex),this.stickyDiv&&(this.stickyDiv.style=this.stickyOriginalStyle))},madops.AdUnit.prototype.setSticky=function(){this.stickyDiv=this.options.stickyBannerSelector?document.querySelector(this.options.stickyBannerSelector):this.div,this.stickyOriginalStyle=this.stickyDiv.style;let t=this.options.stickyTopSpacing||madops.customParameters.stickTopSpacing||0;if(0<navigator.userAgent.search("Chrome")&&navigator.userAgent.split("Chrome/")[1].split(".")[0]<56){let e=this.stickyDiv.clientHeight;this.stickyDiv.style.position="relative",this.stickyDiv.style.top=0<document.body.scrollTop-this.stickyDiv.scrollHeight?2*t+(document.body.scrollTop-e)+"px":2*t+"px",this.stickyDiv.style.zIndex=999999,window.addEventListener("scroll",function(){window.bbscrollend||(this.stickyDiv.style.top=0<document.body.scrollTop-this.stickyDiv.scrollHeight?2*t+(document.body.scrollTop-e)+"px":2*t+"px")})}else this.stickyDiv.style.position="sticky",this.stickyDiv.style.position="-webkit-sticky",this.stickyDiv.style.top=t+"px",this.options.stickyHover&&(this.stickyDiv.style.zIndex=999999);madops.stickyElements.push(this.stickyDiv)},madops.VastAd=function(e){if(this.content=e,this.vastUrl=JSON.parse(this.content.dataset.options).vastUrl,this.mediaType=this.content.dataset.mediatype,!this.vastUrl)return console.warn("[M32] VastAd - "+this.content+" has an invalid vast url: "+this.vastUrl),{"VastAd error":"invalid vast url"};"audio"===this.mediaType?(this.contentSize={width:320,height:240},this.contentLink=this.content.children[0].src):(this.contentSize=this.content.getBoundingClientRect(),this.contentLink=this.content.src),this.isAutoplay=!1,this.isMobile=function(){if(void 0===madops.embedded&&m32shr.inIframe)return!1;let e=window.top,t=document,s=t.documentElement,o=t.getElementsByTagName("body")[0],i=e.innerWidth||s.clientWidth||o.clientWidth,a=e.innerHeight||s.clientHeight||o.clientHeight;var n=i*a;return n<=madops.PHONE_MAX_AREA||n<=madops.TABLET_MAX_AREA}(),this.isPlaying=!1,this.called=!1,this.autoplayCheckDone=!1,this.adContainerId="adContainer"+madops.vastCounter,this.adDisplayContainerInit=!1;let t=document.documentElement.lang;t?google.ima.settings.setLocale(t.slice(0,2)):google.ima.settings.setLocale("en"),window.indexedDB&&(this.content.setAttribute("playsinline",!0),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0)),this.adContainer=madops.createDivOnTopOfDiv(this.adContainerId,this.content),this.adDisplayContainer=new google.ima.AdDisplayContainer(this.adContainer,this.content),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.applyAdvertisingStateToDom(!1),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded,!1,this),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,this),this.isMobile||(this.adDisplayContainer.initialize(),this.adDisplayContainerInit=!0),this.content.autoplay&&this.autoplayCheck(),"audio"===this.mediaType?this.content.manage_playback=this.playback_manager.bind(this):this.content.onplay=this.playback_manager.bind(this),this.adContainer.onresize=this.setupUIForAds.bind(this),this.content.onended=this.contentEndedListener.bind(this),madops.vastCounter+=1},madops.VastAd.prototype.autoplayCheck=function(){let e=this.content.play(),t=function(){this.content.pause(),this.isAutoplay=!0,this.autoplayRequiresMuted=!0,this.requestAds(),this.autoplayCheckDone=!0},s=function(){this.content.volume=1,this.content.muted=!1,this.isAutoplay=!1,this.autoplayRequiresMuted=!1,this.autoplayCheckDone=!0};void 0!==e&&e.then(function(){this.content.pause(),this.isAutoplay=!0,this.autoplayRequiresMuted=!1,this.requestAds(),this.autoplayCheckDone=!0}.bind(this)).catch(function(){this.content.volume=0,this.content.muted=!0;let e=this.content.play();void 0!==e&&e.then(t.bind(this)).catch(s.bind(this))}.bind(this))},madops.VastAd.prototype.applyAdvertisingStateToDom=function(e){this.content.setAttribute("data-is-ad-active",e),this.adContainer.setAttribute("data-is-ad-active",e)},madops.VastAd.prototype.setupUIForAds=function(){this.applyAdvertisingStateToDom(!0),this.adContainer.style.width=this.adContainer.parentNode.width+"px",this.adContainer.style.height=this.adContainer.parentNode.height+"px",this.adContainer.style.top="0px",this.adContainer.style.bottom="0px",this.adContainer.style.right="0px",this.adContainer.style.left="0px","audio"===this.mediaType&&(this.content.style.position="absolute",this.isMobile||(this.content.style.width="100%",this.content.style.height="auto"))},madops.VastAd.prototype.requestAds=function(){this.called||(this.called=!0,this.adsRequest=new google.ima.AdsRequest,this.adsRequest.adTagUrl=JSON.parse(this.content.dataset.options).vastUrl,this.adsRequest.linearAdSlotWidth=madops.getCustomParameter("linearVastAdWidth",this.contentSize.width),this.adsRequest.linearAdSlotHeight=madops.getCustomParameter("linearVastAdHeight",this.contentSize.height),this.adsRequest.nonlinearAdSlotWidth=madops.getCustomParameter("nonLinearVastAdWidth",this.contentSize.width),this.adsRequest.nonlinearAdSlotHeight=madops.getCustomParameter("nonLinearVastAdHeight",this.contentSize.height),this.isAutoplay&&(this.autoplayRequiresMuted&&this.adsRequest.setAdWillPlayMuted(!0),this.adsRequest.setAdWillAutoPlay(!0)),this.doAdRequest())},madops.VastAd.prototype.doAdRequest=function(){madops.custom.segmentInUse?(madops.pixelTimedOut||madops.pixelReady)&&this.adDisplayContainerInit?(this.adsRequest.adTagUrl=madops.targetVastUrl(this.adsRequest.adTagUrl),this.adsLoader.requestAds(this.adsRequest)):setTimeout(this.doAdRequest.bind(this),madops.VAST_DO_REQUEST_PERIOD):this.adDisplayContainerInit?this.adsLoader.requestAds(this.adsRequest):setTimeout(this.doAdRequest.bind(this),madops.VAST_DO_REQUEST_PERIOD)},madops.VastAd.prototype.onAdEvent=function(e){switch(this.ad||(this.ad=e.getAd()),e.type){case google.ima.AdEvent.Type.LOADED:case google.ima.AdEvent.Type.STARTED:case google.ima.AdEvent.Type.COMPLETE:0}},madops.VastAd.prototype.contentEndedListener=function(){this.adsLoader&&this.adsLoader.contentComplete()},madops.VastAd.prototype.fixContentSource=function(){this.contentLink&&this.content.src!==this.contentLink&&(this.content.src=this.contentLink)},madops.VastAd.prototype.onAdError=function(e){let t=e.getError();1009!==t.getErrorCode()&&madops.enableLogs&&madops.log(t),this.adsManager&&(this.adsManager.destroy(),this.called="error"),this.onContentResumeRequested()},madops.VastAd.prototype.onContentPauseRequested=function(){this.isAdActive=!0,this.content.pause(),this.setupUIForAds()},madops.VastAd.prototype.onContentResumeRequested=function(){this.setupUIForContent(),this.fixContentSource(),this.isAdActive=!1,this.isPlaying=!1,"audio"===this.mediaType?this.content.manage_playback():this.content.play()},madops.VastAd.prototype.setupUIForContent=function(){this.applyAdvertisingStateToDom(!1),this.adContainer.style.display="none","audio"===this.mediaType&&(this.content.style.height="0px",this.content.style.width="0px")},madops.VastAd.prototype.playback_manager=function(e){this.isMobile&&!this.adDisplayContainerInit&&(this.adDisplayContainer.initialize(),this.adDisplayContainerInit=!0),this.called||!this.autoplayCheckDone&&this.content.autoplay?this.isAdActive&&this.called?this.isPlaying?(this.adsManager.pause(),this.isPlaying=!1):(this.adsManager.resume(),this.isPlaying=!0):this.called&&!this.isAdActive&&(this.isPlaying?(this.content.pause(),this.isPlaying=!1):(this.content.play(),this.isPlaying=!0)):this.requestAds()},madops.VastAd.prototype.onAdsManagerLoaded=function(e){this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.loadVideoTimeout=5e3,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.adsRenderingSettings.enablePreloading=!0,this.adsManager=e.getAdsManager(this.content,this.adsRenderingSettings),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,this),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested,!1,this),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested,!1,this),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAdEvent,!1,this),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdEvent,!1,this),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdEvent,!1,this),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdEvent,!1,this),this.adsManager.init(this.contentSize.width,this.contentSize.height,google.ima.ViewMode.NORMAL,this.content),this.adsManager.start()},madops.prebid.price_point_logic=function(t){if(madops.custom.hasOwnProperty("hb_granularity")||(madops.custom.hb_granularity="normal"),"districtmREMOVEME"===t.bidderCode||"districtDMXREMOVEME"===t.bidderCode)return t.cpm<1?madops.pythonicRound(t.cpm,2).toString():1<=t.cpm&&t.cpm<=5?madops.pythonicRound(t.cpm,1).toString()+"0":madops.pythonicRound(t.cpm,0).toString()+".00";if("normal"!=madops.custom.hb_granularity.toLowerCase())return"dense(low)"==madops.custom.hb_granularity.toLowerCase()?madops.pythonicRound(t.cpm,2).toString():void 0;var e=t.cpm.toString();if(e.length<=2)return e+".00";{let e=madops.pythonicRound(t.cpm,1).toString();return-1===e.indexOf(".")?e+".00":e+"0"}},madops.prebid.cpm={key:"hb_pb",val:function(e){return madops.prebid.price_point_logic(e)}},madops.prebid.adid={key:"hb_adid",val:function(e){return e.adId}},madops.prebid.bidder={key:"hb_bidder",val:function(e){return e.bidderCode}},madops.prebid.format={key:"hb_format",val:function(e){return e.mediaType}},madops.prebid.source={key:"hb_source",val:function(e){return e.source}},madops.prebid.size={key:"hb_size",val:function(e){return e.getSize()}},madops.prebid.bidCpmAdjustment=function(e,t){return"pubmatic"!==t.bidderCode||t.netRevenue?("smartadserver"!==t.bidderCode||t.netRevenue)&&("fuel"!==t.bidderCode||t.netRevenue)?t.netRevenue||madops.enableLogs&&madops.log(new Error("HB partner "+t.bidderCode+" is bidding in gross amounts")):e*=.8:e*=.79,t.cpm=e,madops.prebid.receivedBids.push(t),e},madops.prebid.bidTimeoutHandler=function(e){e.forEach(function(t){madops.adUnits.forEach(function(e){t.adUnitCode===e.id&&e.prebidTimeoutBids.push(t)})})},madops.prebid.schainConfigFactory=function(){madops.pbBidders.forEach(function(e){e.bidder in madops.custom.schain&&window.pbjs.setBidderConfig({bidders:[e.bidder],config:{schain:{config:{ver:"1.0",complete:1,nodes:madops.custom.schain[e.bidder]}}}})})},madops.configurePrebid=function(){window.pbjs.que.push(function(){window.pbjs.onEvent("bidTimeout",madops.prebid.bidTimeoutHandler),window.pbjs.aliasBidder("ix","indexExchange"),madops.bidders.some(function(e){return"fuel"===e.bidder})&&window.pbjs.aliasBidder("smartadserver","fuel"),madops.bidders.some(function(e){return"onemobile"===e.bidder})&&window.pbjs.aliasBidder("aol","onemobile"),window.pbjs.bidderSettings={standard:{bidCpmAdjustment:madops.prebid.bidCpmAdjustment,adserverTargeting:[madops.prebid.cpm,madops.prebid.adid,madops.prebid.bidder,madops.prebid.format,madops.prebid.source,madops.prebid.size]}},madops.custom.hasOwnProperty("adserver_currency")||(madops.custom.adserver_currency="CAD");let e={adServerCurrency:madops.custom.adserver_currency};madops.custom.hasOwnProperty("fxrate")&&madops.custom.fxrate&&madops.custom.fxrate.fxrate===m32shr.getYesterdayStr()&&(e.rates={USD:{CAD:madops.custom.fxrate.usd2cad,EUR:madops.custom.fxrate.usd2cad*madops.custom.fxrate.cad2eur},CAD:{USD:madops.custom.fxrate.cad2usd,EUR:madops.custom.fxrate.cad2eur},EUR:{CAD:1/madops.custom.fxrate.cad2eur,USD:1/(madops.custom.fxrate.usd2cad*madops.custom.fxrate.cad2eur)}});let s={bidderTimeout:madops.prebid.REQUEST_BID_TIMEOUT,currency:e,maxRequestsPerOrigin:6,priceGranularity:"medium",publisherDomain:document.location.host,enableSendAllBids:!0,useBidCache:!0},o=!1;madops.bidders.some(function(e){return"pubmatic"===e.bidder})&&(o=!0);!function(){let t=[];madops.bidders.forEach(function(e){e.bidder&&"pubmatic"!==e.bidder&&t.push(e.bidder)}),o?s.userSync={filterSettings:{image:{bidders:t,filter:"include"},iframe:{bidders:["pubmatic"],filter:"include"}}}:s.userSync={filterSettings:{image:{bidders:t,filter:"include"}}},s.syncsPerBidder=1,s.syncDelay=1e3}(),m32shr.privacy.geo.isGDPR()||m32shr.isGeoUnknown()?(s.consentManagement={},s.consentManagement.gdpr={cmpApi:"iab",timeout:3e3,defaultGdprScope:!0}):m32shr.privacy.geo.isCCPA()&&(s.consentManagement={},s.consentManagement.usp={cmpApi:"iab",timeout:3e3}),madops.custom.hasOwnProperty("schain")&&madops.prebid.schainConfigFactory(),window.pbjs.setConfig(s),madops.pbjsReady=!0})},madops.slotResponseReceivedHandler=function(t){try{let e=madops.getAdUnitByGPTSlot(t.slot);e&&(e.received=!0)}catch(e){0,madops.enableLogs&&madops.log(e)}},madops.impressionViewableEventHandler=function(t){try{if(t.slot){let e=madops.getAdUnitByGPTSlot(t.slot);e&&e.impressionViewable()}}catch(e){0,madops.enableLogs&&madops.log(e)}},madops.getGPTSlotByElement=function(s){for(let e=0,t=googletag.pubads().getSlots().length;e<t;e++)if(s.id==googletag.pubads().getSlots()[e].getSlotElementId())return googletag.pubads().getSlots()[e];return null},madops.getAdUnitByGPTSlot=function(e){var s=e.getSlotElementId();for(let e=0,t=madops.adUnits.length;e<t;e++)if(madops.adUnits[e].id===s)return madops.adUnits[e];return null},madops.getAdUnitsInView=function(){let t=[];return madops.adUnits.forEach(function(e){e.isInView()&&t.push(e)}),t},madops.slotRenderedHandler=function(o){try{let t=o.slot.getSlotElementId(),s={};if(s.isDisplayed=!o.isEmpty,madops.adUnits.forEach(function(e){e.id===t&&((s=e).rendered=!0)}),s.div&&o.isEmpty&&(s.div.style.display="none"),o.size&&0<o.size.length){let e=madops.getAdUnitByGPTSlot(o.slot);e&&(e.displayedSize=[o.size[0],o.size[1]])}!o.isEmpty&&!o.slot.getOutOfPage()&&s.div&&"sticky"in s.options&&s.options.sticky&&s.setSticky(),madops.customSlotRendered&&madops.customSlotRendered(o)}catch(e){0,madops.enableLogs&&madops.log(e)}},madops.getId=function(e){return e=void 0===e?madops.adUnits.length:e,"ad-"+madops._rnd+"-"+e},madops.pushCallback=function(e){googletag.cmd.push(function(){e()})},madops.reset=function(divs){let _doReset=function(){0;let toResetDivs=[];try{if(m32shr.arrayEq(divs,[null]))return void console.warn("[M32] _doReset - Ill-defined madops.reset call. Command will be ignored.")}catch(error){}divs=void 0===divs?document.querySelectorAll("div[data-m32-ad]"):divs,divs.forEach(function(e){var t;madops.initialSection!==window.location.pathname&&(t=madops.getGPTSlotByElement(e))?madops.getAdUnitByGPTSlot(t)||toResetDivs.push(e):e&&toResetDivs.push(e)}),divs=toResetDivs,madops.resetCalled=!0,madops._rnd=Math.random().toString().substring(2,14),madops.adUnits=[];let oopDivs=[],oopDivIndexes=[],previouslyDefinedSlotIds=[];for(let i=0,mx=divs.length;i<mx;i++){JSON.parse(divs[i].dataset.options)["out-of-page"]&&(oopDivs.push(divs[i]),oopDivIndexes.push(i));let slot=madops.getGPTSlotByElement(divs[i]);slot&&(adUnitObj=madops.getAdUnitByGPTSlot(slot),adUnitObj&&adUnitObj.called&&previouslyDefinedSlotIds.push(slot.getSlotElementId()))}madops.canRemoveHB&&(madops.m32_wrapper?window.pbjs.removeAdUnit():!1===madops.m32_wrapper&&window.owpbjs.removeAdUnit()),madops.pushCallback(function(){googletag.destroySlots()}),madops.adUnitCounter=0,madops.debug.debugDiv?madops.debug.debugDiv.innerHTML="":madops.outputDebugDiv&&madops.debug.initDebugDiv(),madops.pixelSegmentsTargeted=!1,madops.pushCallback(function(){googletag.pubads().clearTargeting(),madops.addPageTargeting()});for(let j=0,mxdivs=toResetDivs.length;j<mxdivs;j++)oopDivIndexes.includes(j)||(toResetDivs[j].style.display="none",madops.registerAd(toResetDivs[j]));!m32shr.inIframe&&1<=toResetDivs.length&&oopDivs.length&&oopDivs.forEach(function(e){madops.createOutOfPage(e),e.parentElement.removeChild(e)}),m32shr.arrayEq(madops.customFunctions,[])||(Array.isArray(madops.customFunctions)?madops.customFunctions.forEach(function(func){eval(func).call(madops)}):eval(madops.customFunctions).call(madops)),madops.custom.hasOwnProperty("segmentInUse")&&madops.custom.segmentInUse&&madops.targetOrTimeoutSegments(),madops.customReset(),madops.runVastTags()};madops.isReady()?null===madops.gptReady||null===madops.customFileReady||_doReset():setTimeout(madops.wrapWithErrorLogs(function(){madops.reset(divs)}),madops.RESET_TIMEOUT_PERIOD)},madops.bidWon=function(e){document.getElementById(e.adUnitCode).dataset.m32HeaderWinner=e.bidder},madops.addDynamicAd=function(e){madops.isReady()&&madops.privacy.consent?(madops.debug.debugDiv||madops.outputDebugDiv&&madops.debug.initDebugDiv(),madops.addedDynamicAds=!0,madops.registerAd(e)):null===madops.gptReady?console.warn("[M32] addDynamicAd - GPT could not load, so no ads will be shown"):madops.privacy.consent===madops.privacy.NO_CONSENT?console.warn("[M32] addDynamicAd - No user consent detected for TCFv2 privacy, no ads will loaded."):setTimeout(madops.wrapWithErrorLogs(function(){madops.addDynamicAd(e)}),madops.ADD_DYNAMIC_AD_TIMEOUT_PERIOD)},madops.registerAd=function(s,o){if(madops.prebid.inUse&&void 0===madops.pbjsReady)setTimeout(madops.registerAd,madops.REGISTER_AD_TIMEOUT_PERIOD,s,o);else{void 0!==s.dataset.base64_options&&(s.dataset.options=atob(s.dataset.base64_options));let e=new madops.AdUnit(s,o);0,void 0===o?madops.adUnits.push(e):madops.adUnits[o]=e;let t=!1;!e.options.noHeaderBidding&&madops.prebid.inUse&&(t=!0,madops.m32_wrapper?e.updateForPrebid():e.updateForOpenWrap(),madops.isAmazonNeeded&&(t=!0,e.updateForAmazon())),e.define(),t?e.call():e.refreshSlot()}},madops.prependPolyfill=void[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("prepend")||Object.defineProperty(e,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),s=document.createDocumentFragment();e.forEach(function(e){var t=e instanceof Node;s.appendChild(t?e:document.createTextNode(String(e)))}),this.insertBefore(s,this.firstChild)}})}),madops.createOutOfPage=function(e,i){try{let t,s;try{t=JSON.parse(e.dataset.options)}catch(e){var a="M32 ads expect valid JSON in the data-option parameter.\n"+e;console.error(a),madops.enableLogs&&madops.log(e)}if(void 0===t.oopType){let e=document.createElement("div");t["out-of-page"]="true",t.oopType=t.oopType,t.refresh=void 0,delete t.madopsPreset,e.dataset.m32Ad=!0,e.dataset.options=JSON.stringify(t),-1<navigator.userAgent.indexOf("MSIE")&&madops.prependPolyfill(),document.body.prepend(e),s=new madops.AdUnit(e,i)}else s=new madops.AdUnit(e,i);0;let o=document.querySelectorAll("#"+s.id);for(let e=0,t=o.length;e<t;e++)o[e]!=s.div&&o[e].parentElement.removeChild(o[e]);void 0===i?madops.adUnits.push(s):madops.adUnits[i]=s,s.define(),s.refreshSlot()}catch(e){0,madops.enableLogs&&madops.log(e)}},madops.createDivOnTopOfDiv=function(e,t){let s=document.createElement("div");return s.id=e,s.style.position="absolute","audio"===this.mediaType&&(s.style.height=this.contentSize.height,s.style.width=this.contentSize.width),t.parentNode.insertBefore(s,t.nextSibling),s.parentNode.style.position="relative",s},madops.fetchVastElements=function(){madops.audioVideoDivs=document.querySelectorAll("video[data-m32-vast-element],audio[data-m32-vast-element]");madops.audioVideoDivs.length?function(){madops.vastAds=[],madops.vastCounter=0,madops.pushCallback(function(){googletag.pubads().enableVideoAds()});for(let e=0,t=madops.audioVideoDivs.length;e<t;e++){var s=new madops.VastAd(madops.audioVideoDivs[e]);madops.vastAds.push(s)}}():madops.fetchVastElementsCounter*madops.FETCH_VAST_ELEMENT_TIMEOUT_PERIOD<madops.FETCH_VAST_ELEMENT_TIMEOUT&&(madops.fetchVastElementsCounter++,setTimeout(madops.fetchVastElements,madops.FETCH_VAST_ELEMENT_TIMEOUT_PERIOD))},madops.waitOnIMA=function(){madops.isIMASdkReady()?madops.fetchVastElements():madops.imaSDKCounts<madops.IMASDK_ATTEMPTS?(madops.imaSDKCounts++,setTimeout(madops.waitOnIMA,madops.IMASDK_TIMEOUTS)):madops.imaReady=null},madops.runVastTags=function(){madops.loadingIMA&&madops.waitOnIMA()},madops.targetVastUrl=function(e){return madops.pixelReady?function(e){m32pixel.segments.length>madops.PIXEL_SEGMENTS_MAX_LENGTH&&(m32pixel.segments=m32pixel.segments.slice(0,madops.PIXEL_SEGMENTS_MAX_LENGTH));var t="m32_segments="+m32pixel.segments.toString();return madops.addKVToUrl(e,"cust_params",t)}(e):madops.pixelTimedOut?e:void setTimeout(madops.targetVastUrl,madops.TARGET_VAST_URL_TIMEOUT_PERIOD,e)},madops.isDivInViewPortWithOffset=function(e,t){void 0===t&&(t=0);var s=e.style.display;"none"===window.getComputedStyle(e,"display")&&(e.style.display="block");let o;try{o=e.getBoundingClientRect()}catch(e){return!1}var i=window.innerHeight||document.documentElement.clientHeight,a=window.innerWidth||document.documentElement.clientWidth,n=0<=o.top&&o.top<=i+t&&0<=o.left&&o.left<=a+t,t=0<=o.left&&o.left<=a-t&&0<=o.bottom&&o.bottom<=i-t;return e.style.display=s,n||t},madops.isReady=function(){return madops.isGPTReady()&&madops.custom&&document.body&&("complete"===document.readyState||"interactive"===document.readyState)},madops.isGPTReady=function(){return window.googletag&&googletag.apiReady},madops.isIMASdkReady=function(){return window.google&&google.ima},madops.slotRequestedHandler=function(e){0},madops.setUserId=function(e){madops.userId=e},madops.loadAds=function(){let e=0;madops.addPageTargeting(),madops.pushCallback(function(){googletag.pubads().disableInitialLoad(),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(!0),googletag.pubads().addEventListener("impressionViewable",madops.impressionViewableEventHandler),googletag.pubads().addEventListener("slotRequested",madops.slotRequestedHandler),googletag.pubads().addEventListener("slotRenderEnded",madops.slotRenderedHandler),googletag.pubads().addEventListener("slotResponseReceived",madops.slotResponseReceivedHandler),madops.privacy.consent===madops.privacy.PARTIAL_CONSENT&&googletag.pubads().setRequestNonPersonalizedAds(1),madops.custom.hasOwnProperty("lazy_load")||(madops.custom.lazy_load=!1),madops.custom.lazy_load&&googletag.pubads().enableLazyLoad({fetchMarginPercent:200,renderMarginPercent:50,mobileScaling:1}),madops.userId&&googletag.pubads().setPublisherProvidedId(madops.userId),googletag.enableServices()}),madops.outputDebugDiv&&document.body.appendChild(madops.debug.debugDiv);function t(s){let o=[0];for(let e=0,t=s.length;e<t;e++){var i=s[e];i.dataset&&i.dataset.options&&JSON.parse(i.dataset.options)["out-of-page"]?o.push(e):madops.registerAd(i)}!m32shr.inIframe&&1<=s.length&&o.forEach(function(e){madops.createOutOfPage(s[e])}),madops.runVastTags()}function s(){"complete"===document.readyState?(madops.bannerDivs=document.querySelectorAll("div[data-m32-ad]"),t(madops.bannerDivs)):"interactive"===document.readyState&&(madops.bannerDivs=document.querySelectorAll("div[data-m32-ad]"),madops.bannerDivs.length?t(madops.bannerDivs):e<madops.MAX_FETCHING_ATTEMPTS&&(e++,setTimeout(s,madops.FETCH_ADUNIT_PERIOD_TIMEOUT)))}madops.inhibitFirstRegisters||s()},madops.debug.initDebugDiv=function(){madops.debug.debugDiv=null,madops.debug.debugDiv=document.createElement("div"),madops.debug.debugDiv.id="m32-adops-debug",madops.debug.debugDiv.style.display="none"},madops.runProcess=function(){window.hasOwnProperty(__m32geo)&&window.__m32geo.hasOwnProperty("country_code")&&["RU","BY"].includes(window.__m32geo.country_code)||(madops.isReady()?(madops.outputDebugDiv&&madops.debug.initDebugDiv(),madops.wrapWithErrorLogs(madops.loadAds())):setTimeout(madops.wrapWithErrorLogs(function(){madops.runProcess()}),madops.RUN_PROCESS_TIMEOUT_PERIOD))},madops.targetSegments=function(){400<m32pixel.segments.length?madops.segmentsToTargetWith=m32pixel.segments.slice(0,400):madops.segmentsToTargetWith=m32pixel.segments,madops.pushCallback(function(){googletag.pubads().setTargeting("m32_segments",madops.segmentsToTargetWith),madops.pixelSegmentsTargeted=!0});var e=encodeURIComponent(madops.segmentsToTargetWith.toString());m32shr.asyncReq("GET","https://ib.adnxs.com/seg?add_Code="+e+"&member=2437")},madops.targetOrTimeoutSegments=function(){window.m32pixel&&window.__m32segmentsFetched?(madops.pixelReady=!0,madops.targetSegments(),clearInterval(madops.segmentWatcher)):madops.activateSegmentWatcher?(madops.segmentWatcher=setInterval(madops.targetOrTimeoutSegments,madops.SEGMENT_POLL_RATE),madops.activateSegmentWatcher=!1,madops.segmentPollCount+=1):madops.segmentPollCount*madops.SEGMENT_POLL_RATE>madops.SEGMENT_TARGETING_TIMEOUT?(madops.pixelTimedOut=!0,clearInterval(madops.segmentWatcher)):madops.segmentPollCount+=1},madops.pythonicRound=function(e,t){t=Math.pow(10,t);return Math.ceil(e*t)/t},madops.configureHBAndConsent=function(){madops.prebid.inUse&&madops.m32_wrapper?madops.configurePrebid():madops.pbjsReady=!0,m32shr.privacy.determineConsentType(madops.privacy.regularAds,madops.privacy.noAds,madops.enableLogs)},madops.geoLoadSuccess=function(){madops.configureHBAndConsent()},madops.geoLoadFailure=function(){madops.enableLogs&&madops.log(new Error("The geoloc call failed. Received Geo: "+window.__m32geo)),madops.configureHBAndConsent()},madops.privacy.noAds=function(){madops.privacy.adType="No Ads",madops.privacy.consent=madops.privacy.NO_CONSENT},madops.privacy.regularAds=function(){madops.privacy.adType="regular",madops.privacy.consent=madops.privacy.FULL_CONSENT,madops.runProcess()},madops.adOpsDebug=function(){let t=googletag.pubads();console.group("Global Targeting");for(let e=0;e<t.getTargetingKeys().length;e++){var s=t.getTargeting(t.getTargetingKeys()[e]);console.group(t.getTargetingKeys()[e]);for(let e=0;e<s.length;e++)console.log(s[e]);console.groupEnd()}console.groupEnd();for(let e=0;e<t.getSlots().length;e++){let s=t.getSlots()[e];console.group(s.getAdUnitPath()),console.log(document.getElementById(s.getSlotElementId())),console.group("sizes");for(let t=0;t<s.getSizes().length;t++){let e=s.getSizes()[t];"string"==typeof e?console.log(e):console.log({width:e.getWidth(),height:e.getHeight()})}console.groupEnd(),console.group("targeting");for(let e=0;e<s.getTargetingKeys().length;e++){var o=s.getTargetingKeys()[e];console.log(o+" = "+s.getTargetingMap()[o][0])}console.groupEnd(),console.groupEnd()}},madops.startAdOps=function(){try{madops.startTime=(new Date).getTime(),m32shr.acquireGeoAndConsent(madops.geoLoadSuccess,madops.geoLoadFailure,madops.privacy.regularAds,madops.privacy.noAds,madops.enableLogs)}catch(e){throw madops.enableLogs&&madops.log(e),e}},madops.getSubsiteFromBidders=function(e){for(var t in e)if(m32shr.arrayEq(e[t],madops.bidders)){subsite=t;break}return subsite},function(){var e=m32shr.cookies.readCookie("m32_debug");if(e)madops.debug.branch=e;else{let e=m32shr.getParameterByName("m32_debug");e&&(e="true"===e?"master":e,madops.debug.branch=e,m32shr.cookies.createCookie("m32_debug",e,2*m32shr.cookies.ONE_MINUTE))}if(madops.debug.branch&&!window.hasOwnProperty("__debugLoaded"))return madops.hasBeenHappened=!1,window.__debugLoaded=!0,m32shr.loadScript("https://rdc.m32.media/madops/"+madops.debug.branch+"/madops.js");window.hasOwnProperty("__debugLoaded")&&window.__debugLoaded&&(M32DEBUG=!0);let t=m32shr.getParameterByName("m32adtest");t?(madops.testUnit=t,m32shr.cookies.createCookie("m32adtest",t,m32shr.cookies.ONE_MINUTE)):(t=m32shr.cookies.readCookie("m32adtest"),t&&(madops.testUnit=t)),m32shr.getParameterByName("output_debug_div")?madops.outputDebugDiv=!0:madops.outputDebugDiv=!1,madops.getCustomFile()}();