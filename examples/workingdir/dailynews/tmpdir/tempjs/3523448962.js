!function(){var e={277:function(e,t,i){(t=i(645)(!1)).push([e.id,".ob_adTitleDescWrapper .ob_column{flex:1;min-width:0;display:flex;flex-direction:column;flex-basis:auto}.ob_adTitleDescWrapper .ob_item{flex-grow:1;display:flex}.ob_adTitleDescWrapper .adVideoTitle{order:1;flex-grow:1;margin:7px 5px 5px 5px;text-align:left;font-size:18px;font-weight:600;line-height:1.22;color:#282828}.ob_adTitleDescWrapper .adVideoDescription{order:3;line-height:1.33;color:#93908c;padding-bottom:1px;margin:5px;text-align:left;font-size:14px;font-weight:normal}.ob_adTitleDescWrapper .adVideoDescChild{font-weight:normal;color:#000}.ob_adTitleDescWrapper .adVideoSponsored{display:flex;order:4;margin:2px;text-align:left}.ob_adTitleDescWrapper .adVideoSponsoredLogo{flex:0 0 3%;align-items:center;font-weight:500;min-width:20px;min-height:20px}.ob_adTitleDescWrapper .adVideoSponsoredChild{flex:1;align-items:center;font-size:12px;font-weight:normal;color:#93908c;padding-left:1px}.ob_adTitleDescWrapper .adVideoSponsoredChild.defaultAboveVideo{font-size:16px;font-weight:700;color:#282828;order:2;align-items:flex-start;padding-right:5px;margin-top:1px}.ob_adTitleDescWrapper .adVideoSponsoredChild.aboveVideoSponsorBy{font-family:italic;order:1;align-items:flex-end;padding-right:5px;margin-bottom:1px}.ob_adTitleDescWrapper .ctaUrlBtn{flex-grow:0;justify-content:flex-end;color:#4a90e2 !important;order:2;text-decoration:none;overflow:hidden}.ob_adTitleDescWrapper .ctaBtn{border:1px solid #4a90e2 !important;margin:0;line-height:1.846153846;border-radius:4px;padding:0 10px;cursor:pointer;white-space:nowrap;font-size:12px;font-weight:normal;overflow:hidden;text-overflow:ellipsis}.ob_adTitleDescWrapper .ctaBtn.addPadding{padding:3px 10px}.adTitleDescWrapper{display:flex;height:auto;background-color:#fff}.AboveAdTitleDescWrapper{display:flex;height:auto;flex-direction:row}.AboveAdTitleDescWrapper .adVideoCtaBtn{display:flex;height:auto;order:2}.AboveAdTitleDescWrapper .adVideoSponsoredExtra{display:flex;height:auto;flex-grow:1;order:1}",""]),e.exports=t},816:function(e,t,i){(t=i(645)(!1)).push([e.id,'@font-face{font-family:"Material Icons";font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/materialicons/v55/flUhRq6tzZclQEJ-Vdg-IuiaDsNcIhQ8tQ.woff2) format("woff2"),url(//libs.outbrain.com/iconfont/MaterialIcons-Regular.woff) format("woff")}.vidget-material-icons{font-family:"Material Icons";font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;white-space:nowrap;word-wrap:normal;direction:ltr;font-feature-settings:"liga";-webkit-font-feature-settings:"liga";-webkit-font-smoothing:antialiased}.ob-native-endcard{background:rgba(0,0,0,.5);vertical-align:middle;text-align:center;border:2px solid #fff;color:#fff;font-weight:400;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border-radius:4px}.omp-cover{width:100%;height:100%;top:0;left:0;position:absolute;background:rgba(0,0,0,.5)}.obv-skip-wrapper{position:absolute;display:table;direction:ltr !important;width:100px;height:20px;bottom:18%;right:0;z-index:3;border-radius:2px;border:solid .5px rgba(255,255,255,.7);background-color:rgba(0,0,0,.8);cursor:pointer;font-family:Lato;font-size:12px;font-weight:normal;font-stretch:normal;font-style:normal;line-height:normal;letter-spacing:normal;color:#fff}.obv-skip-wrapper.minimize-skip-button{width:80px;bottom:30%}.obv-skip-title{display:inline-block;direction:ltr !important;height:100%;float:left;font-family:Arial;font-size:18px;font-weight:normal;font-stretch:normal;font-style:normal;line-height:normal;letter-spacing:normal;color:#fff;vertical-align:middle;padding:10%}.obv-skip-title.minimize-skip-button-text{font-size:13px}.obv-skip-arrow{display:table-cell;direction:ltr !important;position:absolute;vertical-align:middle;width:16px;height:auto;right:10%;top:49%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.obv-display-ad{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);border:none}.obv-display-icon{background-image:url("https://widgets.outbrain.com/images/widgetIcons/achoice.svg");width:16px;height:16px;right:4px;background-size:16px;top:4px;cursor:pointer;z-index:11;position:absolute}.vidget-reel-read-more{cursor:pointer !important;visibility:visible;opacity:1 !important}.vidget-reel-source-text{opacity:1 !important;visibility:visible;margin-left:4px;margin-right:2px}.vidget-reel-source{display:flex !important}.vidget-reel-title{display:flex !important;visibility:visible !important}.vidget-reel-description{display:none !important}.vidget-reel-footer{visibility:hidden;z-index:11 !important}.vidget-reel-controls{z-index:0 !important}.vidget-reel-two-line-height{height:71px !important}.vidget-reel-one-line-height{height:41px !important}.vidget-reel-remove-cursor{cursor:auto !important}.vidget-reel-no-title{height:26px !important;display:flex !important}.ob-vidget-report-icon-wrapper{position:absolute;top:15px;right:15px;z-index:5;display:flex;align-items:center;border-radius:46px;background:#fff;overflow:hidden;white-space:nowrap;cursor:pointer;opacity:.4;transition:opacity .2s;font-family:"Lato","open-sans",sans-serif;font-size:14px;color:#000}.ob-vidget-report-icon-wrapper .ob-vidget-report-icon-icon{display:inline-block;font-size:24px}.ob-vidget-report-icon-wrapper .ob-vidget-report-icon-text{width:0;background:#fff;display:inline-block;border-radius:46px;transition:width .4s}.ob-vidget-report-icon-wrapper .ob-vidget-report-icon-text:before{content:"Â "}.ob-vidget-report-icon-wrapper:hover,.ob-vidget-report-icon-wrapper:focus{opacity:1}.ob-vidget-report-icon-wrapper:hover .ob-vidget-report-icon-text,.ob-vidget-report-icon-wrapper:focus .ob-vidget-report-icon-text{width:94px}.ob-vidget-report-dialog-wrapper{position:absolute;width:100%;height:100%;top:0;left:0;display:none;overflow:hidden;backdrop-filter:blur(3px);font-family:"Lato","open-sans",sans-serif;font-size:.9rem;background-color:rgba(255,255,255,.6)}.ob-vidget-report-dialog-wrapper.ob-vidget-dialog-visible{display:block;z-index:5}.ob-vidget-report-dialog-wrapper.ob-vidget-dialog-visible+.ob-vidget-report-icon-wrapper{display:none}.ob-vidget-report-dialog-wrapper.ob-vidget-dialog-visible .ob-vidget-report-dialog-confirm{z-index:-1}.ob-vidget-report-dialog-wrapper.ob-vidget-dialog-visible.ob-vidget-dialog-confirm .ob-vidget-report-dialog-inner-content-wrapper{background-color:transparent;font-size:16px;box-shadow:none;overflow:hidden}.ob-vidget-report-dialog-wrapper.ob-vidget-dialog-visible.ob-vidget-dialog-confirm .ob-vidget-report-dialog-inner-content-wrapper .ob-vidget-report-dialog-close{display:none}.ob-vidget-report-dialog-wrapper.ob-vidget-dialog-visible.ob-vidget-dialog-confirm .ob-vidget-report-dialog-inner-content-wrapper .ob-vidget-report-dialog-form-container{opacity:0}.ob-vidget-report-dialog-wrapper.ob-vidget-dialog-visible.ob-vidget-dialog-confirm .ob-vidget-report-dialog-inner-content-wrapper .ob-vidget-report-dialog-confirm{opacity:1;z-index:5;white-space:nowrap}.ob-vidget-report-dialog-wrapper.tiny .ob-vidget-report-dialog-inner-content-wrapper{width:80%;max-width:300px}.ob-vidget-report-dialog-wrapper.tiny+.ob-vidget-report-icon-wrapper .ob-vidget-report-icon-icon{font-size:20px}.ob-vidget-report-dialog-wrapper .ob-vidget-report-dialog-inner-content-wrapper{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);background:#fff;padding:16px 0;border-radius:3px;max-width:210px;width:60%;box-shadow:0 0 20px 4px rgba(0,0,0,.1);display:flex;direction:ltr}.ob-vidget-report-dialog-wrapper .ob-vidget-report-dialog-inner-content-wrapper .ob-vidget-report-dialog-close{top:7px;right:7px;cursor:pointer;font-size:14px;opacity:.4;transition:all .2s;position:absolute}.ob-vidget-report-dialog-wrapper .ob-vidget-report-dialog-inner-content-wrapper .ob-vidget-report-dialog-close:hover{opacity:1}.ob-vidget-report-dialog-wrapper .ob-vidget-report-dialog-inner-content-wrapper .ob-vidget-report-dialog-confirm{opacity:0;transition:opacity .4s;position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);color:#000}.ob-vidget-report-dialog-wrapper .ob-vidget-report-dialog-inner-content-wrapper .ob-vidget-report-dialog-form-container{transition:opacity .15s;opacity:1;display:flex;flex-direction:column;justify-content:space-between}.ob-vidget-report-dialog-wrapper .ob-vidget-report-dialog-inner-content-wrapper .ob-vidget-report-dialog-form-container .ob-vidget-report-dialog-buttons-wrapper{display:flex;flex-wrap:wrap;justify-content:center}.ob-vidget-report-dialog-wrapper .ob-vidget-report-dialog-inner-content-wrapper .ob-vidget-report-dialog-form-container .ob-vidget-report-dialog-buttons-wrapper button{cursor:pointer;display:inline-block;padding:4px 12px;margin:4px;border-radius:12px;font-family:"Lato","Roboto",sans-serif;color:#000;font-size:12px;border:1px solid #cbcace;background-color:#fff;text-align:center;transition:all .2s;width:80px;box-sizing:border-box !important}.ob-vidget-report-dialog-wrapper .ob-vidget-report-dialog-inner-content-wrapper .ob-vidget-report-dialog-form-container .ob-vidget-report-dialog-buttons-wrapper button:hover,.ob-vidget-report-dialog-wrapper .ob-vidget-report-dialog-inner-content-wrapper .ob-vidget-report-dialog-form-container .ob-vidget-report-dialog-buttons-wrapper button:focus{background-color:#000;color:#fff}.ob-vidget-report-dialog-wrapper .ob-vidget-report-dialog-inner-content-wrapper .ob-vidget-report-dialog-form-container .ob-vidget-report-dialog-title{text-align:center;margin-bottom:.9rem;font-size:12px;padding:0 20px;color:#000}.aniAnimationOpen,.player-container{position:relative}.vidget-hide{display:none !important}.ob-pvid.obSticky{max-width:unset !important;overflow:visible !important}.ob-pvid.obSticky .ob_what{display:block !important}.ob-pvid.obSticky .ob_what.ob-top-branding{top:-23px !important}.ob-pvid.obSticky .ob_what.ob-bottom-branding{bottom:-21px !important;top:unset !important}',""]),e.exports=t},645:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i=e[1]||"",r=e[3];if(!r)return i;if(t&&"function"==typeof btoa){var o=(s=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),d="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(d," */")),n=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[i].concat(n).concat([o]).join("\n")}var s,a,d;return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var n=0;n<this.length;n++){var s=this[n][0];null!=s&&(o[s]=!0)}for(var a=0;a<e.length;a++){var d=[].concat(e[a]);r&&o[d[0]]||(i&&(d[2]?d[2]="".concat(i," and ").concat(d[2]):d[2]=i),t.push(d))}},t}},702:function(e,t,i){e.exports=function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function t(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,n=void 0,s=void 0,a=function(e,t){C[o]=e,C[o+1]=t,2===(o+=2)&&(s?s(w):I())};function d(e){s=e}function l(e){a=e}var c="undefined"!=typeof window?window:void 0,p=c||{},u=p.MutationObserver||p.WebKitMutationObserver,h="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),g="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function v(){return function(){return process.nextTick(w)}}function f(){return void 0!==n?function(){n(w)}:b()}function y(){var e=0,t=new u(w),i=document.createTextNode("");return t.observe(i,{characterData:!0}),function(){i.data=e=++e%2}}function m(){var e=new MessageChannel;return e.port1.onmessage=w,function(){return e.port2.postMessage(0)}}function b(){var e=setTimeout;return function(){return e(w,1)}}var C=new Array(1e3);function w(){for(var e=0;e<o;e+=2)(0,C[e])(C[e+1]),C[e]=void 0,C[e+1]=void 0;o=0}function P(){try{var e=Function("return this")().require("vertx");return n=e.runOnLoop||e.runOnContext,f()}catch(e){return b()}}var I=void 0;function E(e,t){var i=this,r=new this.constructor(T);void 0===r[x]&&J(r);var o=i._state;if(o){var n=arguments[o-1];a((function(){return U(o,r,n,i._result)}))}else H(i,r,e,t);return r}function S(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var i=new t(T);return L(i,e),i}I=h?v():u?y():g?m():void 0===c?P():b();var x=Math.random().toString(36).substring(2);function T(){}var V=void 0,A=1,R=2;function O(){return new TypeError("You cannot resolve a promise with itself")}function _(){return new TypeError("A promises callback cannot return that same promise.")}function k(e,t,i,r){try{e.call(t,i,r)}catch(e){return e}}function D(e,t,i){a((function(e){var r=!1,o=k(i,t,(function(i){r||(r=!0,t!==i?L(e,i):N(e,i))}),(function(t){r||(r=!0,F(e,t))}),"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,F(e,o))}),e)}function W(e,t){t._state===A?N(e,t._result):t._state===R?F(e,t._result):H(t,void 0,(function(t){return L(e,t)}),(function(t){return F(e,t)}))}function B(e,i,r){i.constructor===e.constructor&&r===E&&i.constructor.resolve===S?W(e,i):void 0===r?N(e,i):t(r)?D(e,i,r):N(e,i)}function L(t,i){if(t===i)F(t,O());else if(e(i)){var r=void 0;try{r=i.then}catch(e){return void F(t,e)}B(t,i,r)}else N(t,i)}function M(e){e._onerror&&e._onerror(e._result),z(e)}function N(e,t){e._state===V&&(e._result=t,e._state=A,0!==e._subscribers.length&&a(z,e))}function F(e,t){e._state===V&&(e._state=R,e._result=t,a(M,e))}function H(e,t,i,r){var o=e._subscribers,n=o.length;e._onerror=null,o[n]=t,o[n+A]=i,o[n+R]=r,0===n&&e._state&&a(z,e)}function z(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var r=void 0,o=void 0,n=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+i],r?U(i,r,o,n):o(n);e._subscribers.length=0}}function U(e,i,r,o){var n=t(r),s=void 0,a=void 0,d=!0;if(n){try{s=r(o)}catch(e){d=!1,a=e}if(i===s)return void F(i,_())}else s=o;i._state!==V||(n&&d?L(i,s):!1===d?F(i,a):e===A?N(i,s):e===R&&F(i,s))}function q(e,t){try{t((function(t){L(e,t)}),(function(t){F(e,t)}))}catch(t){F(e,t)}}var j=0;function G(){return j++}function J(e){e[x]=j++,e._state=void 0,e._result=void 0,e._subscribers=[]}function Q(){return new Error("Array Methods must be provided an Array")}var X=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(T),this.promise[x]||J(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?N(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&N(this.promise,this._result))):F(this.promise,Q())}return e.prototype._enumerate=function(e){for(var t=0;this._state===V&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var i=this._instanceConstructor,r=i.resolve;if(r===S){var o=void 0,n=void 0,s=!1;try{o=e.then}catch(e){s=!0,n=e}if(o===E&&e._state!==V)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(i===te){var a=new i(T);s?F(a,n):B(a,e,o),this._willSettleAt(a,t)}else this._willSettleAt(new i((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,i){var r=this.promise;r._state===V&&(this._remaining--,e===R?F(r,i):this._result[t]=i),0===this._remaining&&N(r,this._result)},e.prototype._willSettleAt=function(e,t){var i=this;H(e,void 0,(function(e){return i._settledAt(A,t,e)}),(function(e){return i._settledAt(R,t,e)}))},e}();function Y(e){return new X(this,e).promise}function K(e){var t=this;return r(e)?new t((function(i,r){for(var o=e.length,n=0;n<o;n++)t.resolve(e[n]).then(i,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function $(e){var t=new this(T);return F(t,e),t}function Z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ee(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var te=function(){function e(t){this[x]=G(),this._result=this._state=void 0,this._subscribers=[],T!==t&&("function"!=typeof t&&Z(),this instanceof e?q(this,t):ee())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var i=this,r=i.constructor;return t(e)?i.then((function(t){return r.resolve(e()).then((function(){return t}))}),(function(t){return r.resolve(e()).then((function(){throw t}))})):i.then(e,e)},e}();function ie(){var e=void 0;if(void 0!==i.g)e=i.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=te}return te.prototype.then=E,te.all=Y,te.race=K,te.resolve=S,te.reject=$,te._setScheduler=d,te._setAsap=l,te._asap=a,te.polyfill=ie,te.Promise=te,te}()},246:function(e,t,i){var r,o,n={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),a=function(e){var t={};return function(i){return void 0===t[i]&&(t[i]=e.call(this,i)),t[i]}}((function(e){return document.querySelector(e)})),d=null,l=0,c=[],p=i(463);function u(e,t){for(var i=0;i<e.length;i++){var r=e[i],o=n[r.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](r.parts[s]);for(;s<r.parts.length;s++)o.parts.push(m(r.parts[s],t))}else{var a=[];for(s=0;s<r.parts.length;s++)a.push(m(r.parts[s],t));n[r.id]={id:r.id,refs:1,parts:a}}}}function h(e,t){for(var i=[],r={},o=0;o<e.length;o++){var n=e[o],s=t.base?n[0]+t.base:n[0],a={css:n[1],media:n[2],sourceMap:n[3]};r[s]?r[s].parts.push(a):i.push(r[s]={id:s,parts:[a]})}return i}function g(e,t){var i=a(e.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?i.insertBefore(t,r.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),c.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(t)}}function v(e){e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function f(e){var t=document.createElement("style");return e.attrs.type="text/css",y(t,e.attrs),g(e,t),t}function y(e,t){Object.keys(t).forEach((function(i){e.setAttribute(i,t[i])}))}function m(e,t){var i,r,o,n;if(t.transform&&e.css){if(!(n=t.transform(e.css)))return function(){};e.css=n}if(t.singleton){var s=l++;i=d||(d=f(t)),r=w.bind(null,i,s,!1),o=w.bind(null,i,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",y(t,e.attrs),g(e,t),t}(t),r=I.bind(null,i,t),o=function(){v(i),i.href&&URL.revokeObjectURL(i.href)}):(i=f(t),r=P.bind(null,i),o=function(){v(i)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},void 0===t.singleton&&(t.singleton=s()),void 0===t.insertInto&&(t.insertInto="head"),void 0===t.insertAt&&(t.insertAt="bottom");var i=h(e,t);return u(i,t),function(e){for(var r=[],o=0;o<i.length;o++){var s=i[o];(a=n[s.id]).refs--,r.push(a)}e&&u(h(e,t),t);for(o=0;o<r.length;o++){var a;if(0===(a=r[o]).refs){for(var d=0;d<a.parts.length;d++)a.parts[d]();delete n[a.id]}}}};var b,C=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function w(e,t,i,r){var o=i?"":r.css;if(e.styleSheet)e.styleSheet.cssText=C(t,o);else{var n=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(n,s[t]):e.appendChild(n)}}function P(e,t){var i=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}function I(e,t,i){var r=i.css,o=i.sourceMap,n=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||n)&&(r=p(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([r],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}},463:function(e){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var i=t.protocol+"//"+t.host,r=i+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,n=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(n)?e:(o=0===n.indexOf("//")?n:0===n.indexOf("/")?i+n:r+n.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},830:function(e,t,i){var r=i(277);"string"==typeof r&&(r=[[e.id,r,""]]);var o={transform:undefined};i(246)(r,o);r.locals&&(e.exports=r.locals)},367:function(e,t,i){var r=i(816);"string"==typeof r&&(r=[[e.id,r,""]]);var o={transform:undefined};i(246)(r,o);r.locals&&(e.exports=r.locals)},656:function(){window.VIDGET_VERSION="v6.193.7"}},t={};function i(r){var o=t[r];if(void 0!==o)return o.exports;var n=t[r]={id:r,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){"use strict";var e;!function(e){e.Avoid="avoid",e.Strict="strict",e.Allow="allow",e.AllowInstream="allow instream",e.AvoidInViewport="avoid in viewport"}(e||(e={}));var t,r,o,n,s,a=function(e,t,i,r){return new(i||(i=Promise))((function(o,n){function s(e){try{d(r.next(e))}catch(e){n(e)}}function a(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((r=r.apply(e,t||[])).next())}))},d=function(e,t){var i,r,o,n,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(o=2&n[0]?r.return:n[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,n[1])).done)return o;switch(r=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],r=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}},l=function(){function t(){}return t.addPolyfills=function(){Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,r=function(){},o=function(){return i.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,o.prototype=new r,o}),window.Promise=window.Promise||i(702).Promise,this.polyfillClosest(),this.polyfillCustomEvent()},t.enumHasValue=function(e,t){for(var i in e)if(i===t)return!0;return!1},t.polyfillClosest=function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})},t.polyfillCustomEvent=function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}},t.isIE=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),i=e.indexOf("Trident/"),r=e.indexOf("Edge/"),o=0;if(t>0&&(o=parseInt(e.substring(t+5,e.indexOf(".",t)),10)),i>0){var n=e.indexOf("rv:");o=parseInt(e.substring(n+3,e.indexOf(".",n)),10)}return r>0&&(o=parseInt(e.substring(r+5,e.indexOf(".",r)),10)),o},t.titleInlineHTML=function(){return this.isIE()?"<span style=' display: block; white-space: normal; max-width: calc(100% + 1px);'></span>":"<span></span>"},t.appendDots=function(e){return e&&e.length?"."===e[e.length-1]?e+"..":e+"...":""},t.renderTitle=function(e,t){var i=t,r=document.createElement("div");r.innerHTML="<span>Ty</span>",i.appendChild(r);var o=r.firstChild instanceof HTMLElement?r.firstChild.offsetHeight:"";i.innerHTML="";var n=e.split(" "),s=[],a=1,d=document.createElement("div");for(i.children.length&&(i=this.clearChildren(i)),this.isIE()&&(d.style.width="100%"),d.innerHTML=this.titleInlineHTML(),i.appendChild(d);n.length&&a<=2;){var l=n.shift();s.push(l),d.firstChild.textContent=s.join(" ");var c=d.firstChild instanceof HTMLElement?d.firstChild.offsetHeight:"";if(c!==o&&1===s.length&&(o=c),c>o&&(s.pop(),n.unshift(l),d.firstChild.textContent=s.join(" "),n.length)){if(2===a){d.firstChild.textContent=this.appendDots(d.firstChild.textContent);for(var p=d.firstChild instanceof HTMLElement?d.firstChild.offsetHeight:"";p>o;)s.pop(),d.firstChild.textContent=this.appendDots(s.join(" "));break}(d=document.createElement("div")).innerHTML=this.titleInlineHTML(),i.appendChild(d),s.length=0,a++}}},t.getViewportSizeGlobal=function(){var e,t,i,r={height:0,width:0};return e=void 0!==window.innerWidth,t=void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth,i=!1===e&&!1===t,e?(r.height=window.innerHeight,r.width=window.innerWidth):t?(r.height=null===document||void 0===document?void 0:document.documentElement.clientHeight,r.width=null===document||void 0===document?void 0:document.documentElement.clientWidth):i&&(r.height=document.getElementsByTagName("body")[0].clientHeight,r.width=document.getElementsByTagName("body")[0].clientWidth),r},t.elementInViewport=function(e,i){if(i||(i=0),!e||i<0||i>100)return!1;var r=e.getBoundingClientRect(),o=t.getViewportSizeGlobal().height,n=e.clientHeight,s=Math.round(n*i/100);return s=s>o?o-1:s,r.top+s<=o&&r.bottom-s>=0},t.viewPercentage=function(e){if(!e)return 0;var i=e.getBoundingClientRect(),r=t.getViewportSizeGlobal().height,o=e.clientHeight;if(!o)return 0;var n=i.top,s=i.top+o,a=0;if(n>0){if(n>r)return 0;if(s<r)return 100;a=r-n}else{if(s<0)return 0;a=s>r?r:s}return Math.round(100*a/o)},t.elementPercHeightInViewport=function(e,i,r,o,n){if(void 0===n&&(n="both"),r||(r=0),!e||r<0||r>100)return!1;var s=t.getViewportSizeGlobal().height,a=Math.round(i*r/100);if(a=a>s?s-1:a,o)return e+a<=s&&e+i-a>=0;var d=e+i-a<0,l=e+a>s;switch(n){case"both":return d||l;case"above":return d;case"below":return l}},t.getDocumentUrl=function(){var e=window.location.href;return window.self!==window.top&&(e=window.parent.location.href),e},t.isIframe=function(){try{return window.self!==window.top}catch(e){return console.error(e),!0}},t.multiLineTruncation=function(e,t){var i,r=e.cloneNode(!0);if(r.style.position="absolute",r.style.top="0",r.style.width="10%",r.style.overflow="hidden",r.style.visibility="hidden",r.style.whiteSpace="nowrap",e.parentNode.appendChild(r),i=(r.clientHeight+2)*t,e.parentNode.removeChild(r),r=null,e.clientHeight>i)for(var o=0,n=35*t;e.clientHeight>i&&(e.innerHTML=e.textContent.slice(0,-2)+"&hellip;",++o!==n););},t.toDash=function(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))},t.getFormattedDate=function(){var e=function(e){return e>=10?e:"0"+e},t=new Date,i=e(t.getDate()),r=e(t.getMonth()+1),o=e(t.getHours()),n=e(t.getMinutes()),s=e(t.getSeconds()),a=t.getMilliseconds();return[t.getFullYear(),"-",r,"-",i," ",o,":",n,":",s,".",a].join("")},t.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},t.getTextSize=function(e,i){var r=document.createElement("div");r.style.position="absolute",r.style.visibility="hidden",r.style.height="auto",r.style.width="auto",r.style.whiteSpace="nowrap",r.innerHTML=e;var o=["color","fontStyle","lineHeight","fontFamily","fontWeight","padding","margin","border","fontSize","textAlign"];for(var n in o){var s=o[n];i.hasOwnProperty(s)&&(r.style[t.toDash(s)]=i[s])}var a=document.getElementsByTagName("body")[0];a.appendChild(r);var d=r.offsetHeight+1||0,l=r.offsetWidth+1||0;return a.removeChild(r),{height:d,width:l}},t.isVideoPlayingOnPageSync=function(i){switch(i){case e.Allow:return!1;case e.Strict:return t.isVideoElementsOnPageStrictMode();case e.Avoid:case e.AllowInstream:case e.AvoidInViewport:return t.isVideoPlayingOnPageAvoidMode(i);default:return t.isVideoPlayingOnPageAvoidMode(e.AvoidInViewport)}},t.isVideoPlayingOnPageAsync=function(i,r){return a(this,void 0,void 0,(function(){return d(this,(function(o){return i===e.Allow?[2,Promise.resolve(!1)]:[2,t.delay(r).then((function(){return Promise.resolve(t.isVideoPlayingOnPageSync(i))}))]}))}))},t.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))},t.isMobile=function(){return!!/(iphone|ipod|symbian|android|windows ce|blackberry|palm|ipad)/.test(navigator.userAgent.toLowerCase())},t.checkYoutubeElements=function(t){if(void 0===t&&(t=e.Strict),t!==e.Strict){var i=document.querySelectorAll("iframe[src*='youtube.com'][src*=\"autoplay=1\"], object[data*='youtube.com'][data*=\"autoplay=1\"]");if(t===e.AvoidInViewport){for(var r=0;r<i.length;r++){var o=i.item(r);if(this.elementPercHeightInViewport(o.getBoundingClientRect().top,o.getBoundingClientRect().height,0,!0))return!0}return!1}return!!i.length}return!!document.querySelector("iframe[src*='youtube.com'], object[data*='youtube.com']")},t.checkIframeElements=function(){return!!document.querySelector('iframe[src*="autoplay=1"], iframe[src*="mute="]')},t.checkVideoElements=function(t){void 0===t&&(t=e.Strict);var i=document.getElementsByTagName("video");if(0===i.length)return!1;if(t===e.Strict)return!0;for(var r=0;r<i.length;r++){var o=i.item(r);if(o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2){if(t===e.Avoid||t===e.AllowInstream&&!o.closest(".ob-ivid"))return!0;if(t===e.AvoidInViewport&&this.elementPercHeightInViewport(o.getBoundingClientRect().top,o.getBoundingClientRect().height,0,!0))return!0}}return!1},t.checkEmbedElements=function(){return!!document.querySelector("embed[src$='.mov'], embed[src$='.mp4']")},t.isVideoPlayingOnPageAvoidMode=function(e){var i=t.checkYoutubeElements(e);return i||t.checkVideoElements(e)},t.isVideoElementsOnPageStrictMode=function(){var i=t.checkVideoElements(e.Strict);if(i)return i;var r=t.checkYoutubeElements(e.Strict);if(r)return r;var o=t.checkIframeElements();return o||t.checkEmbedElements()},t.performRandomWithBalance=function(e){var t=0,i=[];if(!e)return null;for(var r in e)t+=e[r],i.push({name:r,balance:e[r]});t<1&&(i[0].balance+=1-t),t>1&&(i[0].balance-=t-1);for(var o=Math.random(),n=0,s=0;n<i.length;n++){var a=i[n];if(o<a.balance+s)return a.name;s+=a.balance}return null},t.waterfall=function(e,t){return this.reducePollyfill.call(e,(function(e,i){return e.then(t?i.bind(t):i)}),Promise.resolve())},t.reducePollyfill=function(e,t){if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var i,r=Object(this),o=r.length>>>0,n=0;if(2==arguments.length)i=arguments[1];else{for(;n<o&&!r.hasOwnProperty(n);)n++;if(n>=o)throw new TypeError("Reduce of empty array with no initial currentValue");i=r[n++]}for(;n<o;n++)n in r&&(i=e(i,r[n],n,r));return i},t.nodeToString=function(e){var t=document.createElement("div");t.appendChild(e.cloneNode(!0));var i=t.innerHTML;return t=e=null,i},t.getCallerName=function(){try{var e=(new Error).stack;if(e){var t=e.match(/(Vidget|Function|CommonUtils|obServices|SingleRun|WidgetService|BasePlayer|AniviewPlayer|VidazooPlayer|VidazooProvider|AniviewProvider|OutbrainRtbProvider|ObServices)([^\s(]*)/g);if(t&&Array.isArray(t))for(var i=2;i<t.length;i++){var r=t[i].split("."),o=r[r.length-1];if(!o.includes("anonymous"))return o}}return""}catch(e){return"[FAILURE] getCallerName (CommonUtils): ".concat(e)}},t.checkWidgetElementExists=function(e){if(e.widgetSettings&&e.widgetSettings.containerID&&!k.getWidgetElement(e.widgetSettings.containerID))throw"Could not find widget on DOM"},t.ieDecrypt=function(e){for(var t=e.split("#"),i=[],r=0;r<t.length;r++)i.push(String.fromCharCode(t[r]/26));return i.reverse().join("")},t.getSiblingsBetweenRecs=function(e,t){for(var i=[],r=!1,o=0,n=Array.from(e.parentNode.children).concat(e.parentNode!==t.parentNode?Array.from(t.parentNode.children):[]);o<n.length;o++){var s=n[o],a=s===e,d=s===t;if(r||a)if(a){if(d)break;r=!0}else if(r){if(d)break;i.push(s)}}return i},t.firePassbackScript=function(e,t){var i,r=document.createRange().createContextualFragment(e);document.body.appendChild(r),null===(i=document.querySelector('[data-widget-id="'.concat(t,'"]')))||void 0===i||i.remove()},t.firePixels=function(e,i,r){e.forEach((function(e){e=t.replaceMacros(e,i),(new Image).src=e,r&&r(e)}))},t.replaceMacros=function(e,t){return e.replaceAll("{{widget_id}}",t.widgetID).replaceAll("{{publisher_id}}",t.publisherId).replaceAll("{{rand}}",(Math.random()+1).toString(36).substring(2)).replaceAll("{{ad_title}}",t.adTitle).replaceAll("{{req_id}}",t.reqID).replaceAll("{{campaign_id}}",t.campaignId).replaceAll("{{publisher_name}}",t.publisherName).replaceAll("{{adv_name}}",t.advName).replaceAll("{{doc_id}}",t.docId).replaceAll("{{time_stamp}}",Date.now().toString())},t.getSubtree=function(e){return e.shadowRoot||e},t.clearChildren=function(e){var t=e.cloneNode(!1);return e.parentElement.replaceChild(t,e),t},t}(),c=l,p=function(){function e(){}return e.get=function(e,t,i){var r=new XMLHttpRequest;r.open("GET",e),r.onload=function(){200===r.status?void 0!==t&&t(r.responseText):void 0!==i&&i("Request failed.  Returned status of "+r.status)},r.send()},e.post=function(e,t,i,r){return new Promise((function(o,n){var s=new XMLHttpRequest;s.open("POST",e,!0),s.setRequestHeader("Content-Type","application/json"),s.onload=function(){200===s.status?void 0!==i&&i(s.responseText):void 0!==r&&r("Request failed.  Returned status of "+s.status)},s.send(JSON.stringify(t)),s.onload=function(){200===s.status?o(s.responseText):n("Request failed.  Returned status of "+s.status)},s.onerror=function(){n("Request failed.  Returned status of "+s.status)}}))},e.jsonp=function(e,t){var i=document.createElement("script");i.setAttribute("src",e+"&callback="+t),document.getElementsByTagName("head")[0].appendChild(i)},e}(),u=function(){function e(){}return e.isRunning=function(){return e.running},e.getRunningWidgetIdx=function(){return e.widgetIdx},e.setRunning=function(t){e.running=!0,e.widgetIdx.push(t)},e.setNotRunning=function(t){for(var i=0;i<e.widgetIdx.length;i++)e.widgetIdx[i]===t&&e.widgetIdx.splice(i,1);0===e.widgetIdx.length&&(e.running=!1)},e.running=!1,e.widgetIdx=[],e}();!function(e){e.Loaded="VIDGET_LOADED",e.Verbose="VIDGET_VERBOSE",e.Pending="VIDGET_PENDING",e.Viewability="VIDGET_VIEWABILITY",e.IterationCanceled="VIDGET_ITERATION_CANCELED",e.Ready="READY",e.Play="PLAY",e.Pause="PAUSE",e.Resume="RESUME",e.Complete="COMPLETE",e.Click="CLICK",e.Mute="MUTE",e.Unmute="UNMUTE",e.Close="CLOSE",e.Error="ERROR",e.FirstQuartile="FIRST_QUARTILE",e.SecondQuartile="SECOND_QUARTILE",e.ThirdQuartile="THIRD_QUARTILE",e.SliderSkipped="SLIDER_SKIPPED",e.ProviderPass="PROVIDER_PASS",e.PixelFired="PIXEL_FIRED",e.Debug="VIDGET_DEBUG",e.VideoRejected="VIDEO_REJECTED",e.StartRequest="VIDGET_START_REQ",e.PlayReadyRequest="VIDGET_START_READY",e.Skip="SKIP",e.FillCount="FILL_COUNT",e.KeepWatching="KEEP_WATCHING",e.VidgetConfigError="VIDGET_CONFIG_ERROR",e.VidgetFailure="VIDGET_FAILURE",e.ProviderFailure="PROVIDER_FAILURE",e.vidgetLog="VIDGET_LOG",e.EngagedPlay="ENGAGED_PLAY",e.VidgetFeature="VIDGET_FEATURE",e.ReportClick="REPORT_CLICK",e.VidgetReport="VIDGET_REPORT"}(t||(t={})),function(e){e.Aniview="Aniview",e.Vidazoo="Vidazoo",e.OPA="OPA",e.OPAdisplay="OPAdisplay",e.VI="VI",e.N2V="NATIVETOVIDEO"}(r||(r={})),function(e){e.Load="load",e.View="view",e.ViewPreload="viewPreload",e.Controlled="controlled",e.ControlledPauseOutOfView="controlPauseOutOfView"}(o||(o={}));var h,g=((n={})[r.Aniview]={playMode:o.Load,pauseOutOfView:!1,iterations:1},n[r.Vidazoo]={playMode:o.Load,pauseOutOfView:!1,iterations:1},n[r.OPA]={playMode:o.Load,pauseOutOfView:!1,iterations:1},n[r.OPAdisplay]={playMode:o.Load,pauseOutOfView:!1,iterations:1},n[r.VI]={playMode:o.Load,pauseOutOfView:!1,iterations:1},n[r.N2V]={playMode:o.Load,pauseOutOfView:!1,iterations:1},n),v=((s={})[r.Aniview]=0,s[r.Vidazoo]=0,s[r.OPA]=0,s[r.OPAdisplay]=0,s[r.VI]=0,s[r.N2V]=0,s),f=[r.Vidazoo,r.VI],y="https://videoevents.outbrain.com/events/recordjp",m="https://sim-eventsrecorder.outbrain.com/EventsRecorder/api/events/recordjp",b="https://videovastore.outbrain.com/VideoVastore/api",C="http://videovastore-sim.outbrain.com:8080/VideoVastore/api";!function(e){e.InWidget="inWidget",e.AboveWidget="aboveWidget",e.BelowWidget="belowWidget",e.Midroll="midroll"}(h||(h={}));var w,P=function(){return P=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},P.apply(this,arguments)},I=function(){function e(e,t,i,r){this.logLevel=0,this.sessionId=e,this._widgetReqId=r,this._providerConfig=t||{},this._playerConfig=i||{},this._win=window,this._iframe=t.isIframe,this.auditUrl=this.getAuditUrl(),this.logLevel=t.loglevel.level,this.consoleLog=t.loglevel.consoleLog,this._version=window.VIDGET_VERSION?window.VIDGET_VERSION:null,"function"!=typeof this._win.OB_VidgetAuditCallback&&(this._win.OB_VidgetAuditCallback=this.onAuditResponse.bind(this))}return e.prototype.updateProviderConfig=function(e){e&&(this._providerConfig=e)},e.prototype.updatePlayerConfig=function(e){e&&(this._playerConfig=e)},e.prototype.updateCurrentReload=function(e){this._providerConfig.currentReload=e},e.prototype.send=function(){var e=this.cleanEmpty(this.extractAuditParams()),t=[this.auditUrl,"?json=",encodeURIComponent(JSON.stringify(e))].join("");p.jsonp(t,"OB_VidgetAuditCallback")},e.prototype.onAuditResponse=function(){},e.prototype.updateWaterfallModified=function(){if(this._providerConfig.optimizeLogicExcludeCount.waterfallExcludeList.length>0){var e=this._providerConfig.optimizeLogicExcludeCount.waterfallExcludeList,t=this._providerConfig.providersWaterfall.filter((function(t){return e.indexOf(t)<0}));return t.length>0?t.toString():"Empty"}},e.prototype.getAuditUrl=function(){switch(this._providerConfig.env){case"SIM":case"TEST":return m;default:return y}},e.prototype.getAuditPlayMode=function(){switch(this._providerConfig.playMode){case o.Load:return"AUTO_PLAY";case o.View:return"VIEW_TO_PLAY";case o.ViewPreload:return"VIEW_PRELOAD";default:return"UNKNOWN"}},e.prototype.getAuditPlayerLocation=function(){return this._providerConfig.playerLocation?this._providerConfig.isReelWidget?h.Midroll:this._providerConfig.playerLocation:null},e.prototype.extractAuditParams=function(){var e={abTestList:this._providerConfig.layeredTestInfo,abTestVal:this._providerConfig.abTestVal,adBlocker:this._providerConfig.adBlockStatus,agencyId:this._providerConfig.agencyId,bid:this.getBid(),cardIdx:this._providerConfig.cardIdx,campaignId:this._playerConfig.campaignId,ccpaPrivacy:this._providerConfig.ccpaPrivacy,configuredNative:this._providerConfig.nativeVideoMode,configuredProvidersCount:this._providerConfig.providersWaterfall?this._providerConfig.providersWaterfall.length:1,configuredReloadCount:this._providerConfig.configuredReloadCount||1,contentSource:this._providerConfig.vidgetContentSource&&"none"!==this._providerConfig.vidgetContentSource?this._providerConfig.vidgetContentSource:null,contentProvider:this._providerConfig.contentProvider?this._providerConfig.contentProvider:null,currentReload:void 0===this._providerConfig.currentReload?1:this._providerConfig.currentReload,docId:this._providerConfig.docId,externalCampaignId:this._providerConfig.externalCampaignId?this._providerConfig.externalCampaignId:null,featureFlag:this._providerConfig.featureFlag,feedVersion:this._providerConfig.feedVersion,gdpr:this._providerConfig.gdprInt,iframe:this._iframe,isNative:!!this._providerConfig.isNativeVideoPlay&&this._providerConfig.isNativeVideoPlay,isRequestInView:this._providerConfig.isVideoRequestInView,localTime:(new Date).toString(),marketerId:this._playerConfig.marketerId,marketerName:this._playerConfig.marketerName,mediaOrientation:this._providerConfig.mediaOrientation,obRecsAbtestAndVars:this._providerConfig.obRecsAbtestAndVars,odbVidTag:this._providerConfig.odbVidTag,opaAdId:this._providerConfig.opaAdId,opaPartnerId:this._providerConfig.opaPartnerId,opaProductId:this._providerConfig.opaProductId,orientation:this._win.innerHeight>this._win.innerWidth?"PORTRAIT":"LANDSCAPE",partner:this.getPartner(),placementType:this._providerConfig.placementType,playerLocation:this.getAuditPlayerLocation(),pauseOutOfView:this._providerConfig.pauseOutOfView||null,playMode:this.getAuditPlayMode(),prebid:!!this._playerConfig.prebid&&this._playerConfig.prebid,provider:this._providerConfig.provider?this._providerConfig.provider.toUpperCase():"UNKNOWN",providerIndex:this._providerConfig.providerIndex||1,publisherId:this._providerConfig.pubID?this._providerConfig.pubID:"10683",runningWidgetIdx:u.getRunningWidgetIdx().toString(),screenResolution:[this._win.screen.availHeight,"x",this._win.screen.availWidth].join(""),sessionId:this.sessionId,sourceDocUrl:this._providerConfig.datasrc||this._win.location.href,sourceId:this._providerConfig.sourceId?this._providerConfig.sourceId:"6852067",sourcePvId:this._providerConfig.pageViewId,sourceRequestId:this._widgetReqId,sourceSubWidgetId:this._providerConfig.reportedSubWidgetId,sourceWidgetId:this._providerConfig.reportedWidgetId?this._providerConfig.reportedWidgetId:"AR_1",sticky:this._providerConfig.stickyPlayer,subPlatform:this._providerConfig.inApp?this._providerConfig.inApp?"app":"web":null,trafficType:this._providerConfig.trafficType,userCategories:this._providerConfig.userCategories,pageCategories:this._providerConfig.pageCategories,version:this._version?this._version:void 0,videoBitRate:this._playerConfig.adBitrate||null,videoClickUrl:null,videoDuration:this._providerConfig.videoDuration||0,videoHeight:this._playerConfig.height?parseInt(this._playerConfig.height):null,videoId:this._playerConfig.videoId,videoPositionInWidget:this._providerConfig.index,videoProgress:0,videoWidth:this._playerConfig.width?parseInt(this._playerConfig.width):null,viewability:-1,waterfall:this._providerConfig.providersWaterfall?this._providerConfig.providersWaterfall.toString():null,waterfallModified:this.updateWaterfallModified(),widgetIdx:this._providerConfig.widgetIdx};return P(P({eventType:null},e),this._body)},e.prototype.cleanEmpty=function(e){for(var t in e)e.hasOwnProperty(t)&&/^(^$|null|undefined)$/.test(e[t])&&delete e[t];return e},e.prototype.getBid=function(){if(this._playerConfig.bid&&this._body.eventType===t.Play)return this._playerConfig.bid;delete this._playerConfig.bid},e.prototype.getPartner=function(){if(this._playerConfig.partner)return this._playerConfig.partner;delete this._playerConfig.partner},Object.defineProperty(e.prototype,"body",{get:function(){return this._body},set:function(e){this._body=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"providerConfig",{get:function(){return this._providerConfig},set:function(e){this._providerConfig=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playerConfig",{get:function(){return this._playerConfig},set:function(e){this._playerConfig=e},enumerable:!1,configurable:!0}),e}();!function(e){e[e.INFO=0]="INFO",e[e.DEBUG=1]="DEBUG",e[e.VERBOSE=2]="VERBOSE"}(w||(w={}));var E,S,x=function(){return x=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},x.apply(this,arguments)},T=function(){function e(){}return e.setAudit=function(e,t,i,r){return this.audits[e]||(this.audits[e]=new I(e,t,i,r),k.setNewAuditSession(e)),this.audits[e]},e.getAuditBySessionId=function(e,t,i){if(this.audits[e])return t&&this.audits[e].updateProviderConfig(t),i&&this.audits[e].updatePlayerConfig(i),this.audits[e]},e.increaseReload=function(e,t){this.audits[e].updateCurrentReload(t)},e.sendAudit=function(e,t,i,r,o){void 0===i&&(i=""),void 0===r&&(r=w.INFO);var n=this.audits[e];!n||r>n.logLevel||(n.body=x({eventType:t,description:i||""},o),n.send(),n.consoleLog&&i&&console.log("Debug: ".concat(i)))},e.debug=function(e,i,r){void 0===i&&(i=""),void 0===r&&(r=t.Debug),this.sendAudit(e,r,i,w.DEBUG)},e.error=function(e,i,r){void 0===i&&(i="Error"),void 0===r&&(r=w.INFO),this.sendAudit(e,t.Error,i,r)},e.verbose=function(i,r,o){if(void 0===r&&(r="in"),void 0===o&&(o=""),this.audits[i]&&this.audits[i].logLevel===w.VERBOSE){var n=c.getCallerName();e.sendAudit(i,t.Verbose,"[".concat(r,"] ").concat(n||"Could not get function name"," ").concat(o?": "+o:o),w.VERBOSE)}},e.audits={},e}();!function(e){e.Horizontal="horizontal",e.Vertical="vertical",e.Both="both"}(E||(E={})),function(e){e.TopRight="top-right",e.TopLeft="top-left",e.BottomRight="bottom-right",e.BottomLeft="bottom-left"}(S||(S={}));var V,A,R=function(){return R=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},R.apply(this,arguments)},O=window,_=function(){function t(){}return t.createPlayerWrapperElement=function(e){T.verbose(this.sessionId);var i=t.getPlayerWrapperElement(e);if(i){if("providerPlayerReuse"===e.featureFlag)return i;i.parentNode.removeChild(i)}switch(e.playerLocation){case h.AboveWidget:return t.createAboveWidgetPlayerWrapper(e);case h.BelowWidget:return t.createBelowWidgetPlayerWrapper(e);case h.InWidget:default:return t.createInWidgetPlayerWrapper(e)}},t.reset=function(e){T.verbose(this.sessionId);var i=t.getPlayerWrapperElement(e);i&&i.parentNode.removeChild(i)},t.getOpaFirstAuction=function(e){return t.widgetProxy.getRawResponse&&t.widgetProxy.getRawResponse(e)},t.getPlayerDimensionsByMediaSize=function(e,i,r){try{if("inWidget"===e.playerLocation||!i||!r)return t.getUpdatedPlayerDimensions(e);var o=e.playerMaxWidth[e.playerOrientation];t.providerConfig=e;var n=t.getWidgetElement(e.containerID),s=c.getSubtree(n).querySelector(".ob-widget-items-container"),a=i/r,d=window.innerWidth>n.offsetWidth?n.offsetWidth:window.innerWidth;return d=s&&(d>s.offsetWidth||0===d)?s.offsetWidth:d,{width:d=o&&o<d?o:d,height:d/a<.9*window.innerHeight?d/a:.9*window.innerHeight}}catch(e){throw T.error(this.sessionId,"error inside getPlayerDimensionsByMediaSize"),"EXIT"}},t.getUpdatedPlayerDimensions=function(e){try{T.verbose(this.sessionId);var i={};t.providerConfig=e;var r=e.containerID,o=t.getWidgetElement(r),n=e.playerMaxWidth[e.playerOrientation];switch(e.playerLocation){case h.InWidget:var s=parseInt(e.firstIndex),a=parseInt(e.lastIndex),d=c.getSubtree(o).querySelector(".ob-recIdx-"+s),l=c.getSubtree(o).querySelector(".ob-recIdx-"+a);if(!0===e.coveredWidget){var p=c.getSubtree(o).querySelector(".ob-widget > .ob-first")||c.getSubtree(o).querySelector(".ob-widget > .ob-widget-items-container"),u=t.getCoveredPlayerHeight(e,p,p.clientWidth);i={width:p.clientWidth,height:u}}else i=t.getPlayerDimensions(d,l);break;case h.AboveWidget:var g=c.getSubtree(o).querySelector(".ob-widget-items-container")||c.getSubtree(o).querySelector(".ob-widget");i=t.getPlayerDimensionsForOuterPlayer(g,o,n,"horizontal");break;case h.BelowWidget:var v=c.getSubtree(o).querySelectorAll(".ob-widget-items-container")||c.getSubtree(o).querySelectorAll(".ob-widget");if(v&&v.length){var f=v[v.length-1];i=t.getPlayerDimensionsForOuterPlayer(f,o,n,"horizontal")}}return i}catch(e){throw T.error(this.sessionId,"getUpdatedPlayerDimensions(): ".concat(this.defaultErrorMessage," - ").concat(e.toString())),"EXIT"}},t.getPlayerWrapperElement=function(e){T.verbose(this.sessionId);var t=e.containerID,i=t+"_"+e.widgetID+"_playerWrapper",r=this.getWidgetElement(t);return null==r?void 0:r.querySelector("#"+i)},t.createInWidgetPlayerWrapper=function(e){try{T.verbose(this.sessionId);var i=e.containerID,r=t.getWidgetElement(i),o=e.widgetID,n=parseInt(e.firstIndex),s=parseInt(e.lastIndex),a=c.getSubtree(r).querySelector(".ob-recIdx-"+n),d=c.getSubtree(r).querySelector(".ob-recIdx-"+s),l=void 0;if(!0===e.coveredWidget){var p=c.getSubtree(r).querySelector(".ob-widget > .ob-first")||c.getSubtree(r).querySelector(".ob-widget > .ob-widget-items-container"),u=t.getCoveredPlayerHeight(e,p,p.clientWidth);(l=t.createPlayerWrapperDiv(i+"_"+o+"_playerWrapper",p.clientWidth,u)).style.top="unset",null!=(h=this.preparePlayerWrapperToDOM(i,r,l,!!r.shadowRoot))&&p.insertBefore(h,p.firstChild)}else if(e.isReelWidget){p=c.getSubtree(r).querySelector(".ob-widget > .ob-reel-track");(l=t.createPlayerWrapperDiv(i+"_"+o+"_playerWrapper",r.offsetWidth,a.clientHeight)).style.zIndex="10",null!=(h=this.preparePlayerWrapperToDOM(i,r,l,!!r.shadowRoot))&&p.appendChild(h)}else{var h;this.playerDimensions=t.getPlayerDimensions(a,d),l=t.createPlayerWrapperDiv(i+"_"+o+"_playerWrapper",this.playerDimensions.width,this.playerDimensions.height),null!=(h=this.preparePlayerWrapperToDOM(i,r,l,!!r.shadowRoot))&&a.appendChild(h)}return l}catch(t){var g=this.getExtraDataForDomError(e);return T.error(this.sessionId,"createInWidgetPlayerWrapper(): ".concat(this.defaultErrorMessage," - ").concat(t.toString()," - ").concat(g)),null}},t.createAboveWidgetPlayerWrapper=function(e){try{T.verbose(this.sessionId);var i=e.containerID,r=t.getWidgetElement(i),o=e.widgetID,n=c.getSubtree(r).querySelector(".ob-widget-items-container")||c.getSubtree(r).querySelector(".ob-widget"),s=e.playerMaxWidth[e.playerOrientation];if(n){var a=e.ghostFixedSize?r:n;this.playerDimensions=t.getPlayerDimensionsForOuterPlayer(a,r,s,"horizontal",e.ghostFixedSize);var d=t.createPlayerWrapperDiv(i+"_"+o+"_playerWrapper",this.playerDimensions.width,this.playerDimensions.height),l=this.preparePlayerWrapperToDOM(i,r,d,!!r.shadowRoot);return null!=l&&(n.parentElement?n.parentElement.insertBefore(l,n):n.appendChild(l)),d}}catch(t){var p=this.getExtraDataForDomError(e);return T.error(this.sessionId,"createAboveWidgetPlayerWrapper(): ".concat(this.defaultErrorMessage," - ").concat(t.toString()," - ").concat(p)),null}},t.preparePlayerWrapperToDOM=function(e,t,i,r){if(void 0===r&&(r=!1),r){var o="wrapperContainerForShadowDom_"+e,n=t.querySelector("#"+o);n&&n.remove();var s=window.document.createElement("div");return s.id=o,s.appendChild(i),t.appendChild(s),null==t.shadowRoot.querySelector("slot")?window.document.createElement("slot"):null}return i},t.getExtraDataForDomError=function(e){try{var t=Array.from(document.getElementsByClassName("OUTBRAIN")),i=[];return t.map((function(e){return i.push("".concat(e.id,"-").concat(e.dataset.widgetId))})),"containerID=".concat(e.containerID,", widgetId=").concat(e.widgetID,", widgetsOnPage=").concat(i)}catch(e){return""}},t.isDfpIframe=function(e){try{if(window.self===window.top)return;var t=e.containerID,i=this.getWidgetElement(t);if(e.playerLocation===h.AboveWidget||e.playerLocation===h.BelowWidget){var r;r=window.parent&&window.parent.document?window.parent.document.getElementsByTagName("iframe"):[];for(var o=0;o<r.length;o++)r[o].contentDocument===i.ownerDocument&&r[o].name&&r[o].name.includes("google_ads")&&(e.dfpInfo.dfpFrame=r[o],e.dfpOriginalHeight=r[o].height,e.dfpInfo.isDfp=!0)}}catch(e){T.verbose(this.sessionId,"dfp - ".concat(e))}},t.getConsentData=function(e){var i=t.getWidgetRequest(e.widget,"cnsntv2",null);return i||t.getWidgetRequest(e.widget,"cnsnt","")},t.changeDFP=function(e,t,i){i?(e.dfpInfo.dfpFrame.style.paddingTop="0px",e.dfpInfo.dfpFrame.height=e.dfpInfo.dfpOriginalHeight):(e.dfpInfo.dfpOriginalHeight=parseInt(e.dfpInfo.dfpFrame.height),e.dfpInfo.dfpFrame.style.paddingTop="10px",e.dfpInfo.dfpFrame.height=e.dfpInfo.dfpOriginalHeight+t+"px")},t.getPlayerDimensionsForOuterPlayer=function(e,i,r,o,n){if(void 0===n&&(n=!1),T.verbose(this.sessionId),i.getAttribute("data-feed-idx")){var s=c.getSubtree(i).querySelector(".ob-widget-section");return t.getPlayerDimensions(s,null,r,o,n)}return t.getPlayerDimensions(e,null,r,o,n)},t.createBelowWidgetPlayerWrapper=function(e){try{T.verbose(this.sessionId);var i=e.containerID,r=t.getWidgetElement(i),o=e.widgetID,n=e.playerMaxWidth[e.playerOrientation],s=c.getSubtree(r).querySelectorAll(".ob-widget-items-container")||c.getSubtree(r).querySelectorAll(".ob-widget");if(s&&s.length){var a=s[s.length-1];this.playerDimensions=t.getPlayerDimensionsForOuterPlayer(a,r,n,"horizontal");var d=t.createPlayerWrapperDiv(i+"_"+o+"_playerWrapper",this.playerDimensions.width,this.playerDimensions.height),l=this.preparePlayerWrapperToDOM(i,r,d,!!r.shadowRoot);return null!=l&&(a.parentElement?a.parentElement.insertBefore(l,a.nextSibling):a.appendChild(l)),d}}catch(t){var p=this.getExtraDataForDomError(e);return T.error(this.sessionId,"createBelowWidgetPlayerWrapper(): ".concat(this.defaultErrorMessage," - ").concat(t.toString()," - ").concat(p)),null}},t.createPlayerWrapperDiv=function(e,t,i){T.verbose(this.sessionId);var r=window.document.createElement("div");return r.id=e,r.style.setProperty("width",t+"px","important"),r.style.height="".concat(i,"px"),r.style.zIndex="1",r.style.visibility="hidden",r.style.top="0px",r.style.position="absolute",r.style.marginRight="auto",r.style.marginLeft="auto",r.style.display="flex",r.style.flexDirection="column",r},t.getTopLeftPoint=function(e,i){try{T.verbose(this.sessionId);var r=t.getWidgetElement(e);if(i){var o=c.getSubtree(r).querySelector(".ob-recIdx-"+i);if(o)return o.getBoundingClientRect().top}return r.getBoundingClientRect().top}catch(e){throw T.error(this.sessionId,"getTopLeftPoint(): ".concat(this.defaultErrorMessage," - ").concat(e.toString())),"EXIT"}},t.getPlayerEffectiveTopLeftPosition=function(e,i,r){try{T.verbose(this.sessionId);var o=t.getWidgetElement(e);switch(i){case h.InWidget:var n=c.getSubtree(o).querySelector(".ob-recIdx-"+r);if(n)return n.getBoundingClientRect().top;break;case h.BelowWidget:return o.getBoundingClientRect().bottom;case h.AboveWidget:default:return o.getBoundingClientRect().top}}catch(e){throw T.error(this.sessionId,"getPlayerEffectiveTopLeftPosition(): ".concat(this.defaultErrorMessage," - ").concat(e.toString())),"EXIT"}},t.getWidgetHeight=function(e){try{return T.verbose(this.sessionId),t.getWidgetElement(e).getBoundingClientRect().height}catch(e){throw T.error(this.sessionId,"getPlayerEffectiveTopLeftPosition(): ".concat(this.defaultErrorMessage," - ").concat(e.toString())),"EXIT"}},t.getWidgetRecInfo=function(e,i){T.verbose(this.sessionId);var r={},o=t.getWidgetElement(e.containerID),n="title"===i?"text":i,s=c.getSubtree(o).querySelector(".ob-recIdx-0 .ob-rec-".concat(n));return s&&(r.style=window.getComputedStyle(s)||{},r.size=c.getTextSize(e[i],r.style)),r},t.isEmptyWidget=function(e){try{T.verbose(this.sessionId);var i=t.getWidgetElement(e);return!c.getSubtree(i).querySelector(".ob-recIdx-0")}catch(e){throw T.error(this.sessionId,"isEmptyWidget(): ".concat(this.defaultErrorMessage," - ").concat(e.toString())),"EXIT"}},t.displayWidgetElements=function(e,i){void 0===i&&(i=!0);try{T.verbose(this.sessionId);for(var r=t.getWidgetElement(e.containerID),o=t.getPlayerWrapperElement(e),n=0,s=e.indexes;n<s.length;n++){var a=s[n],d=c.getSubtree(r).querySelector(".ob-recIdx-".concat(a-1));i?(d.style.visibility="visible",d.classList.remove("playerPlay")):this.isElementPositionedInsideElement(d,o)&&(d.style.visibility="hidden",d.classList.add("playerPlay"))}}catch(e){throw T.error(this.sessionId,"displayWidgetElements(): ".concat(this.defaultErrorMessage," - ").concat(e.toString())),"EXIT"}},t.isElementPositionedInsideElement=function(e,t){return e.getBoundingClientRect().top>=t.getBoundingClientRect().top&&e.getBoundingClientRect().left>=t.getBoundingClientRect().left&&e.getBoundingClientRect().right<=t.getBoundingClientRect().right&&e.getBoundingClientRect().bottom<=t.getBoundingClientRect().bottom},t.getWidgetElement=function(e){return T.verbose(this.sessionId),document.getElementById(e)},t.getPlayerDimensions=function(e,t,i,r,o){if(void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=!1),T.verbose(this.sessionId),o)return{width:e.clientWidth,height:e.clientHeight};var n=e.getBoundingClientRect();if(t){for(var s=t.getBoundingClientRect(),a={top:Math.min(n.top,s.top),bottom:Math.max(n.bottom,s.bottom),left:Math.min(n.left,s.left),right:Math.max(n.right,s.right)},d=0,l=c.getSiblingsBetweenRecs(e,t);d<l.length;d++){var p=l[d].getBoundingClientRect().bottom;p>a.bottom&&(a.bottom=p)}var u=a.right-a.left,h=a.bottom-a.top;return{width:u&&u>0?u:0,height:h&&h>0?h:0}}var g=i&&i<n.width?i:n.width;return{width:g,height:null==r||"horizontal"===r?Math.floor(9*g/16):Math.floor(16*g/9)}},t.getCoveredPlayerHeight=function(e,i,r,o){void 0===r&&(r=null),void 0===o&&(o=null);var n=null==o||"horizontal"===o?Math.floor(9*r/16):Math.floor(16*r/9);if(i.clientHeight<n)return i.clientHeight;for(var s=t.getWidgetElement(e.containerID),a=0,d=e.indexes;a<d.length;a++){var l=d[a],p=c.getSubtree(s).querySelector(".ob-recIdx-".concat(l-1)).getBoundingClientRect().bottom-i.getBoundingClientRect().top;if(p>n){n=p;break}}return n},t.getWidgetSetting=function(e,i,r){return T.verbose(this.sessionId),t.widgetProxy.getSet(e,i,r)},t.addBrandingStyle=function(e,t,i){T.verbose(this.sessionId);var r=document.createElement("style");r.innerHTML="#"+e+"videoBranding .ob_what{background:none !important; padding: 0 5px;}",r.innerHTML+="#".concat(e,t?"videoBranding{float:left;}":"videoBranding{float:right;}"),i?r.innerHTML+="#"+e+"videoBranding .ob_what{ padding-bottom: 5px; top: 5px; display: block;position: absolute; right: 2px;}":(r.innerHTML+="#"+e+"videoBranding .ob_what{ padding-top: 5px;}",c.isMobile()&&(r.innerHTML+="#"+e+"videoBranding .ob_what{top: auto;}")),document.body.appendChild(r)},t.addDefaultBrandingStyle=function(e,t,i){T.verbose(this.sessionId);var r=document.createElement("style"),o="".concat(e,"videoBranding");r.innerHTML="#".concat(o," .ob_logo:hover {background-position: center bottom !important;}"),i?(r.innerHTML+=t?"#"+e+"titleSrcWrapper{max-width:calc(100% - 190px); float: right;}":"",r.innerHTML+="#".concat(o,' .ob_what a:before {content: ""; vertical-align: baseline; background-image: url(https://widgets.outbrain.com/images/widgetIcons/achoice.svg); background-size: 75% 75%; width: 12px; height: 12px; padding-right: 4px; margin-right:4px; display: inline-block; background-repeat: no-repeat; background-position: left center; border-right: 1px solid #999;}')):(r.innerHTML+="#".concat(o,' .ob_what a:after {vertical-align: baseline; content:""; background-image: url(https://widgets.outbrain.com/images/widgetIcons/achoice.svg); background-size: 75% 75%; width: 12px; height: 12px; padding-left: 4px; display: inline-block; background-repeat: no-repeat; background-position: right center; border-left: 1px solid #999; }'),r.innerHTML+=t?"#"+e+"titleSrcWrapper{max-width:calc(100% - 190px); float: left;}":""),document.body.appendChild(r)},t.getVideoProviderWidgetSettings=function(i){try{T.verbose(this.sessionId);var r=t.getWidgetIndex(i),o=r?"outbrain_widget_"+r:"outbrain_widget_0",n=t.getWidgetElement(o),s=t.getGenericProviderSettings(i,o),a=t.getProvidersWaterfall(i),d=a&&a.length?a[0]:"",l=t.getWidgetSetting(i,"vidgetPlayerMaximalWidth",null),p={widget:i,widgetID:t.getWidgetId(i),reportedWidgetId:t.getReportedWidgetJSId(i,n),widgetIdx:r||0,isSmartFeed:t.isSmartFeed(n),isSmartFeedFather:t.isSmartFeedFather(n),pubID:t.getWidgetRequest(i,"pid",null),reqID:t.getWidgetRequest(i,"req_id",-1),pageViewId:t.getWidgetRequest(i,"pvId",""),containerID:o,docId:t.getWidgetRequest(i,"did",-1),sourceId:t.getWidgetRequest(i,"sid",null),lazyListingsPixel:t.getWidgetMeta(i,"lazyListingsPixel",null),datasrc:t.widgetProxy.getDataSrcFinalUrl?t.widgetProxy.getDataSrcFinalUrl(i):this.getDocUrl(n),parallelPlay:t.getWidgetSetting(i,"vidgetParallelPlay",e.AvoidInViewport),viewabiltyEventTime:t.getWidgetSetting(i,"vidgetViewabilityMinDuration",2),viewabilityPercentageThreshold:t.getWidgetSetting(i,"vidgetViewabilityPercentageThreshold",50),playerMaxWidth:this.getPlayerMaxWidth(l),playerOrientation:"horizontal",screenOrientation:this.getScreenOrientation(),playOnlyOnWifi:t.getWidgetSetting(i,"vidgetPlayOnlyOnWifi",!0),reportedSubWidgetId:t.getReportedSubWidgetId(i,n),ccpaPrivacy:t.getWidgetRequest(i,"ccpa",void 0),abTestVal:t.getAbTestVal(i,"abTestVal","no_abtest")||"void",obRecsAbtestAndVars:t.getWidgetRequest(i,"obRecsAbtestAndVars",void 0),isIframe:c.isIframe(),recsNumber:t.getWidgetRequest(i,"tcr",0),fAB:t.widgetProxy.getFeedFatherAB(i)?t.widgetProxy.getFeedFatherAB(i):"no_abtest",layeredTestInfo:t.getWidgetRequest(i,"layeredTestInfo",void 0),fid:t.getFeedFatherId(i,n),fIndex:t.getFeedFatherIndex(i,n),feedIdx:t.widgetProxy.getRequest(i,"feedIdx"),cardIdx:t.getCardIdx(i),stickyPlayer:t.getStickyPlayerType(i),brandingType:t.getWidgetSetting(i,"whatIsBrandingType","Amelia + copy"),isTopBranding:t.isTopBranding(n),titleHeight:21,adBlockStatus:"true"===t.widgetProxy.getAdBlockerStatus(),feedVersion:t.widgetProxy.getRequest(i,"feedVersion"),rtlWidget:this.isRTLWidget(n),onlyVideoWidget:0===t.getWidgetRequest(i,"tcr",0)||/odb_dynamic_video-reel/gi.test(t.getWidgetSetting(i,"recMode","")),odbVidTag:t.getWidgetRequest(i,"odb_vid_tag",void 0),externalCampaignId:t.getObExtId(i),externalCampaignId2:t.getObExtId2(i),featureFlag:t.getWidgetSetting(i,"vidgetFeatureFlag","GA"),vidgetOrientation:t.getWidgetSetting(i,"vidgetOrientation",E.Horizontal),nativeVideoMode:t.getWidgetSetting(i,"vidgetNativeVideo","never"),nativeVideoBtnPosition:t.getWidgetSetting(i,"nativeVideoBtnPosition","belowVideo"),nativeVideoLogoPosition:t.getWidgetSetting(i,"nativeVideoLogoPosition","belowVideo"),recMode:t.getWidgetSetting(i,"recMode",""),isVideoReel:/odb_dynamic_video-reel/gi.test(t.getWidgetSetting(i,"recMode","")),vidgetContentSource:t.getWidgetSetting(i,"VidgetContentSource","none"),reelsTransitionDuration:t.getWidgetSetting(i,"reelsTransitionDuration",20),maxOrganicRecs:t.getWidgetSetting(i,"maxOrganicVideos",5),isProviderControlledPauseOutOfView:!1,adLoaded:!1,displayAdMaxSize:t.getWidgetSetting(i,"displayAdSize",""),vidgetWaterfallOptimization:t.getWidgetSetting(i,"vidgetWaterfallOptimization",0),logLevel:t.getWidgetSetting(i,"vidgetLogLevel","INFO").toUpperCase(),vidgetPassBack:t.getWidgetSetting(i,"vidgetPassBack",null),vidgetPassBackTimeout:1e3*t.getWidgetSetting(i,"vidgetPassbackTimeout",60),configuredReloadTime:1e3*parseInt(t.getWidgetSetting(i,"vidgetReloadTime",4)),configuredReloadCount:t.getWidgetSetting(i,"vidgetReloadCount",3),actualReloadCount:t.getWidgetSetting(i,"vidgetReloadCount",3),vidgetCustomControls:this.isValidJson(t.getWidgetSetting(i,"vidgetCustomControls","")),vidgetNativeEndCard:t.getWidgetSetting(i,"VidgetNativeEndCard",!0),vidgetDeliveryMode:t.getWidgetSetting(i,"vidgetDeliveryMode","progressive"),playerLocation:t.getPlayerLocation(i),vidgetFootprint:t.getWidgetSetting(i,"vidgetFootprint","standard"),vidgetExternalMeasure:t.getWidgetSetting(i,"VidgetExternalMeasure",!1),firstAucationExceuted:!1,vidgetDynamicReloads:t.getWidgetSetting(i,"vidgetDynamicReloads",0),country:t.getWidgetRequest(i,"country",null),widgetPlatform:t.getWidgetRequest(i,"readerPlatform",null),odbChannelId:this.isValidJson(t.getWidgetRequest(i,"channelId",null)),publisherName:t.getWidgetRequest(i,"pubName",void 0),sellerJsonChain:{ver:"1.0",complete:1,nodes:[{asi:"outbrain.com",sid:t.getWidgetRequest(i,"schain","0000000000000000000000000000000000"),hp:1}]},dfpInfo:{isDfp:!1,dfpFrame:null,dfpOriginalHeight:null},playedReloadIndexes:[],optimizeLogicExcludeCount:{providers:R({},v),waterfallExcludeList:[],numberOfStrikes:2}};if(s.isReelWidget&&(s.closeButton=!1),p.isSyndicationAllowed=p.isVideoReel&&"syndication"===p.vidgetContentSource.toLowerCase(),"None"!==p.brandingType)if(this.isFeedBranding(i,n,p)||p.onlyVideoWidget)p.brandingTag='<div class="ob_what" style="text-align: right; direction: ltr; clear: both; ">\n\t\t<a href="https://www.outbrain.com/what-is/default/en" rel="nofollow" onclick="OBR.extern.callWhatIs(\'https://www.outbrain.com/what-is/default/en\',\'\',-1,-1,true ,null);return false" style="color: #999; font-size: 11px; font-family: arial; text-decoration: none;">Recommended by<span class="ob_logo" title="Outbrain - content marketing" style="background: url(https://widgets.outbrain.com/images/widgetIcons/ob_logo_67x12.png) no-repeat center top; width: 67px; height: 12px;vertical-align: baseline !important; display: inline-block; padding: 0 5px; box-sizing: content-box; -moz-box-sizing: content-box; -webkit-box-sizing: content-box;"></span></a></div>',this.addDefaultBrandingStyle(o+"_"+p.widgetID+"_",p.onlyVideoWidget,p.rtlWidget),this.addBrandingStyle(o+"_"+p.widgetID+"_",p.rtlWidget,p.isTopBranding);else{var u=c.getSubtree(n).querySelector(".ob_what");u&&(p.brandingTag=c.nodeToString(u),this.addBrandingStyle(o+"_"+p.widgetID+"_",p.rtlWidget,p.isTopBranding))}return R(R(R({},p),s),{providersWaterfall:a,provider:d})}catch(e){throw T.error(this.sessionId,"getVideoProviderWidgetSettings(): ".concat(this.defaultErrorMessage," - ").concat(e.toString())),"getVideoProviderWidgetSettings(): ".concat(this.defaultErrorMessage," - ").concat(e.toString())}},t.getPlayerLocation=function(e){switch(t.getWidgetSetting(e,"recMode","")){case"odb_dynamic_reel":return h.InWidget;case"odb_dynamic_video-reel":return h.AboveWidget;default:var i=t.isInTopOfFeedTest(e)&&t.isTopOfFeedVariant(e),r=t.getWidgetSetting(e,"placementType","footer");if(i&&"in-article"!==r)return h.AboveWidget;var o=t.getQueryString("obLocation"),n=t.getWidgetSetting(e,"vidgetPlayerLocation",h.InWidget);return o||n}},t.getObExtId=function(e){if(T.verbose(this.sessionId),t.widgetProxy&&t.widgetProxy.getExtId)try{return t.widgetProxy.getExtId(e)}catch(e){throw T.verbose(this.sessionId,"FAILURE",e.toString()),"*** Get OB_ExtId from widget proxy failed ***"}},t.getObExtId2=function(e){if(T.verbose(this.sessionId),t.widgetProxy&&t.widgetProxy.getExtId2)try{return t.widgetProxy.getExtId2(e)}catch(e){throw T.verbose(this.sessionId,"FAILURE",e.toString()),"*** Get OB_ExtId2 from widget proxy failed ***"}},t.isRTLWidget=function(e){T.verbose(this.sessionId);var t=c.getSubtree(e).querySelector(".ob-widget-items-container");return!!t&&"rtl"===window.getComputedStyle(t).getPropertyValue("direction")},t.isReelWidget=function(e){return/(odb_dynamic_reel|odb_dynamic_video-reel)/gi.test(t.getWidgetSetting(e,"recMode",""))},t.showOBBranding=function(e){T.verbose(this.sessionId);var t=c.getSubtree(this.getWidgetElement(e)).querySelector(" [id*=videoBranding] .ob_what");t&&(t.style.display="inline-block")},t.hideOBBranding=function(e){T.verbose(this.sessionId);var t=c.getSubtree(this.getWidgetElement(e)).querySelector(" [id*=videoBranding] .ob_what");t&&(t.style.display="none",t.style.whiteSpace="nowrap")},t.isTopBranding=function(e){T.verbose(this.sessionId);var t=c.getSubtree(e).querySelector(".ob_what");if(t&&!c.isMobile()){var i=document.defaultView.getComputedStyle(t);if(["absolute","static"].includes(i.getPropertyValue("position"))&&!["auto",null].includes(i.getPropertyValue("top")))return!0}return!1},t.isFeedBranding=function(e,i,r){try{T.verbose(this.sessionId);var o=i=c.getSubtree(i);if(r.isSmartFeed?o=t.getWidgetElement("outbrain_widget_"+this.getFeedFatherIndex(e,i)):r.isSmartFeedFather&&(o=i),o){var n=o.querySelector(".ob_what");if(n&&(n.querySelector(".ob_feed_logo")||n.querySelector(".ob_sfeed_logo")))return!0}return!1}catch(e){throw T.error(this.sessionId,"isFeedBranding(): ".concat(this.defaultErrorMessage," - ").concat(e.toString())),"EXIT"}},t.getDocUrl=function(e){T.verbose(this.sessionId);var t=e.getAttribute("data-src");if(t&&t.includes("http"))return t;var i=e.getAttribute("data-ob-contentUrl");if(i)return i;var r=e.getAttribute("data-ob-bundleUrl");if(r)return r;var o=e.getAttribute("data-ob-portalUrl");return o||window.location.href},t.getProvidersWaterfall=function(e){T.verbose(this.sessionId);var i=[],r=t.getWidgetSetting(e,"vidgetProvidersWaterfall",null),o=t.getWidgetSetting(e,"providersBalancing",null);if(r){if((i=r.split(",").map((function(e){return e.trim()})))&&i.length)return i}else if(o){try{o=O.JSON.parse(o)}catch(e){o={}}var n=c.performRandomWithBalance(o);if(n)return i.push(n),i}return i.push("Aniview","Vidazoo","OPA"),i},t.renamingPlayMode=function(e,t){switch(T.verbose(this.sessionId),t){case"in-view":return o.View;case"in-view-preload":return o.ViewPreload;case"auto-play":return o.Load;default:return g[e].playMode?g[e].playMode:o.Load}},t.prepareVidgetData=function(e){var i;try{i=JSON.parse(t.getWidgetSetting(e,"vidgetData","{}"))}catch(e){i={},T.error(this.sessionId,"Failed to parse vidgetData")}return i},t.getGenericProviderSettings=function(e,i){T.verbose(this.sessionId);var r={},o=this.prepareVidgetData(e);r.isTopOfFeedTestWithTOFVariants=t.isInTopOfFeedTest(e)&&t.isTopOfFeedVariant(e),r.isReelWidget=this.isReelWidget(e);var n=t.getWidgetSetting(e,"vidgetIndexes",null);if("0"===(n=/^([0-9]+(,[0-9]+)*)?$/.test(n)&&!r.isReelWidget?n:"1")){var s=t.getWidgetElement(i);n="0,".concat(c.getSubtree(s).querySelectorAll("[class*='ob-recIdx-']").length),r.coveredWidget=!0}var a=t.getWidgetSetting(e,"vidgetAdUnitType",null),d=0,l=0,p=Array.from(new Set(n.split(",")));p.length>=2&&p.sort(),n&&n.length&&(d=p.length&&parseInt(p[0])>0?parseInt(p[0])-1:0,l=p.length?parseInt(p[p.length-1])-1:0),r.firstIndex=d,r.lastIndex=l,r.indexes=p.length>1?Array.from({length:l-d+1},(function(e,t){return t+d+1+""})):p,r.pubDomain=document.location.hostname||document.location.href,r.ctaText=o.ctaText||"",r.instream=a&&"instream"===a,r.unMuteOnMouseEnter=void 0!==o.unMuteOnMouseEnter&&o.unMuteOnMouseEnter,r.closeButton=void 0===o.closeButton||o.closeButton,r.initialDelay=t.setInitialDelay(o,e),r.consoleLog=void 0!==o.consoleLog&&o.consoleLog,r.sliderPercentBottom=t.getSliderPercentBottom(o.sliderPercentBottom),r.providerPlayerReuse=void 0!==o.providerPlayerReuse&&o.providerPlayerReuse,r.sticky=t.getStickyPlayerSettings(o),r.avoidSliderWhenSmall=o.avoidSliderWhenSmall||-1/0,r.placementType=this.getPlacementType(o.stickyPlayer,t.getWidgetSetting(e,"placementType","footer")),r.specificAdvName=void 0!==o.specificAdvName?o.specificAdvName:void 0,r.ghostFixedSize=void 0!==o.ghostFixedSize&&o.ghostFixedSize,r.fillEvent=void 0!==o.fillEvent&&o.fillEvent,r.storeVast=void 0!==o.storeVast&&o.storeVast,r.vidgetContentSourceDemo=void 0!==o.vidgetContentSourceDemo&&o.vidgetContentSourceDemo,r.source=void 0!==o.source?o.source:void 0,r.title=void 0!==o.title?o.title:void 0,r.retries=void 0!==o.retries?o.retries:void 0,r.timeout=void 0!==o.timeout?o.timeout:void 0,r.contentProvider=void 0!==o.contentProvider?o.contentProvider:void 0,r.publisherId=o.publisherId||"58a5addb28a0612d3529bc5e",r.isTopOfFeedTestWithConfigTestVariant=r.isTopOfFeedTestWithTOFVariants&&t.isTopOfFeedConfigChange(e),r.errorLimit=r.isTopOfFeedTestWithTOFVariants?10:o.errorLimit||null,r.vastRetries=r.isTopOfFeedTestWithTOFVariants?1:o.vastRetries||null,r.midrollTime=r.isTopOfFeedTestWithTOFVariants?r.isTopOfFeedTestWithConfigTestVariant?3:4:o.midrollTime||null,r.maxRun=r.isTopOfFeedTestWithTOFVariants?r.isTopOfFeedTestWithConfigTestVariant?14:12:o.maxRun||null,r.abrexVariant=t.getAbrexVariantToReport(e),r.channelId=t.getQueryString("obChannelId")||o.channelId,r.playerId=o.playerId||"5ae0a5c0da5fdd00042f78f5",r.isReelWidget&&!o.playerId&&(r.playerId="600584ef43e5240004a62649"),r.userId=o.userId||"5a9ea5a0225f7d0004c70045",r.viPubId=o.viPubId,r.viChannelId=o.viChannelId,t.isInAppWidget(e)?t.setInAppWidgetConfig(r,o,e):r.inApp=!1,r.env=O.location.search.includes("vidgetEnv=test")?"TEST":"PROD",r.NativeVideoMaxStreamingDuration=void 0!==o.NativeVideoMaxStreamingDuration?parseInt(o.NativeVideoMaxStreamingDuration):30,r.opaDemoBidder=void 0!==o.opaDemoBidder?o.opaDemoBidder:void 0,r.workerBypass="boolean"==typeof o.workerBypass&&o.workerBypass,r.sliderBelowParent=o.sliderBelowParent||!1,r.gdprInt=this.getGdprOrLegit(e,o),r.header=void 0!==o.header?o.header:void 0,r.endCardDuration=void 0!==o.endCardDuration?o.endCardDuration:void 0,r.vidgetExternalImpressionPixels=t.getExternalImpressionPixels(e);var u=t.getWidgetSetting(e,"vidgetFeatureFlag","GA");return u.indexOf("n2vBackfillAfterEach")>-1?r.n2vBackfill="afterEach":u.indexOf("n2vBackfillAfterAll")>-1&&(r.n2vBackfill="afterAll"),r},t.getExternalImpressionPixels=function(e){var i=t.getWidgetSetting(e,"vidgetExternalImpressionPixels",void 0);return i?i.split(",").map((function(e){return e.trim()})):void 0},t.isInTopOfFeedTest=function(e){var i=!!t.widgetProxy.getFeedParentWidget(e),r="2"===t.widgetProxy.getRequest(e,"feedVersion");return!(!i||!r)},t.isTopOfFeedVariant=function(e){var i=t.getWidgetRequest(e,"obRecsAbtestAndVars","");return i&&(i.indexOf("888-3171")>-1||i.indexOf("888-3231")>-1)},t.getAbrexVariantToReport=function(e){var i=t.getWidgetRequest(e,"obRecsAbtestAndVars",null),r=t.isInTopOfFeedTest(e);if(i&&r){var o=i.split(",").filter((function(e){return e.indexOf("888-")>-1}));if(o&&o[0])return o[0]}return null},t.isTopOfFeedConfigChange=function(e){var i=t.getWidgetRequest(e,"obRecsAbtestAndVars","");return i&&i.indexOf("888-3231")>-1},t.isInAppWidget=function(e){var i="mobile-app-js-widget"===t.getWidgetSetting(e,"InstallationType","web-js-widget"),r=!1,o=t.getWidgetExtraParams(e);return o&&o.indexOf("inApp=true")>-1&&(r=!0),i||r},t.setInAppWidgetConfig=function(e,i,r){e.inApp=!0;var o=t.getWidgetExetrnalParamMap(r);if(e.inAppBridge=o&&"true"===o.inApp,e.appName=i.appName||o.appName||t.getWidgetRequest(r,"app_name",void 0),e.appCategory=i.appCategory||void 0,e.packageName=i.packageName||o.appBundle||t.getWidgetRequest(r,"app_id",void 0),e.bundleId=i.bundleId||o.appBundle||t.getWidgetRequest(r,"app_id",void 0),e.appStoreUrl=i.appStoreUrl||void 0,e.playStoreUrl=i.playStoreUrl||void 0,e.mobileUserId=t.getApiUserId(r),o.platform)e.platform=o.platform.toLowerCase();else{var n=navigator.userAgent;n.includes("iPhone")||n.includes("iPad")?e.platform="ios":n.includes("Android")&&(e.platform="android")}},t.getWidgetExetrnalParamMap=function(e){var i=t.getWidgetExtraParams(e),r={};return i&&i.split("&").reduce((function(e,t){var i=t.split("=");return e[i[0]]=i[1]?decodeURIComponent(i[1]):"",e}),r),r},t.setInitialDelay=function(e,i){T.verbose(this.sessionId);var r=t.getStickyPlayerType(i);return"none"!==r&&"regular"!==r?2e3:void 0!==e.initialDelay?1e3*parseInt(e.initialDelay):5e3},t.getSliderPercentBottom=function(e){return T.verbose(this.sessionId),void 0!==e?"".concat(Math.max(0,(e-17)%100),"%"):"2px"},t.getStickyPlayerType=function(e){return T.verbose(this.sessionId),t.getQueryString("obSticky")||t.getWidgetSetting(e,"vidgetActivateStickyPlayer","none").toString()},t.getCardIdx=function(e){return t.widgetProxy&&t.widgetProxy.getCardIdx?t.widgetProxy.getCardIdx(e):null},t.getStickyPlayerSettings=function(e){T.verbose(this.sessionId);return{sliderPosition:t.getSliderPosition(e.sliderPosition),sliderEntry:e.sliderEntry||"side",width:t.getStickyWidth(e.sliderWidthPercent,400),get height(){return Math.ceil(this.width/this.ratio)},ratio:16/9,widthDefault:400}},t.getSliderPosition=function(e){switch(e){case"left":return S.BottomLeft;case"top-right":return S.TopRight;case"top-left":return S.TopLeft;default:return S.BottomRight}},t.getPlayerMaxWidth=function(e){T.verbose(this.sessionId);var t={horizontal:null,vertical:null},i=this.isValidJson(e);return i&&isNaN(Number(e))?(isNaN(Number(i.horizontal))||0==i.horizontal||(t.horizontal=i.horizontal),isNaN(Number(i.vertical))||0==i.vertical||(t.vertical=i.vertical)):t.horizontal=isNaN(Number(e))||0==e?null:e,t},t.getScreenOrientation=function(){return O.matchMedia("(orientation: portrait)").matches?"vertical":"horizontal"},t.getPlacementType=function(e,t){return T.verbose(this.sessionId),"slider"===e||"sliderAlwaysRight"===e?"slider":/in-article|sidebar|in-feed|header/gi.test(t)?t:"footer"},t.getStickyWidth=function(e,t){return T.verbose(this.sessionId),e?Math.min(Math.max(e,50),250)*(t/100):t},t.isValidJson=function(e){try{return T.verbose(this.sessionId),JSON.parse(e)}catch(e){return}},t.getVidgetProviders=function(e){T.verbose(this.sessionId);var i=t.getWidgetSetting(e.widgetSettings.widget,"vidgetPlayMode",void 0);return this.buildProvidersSetting(e,i)},t.buildProvidersSetting=function(e,t){T.verbose(this.sessionId);for(var i=[],o=this.getVidegtPlayMode(t),n=function(t){var n={};n.name=r[t],n.name&&(n.playMode=o[n.name].playMode),n.appearanceCounter=i.filter((function(e){return e.name===n.name})).length,n.bidFloor=s.getBidFloor(e,n.name,n.appearanceCounter),n.name&&(n.pauseOutOfView=o[n.name].pauseOutOfView),n.name&&(n.iterations=o[n.name].iterations),i.push(n)},s=this,a=0,d=e.widgetSettings.providersWaterfall;a<d.length;a++){n(d[a])}return i.filter((function(e){return null!=e.name}))},t.getVidegtPlayMode=function(e){var i=t.getQueryString("playMode")?decodeURIComponent(t.getQueryString("playMode")):void 0,r=JSON.parse(JSON.stringify(g)),o=this.isValidJson(e);if(o&&Array.isArray(o)){var n=function(e){var t=i||(o.some((function(t){return t.name===e}))?o.find((function(t){return t.name===e})).playMode:void 0);r[e].playMode=s.renamingPlayMode(e,t),o.some((function(t){return t.name===e&&!0===t.pauseOutOfView}))&&(r[e].pauseOutOfView=!0),o.forEach((function(t){t.name===e&&t.iterations>1&&(r[e].iterations=t.iterations)}))},s=this;for(var a in r)n(a)}else if(i||o&&o.globalPlayMode){var d=i||o.globalPlayMode;for(var a in r)r[a].playMode=this.renamingPlayMode(a,d)}else void 0!==e&&T.error(this.sessionId,"Vidget Play Mode JSON not valid");return r},t.getBidFloor=function(e,i,o){return i!=r.OPA?null:+t.getWidgetSetting(e.widgetSettings.widget,"vidgetOPABidFloor","").split(",")[o]||null},t.getTimeoutSetting=function(e,t){T.verbose(this.sessionId);var i=void 0!==e.timeout?e.timeout:null;return i&&i.length&&((i=i.split(",").map((function(e){return e.trim()})))[0]==t||"All"==i[0])?1e3*parseInt(i[1]):2e4},t.getGdprOrLegit=function(e,i){T.verbose(this.sessionId);var r=t.getWidgetRequest(e,"gdpr",0);return 1==r&&"void"!=t.getWidgetRequest(e,"cnsnt","void")?1:"undefined"!==i.gdpr&&"legitimate"==i.gdpr?2:r},t.getQueryString=function(e){T.verbose(this.sessionId);var t=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(window.location.href);return t?t[1]:null},t.makeHandshake=function(e){T.verbose(this.sessionId),t.widgetProxy&&t.widgetProxy.makeHandshake&&t.widgetProxy.makeHandshake(e)},t.getWidgetId=function(e){return T.verbose(this.sessionId),t.getWidgetRequest(e,"widgetJsId",t.widgetProxy.getWidgetId(e))},t.getWidgetIndex=function(e){if(T.verbose(this.sessionId),t.widgetProxy.getWidgetIndex)return t.widgetProxy.getWidgetIndex(e)},t.getReportedWidgetJSId=function(e,i){T.verbose(this.sessionId);var r=t.getWidgetId(e);if(t.isSmartFeed(i)){var o=t.widgetProxy.getFeedParentWidget?t.widgetProxy.getFeedParentWidget(e):e;r=t.getWidgetId(o)}return r},t.getFeedFatherId=function(e,i){if(T.verbose(this.sessionId),t.isSmartFeed(i)){var r=t.widgetProxy.getFeedParentWidget?t.widgetProxy.getFeedParentWidget(e):e;return t.getWidgetRequest(r,"wnid",null)}return null},t.getFeedFatherIndex=function(e,i){if(T.verbose(this.sessionId),t.isSmartFeed(i)){var r=t.widgetProxy.getFeedParentWidget?t.widgetProxy.getFeedParentWidget(e):e;return t.getWidgetIndex(r)}return null},t.isSmartFeed=function(e){return T.verbose(this.sessionId),!(!e||!e.getAttribute("data-feed-idx")&&!e.getAttribute("data-card-idx"))},t.isSmartFeedFather=function(e){return T.verbose(this.sessionId),!!c.getSubtree(e).querySelector(".ob-widget[class*='ob-smartfeed']")||!!c.getSubtree(e).querySelector(".ob-widget[class*='ob-feed-layout']")},t.getReportedSubWidgetId=function(e,i){T.verbose(this.sessionId);var r=t.getWidgetId(e);return t.isSmartFeed(i)?r:null},t.getWidgetRequest=function(e,i,r){if(T.verbose(this.sessionId),t.widgetProxy.getRequest)return t.widgetProxy.getRequest(e,i,r)},t.getWidgetMeta=function(e,i,r){if(T.verbose(this.sessionId),t.widgetProxy&&"function"==typeof t.widgetProxy.getMeta)try{return t.widgetProxy.getMeta(e,i,r)}catch(e){throw"*** Get widget meta from widget proxy failed ***"}return null},t.getAbTestVal=function(e,i,r){T.verbose(this.sessionId);var o=t.widgetProxy.getFeedFatherAB;if(o.constructor===Function&&o(e)){var n=o(e);if(n&&n!==r){var s=this.getWidgetRequest(e,i,r).split("-")[1];return s?n+"-"+s:n}return n}return this.getWidgetRequest(e,i,r)},t.getApiUserId=function(e){if(T.verbose(this.sessionId),t.widgetProxy&&"function"==typeof t.widgetProxy.getUserId)try{return t.widgetProxy.getUserId(e)}catch(e){throw"*** Get Api user id from widget proxy failed ***"}return null},t.getWidgetExtraParams=function(e){if(t.widgetProxy&&"function"==typeof t.widgetProxy.getExtraParams)try{return t.widgetProxy.getExtraParams(e)}catch(e){throw"*** Get Widget extra params from widget proxy failed ***"}return null},t.shouldRetryValidationOnWidget=function(e){return e&&e.inAppBridge},t.shouldStartExecutionWithDelay=function(e){return e&&e.inAppBridge},t.isWidgetExistingOnPage=function(e){return!!c.getSubtree(t.getWidgetElement(e))},t.canVideoBeProvided=function(e){T.verbose(this.sessionId);var i=e.containerID,r=e.sourceId,o=c.getSubtree(t.getWidgetElement(i));if(!o||!r)return!1;if(e.inAppBridge&&o&&o.getBoundingClientRect&&o.getBoundingClientRect().width<t.minimalWidgetSize)return!1;var n=null;switch(e.playerLocation){case h.InWidget:var s=parseInt(e.firstIndex),a=parseInt(e.lastIndex),d=o.querySelector(".ob-recIdx-"+s),l=o.querySelector(".ob-recIdx-"+a);return d&&l;case h.AboveWidget:return n=o.querySelector(".ob-widget-items-container")||o.querySelector(".ob-widget");case h.BelowWidget:return(n=o.querySelectorAll(".ob-widget-items-container")||o.querySelectorAll(".ob-widget"))&&n.length;default:return!1}},t.stylePropertyValid=function(e,t){return T.verbose(this.sessionId),void 0!==t&&"object"!=typeof t&&"function"!=typeof t&&t.length>0&&t!=parseInt(t)},t.odbCall=function(e,t){T.verbose(this.sessionId),O.OBR.extern.callRecs(e,t)},t.setNewAuditSession=function(e){T.verbose(this.sessionId),this.sessionId=e},t.callWidgetCallback=function(e,t,i){e&&e[t]&&e[t](i)},t.widgetProxy=O.OB_PROXY||{},t.providerConfig={},t.defaultErrorMessage="Error in function that use the widget DOM element",t.playerDimensions=null,t.vidgetBottomMargin=10,t.minimalWidgetSize=75,t}(),k=_,D=function(){function e(e,t,i,r,o){this.extractVideoConfig(e,i,r),this.videoProviderConfig.provider=o.name,this.videoProviderConfig.playMode=o.playMode,this.videoProviderConfig.pauseOutOfView=o.pauseOutOfView,this.videoProviderConfig.bidFloor=o.bidFloor?o.bidFloor.toString():null,this.videoProviderConfig.isVideoRequestInView=null,this.videoProviderConfig.fallBackProviderId=null,this.updateExtraProviderSettings(),this.sessionId=t}return e.prototype.extractVideoConfig=function(e,t,i){this.videoProviderConfig=e,this.videoProviderConfig.providerIndex=t,this.videoProviderConfig.currentReload=i},e.prototype.updateCurrentReload=function(e){this.videoProviderConfig.currentReload=e},e.prototype.provide=function(e){},e.prototype.updateExtraProviderSettings=function(){this.videoProviderConfig.trafficType=7,this.videoProviderConfig.providerTimeout=k.getTimeoutSetting(this.videoProviderConfig,this.videoProviderConfig.provider)},e.prototype.isWidgetInView=function(){return c.elementInViewport(k.getWidgetElement(this.videoProviderConfig.containerID),0)},e}();!function(e){e.Never="never",e.AsOutstream="asOutstream",e.Allowed="allowed",e.Required="required"}(V||(V={})),function(e){e.Portrait="portrait",e.Landscape="landscape",e.Squared="squared"}(A||(A={}));var W;i(367);!function(e){e.AdLoaded="adLoaded",e.AdStarted="adStarted",e.AdCompleted="adCompleted"}(W||(W={}));var B=function(e,t){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},B(e,t)};function L(e,t){function i(){this.constructor=e}B(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function M(e){return"function"==typeof e}var N=!1,F={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;N=e},get useDeprecatedSynchronousErrorHandling(){return N}};function H(e){setTimeout((function(){throw e}),0)}var z={closed:!0,next:function(e){},error:function(e){if(F.useDeprecatedSynchronousErrorHandling)throw e;H(e)},complete:function(){}},U=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();var q=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),j=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var i,r=this,o=r._parentOrParents,n=r._ctorUnsubscribe,s=r._unsubscribe,a=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,o instanceof e)o.remove(this);else if(null!==o)for(var d=0;d<o.length;++d){o[d].remove(this)}if(M(s)){n&&(this._unsubscribe=void 0);try{s.call(this)}catch(e){t=e instanceof q?G(e.errors):[e]}}if(U(a)){d=-1;for(var l=a.length;++d<l;){var c=a[d];if(null!==(i=c)&&"object"==typeof i)try{c.unsubscribe()}catch(e){t=t||[],e instanceof q?t=t.concat(G(e.errors)):t.push(e)}}}if(t)throw new q(t)}},e.prototype.add=function(t){var i=t;if(!t)return e.EMPTY;switch(typeof t){case"function":i=new e(t);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof e)){var r=i;(i=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var o=i._parentOrParents;if(null===o)i._parentOrParents=this;else if(o instanceof e){if(o===this)return i;i._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return i;o.push(this)}var n=this._subscriptions;return null===n?this._subscriptions=[i]:n.push(i),i},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var i=t.indexOf(e);-1!==i&&t.splice(i,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function G(e){return e.reduce((function(e,t){return e.concat(t instanceof q?t.errors:t)}),[])}var J=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Q=function(e){function t(i,r,o){var n=e.call(this)||this;switch(n.syncErrorValue=null,n.syncErrorThrown=!1,n.syncErrorThrowable=!1,n.isStopped=!1,arguments.length){case 0:n.destination=z;break;case 1:if(!i){n.destination=z;break}if("object"==typeof i){i instanceof t?(n.syncErrorThrowable=i.syncErrorThrowable,n.destination=i,i.add(n)):(n.syncErrorThrowable=!0,n.destination=new X(n,i));break}default:n.syncErrorThrowable=!0,n.destination=new X(n,i,r,o)}return n}return L(t,e),t.prototype[J]=function(){return this},t.create=function(e,i,r){var o=new t(e,i,r);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(j),X=function(e){function t(t,i,r,o){var n,s=e.call(this)||this;s._parentSubscriber=t;var a=s;return M(i)?n=i:i&&(n=i.next,r=i.error,o=i.complete,i!==z&&(M((a=Object.create(i)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=n,s._error=r,s._complete=o,s}return L(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;F.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,i=F.useDeprecatedSynchronousErrorHandling;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):H(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;H(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var i=function(){return e._complete.call(e._context)};F.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),F.useDeprecatedSynchronousErrorHandling)throw e;H(e)}},t.prototype.__tryOrSetError=function(e,t,i){if(!F.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(t){return F.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(H(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Q);var Y=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function K(e){return e}function $(e){return 0===e.length?K:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Z=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var i=new e;return i.source=this,i.operator=t,i},e.prototype.subscribe=function(e,t,i){var r=this.operator,o=function(e,t,i){if(e){if(e instanceof Q)return e;if(e[J])return e[J]()}return e||t||i?new Q(e,t,i):new Q(z)}(e,t,i);if(r?o.add(r.call(o,this.source)):o.add(this.source||F.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),F.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){F.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,i=t.closed,r=t.destination,o=t.isStopped;if(i||o)return!1;e=r&&r instanceof Q?r:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var i=this;return new(t=ee(t))((function(t,r){var o;o=i.subscribe((function(t){try{e(t)}catch(e){r(e),o&&o.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[Y]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:$(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=ee(e))((function(e,i){var r;t.subscribe((function(e){return r=e}),(function(e){return i(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function ee(e){if(e||(e=F.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var te=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),ie=function(e){function t(t,i){var r=e.call(this)||this;return r.subject=t,r.subscriber=i,r.closed=!1,r}return L(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}},t}(j),re=function(e){function t(t){var i=e.call(this,t)||this;return i.destination=t,i}return L(t,e),t}(Q),oe=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return L(t,e),t.prototype[J]=function(){return new re(this)},t.prototype.lift=function(e){var t=new ne(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new te;if(!this.isStopped)for(var t=this.observers,i=t.length,r=t.slice(),o=0;o<i;o++)r[o].next(e)},t.prototype.error=function(e){if(this.closed)throw new te;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,i=t.length,r=t.slice(),o=0;o<i;o++)r[o].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new te;this.isStopped=!0;for(var e=this.observers,t=e.length,i=e.slice(),r=0;r<t;r++)i[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new te;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new te;return this.hasError?(e.error(this.thrownError),j.EMPTY):this.isStopped?(e.complete(),j.EMPTY):(this.observers.push(e),new ie(this,e))},t.prototype.asObservable=function(){var e=new Z;return e.source=this,e},t.create=function(e,t){return new ne(e,t)},t}(Z),ne=function(e){function t(t,i){var r=e.call(this)||this;return r.destination=t,r.source=i,r}return L(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):j.EMPTY},t}(oe),se=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.scheduler=t,r.work=i,r.pending=!1,r}return L(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,i){return void 0===i&&(i=0),setInterval(e.flush.bind(e,this),i)},t.prototype.recycleAsyncId=function(e,t,i){if(void 0===i&&(i=0),null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var i=!1,r=void 0;try{this.work(e)}catch(e){i=!0,r=!!e&&e||new Error(e)}if(i)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,i=t.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,i){return e.call(this)||this}return L(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(j)),ae=function(){function e(t,i){void 0===i&&(i=e.now),this.SchedulerAction=t,this.now=i}return e.prototype.schedule=function(e,t,i){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(i,t)},e.now=function(){return Date.now()},e}(),de=new(function(e){function t(i,r){void 0===r&&(r=ae.now);var o=e.call(this,i,(function(){return t.delegate&&t.delegate!==o?t.delegate.now():r()}))||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return L(t,e),t.prototype.schedule=function(i,r,o){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(i,r,o):e.prototype.schedule.call(this,i,r,o)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}},t}(ae))(se);var le=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new ce(e,this.dueTime,this.scheduler))},e}(),ce=function(e){function t(t,i,r){var o=e.call(this,t)||this;return o.dueTime=i,o.scheduler=r,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return L(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(pe,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(Q);function pe(e){e.debouncedNext()}var ue=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new he(e,this.compare,this.keySelector))},e}(),he=function(e){function t(t,i,r){var o=e.call(this,t)||this;return o.keySelector=r,o.hasKey=!1,"function"==typeof i&&(o.compare=i),o}return L(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t;try{var i=this.keySelector;t=i?i(e):e}catch(e){return this.destination.error(e)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(e){return this.destination.error(e)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))},t}(Q);function ge(e){return function(t){return t.lift(new ve(e))}}var ve=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new fe(e,this.callback))},e}(),fe=function(e){function t(t,i){var r=e.call(this,t)||this;return r.add(new j(i)),r}return L(t,e),t}(Q);function ye(){return function(e){return e.lift(new me(e))}}var me=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var i=this.connectable;i._refCount++;var r=new be(e,i),o=t.subscribe(r);return r.closed||(r.connection=i.connect()),o},e}(),be=function(e){function t(t,i){var r=e.call(this,t)||this;return r.connectable=i,r}return L(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var i=this.connection,r=e._connection;this.connection=null,!r||i&&r!==i||r.unsubscribe()}}else this.connection=null},t}(Q),Ce=function(e){function t(t,i){var r=e.call(this)||this;return r.source=t,r.subjectFactory=i,r._refCount=0,r._isComplete=!1,r}return L(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new j).add(this.source.subscribe(new Pe(this.getSubject(),this))),e.closed&&(this._connection=null,e=j.EMPTY)),e},t.prototype.refCount=function(){return ye()(this)},t}(Z),we=function(){var e=Ce.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),Pe=function(e){function t(t,i){var r=e.call(this,t)||this;return r.connectable=i,r}return L(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(re);var Ie,Ee=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var i=this.selector,r=this.subjectFactory(),o=i(r).subscribe(e);return o.add(t.subscribe(r)),o},e}();function Se(){return new oe}function xe(){return function(e){return ye()((t=Se,function(e){var r;if(r="function"==typeof t?t:function(){return t},"function"==typeof i)return e.lift(new Ee(r,i));var o=Object.create(e,we);return o.source=e,o.subjectFactory=r,o})(e));var t,i}}!function(e){e[e.outOfView=0]="outOfView",e[e.inView=1]="inView"}(Ie||(Ie={}));var Te,Ve=function(){function e(){}return e.elementInViewChange=function(t,i){if(!window.IntersectionObserver)return new oe;var r,o,n,s,a=new oe,d=new oe,l=new IntersectionObserver((function(e){d.next(e)}),{root:null,rootMargin:"0px",threshold:isNaN(i.threshold)?1:i.threshold});return l.observe(t),d.pipe((n=i.debounce||e.debounceTime,void 0===s&&(s=de),function(e){return e.lift(new le(n,s))}),(r=function(e,t){return e[0].isIntersecting===t[0].isIntersecting},function(e){return e.lift(new ue(r,o))})).subscribe((function(e){a.next(e[0].isIntersecting?Ie.inView:Ie.outOfView)})),a.pipe(ge((function(){d.unsubscribe(),l.disconnect()})),xe())},e.measureViewability=function(e,t){if(!window.IntersectionObserver)return new oe;var i,r=new oe,o=new IntersectionObserver((function(e){e[0].isIntersecting?i=setTimeout((function(){!function(e,t){e.disconnect(),r.next(t.intersectionRatio)}(o,e[0])}),t.timeInMilliseconds):i&&clearTimeout(i)}),{root:null,rootMargin:"0px",threshold:t.threshold||1});return o.observe(e),r.pipe(ge((function(){i&&clearTimeout(i),null==o||o.disconnect()})),xe())},e.debounceTime=500,e}();!function(e){e.None="none",e.Regular="regular",e.Slider="slider",e.SliderAlwaysRight="sliderAlwaysRight",e.NoScroll="noScroll"}(Te||(Te={}));var Ae,Re,Oe,_e=function(){function e(){}return e.addReportUtil=function(t,i,r){return new Promise((function(o,n){if(e.shouldNotDisplayReport(i))return n();var s=document.createElement("div");s.classList.add("ob-vidget-report-dialog-wrapper"),s.innerHTML='\n    <div class="ob-vidget-report-dialog-inner-content-wrapper">\n        <div class="vidget-material-icons ob-vidget-report-dialog-close">close</div>\n        <div class="ob-vidget-report-dialog-form-container">\n            <div class="ob-vidget-report-dialog-title">I would like to report<br>   a video issue related to:</div>\n            <div class="ob-vidget-report-dialog-buttons-wrapper">\n               <button class="ob-btn-ghost" value="visual">Visual</button>\n               <button class="ob-btn-ghost" value="audio">Audio</button>\n               <button class="ob-btn-ghost" value="offensive">Offensive</button>\n               <button class="ob-btn-ghost" value="irrelevant">Irrelevant</button>\n               <button class="ob-btn-ghost" value="repetitive">Repetitive</button>\n               <button class="ob-btn-ghost" value="other">Other</button>\n            </div>\n        </div>\n        <div class="ob-vidget-report-dialog-confirm">Thank you for your feedback</div>\n    </div>\n';var a=document.createElement("div");a.classList.add("ob-vidget-report-icon-wrapper"),a.innerHTML='\n        <span class="vidget-material-icons ob-vidget-report-icon-icon">info</span>\n        <div class="ob-vidget-report-icon-text">Report video</div>\n',t.appendChild(s),t.appendChild(a),e.handleReportDialogSize(i,s),e.handleReportDialogBehavior(s,a,o),a.addEventListener("click",(function(){e.showReportDialog(r,i,s)}),!1)}))},e.shouldNotDisplayReport=function(e){var t=e.getPlayerWidth();return e.getPlayerHeight()<150||t<305||c.isIE()>0},e.handleReportDialogSize=function(e,t){var i=e.getPlayerWidth();(e.getPlayerHeight()<205||i<350)&&t.classList.add("tiny")},e.showReportDialog=function(e,i,r){T.sendAudit(e,t.ReportClick,"",w.INFO,{}),i.pause(),r.classList.add("ob-vidget-dialog-visible")},e.hideReportDialog=function(e){e.classList.remove("ob-vidget-dialog-visible"),e.classList.remove("ob-vidget-dialog-confirm")},e.destroyReportUtil=function(e,t){e.remove(),t.remove()},e.showConfirmation=function(e){e.classList.add("ob-vidget-dialog-confirm")},e.handleReportDialogBehavior=function(t,i,r){var o=t.querySelectorAll("button"),n=t.querySelector(".ob-vidget-report-dialog-close"),s=t.querySelector(".ob-vidget-report-dialog-inner-content-wrapper"),a=t;o.forEach((function(o){o.addEventListener("click",(function(n){n.stopPropagation(),e.handleButtonClick(o,t,i,r)}),{once:!0})})),s.addEventListener("click",(function(e){e.stopPropagation()}),!1),n.addEventListener("click",(function(){e.hideReportDialog(t)}),!1),a.addEventListener("click",(function(){e.hideReportDialog(t)}),!1)},e.handleButtonClick=function(t,i,r,o){e.sendReport(t.value,o),e.showConfirmation(i),window.setTimeout((function(){e.destroyReportUtil(i,r)}),2e3)},e.sendReport=function(e,t){t(e)},e}();!function(e){e[e.None=0]="None",e[e.ByHover=1]="ByHover",e[e.ByUser=2]="ByUser"}(Ae||(Ae={})),function(e){e[e.Lazy=0]="Lazy",e[e.Eager=1]="Eager",e[e.Override=2]="Override",e[e.NoScroll=3]="NoScroll"}(Re||(Re={})),function(e){e.Sideways="sideways",e.TopDown="top-down",e.BottomUp="bottom-up"}(Oe||(Oe={}));var ke,De,We,Be,Le,Me=function(){return Me=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Me.apply(this,arguments)},Ne=function(){function e(t,i,r){if(this.widgetElement=t,this.sliderSettings=i,this.onSliderChangesCallback=r,this._isSliderActive=!1,this.originalWidgetProps={},this.sliderTrackingFunction=this.slideToPlace.bind(this),this.sliderChanges={isSliderHidden:void 0,isSliderActive:void 0,width:void 0,height:void 0},i.sliderMode!==Re.Override)if(i.sliderMode!==Re.NoScroll)if(c.elementInViewport(this.widgetElement,100*e.viewPortObserverSettings.threshold))this.widgetInViewPort();else{var o=this.widgetElement;this.sliderSettings.sliderMode===Re.Eager&&(this.switchToSliderMode(!0),o=this.placeholderElement),this.widgetOutOfViewPort(o)}else this.handleNoScrollBehavior();else this.switchToSliderMode(!0)}return e.convertToPx=function(e){return e+"px"},e.getSliderDimension=function(e){return"function"==typeof e?e():e},e.calcMarginInPx=function(e,t){return t.endsWith("%")?parseFloat(t.slice(0,-1))/100*e:t.endsWith("px")?parseInt(t.slice(0,-2)):void 0},e.getInnerDimensions=function(e){var t=getComputedStyle(e),i=e.clientHeight-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom);return{elementWidth:e.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight),elementHeight:i}},Object.defineProperty(e.prototype,"isSliderActive",{get:function(){return this._isSliderActive},enumerable:!1,configurable:!0}),e.prototype.destroySlider=function(){var t=this;return new Promise((function(i){var r,o,n,s;null===(r=t.inViewSubscription)||void 0===r||r.unsubscribe(),null===(o=t.outOfViewSubscription)||void 0===o||o.unsubscribe(),null===(n=t.placeholderElement)||void 0===n||n.remove(),window.removeEventListener("resize",t.sliderTrackingFunction),null===(s=t.scrollEventListenerController)||void 0===s||s.abort(),t._isSliderActive?(t.handleEntry(),setTimeout(i,e.transitionDuration)):i()}))},e.prototype.widgetOutOfViewPort=function(t){var i=this;this.outOfViewSubscription=Ve.elementInViewChange(t,e.viewPortObserverSettings).subscribe((function(e){e===Ie.inView&&(i.outOfViewSubscription.unsubscribe(),i._isSliderActive&&i.switchToPlayerMode(),i.widgetInViewPort())}))},e.prototype.widgetInViewPort=function(){var t=this;this.inViewSubscription=Ve.elementInViewChange(this.widgetElement,e.viewPortObserverSettings).subscribe((function(e){e===Ie.outOfView&&(t.inViewSubscription.unsubscribe(),t._isSliderActive||t.switchToSliderMode(!1),t.widgetOutOfViewPort(t.placeholderElement))}))},e.prototype.trackToPosition=function(e,t){var i=new AbortController;t(),window.addEventListener("scroll",t,{signal:i.signal}),setTimeout((function(){i.abort()}),e)},e.prototype.switchToPlayerMode=function(){var t=this;this.sliderSettings.sliderClassname&&this.widgetElement.classList.remove(this.sliderSettings.sliderClassname),this.trackToPosition(e.transitionDuration,(function(){var i=t.placeholderElement.getBoundingClientRect();t.widgetElement.style.top=e.convertToPx(i.y),t.widgetElement.style.left=e.convertToPx(i.x)})),this._isSliderActive=!1,this.trackResize(!1);var i=e.getInnerDimensions(this.placeholderElement),r=i.elementWidth,o=i.elementHeight;this.widgetElement.style.width=r+"px",this.widgetElement.style.height=o+"px",this.notifySliderChange({isSliderActive:this.isSliderActive,height:o,width:r}),setTimeout((function(){t.placeholderElement.remove(),e.widgetRestoredProperties.forEach((function(e){t.widgetElement.style[e]=t.originalWidgetProps[e]}))}),e.transitionDuration)},e.prototype.switchToSliderMode=function(e){this.createPlaceholderElement(),this.widgetElement.insertAdjacentElement("afterend",this.placeholderElement),this.sliderSettings.sliderClassname&&this.widgetElement.classList.add(this.sliderSettings.sliderClassname),this.showSlider(e),this.trackResize(!0)},e.prototype.showSlider=function(t){if(!t){var i=this.placeholderElement.getBoundingClientRect();this.widgetElement.style.top=e.convertToPx(i.y),this.widgetElement.style.left=e.convertToPx(i.x)}this.widgetElement.style.transition="none",this.widgetElement.style.position="fixed",this.startSliderTransition(t),this.notifySliderChange({isSliderActive:this.isSliderActive,isSliderHidden:!1,height:e.getSliderDimension(this.sliderSettings.sliderHeight),width:e.getSliderDimension(this.sliderSettings.sliderWidth)})},e.prototype.createPlaceholderElement=function(){var t=this;this.placeholderElement=document.createElement("div"),this.sliderSettings.sliderMode!==Re.Override&&this.sliderSettings.sliderMode!==Re.NoScroll&&e.widgetPropsToCopyToPlaceholder.forEach((function(e){t.placeholderElement.style[e]=t.widgetElement.style[e]})),e.widgetRestoredProperties.forEach((function(e){t.originalWidgetProps[e]=t.widgetElement.style[e]})),this.sliderSettings.placeholderClassname&&this.placeholderElement.classList.add(this.sliderSettings.placeholderClassname)},e.prototype.startSliderTransition=function(e){e&&this.handleEntry(),this.slideToPlace()},e.prototype.handleEntry=function(){var e=this.calcHorizontalVerticalMargin(),t=e.horizontalMargin,i=e.verticalMargin;Oe.Sideways===this.sliderSettings.sliderEntry?this.setSidewaysEntry(i):this.setVerticalEntry(t)},e.prototype.setSidewaysEntry=function(t){switch(this.sliderSettings.sliderPosition){case S.TopLeft:this.widgetElement.style.top=e.convertToPx(t),this.widgetElement.style.left=e.convertToPx(-e.getSliderDimension(this.sliderSettings.sliderWidth));break;case S.BottomLeft:this.widgetElement.style.top=e.convertToPx(window.innerHeight-e.getSliderDimension(this.sliderSettings.sliderHeight)-t),this.widgetElement.style.left=e.convertToPx(-e.getSliderDimension(this.sliderSettings.sliderWidth));break;case S.TopRight:this.widgetElement.style.top=e.convertToPx(t),this.widgetElement.style.left=e.convertToPx(window.document.documentElement.clientWidth);break;case S.BottomRight:default:this.widgetElement.style.top=e.convertToPx(window.innerHeight-e.getSliderDimension(this.sliderSettings.sliderHeight)-t),this.widgetElement.style.left=e.convertToPx(window.document.documentElement.clientWidth)}},e.prototype.setVerticalEntry=function(t){switch(Oe.BottomUp===this.sliderSettings.sliderEntry?this.widgetElement.style.top=e.convertToPx(window.innerHeight):Oe.TopDown===this.sliderSettings.sliderEntry&&(this.widgetElement.style.top=e.convertToPx(-e.getSliderDimension(this.sliderSettings.sliderHeight))),this.sliderSettings.sliderPosition){case S.TopLeft:case S.BottomLeft:this.widgetElement.style.left=e.convertToPx(t);break;case S.TopRight:case S.BottomRight:default:this.widgetElement.style.left=e.convertToPx(window.document.documentElement.clientWidth-e.getSliderDimension(this.sliderSettings.sliderWidth)-t)}},e.prototype.slideToPlace=function(){var t=this.calcHorizontalVerticalMargin(),i=t.horizontalMargin,r=t.verticalMargin;switch(this.widgetElement.style.transitionProperty="top, left, width, height",this.widgetElement.style.transitionDuration="".concat(e.transitionDuration,"ms"),this.widgetElement.style.width=e.convertToPx(e.getSliderDimension(this.sliderSettings.sliderWidth)),this.widgetElement.style.height=e.convertToPx(e.getSliderDimension(e.getSliderDimension(this.sliderSettings.sliderHeight))),this._isSliderActive=!0,this.sliderSettings.sliderPosition){case S.TopLeft:this.widgetElement.style.top=e.convertToPx(r),this.widgetElement.style.left=e.convertToPx(i);break;case S.TopRight:this.widgetElement.style.top=e.convertToPx(r),this.widgetElement.style.left=e.convertToPx(window.document.documentElement.clientWidth-e.getSliderDimension(this.sliderSettings.sliderWidth)-i);break;case S.BottomLeft:this.widgetElement.style.top=e.convertToPx(window.innerHeight-e.getSliderDimension(this.sliderSettings.sliderHeight)-r),this.widgetElement.style.left=e.convertToPx(i);break;case S.BottomRight:default:this.widgetElement.style.top=e.convertToPx(window.innerHeight-e.getSliderDimension(this.sliderSettings.sliderHeight)-r),this.widgetElement.style.left=e.convertToPx(window.document.documentElement.clientWidth-e.getSliderDimension(this.sliderSettings.sliderWidth)-i)}},e.prototype.trackResize=function(e){e?window.addEventListener("resize",this.sliderTrackingFunction):window.removeEventListener("resize",this.sliderTrackingFunction)},e.prototype.notifySliderChange=function(e){if(this.onSliderChangesCallback){var t=Me(Me({},this.sliderChanges),e);this.onSliderChangesCallback({prev:this.sliderChanges,next:t}),this.sliderChanges=t}},e.prototype.handleNoScrollBehavior=function(){var t=this;this.switchToSliderMode(!0),this.scrollEventListenerController=new AbortController;var i,r=!0;window.addEventListener("scroll",(function(){r&&(r=!1,t.hideSlider()),window.clearTimeout(i),i=setTimeout((function(){r=!0,t.showSlider(!0)}),e.sliderNoScrollTimeout)}),{signal:this.scrollEventListenerController.signal})},e.prototype.hideSlider=function(){this.handleEntry(),this.notifySliderChange({isSliderHidden:!0})},e.prototype.calcHorizontalVerticalMargin=function(){return{horizontalMargin:this.sliderSettings.horizontalMargin?e.calcMarginInPx(window.document.documentElement.clientWidth,this.sliderSettings.horizontalMargin):0,verticalMargin:this.sliderSettings.verticalMargin?e.calcMarginInPx(window.innerHeight,this.sliderSettings.verticalMargin):0}},e.transitionDuration=400,e.viewPortObserverSettings={threshold:.4,debounce:100},e.sliderNoScrollTimeout=1e3+e.transitionDuration,e.widgetPropsToCopyToPlaceholder=["marginTop","marginBottom","marginLeft","marginRight","paddingBottom","paddingTop","paddingLeft","paddingRight","height","width","top","left","position"],e.widgetRestoredProperties=["top","left","position","transition"],e}(),Fe=Ne,He=function(){return He=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},He.apply(this,arguments)},ze=function(e,t,i,r){return new(i||(i=Promise))((function(o,n){function s(e){try{d(r.next(e))}catch(e){n(e)}}function a(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((r=r.apply(e,t||[])).next())}))},Ue=function(e,t){var i,r,o,n,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(o=2&n[0]?r.return:n[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,n[1])).done)return o;switch(r=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],r=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}},qe=function(){function e(e,t,i,o){void 0===i&&(i=null),void 0===o&&(o=null),this.isMobile=!1,this.playerHeight=0,this.playerWrapperHeight=0,this.isInstream=!1,this.playerPlay=!1,this.widgetElementsHidden=!1,this.playerVisibleFirstTime=!0,this.playerDescriptionHeight=0,this.playerBrandingHeight=0,this.cancelProviderTimeoutDuration=null,this.rejectProviderTimeout=null,this.pauseOutOfViewPortTimeout=null,this.viewabiltyEventInterval=null,this.viewabiltyEventTime=null,this.viewabilityPercentageThreshold=0,this.adPaused=!1,this.internalPause=!1,this.isPlayerOutOfViewport=!1,this.streamingInterval=0,this.streamingQuartile=0,this.streamingTimePassed=0,this.handleStreamingEvent=0,this.bitrateInterval=0,this.isPlayCanBeCalledViewable=!1,this.activeCompletionTimeMillis=3e4,this.totalPlayDuration=0,this.shouldPlayerAllowUiTransition=!0,this.playerInViewportObserver=null,this.activeViewabilityObserver=null,this.playerInViewportObserverSettings={debounce:500,threshold:.5},this.isSkipButtonPressed=!1,this.volumeInteraction=Ae.None,this.vidgetSoundOnHover=!1,this.passbackTimeout=null,this.providerConfig=e,this.sessionId=t,this.playerIdsPrefix=e.containerID+"_"+e.widgetID+"_",this.playerWrapperElementId=this.playerIdsPrefix+"playerWrapper",this.noVideoCallback=i,this.videoPlayCallback=o,this.viewabiltyEventTime=this.providerConfig.provider===r.OPAdisplay?1e3:1e3*this.providerConfig.viewabiltyEventTime,this.viewabilityPercentageThreshold=this.providerConfig.provider===r.OPAdisplay?50:this.providerConfig.viewabilityPercentageThreshold,this.cancelProviderTimeoutDuration=this.providerConfig.providerTimeout,this.isMobile=c.isMobile(),this.stickyPlayer=this.providerConfig.stickyPlayer,this.streamingQuartile=this.providerConfig.NativeVideoMaxStreamingDuration/4,this.vidgetSoundOnHover="vidgetSoundOnHover"===e.featureFlag,this.providerConfig.vidgetPassBack&&this.setPassbackTimeout()}return e.prototype.setPassbackTimeout=function(){var e=this;this.passbackTimeout=window.setTimeout((function(){e.videoPlayCallback&&(e.clearResources(),e.destroyPlayer(),e.playerElement.parentNode.removeChild(e.playerElement),e.videoPlayCallback({passbackTimeout:!0}))}),this.providerConfig.vidgetPassBackTimeout)},e.prototype.getPlayerWrapperElementId=function(){return this.playerWrapperElementId},e.prototype.getPlayerContainerId=function(){return""},e.prototype.destroyPlayer=function(){this.player&&this.player.destroy&&this.player.destroy()},e.prototype.getPlayer=function(){return this.player},e.prototype.getAdCurrentTime=function(){return 0},e.prototype.isValidEvent=function(e){return c.enumHasValue(this.playerEvents,e)},e.prototype.onEvent=function(e){var i=this,r=function(t){void 0===t&&(t={}),i.audit(He({eventType:e,videoProgress:Math.round(i.getAdCurrentTime()/1e3),viewability:i.getCurrentViewability()},t))};switch(e){case t.Click:r({consentData:this.providerConfig.loglevel.level>=1?k.getConsentData(this.providerConfig):void 0});break;case t.Unmute:r({description:this.vidgetSoundOnHover&&this.volumeInteraction===Ae.ByHover?"unmute by hover":void 0});break;case t.Mute:var o={};this.vidgetSoundOnHover&&(this.volumeInteraction===Ae.ByHover?this.volumeInteraction=Ae.ByUser:this.volumeInteraction===Ae.None&&(o.description="mute by focusout")),r(o);break;default:r()}},e.prototype.registerEvents=function(){try{this.registerEvent("onPlay",this.onPlay.bind(this)),this.registerEvent("onLoad",this.onLoad.bind(this)),this.registerEvent("onPause",this.onPause.bind(this)),this.registerEvent("onResume",this.onResume.bind(this)),this.registerEvent("onClose",this.onClose.bind(this)),this.providerConfig.loglevel.level>=1&&(this.registerEvent("onPlay25",this.onEvent.bind(this,t.FirstQuartile)),this.registerEvent("onPlay50",this.onEvent.bind(this,t.SecondQuartile)),this.registerEvent("onPlay75",this.onEvent.bind(this,t.ThirdQuartile))),this.registerEvent("onPlay100",this.onPlay100.bind(this)),this.registerEvent("onSkip",this.hidePlayer.bind(this)),this.registerEvent("onClick",this.onEvent.bind(this,t.Click)),this.registerEvent("onError",this.onError.bind(this)),this.registerEvent("onPlayerError",this.onOPAError.bind(this)),this.registerEvent("onNoAd",this.onNoAd.bind(this)),this.registerEvent("onMute",this.onEvent.bind(this,t.Mute)),this.registerEvent("onUnmute",this.onEvent.bind(this,t.Unmute)),this.registerEvent("onPixelFired",this.onPrintEventTracker.bind(this)),this.registerEvent("onJsTrackerAdded",this.onPrintEventTracker.bind(this)),this.vidgetSoundOnHover&&this.handleMuteOnMouseEnter()}catch(e){console.log(e)}},e.prototype.onError=function(e){var t=this,i=e;e instanceof CustomEvent&&(i=e.detail),"providerPlayerReuse"===this.providerConfig.featureFlag&&this.providerConfig.provider===r.Vidazoo&&this.isSkipButtonPressed||this.isInstream||(this.providerConfig.lazyListingsPixel&&((new Image).src=this.providerConfig.lazyListingsPixel),this.slider?this.slider.destroySlider().then((function(){t.closePlayerNoAd(i)})):this.closePlayerNoAd(i))},e.prototype.onOPAError=function(e){if(e&&e.detail&&e.detail.message){var i=e.detail.message;e.detail.canContinuePlay||/^Warning/.test(e.detail.message)?this.audit({eventType:t.Error,description:i}):this.closePlayerOnOPAError(i)}else this.closePlayerOnOPAError()},e.prototype.closePlayerOnOPAError=function(e){var t=this;this.slider?this.slider.destroySlider().then((function(){t.closePlayerVideoRejected(e)})):this.closePlayerVideoRejected(e)},e.prototype.onNoAd=function(){this.closePlayerNoAd()},e.prototype.onPause=function(){"streaming"===this.playerConfig.deliveryMode&&0===this.handleStreamingEvent?(this.adPaused=!1,this.handleStreamingEvent++):(this.adPaused=!0,this.audit({eventType:t.Pause,description:this.internalPause?"paused OutOfView":"",viewability:this.getCurrentViewability()})),this.pausePlayDurationMeasurment(),this.activeViewabilityObserver&&this.activeViewabilityObserver.unsubscribe()},e.prototype.pausePlayDurationMeasurment=function(){window.clearTimeout(this.playDurationMeasurmentTimeout),this.playDurationMeasurmentTimeout=null,this.totalPlayDuration=(new Date).getTime()-this.videoPlayStartTime},e.prototype.onResume=function(){this.adPaused=!1,this.audit({eventType:t.Resume,viewability:this.getCurrentViewability()}),this.startVideoPlayDurationMeasurment(),this.isPlayCanBeCalledViewable||this.startViewabilityInterval()},e.prototype.pauseProvider=function(){this.destroyPlayer()},e.prototype.resumeProvider=function(){},e.prototype.pausePlayer=function(){},e.prototype.resumePlayer=function(){},e.prototype.loadAd=function(){return Promise.resolve()},e.prototype.playLoadedAd=function(){},e.prototype.onClose=function(e){void 0===e&&(e=!0),this.hidePlayer(e),k.callWidgetCallback(this.providerConfig.callbacks,"onClose",this.providerConfig.widgetIdx),k.callWidgetCallback(this.providerConfig.callbacks,"onOrganicClose",this.providerConfig.widgetIdx)},e.prototype.registerEvent=function(e,t){},e.prototype.getPlayerWidth=function(){return this.playerElement.clientWidth},e.prototype.getPlayerHeight=function(){return this.playerHeight},e.prototype.buildHeaderHTML=function(){var e,t,i=null,r="";if("string"==typeof this.providerConfig.header)e=this.providerConfig.header,t="inherit",r+='<div id="'.concat(this.playerIdsPrefix,'headerWrapper" class="ob_vid_header" >').concat(e,"</div>");else{var o=this.playerElement.closest(".ob-widget-section");o&&(i=o.getElementsByClassName("ob-widget-header")[0])&&(e=i.textContent,t=window.getComputedStyle(i,null).getPropertyValue("font-family"),r+='<div id="'.concat(this.playerIdsPrefix,'headerWrapper" class="ob_vid_header">').concat(e,"</div>"))}this.providerConfig.brandingTag&&this.providerConfig.isTopBranding&&(r=r+'<div id="'+this.playerIdsPrefix+'videoBranding">'+this.providerConfig.brandingTag+"</div>");var n=this.providerConfig.widgetID+"_ob_vid_hd";if(!document.querySelector("#"+n)){var s=document.createElement("style"),a=t?"font-family:".concat(t):"";s.innerHTML=".ob_vid_header {display:none; ".concat(a,"}"),s.id=n,document.body.appendChild(s)}return r},e.prototype.buildDescriptionHTML=function(){var e="";return(this.providerConfig.title||this.providerConfig.source)&&(e=e+'<div id="'+this.playerIdsPrefix+'titleSrcWrapper">'),this.providerConfig.title&&(e=e+'<div id="'+this.getTitleElementId()+'"><span class="titleStrWrap" style="display: inline-block">'+this.providerConfig.title+"</span></div>"),this.providerConfig.source&&(e=e+'<div id="'+this.playerIdsPrefix+'videoSource"><span class="srcStrWrap" style="display: inline-block">'+this.providerConfig.source+"</span></div>"),(this.providerConfig.title||this.providerConfig.source)&&(e+="</div>"),this.providerConfig.brandingTag&&!this.providerConfig.isTopBranding&&(e=e+'<div id="'+this.playerIdsPrefix+'videoBranding">'+this.providerConfig.brandingTag+"</div>"),e},e.prototype.getTitleElementId=function(){return"".concat(this.playerIdsPrefix,"videoTitle")},e.prototype.handleVideoDescription=function(){var e=0,t=0,i=0,o=this.playerElement.querySelector("#"+this.playerIdsPrefix+"videoSource"),n=this.playerElement.querySelector("#"+this.playerIdsPrefix+"videoTitle"),s=this.playerElement.querySelector("#"+this.playerIdsPrefix+"videoBranding .ob_what"),a=this.providerConfig.title||!1,d=this.providerConfig.source||!1;if(this.playerHeight=parseInt(this.playerElement.style.height.split("px")[0]),k.isEmptyWidget(this.providerConfig.containerID)||!a&&!d)k.isEmptyWidget(this.providerConfig.containerID)&&(a&&(e=parseInt(window.getComputedStyle(n,null).getPropertyValue("height"))),d&&(t=parseInt(window.getComputedStyle(o,null).getPropertyValue("height"))));else{var l=d?k.getWidgetRecInfo(this.providerConfig,"source"):{},p=a?k.getWidgetRecInfo(this.providerConfig,"title"):{},u=["color","fontStyle","lineHeight","fontFamily","fontWeight","padding","border","fontSize","textAlign"];for(var g in u){var v=u[g];d&&l.style.hasOwnProperty(v)&&(o.style[c.toDash(v)]=l.style[v]),a&&p.style.hasOwnProperty(v)&&(n.style[c.toDash(v)]=p.style[v])}a&&(e=parseInt(p.size.height)),d&&(t=parseInt(l.size.height))}if(null!==s){var f=window.getComputedStyle(s,null);i=parseInt(f.getPropertyValue("height"))+parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom")),this.providerConfig.isTopBranding?s.classList.add("ob-top-branding"):s.classList.add("ob-bottom-branding")}this.playerDescriptionHeight=e+t,this.playerBrandingHeight=i,this.setMarginWhenDescription(),this.providerConfig.playerLocation===h.InWidget&&this.providerConfig.provider!==r.OPA&&(this.playerHeight=this.getProviderPlayerHeight()),this.avoidSliderWhenSmall()},e.prototype.getProviderPlayerHeight=function(){return this.playerHeight-this.playerDescriptionHeight},e.prototype.setMarginWhenDescription=function(e){void 0===e&&(e=this.playerDescriptionHeight),this.providerConfig.isTopBranding||(e=Math.max(e,this.playerBrandingHeight),!c.getSubtree(k.getWidgetElement(this.providerConfig.containerID)).querySelector(".ob_adTitleDescWrapper")||this.providerConfig.nativeVideoMode!==V.Allowed&&this.providerConfig.nativeVideoMode!==V.Required||(e+=this.playerBrandingHeight)),this.playerElement.style.paddingBottom="".concat(e,"px"),this.playerElement.style.marginBottom="".concat(k.vidgetBottomMargin,"px")},e.prototype.getPlayerDescriptionHeight=function(){return this.playerDescriptionHeight},e.prototype.handlePlayerWrapperHeight=function(){this.providerConfig.playerLocation!==h.InWidget&&(this.playerWrapperHeight=parseInt(this.playerElement.style.height.split("px")[0]),this.isMobile||(this.playerElement.style.overflow="hidden"),this.playerElement.style.height="0px")},e.prototype.onMouseEnterVolumeChange=function(){var e=this,t=function(){e.playerElement.removeEventListener("click",i),Ae.ByHover===e.volumeInteraction&&(e.volumeInteraction=Ae.None,e.onMouseLeaveVolumeChange())},i=function(){e.playerElement.removeEventListener("mouseleave",t)};this.playerElement.addEventListener("mouseleave",t,{once:!0}),this.playerElement.addEventListener("click",i,{once:!0}),this.volumeInteraction=Ae.ByHover,this.setMute(!1)},e.prototype.onMouseLeaveVolumeChange=function(){var e=this;this.playerElement.addEventListener("mouseenter",(function(){e.onMouseEnterVolumeChange()}),{once:!0}),this.setMute(!0)},e.prototype.handleMuteOnMouseEnter=function(){var e=this;this.playerElement.addEventListener("mouseenter",(function(){e.onMouseEnterVolumeChange()}),{once:!0})},e.prototype.setMute=function(e){e?this.player.mute():this.player.unmute()},e.prototype.startBitrateInterval=function(){if(this.providerConfig.provider===r.OPA){var e=this,t=0;this.bitrateInterval=setInterval((function(){if(!this.adPaused){try{e.playerConfig.adBitrate=e.player.getVideoBitrate()}catch(t){T.error(e.sessionId,"getVideoBitrate(): ".concat(t.toString()))}3==++t&&e.clearBitrateInterval()}}),2e3)}},e.prototype.getVideoTagElement=function(){var e=this.playerElement.getElementsByTagName("video");return e?Array.from(e).find((function(e){var t=e.getBoundingClientRect();return t.width>0&&t.height>0})):null},e.prototype.onPlay=function(e,i){var o=this;void 0===i&&(i=null),this.videoElement=this.getVideoTagElement(),this.clearPlayRelatedResources(),this.startViewabilityInterval(),this.providerConfig.dfpInfo.isDfp&&k.changeDFP(this.providerConfig,k.playerDimensions.height,!1),this.playerPlay=!0,this.providerConfig.provider!==r.OPA&&(this.providerConfig.mediaOrientation=null),(null==i?void 0:i.syndicatorAlreadyPlaying)||(this.showPlayer().then((function(){o.handleStickiness()})),"providerPlayerReuse"===this.providerConfig.featureFlag&&this.providerConfig.provider!==r.OPA&&this.resizePlayer(),this.addResizeEventListener());var n=this.playerConfig.companionAds&&this.playerConfig.companionAds[0]?this.playerConfig.companionAds[0]:void 0;try{this.videoElement&&this.videoElement.duration&&(this.providerConfig.videoDuration=this.videoElement.duration)}catch(e){T.error(this.sessionId,"Unable to get video duration:".concat(e))}if(i&&i.organicEvent||(this.passbackTimeout&&this.clearPassbackTimeout(),this.startVideoPlayDurationMeasurment(),this.audit({eventType:t.Play,deliveryMode:this.playerConfig.deliveryMode,consentData:this.providerConfig.loglevel.level>=1?k.getConsentData(this.providerConfig):void 0,supplyChain:this.providerConfig.loglevel.level>=1?this.printSellerJsonSerialized():void 0,companionAdUrl:n?n.staticResource:void 0,companionClickThrough:n?n.companionClickThroughURLTemplate:void 0,heavyAd:this.providerConfig.provider===r.OPA&&"minimal"===this.providerConfig.vidgetFootprint?this.handleHeavyAds(this.playerConfig.heavyAdStatus):void 0,viewability:this.getCurrentViewability(),fallBackProviderId:this.providerConfig.fallBackProviderId})),this.sendEventsToOBR(W.AdStarted),this.fireExternalPixels(),this.startBitrateInterval(),"streaming"===this.playerConfig.deliveryMode&&(this.hidePlayerButtons(),this.streamingInterval=setInterval(this.onStreamPlay.bind(this),1e3),this.adPaused=!1),k.callWidgetCallback(this.providerConfig.callbacks,"onPlay",this.providerConfig.widgetIdx),k.callWidgetCallback(this.providerConfig.callbacks,"onPaidPlay",this.providerConfig.widgetIdx),this.providerConfig.playedReloadIndexes.push(this.providerConfig.currentReload),this.providerConfig.optimizeLogicExcludeCount.providers[this.providerConfig.provider]=0,this.providerConfig.fillEvent){var s=new CustomEvent("onPlay");k.getWidgetElement(this.providerConfig.containerID).dispatchEvent(s)}this.bindedplayerPauseResumeAdCallback=this.playerPauseResumeAdCallback.bind(this),window.addEventListener("pauseResumeAd",this.bindedplayerPauseResumeAdCallback)},e.prototype.fireExternalPixels=function(){var e,t=this;(null===(e=this.providerConfig.vidgetExternalImpressionPixels)||void 0===e?void 0:e.length)>0&&c.firePixels(this.providerConfig.vidgetExternalImpressionPixels,this.providerConfig,(function(e){t.reportTrackersToKibana(e)}))},e.prototype.reportTrackersToKibana=function(e){this.providerConfig.loglevel.level>=w.DEBUG&&this.audit({eventType:t.PixelFired,description:e.substring(0,75)})},e.prototype.handleStickiness=function(){var e,t=this;switch(this.stickyPlayer){case Te.Regular:e=Re.Lazy;break;case Te.Slider:e=Re.Eager;break;case Te.SliderAlwaysRight:e=Re.Override;break;case Te.NoScroll:e=Re.NoScroll;break;case Te.None:default:return}this.sliderSettings={sliderClassname:"obSticky",placeholderClassname:"outbrain-place-holder-wrapper",sliderEntry:"side"===this.providerConfig.sticky.sliderEntry?Oe.Sideways:Oe.BottomUp,sliderHeight:function(){return t.getSliderHeight()},sliderWidth:this.providerConfig.sticky.width,sliderPosition:this.providerConfig.sticky.sliderPosition,verticalMargin:this.providerConfig.sticky.sliderPercentBottom?this.providerConfig.sticky.sliderPercentBottom+"%":"30px",horizontalMargin:"2px",sliderMode:e},this.slider=new Fe(this.playerElement,this.sliderSettings,(function(e){e.prev.isSliderActive!==e.next.isSliderActive&&e.next.isSliderActive?(t.clearResizeEventListener(),t.resizeSlider(e.next.width,e.next.height)):e.prev.isSliderActive===e.next.isSliderActive||e.next.isSliderActive||(t.resizePlayer(),t.addResizeEventListener()),e.prev.isSliderHidden!==e.next.isSliderHidden&&e.next.isSliderHidden&&!t.adPaused?t.pause():e.prev.isSliderHidden!==e.next.isSliderHidden&&!e.next.isSliderHidden&&t.adPaused&&t.resume()}))},e.prototype.getSliderHeight=function(){return this.providerConfig.sticky.height},e.prototype.resizeSlider=function(e,t){this.resize(e,t)},e.prototype.printSellerJsonSerialized=function(){return this.providerConfig.sellerJsonChain.ver+","+this.providerConfig.sellerJsonChain.complete+"!"+this.providerConfig.sellerJsonChain.nodes[0].asi+","+this.providerConfig.sellerJsonChain.nodes[0].sid+","+this.providerConfig.sellerJsonChain.nodes[0].hp+",,,"},e.prototype.hidePlayerButtons=function(){this.player.hidePlayerButtons()},e.prototype.onStreamPlay=function(){if(!this.adPaused){var e=this.streamingTimePassed;e>=this.streamingQuartile&&e<this.streamingQuartile+1?T.sendAudit(this.sessionId,t.FirstQuartile,"",w.DEBUG):e>=2*this.streamingQuartile&&e<2*this.streamingQuartile+1?T.sendAudit(this.sessionId,t.SecondQuartile,"",w.DEBUG):e>=3*this.streamingQuartile&&e<3*this.streamingQuartile+1?T.sendAudit(this.sessionId,t.ThirdQuartile,"",w.DEBUG):e>=4*this.streamingQuartile&&(this.stopStreamingInterval(),this.onPlay100()),this.streamingTimePassed++}},e.prototype.stopStreamingInterval=function(){this.streamingInterval&&window.clearInterval(this.streamingInterval)},e.prototype.startViewabilityInterval=function(){var e=this;this.activeViewabilityObserver&&this.activeViewabilityObserver.unsubscribe();var i={threshold:this.viewabilityPercentageThreshold/100,timeInMilliseconds:this.viewabiltyEventTime};this.activeViewabilityObserver=Ve.measureViewability(this.videoElement||this.playerElement,i).subscribe((function(i){e.fireViewabilityTracker(),e.markPlayAsViewablePlay(!0),e.audit({eventType:t.Viewability,viewability:i,description:"viewability percentage threshold: "+e.viewabilityPercentageThreshold})}))},e.prototype.startVideoPlayDurationMeasurment=function(){var e=this;this.videoPlayStartTime=(new Date).getTime(),this.playDurationMeasurmentTimeout&&window.clearTimeout(this.playDurationMeasurmentTimeout),this.isAlreadyActiveCompleted()||(this.playDurationMeasurmentTimeout=window.setTimeout((function(){e.audit({eventType:t.EngagedPlay,videoProgress:Math.round(e.getAdCurrentTime()/1e3),viewability:e.getCurrentViewability(),isViewablePlay:e.isPlayCanBeCalledViewable})}),this.activeCompletionTimeMillis-this.totalPlayDuration))},e.prototype.isAlreadyActiveCompleted=function(){return this.totalPlayDuration&&this.totalPlayDuration>this.activeCompletionTimeMillis},e.prototype.markPlayAsViewablePlay=function(e){this.isPlayCanBeCalledViewable=e||!1},e.prototype.fireViewabilityTracker=function(){},e.prototype.getCurrentViewability=function(){return c.viewPercentage(this.playerElement)},e.prototype.onLoad=function(){this.providerLoad(),this.providerConfig.adLoaded=!0,this.clearProviderRejectTimeout(),this.providerConfig.loglevel.level>=w.DEBUG&&this.audit({eventType:t.Ready}),"providerPlayerReuse"===this.providerConfig.featureFlag&&this.providerConfig.isReelWidget&&this.providerConfig.provider===r.Vidazoo&&this.checkPlayerObjectExist()||k.callWidgetCallback(this.providerConfig.callbacks,"onReady",this.providerConfig.widgetIdx),this.sendEventsToOBR(W.AdLoaded)},e.prototype.checkPlayerObjectExist=function(){return!1},e.prototype.addResizeEventListener=function(){this.resizeCallback=this.resizePlayer.bind(this),window.addEventListener("resize",this.resizeCallback)},e.prototype.clearResizeEventListener=function(){window.removeEventListener("resize",this.resizeCallback)},e.prototype.clearPauseResumeEventListener=function(){window.removeEventListener("pauseResumeAd",this.bindedplayerPauseResumeAdCallback)},e.prototype.clearPlayLoadedAdEventListener=function(){window.removeEventListener("playLoadedAd",this.bindedPlayAdCallback)},e.prototype.resizePlayer=function(){if(this.player){var e=void 0;if(null===(e=this.providerConfig.provider===r.OPA&&this.isMobile?k.getPlayerDimensionsByMediaSize(this.providerConfig,this.mediaWidth,this.mediaHeight):k.getUpdatedPlayerDimensions(this.providerConfig)))return;this.resize(e.width,e.height),this.playerElement.style.width=e.width+"px","providerPlayerReuse"===this.providerConfig.featureFlag?this.stickyPlayer===Te.None&&(this.playerElement.style.maxWidth=e.width+"px"):this.playerElement.style.maxWidth=e.width+"px",this.playerElement.style.height=e.height+"px"}},e.prototype.checkMediaRatio=function(){if(this.mediaWidth&&this.mediaHeight){var e=this.mediaWidth/this.mediaHeight;switch(this.providerConfig.mediaOrientation=1===e?A.Squared:e>=1?A.Landscape:A.Portrait,this.providerConfig.vidgetOrientation){case E.Horizontal:e<1&&this.closePlayerVideoRejected("skipped due to video orientation (".concat(this.mediaWidth,":").concat(this.mediaHeight,")"),t.VideoRejected);break;case E.Vertical:e>1&&this.closePlayerVideoRejected("skipped due to video orientation (".concat(this.mediaWidth,":").concat(this.mediaHeight,")"),t.VideoRejected)}}},e.prototype.updatePlayerByRatio=function(){this.providerConfig.mediaOrientation===A.Portrait?this.providerConfig.playerOrientation="vertical":this.providerConfig.mediaOrientation===A.Landscape&&(this.providerConfig.playerOrientation="horizontal")},e.prototype.onPlay100=function(){this.audit({eventType:t.Complete,videoProgress:Math.round(this.getAdCurrentTime()/1e3),viewability:this.getCurrentViewability(),isViewablePlay:this.isPlayCanBeCalledViewable}),this.shouldDisplayNativeEndCard()?this.handleNativeEndCardAndComplete():this.callVideoComplete()},e.prototype.clearSubscriptions=function(){[this.playerInViewportObserver,this.activeViewabilityObserver].forEach((function(e){e&&e.unsubscribe()}))},e.prototype.shouldDisplayNativeEndCard=function(){return this.providerConfig.isNative&&this.providerConfig.vidgetNativeEndCard&&this.playerConfig.ctaButton&&this.playerConfig.ctaButton.length&&this.playerConfig.ctaButton.length>1},e.prototype.handleNativeEndCardAndComplete=function(){var e=this,t=6;this.providerConfig.endCardDuration&&(t=this.providerConfig.endCardDuration<=10?this.providerConfig.endCardDuration:10),this.setNativeEndCard(),setTimeout((function(){e.callVideoComplete()}),1e3*t)},e.prototype.callVideoComplete=function(){this.clearSubscriptions(),this.runVideoCompleteSequence()},e.prototype.runVideoCompleteSequence=function(){return ze(this,void 0,void 0,(function(){return Ue(this,(function(e){switch(e.label){case 0:return[4,this.videoCompletedPlaying()];case 1:return e.sent(),this.clearSubscriptions(),k.callWidgetCallback(this.providerConfig.callbacks,"onClose",this.providerConfig.widgetIdx),k.callWidgetCallback(this.providerConfig.callbacks,"onOrganicClose",this.providerConfig.widgetIdx),[2]}}))}))},e.prototype.setNativeEndCard=function(){},e.prototype.videoCompletedPlaying=function(e){return void 0===e&&(e=!0),ze(this,void 0,void 0,(function(){return Ue(this,(function(t){switch(t.label){case 0:return e?[4,this.hidePlayer()]:[3,2];case 1:return t.sent(),[3,3];case 2:this.clearPlayRelatedResources(),t.label=3;case 3:return this.sendEventsToOBR(W.AdCompleted),[2]}}))}))},e.prototype.clearPlayRelatedResources=function(){this.clearProviderRejectTimeout(),this.clearViewabilityInterval(),this.clearVideoPlayMeasurmentTimeout()},e.prototype.getPlayerTopLeftPosition=function(){return this.playerPlay?this.playerElement.getBoundingClientRect().top:k.getPlayerEffectiveTopLeftPosition(this.providerConfig.containerID,this.providerConfig.playerLocation,this.providerConfig.firstIndex)},e.prototype.showPlayer=function(){var t=this;return new Promise((function(i){t.providerConfig.isReelWidget&&"syndication"!==t.providerConfig.vidgetContentSource.toLowerCase()&&t.showSkipButton(),t.listenToPlayerHeightTransitionEnd();var o=t.playerElement.getElementsByTagName("canvas");if(o&&o.length&&(o[0].style.top="0px"),t.isMobile||t.providerConfig.isReelWidget||!t.shouldPlayerAllowUiTransition||(t.playerElement.style.transition="height 1s"),"providerPlayerReuse"===t.providerConfig.featureFlag&&(t.playerElement.style.display=t.providerConfig.playerLocation===h.InWidget?"flex":"block"),t.providerConfig.playerLocation===h.InWidget){!0!==t.providerConfig.coveredWidget&&(t.playerElement.style.top="0px"),t.stickyPlayer!==Te.SliderAlwaysRight&&(t.widgetElementsHidden=!0,k.displayWidgetElements(t.providerConfig,!1));var n=0;t.providerConfig.provider===r.OPA&&(n=1e3),window.setTimeout((function(){t.playerElement.style.visibility="visible",i()}),n)}else t.playerElement.style.position="relative",t.playerElement.style.top="0px",t.playerElement.style.visibility="visible","providerPlayerReuse"!==t.providerConfig.featureFlag&&(t.playerElement.style.display="block"),function(){var t=this,o=this;window.setTimeout((function(){var n;if("sliderAlwaysRight"===o.stickyPlayer||"regular"!==o.stickyPlayer&&"none"!==o.stickyPlayer&&"slider"!==o.stickyPlayer)n=o.calculatePlayerHeightByPlatform.call(o);else if(o.providerConfig.provider===r.OPA&&o.isMobile&&o.mediaWidth&&o.mediaHeight){var s=k.getWidgetElement(o.providerConfig.containerID).offsetWidth,a=o.mediaWidth/o.mediaHeight;n=Math.min(s/a+o.getNativeAssetsHeight(),.9*window.innerHeight)}else n=o.playerWrapperHeight;if("providerPlayerReuse"===o.providerConfig.featureFlag?!o.isPlayerOutOfViewport&&n>0&&(o.playerElement.style.height="".concat(n,"px")):!o.isPlayerOutOfViewport&&(o.playerElement.style.height="".concat(n,"px")),"providerPlayerReuse"===o.providerConfig.featureFlag&&e.lastWrapperHeight&&e.lastWrapperHeight>0){var d=document.getElementById(t.getPlayerWrapperElementId());d&&(d.style.height=e.lastWrapperHeight+"px")}i()}),100)}.bind(t)();t.providerConfig.onlyVideoWidget||k.hideOBBranding(t.providerConfig.containerID)}))},e.prototype.listenToPlayerHeightTransitionEnd=function(){},e.prototype.minimizeSkipButtonSize=function(e,t){("providerPlayerReuse"===this.providerConfig.featureFlag?this.providerConfig.isVideoReel?this.playerWrapperHeight:this.calculatePlayerHeightByPlatform():this.providerConfig.isVideoReel?this.playerWrapperHeight:this.playerElement.offsetHeight)<350&&(e.classList.add("minimize-skip-button"),t.classList.add("minimize-skip-button-text"))},e.prototype.showSkipButton=function(){var e=this;if("providerPlayerReuse"===this.providerConfig.featureFlag&&this.playerElement.querySelector("#".concat(this.getPlayerWrapperElementId(),"-skip")))return;var i=document.createElement("div");i.classList.add("obv-skip-wrapper"),i.style.opacity="0.5",i.id="".concat(this.getPlayerWrapperElementId(),"-skip");var r=document.createElement("span");r.classList.add("obv-skip-title"),this.minimizeSkipButtonSize(i,r),r.innerText="Skip Ad";var o=document.createElement("span");o.classList.add("obv-skip-arrow"),o.classList.add("vidget-material-icons"),o.innerHTML="skip_next",this.isSkipButtonPressed=!1,window.setTimeout((function(){i.style.opacity="1",i.addEventListener("click",(function(){T.sendAudit(e.sessionId,t.Skip,"",w.INFO),e.isSkipButtonPressed=!0,e.onClose(!1)}))}),2e3),i.appendChild(r),i.appendChild(o),this.playerElement.appendChild(i)},e.prototype.getNativeAssetsHeight=function(e){void 0===e&&(e=!1)},e.prototype.calculatePlayerHeightByPlatform=function(){return Math[this.isMobile?"min":"max"](parseInt(this.playerElement.style.height.split("px")[0]),this.providerConfig.sticky.height)},e.prototype.hidePlayer=function(i){return void 0===i&&(i=!1),ze(this,void 0,void 0,(function(){var r,o,n,s=this;return Ue(this,(function(a){switch(a.label){case 0:return this.slider?[4,this.slider.destroySlider()]:[3,2];case 1:a.sent(),a.label=2;case 2:return"providerPlayerReuse"===this.providerConfig.featureFlag&&(r=document.getElementById(this.getPlayerWrapperElementId()))&&(e.lastWrapperHeight=r.clientHeight),this.clearResources(),this.isInstream||!this.player?[2]:(this.widgetElementsHidden&&k.displayWidgetElements(this.providerConfig,!0),this.playerVisibleFirstTime=!0,this.isMobile||this.providerConfig.isReelWidget||!this.shouldPlayerAllowUiTransition||(this.playerElement.style.transition="height 1s"),this.playerElement.style.padding="0px",this.playerElement.style.height="0px",o=this.providerConfig.playerLocation===h.InWidget||this.providerConfig.isVideoReel?0:1e3,n=Math.round(this.getAdCurrentTime()/1e3),window.setTimeout((function(){s.playerElement.style.display="none",s.playerPlay=!1,s.widgetElementsHidden=!1,"providerPlayerReuse"===s.providerConfig.featureFlag?s.providerConfig.currentReload>=s.providerConfig.actualReloadCount?(s.destroyPlayer(),setTimeout((function(){s.playerElement&&s.playerElement.parentNode&&(s.providerConfig.dfpInfo.isDfp&&k.changeDFP(s.providerConfig,0,!0),s.playerElement.parentNode.removeChild(s.playerElement)),s.player=null,i&&s.audit({eventType:t.Close,videoProgress:n}),u.setNotRunning(s.providerConfig.widgetIdx),s.videoPlayCallback&&s.videoPlayCallback({userClose:i})}),5)):(s.pauseProvider(),i&&s.audit({eventType:t.Close,videoProgress:n}),u.setNotRunning(s.providerConfig.widgetIdx),s.videoPlayCallback&&s.videoPlayCallback({userClose:i})):(s.destroyPlayer(),setTimeout((function(){s.playerElement&&s.playerElement.parentNode&&(s.providerConfig.dfpInfo.isDfp&&k.changeDFP(s.providerConfig,0,!0),s.playerElement.parentNode.removeChild(s.playerElement)),s.player=null,i&&s.audit({eventType:t.Close,videoProgress:n}),u.setNotRunning(s.providerConfig.widgetIdx),s.videoPlayCallback&&s.videoPlayCallback({userClose:i})}),5))}),o),[2])}}))}))},e.prototype.avoidSliderWhenSmall=function(){this.stickyPlayer!==Te.None&&(!this.isMobile&&this.providerConfig.avoidSliderWhenSmall>=document.body.clientHeight&&(this.stickyPlayer=Te.None,this.audit({eventType:t.SliderSkipped,description:"Skipped due to screen height limit"})))},e.prototype.getElementMultiLineTruncation=function(){var e=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoDescChild"),t=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoTitleChild"),i=this.playerElement.querySelector("#"+this.playerIdsPrefix+"titleSrcWrapper");e&&e.textContent&&e.textContent.length>180&&(e.textContent=e.textContent.substring(0,180)),e&&c.multiLineTruncation(e,2),t&&c.multiLineTruncation(t,2),i&&c.multiLineTruncation(i,2)},e.prototype.playerViewPreloadCallback=function(e){var t=this;this.loadAd().then((function(){var i=k.getWidgetElement(t.providerConfig.containerID),r=Ve.elementInViewChange(i,{debounce:0,threshold:0}).subscribe((function(i){i===Ie.inView&&(r.unsubscribe(),t.playerVisibleFirstTime=!1,t.playLoadedAd(),t.playerViewCallback(e))}))}))},e.prototype.playerViewCallback=function(e){var t=this;this.playerInViewportObserver&&this.playerInViewportObserver.unsubscribe(),this.playerInViewportObserver=Ve.elementInViewChange(this.playerElement,this.playerInViewportObserverSettings).subscribe((function(i){i===Ie.inView?(t.playerVisibleFirstTime?(t.playerVisibleFirstTime=!1,t.play()):e&&t.adPaused&&t.internalPause&&(t.internalPause=!1,t.resume()),t.handlePauseOutOfViewPort(!0)):e&&!t.adPaused&&!t.playerVisibleFirstTime&&t.playerPlay&&(t.internalPause=!0,t.pause(),t.handlePauseOutOfViewPort(!1))}))},e.prototype.handlePauseOutOfViewPort=function(e){var t=this;if(void 0===e&&(e=!0),/^pauseTimeout/gi.test(this.providerConfig.featureFlag)){var i=1e4;/^pauseTimeout_/gi.test(this.providerConfig.featureFlag)&&(i=+this.providerConfig.featureFlag.split("_")[1]),e?window.clearTimeout(this.pauseOutOfViewPortTimeout):this.pauseOutOfViewPortTimeout=window.setTimeout((function(){t.playerInViewportObserver.unsubscribe(),t.resume()}),i)}},e.prototype.playerPlayAdCallback=function(e){this.providerConfig.widgetIdx==e.detail.widgetIdx&&(window.removeEventListener("playLoadedAd",this.bindedPlayAdCallback),"inViewSynd"===this.providerConfig.featureFlag?(this.bindedInViewPlayAdCallback=this.playAdOnlyInViewport.bind(this),window.addEventListener("scroll",this.bindedInViewPlayAdCallback),this.playAdOnlyInViewport()):this.playLoadedAd())},e.prototype.playAdOnlyInViewport=function(){var e=this.getPlayerTopLeftPosition(),t=this.getPlayerHeight();c.elementPercHeightInViewport(e,t,50,!0)&&(window.removeEventListener("scroll",this.bindedInViewPlayAdCallback),this.playLoadedAd())},e.prototype.playerPauseResumeAdCallback=function(e){this.providerConfig.widgetIdx==e.detail.widgetIdx&&(k.getPlayerWrapperElement(this.providerConfig).style.display=e.detail.displayPlayerWrapper?"none":"block","resume"===e.detail.eventName&&this.resume&&this.resume(),"pause"===e.detail.eventName&&this.pause&&this.pause())},e.prototype.pause=function(){this.adPaused=!0,this.player.pause&&this.player.pause()},e.prototype.resume=function(){this.adPaused=!1,this.playerResume()},e.prototype.playerResume=function(){this.player.resume&&this.player.resume()},e.prototype.start=function(){var e=this.providerConfig.playMode;switch(this.stickyPlayer!==Te.Regular&&this.stickyPlayer!==Te.None&&(e=o.Load),this.providerConfig.isReelWidget&&(e=o.Controlled),this.providerConfig.isProviderControlledPauseOutOfView&&(e=o.ControlledPauseOutOfView),e){case o.ControlledPauseOutOfView:this.providerConfig.pauseOutOfView=!0;case o.View:case o.ViewPreload:this.playerViewPreloadCallback(this.providerConfig.pauseOutOfView);break;case o.Controlled:this.loadAd(),this.setProviderTimeout(),this.bindedPlayAdCallback=this.playerPlayAdCallback.bind(this),window.addEventListener("playLoadedAd",this.bindedPlayAdCallback);break;case o.Load:default:this.play()}},e.prototype.shouldAutoPlay=function(){return!this.providerConfig.isReelWidget&&this.providerConfig.playMode!==o.View&&this.providerConfig.playMode!==o.ViewPreload},e.prototype.play=function(){this.providerPlay(),this.setProviderTimeout()},e.prototype.setProviderTimeout=function(){var e=this;this.rejectProviderTimeout&&this.clearProviderRejectTimeout(),this.rejectProviderTimeout=window.setTimeout((function(){e.closePlayerNoAd("provider timeout")}),this.cancelProviderTimeoutDuration)},e.prototype.providerPlay=function(){this.player.play&&this.player.play()},e.prototype.providerLoad=function(){},e.prototype.resize=function(e,t){this.player.resize&&this.player.resize(e,t)},e.prototype.clearProviderRejectTimeout=function(){window.clearTimeout(this.rejectProviderTimeout)},e.prototype.clearPassbackTimeout=function(){window.clearTimeout(this.passbackTimeout)},e.prototype.clearViewabilityInterval=function(){window.clearInterval(this.viewabiltyEventInterval)},e.prototype.clearVideoPlayMeasurmentTimeout=function(){window.clearTimeout(this.playDurationMeasurmentTimeout)},e.prototype.clearBitrateInterval=function(){this.bitrateInterval&&window.clearInterval(this.bitrateInterval)},e.prototype.clearTransitionEndListener=function(){this.playerElement.ontransitionend=null},e.prototype.clearResources=function(){this.clearProviderRejectTimeout(),this.clearPassbackTimeout(),this.clearViewabilityInterval(),this.clearVideoPlayMeasurmentTimeout(),this.clearResizeEventListener(),this.clearPauseResumeEventListener(),this.clearPlayLoadedAdEventListener(),this.clearBitrateInterval(),this.clearTransitionEndListener()},e.prototype.closePlayerVideoRejected=function(e,i){void 0===e&&(e="Unable to play video"),void 0===i&&(i=t.VideoRejected),this.clearResources(),this.playerElement&&(this.playerElement.style.display="none"),"providerPlayerReuse"===this.providerConfig.featureFlag?this.providerConfig.currentReload>=this.providerConfig.actualReloadCount?this.destroyPlayer():this.pauseProvider():this.destroyPlayer(),this.widgetElementsHidden&&k.displayWidgetElements(this.providerConfig,!0),this.playerElement&&this.playerElement.parentNode&&("providerPlayerReuse"===this.providerConfig.featureFlag?this.playerElement.style.display="none":this.playerElement.parentNode.removeChild(this.playerElement),"providerPlayerReuse"===this.providerConfig.featureFlag&&this.providerConfig.provider!==r.Vidazoo||(this.player=null)),u.setNotRunning(this.providerConfig.widgetIdx),this.audit({eventType:i,description:e}),this.noVideoCallback&&this.noVideoCallback()},e.prototype.closePlayerNoAd=function(e,i){var o=this;void 0===e&&(e="no video provided"),void 0===i&&(i=t.ProviderPass),this.providerConfig.optimizeLogicExcludeCount.providers[this.providerConfig.provider]++,this.providerConfig.adLoaded&&(e+=", ready"),this.clearResources(),this.playerElement&&(this.playerElement.style.display="none"),"providerPlayerReuse"===this.providerConfig.featureFlag?this.providerConfig.currentReload>=this.providerConfig.actualReloadCount?(this.destroyPlayer(),this.playerElement&&this.playerElement.parentNode&&this.playerElement.parentNode.removeChild(this.playerElement)):this.pauseProvider():this.destroyPlayer(),this.widgetElementsHidden&&k.displayWidgetElements(this.providerConfig,!0),setTimeout((function(){o.playerElement&&o.playerElement.parentNode&&("providerPlayerReuse"===o.providerConfig.featureFlag?o.playerElement.style.display="none":o.playerElement.parentNode.removeChild(o.playerElement),"providerPlayerReuse"===o.providerConfig.featureFlag&&o.providerConfig.provider===r.Vidazoo||(o.player=null)),u.setNotRunning(o.providerConfig.widgetIdx),!o.playerPlay&&o.noVideoCallback&&(o.providerConfig.loglevel.level>=1&&o.audit({eventType:i,description:e}),o.noVideoCallback())}),5),this.providerConfig.adLoaded=!1},e.prototype.audit=function(e){var t=T.getAuditBySessionId(this.sessionId,this.providerConfig,this.playerConfig);t.body=e,t.send()},e.prototype.onPrintEventTracker=function(e){this.providerConfig.loglevel.level>=w.DEBUG&&e.detail&&this.audit({eventType:t.PixelFired,description:e.detail.substring(0,100)})},e.prototype.markWidgetAsInstream=function(){this.playerElement&&this.playerElement.classList.add("ob-ivid")},e.prototype.sendEventsToOBR=function(e){var t=window.OBR;if(t&&t.extern&&t.extern.video&&t.extern.video.event){var i={widgetID:this.providerConfig.widgetID,widgetIdX:this.providerConfig.widgetIdx,provider:this.providerConfig.provider};t.extern.video.event(e,i)}},e.prototype.handleHeavyAds=function(e){},e.prototype.preparePlayerElement=function(){if(this.providerConfig.containerID&&(this.playerElement=k.createPlayerWrapperElement(this.providerConfig),this.playerElement)){var e=this.buildHeaderHTML(),t=this.buildDescriptionHTML();this.playerElement.innerHTML="".concat(e,' <div id="').concat(this.getPlayerContainerId(),'" class="player-container"></div> ').concat(t),this.playerElement.classList.add("ob-pvid"),this.providerConfig.isSyndicationAllowed&&this.markWidgetAsInstream(),this.handleVideoDescription(),this.handleVideoReport()}},e.prototype.handleVideoReport=function(){var e=this;_e.addReportUtil(document.getElementById(this.getPlayerContainerId()),this,this.sessionId).then((function(i){var r=e.storeVast(),o=JSON.stringify({reportKey:i,vastId:r});T.sendAudit(e.sessionId,t.VidgetReport,o,w.INFO)}),(function(){}))},e.prototype.storeVast=function(){return""},e}(),je=qe;!function(e){e.onLoad="onLoad",e.onReady="onReady",e.onPlay="onPlay",e.onPlay25="onPlay25",e.onPlay50="onPlay50",e.onPlay75="onPlay75",e.onPlay100="onPlay100",e.onSkip="onSkip",e.onPause="onPause",e.onResume="onResume",e.onMute="onMute",e.onUnmute="onUnmute",e.onClick="onClick",e.onClose="onClose",e.onError="onError"}(ke||(ke={})),function(e){e.onLoad="adLoad",e.onPlay="adVideoStart",e.onPlay25="adFirstQuartile",e.onPlay50="adMidpointQuartile",e.onPlay75="adThirdQuartile",e.onPlay100="adFinish",e.onSkip="adSkip",e.onPause="adPaused",e.onResume="adPlaying",e.onMute="muted",e.onUnmute="unMuted",e.onClick="adClickThru",e.onClose="closed",e.onError="adRuntimeError",e.onContentPlay100="contentFinish",e.onContentPlay="contentStart",e.onNoAd="adRollEmpty"}(De||(De={})),function(e){e.onPlay="adImpression",e.onPlay25="adFirstQuartile",e.onPlay50="adMidpointQuartile",e.onPlay75="adThirdQuartile",e.onPlay100="adFinish",e.onMute="mute",e.onUnmute="unmute",e.onKeepWatching="highlightsKeepWatching",e.onContentStart="contentStart",e.onContentPlay="contentPlay",e.onContentPlay100="contentFinish",e.onContentPause="contentPause",e.onDestroy="destroy"}(We||(We={})),function(e){e.onPlay="ad_imp",e.onPlay25="ad_25",e.onPlay50="ad_50",e.onPlay75="ad_75",e.onPlay100="ad_100",e.onContentPlay="content_start",e.onContentPlay25="content_25",e.onContentPlay50="content_50",e.onContentPlay75="content_75",e.onContentPlay100="content_100",e.onContentPause="content_pause",e.onContentResume="content_resume"}(Be||(Be={})),function(e){e.onLoad="playerReady",e.onReady="ready",e.onPlay="adstarted",e.onPlay25="adfirstquartile",e.onPlay50="admidpoint",e.onPlay75="adthirdquartile",e.onPlay100="adcomplete",e.onSkip="adskipped",e.onPause="adpaused",e.onResume="adresumed",e.onMute="mute",e.onUnmute="unmute",e.onClick="adclick",e.onClose="aduserclose",e.onError="aderror",e.onPlayerError="playererror",e.onPixelFired="pixelfired",e.onJsTrackerAdded="jstrackeradded"}(Le||(Le={}));var Ge,Je,Qe=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Xe=function(e,t,i,r){return new(i||(i=Promise))((function(o,n){function s(e){try{d(r.next(e))}catch(e){n(e)}}function a(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((r=r.apply(e,t||[])).next())}))},Ye=function(e,t){var i,r,o,n,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(o=2&n[0]?r.return:n[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,n[1])).done)return o;switch(r=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],r=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}},Ke=window,$e=function(e){function t(t,i,r,o){var n=e.call(this,t,i,r,o)||this;return n.timelineUpdate=!1,n.isInstream=!!n.providerConfig.instream,n.playerEvents=ke,n.preparePlayerElement(),n}return Qe(t,e),t.prototype.createPlayer=function(){this.playerElement?(this.providerConfig.providerPlayerReuse&&t.player?this.player=t.player:(this.extractPlayerConfig(),this.player=new Ke.avPlayer(this.playerConfig),t.player=this.player),this.registerEvents()):(T.error(this.sessionId,"No Player Element created."),this.closePlayerNoAd("No Player Element created."))},t.prototype.extractPlayerConfig=function(){var e=this.providerConfig.reportedSubWidgetId?this.providerConfig.reportedWidgetId+"#"+this.providerConfig.reportedSubWidgetId:this.providerConfig.reportedWidgetId,t=[];this.providerConfig.inApp&&(t.push(""),"android"===this.providerConfig.platform&&(this.providerConfig.packageName&&t.push("AV_APPPKGNAME="+this.providerConfig.packageName),this.providerConfig.playStoreUrl&&t.push("AV_APPSTOREURL="+this.providerConfig.playStoreUrl)),"ios"===this.providerConfig.platform&&(this.providerConfig.bundleId&&t.push("AV_APPPKGNAME="+this.providerConfig.bundleId),this.providerConfig.appStoreUrl&&t.push("AV_APPSTOREURL="+this.providerConfig.appStoreUrl)),this.providerConfig.mobileUserId&&t.push("AV_IDFA="+this.providerConfig.mobileUserId),this.providerConfig.appCategory&&t.push("AV_CATEGORY="+this.providerConfig.appCategory),this.providerConfig.appName&&t.push("AV_APPNAME="+this.providerConfig.appName));var i=this.providerConfig.sellerJsonChain,r="".concat(i.ver,",").concat(i.complete,"!").concat(i.nodes[0].asi,",").concat(i.nodes[0].sid,",").concat(i.nodes[0].hp,",,,"),o=this.providerConfig.ccpaPrivacy?"&AV_CCPA="+this.providerConfig.ccpaPrivacy:"",n=this.providerConfig.abrexVariant?"&AV_CDIM5="+this.providerConfig.abrexVariant:"";this.playerConfig={loglevel:this.providerConfig.loglevel.level>=1?10:void 0,publisherId:this.providerConfig.publisherId,videoPlayerId:"Aniview",channelId:this.getChannelId(),width:this.playerElement.style.width.split("px")[0],height:this.playerHeight,HD:!0,errorlimit:this.getErrorLimit(),ref1:"AV_SUBID="+this.providerConfig.pubID+"&AV_CDIM1="+e+"&AV_UID="+this.providerConfig.reqID+"&AV_CDIM2="+this.providerConfig.abTestVal+"&AV_CDIM3="+this.providerConfig.sourceId+"&AV_CDIM4="+this.providerConfig.placementType+n+o+"&AV_SCHAIN="+r+t.join("&"),adServerDomain:"observe.aniview.com",baseJsUrl:"https://player.aniview.com/script/6.1/",soundButton:!0,pauseButton:!0,logo:!1,vastRetry:this.providerConfig.vastRetries||1,maxrun:this.getMaxRun(),position:this.getPlayerContainerId(),loop:!0===this.providerConfig.instream,closeButton:this.providerConfig.closeButton,noifsnd:!0,autoPlay:this.shouldAutoPlay(),updatewaterfall:this.providerConfig.loglevel.level>=1?function(e){if(e)for(var t=0;t<e.length;t++)try{console.log("Aniview extra log:"+e[t].url)}catch(e){}}:void 0,customLogo:this.providerConfig.vidgetCustomControls&&this.providerConfig.vidgetCustomControls.adIcon?{link:this.providerConfig.vidgetCustomControls.adIcon.link,height:this.providerConfig.vidgetCustomControls.adIcon.height,width:this.providerConfig.vidgetCustomControls.adIcon.width,text:this.providerConfig.vidgetCustomControls.adIcon.text,clickthrough:this.providerConfig.vidgetCustomControls.adIcon.clickthrough}:void 0,midrolltime:this.providerConfig.midrolltime},this.providerConfig.instream&&(this.playerConfig.preloader={type:"content",link:this.providerConfig.preloaderLink,poster:"",clickthrough:""},this.playerConfig.midrolldelay=10,this.playerConfig.midrolltime=this.providerConfig.midrolltime||10,this.playerConfig.maxrun=void 0)},t.prototype.getPlayerContainerId=function(){return this.playerIdsPrefix+"aniplayer"},t.prototype.getErrorLimit=function(){return this.providerConfig.errorLimit?parseInt(this.providerConfig.errorLimit):this.providerConfig.providerPlayerReuse?8:3},t.prototype.getMaxRun=function(){try{return this.providerConfig.maxRun?parseInt(this.providerConfig.maxRun):this.providerConfig.retries?parseInt(this.providerConfig.retries):parseInt(this.providerConfig.maxRetries)}catch(e){return 4}},t.prototype.preparePlayerElement=function(){if(this.providerConfig.containerID&&(this.playerElement=k.createPlayerWrapperElement(this.providerConfig),this.playerElement)){var e=this.providerConfig.ctaText&&this.providerConfig.ctaText.length?'<div class="more-btn" id="'+this.playerIdsPrefix+'more-btn">'+this.providerConfig.ctaText+"</div>":"",t=this.buildHeaderHTML(),i=this.buildDescriptionHTML(),r="";this.providerConfig.vidgetCustomControls&&(r=this.setAniviewPlayerStyle()),this.playerElement.innerHTML=r+t+'<div id="'+this.playerIdsPrefix+'aniAnimation" class="aniAnimationOpen"><div id="'+this.playerIdsPrefix+'aniviewBox"><div id="'+this.playerIdsPrefix+'aniplayer"></div><div id="'+this.playerIdsPrefix+'aniplayerbut" style="display:none">'+e+"</div></div></div>"+i,this.handlePlayerButtons(),this.handleVideoDescription(),this.handlePlayerWrapperHeight(),this.handleVideoReport()}},t.prototype.handlePlayerButtons=function(){var e=this.playerElement.querySelector("#"+this.playerIdsPrefix+"more-btn"),t=this.playerElement.querySelector("#"+this.playerIdsPrefix+"aniAnimation"),i=document.createElement("div");e&&(e.style.cssText="position:absolute;bottom:60px;right:0;padding:0 12px;height:32px;background-color:#323232;background-color:rgba(0,0,0,.4);color:#fff;font-family:Helvetica,Arial,fallback,sans-serif;font-size:14px;text-align:center;text-transform:uppercase;line-height:32px;border-color:#fff;border-style:solid;border-width:1px 0 1px 1px;-webkit-transition:all .15s ease-in-out;-moz-transition:all .15s ease-in-out;-o-transition:all .15s ease-in-out;transition:all .15s ease-in-out"),t&&(t.style.height=Node.clientHeight-3+"px",i.id=this.playerIdsPrefix+"aniAnimation_close",t.appendChild(i))},t.prototype.setAniviewPlayerStyle=function(){if(this.providerConfig.vidgetCustomControls){var e="<style>";if(this.providerConfig.vidgetCustomControls.playbackButtons&&this.providerConfig.vidgetCustomControls.playbackButtons.play&&(e+=this.providerConfig.vidgetCustomControls.playbackButtons.play?'#av-container #av-inner #gui #buttons #left #play-pause.play {background-image: url("'+this.providerConfig.vidgetCustomControls.playbackButtons.play+'") !important;}':""),this.providerConfig.vidgetCustomControls.adIcon&&(e+="#aniview-credit {display: inline !important; position: relative !important; } ",(this.providerConfig.vidgetCustomControls.adIcon.height||this.providerConfig.vidgetCustomControls.adIcon.height.width)&&(e+="#aniview-credit span{",this.providerConfig.vidgetCustomControls.adIcon.height&&(e+="height: "+this.providerConfig.vidgetCustomControls.adIcon.height+" !important;"),this.providerConfig.vidgetCustomControls.adIcon.width&&(e+="width: "+this.providerConfig.vidgetCustomControls.adIcon.width+" !important;"),e+="} ")),this.providerConfig.vidgetCustomControls.closeButton){if(e+="#av-container #close-btn {",this.providerConfig.vidgetCustomControls.closeButton.marginLeft){e+="margin-left: ".concat(this.providerConfig.vidgetCustomControls.closeButton.marginLeft," !important;");var t=this.providerConfig.vidgetCustomControls.closeButton.marginRight||0;e+="right: ".concat(t," !important;")}else this.providerConfig.vidgetCustomControls.closeButton.marginRight&&(e+="margin-right: ".concat(this.providerConfig.vidgetCustomControls.closeButton.marginRight," !important;"));this.providerConfig.vidgetCustomControls.closeButton.marginTop&&(e+="margin-top: ".concat(this.providerConfig.vidgetCustomControls.closeButton.marginTop," !important;")),this.providerConfig.vidgetCustomControls.closeButton.borderStyle&&(e+="border-style: ".concat(this.providerConfig.vidgetCustomControls.closeButton.borderStyle," !important;")),this.providerConfig.vidgetCustomControls.closeButton.borderColor&&(e+="border-color: ".concat(this.providerConfig.vidgetCustomControls.closeButton.borderColor," !important;")),this.providerConfig.vidgetCustomControls.closeButton.borderWidth&&(e+="border-width: ".concat(this.providerConfig.vidgetCustomControls.closeButton.borderWidth," !important;")),this.providerConfig.vidgetCustomControls.closeButton.borderRadius&&(e+="border-radius: ".concat(this.providerConfig.vidgetCustomControls.closeButton.borderRadius," !important;")),this.providerConfig.vidgetCustomControls.closeButton.padding&&(e+="padding: ".concat(this.providerConfig.vidgetCustomControls.closeButton.padding," !important;")),this.providerConfig.vidgetCustomControls.closeButton.transform&&(e+="transform: ".concat(this.providerConfig.vidgetCustomControls.closeButton.transform," !important;")),e+="} "}return e+="</style>"}return""},t.prototype.registerEvent=function(e,t){this.isValidEvent(e)&&(this.player[this.playerEvents[e]]=t)},t.prototype.onPlay=function(t){this.playerConfig.videoId=t.asid;var i=this.playerElement.querySelector("#"+this.playerIdsPrefix+"aniplayerbut"),r=this.playerElement.querySelector("#"+this.playerIdsPrefix+"more-btn"),o=this.playerElement.querySelector("#"+this.playerIdsPrefix+"aniAnimation");"NOCNTRL"==t.ops?(this.timelineUpdate=!0,this.player.updateGui({playPause:!1,sound:!1,showTimeline:!1})):this.timelineUpdate&&(this.timelineUpdate=!1,this.player.updateGui({playPause:!0,sound:!0,showTimeline:!0})),t.clickThrough&&(i.style.display="block",r&&(r.onclick=function(){window.open(t.clickThrough)})),o.style.top="",o.style.position="",t&&t.tagInfo&&("pb"===t.tagInfo.type?(this.playerConfig.bid=t.tagInfo.bidCpm,this.playerConfig.partner=t.tagInfo.platform,this.playerConfig.prebid=!0):this.playerConfig.prebid=!1),this.setAniviewCustomePlayer(),e.prototype.onPlay.call(this,t)},t.prototype.setAniviewCustomePlayer=function(){if(this.providerConfig.vidgetCustomControls){if(this.providerConfig.vidgetCustomControls.playbackButtons&&this.providerConfig.vidgetCustomControls.playbackButtons.pause)c.getSubtree(k.getWidgetElement(this.providerConfig.containerID)).querySelector("#av-container #av-inner #gui #buttons #left #play-pause.pause").setAttribute("style",'background-image: url("'+this.providerConfig.vidgetCustomControls.playbackButtons.pause+'")');if(this.providerConfig.vidgetCustomControls.soundButtons){if(this.providerConfig.vidgetCustomControls.soundButtons.on)this.playerElement.querySelector("#sound").style.backgroundImage='url("'+this.providerConfig.vidgetCustomControls.soundButtons.on+'")';if(this.providerConfig.vidgetCustomControls.soundButtons.off)this.playerElement.querySelector("#sound").style.backgroundImage='url("'+this.providerConfig.vidgetCustomControls.soundButtons.off+'")'}if(this.providerConfig.vidgetCustomControls.adIcon){var e=this.playerElement.querySelector("#aniview-credit");if(e.style.position="relative",this.providerConfig.vidgetCustomControls.adIcon.top&&(e.style.top=this.providerConfig.vidgetCustomControls.adIcon.top),this.providerConfig.vidgetCustomControls.adIcon.left&&(e.style.left=this.providerConfig.vidgetCustomControls.adIcon.left),this.providerConfig.vidgetCustomControls.adIcon.right&&(e.style.right=this.providerConfig.vidgetCustomControls.adIcon.right),this.providerConfig.vidgetCustomControls.adIcon.text&&(e.style.content=this.providerConfig.vidgetCustomControls.adIcon.text),this.providerConfig.vidgetCustomControls.adIcon.font&&(e.style.fontFamily=this.providerConfig.vidgetCustomControls.adIcon.font),this.providerConfig.vidgetCustomControls.adIcon.fontSize&&(e.style.fontSize=this.providerConfig.vidgetCustomControls.adIcon.fontSize),this.providerConfig.vidgetCustomControls.adIcon.color&&(e.style.color=this.providerConfig.vidgetCustomControls.adIcon.color),this.providerConfig.vidgetCustomControls.adIcon.space&&(e.style.textIndent=this.providerConfig.vidgetCustomControls.adIcon.space),this.providerConfig.vidgetCustomControls.adIcon.bottom){e.style.top="unset";for(var t=this.providerConfig.vidgetCustomControls.adIcon.bottom,i=t.split(""),r="",o=0;o<i.length;o++)isNaN(i[o])||(r+=i[o]+"");e.style.bottom=""===r?t:0-(this.playerHeight-e.offsetHeight-10)+"px"}}}},t.prototype.storeVast=function(){return"aniview"},t.prototype.onError=function(e){e&&e.errorlimit&&!this.isInstream?(this.providerConfig.lazyListingsPixel&&((new Image).src=this.providerConfig.lazyListingsPixel),this.closePlayerNoAd()):this.playerPlay&&(T.error(this.sessionId,"Error during Aniview player play"),this.hidePlayer())},t.prototype.destroyPlayer=function(){return Xe(this,void 0,void 0,(function(){return Ye(this,(function(e){switch(e.label){case 0:return this.slider?[4,this.slider.destroySlider()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.player&&(this.player.onClose=null,this.player.onPause=null,this.player.close()),[2]}}))}))},t.prototype.getAdCurrentTime=function(){var e=0;return 1e3*(e=this.player.getAdDuration()-this.player.getAdRemainingTime()||e)},t.prototype.getChannelId=function(){var e=this.providerConfig.channelId;return this.providerConfig.odbChannelId&&this.providerConfig.odbChannelId.channelid?this.providerConfig.odbChannelId.channelid:(!e&&this.providerConfig.providersChannelIds&&this.providerConfig.providersChannelIds.Aniview&&(e=this.providerConfig.providersChannelIds.Aniview,this.providerConfig.fallBackProviderId=e),e)},t.prototype.loadAd=function(){return this.play(),Promise.resolve()},t.prototype.playLoadedAd=function(){this.player.startAd&&this.player.startAd()},t}(je),Ze=$e,et=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tt=window,it=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return et(i,e),i.prototype.provide=function(){var e=this;return new Promise((function(t,r){e.waterfallContinue=t,e.waterfallStop=r,i.trackInit(),e.videoProviderConfig.instream?e.handleInstream(e.waterfallContinue):e.handleOutstream(e.waterfallContinue)}))},i.prototype.handleOutstream=function(e){T.verbose(this.sessionId),this.player=new Ze(this.videoProviderConfig,this.sessionId,this.waterfallContinue,this.waterfallStop),this.downloadAniviewScript(e)},i.prototype.handleInstream=function(e){var t=this,i=new XMLHttpRequest;i.addEventListener("load",(function(){var r=JSON.parse(i.responseText);t.videoProviderConfig.preloaderLink=r.data.Vurls,t.player=new Ze(t.videoProviderConfig,t.sessionId,this.waterfallContinue,this.waterfallStop),t.downloadAniviewScript(e)})),i.open("GET","https://s3.amazonaws.com/test.wibbitz.com/boom/wibbitz-videos-en.json"),i.send()},i.prototype.downloadAniviewScript=function(e){var r=this;if(T.verbose(this.sessionId),tt.avPlayer)T.verbose(this.sessionId,"in","Aniview script already loaded in page"),this.onAniviewLoaded();else{T.verbose(this.sessionId,"inside","Loading Aniview provider");var o=document.createElement("script");o.src=i.playerProviderUrl,o.onload=this.onAniviewLoaded.bind(this),o.onerror=function(){r.videoProviderConfig.adBlockStatus?T.sendAudit(r.sessionId,t.ProviderFailure,"Ad blocker enabled",w.DEBUG):T.sendAudit(r.sessionId,t.ProviderFailure,"Aniview provider failed to load",w.DEBUG),e()},document.getElementsByTagName("head")[0].appendChild(o)}},i.prototype.onAniviewLoaded=function(){this.player.createPlayer(),this.player.getPlayer()&&this.player.start()},i.trackInit=function(){i.initTracked||(i.initTracked=!0)},i.prototype.updateExtraProviderSettings=function(){e.prototype.updateExtraProviderSettings.call(this),this.videoProviderConfig.maxRetries=this.videoProviderConfig.retries||4,this.videoProviderConfig.isTopOfFeedTestWithTOFVariants&&(this.videoProviderConfig.isTopOfFeedTestWithConfigTestVariant?this.videoProviderConfig.providerTimeout=3e4:this.videoProviderConfig.providerTimeout=25e3)},i.playerProviderUrl="https://player.aniview.com/script/6.1/aniview.js",i.initTracked=!1,i}(D),rt=it,ot=function(){function e(){this.obServiceUrl="https://videoclientsservicescalls.outbrain.com/",this.docFeaturesPromises={}}return e.prototype.getDocFeatures=function(e,t,i,r,o,n){return this.getDocFeaturesPromise(e,i)?this.getDocFeaturesPromise(e,i):this.createDocFeaturePromise(e,t,i,r,o,n)},e.prototype.createDocFeaturePromise=function(e,t,i,r,o,n){var s=this,a=i+"_"+e;return this.docFeaturesPromises[a]=new Promise((function(a,d){var l=[s.obServiceUrl,i,"?callback=OB_VidgetServiceCallBack","&docId=",e,"&pubId=",t,"&country=",r,"&platform=",o,"&playingType=",n].join(""),c=new XMLHttpRequest;c.open("GET",l),c.onload=function(){200===c.status?a(c.responseText):d("Request failed.  Returned status of "+c.status)},c.ontimeout=function(){d("Timeout - No response from server")},c.onerror=function(){d("Request failed.  Returned status of "+c.status)},c.timeout=5e3,c.send()})),this.docFeaturesPromises[a]},e.prototype.getDocFeaturesPromise=function(e,t){var i=t+"_"+e;if(this.docFeaturesPromises)return this.docFeaturesPromises[i]},e.prototype.getVideoVastoreUrl=function(e){switch(e.env){case"SIM":case"TEST":return C;default:return b}},e.prototype.storeVast=function(e,t,i,r){var o=nt.getVideoVastoreUrl(r),n="".concat(o,"/logVast?crid=").concat(e,"&partnerId=").concat(t);p.post(n,i)},e}(),nt=new ot,st=nt,at=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dt=function(e,t,i,r){return new(i||(i=Promise))((function(o,n){function s(e){try{d(r.next(e))}catch(e){n(e)}}function a(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((r=r.apply(e,t||[])).next())}))},lt=function(e,t){var i,r,o,n,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(o=2&n[0]?r.return:n[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,n[1])).done)return o;switch(r=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],r=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}},ct=function(e){function t(t,i,r,o){var n=e.call(this,t,i,r,o)||this;return n.playerInitPromise=null,n.preparePlayerElement(),n.setPlayerConfig(),n.playerEvents=De,n}return at(t,e),t.prototype.getPlayerContainerId=function(){return this.playerIdsPrefix+"vidplayer"},t.prototype.setPlayerConfig=function(){this.playerConfig={videoPlayerId:"Vidazoo",width:this.playerElement.style.width.split("px")[0],HD:!0}},t.prototype.preparePlayerElement=function(){e.prototype.preparePlayerElement.call(this),this.handlePlayerWrapperHeight()},t.prototype.createPlayer=function(e){this.playerElement?(this.player=e,this.registerEvents(),this.playerInitPromise=this.player.init()):(T.error(this.sessionId,"No Player Element created."),this.closePlayerNoAd("No Player Element created."))},t.prototype.registerEvent=function(e,t){this.isValidEvent(e)&&this.player.on(this.playerEvents[e],t)},t.prototype.destroyPlayer=function(){return dt(this,void 0,void 0,(function(){return lt(this,(function(e){switch(e.label){case 0:return this.slider?[4,this.slider.destroySlider()]:[3,2];case 1:e.sent(),e.label=2;case 2:return"providerPlayerReuse"===this.providerConfig.featureFlag&&(this.player.destroy(),t.vidazooPlayerObject=null),this.player&&this.player.destroy(),[2]}}))}))},t.prototype.pauseProvider=function(){if(this.player&&"providerPlayerReuse"===this.providerConfig.featureFlag){t.vidazooPlayerObject=this,this.providerConfig.isReelWidget&&t.vidazooPlayerObject.player.isPlaying()&&t.vidazooPlayerObject.player.skip(!0);var e=this.playerElement.querySelector("#"+this.getPlayerContainerId());e&&e.classList.add("vidget-hide"),t.vidazooPlayerObject.player=this.player}else this.destroyPlayer()},t.prototype.resumeProvider=function(){t.vidazooPlayerObject&&"providerPlayerReuse"===this.providerConfig.featureFlag&&(this.noVideoCallback=t.vidazooPlayerObject.noVideoCallback,this.videoPlayCallback=t.vidazooPlayerObject.videoPlayCallback,null!==t.vidazooPlayerObject.player.getHighestLoadedPrice()&&t.vidazooPlayerObject.player.getHighestLoadedPrice()>0?(this.player=t.vidazooPlayerObject.player,this.providerConfig.isReelWidget?this.continuousFlowReelWidget():this.continuousFlowRegularWidget()):this.closePlayerNoAd())},t.prototype.playerPlayAdCallback=function(t){this.checkPlayerObjectExist()?(window.removeEventListener("playLoadedAd",this.bindedPlayAdCallback),this.continuousFlowRegularWidget()):e.prototype.playerPlayAdCallback.call(this,t)},t.prototype.continuousFlowReelWidget=function(){k.callWidgetCallback(this.providerConfig.callbacks,"onReady",this.providerConfig.widgetIdx),this.bindedPlayAdCallback=this.playerPlayAdCallback.bind(this),window.addEventListener("playLoadedAd",this.bindedPlayAdCallback)},t.prototype.continuousFlowRegularWidget=function(){t.vidazooPlayerObject.player.resumeRoll();var e=this.playerElement.querySelector("#"+this.getPlayerContainerId());e&&e.classList.remove("vidget-hide"),this.play()},t.prototype.onPlay=function(i){this.adId=i.adId,this.vastXML=i.adm,"providerPlayerReuse"===this.providerConfig.featureFlag&&(t.vidazooPlayerObject&&t.vidazooPlayerObject.player?t.vidazooPlayerObject.player.holdRoll():this.player.holdRoll());var r="indirect";i&&i.tag&&("pre_bid"==i.tag.type||i.tag.isMarketPlace)?(this.playerConfig.prebid=!0,this.playerConfig.bid=i.price,this.playerConfig.partner=i.tag.partnerTagId?i.tag.partnerTagId:r):(this.playerConfig.prebid=!1,this.playerConfig.partner=r),this.postVastXML(this.providerConfig,i.adm,i.adId),e.prototype.onPlay.call(this,i)},t.prototype.postVastXML=function(e,t,i){if(t&&"storeVast"===e.featureFlag){var r=st.getVideoVastoreUrl(e),o="".concat(r,"/logVastMeasurement?adId=").concat(i);p.post(o,t)}},t.prototype.storeVast=function(){return st.storeVast(this.adId,92,this.vastXML,this.providerConfig),this.adId+"_92"},t.prototype.playerResume=function(){this.player.play()},t.prototype.providerPlay=function(){var e=this;this.playerInitPromise.then((function(){e.player.start()}))},t.prototype.isPaused=function(){return this.player.isPaused()},t.prototype.resize=function(e,t){this.player.resize(e,t,!0)},t.prototype.getAdCurrentTime=function(){var e=0;return 1e3*(e=this.player.getAdTime()||e)},t.prototype.playLoadedAd=function(){this.play()},t.prototype.hidePlayer=function(i){return void 0===i&&(i=!1),dt(this,void 0,void 0,(function(){return lt(this,(function(r){switch(r.label){case 0:return"providerPlayerReuse"===this.playerConfig.featureFlag&&t.vidazooPlayerObject&&t.vidazooPlayerObject.player.holdRoll(),[4,e.prototype.hidePlayer.call(this,i)];case 1:return r.sent(),[2]}}))}))},t.prototype.checkPlayerObjectExist=function(){return!!t.vidazooPlayerObject},t}(je),pt=ct,ut=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ht=window,gt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ut(i,e),i.prototype.provide=function(){var e=this;return new Promise((function(t,i){e.waterfallContinue=t,e.waterfallStop=i,"providerPlayerReuse"===e.videoProviderConfig.featureFlag&&pt.vidazooPlayerObject?(pt.vidazooPlayerObject.noVideoCallback=e.waterfallContinue,pt.vidazooPlayerObject.videoPlayCallback=e.waterfallStop,pt.vidazooPlayerObject.resumeProvider()):(e.player=new pt(e.videoProviderConfig,e.sessionId,e.waterfallContinue,e.waterfallStop),e.extractVidazooBootstrapConfig(),e.downloadVidazooScript(e.waterfallContinue))}))},i.prototype.shouldAutoPlay=function(){return this.videoProviderConfig.isReelWidget||this.videoProviderConfig.playMode===o.View||this.videoProviderConfig.playMode===o.ViewPreload},i.prototype.extractVidazooBootstrapConfig=function(){var e=this.videoProviderConfig.reportedSubWidgetId?this.videoProviderConfig.reportedWidgetId+"-"+this.videoProviderConfig.reportedSubWidgetId:this.videoProviderConfig.reportedWidgetId;return{userId:this.videoProviderConfig.userId,playerId:this.videoProviderConfig.playerId,auto:!1,el:"#"+this.player.getPlayerContainerId(),query:{param1:e,param2:this.videoProviderConfig.sourceId,campaign:this.videoProviderConfig.pubID,param3:this.videoProviderConfig.abTestVal,param4:this.videoProviderConfig.placementType,inApp:this.videoProviderConfig.inApp,appName:this.videoProviderConfig.appName,appBundle:"android"===this.videoProviderConfig.platform?this.videoProviderConfig.packageName:this.videoProviderConfig.bundleId,appCategory:this.videoProviderConfig.appCategory,appStoreUrl:this.videoProviderConfig.appStoreUrl,deviceIfa:"ios"===this.videoProviderConfig.platform?this.videoProviderConfig.mobileUserId:void 0,deviceAid:"android"===this.videoProviderConfig.platform?this.videoProviderConfig.mobileUserId:void 0,schain:this.videoProviderConfig.sellerJsonChain,userConsentStr:k.getConsentData(this.videoProviderConfig),userGdpr:this.videoProviderConfig.gdprInt,usPrivacy:this.videoProviderConfig.ccpaPrivacy},player:{autoPlay:"providerPlayerReuse"===this.videoProviderConfig.featureFlag||this.shouldAutoPlay(),holdStartRollSaga:"providerPlayerReuse"===this.videoProviderConfig.featureFlag||this.shouldAutoPlay(),loop:!0===this.videoProviderConfig.instream,skin:"https://static.vidazoo.com/basev/skins/outbrain/outbrain.js",useNativeRequest:this.videoProviderConfig.workerBypass,skinParams:{hideAdSkin:!1,hideContentSkin:!1,hideOnIma:!1,hideOnVpaid:!1,hideOnVast:!1,animateClose:!0,rounded:!0,close:!!this.videoProviderConfig.closeButton&&{style:this.videoProviderConfig.vidgetCustomControls&&this.videoProviderConfig.vidgetCustomControls.closeButton?{marginLeft:this.videoProviderConfig.vidgetCustomControls.closeButton.marginLeft,marginRight:this.videoProviderConfig.vidgetCustomControls.closeButton.marginRight,marginTop:this.videoProviderConfig.vidgetCustomControls.closeButton.marginTop,borderStyle:this.videoProviderConfig.vidgetCustomControls.closeButton.borderStyle,borderColor:this.videoProviderConfig.vidgetCustomControls.closeButton.borderColor,borderWidth:this.videoProviderConfig.vidgetCustomControls.closeButton.borderWidth,borderRadius:this.videoProviderConfig.vidgetCustomControls.closeButton.borderRadius,padding:this.videoProviderConfig.vidgetCustomControls.closeButton.padding,transform:this.videoProviderConfig.vidgetCustomControls.closeButton.transform}:{},soft:"providerPlayerReuse"===this.videoProviderConfig.featureFlag},progress:!0,sound:!0,playback:!0,playbackButtons:this.videoProviderConfig.vidgetCustomControls&&this.videoProviderConfig.vidgetCustomControls.playbackButtons?{play:this.videoProviderConfig.vidgetCustomControls.playbackButtons.play,pause:this.videoProviderConfig.vidgetCustomControls.playbackButtons.pause}:void 0,soundButtons:this.videoProviderConfig.vidgetCustomControls&&this.videoProviderConfig.vidgetCustomControls.soundButtons?{on:this.videoProviderConfig.vidgetCustomControls.soundButtons.on,off:this.videoProviderConfig.vidgetCustomControls.soundButtons.off}:void 0,logo:this.videoProviderConfig.vidgetCustomControls&&this.videoProviderConfig.vidgetCustomControls.adIcon?{link:this.videoProviderConfig.vidgetCustomControls.adIcon.link,top:this.videoProviderConfig.vidgetCustomControls.adIcon.top,left:this.videoProviderConfig.vidgetCustomControls.adIcon.left,right:this.videoProviderConfig.vidgetCustomControls.adIcon.right,bottom:this.videoProviderConfig.vidgetCustomControls.adIcon.bottom,height:this.videoProviderConfig.vidgetCustomControls.adIcon.height,width:this.videoProviderConfig.vidgetCustomControls.adIcon.width,text:this.videoProviderConfig.vidgetCustomControls.adIcon.text,font:this.videoProviderConfig.vidgetCustomControls.adIcon.font,fontSize:this.videoProviderConfig.vidgetCustomControls.adIcon.fontSize,color:this.videoProviderConfig.vidgetCustomControls.adIcon.color,space:this.videoProviderConfig.vidgetCustomControls.adIcon.space,clickthrough:this.videoProviderConfig.vidgetCustomControls.adIcon.clickthrough,target:this.videoProviderConfig.vidgetCustomControls.adIcon.target}:void 0},tagSentSessionCap:"providerPlayerReuse"===this.videoProviderConfig.featureFlag?void 0:parseInt(this.videoProviderConfig.maxRetries),saasDebug:this.videoProviderConfig.loglevel.level>=1},tpl:{width:"inherit",height:"inherit"},macros:{ob_page_url:encodeURI(this.videoProviderConfig.datasrc),docId:this.videoProviderConfig.docId}}},i.prototype.downloadVidazooScript=function(e){var r=this;if(T.verbose(this.sessionId),ht.vdz&&ht.vdz.create)T.verbose(this.sessionId,"inside","Vidazoo script already loaded in page"),this.onVidazooLoaded();else{T.verbose(this.sessionId,"inside","Loading Vidazoo provider");var o=document.createElement("script");o.src=i.playerProviderUrl,o.onload=this.onVidazooLoaded.bind(this),o.onerror=function(){r.videoProviderConfig.adBlockStatus?T.sendAudit(r.sessionId,t.ProviderFailure,"Ad blocker enabled",w.DEBUG):T.sendAudit(r.sessionId,t.ProviderFailure,"Vidazoo provider failed to load",w.DEBUG),e()},document.getElementsByTagName("head")[0].appendChild(o)}},i.prototype.onVidazooLoaded=function(){T.verbose(this.sessionId);var e=this.extractVidazooBootstrapConfig(),t=this;ht.vdz.create(e,(function(e,i){e?t.player.closePlayerNoAd(t.waterfallContinue):(t.player.createPlayer(i),t.player.start(),t.player.resize(t.player.getPlayerWidth(),t.player.playerHeight))}))},i.prototype.updateExtraProviderSettings=function(){e.prototype.updateExtraProviderSettings.call(this),this.videoProviderConfig.maxRetries=this.videoProviderConfig.retries||1},i.playerProviderUrl="https://static.vidazoo.com/basev/vpts.js",i}(D),vt=gt,ft=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yt=function(e,t,i,r){return new(i||(i=Promise))((function(o,n){function s(e){try{d(r.next(e))}catch(e){n(e)}}function a(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((r=r.apply(e,t||[])).next())}))},mt=function(e,t){var i,r,o,n,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(o=2&n[0]?r.return:n[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,n[1])).done)return o;switch(r=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],r=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}},bt=function(e){function i(t,i,r,o){var n=e.call(this,t,i,r,o)||this;return n.firstPlayOccurred=!1,n.preparePlayerElement(),n.setPlayerConfig(),n.playerEvents=We,n}return ft(i,e),i.prototype.getPlayerContainerId=function(){return this.playerIdsPrefix+"vidplayer"},i.prototype.setPlayerConfig=function(){this.playerConfig={videoPlayerId:"Vidazoo",width:this.playerElement.style.width.split("px")[0],HD:!0}},i.prototype.preparePlayerElement=function(){e.prototype.preparePlayerElement.call(this),this.handlePlayerWrapperHeight()},i.prototype.onCreatedPlayer=function(e){this.player=e,this.registerEvents(),this.registerOrganicEvents()},i.prototype.registerEvent=function(e,t){this.isValidEvent(e)&&this.player.on(this.playerEvents[e],t)},i.prototype.destroyPlayer=function(){this.player&&this.player.destroy()},i.prototype.pauseProvider=function(){this.destroyPlayer()},i.prototype.resize=function(e,t){this.player.resize(e,t,!0)},i.prototype.videoCompletedPlaying=function(){return yt(this,void 0,void 0,(function(){return mt(this,(function(t){switch(t.label){case 0:return[4,e.prototype.videoCompletedPlaying.call(this,!1)];case 1:return t.sent(),[2]}}))}))},i.prototype.onOrganicEvent=function(e){this.audit({contentProvider:"vidazoo",provider:"ORGANIC",eventType:e,viewability:this.getCurrentViewability(),trafficType:12})},i.prototype.onPlay=function(t){this.adId=t.adId,this.vastXML=t.adm,this.initPrebidData(),t&&t.tag&&(this.playerConfig.prebid=!0,this.playerConfig.bid=t.price,this.playerConfig.partner=t.tag.partnerTagId),this.postVastXML(this.providerConfig,t.adm,t.adId),e.prototype.onPlay.call(this,t,{syndicatorAlreadyPlaying:this.firstPlayOccurred}),this.firstPlayOccurred=!0},i.prototype.onPlayOrganic=function(i){this.initPrebidData(),this.onOrganicEvent(t.Play),e.prototype.onPlay.call(this,i,{organicEvent:!0,syndicatorAlreadyPlaying:this.firstPlayOccurred}),this.firstPlayOccurred=!0},i.prototype.initPrebidData=function(){this.playerConfig.prebid=null,this.playerConfig.bid=null,this.playerConfig.partner=null},i.prototype.postVastXML=function(e,t,i){if(t&&"storeVast"===e.featureFlag){var r=st.getVideoVastoreUrl(e),o="".concat(r,"/logVastMeasurement?adId=").concat(i);p.post(o,t)}},i.prototype.storeVast=function(){return st.storeVast(this.adId,92,this.vastXML,this.providerConfig),this.adId+"_92"},i.prototype.registerOrganicEvents=function(){this.registerEvent("onContentStart",this.onPlayOrganic.bind(this)),this.registerEvent("onContentPlay",this.onOrganicEvent.bind(this,t.Resume)),this.registerEvent("onContentPlay100",this.onOrganicEvent.bind(this,t.Complete)),this.registerEvent("onContentPause",this.onOrganicEvent.bind(this,t.Pause)),this.registerEvent("onKeepWatching",this.onOrganicEvent.bind(this,t.KeepWatching))},i}(je),Ct=bt,wt=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Pt=window,It=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return wt(i,e),i.prototype.provide=function(){var e=this;return new Promise((function(t,i){e.waterfallContinue=t,e.waterfallStop=i,e.player=new Ct(e.videoProviderConfig,e.sessionId,e.waterfallContinue,e.waterfallStop),e.downloadVidazooScript(e.waterfallContinue)}))},i.prototype.downloadVidazooScript=function(e){var r=this;T.verbose(this.sessionId),Pt.onVidazooSyndicationWidgetCreated=function(e){r.onWidgetCreated(e)};var o=document.createElement("script");o.src=i.playerProviderUrl,o.setAttribute("data-widget-id",this.videoProviderConfig.playerId),o.setAttribute("data-widget-created","onVidazooSyndicationWidgetCreated"),o.setAttribute("data-user-gdpr",this.videoProviderConfig.gdprInt),o.setAttribute("data-consent-str",k.getConsentData(this.videoProviderConfig)),o.setAttribute("data-campaign",this.videoProviderConfig.pubID);var n=this.videoProviderConfig.reportedSubWidgetId?this.videoProviderConfig.reportedWidgetId+"-"+this.videoProviderConfig.reportedSubWidgetId:this.videoProviderConfig.reportedWidgetId;o.setAttribute("data-param1",n),o.setAttribute("data-param2",this.videoProviderConfig.sourceId),o.setAttribute("data-param3",this.videoProviderConfig.abTestVal),o.setAttribute("data-param4",this.videoProviderConfig.placementType),this.videoProviderConfig.ccpaPrivacy&&o.setAttribute("data-us-privacy",this.videoProviderConfig.ccpaPrivacy),this.videoProviderConfig.sellerJsonChain&&o.setAttribute("data-schain",encodeURIComponent(JSON.stringify(this.videoProviderConfig.sellerJsonChain))),void 0!==o.async&&(o.async=!0),o.onerror=function(){r.videoProviderConfig.adBlockStatus?T.sendAudit(r.sessionId,t.ProviderFailure,"Ad blocker enabled",w.DEBUG):T.sendAudit(r.sessionId,t.ProviderFailure,"Vidazoo Syndication provider failed to load",w.DEBUG),e()},document.querySelector("#".concat(this.player.getPlayerContainerId())).appendChild(o)},i.prototype.onWidgetCreated=function(e){this.player.onCreatedPlayer(e)},i.prototype.updateExtraProviderSettings=function(){e.prototype.updateExtraProviderSettings.call(this),this.videoProviderConfig.maxRetries=this.videoProviderConfig.retries||1},i.playerProviderUrl="https://static.vidazoo.com/basev/stage/vwpts.js",i}(D),Et=It,St=(i(830),function(){function e(){}return e.storeReelElements=function(e){try{var t=c.getSubtree(k.getWidgetElement(e.containerID));this.reelElements={titleDiv:t.querySelector(".ob-reel-title.ob-reel-in"),titleTextDiv:t.querySelector(".ob-reel-title-text"),footerDiv:t.querySelector(".ob-reel-footer"),controlsDiv:t.querySelector(".ob-reel-controls"),sourceDiv:t.querySelector(".ob-reel-source"),sourceTextDiv:t.querySelector(".ob-reel-source-text"),readMoreDiv:t.querySelector(".ob-reel-more"),progressDiv:t.querySelector(".ob-reel-progress")},this.reelElements.titleTextChildSpan=this.reelElements.titleTextDiv.getElementsByTagName("span"),this.reelElements.titleTextChildDiv=this.reelElements.titleTextDiv.getElementsByTagName("div"),this.reelElements.readMoreSpan=this.reelElements.readMoreDiv.getElementsByTagName("span"),this.reelElements.readMoreOriginalText=this.reelElements.readMoreSpan[0].innerHTML}catch(e){T.error("","storeReelElements() "+e.toString())}},e.prepareReelLayoutForNative=function(e,t){try{this.storeReelElements(e),e.adSponsored&&e.adSponsored.length>0&&(this.reelElements.sourceTextDiv.innerHTML="Sponsored by "+e.adSponsored),this.reelElements.sourceTextDiv.classList.add("vidget-reel-source-text"),this.reelElements.sourceDiv.classList.add("vidget-reel-source"),this.reelElements.footerDiv.classList.add("vidget-reel-footer"),this.reelElements.controlsDiv.classList.add("vidget-reel-controls");var i=this.reelElements.titleTextDiv,r=this.reelElements.titleTextChildSpan,o=this.reelElements.titleTextChildDiv;if(e.adTitle.length>0?(this.reelElements.titleDiv.classList.add("vidget-reel-title"),r[0]&&o[0]&&(r[0].innerHTML=e.adTitle,i.removeAttribute("href"),i.removeAttribute("onmousedown"),this.reelElements.titleTextDiv.classList.add("vidget-reel-remove-cursor")),r[0]&&c.renderTitle(e.adTitle,this.reelElements.titleTextDiv),r[1]?this.reelElements.titleDiv.classList.add("vidget-reel-two-line-height"):this.reelElements.titleDiv.classList.add("vidget-reel-one-line-height")):this.reelElements.titleDiv.classList.add("vidget-reel-no-title"),this.reelElements.readMoreDiv.children[0]){var n=this.reelElements.readMoreDiv;e.ctaButton&&e.adCtaUrl&&(n.children[0].innerHTML=e.ctaButton,n.setAttribute("href",e.adCtaUrl),n.setAttribute("target","_blank"),n.setAttribute("onmousedown",""),n.addEventListener("click",t),n.classList.add("vidget-reel-read-more"))}}catch(e){T.error("","prepareReelLayoutForNative() "+e.toString())}},e.removeNativeLayoutFromReel=function(e){try{this.reelElements.footerDiv.classList.remove("vidget-reel-footer"),this.reelElements.sourceDiv.classList.remove("vidget-reel-source"),this.reelElements.titleDiv.classList.remove("vidget-reel-title"),this.reelElements.titleDiv.classList.remove(".vidget-reel-no-title"),this.reelElements.controlsDiv.classList.remove("vidget-reel-controls"),this.reelElements.readMoreDiv.classList.remove("vidget-reel-read-more"),this.reelElements.titleTextDiv.classList.remove("vidget-reel-remove-cursor"),this.reelElements.readMoreSpan[0]&&(this.reelElements.readMoreSpan[0].innerHTML=this.reelElements.readMoreOriginalText,this.reelElements.readMoreDiv.setAttribute("target","_self"),this.reelElements.readMoreDiv.removeEventListener("click",e))}catch(e){T.error("","removeNativeLayoutFromReel() "+e.toString())}},e}()),xt=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Tt=function(e,t,i,r){return new(i||(i=Promise))((function(o,n){function s(e){try{d(r.next(e))}catch(e){n(e)}}function a(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((r=r.apply(e,t||[])).next())}))},Vt=function(e,t){var i,r,o,n,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(o=2&n[0]?r.return:n[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,n[1])).done)return o;switch(r=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],r=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}},At=window,Rt=function(e){function i(t,i,r,o){var n=e.call(this,t,i,r,o)||this;return n.playerInitPromise=null,n.isNativeVideoPlayAllowed=!1,n.isNativeVideoPlayAllowed=n.providerConfig.nativeVideoMode===V.Allowed||n.providerConfig.nativeVideoMode===V.Required,n.preparePlayerElement(),n.outbrainPlayerElement=document.getElementById(n.getPlayerContainerId()),n.playerEvents=Le,n.extractPlayerConfig(),n}return xt(i,e),i.prototype.createPlayer=function(){var e=this;if(this.playerElement){if(this.addVideoDataToConfig(),!this.isPlayerShouldBeCreated())return;this.providerConfig.isNativeVideoPlay?(this.setNativeWrapperElement(),this.appendDescriptionHTML(),this.handleVideoDescriptionForNative()):this.handleVideoDescription(),this.handlePlayerWrapperHeight(),this.player=new At.OutbrainMP(this.getPlayerContainerId()),this.providerConfig.provider===r.OPAdisplay&&this.setDisplayAd(),this.initPlayer().then((function(){e.audit({eventType:t.Ready})})),this.registerEvents()}else this.closePlayerNoAd("No Player Element created.")},i.prototype.addVideoDataToConfig=function(){this.playerConfig&&(this.playerConfig.vastXML=this.providerConfig.vastXML,this.playerConfig.marketerId=this.providerConfig.advId,this.playerConfig.marketerName=this.providerConfig.advName,this.playerConfig.campaignId=this.providerConfig.campaignId,this.playerConfig.outstream=!0,this.playerConfig.customControls=JSON.stringify(this.providerConfig.vidgetCustomControls),this.playerConfig.containerId=this.providerConfig.containerID+"_"+this.providerConfig.widgetID,this.playerConfig.adDescription=this.providerConfig.adDescription,this.playerConfig.adTitle=this.providerConfig.adTitle,this.playerConfig.adSponsored=this.providerConfig.adSponsored,this.playerConfig.ctaButton=this.providerConfig.ctaButton,this.playerConfig.adCtaUrl=this.providerConfig.adCtaUrl,this.playerConfig.adSponsorLogo=this.providerConfig.adSponsorLogo?this.providerConfig.adSponsorLogo:{},this.playerConfig.width=this.playerElement.offsetWidth,this.playerConfig.publisherId=this.providerConfig.pubID,this.playerConfig.publisherName=this.providerConfig.publisherName,this.playerConfig.domain=this.providerConfig.pubDomain,this.playerConfig.widgetId=this.providerConfig.widgetID,this.playerConfig.partnerId=this.providerConfig.opaPartnerId,this.playerConfig.trackMoat=this.providerConfig.vidgetExternalMeasure,this.playerConfig.bitrateEnabled="minimal"===this.providerConfig.vidgetFootprint,this.playerConfig.placementWidth=this.playerElement.offsetWidth,this.playerConfig.placementHeight=this.playerElement.offsetHeight,this.playerConfig.isNativeVideo=this.providerConfig.isNativeVideo)},i.prototype.isPlayerShouldBeCreated=function(){if(this.providerConfig.isNativeVideo){if(this.providerConfig.nativeVideoMode===V.Never)return this.providerConfig.isNativeVideoPlay=!1,this.audit({eventType:t.VideoRejected,description:"Native video ad mismatch with widget config - configuredNative = Never and native assets available"}),this.closePlayerNoAd("configuredNative = Never and native assets available"),!1;this.providerConfig.isNativeVideoPlay=this.providerConfig.nativeVideoMode!==V.AsOutstream}else if(this.providerConfig.isNativeVideoPlay=!1,this.providerConfig.nativeVideoMode===V.Required)return this.providerConfig.isNativeVideoPlay=!1,this.audit({eventType:t.VideoRejected,description:"Native video ad mismatch with widget config - NativeVideoMode = Required and no native video"}),this.closePlayerNoAd("NativeVideoMode = Required and no native video"),!1;return!0},i.prototype.nativePixelDimensionsCheck=function(){if(this.providerConfig.playerLocation===h.InWidget){var e=k.getUpdatedPlayerDimensions(this.providerConfig);if(e&&(e.width<200||e.height<150)){if(this.providerConfig.nativeVideoMode===V.Required)return void this.closePlayerNoAd("Native assets not displayed, widget smaller than allowed.");this.removeAllNativeElements("Native assets not displayed, widget smaller than allowed.")}else e&&e.height<200&&e.height>150&&(this.playerConfig.adDescription&&T.sendAudit(this.sessionId,t.Debug,"Native description not displayed, widget smaller than allowed.",w.DEBUG),this.playerConfig.adDescription="")}},i.prototype.getVastXML=function(e){return fetch(e).then((function(e){return e.text()}))},i.prototype.extractPlayerConfig=function(){this.playerConfig={relativeSize:!0,autoPlay:!1,muted:!0,videoPlayerId:"Outbrain",showClose:this.providerConfig.closeButton}},i.prototype.initPlayer=function(){var e=this;return this.playerInitPromise=new Promise((function(i){T.sendAudit(e.sessionId,t.VidgetFeature,"--about to init player",w.DEBUG),e.player.init(e.playerConfig),T.sendAudit(e.sessionId,t.VidgetFeature,"--init player passed",w.DEBUG),e.outbrainPlayerElement.addEventListener("ready",(function(){T.sendAudit(e.sessionId,t.VidgetFeature,"--ready event fired, resolving playerInitPromise",w.DEBUG),i("ready")}))})),this.playerInitPromise},i.prototype.preparePlayerElement=function(){e.prototype.preparePlayerElement.call(this)},i.prototype.setNativeWrapperElement=function(){try{var e=void 0,t=void 0,i=void 0;this.providerConfig.isReelWidget||(i=this.outbrainPlayerElement,e=this.nativeBuildBelowDescriptionHTML(),i.parentNode.insertBefore(e,i.nextSibling),"aboveVideo"!==this.providerConfig.nativeVideoBtnPosition&&"aboveVideo"!==this.providerConfig.nativeVideoLogoPosition||(t=this.nativeBuildAboveDescriptionHTML(),i.parentNode.insertBefore(t,i)))}catch(e){T.error("","setNativeWrapperElement() "+e.toString())}},i.prototype.registerEvent=function(e,t){this.isValidEvent(e)&&this.outbrainPlayerElement.addEventListener(this.playerEvents[e],t)},i.prototype.getPlayerContainerId=function(){return this.playerIdsPrefix+"omp"},i.prototype.fireImpressionTrackers=function(){var e=this;this.isPixelTrackersFound()&&this.providerConfig.trackers.pixels.impressions&&c.firePixels(this.providerConfig.trackers.pixels.impressions,this.providerConfig,(function(t){e.reportTrackersToKibana(t)})),this.isJsTrackersFound()&&this.providerConfig.trackers.jsTrackers.impressions&&this.attachJsTracker(this.providerConfig.trackers.jsTrackers.impressions)},i.prototype.fireViewabilityTracker=function(){var e=this;this.isPixelTrackersFound()&&this.providerConfig.trackers.pixels.videoViewable&&c.firePixels(this.providerConfig.trackers.pixels.videoViewable,this.providerConfig,(function(t){e.reportTrackersToKibana(t)})),this.isJsTrackersFound()&&this.providerConfig.trackers.jsTrackers.videoViewable&&this.attachJsTracker(this.providerConfig.trackers.jsTrackers.videoViewable)},i.prototype.isPixelTrackersFound=function(){return this.providerConfig.trackers&&this.providerConfig.trackers.pixels},i.prototype.isJsTrackersFound=function(){return this.providerConfig.trackers&&this.providerConfig.trackers.jsTrackers},i.prototype.attachJsTracker=function(e){var i,r=this.playerElement.getElementsByTagName("video")[0];if(i=r?r.parentElement:this.playerElement)for(var o=0;o<e.length;o++){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.src=e[o],i.appendChild(n),this.reportTrackersToKibana(e[o])}else T.sendAudit(this.sessionId,t.vidgetLog,"JsTrackers: could not find attach js tracker")},i.prototype.getSliderHeight=function(){return this.providerConfig.sticky.height+this.getNativeAssetsHeight(!0)},i.prototype.resizeSlider=function(e,t){t-=this.getNativeAssetsHeight(!0),this.playerElement.querySelector("#"+this.getPlayerContainerId()).style.height=t+"px"},i.prototype.onPlay=function(t){e.prototype.onPlay.call(this,t),this.fireImpressionTrackers()},i.prototype.providerPlay=function(){var e=this;this.playerInitPromise.then((function(){try{e.playerConfig.adSystem=e.player.getAdSystem(),e.playerConfig.adBitrate=e.player.getVideoBitrate(),e.playerConfig.deliveryMode=e.player.getAdDeliveryType(),e.playerConfig.companionAds=e.player.getCompanionAds(),"minimal"===e.providerConfig.vidgetFootprint&&(e.playerConfig.heavyAdStatus=e.player.getHeavyAdStatus()),e.setRestrictions()}catch(t){T.error(e.sessionId,"Unable to get OPA data from obPlayer. ".concat(t))}e.player&&e.player.getVastHeight&&e.player.getVastWidth&&(e.mediaHeight=e.player.getVastHeight(),e.mediaWidth=e.player.getVastWidth(),e.checkMediaRatio(),e.updatePlayerByRatio(),e.providerConfig.adLoaded=!0,e.clearProviderRejectTimeout(),"blockHeavy"===e.providerConfig.featureFlag&&/noBitrate|noMatchingTag|vpaid/gi.test(e.playerConfig.heavyAdStatus)&&e.closePlayerVideoRejected("heavy ad avoided",t.VideoRejected),k.callWidgetCallback(e.providerConfig.callbacks,"onReady",e.providerConfig.widgetIdx));var i=e.providerConfig.playerMaxWidth;if("none"!==e.stickyPlayer||null===i.horizontal&&null===i.vertical||(e.resizePlayer(),e.handlePlayerWrapperHeight()),e.shouldAutoPlay()&&e.player&&(e.player.play(),e.providerConfig.provider!==r.N2V&&e.player.resize()),e.providerConfig.provider===r.OPAdisplay){var o=e.outbrainPlayerElement.querySelector(".omp-volume-btn");o&&(o.style.pointerEvents="none")}}))},i.prototype.setRestrictions=function(){"adnxs"===this.playerConfig.adSystem&&(this.shouldPlayerAllowUiTransition=!1)},i.prototype.playLoadedAd=function(){this.player&&(this.player.play(),this.player.resize())},i.prototype.loadAd=function(){return this.providerPlay(),this.playerInitPromise},i.prototype.getAdCurrentTime=function(){var e=0;return e=this.player.getAdCurrentTime()||e},i.prototype.hidePlayerButtons=function(){this.outbrainPlayerElement.querySelector("#omp-footer").style.display="none"},i.prototype.removeAllNativeElements=function(e){void 0===e&&(e=""),this.providerConfig.isNativeVideoPlay=!1;var i=this.getAboveAdTitleDescWrapperElement(),r=this.getAdTitleDescWrapperElement();i&&i.parentElement&&i.parentElement.removeChild(i),r&&r.parentElement&&r.parentElement.removeChild(r),T.sendAudit(this.sessionId,t.Debug,"All Native Elements removed if exist. ".concat(e),w.DEBUG)},i.prototype.removeDescription=function(e){this.playerElement.querySelector("#".concat(this.playerIdsPrefix,"adVideoDescription")).classList.remove("adVideoDescription"),e.parentElement&&e.parentElement.removeChild(e)},i.prototype.getAdTitleElement=function(){return this.playerElement.querySelector(".titleStrWrap")},i.prototype.getAdTitleDescWrapperElement=function(){return this.playerElement.querySelector(".adTitleDescWrapper")},i.prototype.getAboveAdTitleDescWrapperElement=function(){return this.playerElement.querySelector(".AboveAdTitleDescWrapper")},i.prototype.destroyPlayer=function(){return Tt(this,void 0,void 0,(function(){return Vt(this,(function(e){switch(e.label){case 0:return this.slider?[4,this.slider.destroySlider()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.player&&this.player.destroy&&(this.providerConfig.isNativeVideoPlay&&this.removeAllNativeElements("destroyPlayer()"),this.player.destroy(),this.providerConfig.isNativeVideoPlay=!1),[2]}}))}))},i.prototype.checkNativeSizePrecentege=function(){var e=k.getUpdatedPlayerDimensions(this.providerConfig),t=this.getAboveAdTitleDescWrapperElement(),i=this.getAdTitleDescWrapperElement(),r=t&&t.clientHeight?t.clientHeight:0;return(r+=i&&i.clientHeight?i.clientHeight:0)/e.height},i.prototype.checkIfNeedToRemoveNativeAssets=function(e,i){this.nativePixelDimensionsCheck();var r=this.checkNativeSizePrecentege();r>.35&&(0==e.removed&&(this.removeDescription(i),e.removed=!0,r=this.checkNativeSizePrecentege()),r>.35?this.providerConfig.nativeVideoMode===V.Required?(this.providerConfig.isNativeVideoPlay=!1,this.closePlayerNoAd("Native video skipped as assets bigger than 35% of the widget. (Required)")):this.removeAllNativeElements("Native assets not displayed, bigger than 35% of the widget"):e.hadValue&&T.sendAudit(this.sessionId,t.Debug,"Native description not displayed, bigger than 35% of the widget.",w.DEBUG))},i.prototype.appendDescriptionHTML=function(){var e=this;try{var i=k.getPlayerWrapperElement(this.providerConfig);T.sendAudit(this.sessionId,t.Verbose,"OB player appendDescriptionHTML",w.VERBOSE);var r=i.querySelector("#".concat(this.playerIdsPrefix,"adVideoTitleChild")),o=i.querySelector("#".concat(this.playerIdsPrefix,"adVideoDescChild")),n=i.querySelector("#".concat(this.playerIdsPrefix,"adVideoDescription")),s=i.querySelector("#".concat(this.playerIdsPrefix,"ctaBtn")),a=i.querySelector("#".concat(this.playerIdsPrefix,"ctaUrlBtn")),d=i.querySelector("#".concat(this.playerIdsPrefix,"adVideoSponsoredChild")),l=i.querySelector("#".concat(this.playerIdsPrefix,"adVideoSponsoredLogo")),p=document.createTextNode(this.playerConfig.adTitle),u=document.createTextNode(this.playerConfig.adDescription),g=document.createTextNode(this.playerConfig.ctaButton),v=document.createTextNode(this.playerConfig.adSponsored),f={removed:!1,hadValue:this.playerConfig.adDescription};if(s&&s.setAttribute("title",this.playerConfig.ctaButton),a&&(a.setAttribute("href",this.playerConfig.adCtaUrl),a.addEventListener("click",(function(){window.open(e.playerConfig.adCtaUrl,"_blank"),e.audit({eventType:t.Click,description:"clickOnCTA: ".concat(e.playerConfig.ctaButton),consentData:e.providerConfig.loglevel.level>=1?k.getConsentData(e.providerConfig):void 0}),e.pause()}))),this.playerConfig.adSponsorLogo.logo){var y=document.createElement("img");y.src=this.playerConfig.adSponsorLogo.logo,y.style.width=this.playerConfig.adSponsorLogo.width+"px",y.style.height=this.playerConfig.adSponsorLogo.height+"px",y.style.objectFit="contain",l.appendChild(y),y.parentElement.style.minWidth=this.playerConfig.adSponsorLogo.width+"px",y.parentElement.style.minHeight=this.playerConfig.adSponsorLogo.height+"px"}else l&&l.parentElement&&l.parentElement.removeChild(l);this.addNativeVideoStyling(),this.playerConfig.adTitle&&r?r.appendChild(p):r&&r.parentElement.removeChild(r),o&&(this.playerConfig.adDescription&&o?o.appendChild(u):(this.removeDescription(n),f.removed=!0)),this.playerConfig.ctaButton&&s?s.appendChild(g):s&&s.parentElement.removeChild(s),this.playerConfig.adSponsored&&d?d.appendChild(v):d&&d.parentElement.removeChild(d),this.playerConfig.adSponsorLogo||l||l&&l.parentElement.removeChild(l),void 0!==this.providerConfig.specificAdvName&&this.providerConfig.specificAdvName!==this.playerConfig.marketerName&&this.removeAllNativeElements("Native assets removed due to marketerName (".concat(this.playerConfig.marketerName,") and specificAdvName (").concat(this.playerConfig.specificAdvName,") mismatch")),this.providerConfig.playerLocation===h.InWidget&&this.checkIfNeedToRemoveNativeAssets(f,o);try{if("none"===this.stickyPlayer){var m=c.getSubtree(k.getWidgetElement(this.providerConfig.containerID)),b="white";if(m.querySelector(".ob-widget.ob-ultra-strip-layout")&&(b=getComputedStyle(m.querySelector(".ob-widget.ob-ultra-strip-layout")).getPropertyValue("background-color")),m.querySelector(".ob-dynamic-rec-container")){var C=getComputedStyle(m.querySelector(".ob-dynamic-rec-container")).getPropertyValue("background-color");"rgba(0, 0, 0, 0)"!=C&&(b=C)}Array.from(m.querySelectorAll(".ob_adTitleDescWrapper.Ob_direction")).forEach((function(e){e.style.backgroundColor=b}))}}catch(e){}}catch(e){this.audit({eventType:t.Verbose,description:"Debug: appendDescriptionHTML() "+e})}},i.prototype.getNativeAssetsHeight=function(e){void 0===e&&(e=!1);var t=0;try{var i=this.getAdTitleElement();i&&(t+=parseInt(window.getComputedStyle(i,null).getPropertyValue("height")));var r=this.getAdTitleDescWrapperElement();r&&(t+=parseInt(window.getComputedStyle(r,null).getPropertyValue("height")));var o=this.getAboveAdTitleDescWrapperElement();o&&(t+=parseInt(window.getComputedStyle(o,null).getPropertyValue("height"))),!this.providerConfig.isTopBranding&&e&&(t+=20)}catch(e){}return t},i.prototype.nativeCtaClick=function(){window.open(this.playerConfig.adCtaUrl,"_blank"),T.sendAudit(this.sessionId,t.Click,"clickOnCTA: ".concat(this.playerConfig.ctaButton),w.INFO),this.pause()},i.prototype.storeVast=function(){var e=this.providerConfig.opaProductId,t=this.providerConfig.opaPartnerId;return st.storeVast(e,t,this.playerConfig.vastXML,this.providerConfig),e+"_"+t},i.prototype.hidePlayer=function(t){return void 0===t&&(t=!1),Tt(this,void 0,void 0,(function(){return Vt(this,(function(i){switch(i.label){case 0:return[4,e.prototype.hidePlayer.call(this,t)];case 1:return i.sent(),this.providerConfig.isReelWidget&&St.removeNativeLayoutFromReel(this.nativeCtaClick),[2]}}))}))},i.prototype.showPlayer=function(){return Tt(this,void 0,void 0,(function(){var t,i=this;return Vt(this,(function(r){switch(r.label){case 0:return[4,e.prototype.showPlayer.call(this)];case 1:return r.sent(),this.providerConfig.isReelWidget&&this.isNativeVideoPlayAllowed&&this.providerConfig.isNativeVideoPlay&&St.prepareReelLayoutForNative(this.providerConfig,this.nativeCtaClick),t=this.playerElement.querySelector("#".concat(this.playerIdsPrefix,"titleSrcWrapper")),(this.isNativeVideoPlayAllowed||t&&t.innerText.length>0)&&window.setTimeout((function(){i.slider&&i.slider.isSliderActive||i.resizePlayer()}),0),[2]}}))}))},i.prototype.btnTextAdjust=function(e){try{if(e)for(var t=0;e.offsetWidth<e.scrollWidth;t++){if(parseInt(e.style.fontSize,10)<9)return;e.style[c.toDash("fontSize")]=parseInt(e.style.fontSize,10)-2+"px"}}catch(e){}},i.prototype.addNativeVideoStyling=function(){if(this.providerConfig.isReelWidget){var e=this.getAdTitleDescWrapperElement();e&&(e.style.display="none")}this.nativeTextDirection()},i.prototype.nativeTextDirection=function(){try{var e=this.playerElement.querySelector(".ob_adTitleDescWrapper.Ob_direction"),i=k.getWidgetRecInfo(this.providerConfig,"title"),r=k.getWidgetRecInfo(this.providerConfig,"source");!0===this.providerConfig.rtlWidget?(e&&(e.style.direction="rtl"),"{}"!==JSON.stringify(i)&&i.style.hasOwnProperty("textAlign")&&("left"==i.style.textAlign?e.style.direction="ltr":"right"==i.style.textAlign||"center"==i.style.textAlign?e.style.direction="rtl":"left"==r.style.textAlign&&(e.style.direction="ltr"))):(e&&(e.style.direction="ltr!important"),"{}"!==JSON.stringify(i)&&i.style.hasOwnProperty("textAlign")&&("right"==i.style.textAlign?e.style.direction="rtl":"left"==i.style.textAlign||"center"==i.style.textAlign?e.style.direction="ltr":r.style&&r.style.hasOwnProperty("textAlign")&&"right"==r.style.textAlign&&(e.style.direction="rtl")))}catch(e){this.audit({eventType:t.Verbose,description:"Debug: addNativeVideoStyling() "+e})}},i.prototype.nativeBuildBelowDescriptionHTML=function(){var e=document.createElement("div");return e.classList.add("ob_adTitleDescWrapper","Ob_direction","adTitleDescWrapper"),e.innerHTML=this.prepareBelowNativeElm(),e},i.prototype.nativeBuildAboveDescriptionHTML=function(){var e=document.createElement("div");return e.classList.add("ob_adTitleDescWrapper","Ob_direction","AboveAdTitleDescWrapper"),e.innerHTML=this.prepareAboveNativeElm(),e},i.prototype.prepareBelowNativeElm=function(){var e='<div class="'.concat(this.playerIdsPrefix,'ob_column" style="flex-basis:auto;flex-grow:1">\n                                        <div class="').concat(this.playerIdsPrefix,'ob_item ob-unit adVideoTitle"  id="').concat(this.playerIdsPrefix,'adVideoTitle"><div style="font-weight: 700" id="').concat(this.playerIdsPrefix,'adVideoTitleChild"></div></div>\n                                        <div class="').concat(this.playerIdsPrefix,'ob_item ob-unit adVideoDescription" id="').concat(this.playerIdsPrefix,'adVideoDescription"><div id="').concat(this.playerIdsPrefix,'adVideoDescChild"></div></div>\n                                        ').concat(this.showLogoSponsorDecision("belowVideo"),"\n                                    </div>");return e+="".concat(this.showButtonDecision("belowVideo"))},i.prototype.prepareAboveNativeElm=function(){return"".concat(this.showLogoSponsorDecision("aboveVideo")," ").concat(this.showButtonDecision("aboveVideo")," ")},i.prototype.showButtonDecision=function(e){var t="belowVideo"==this.providerConfig.nativeVideoBtnPosition?"margin:10px 2px 10px 2px":"align-items: center; margin: 5px;",i="belowVideo"==this.providerConfig.nativeVideoBtnPosition?"":"addPadding";return(e==this.providerConfig.nativeVideoBtnPosition?'<div class="'.concat(this.playerIdsPrefix,'ob_column adVideoCtaBtn" style="max-width: 40%; ').concat(t,'">\n                                <a class="').concat(this.playerIdsPrefix,'ob_item ctaUrlBtn" id="').concat(this.playerIdsPrefix,'ctaUrlBtn" target="_blank"   rel="category tag">\n                                    <div class="ctaBtn ').concat(i,'" id="').concat(this.playerIdsPrefix,'ctaBtn"></div>\n                                </a>\n                          </div>'):'<div class="'.concat(this.playerIdsPrefix,'ob_column adVideoCtaBtn" style="max-width: 40%; ').concat(t,'"></div>'))||""},i.prototype.showLogoSponsorDecision=function(e){var t="belowVideo"==this.providerConfig.nativeVideoLogoPosition?"":"display: flex; flex-grow: 15; flex-direction: row-reverse;";return(e==this.providerConfig.nativeVideoLogoPosition?"aboveVideo"==e?'<div class="'.concat(this.playerIdsPrefix,'ob_item ob-unit adVideoSponsored adVideoSponsoredExtra" style="').concat(t,'">\n                                    <div class="adVideoSponsored adVideoSponsoredLogo" style="margin-left: 5px;margin-right: 5px" id="').concat(this.playerIdsPrefix,'adVideoSponsoredLogo"></div>\n                                    <div class="adVideoSponsoredExtra" style="display: flex;flex-direction: column;">\n                                        <div class="adVideoSponsored adVideoSponsoredChild aboveVideoSponsorBy">Sponsored by</div>\n                                        <div class="adVideoSponsored adVideoSponsoredChild defaultAboveVideo" id="').concat(this.playerIdsPrefix,'adVideoSponsoredChild"></div>\n                                        </div>\n                               </div>'):'<div class="'.concat(this.playerIdsPrefix,'ob_item ob-unit adVideoSponsored adVideoSponsoredExtra" style="display: flex;">\n                            <div class="adVideoSponsored adVideoSponsoredLogo" id="').concat(this.playerIdsPrefix,'adVideoSponsoredLogo"></div>\n                            <div class="adVideoSponsored adVideoSponsoredChild" id="').concat(this.playerIdsPrefix,'adVideoSponsoredChild"></div>\n                </div>'):'<div class="'.concat(this.playerIdsPrefix,'ob_item ob-unit adVideoSponsoredExtra" style="').concat(t,'"></div>'))||""},i.prototype.btnStyleDecision=function(e,t,i){try{t&&t.style?(e.style[c.toDash("fontSize")]=t.style.fontSize,e.style[c.toDash("fontFamily")]=t.style.fontFamily,e.style[c.toDash("fontWeight")]=t.style.fontWeight):i&&i.style&&(e.style[c.toDash("fontSize")]=parseInt(i.style.fontSize,10)>14?"14px":i.style.fontSize,e.style[c.toDash("fontFamily")]=i.style.fontFamily)}catch(e){}},i.prototype.handleVideoDescriptionForNative=function(){var e=0,t=0,i=0,r=0;this.getElementMultiLineTruncation();var o=this.playerElement.querySelector("#"+this.playerIdsPrefix+"videoSource"),n=this.playerElement.querySelector("#"+this.playerIdsPrefix+"videoTitle"),s=this.playerElement.querySelector("#"+this.playerIdsPrefix+"videoBranding .ob_what"),a=this.getAdTitleDescWrapperElement(),d=this.getAboveAdTitleDescWrapperElement(),l=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoTitleChild"),p=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoDescChild"),u=this.playerElement.querySelector(".adVideoSponsoredExtra"),g=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoSponsoredChild"),v=this.playerElement.querySelector("#"+this.playerIdsPrefix+"ctaBtn"),f=this.providerConfig.title||!1,y=this.providerConfig.source||!1,m=this.providerConfig.isNativeVideoPlay;this.playerHeight=this.playerElement.clientHeight;var b=k.isEmptyWidget(this.providerConfig.containerID);if(!b&&(f||y||m)){var C=y||m?k.getWidgetRecInfo(this.providerConfig,"source"):{},w=f||m?k.getWidgetRecInfo(this.providerConfig,"title"):{},P=["color","fontStyle","lineHeight","fontFamily","fontWeight","border","fontSize","textAlign"];for(var I in P){var E=P[I];y&&C.style&&C.style.hasOwnProperty(E)&&(o.style[c.toDash(E)]=C.style[E]),f&&w.style&&w.style.hasOwnProperty(E)&&(n.style[c.toDash(E)]=w.style[E]),y&&(o.style.marginLeft="5px",o.style.marginRight="5px"),f&&(n.style.marginLeft="5px",n.style.marginRight="5px"),l&&w.style&&w.style.hasOwnProperty(E)&&(l.style[c.toDash(E)]=w.style[E]),u&&C.style&&C.style.hasOwnProperty(E)&&(u.style[c.toDash(E)]=C.style[E]),g&&w.style&&"aboveVideo"==this.providerConfig.nativeVideoLogoPosition&&w.style.hasOwnProperty(E)&&(g.style[c.toDash(E)]=w.style[E])}l&&w.style&&w.style.hasOwnProperty("textAlign")&&"center"==l.style.textAlign&&(l.style.textAlign="inherit"),p&&w.style&&w.style.hasOwnProperty("fontFamily")&&(p.style[c.toDash("fontFamily")]=w.style.fontFamily,p.style[c.toDash("color")]=w.style.color),p&&C.style&&w.style&&C.style.hasOwnProperty("fontSize")&&w.style.hasOwnProperty("fontSize")?p.style[c.toDash("fontSize")]=Math.round((parseInt(C.style.fontSize,10)+parseInt(w.style.fontSize,10))/2)+"px":p&&!C.style&&w.style&&((""==p.style.fontSize||parseInt(p.style.fontSize,10)>14)&&(p.style.fontSize="14px"),w.style.fontSize<p.style.fontSize&&(p.style.fontSize=w.style.fontSize)),p&&w.style&&w.style.hasOwnProperty("textAlign")&&(p.style[c.toDash("textAlign")]=w.style.textAlign,"center"==p.style.textAlign&&(p.style.textAlign="inherit")),v&&this.btnStyleDecision(v,p,l),f&&(e=Math.ceil(n.clientHeight)),y&&(t=Math.ceil(o.clientHeight)),a&&(i=Math.ceil(a.clientHeight)),d&&(i+=Math.ceil(d.clientHeight))}else b&&(f&&(e=Math.ceil(n.clientHeight)),y&&(t=Math.ceil(o.clientHeight)),a&&(i=Math.ceil(parseFloat(window.getComputedStyle(a,null).getPropertyValue("height")))),d&&(i+=Math.ceil(parseFloat(window.getComputedStyle(d,null).getPropertyValue("height")))),y&&(o.style.marginLeft="5px",o.style.marginRight="5px"),f&&(n.style.marginLeft="5px",n.style.marginRight="5px"));if(this.btnTextAdjust(v),null!==s){var S=window.getComputedStyle(s,null);r=Math.ceil(parseFloat(S.getPropertyValue("height"))+parseFloat(S.getPropertyValue("padding-top"))+parseFloat(S.getPropertyValue("padding-bottom")))}"none"!==this.stickyPlayer&&this.isPlayerOutOfViewport?this.playerDescriptionHeight=0===i?e+t:i:this.playerDescriptionHeight=e+t,this.playerBrandingHeight=r,this.setMarginWhenDescription(),this.providerConfig.playerLocation===h.InWidget&&this.isMobile&&(this.playerWrapperHeight+=this.getNativeAssetsHeight(),this.playerElement.style.paddingBottom="0px"),this.avoidSliderWhenSmall(),this.playerHeight="sliderAlwaysRight"===this.stickyPlayer?this.providerConfig.sticky.height:this.playerHeight},i.prototype.setMarginWhenDescription=function(e){void 0===e&&(e=this.playerDescriptionHeight),!k.isEmptyWidget(this.providerConfig.containerID)&&"none"!==this.stickyPlayer||this.providerConfig.isTopBranding?this.providerConfig.isNativeVideoPlay&&(e=Math.max(e,10)):e=Math.max(e,this.playerBrandingHeight),"none"===this.stickyPlayer||this.providerConfig.isTopBranding||(e+=this.playerBrandingHeight),"none"===this.stickyPlayer||this.isPlayerOutOfViewport||this.providerConfig.playerLocation!==h.InWidget||(e=0),this.playerElement.style.paddingBottom="".concat(e,"px"),this.playerElement.style.marginBottom="".concat(k.vidgetBottomMargin,"px")},i.prototype.resizePlayer=function(){if(this.player){var e;if(null===(e=k.getPlayerDimensionsByMediaSize(this.providerConfig,this.mediaWidth,this.mediaHeight)))return;if(this.playerElement.style.width=e.width+"px",this.playerElement.style.maxWidth=e.width+"px",this.resize(e.width,e.height),this.providerConfig.playerLocation!==h.InWidget){var t=this.playerElement.querySelector("#"+this.getPlayerContainerId());if(t.offsetHeight!==Math.floor(9*e.width/16))t.style.height=e.height+"px",k.isEmptyWidget(this.providerConfig.containerID)&&this.providerConfig.ghostFixedSize?t.style.height=e.height-this.getNativeAssetsHeight()+"px":this.playerElement.style.height=e.height+this.getNativeAssetsHeight()+"px"}}},i.prototype.setNativeEndCard=function(){var e=this,i=this.outbrainPlayerElement,r=document.createElement("div");r.classList.add("ob-native-endcard"),this.playerConfig.adCtaUrl&&(r.style.cursor="pointer",r.addEventListener("click",(function(i){i.preventDefault(),e.audit({eventType:t.Click,description:"Native endcard clicked: ".concat(e.playerConfig.ctaButton),consentData:e.providerConfig.loglevel.level>=1?k.getConsentData(e.providerConfig):void 0}),window.open(e.playerConfig.adCtaUrl,"_blank")}))),i.style.transition="opacity 0.5s linear, border-width 0.5s linear";var o=document.createElement("div");o.classList.add("omp-cover");var n=i.clientWidth/25;r.style.fontSize=n+"px",r.style.padding=.5*n+"px "+n+"px",r.innerHTML=this.playerConfig.ctaButton;var s=this.playerElement.querySelector("#".concat(this.playerIdsPrefix,"ctaBtn"));s&&(r.style.fontFamily=s.style.fontFamily);var a=this.playerElement.querySelector("#omp-footer");a&&a.style&&(a.style.visibility="hidden"),o.appendChild(r),i.appendChild(o)},i.prototype.setDisplayAd=function(){var e=this.outbrainPlayerElement,t=document.createElement("iframe");t.classList.add("obv-display-ad"),t.width=this.providerConfig.displayAd.width+10,t.height=this.providerConfig.displayAd.height+10,e.appendChild(t);var i=window.unescape(this.providerConfig.displayAd.displayHTML);t.contentWindow.document.open(),t.contentWindow.document.write(i),t.contentWindow.document.close()},i.prototype.handleHeavyAds=function(e){return"vpaid"===e?"vpaid":"".concat(e," - ").concat(this.playerConfig.adSystem)},i.prototype.listenToPlayerHeightTransitionEnd=function(){var e=this;this.playerElement.ontransitionend=function(t){"height"===t.propertyName&&(e.resize(e.playerElement.offsetWidth,e.playerElement.offsetHeight),e.playerElement.ontransitionend=null)}},i.prototype.resize=function(t,i){this.providerConfig.provider!==r.N2V&&e.prototype.resize.call(this,t,i)},i}(je),Ot=Rt;!function(e){e[e.Pixel=1]="Pixel",e[e.JsTracker=2]="JsTracker"}(Ge||(Ge={})),function(e){e[e.Impression=1]="Impression",e[e.VideoViewable=4]="VideoViewable"}(Je||(Je={}));var _t=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),kt=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDemo=!1,t}return _t(i,e),i.prototype.provide=function(){var e=this;return new Promise((function(t,i){var r=null,o=k.getQueryString("wixp");if(o){if(!(!!(r=k.getQueryString("urlVast"))&&-1!==o.indexOf(e.videoProviderConfig.widgetID)))return void t();e.isDemo=!0}e.waterfallContinue=t,e.waterfallStop=i,e.player=new Ot(e.videoProviderConfig,e.sessionId,e.waterfallContinue,e.waterfallStop),e.isDemo?e.fakeVastVideo(r):e.lookupRTBVideo(e.waterfallContinue)}))},i.prototype.fakeVastVideo=function(e){fetch(decodeURIComponent(e)).then((function(e){return e.text()})).then(i.vastMock.bind(this)).then(this.onOutbrainRtbResponse.bind(this,(function(){})))},i.vastMock=function(e){var t=JSON.parse(new URLSearchParams(location.search).get("nativeOptions"))||{},i=!(t["native-title"]&&t["native-cta-text"]);return{doc:[{video:{vastxml:e,title:t["native-title"]?t["native-title"]:i?"Designer Outlet & Fashion Brands up to 80% off":"",url:t["native-cta-target-url"]?decodeURIComponent(t["native-cta-target-url"]):i?"https://www.outbrain.com/":""},advId:"00001",is_native_video:"true",adv_name:"Demo Page",desc:t["native-description"]?t["native-description"]:i?"The luxury handbag by Prada, the classic belt by Gucci or high quality sweater of Emporio Armani. Discover sought-after designer fashion from over 150 brands":"",cta:t["native-cta-text"]?t["native-cta-text"]:i?"Buy Now":"",source_display_name:t["native-brand-name"]?t["native-brand-name"]:i?"Fashionesta":"",logo:{url:t["native-logo-url"]?decodeURIComponent(t["native-logo-url"]):i?"https://libs.outbrain.com/video/omri/Outbrain_Emilia_logo.png":""}}]}},i.prototype.downloadOutbrainPlayerScript=function(e){var r=this;if(window.OutbrainMP)this.onPlayerScriptLoaded();else{var o=document.createElement("script");o.src=i.playerProviderUrl,o.onload=this.onPlayerScriptLoaded.bind(this),o.onerror=function(){r.videoProviderConfig.adBlockStatus?(T.sendAudit(r.sessionId,t.ProviderFailure,"Ad blocker enabled",w.DEBUG),T.sendAudit(r.sessionId,t.VidgetFeature,"--Ad blocker enabled",w.DEBUG)):(T.sendAudit(r.sessionId,t.ProviderFailure,"OPA provider failed to load",w.DEBUG),T.sendAudit(r.sessionId,t.VidgetFeature,"--OPA provider failed to load",w.DEBUG)),e()},document.getElementsByTagName("head")[0].appendChild(o)}},i.prototype.onPlayerScriptLoaded=function(){T.sendAudit(this.sessionId,t.VidgetFeature,"--player script loaded",w.DEBUG),this.player.createPlayer(),this.player.getPlayer()?(T.sendAudit(this.sessionId,t.VidgetFeature,"--calling player start",w.DEBUG),this.player.start()):T.sendAudit(this.sessionId,t.VidgetFeature,"--player is undefined",w.DEBUG)},i.prototype.onOutbrainRtbResponse=function(e,i){T.sendAudit(this.sessionId,t.VidgetFeature,"--RTB response got to client",w.DEBUG);var o=this.getRtbDataFromResponse(i);o?(this.videoProviderConfig.vastXML=o.vastXML,this.videoProviderConfig.pageCategories=o.pageCategories,this.videoProviderConfig.userCategories=o.userCategories,this.videoProviderConfig.trackers=o.trackers,this.videoProviderConfig.provider===r.OPAdisplay?(this.videoProviderConfig.displayAd={},this.videoProviderConfig.displayAd.displayHTML=o.displayHTML,this.videoProviderConfig.displayAd.width=o.width,this.videoProviderConfig.displayAd.height=o.height,this.videoProviderConfig.trackers.pixels.videoViewable.push(o.onViewed)):(this.videoProviderConfig.advId=o.advId,this.videoProviderConfig.advName=o.advName,this.videoProviderConfig.campaignId=o.campaignId,this.videoProviderConfig.adTitle=o.title,this.videoProviderConfig.adDescription=o.description,this.videoProviderConfig.ctaButton=o.ctaButton,this.videoProviderConfig.adSponsored=o.sponsored,this.videoProviderConfig.adSponsorLogo=o.sponsorLogo,this.videoProviderConfig.adCtaUrl=o.ctaUrl,this.videoProviderConfig.opaPartnerId=o.opaPartnerId,this.videoProviderConfig.opaAdId=o.opaAdId,this.videoProviderConfig.agencyId=o.agencyId,this.videoProviderConfig.opaProductId=o.productId,this.videoProviderConfig.isNativeVideo=o.isNativeVideo),this.postVastXML(this.videoProviderConfig.vastXML,o.productId,o.opaPartnerId),this.downloadOutbrainPlayerScript(e)):(T.sendAudit(this.sessionId,t.VidgetFeature,"--RTB response invalid",w.DEBUG),this.player.closePlayerNoAd())},i.prototype.postVastXML=function(e,t,i){try{if(this.videoProviderConfig.vastXML&&this.videoProviderConfig.storeVast){var r=st.getVideoVastoreUrl(this.videoProviderConfig),o="".concat(r,"/logVast?crid=").concat(t,"&partnerId=").concat(i);p.post(o,e)}}catch(e){}},i.prototype.isOpaVideo=function(){return this.videoProviderConfig.provider===r.OPA},i.prototype.getRtbDataFromResponse=function(e){var r=null,o=e.doc,n=this.isOpaVideo();if(o&&o[0]){var s=n?o[0].video:o[0];if(s){var a="belowVideo"==this.videoProviderConfig.nativeVideoLogoPosition?20:60;r={vastXML:n?s.vastxml:i.getTempVastForBlackVideo(o[0].url),pageCategories:n?s.page_category:null,userCategories:n?s.user_interest_category:null,trackers:this.extractEventTrackers(o[0].eventTrackers),advId:o[0].advId,advName:o[0].adv_name,campaignId:o[0].pc_cmp_id,title:s.title,description:o[0].desc,sponsored:o[0].source_display_name?o[0].source_display_name:"",ctaButton:o[0].cta,ctaUrl:s.url,sponsorLogo:{logo:o[0].logo?o[0].logo.url:"",width:a,height:a},opaPartnerId:o[0].partner_id,opaAdId:o[0].pc_id,agencyId:o[0].agency_id,displayHTML:o[0].display?o[0].display.html:void 0,width:o[0].display?o[0].display.width:0,height:o[0].display?o[0].display.height:0,onViewed:o[0]["on-viewed"],productId:o[0].product_id?o[0].product_id:null,isNativeVideo:o[0].is_native_video&&"true"===o[0].is_native_video},this.videoProviderConfig.isProviderControlledPauseOutOfView=o[0].video_pause_out_of_view&&/^(true)$/i.test(o[0].video_pause_out_of_view),T.sendAudit(this.sessionId,t.VidgetFeature,"--rtb data valid",w.DEBUG),T.sendAudit(this.sessionId,t.Debug,JSON.stringify(["title: "+s.title,"description: "+o[0].desc,"sponsored: "+o[0].source_display_name,"ctaButton: "+o[0].cta,"ctaUrl: "+s.url,"sponsorLogo: "+r.sponsorLogo.logo]),w.DEBUG)}else{var d=n?"opa video":"not opa video";T.sendAudit(this.sessionId,t.VidgetFeature,"--no video data, is opa video = ".concat(d),w.DEBUG)}}else T.sendAudit(this.sessionId,t.VidgetFeature,"--no doc in rtb response",w.DEBUG);return r},i.prototype.extractEventTrackers=function(e){var i=this,r={pixels:{impressions:[],videoViewable:[]},jsTrackers:{impressions:[],videoViewable:[]}};return null==e||e.forEach((function(e){e.method===Ge.Pixel?(e.event===Je.Impression&&r.pixels.impressions.push(e.url),e.event===Je.VideoViewable&&r.pixels.videoViewable.push(e.url)):e.method===Ge.JsTracker?(e.event===Je.Impression&&r.jsTrackers.impressions.push(e.url),e.event===Je.VideoViewable&&r.jsTrackers.videoViewable.push(e.url)):T.sendAudit(i.sessionId,t.vidgetLog,"Event tracker of type: ".concat(e.method))})),r},i.prototype.lookupRTBVideo=function(e){var t=this.getRequestData();this.isRTBVideoReceivedFromPreAuction()?this.useFirstAuctionVideo(e):k.odbCall(t,this.onOutbrainRtbResponse.bind(this,e))},i.prototype.getRequestData=function(){var e={permalink:this.videoProviderConfig.datasrc,widgetId:this.videoProviderConfig.widgetID,originWidgetIdx:this.videoProviderConfig.widgetIdx,rtbEnabled:this.isRtbEnabled(),fId:this.videoProviderConfig.fid?this.videoProviderConfig.fid.toString():null,feedFatherIdx:this.videoProviderConfig.fIndex?this.videoProviderConfig.fIndex.toString():null,feedVersion:this.videoProviderConfig.feedVersion,extraParams:this.getExtraRequestParams(),et:!0};return this.videoProviderConfig.isVideoRequestInView=this.isWidgetInView(),e},i.prototype.useFirstAuctionVideo=function(e){var t=k.getOpaFirstAuction(this.videoProviderConfig.widget);this.onOutbrainRtbResponse(e,t.documents),this.videoProviderConfig.firstAucationExceuted=!0},i.prototype.isRTBVideoReceivedFromPreAuction=function(){return k.getOpaFirstAuction(this.videoProviderConfig.widget).documents&&!this.videoProviderConfig.firstAucationExceuted},i.prototype.isRtbEnabled=function(){return!0},i.prototype.getExtraRequestParams=function(){var e="";e+="servePc=true",e+="&maxNumAds=1",e+="&num=1",e+="&maxNumOrganicRecs=0",e+="2"===this.videoProviderConfig.feedVersion?"&fAB=".concat(this.videoProviderConfig.fAB):"",e+=this.videoProviderConfig.feedIdx?"&feedIdx=".concat(this.videoProviderConfig.feedIdx):"",e+=this.videoProviderConfig.inApp&&this.videoProviderConfig.appName?"&appName="+this.videoProviderConfig.appName:"",e+=this.videoProviderConfig.inApp&&this.videoProviderConfig.appCategory?"&appCategory="+this.videoProviderConfig.appCategory:"",e+=this.videoProviderConfig.inApp&&this.videoProviderConfig.appStoreUrl?"&appStoreUrl="+this.videoProviderConfig.appStoreUrl:"",e+=this.videoProviderConfig.inApp&&this.videoProviderConfig.deviceIfa&&"ios"===this.videoProviderConfig.platform?"&deviceIfa="+this.videoProviderConfig.mobileUserId:"",e+=this.videoProviderConfig.inApp&&this.videoProviderConfig.deviceAid&&"android"===this.videoProviderConfig.platform?"&deviceAid="+this.videoProviderConfig.mobileUserId:"";var t=this.videoProviderConfig.isReelWidget?h.Midroll:this.videoProviderConfig.playerLocation;e+=t?"&playerLocation=".concat(t):"";var i=this.videoProviderConfig.inApp&&"android"===this.videoProviderConfig.platform;return i&&this.videoProviderConfig.packageName?e+="&appBundle="+this.videoProviderConfig.packageName:!i&&this.videoProviderConfig.appBundle&&(e+="&appBundle="+this.videoProviderConfig.appBundle),e+=this.videoProviderConfig.externalCampaignId?"&extid="+this.videoProviderConfig.externalCampaignId:"",e+=this.videoProviderConfig.externalCampaignId2?"&extid2="+this.videoProviderConfig.externalCampaignId2:"",this.videoProviderConfig.provider===r.OPAdisplay?(e+="&recMode=odb_dynamic_display",e+="&isAdChoicesOnImage=true",e+="&isResponsiveDisplayAd=false",e+="&rtbEnabled=true",e+="&amplifyEnabled=false",e+=this.player.getPlayerWidth()?"&cw="+this.player.getPlayerWidth().toString():"",e+=this.player.getPlayerWidth()&&this.player.getPlayerHeight()?"&displayAdSize=".concat(this.player.getPlayerWidth().toString(),"x").concat(this.player.getPlayerHeight().toString()):""):(e+="&recMode=odb_video",e+=this.player.getPlayerWidth()?"&videoWidth="+this.player.getPlayerWidth().toString():"",e+=this.player.getPlayerHeight()?"&videoHeight="+this.player.getPlayerHeight().toString():"",e+=this.isWidgetInView()||this.videoProviderConfig.playMode==o.ViewPreload?"&videoPlaybackMethod=inView":"&videoPlaybackMethod=autoPlay",e+="&pauseOutOfView=".concat(this.videoProviderConfig.pauseOutOfView),e+=void 0!==this.videoProviderConfig.bidFloor&&null!==this.videoProviderConfig.bidFloor?"&videoBidFloor="+this.videoProviderConfig.bidFloor:""),e+=void 0!==this.videoProviderConfig.opaDemoBidder?"&fakeRec=RTB-".concat(this.videoProviderConfig.opaDemoBidder):""},i.prototype.updateExtraProviderSettings=function(){e.prototype.updateExtraProviderSettings.call(this),this.videoProviderConfig.trafficType=this.videoProviderConfig.provider===r.OPAdisplay?11:9},i.getTempVastForBlackVideo=function(e){var t=e?"<VideoClicks>\n              <ClickThrough><![CDATA[".concat(e,"]]></ClickThrough>\n              <ClickTracking/>\n            </VideoClicks>"):"";return'<?xml version="1.0" encoding="utf-8"?>\n            <VAST version="3.0">\n              <Ad id="md9ps1fw9">\n                <InLine>\n                  <AdSystem><![CDATA[Outbrain Ads]]></AdSystem>\n                  <AdTitle><![CDATA[OpaDisplayAd]]></AdTitle>\n                  <Impression/>\n                  <Creatives>\n                    <Creative id="1597659734779">\n                      <Linear>\n                        <Duration><![CDATA[00:00:15]]></Duration>\n                        <TrackingEvents/>\n                        <MediaFiles>\n                            <MediaFile delivery="progressive" type="video/mp4" width="640" height="360" bitrate="700"><![CDATA[https://ob-video-res.cloudinary.com/video/upload/q_auto,w_640/v1602418625/w90aroshnxpd48vg35xe.mp4]]></MediaFile>                       \n                        </MediaFiles>\n                        '.concat(t,"\n                      </Linear>\n                    </Creative>\n                  </Creatives>\n                </InLine>\n              </Ad>\n            </VAST>")},i.playerProviderUrl="https://libs.outbrain.com/video/outbrain-media-player/current/omp.min.js",i}(D),Dt=kt,Wt=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bt=function(e,t,i,r){return new(i||(i=Promise))((function(o,n){function s(e){try{d(r.next(e))}catch(e){n(e)}}function a(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((r=r.apply(e,t||[])).next())}))},Lt=function(e,t){var i,r,o,n,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(o=2&n[0]?r.return:n[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,n[1])).done)return o;switch(r=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],r=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}},Mt=function(e){function i(t,i,r,o){var n=e.call(this,t,i,r,o)||this;return n.firstPlayOccurred=!1,n.preparePlayerElement(),n.setPlayerConfig(),n.playerEvents=Be,n}return Wt(i,e),i.prototype.getPlayerContainerId=function(){return this.playerIdsPrefix+"VI_Player"},i.prototype.setPlayerConfig=function(){this.playerConfig={videoPlayerId:"VI",width:this.playerElement.style.width.split("px")[0],HD:!0}},i.prototype.resize=function(e,t){this.player.player.resize(e)},i.prototype.initPrebidData=function(){this.playerConfig.prebid=null,this.playerConfig.bid=null,this.playerConfig.partner=null},i.prototype.onPlay=function(t){this.playerConfig.prebid=!0,this.playerConfig.bid=t.data&&t.data.netCpm?t.data.netCpm:"0.001",this.playerConfig.partner="vi",e.prototype.onPlay.call(this,t,{syndicatorAlreadyPlaying:this.firstPlayOccurred}),this.firstPlayOccurred=!0},i.prototype.preparePlayerElement=function(){e.prototype.preparePlayerElement.call(this),this.handlePlayerWrapperHeight()},i.prototype.onCreatedPlayer=function(e){this.player=e,this.registerEvents(),this.registerOrganicEvents()},i.prototype.registerEvent=function(e,t){this.isValidEvent(e)&&this.player.on(this.playerEvents[e],t)},i.prototype.videoCompletedPlaying=function(){return Bt(this,void 0,void 0,(function(){return Lt(this,(function(t){switch(t.label){case 0:return[4,e.prototype.videoCompletedPlaying.call(this,!1)];case 1:return t.sent(),[2]}}))}))},i.prototype.onOrganicEvent=function(i){this.initPrebidData(),i===t.Play&&(e.prototype.onPlay.call(this,i,{organicEvent:!0,syndicatorAlreadyPlaying:this.firstPlayOccurred}),this.firstPlayOccurred=!0),this.audit({contentProvider:r.VI,provider:"ORGANIC",eventType:i,viewability:this.getCurrentViewability(),trafficType:12})},i.prototype.destroyPlayer=function(){var e;this.player&&(null===(e=this.player.player)||void 0===e||e.dispose())},i.prototype.registerOrganicEvents=function(){this.registerEvent("onContentPlay",this.onOrganicEvent.bind(this,t.Play)),this.registerEvent("onContentPlay25",this.onOrganicEvent.bind(this,t.FirstQuartile)),this.registerEvent("onContentPlay50",this.onOrganicEvent.bind(this,t.SecondQuartile)),this.registerEvent("onContentPlay75",this.onOrganicEvent.bind(this,t.ThirdQuartile)),this.registerEvent("onContentPlay100",this.onOrganicEvent.bind(this,t.Complete)),this.registerEvent("onContentPause",this.onOrganicEvent.bind(this,t.Pause)),this.registerEvent("onContentResume",this.onOrganicEvent.bind(this,t.Resume))},i}(je),Nt=Mt,Ft=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ht=window,zt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ft(i,e),i.prototype.provide=function(){var e=this;return new Promise((function(t,i){e.waterfallContinue=t,e.waterfallStop=i,e.player=new Nt(e.videoProviderConfig,e.sessionId,e.waterfallContinue,e.waterfallStop),e.createVideoIntelligenceQueue(),e.downloadVideoIntelligenceScript(e.waterfallContinue)}))},i.prototype.createVideoIntelligenceQueue=function(){var e=this;Ht[btoa("video intelligence queue")]||(Ht[btoa("video intelligence queue")]=[]),Ht[btoa("video intelligence queue")].push((function(){var t=Ht[btoa("video intelligence")];t&&t.getUnitWhenReady("publisherid",e.videoProviderConfig.viPubId).then((function(t){e.player.onCreatedPlayer(t)}))}))},i.prototype.downloadVideoIntelligenceScript=function(e){var r=this;T.verbose(this.sessionId);var o=document.createElement("script");o.src=i.playerProviderUrl,o.setAttribute("class","vi-stories-script-loader"),o.setAttribute("data-publisher-id",this.videoProviderConfig.viPubId),o.setAttribute("data-language","en-US"),o.setAttribute("data-channel-id",this.videoProviderConfig.viChannelId),o.setAttribute("data-ext-publisher-id",this.videoProviderConfig.pubID),void 0!==o.async&&(o.async=!0),o.onload=this.onVideoIntelligenceWidgetLoaded.bind(this),o.onerror=function(){r.videoProviderConfig.adBlockStatus?T.sendAudit(r.sessionId,t.ProviderFailure,"Ad blocker enabled",w.DEBUG):T.sendAudit(r.sessionId,t.ProviderFailure,"VideoIntelligence Syndication provider failed to load",w.DEBUG),e()},document.querySelector("#".concat(this.player.getPlayerContainerId())).appendChild(o)},i.prototype.onVideoIntelligenceWidgetLoaded=function(){this.player.showPlayer(),this.bindedHandleErrorsCallback=this.handleErrors.bind(this),Ht.addEventListener("vi-stories-error-event",this.bindedHandleErrorsCallback)},i.prototype.handleErrors=function(e){e.detail&&e.detail.reason&&"missingImpressionListener"===e.detail.reason&&this.player.closePlayerNoAd("no impression listener for vi",t.VidgetFailure),T.sendAudit(this.sessionId,t.Error,e.detail&&e.detail.reason?e.detail.reason:"UNKNOWN",w.DEBUG)},i.prototype.updateExtraProviderSettings=function(){e.prototype.updateExtraProviderSettings.call(this),this.videoProviderConfig.maxRetries=this.videoProviderConfig.retries||1},i.playerProviderUrl="https://s.vi-serve.com/tagLoaderV4.js",i}(D),Ut=zt,qt=(i(656),function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),jt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qt(t,e),t.prototype.lookupRTBVideo=function(e){var t=this.getRequestData();k.odbCall(t,this.onOutbrainRtbResponse.bind(this,e))},t.prototype.isRtbEnabled=function(){return!1},t.prototype.isOpaVideo=function(){return!0},t.prototype.getExtraRequestParams=function(){var t=e.prototype.getExtraRequestParams.call(this);return t+="&forcePlasticForVideo=true",t+="&amplifyEnabled=true"},t.prototype.updateExtraProviderSettings=function(){e.prototype.updateExtraProviderSettings.call(this),this.videoProviderConfig.trafficType=3},t}(Dt),Gt=jt,Jt=function(){return Jt=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Jt.apply(this,arguments)},Qt=function(e,t,i,r){return new(i||(i=Promise))((function(o,n){function s(e){try{d(r.next(e))}catch(e){n(e)}}function a(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((r=r.apply(e,t||[])).next())}))},Xt=function(e,t){var i,r,o,n,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(o=2&n[0]?r.return:n[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,n[1])).done)return o;switch(r=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],r=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}},Yt=function(){function i(){this.vidgetRuns={},this.videoPlayingCheckIntervalTime=5e3,this.delayOnWidgetValidationCheck=1e3,this.delayOnWidgetExecution=5e3,this.isVideoReelLoaded=!1,this.waterfallTasksExcludeParams={stickyPlayers:["slider","slideralwaysright"]},this.vidgetOrganicProviderUrl="https://libs.outbrain.com/organicVidget/vidgetOrganicProvider.js"}return i.prototype.init=function(e,r,o){return void 0===o&&(o={}),Qt(this,void 0,void 0,(function(){var r,n,s,a=this;return Xt(this,(function(d){return r=c.guid(),n=k.getVideoProviderWidgetSettings(e),k.isDfpIframe(n),(s={currentReload:1,sessionId:r,widgetSettings:n,widgetReqId:n.reqID,configuredReloadTime:n.configuredReloadTime,videoPlayingCheckIntervalId:null,parallelPlay:n.parallelPlay,wasPendingAtCurrentReload:!1,canReload:!0,widgetProviders:null,initialDelay:n.initialDelay?n.initialDelay:5e3,loglevel:{level:n.logLevel in w?w[n.logLevel]:w.INFO,consoleLog:n.consoleLog},AniviewObject:null,reloadExtended:!1}).widgetSettings.loglevel={level:n.logLevel in w?w[n.logLevel]:w.INFO,consoleLog:n.consoleLog},s.widgetSettings.widgetProviders=k.getVidgetProviders(s),s.widgetSettings.modifiedWaterfall=null,this.audit=T.setAudit(s.sessionId,s.widgetSettings,"",s.widgetReqId),s.widgetSettings=Jt(Jt({},s.widgetSettings),{callbacks:o}),st.getDocFeatures(n.docId,n.pubID,"getVidgetData",n.country,n.widgetPlatform,n.isReelWidget?"INSTREAM":"OUTSTREAM").then((function(e){i.processDocData(e,s),i.shouldStartExecutionWithDelay(n)?a.startVidgetExecutionWithDelay(n,s):a.startVidgetExecution(n,s)})).catch((function(e){T.debug(s.sessionId,"No response from videoClientServiceCalls: ".concat(e.toString()),t.Error),i.shouldStartExecutionWithDelay(n)?a.startVidgetExecutionWithDelay(n,s):a.startVidgetExecution(n,s)})),[2]}))}))},i.prototype.startVidgetExecutionWithDelay=function(e,t){var i=this;window.setTimeout((function(){i.startVidgetExecution(e,t)}),this.delayOnWidgetExecution)},i.prototype.startVidgetExecution=function(e,r){var o=this,n=this.validateVideoExecutionCanRun(e,r);n.status?(this.vidgetRuns[e.containerID]=r,T.debug(r.sessionId,"VIDGET LOADED",t.Loaded),this.startVidgetIteration(r)):i.shouldRetryValidation(e)?(T.debug(r.sessionId,"Run retry on widget validation"),this.runDelayedValidation(e,r).then((function(){T.debug(r.sessionId,"Run vidget after widget validation retry"),o.startVidgetIteration(r)})).catch((function(e){T.debug(r.sessionId,"Vidget run rejected after validation retry "+e)}))):T.debug(r.sessionId,"Vidget run cancelled because of bad widget strucure "+n.message)},i.prototype.runDelayedValidation=function(e,t){var i=this;return new Promise((function(r,o){window.setTimeout((function(){var n=i.validateVideoExecutionCanRun(e,t);n.status&&r(),o(n.message)}),i.delayOnWidgetValidationCheck)}))},i.shouldRetryValidation=function(e){return k.shouldRetryValidationOnWidget(e)},i.shouldStartExecutionWithDelay=function(e){return k.shouldStartExecutionWithDelay(e)},i.prototype.validateVideoExecutionCanRun=function(e,t){return this.vidgetRuns[e.containerID]?{status:!1,message:"Same widget container already exists"}:k.isWidgetExistingOnPage(e.containerID)?i.canVideoBeProvidedOnWidget(t.sessionId,t.widgetSettings)?{status:!0}:{status:!1,message:"Bad widget structure for current player location. rec mode: "+e.recMode}:{status:!1,message:"Missing widget element in page"}},i.processDocData=function(e,i){var r;try{(r=JSON.parse(e))&&(i.widgetSettings.docServices=r,r.channelIds&&(i.widgetSettings.providersChannelIds=r.channelIds))}catch(e){T.error("Unable to parse vcsc response: ".concat(e.toString()),t.Error)}},i.prototype.vidgetHandshake=function(e){if("VIDGET_OP"===e)this.onOrganicRequest()},i.prototype.onOrganicRequest=function(){this.vidgetOrganicSettings.widgetSettings.callbacks={audit:this.auditHandler.bind(this),playPaidVideo:this.play.bind(this)},window.VIDGET_OP.init(this.vidgetOrganicSettings)},i.prototype.auditHandler=function(e,t,i,r,o){T.sendAudit(e,t,i,r,o)},i.prototype.play=function(e,i){for(var r in void 0===i&&(i={}),this.vidgetRuns)if(this.vidgetRuns[r].widgetSettings.callbacks=Jt(Jt({},this.vidgetRuns[r].widgetSettings.callbacks),i),this.vidgetRuns[r].widgetSettings.isReelWidget&&!this.vidgetRuns[r].widgetSettings.isVideoReel&&T.debug(this.vidgetRuns[r].sessionId,"VIDGET START REQUEST",t.StartRequest),this.vidgetRuns[r].widgetSettings.widgetIdx==e&&1==this.vidgetRuns[r].widgetSettings.adLoaded){T.debug(this.vidgetRuns[r].sessionId,"VIDGET START READY",t.PlayReadyRequest),this.vidgetRuns[r].widgetSettings.adLoaded=!1;var o=new CustomEvent("playLoadedAd",{detail:{widgetIdx:e}});return window.dispatchEvent(o),!0}return!1},i.prototype.pauseResume=function(e,i,r){for(var o in void 0===r&&(r=!0),this.vidgetRuns)if(this.vidgetRuns[o].widgetSettings.widgetIdx==e){T.debug(this.vidgetRuns[o].sessionId,"VIDGET PAUSE-RESUME REQUEST - ".concat(i),t.Debug);var n=new CustomEvent("pauseResumeAd",{detail:{widgetIdx:e,eventName:i,displayPlayerWrapper:r}});return window.dispatchEvent(n),!0}return!1},i.prototype.startVideoReel=function(e){if(e.widgetSettings.isVideoReel&&"local"===e.widgetSettings.vidgetContentSource.toLowerCase()){var t=document.createElement("script");t.src=this.vidgetOrganicProviderUrl,this.vidgetOrganicSettings=e,document.getElementsByTagName("head")[0].appendChild(t),this.isVideoReelLoaded=!0}},i.prototype.increaseInitialReloadCount=function(e){if(e.widgetSettings.vidgetDynamicReloads>0){var i=e.widgetSettings.playedReloadIndexes.some((function(t){return t===e.widgetSettings.configuredReloadCount}));if((e.widgetSettings.playedReloadIndexes.length>1||i)&&!e.reloadExtended){var r=e.widgetSettings.vidgetDynamicReloads;e.widgetSettings.actualReloadCount=e.widgetSettings.configuredReloadCount+r,e.reloadExtended=!0,T.sendAudit(e.sessionId,t.Debug,"reloads extended by ".concat(r," - ").concat(i?"Last play":"2 successive"," "),w.DEBUG)}}},i.prototype.startVidgetIteration=function(r){return Qt(this,void 0,void 0,(function(){var o;return Xt(this,(function(n){switch(n.label){case 0:return T.verbose(r.sessionId),r.wasPendingAtCurrentReload=!1,r.canReload?(this.increaseInitialReloadCount(r),r.currentReload<=r.widgetSettings.actualReloadCount?[4,c.isVideoPlayingOnPageAsync(r.parallelPlay,r.initialDelay)]:[3,2]):[3,4];case 1:if((n.sent()||u.isRunning())&&r.parallelPlay!==e.Allow&&r.parallelPlay!==e.AvoidInViewport){if(o=u.isRunning()?"Another Vidget is running":"Other video is playing on page",r.parallelPlay===e.Strict)return T.debug(r.sessionId,"Other video player exist on page",t.VidgetConfigError),[2];this.checkAtIntervalsIfVidgetCanBePlayed(r,o)}else this.isVideoReelLoaded||this.startVideoReel(r),this.runVidget(r);return[3,3];case 2:void 0===r.videoHasPlayed&&"afterAll"===r.widgetSettings.n2vBackfill?i.backfillN2V(r).finally((function(){i.handleEndOfAllIterations(r)})):i.handleEndOfAllIterations(r),n.label=3;case 3:return[3,5];case 4:case 5:return[2]}}))}))},i.handleEndOfAllIterations=function(e){i.fireNoFillEvent(e),k.callWidgetCallback(e.widgetSettings.callbacks,"onCompleteReloads",e.widgetSettings.widgetIdx)},i.backfillN2V=function(e){var t=e.widgetSettings.providersWaterfall.length;e.widgetSettings.providersWaterfall=["N2V"];var r=k.getVidgetProviders(e)[0];return i.createProvider(r,e,t).provide()},i.fireNoFillEvent=function(e,i){void 0===i&&(i=""),T.verbose(e.sessionId);try{if(e.widgetSettings.currentReload--,e.widgetSettings.fillEvent||e.widgetSettings.vidgetPassBack){if(0===e.widgetSettings.playedReloadIndexes.length)if(e.widgetSettings.vidgetPassBack)c.firePassbackScript(e.widgetSettings.vidgetPassBack,e.widgetSettings.widgetID);else{var r=new CustomEvent("vidgetWF");k.getWidgetElement(e.widgetSettings.containerID).dispatchEvent(r)}T.sendAudit(e.sessionId,t.FillCount,"numOfPlays: ".concat(e.widgetSettings.playedReloadIndexes.length,". ").concat(i))}}catch(t){T.error(e.sessionId,"fireNoFillEvent: ".concat(t))}},i.prototype.checkAtIntervalsIfVidgetCanBePlayed=function(e,i){var r=this;void 0===i&&(i=""),T.verbose(e.sessionId),e.wasPendingAtCurrentReload=!0,T.debug(e.sessionId,"Inside checkAtIntervalsIfVidgetCanBePlayed",t.Pending),this.setIntervalTillNoVideoIsPlayed(e).then((function(){r.runVidget(e)})).catch((function(){T.debug(e.sessionId,"inside checkAtIntervalsIfVidgetCanBePlayed "+i,t.IterationCanceled),r.onVidgetIterationFinished(e)}))},i.prototype.runVidget=function(i){return Qt(this,void 0,void 0,(function(){var r;return Xt(this,(function(o){switch(o.label){case 0:return T.verbose(i.sessionId),[4,this.doubleCheckIsVideoPlaying(i.sessionId,i.widgetSettings)];case 1:if(o.sent()||i.parallelPlay!==e.Allow&&i.parallelPlay!==e.AvoidInViewport&&u.isRunning()){if(r=u.isRunning()?"Another Vidget is running":"Other video is playing on page",i.parallelPlay==e.Strict)return T.debug(i.sessionId,"runVidget: "+r,t.VidgetConfigError),[2];i.wasPendingAtCurrentReload?(i.debug&&T.debug(i.sessionId,"runVidget: "+r,t.IterationCanceled),this.onVidgetIterationFinished(i)):this.checkAtIntervalsIfVidgetCanBePlayed(i,r)}else i.widgetSettings.isVideoReel||u.setRunning(i.widgetSettings.widgetIdx),this.handleWaterfall(i);return[2]}}))}))},i.prepareOPAFirstAuctionProvider=function(e){return T.sendAudit(e.sessionId,t.Debug,"OPA First Auction Ready",w.DEBUG),e.currentReload=0,Jt(Jt({},g[r.OPA]),{name:r.OPA})},i.isFirstAuctionFlow=function(e){return k.getOpaFirstAuction(e.widgetSettings.widget).documents&&!e.widgetSettings.firstAucationExceuted},i.prototype.prepareWaterfallTasks=function(e){var r=[],o=e.widgetSettings.vidgetWaterfallOptimization>0;if(o)try{e.widgetSettings.optimizeLogicExcludeCount.numberOfStrikes=e.widgetSettings.vidgetWaterfallOptimization,e.widgetSettings.vidgetWaterfallOptimization>10&&(e.widgetSettings.optimizeLogicExcludeCount.numberOfStrikes=10)}catch(e){}var n=0;if(i.isFirstAuctionFlow(e)){var s=i.prepareOPAFirstAuctionProvider(e);r.push(this.provide(s,e,n))}else{T.sendAudit(e.sessionId,t.Debug,JSON.stringify(e.widgetSettings.optimizeLogicExcludeCount),w.DEBUG);for(var a=function(t){return d.waterfallTasksExcludeByPlayMode(e.sessionId,t.playMode,e.widgetSettings)||o&&i.waterfallTasksExcludeOptimizeLogic(e,t.name)||t.iterations>1&&!d.waterfallTasksExcludeIterations(e,t)?"continue":"syndication"!==e.widgetSettings.vidgetContentSource.toLowerCase()||f.some((function(e){return e===t.name}))?(n++,void r.push(d.provide(t,e,n))):"continue"},d=this,l=0,c=e.widgetSettings.widgetProviders;l<c.length;l++){a(c[l])}o&&0===n&&e.widgetSettings.optimizeLogicExcludeCount.waterfallExcludeList.length>0&&(i.endIterations(e),i.fireNoFillEvent(e,"Reload stopped"),T.sendAudit(e.sessionId,t.Debug,"After optimizeLogic waterfall empty"))}return r},i.reportMobileParamsData=function(e){if(e.widgetSettings.appName||e.widgetSettings.packageName||e.widgetSettings.bundleId){var i=e.widgetSettings.appName?"appName: ".concat(e.widgetSettings.appName,"  "):"",r=e.widgetSettings.packageName?"appId: ".concat(e.widgetSettings.packageName," (Android/packageName)  "):"",o=e.widgetSettings.bundleId?"appId: ".concat(e.widgetSettings.bundleId," (iOS/bundleId)"):"";T.sendAudit(e.sessionId,t.Debug,"".concat(i).concat(r).concat(o),w.DEBUG)}},i.prototype.handleWaterfall=function(e){var r=this,o=function(i){T.debug(e.sessionId,"Waterfall stopped "+i,t.VidgetFailure),u.setNotRunning(e.widgetSettings.widgetIdx)};try{T.verbose(e.sessionId);var n=this.prepareWaterfallTasks(e);i.reportMobileParamsData(e),c.checkWidgetElementExists(e),c.waterfall(n,this).catch((function(t){e.videoHasPlayed=!0,"object"==typeof t&&t.userClose?i.endIterations(e):"object"==typeof t&&t.passbackTimeout?(e.canReload=!1,i.handleEndOfAllIterations(e)):"object"==typeof t&&void 0!==t.userClose||o(t)})).then((function(){u.isRunning()&&u.setNotRunning(e.widgetSettings.widgetIdx),void 0===e.videoHasPlayed&&"afterEach"===e.widgetSettings.n2vBackfill?i.backfillN2V(e).finally((function(){r.onVidgetIterationFinished(e)})):r.onVidgetIterationFinished(e)}))}catch(e){o(e)}},i.prototype.waterfallTasksExcludeIterations=function(e,t){var i=e.widgetSettings.optimizeLogicExcludeCount,r=e.widgetSettings.widgetProviders.filter((function(e){return 1==e.iterations})),o=e.widgetSettings.vidgetWaterfallOptimization>0&&r.every((function(e){return i.providers[e.name]==i.numberOfStrikes})),n=r.length>0&&o,s=e.widgetSettings.widgetProviders.every((function(t){return t.iterations>1&&t.iterations!==e.currentReload})),a=e.currentReload==e.widgetSettings.actualReloadCount&&t.iterations>e.widgetSettings.actualReloadCount;return!!(n||s||a)||(1==e.widgetSettings.widgetProviders.length||e.currentReload%t.iterations==0)},i.waterfallTasksExcludeOptimizeLogic=function(e,t){var i=e.widgetSettings.optimizeLogicExcludeCount;if(T.verbose(e.sessionId),i.providers[t]>e.widgetSettings.optimizeLogicExcludeCount.numberOfStrikes-1)return-1===i.waterfallExcludeList.indexOf(t)&&i.waterfallExcludeList.push(t),!0},i.prototype.waterfallTasksExcludeByPlayMode=function(e,t,i){return T.verbose(e),!this.waterfallTasksExcludeParams.stickyPlayers.includes(i.stickyPlayer.toLowerCase())&&(t==o.View&&!c.elementInViewport(k.getWidgetElement(i.containerID),0))},i.endIterations=function(e){T.verbose(e.sessionId),e.canReload=!1,k.callWidgetCallback(e.widgetSettings.callbacks,"onCompleteReloads",e.widgetSettings.widgetIdx)},i.prototype.onVidgetIterationFinished=function(e){var t=this;T.verbose(e.sessionId),e.currentReload++,T.increaseReload(e.sessionId,e.currentReload),window.setTimeout((function(){"providerPlayerReuse"!==e.widgetSettings.featureFlag&&k.reset(e.widgetSettings),t.startVidgetIteration(e)}),e.configuredReloadTime)},i.prototype.provide=function(e,t,r){return T.verbose(t.sessionId),function(){return i.createProvider(e,t,r).provide()}},i.createProvider=function(e,t,i){switch(T.verbose(t.sessionId),e.name){case r.Aniview:return"pause"!==t.test?new rt(t.widgetSettings,t.sessionId,i,t.currentReload,e):(1===t.currentReload?t.AniviewObject=new rt(t.widgetSettings,t.sessionId,i,t.currentReload,e):t.AniviewObject.updateCurrentReload(t.currentReload),t.AniviewObject);case r.Vidazoo:return t.widgetSettings.isSyndicationAllowed?new Et(t.widgetSettings,t.sessionId,i,t.currentReload,e):new vt(t.widgetSettings,t.sessionId,i,t.currentReload,e);case r.OPA:case r.OPAdisplay:return new Dt(t.widgetSettings,t.sessionId,i,t.currentReload,e);case r.VI:if(t.widgetSettings.isSyndicationAllowed)return new Ut(t.widgetSettings,t.sessionId,i,t.currentReload,e);break;case r.N2V:return new Gt(t.widgetSettings,t.sessionId,i,t.currentReload,e);default:return T.error(t.sessionId,"Wrong providerName. Play default provider"),new Dt(t.widgetSettings,t.sessionId,i,t.currentReload,e)}},i.prototype.setIntervalTillNoVideoIsPlayed=function(e){var t=this;T.verbose(e.sessionId);var i=24;return new Promise((function(r,o){e.videoPlayingCheckIntervalId=setInterval((function(){i--,c.isVideoPlayingOnPageSync(e.widgetSettings.parallelPlay)||(clearInterval(e.videoPlayingCheckIntervalId),r(!0)),0==i&&(clearInterval(e.videoPlayingCheckIntervalId),o(!1))}),t.videoPlayingCheckIntervalTime)}))},i.prototype.doubleCheckIsVideoPlaying=function(e,t){return Qt(this,void 0,void 0,(function(){return Xt(this,(function(i){return T.verbose(e),"allow"!==t.parallelPlay?[2,c.delay(1e3).then((function(){return Promise.resolve(c.isVideoPlayingOnPageSync(t.parallelPlay))}))]:[2,Promise.resolve(!1)]}))}))},i.canVideoBeProvidedOnWidget=function(e,t){return T.verbose(e),k.canVideoBeProvided(t)},i.prototype.reloadVidget=function(){if(this.vidgetRuns)for(var e in this.vidgetRuns)this.vidgetRuns[e].canReload=!1;delete window.OB_VIDGET,window.OB_VIDGET=new i},i}();c.addPolyfills(),window.OB_VIDGET=window.OB_VIDGET||new Yt,k.makeHandshake("VIDGET")}()}();