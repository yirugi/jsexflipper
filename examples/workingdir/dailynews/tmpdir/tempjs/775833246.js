(window._vfP=window._vfP||[]).push([[32,153],{1286:function(t,e,n){"use strict";n(979)},1287:function(t,e,n){"use strict";n(980)},1288:function(t,e,n){"use strict";n(981)},1289:function(t,e,n){"use strict";n(982)},1290:function(t,e,n){"use strict";n(983)},1291:function(t,e,n){"use strict";n(984)},1292:function(t,e,n){"use strict";n(985)},1293:function(t,e,n){"use strict";n(986)},1294:function(t,e,n){"use strict";n(987)},1295:function(t,e,n){"use strict";n(988)},1602:function(t,e,n){"use strict";n.r(e);n(46),n(17),n(11),n(8),n(7),n(4),n(22),n(87);var i=n(3),r=n(0),o=n(179),s=n(178),a=n(1),c=n(61),u=n(6),l=n(118),d=n(304),h=(n(16),n(25),n(24),n(31),n(30),n(10),n(29),n(230)),f=n(522),p=n(528),b=n(381),m=n(201),v=n(562),_=n(547),g=n.n(_),y=n(50),O=n(177),E=n(115),C=n(14),T=n(856),S=n(569),j=n(502),A=n(859),w=n(489),P=n(135),R=n(667),N=n(23),I=n(695);function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $={props:{contentContainer:N.a.object.isRequired,sectionUuid:N.a.uuid.isRequired},mounted:function(){this.$subscribe(a.D.CHANNEL,a.D.EVENTS.LOADED,this.handleUserLoaded)},computed:D(D({},Object(l.c)({isSubscribedToLivecomments:r.Zb,currentUser:r.ib,getSettingsByUuid:r.Bc})),{},{isSubscribedToContentContainer:function(){return this.isSubscribedToLivecomments(this.contentContainer.content_container_uuid)},settings:function(){return this.getSettingsByUuid(this.sectionUuid)},canFollowContentContainer:function(){return Object(C.h)(this.settings)}}),methods:{toggleSubscription:function(){if(P.a.getInstance().$authorize("follow","page",[this.currentUser,this.settings],{action:w.q})){var t=this.isSubscribedToContentContainer?i.ud:i.Kc;this.$store.dispatch(t,{content_container_uuid:this.contentContainer.content_container_uuid,section_uuid:this.sectionUuid})}},handleUserLoaded:function(){Object(C.r)(this.currentUser)&&this.$store.dispatch(i.lb,{section_uuid:this.sectionUuid,content_container_uuid:this.contentContainer.content_container_uuid})}},components:{followButton:R.a,authenticationActions:I.a}},x=(n(1286),n(45)),k=Object(x.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"vf-comment-header"},[n("h2",{staticClass:"vf-comment-header__heading vf-heading-text"},[t._v("\n        "+t._s(t.$i18n("comments.heading"))+"\n    ")]),t._v(" "),n("div",{staticClass:"vf-comment-header__actions"},[t.canFollowContentContainer?n("follow-button",{staticClass:"vf-actions-subscribe",attrs:{"is-following":t.isSubscribedToContentContainer,"unfollow-text":t.$i18n("user_actions.unfollow"),"is-following-text":t.$i18n("user_actions.following"),"is-following-aria":t.$i18n("conversations.content_container.user_actions.unfollow_aria_label.comments"),"is-not-following-text":t.$i18n("user_actions.follow"),"is-not-following-aria":t.$i18n("conversations.content_container.user_actions.follow_aria_label.comments")},on:{click:t.toggleSubscription}}):t._e(),t._v(" "),n("authentication-actions",{staticClass:"vf-actions-authentication",attrs:{user:t.currentUser}})],1)])}),[],!1,null,"45f49817",null).exports,B=n(51),M=n(88),F=n(858),H=n(696),q=n(692);function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){z(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var W={props:{contentContainer:N.a.object.isRequired,tabName:N.a.string.isRequired,areSettingsExpanded:N.a.bool.isRequired,settingsId:N.a.string.isRequired},inject:[h.a],created:function(){this.COMMENT_TABS=p.a,this.sorts=[{key:B.h.NEWEST,title:this.$i18n("conversations.sorts.newest"),buttonClass:"vf-sort-action__newest"},{key:B.h.OLDEST,title:this.$i18n("conversations.sorts.oldest"),buttonClass:"vf-sort-action__oldest"},{key:B.h.NUM_LIKES_DESC,title:this.$i18n("conversations.sorts.most_liked"),buttonClass:"vf-sort-action__most-liked"},{key:B.h.NUM_REPLIES_DESC,title:this.$i18n("conversations.sorts.most_replies"),buttonClass:"vf-sort-action__most-replies"}]},computed:V(V({},Object(l.c)({widgetSettings:r.xd,isCurrentUserModOrAdmin:r.Tb})),{},{sorted_by:function(){return this.widgetSettings(this.contentContainer.content_container_uuid).sorted_by},tagName:function(){return u.c.COMMENTS}}),methods:{handleSortSelected:function(t){var e=this,n=t.key,r=this.contentContainer.content_container_uuid;Object(M.f)(this.$store.commit,v.b,r),this.$store.dispatch(i.zd,{content_container_uuid:r,sorted_by:n}).then((function(){Object(M.g)(e.$store.commit,v.b,r)})).catch((function(){Object(M.e)(e.$store.commit,v.b,r)}))}},components:{settingsButton:F.a,selectDropdown:H.a,vfBell:q.default}},Y=(n(1287),Object(x.a)(W,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-nav-right"},[n("select-dropdown",{staticClass:"vf-sort-actions",class:{"vf-sort-actions--hidden":t.tabName!==t.COMMENT_TABS.ALL_COMMENTS},attrs:{autohide:"",positions:["bottom-left","bottom-right","right-bottom","left-bottom"],items:t.sorts,selection:t.sorted_by,"enable-hover-light":!1},on:{"list-item-clicked":t.handleSortSelected}}),t._v(" "),n("div",{staticClass:"comment-nav-right__settings-button",class:{"comment-nav-right__settings-button--expanded":this.areSettingsExpanded}},[t.isCurrentUserModOrAdmin?n("settings-button",{staticClass:"comment-nav-right__icon",attrs:{palette:t.PALETTES.ACCENT,"aria-label":t.$i18n("conversations.navigation.settings_aria"),"aria-expanded":t.areSettingsExpanded.toString(),"aria-controls":t.settingsId},nativeOn:{click:function(e){return t.$emit("settings-toggled")}}}):t._e()],1),t._v(" "),t.areSettingsExpanded?n("a",{staticClass:"vf-offscreen-until-focused-text",attrs:{href:"#"+t.settingsId}},[t._v("\n        "+t._s(t.$i18n("conversations.navigation.settings_a11y_jump"))+"\n    ")]):t._e(),t._v(" "),n("vf-bell",{staticClass:"comment-nav-right__icon",attrs:{"parent-component":t.tagName}})],1)}),[],!1,null,"0c842354",null).exports),K=n(510),J=n(664),Z=n(857),X=n(508),Q=n(496),tt=n(543),et=(n(98),n(39),n(42),n(148),n(41),n(2)),nt=n(117),it=n(69),rt=n(493),ot=n(298),st=n(513),at=n(133),ct=n(570),ut=n(849),lt=n(862),dt=n(621),ht=n(512),ft=n(84),pt=n(504),bt=n(548),mt=n(503),vt=n(506),_t=n(752),gt=n(753),yt=n(660),Ot=n(497),Et=n(851);function Ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ct(Object(n),!0).forEach((function(e){St(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function St(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var jt={props:{comment:N.a.object.isRequired,isEntered:N.a.bool.def(!1),isStub:N.a.bool.def(!1)},computed:Tt(Tt({},Object(l.c)({currentUser:r.ib,siteSettings:r.Hc,getUserByUuid:r.id,isCommentingExpired:r.Db})),{},{commentActor:function(){return this.getUserByUuid(this.comment.actor_uuid)},isLiked:function(){return this.comment.actions.includes(Ot.a.LIKE)},isDisliked:function(){return this.comment.actions.includes(Ot.a.DISLIKE)},isReplyEnabled:function(){return!this.isStub&&!this.isCommentingExpired(this.comment.content_container_uuid)},enabledContentActions:function(){return{isReplyEnabled:this.isReplyEnabled,isLikeEnabled:!this.isStub,isDislikeEnabled:!this.isStub,isFlagEnabled:!this.isStub,isShareEnabled:!this.isStub}}}),methods:{toggleLike:function(){var t=P.a.getInstance(),e={action:w.p},n=this.isLiked?i.od:i.Vb,r=this.comment;t.$authorize(Ot.a.LIKE,"comment",[this.currentUser],e)?this.$store.dispatch(n,r.content_uuid):this.$publish(a.f.CHANNEL,"GUEST_USER.LIKE_LIVECOMMENTS_COMMENT",{content_uuid:r.content_uuid,content_container_uuid:r.content_container_uuid,section_uuid:r.section_uuid})},toggleDislike:function(){var t=P.a.getInstance(),e={action:w.n},n=this.isDisliked?i.jd:i.G,r=this.comment;t.$authorize(Ot.a.DISLIKE,"comment",[this.currentUser,this.siteSettings],e)?this.$store.dispatch(n,r.content_uuid):this.$publish(a.f.CHANNEL,"GUEST_USER.DISLIKE_LIVECOMMENTS_COMMENT",{content_uuid:r.content_uuid,content_container_uuid:r.content_container_uuid,section_uuid:r.section_uuid})},handleFlag:function(){P.a.getInstance().$authorize(Ot.a.FLAG,"content",[this.currentUser,this.siteSettings,this.commentActor],{action:w.o})&&this.$store.dispatch(i.Fb,this.comment.content_uuid)}},components:{contentActions:Et.a}},At=Object(x.a)(jt,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("content-actions",t._b({staticClass:"vf-comment-actions",attrs:{content:t.comment,"is-entered":t.isEntered,"content-type":t.$i18n("comments.comment",{count:1})},on:{reply:function(e){return t.$emit("reply",e)},replies:function(e){return t.$emit("replies")},"toggle-like":t.toggleLike,"toggle-dislike":t.toggleDislike,flag:t.handleFlag}},"content-actions",t.enabledContentActions,!1))}),[],!1,null,null,null).exports,wt=n(657),Pt=n(848),Rt={props:{comment:N.a.object.isRequired},methods:{handleUnflag:function(){this.$store.dispatch(i.j,this.comment.content_uuid)},handleUnspam:function(){this.$store.dispatch(i.td,this.comment.content_uuid)},handleDisable:function(){this.$store.dispatch(i.D,this.comment.content_uuid)},handleEnable:function(){this.$store.dispatch(i.R,this.comment.content_uuid)}},components:{moderationActions:Pt.a}},Nt=Object(x.a)(Rt,(function(){var t=this.$createElement;return(this._self._c||t)("moderation-actions",{attrs:{content:this.comment},on:{disable:this.handleDisable,unflag:this.handleUnflag,unspam:this.handleUnspam,enable:this.handleEnable}})}),[],!1,null,null,null).exports,It=n(70),Ut=n(873);function Dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(n),!0).forEach((function(e){$t(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xt={props:{comment:N.a.object.isRequired,isEntered:N.a.bool.def(!1),isContentRemovalEnabled:N.a.bool.def(!1)},created:function(){this.CONTENT_ACTIONS=Ot.a},computed:Lt(Lt({},Object(l.c)({getLivecommentsSettingsByUuid:r.V,getContentEditingDuration:r.T})),{},{isFlagged:function(){return this.comment.actions.includes(Ot.a.FLAG)},isSpam:function(){return this.comment.state_reasons.includes(It.d.CONTENT_MARKED_AS_SPAM)},isDisabled:function(){return this.comment.state_reasons.includes(It.d.CONTENT_DISABLED)},contentContainerSettings:function(){return this.getLivecommentsSettingsByUuid(this.comment.content_container_uuid)},contentEditingDuration:function(){return this.getContentEditingDuration(this.comment.content_container_uuid)}}),methods:{handleFlag:function(){this.$store.dispatch(i.Fb,this.comment.content_uuid)},toggleFlag:function(){var t=this.isFlagged?i.j:i.Fb;this.$store.dispatch(t,this.comment.content_uuid)},toggleEditorsPick:function(){var t=this.comment.is_picked?i.K:i.I;this.$store.dispatch(t,this.comment.content_uuid)},toggleSpam:function(){var t=this.isSpam?i.td:i.Jc;this.$store.dispatch(t,this.comment.content_uuid)},toggleDisable:function(){var t=this.isDisabled?i.R:i.D;this.$store.dispatch(t,this.comment.content_uuid)},togglePin:function(){var t=this.comment.is_pinned?i.rd:i.mc;this.$store.dispatch(t,this.comment.content_uuid)},handleRemove:function(){this.$store.dispatch(i.Dc,this.comment.content_uuid)}},components:{secondaryActions:Ut.a}},kt=Object(x.a)(xt,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("secondary-actions",{staticClass:"vf-comment-actions",attrs:{content:t.comment,"is-entered":t.isEntered,"is-flag-enabled":"","is-live-comments":"","is-content-removal-enabled":t.isContentRemovalEnabled,"is-content-editing-enabled":t.contentContainerSettings.is_content_editing_enabled,"content-editing-duration":t.contentEditingDuration},on:{edit:function(e){return t.$emit(t.CONTENT_ACTIONS.EDIT)},remove:t.handleRemove,flag:t.handleFlag,"toggle-flag":t.toggleFlag,"toggle-editors-pick":t.toggleEditorsPick,"toggle-spam":t.toggleSpam,"toggle-disable":t.toggleDisable,"toggle-pin":t.togglePin}})}),[],!1,null,null,null).exports,Bt=n(870),Mt=n(877),Ft=n(878),Ht=n(879),qt=n(880),Gt=n(871),Vt=n(559),zt=n(511),Wt=n(872),Yt=n(852);function Kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kt(Object(n),!0).forEach((function(e){Zt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Zt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Xt={props:{comment:N.a.object.isRequired,isReply:N.a.bool.def(!1),locationInThread:dt.b.isRequired,threadPalette:dt.a.isRequired,isReplyToClickable:N.a.bool},inject:[h.a,h.e],data:function(){return{isEntered:!1,editorStatus:ht.STATIC,hasContentUpdated:!1,editorContents:null,editorErrorMessage:"",thread:null}},setup:function(t,e){var n=t.comment.content_uuid,i=e.parent.$store;return Jt(Jt({},Object(_t.a)(i,n)),Object(gt.a)(i,n))},mounted:function(){this.thread=this.threadByUuid(this.comment.thread_uuid);var t=this.comment.content_uuid,e=this.$el.getBoundingClientRect(),n=e.top,i=e.bottom,r=n<0,o=window.innerHeight-i<0;this.shouldScrollToSelf(r||o)&&this.scrollToSelf(t),this.observe()},beforeDestroy:function(){this.unobserve()},computed:Jt(Jt({},Object(l.c)({threadByUuid:"".concat(s.a,"/").concat(r.Sc),isUnreadReplyInThread:"".concat(s.a,"/").concat(r.cc),isUnreadMentionInThread:"".concat(s.a,"/").concat(r.bc),getUser:r.id,currentUser:r.ib,contentByUuid:r.S,activeReplyThreadByContainerUuid:r.a,mentionNotificationByContentUuid:r.ed,getLivecommentsSettingsByUuid:r.V,isOwner:r.fc})),{},{ariaTitle:function(){return this.isStubbed?this.isReply?this.$i18n("conversations.posts.aria_title.stubbed.reply"):this.$i18n("conversations.posts.aria_title.stubbed.comment"):this.isReply?this.$i18n("conversations.posts.aria_title.enabled.reply",{username:this.user.name}):this.$i18n("conversations.posts.aria_title.enabled.comment",{username:this.user.name})},parent:function(){return this.contentByUuid(this.comment.parent_uuid)},replyingTo:function(){return this.getUser(this.comment.parent_actor_uuid)},contentUuid:function(){return this.comment.content_uuid},avatarSize:function(){return this.isReply||at.e?pt.a.SMALL:pt.a.MEDIUM},isOnlyContentInThread:function(){return this.locationInThreadBasedOnEditorStatus===ot.c.ONLY},avatarOutline:function(){return this.isReply||this.isOnlyContentInThread?this.PALETTES.NONE:this.threadPalette===this.PALETTES.ACCENT?this.PALETTES.ACCENT:this.threadPalette===this.PALETTES.MENTION?this.PALETTES.MENTION:this.PALETTES.LIGHT_PRIMARY},user:function(){var t=this.getUser(this.comment.actor_uuid);return this.isMutedStub||this.isDisabledStub||this.isDeletedStub||!t?this.getUser(ft.c):t},isCurrentUserTheContentActor:function(){return this.comment.actor_uuid===this.currentUser.uuid},replyName:function(){return this.isReply&&this.replyingTo?this.replyingTo.name:""},boundingClientRect:function(){var t=this.$el.getBoundingClientRect();return{top:t.top,bottom:t.bottom}},notifierPalette:function(){return this.isUnreadMention?this.PALETTES.MENTION:this.PALETTES.ACCENT},isCurrentUserModOrAdmin:function(){return Object(C.H)(this.currentUser)},activeReplyThread:function(){return this.activeReplyThreadByContainerUuid(this.comment.content_container_uuid)},isMention:function(){return this.comment.parent_actor_uuid===this.currentUser.uuid&&this.comment.actor_uuid!==this.currentUser.uuid},mentionNotification:function(){return this.mentionNotificationByContentUuid(this.comment.content_uuid)},hasNotifier:function(){return this.isUnreadMention||this.isUnreadReply},threadUuidForUnreadContent:function(){return this.thread&&this.thread.thread_top_uuid&&this.comment.content_container_uuid!==this.thread.thread_top_uuid?this.thread.thread_top_uuid:this.comment.thread_uuid},isUnreadReply:function(){return this.isUnreadReplyInThread({thread_uuid:this.threadUuidForUnreadContent,content_uuid:this.comment.content_uuid})},isUnreadMention:function(){return this.isUnreadMentionInThread({thread_uuid:this.threadUuidForUnreadContent,content_uuid:this.comment.content_uuid})},contentContainerSettings:function(){return this.getLivecommentsSettingsByUuid(this.comment.content_container_uuid)},isEditorStatusStatic:function(){return this.editorStatus===ht.STATIC},locationInThreadBasedOnEditorStatus:function(){return this.isEditorStatusStatic?this.locationInThread:ot.c.ONLY},isEditorContentDifferent:function(){return this.editorContents&&this.editorContents!==this.comment.content},isContentRemovalEnabled:function(){return this.contentContainerSettings.is_content_removal_enabled},isReplyToEditedPost:function(){return this.parent&&this.parent.date_edited>this.comment.date_created}}),methods:Jt(Jt({},Object(l.b)({markMentionNotificationAsRead:i.cc})),{},{intersectionHandler:function(t){var e=this,n=t?this.findPlacement(t[0]):this.comment.place;if(this.$store.commit(et.jc,{content_uuid:this.comment.content_uuid,place:n}),this.hasNotifier&&n===ot.b.VIEW&&(setTimeout((function(){var t=e.comment,n=t.thread_uuid,r=t.content_uuid;return e.$store.dispatch("".concat(e.THREAD_NAMESPACE,"/").concat(i.Bc),{thread_uuid:n,content_uuid:r})}),ot.a),this.isMention&&this.mentionNotification)){var r=this.mentionNotification.notification_uuid;this.markMentionNotificationAsRead(r)}},onEnterOrLeave:function(t){this.isEntered=t},focusOnAvatar:function(){this.$refs.avatar.$el.focus()},observe:function(){var t=this;Object(E.d)().then((function(){t.commentObserver=Object(E.a)(t.$refs.intersector,t.intersectionHandler)}))},unobserve:function(){this.commentObserver&&this.commentObserver.unobserve(this.$refs.intersector)},findPlacement:function(t){var e=t.isIntersecting,n=t.boundingClientRect,i=t.rootBounds,r=n&&i&&n.top>i.top;return e?ot.b.VIEW:r?ot.b.BELOW:ot.b.ABOVE},shouldScrollToSelf:function(t){var e=this.comment,n=e.isNew,i=e.actor_uuid;return!this.activeReplyThread.thread_uuid&&n&&i===this.currentUser.uuid&&t},scrollToSelf:function(t){var e=Object(f.a)(this.THREAD_NAMESPACE,t);Object(y.a)(e).scrollIntoView(!0),Object(y.a)("html").scrollTop-=p.d,Object(y.a)("body").scrollTop-=p.d,this.$store.commit(et.cb,t)},handleEdit:function(){var t=this;this.editorStatus=ht.EDITABLE,setTimeout((function(){return t.$refs.contentEditor.focusOnInput()}),0)},handleFocusIn:function(t){var e=t.target;this.isEditorStatusStatic||(document.removeEventListener("click",this.closeEditorFromOutside),document.addEventListener("click",this.closeEditorFromOutside),Object(bt.a)(e)||this.$refs.contentEditor.focusOnInput())},handleContentUpdate:function(t,e){this.hasContentUpdated=t,this.editorContents=e},handleSubmitEdit:function(){var t=this;this.isEditorContentDifferent&&(this.editorErrorMessage="",this.$store.dispatch(i.N,{content_uuid:this.comment.content_uuid,content:this.editorContents}).then((function(){t.handleCancelEdit()})).catch((function(){t.editorErrorMessage=t.$i18n("settings.error.generic_error")})))},closeEditorFromOutside:function(t){this.$el.contains(t.target)||this.handleCancelEdit()},handleCancelEdit:function(){this.editorStatus=ht.STATIC,this.hasContentUpdated=!1,this.editorContents=null,this.editorErrorMessage="",document.removeEventListener("click",this.closeEditorFromOutside)}}),watch:{hasNotifier:function(){this.hasNotifier&&this.intersectionHandler()}},components:{contentFocusContainerWithActions:yt.a,contentEditor:wt.a,threadedLayout:Vt.a,frontAvatar:zt.a,contentActions:At,moderationActions:Nt,secondaryActions:kt,unseenContentNotifier:Wt.a,postDetails:Yt.a,disabledBadge:Bt.a,pendingBadge:Mt.a,mutedBadge:Ft.a,deletedBadge:Ht.a,editedBadge:qt.a,bannedBadge:Gt.a},directives:{innerFocus:mt.a,hovered:vt.a}},Qt=(n(1288),Object(x.a)(Xt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("content-focus-container-with-actions",{attrs:{"can-focus":!t.isEditorStatusStatic,"is-focused":!t.isEditorStatusStatic,"has-content-updated":t.hasContentUpdated,"editor-status":t.editorStatus,"is-submit-enabled":t.isEditorContentDifferent,"error-message":t.editorErrorMessage,"show-user-status":!t.isEditorStatusStatic},on:{"focus-on-element":t.handleFocusIn,submit:t.handleSubmitEdit,"cancel-edit":t.handleCancelEdit},nativeOn:{focusin:function(e){return t.handleFocusIn(e)}}},[n("div",{ref:"intersector"}),t._v(" "),n("article",{directives:[{name:"inner-focus",rawName:"v-inner-focus",value:t.onEnterOrLeave,expression:"onEnterOrLeave"},{name:"hovered",rawName:"v-hovered",value:t.onEnterOrLeave,expression:"onEnterOrLeave"}],staticClass:"vf3-comment",class:{"vf3-comment--collapsed":t.isOnlyContentInThread,"vf3-comment--entered":t.isEntered,"vf3-comment--muted":t.isMutedStub,"vf3-comment--disabled":t.isDisabledStub,"vf3-comment--pinned":t.comment.is_pinned,"vf3-comment--pinned--collapsed":t.comment.is_pinned&&t.isOnlyContentInThread},attrs:{"aria-label":t.ariaTitle}},[n("threaded-layout",{staticClass:"vf3-comment__content-layout",class:{"vf3-comment__content-layout--entered":t.isEntered},attrs:{"location-in-thread":t.locationInThreadBasedOnEditorStatus,palette:t.threadPalette},scopedSlots:t._u([{key:"left",fn:function(){return[n("unseen-content-notifier",{attrs:{"is-new":t.hasNotifier,palette:t.notifierPalette}}),t._v(" "),n("front-avatar",{ref:"avatar",staticClass:"vf3-comment__avatar",class:{"vf3-comment__top-level-avatar":!t.isReply,"vf3-comment__reply-avatar":t.isReply},attrs:{user:t.user,outline:t.avatarOutline,size:t.avatarSize,"is-clickable":!t.isStubbed}})]},proxy:!0},t.isStubbed?{key:"right",fn:function(){return[n("div",{staticClass:"vf3-comment__stubbed-badge",class:{"vf3-comment__stubbed-badge--reply":t.isReply}},[t.isDisabledStub?n("disabled-badge"):t.isMutedStub?n("muted-badge"):t.isDeletedStub?n("deleted-badge"):t._e()],1),t._v(" "),n("content-actions",{staticClass:"vf-comment__bottom-actions",attrs:{"is-stub":"",comment:t.comment,"is-entered":t.isEntered},on:{replies:function(e){return t.$emit("replies",e)}}})]},proxy:!0}:{key:"right",fn:function(){return[n("div",{staticClass:"vf3-comment__header"},[n("post-details",{attrs:{"content-uuid":t.comment.content_uuid,"user-uuid":t.user.uuid,"is-from-user":!0,"is-pinned":t.comment.is_pinned,"is-reply":t.isReply,"reply-name":t.replyName,"is-reply-to-edited-post":t.isReplyToEditedPost,"has-author-badge":t.isOwner(t.user.uuid),"custom-badges":t.user.custom_badges,"is-entered":t.isEntered,"is-reply-to-clickable":t.isReplyToClickable},on:{"reply-to-clicked":function(e){return t.$emit("reply-to-clicked")}}}),t._v(" "),n("secondary-actions",{directives:[{name:"show",rawName:"v-show",value:t.isEditorStatusStatic,expression:"isEditorStatusStatic"}],staticClass:"vf-comment__secondary-actions",attrs:{comment:t.comment,"is-entered":t.isEntered,"is-content-removal-enabled":t.isContentRemovalEnabled},on:{edit:t.handleEdit}})],1),t._v(" "),t.isCurrentUserModOrAdmin?n("moderation-actions",{attrs:{comment:t.comment}}):t._e(),t._v(" "),n("content-editor",{ref:"contentEditor",staticClass:"vf-comment__content-editor",attrs:{"is-rich-text-enabled":!1,"content-uuid":t.comment.content_uuid,"content-container-uuid":t.comment.content_container_uuid,status:t.editorStatus,"is-focused":!t.isEditorStatusStatic,"character-limit":t.contentContainerSettings.maximum_content_length},on:{"content-update":t.handleContentUpdate,"request-submit":t.handleSubmitEdit},scopedSlots:t._u([{key:"content-start",fn:function(){return[t.hasDeletedBadge?n("deleted-badge",{staticClass:"vf-comment__content-badge"}):t.hasBannedBadge?n("banned-badge",{staticClass:"vf-comment__content-badge",attrs:{"is-ghost":t.hasGhostBannedBadge}}):t.hasDisabledBadge?n("disabled-badge",{staticClass:"vf-comment__content-badge vf-comment__content-badge--disabled",attrs:{"has-reason":""}}):t.hasPendingBadge?n("pending-badge",{staticClass:"vf-comment__content-badge"}):t._e()]},proxy:!0},t.hasEditedBadge?{key:"content-end",fn:function(){return[n("edited-badge",{staticClass:"vf-comment__edited-badge"})]},proxy:!0}:null],null,!0)}),t._v(" "),n("content-actions",{directives:[{name:"show",rawName:"v-show",value:t.isEditorStatusStatic,expression:"isEditorStatusStatic"}],staticClass:"vf-comment__bottom-actions",attrs:{comment:t.comment,"is-entered":t.isEntered,"is-stub":t.isBadged&&!t.hasEditedBadge},on:{reply:function(e){return t.$emit("reply",e)},replies:function(e){return t.$emit("replies",e)}}})]},proxy:!0}],null,!0)})],1)])}),[],!1,null,"edd6e468",null).exports),te=n(672);function ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ee(Object(n),!0).forEach((function(e){ie(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ie(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var re={data:function(){return{isExpanded:!1,isFocused:!1,preloadedContent:null}},inject:[h.a,h.e,h.d],props:{threadUuid:N.a.uuid.isRequired,isReply:N.a.bool.def(!1),locationInThread:dt.b.isRequired,threadPalette:dt.a.isRequired,isReplyToClickable:N.a.bool},beforeCreate:function(){this.storeAction=i.n},created:function(){this.getSessionStorageContent()},computed:ne(ne({},Object(l.c)({getSettings:r.V,contentByUuid:r.S,isActiveReplyThread:r.Mb})),{},{localThreadLocation:function(){return this.isExpanded?ot.c.FIRST:this.locationInThread},localThreadPalette:function(){return this.isExpanded?this.PALETTES.LIGHT_PRIMARY:this.threadPalette},maximumCommentLength:function(){return this.getSettings(this.content.content_container_uuid).maximum_content_length},content:function(){return this.contentByUuid(this.threadUuid)},commentId:function(){return Object(f.b)(this.THREAD_NAMESPACE,this.content.content_uuid)}}),methods:ne(ne({},Object(l.b)({addActiveReplyThread:i.a})),{},{getSessionStorageContent:function(){var t=sessionStorage.getItem("vf_content_editor_id_".concat(this.threadUuid));t&&(this.preloadedContent=t,this.isExpanded=!0)},expandForm:function(){var t=this;this.isExpanded=!0,this.$nextTick((function(){Object(y.a)(".vf-content-editor-form__textarea",t.$el).focus()})),this.trackReplyClick()},trackReplyClick:function(t){P.a.getInstance().$can("create","live-content",{trigger:t,action:w.g})||this.$publish(a.b.CHANNEL,a.b.EVENTS.ATTEMPTED_ACTION,{action:w.h})},repliesClicked:function(){0!==this.content.total_replies&&this.setReplyThread()},setReplyThread:function(){var t,e=this.content,n=e.content_uuid,i=e.thread_uuid;if(this.isReply){var r=Object(f.a)(this.THREAD_NAMESPACE,i);t=this.$el.offsetTop+Object(y.a)(r).parentElement.parentElement.offsetTop-p.c}else t=this.$el.parentElement.parentElement.offsetTop-p.c;return this.addActiveReplyThread({thread_uuid:n,offset_top:t,mode:b.REPLY_THREAD_MODES.REPLIES})},focusedIn:function(){this.isExpanded=!0,this.isFocused=!0,this.$emit("focusin")},focusRemoved:function(){this.isFocused=!1,this.isExpanded=!1,this.preloadedContent=null,this.$emit("remove-focus")},removeFocus:function(){this.$refs.replyForm.removeFocus()},replyToClicked:function(){var t=this;return this.$store.dispatch("".concat(this.THREAD_NAMESPACE,"/").concat(i.Sb),{content_container_uuid:this.content.content_container_uuid,thread_uuid:this.content.parent_uuid,selected_content_uuids:[this.content.content_uuid],fetchAction:this.THREAD_FETCH_ACTION}).then((function(){return t.updateReplyThread(t.content.parent_uuid,t.content.thread_uuid)}))},updateReplyThread:function(t,e){this.isActiveReplyThread(this.content.content_container_uuid)?this.$store.commit(et.bd,{uuid:this.content.content_container_uuid,mode:b.REPLY_THREAD_MODES.REPLY_PARENT}):this.openReplyThread(t,e)},openReplyThread:function(t,e){var n=Object(f.a)(this.THREAD_NAMESPACE,e),i=Object(y.a)(n).parentElement.parentElement.offsetTop-p.c;return this.addActiveReplyThread({thread_uuid:t,offset_top:i,mode:b.REPLY_THREAD_MODES.REPLY_PARENT})}}),components:{comment:Qt,replyForm:te.a}},oe=(n(1289),Object(x.a)(re,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("reply-form",{ref:"replyForm",staticClass:"vf3-content-with-reply-form",class:{"vf3-content-with-reply-form--is-reply":t.isReply},attrs:{id:t.commentId,"replying-to":t.content,"store-action":t.storeAction,"is-expanded":t.isExpanded,"character-limit":t.maximumCommentLength,"preloaded-content":t.preloadedContent},on:{focusin:t.focusedIn,"remove-focus":t.focusRemoved,"clear-reply":function(e){t.isExpanded=!1}}},[n("comment",{ref:"comment",attrs:{comment:t.content,"is-reply":t.isReply,"location-in-thread":t.localThreadLocation,"thread-palette":t.localThreadPalette,"is-reply-to-clickable":t.isReplyToClickable},on:{reply:t.expandForm,replies:t.repliesClicked,"reply-to-clicked":t.replyToClicked}})],1)}),[],!1,null,"66b99c6e",null).exports),se=n(106),ae=n(867),ce=n(868),ue=n(869);function le(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function de(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?le(Object(n),!0).forEach((function(e){he(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function he(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var fe={props:{contentContainerUuid:N.a.uuid.isRequired,threads:N.a.array.isRequired,itemClass:N.a.string.isRequired,isExpanded:N.a.bool.def(!1),enablePromos:N.a.bool.def(!1),hasMoreAvailable:N.a.bool},created:function(){this.widgetTag=u.c.COMMENTS,this.HEADER_HEIGHT=p.c,this.createAction=i.n,this.fetchRepliesAction=i.bb,this.fetchSelectedAction=i.ub,this.contentContainerType=se.b,this.commentWithReplyForm=oe},computed:de(de({},Object(l.c)({widgetSettingsByUuid:r.xd,livecommentsSettingsByUuid:r.V,totalVisibleContentLoaded:r.Zc})),{},{limit:function(){return this.widgetSettingsByUuid(this.contentContainerUuid).pagination_reply_limit},maximumContentLength:function(){return this.settings.maximum_content_length},settings:function(){return this.livecommentsSettingsByUuid(this.contentContainerUuid)},totalCount:function(){return this.totalVisibleContentLoaded(this.contentContainerUuid)}}),methods:{hasBorder:function(t){return this.hasMoreAvailable||t!==this.threads.length-1}},components:{adContainerConversation:ue.a,topLevelThread:ce.a,conversationsList:ae.a}},pe=Object(x.a)(fe,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("conversations-list",{attrs:{"has-no-separator":"","has-height-transition":""}},t._l(t.threads,(function(e,i){return n("li",{key:e,class:t.itemClass},[n("top-level-thread",{attrs:{"content-container-uuid":t.contentContainerUuid,limit:t.limit,"fetch-replies-action":t.fetchRepliesAction,"fetch-selected-action":t.fetchSelectedAction,"thread-uuid":e,"header-height-px":t.HEADER_HEIGHT,"store-action":t.createAction,"maximum-content-length":t.maximumContentLength,"content-component":t.commentWithReplyForm,"is-expanded":t.isExpanded,"has-border":t.hasBorder(i)}}),t._v(" "),n("ad-container-conversation",{staticClass:"vf3-conversations-list__promo",attrs:{"widget-tag":t.widgetTag,enabled:t.enablePromos,index:i,"thread-uuid":e,"content-container-type":t.contentContainerType,"total-count":t.totalCount}})],1)})),0)}),[],!1,null,null,null).exports,be=n(697),me=n(114),ve=n(520),_e=n(81),ge=n(301),ye={props:{containerId:{type:String,required:!0}},data:function(){return{isThresholdReached:!1,adSettings:{ad_integration:me.b[u.c.COMMENTS].ad_integration,site_ad_id:me.b[u.c.COMMENTS].site_ad_id,widget_tag:u.c.COMMENTS},adStatus:_e.PENDING,enabledAd:!0,adProvider:null}},computed:{showAd:function(){return this.adStatus===_e.SUCCESS},showLabelAd:function(){if(!this.adProvider)return null;var t=this.adProvider;return![nt.a.TABOOLA,nt.a.OUTBRAIN].includes(t)},adImplementationClass:function(){return this.adProvider?"vf-promo-".concat(this.adProvider):null}},methods:{loadSetting:function(){var t=this.$store.getters[r.Hc][this.adSettings.ad_integration];this.enabledAd=t!==nt.a.NONE,this.adProvider=t},initializeLoadTracker:function(){var t=this;Object(E.b)(this.$el,(function(t){return t.isIntersecting}),{rootMargin:"500px"}).then((function(){t.isThresholdReached=!0,t.trackAdEvent("track_ad_load"),t.initializeViewTracker()}))},initializeViewTracker:function(){var t=this;Object(E.b)(this.$el,(function(t){return t.isIntersecting}),{rootMargin:"-90px"}).then((function(){t.trackAdEvent("track_ad_view")}))},trackAdEvent:function(t){var e={widget:u.c.COMMENTS,adData:{index:0,container_id:this.containerId,total_count:0,scrollDepth:Object(ge.a)()}};this.$publish("analytics",t,e)},onSuccess:function(){this.adStatus=_e.SUCCESS},onError:function(){this.adStatus=_e.ERROR}},mounted:function(){this.loadSetting(),this.enabledAd&&this.initializeLoadTracker()},components:{adContainer:ve.a}},Oe=(n(1290),Object(x.a)(ye,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.enabledAd?n("div",{staticClass:"vf-ad-comments"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showAd,expression:"showAd"}],staticClass:"vf-promo",class:t.adImplementationClass},[t.showLabelAd?n("div",{staticClass:"vf-label vf-label-upper vf-promo__label"},[t._v("\n            "+t._s(t.$i18n("ads.advertisement"))+"\n        ")]):t._e(),t._v(" "),t.isThresholdReached?n("ad-container",{attrs:{"unique-id":""+t._uid,"ad-settings":t.adSettings},on:{success:t.onSuccess,error:t.onError}}):t._e()],1)]):t._e()}),[],!1,null,"45bd3f78",null).exports),Ee={props:{showAdOnEmptyWidget:N.a.bool.isRequired,containerId:N.a.string.isRequired},components:{commentIcon:be.a,adContainerConversationEmpty:Oe}},Ce=(n(1291),Object(x.a)(Ee,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vf-ad-empty-comments"},[e("div",[e("span",{staticClass:"vf-empty-comments__icon-wrapper"},[e("comment-icon",{staticClass:"vf-icon-small vf-empty-comments__icon"})],1),this._v("\n        "+this._s(this.$i18n("conversations.announce.empty.title.comments"))+"\n    ")]),this._v(" "),this.showAdOnEmptyWidget?e("ad-container-conversation-empty",{attrs:{"container-id":this.containerId}}):this._e()],1)}),[],!1,null,"2eb5b159",null).exports);function Te(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);s=!0);}catch(t){a=!0,r=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Se(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Se(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ae(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?je(Object(n),!0).forEach((function(e){we(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function we(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pe,Re={props:{thread:N.a.object.isRequired,contentContainer:N.a.object.isRequired,hasMoreAvailable:N.a.bool,isTabActive:N.a.bool.def(!1),disableMentions:N.a.bool.def(!1),hasPreview:N.a.bool},inject:[h.e,h.d],data:function(){return{isTopIntersecting:!1,isBelowPinnedIntersecting:!1}},created:function(){this.PALETTES=rt.a,this.HEADER_HEIGHT=p.c,this.BOTTOM=st.BOTTOM,this.createAction=i.n,this.fetchAction=i.ub,this.fetchRepliesAction=i.bb,this.fetchDirectRepliesAction=i.ab,this.fetchSelectedAction=i.ub,this.commentWithReplyForm=oe,this.isJumpyBrowser=at.d},mounted:function(){var t=this;Object(E.d)().then((function(){t.topIntersectionObserver=Object(E.a)(t.$refs.top,t.topObserverHandler,{rootMargin:"-50px"}),t.belowPinnedIntersectionObserver=Object(E.a)(t.$refs.belowPinned,t.belowPinnedObserverHandler,{rootMargin:"-50px"})}))},beforeDestroy:function(){this.topIntersectionObserver&&this.topIntersectionObserver.unobserve(this.$refs.top),this.belowPinnedIntersectionObserver&&this.belowPinnedIntersectionObserver.unobserve(this.$refs.belowPinned)},computed:Ae(Ae({},Object(l.c)({interactions:r.Lb,activeReplyThreadByContainerUuid:r.a,allMentionNotifications:r.m,mentionNotificationByUuid:r.qc,contentByUuid:r.S,siteSettings:r.Hc,livecommentsSettingsByUuid:r.V,widgetSettingsByUuid:r.xd,isOffline:r.Wb})),{},{showAdOnEmptyWidget:function(){return 1===this.$store.getters[r.Hc].show_ads_on_empty_widget},containerId:function(){return this.$store.getters[r.N](this.contentContainer.content_container_uuid)},isEmpty:function(){return 0===this.thread.visible_content.length},limit:function(){return this.widgetSettingsByUuid(this.contentContainer.content_container_uuid).pagination_reply_limit},pinnedThreads:function(){return this.thread.pinned_content},unPinnedThreads:function(){return this.thread.unpinned_content},visibleThreads:function(){return this.thread.visible_content},maximumContentLength:function(){return this.settings.maximum_content_length},below:function(){return this.newCommentsByPlacement(ot.b.BELOW)},unreadComments:function(){return this.$store.getters["".concat(this.THREAD_NAMESPACE,"/").concat(r.fd)](this.contentContainer.content_container_uuid)},notOwnUnreadComments:function(){var t=this;return this.unreadComments.filter((function(e){var n=e.content_uuid;return!t.$store.getters[r.Y](n)}))},newTopLevelAbove:function(){return this.newCommentsByPlacement(ot.b.ABOVE)},allContainerMentionNotifications:function(){if(this.disableMentions)return[];var t=this.contentContainer.content_container_uuid;return this.allMentionNotifications.filter((function(e){return e.content_container_uuid===t}))},shouldPreserveTopRTBarHeight:function(){return at.d&&(this.allContainerMentionNotifications.length>0||this.newTopLevelAbove.length>0)},mentionsAbove:function(){var t=this;return this.allContainerMentionNotifications.filter((function(e){return t.filterMentionsByPlacement(e,ot.b.ABOVE)})).sort((function(e,n){if(e.thread_uuid===n.thread_uuid)return n.time-e.time;var i=t.contentByUuid(e.thread_uuid),r=t.contentByUuid(n.thread_uuid);return i&&r?i.time-r.time:0})).map((function(t){return t.content_uuid}))},mentionsBelow:function(){var t=this;return this.allContainerMentionNotifications.filter((function(e){return t.filterMentionsByPlacement(e,ot.b.BELOW)})).sort((function(e,n){if(e.thread_uuid===n.thread_uuid)return e.time-n.time;var i=t.contentByUuid(e.thread_uuid),r=t.contentByUuid(n.thread_uuid);return i&&r?r.time-i.time:0})).map((function(t){return t.content_uuid}))},isTopRTBarMention:function(){return this.mentionsAbove.length>0},topRTBarCount:function(){return this.isTopRTBarMention?this.mentionsAbove.length:this.newTopLevelAbove.length},topRTBarLabel:function(){return this.isTopRTBarMention?"conversations.realtime_bar.label.mentions":"conversations.realtime_bar.label.comments"},rtBarTopProps:function(){return this.isBackOnline?{isVisible:!0,labelText:this.$i18n("conversations.reload"),showActionButton:!1,palette:rt.a.ACCENT,disabled:this.isOffline}:this.isTopRTBarMention?{isVisible:!0,labelText:this.$i18n("conversations.realtime_bar.label.mentions",{count:this.topRTBarCount}),showActionButton:!1,palette:rt.a.MENTION}:{isVisible:this.topRTBarCount>0&&!(at.d&&this.pinnedThreads.length>0),labelText:this.$i18n("conversations.realtime_bar.label.comments",{count:this.topRTBarCount}),actionText:this.$i18n("conversations.realtime_bar.skip_to_top"),showActionButton:!this.isTopIntersecting,palette:rt.a.ACCENT}},showTopRTBarBelowPinned:function(){return this.pinnedThreads.length>0&&!this.isTopRTBarMention&&this.topRTBarCount>0&&at.d},showBottomRTBar:function(){return this.mentionsBelow.length>0},activeReplyThread:function(){return this.activeReplyThreadByContainerUuid(this.contentContainer.content_container_uuid)},shouldShowReplyThread:function(){return this.activeReplyThread.thread_uuid&&this.isTabActive},realtimeContentCount:function(){return this.$store.getters["".concat(this.THREAD_NAMESPACE,"/").concat(r.Vc)](this.contentContainer.content_container_uuid)},arePromosEnabled:function(){return this.siteSettings[it.a]!==nt.a.NONE},settings:function(){return this.livecommentsSettingsByUuid(this.contentContainer.content_container_uuid)},isBackOnline:function(){return this.contentContainer.is_stale}}),methods:Ae(Ae({},Object(l.b)({addActiveReplyThread:i.a,reloadContainer:i.yc})),{},{topObserverHandler:function(t){this.isTopIntersecting=t[0].isIntersecting,this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(et.dd),{thread_uuid:this.contentContainer.content_container_uuid,is_in_view:t[0].isIntersecting})},belowPinnedObserverHandler:function(t){var e=Te(t,1)[0].isIntersecting;this.isBelowPinnedIntersecting=e,this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(et.dd),{thread_uuid:this.contentContainer.content_container_uuid,is_in_view:e})},newCommentsByPlacement:function(t){return this.notOwnUnreadComments.filter((function(e){return e.place===t}))},handleRtBarTopClick:function(){var t=this;if(this.isBackOnline){var e=this.contentContainer.content_container_uuid;Object(M.f)(this.$store.commit,v.b,e),this.reloadContainer(e).then((function(){Object(M.g)(t.$store.commit,v.b,e)})).catch((function(){Object(M.e)(t.$store.commit,v.b,e,"",1/0)}))}else this.isTopIntersecting?this.skipToTop():this.goToNextUnseenTop()},goToNextUnseenTop:function(){var t=this.isTopRTBarMention,e=this.nextUnseen({place:ot.b.ABOVE,isMention:t});this.findElement(e,t)},goToNextUnseenBottom:function(){var t=this.nextUnseen({place:ot.b.BELOW,isMention:!0});this.findElement(t,!0)},findElement:function(t,e){if(e){var n=Object(f.a)(this.THREAD_NAMESPACE,t);return Object(y.a)(n)?this.goToElement(t):this.initializeAndFetchThread(t)}return this.goToElement(t)},initializeAndFetchThread:function(t){var e=this,n=this.$store.getters[r.ed](t),o=n.target_uuid,s=n.thread_uuid;return this.$store.dispatch("".concat(this.THREAD_NAMESPACE,"/").concat(i.Sb),{content_container_uuid:this.contentContainer.content_container_uuid,thread_uuid:o,selected_content_uuids:[t],fetchAction:this.THREAD_FETCH_ACTION}).then((function(){return e.openReplyThread(o,s)}))},openReplyThread:function(t,e){var n=Object(f.a)(this.THREAD_NAMESPACE,e),i=Object(y.a)(n).parentElement.parentElement.offsetTop-p.c;return this.addActiveReplyThread({thread_uuid:t,offset_top:i,mode:b.REPLY_THREAD_MODES.MENTION})},skipToTop:function(){if(this.realtimeContentCount){var t=this.contentContainer.content_container_uuid;this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(et.wb),{thread_uuid:t,limit:this.limit})}this.goToTop()},goToElement:function(t){var e=Object(f.a)(this.THREAD_NAMESPACE,t),n=Object(y.a)(e);n&&(n.scrollIntoView(!0),Object(y.a)("html").scrollTop-=p.d,Object(y.a)("body").scrollTop-=p.d,this.$store.commit(et.cb,t))},goToTop:function(){var t=this.pinnedThreads.length>0?this.$refs.belowPinned:this.$refs.top;if(t){var e=t.getBoundingClientRect().top,n=document.documentElement.scrollTop;document.documentElement.scrollTop=parseInt(n+e-p.e,10)}},nextUnseen:function(t){var e=t.place;if(t.isMention)return e===ot.b.ABOVE?this.mentionsAbove[0]:this.mentionsBelow[0];if(this.realtimeContentCount){var n=this.contentContainer.content_container_uuid;this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(et.wb),{thread_uuid:n,limit:1})}return this.newTopLevelAbove.length?this.newTopLevelAbove[0].content_uuid:{}},filterMentionsByPlacement:function(t,e){var n=t.content_uuid,i=t.thread_uuid;return this.visibleThreads.includes(i)?this.$store.getters["".concat(this.THREAD_NAMESPACE,"/").concat(r.Sc)](i).visible_content.includes(n)?this.contentByUuid(n).place===e:this.contentByUuid(i).place===e:this.unreadComments.find((function(t){return t.thread_uuid===i}))?e===ot.b.ABOVE&&t:e===ot.b.BELOW&&t}}),components:{topTypingIndicator:lt.a,realtimeBar:ct.a,replyThread:ut.a,heightTransition:X.a,emptyComments:Ce,commentsList:pe}},Ne=(n(1292),Object(x.a)(Re,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"all-comments"},[n("div",{ref:"top"}),t._v(" "),n("div",{staticClass:"all-comments__top-rt-bar-container",class:{"all-comments__top-rt-bar-container--preserve":t.shouldPreserveTopRTBarHeight}},[n("realtime-bar",t._b({staticClass:"all-comments__top-rt-bar",attrs:{"aria-hidden":(!t.rtBarTopProps.isVisible).toString()},on:{"realtime-main-action":t.handleRtBarTopClick,"realtime-arrow-action":t.skipToTop}},"realtime-bar",t.rtBarTopProps,!1))],1),t._v(" "),n("height-transition",[t.isEmpty?t._e():n("comments-list",{staticClass:"vf-conversations-list__pinned-comments",class:{"vf-conversations-list__pinned-comments--empty":0===t.pinnedThreads.length},attrs:{"item-class":"vf3-conversations-list--pinned--list","content-container-uuid":t.contentContainer.content_container_uuid,threads:t.pinnedThreads}})],1),t._v(" "),n("div",{ref:"belowPinned"}),t._v(" "),t.isJumpyBrowser?n("div",{staticClass:"all-comments__top-rt-bar-container",class:{"all-comments__top-rt-bar-container--preserve":t.shouldPreserveTopRTBarHeight}},[n("realtime-bar",{staticClass:"all-comments__top-rt-bar",attrs:{"is-visible":t.showTopRTBarBelowPinned,"label-text":t.$i18n("conversations.realtime_bar.label.comments",{count:t.topRTBarCount}),"action-text":t.$i18n("conversations.realtime_bar.skip_to_top"),palette:t.PALETTES.ACCENT,"show-action-button":!t.isBelowPinnedIntersecting,"aria-hidden":(!t.showTopRTBarBelowPinned).toString()},on:{"realtime-main-action":function(e){t.isBelowPinnedIntersecting?t.skipToTop():t.goToNextUnseenTop()},"realtime-arrow-action":t.skipToTop}})],1):t._e(),t._v(" "),n("top-typing-indicator",{staticClass:"all-comments__typing-indicator",attrs:{"is-typing":t.interactions(t.contentContainer.content_container_uuid).isTyping}}),t._v(" "),n("height-transition",[t.isEmpty?n("empty-comments",{attrs:{"show-ad-on-empty-widget":t.showAdOnEmptyWidget,"container-id":t.containerId}}):t._e()],1),t._v(" "),n("height-transition",[t.isEmpty?t._e():n("comments-list",{staticClass:"vf3-conversations-list--comments",attrs:{"item-class":"vf3-conversations-list--comments--list","is-expanded":t.hasPreview,"content-container-uuid":t.contentContainer.content_container_uuid,threads:t.unPinnedThreads,"enable-promos":t.arePromosEnabled,"has-more-available":t.hasMoreAvailable}})],1),t._v(" "),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.shouldShowReplyThread,expression:"shouldShowReplyThread"}],staticClass:"all-comments__reply-thread-overlay"})]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.shouldShowReplyThread?n("reply-thread",{style:{top:t.activeReplyThread.offset_top+"px"},attrs:{limit:t.limit,"create-action":t.createAction,"fetch-action":t.fetchAction,"fetch-replies-action":t.fetchRepliesAction,"fetch-direct-replies-action":t.fetchDirectRepliesAction,"fetch-selected-action":t.fetchSelectedAction,"maximum-content-length":t.maximumContentLength,"content-component":t.commentWithReplyForm,"active-reply-thread":t.activeReplyThread},on:{"is-reply-thread-header-sticky":function(e){return t.$emit("is-reply-thread-header-sticky",e)}}}):t._e()],1),t._v(" "),n("realtime-bar",{staticClass:"bottom-rt-bar",attrs:{location:t.BOTTOM,"is-visible":t.showBottomRTBar,"label-text":t.$i18n("conversations.realtime_bar.label.mentions",{count:t.mentionsBelow.length}),palette:t.PALETTES.MENTION,"show-action-button":!1},on:{"realtime-main-action":t.goToNextUnseenBottom}})],1)}),[],!1,null,"b23689be",null).exports);function Ie(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ue,De={props:{contentContainer:N.a.object.isRequired,thread:N.a.object.isRequired,isReady:N.a.bool.isRequired,isRefetchingComments:N.a.bool.isRequired,reloadStatus:N.a.string,hasMoreAvailable:N.a.bool,isTabActive:N.a.bool.def(!1)},inject:[h.a,h.b],provide:(Pe={},Ie(Pe,h.e,s.a),Ie(Pe,h.d,i.ub),Pe),components:{threadTab:Ne,vfSpinningLoader:tt.a,vfExclamationMarkIcon:Q.a}},Le=(n(1293),Object(x.a)(De,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isReady?n("thread-tab",{attrs:{thread:t.thread,"content-container":t.contentContainer,"has-more-available":t.hasMoreAvailable,"is-tab-active":t.isTabActive},on:{"is-reply-thread-header-sticky":function(e){return t.$emit("is-reply-thread-header-sticky",e)}}}):n("div",{staticClass:"vf3-comments__loader vf-flex vf-centered"},[t.isRefetchingComments?n("vf-spinning-loader",{attrs:{size:t.SIZES.MEDIUM,palette:t.PALETTES.ACCENT,status:t.reloadStatus}}):n("vf-exclamation-mark-icon",{attrs:{circle:"outline",size:t.SIZES.MEDIUM}})],1)}),[],!1,null,"3b097a72",null).exports);function $e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xe={props:{contentContainer:N.a.object.isRequired,thread:N.a.object.isRequired,isReady:N.a.bool.isRequired,isRefetchingComments:N.a.bool.isRequired,reloadStatus:N.a.string,hasMoreAvailable:N.a.bool,isTabActive:N.a.bool.def(!1)},inject:[h.a,h.b],provide:(Ue={},$e(Ue,h.e,s.b),$e(Ue,h.d,i.db),Ue),components:{threadTab:Ne,vfSpinningLoader:tt.a,vfExclamationMarkIcon:Q.a}},ke=(n(1294),Object(x.a)(xe,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isReady?n("thread-tab",{attrs:{"disable-mentions":"",thread:t.thread,"content-container":t.contentContainer,"has-more-available":t.hasMoreAvailable,"is-tab-active":t.isTabActive,"has-preview":!1},on:{"is-reply-thread-header-sticky":function(e){return t.$emit("is-reply-thread-header-sticky",e)}}}):n("div",{staticClass:"vf3-comments__loader vf-flex vf-centered"},[t.isRefetchingComments?n("vf-spinning-loader",{attrs:{size:t.SIZES.MEDIUM,palette:t.PALETTES.ACCENT,status:t.reloadStatus}}):n("vf-exclamation-mark-icon",{attrs:{circle:"outline",size:t.SIZES.MEDIUM}})],1)}),[],!1,null,"b8a6e6b2",null).exports);function Be(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);s=!0);}catch(t){a=!0,r=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}(t,e)||Me(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(t,e){if(t){if("string"==typeof t)return Fe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(t,e):void 0}}function Fe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function He(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function qe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?He(Object(n),!0).forEach((function(e){Ge(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ge(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ve=Object(O.b)("settings-"),ze={props:{thread:N.a.object.isRequired,featuredThread:N.a.object.isRequired,contentContainer:N.a.object.isRequired,sectionUuid:N.a.uuid.isRequired,user:N.a.object.isRequired,initialHeight:N.a.oneOfType([Number,String])},inject:[h.a,h.b],beforeCreate:function(){this.settingsAreaID=Ve(),this.storeAction=i.m},created:function(){this.initialTab=this.featuredThread.visible_content.length>=this.widgetSettings.featured_tab_active_threshold&&!this.deeplinkUuid?p.a.FEATURED:p.a.ALL_COMMENTS,this.handleTabTo(this.initialTab)},mounted:function(){this.$publish(a.f.CHANNEL,a.f.EVENTS.LOADED,this.$el),this.initDom(),this.deeplinkUuid&&this.initializeFocusView(),this.fetchTrendingArticlesComponent(),this.initializeFadeout()},beforeDestroy:function(){this.observer&&this.observer.unobserve(this.$refs.tabbedNavTop)},data:function(){return{hasStickiedTabs:!1,isLoadingNewComments:!1,newCommentsHasError:!1,isReplyThreadHeaderSticky:!1,areSettingsOpenedByUser:!1,currentTab:p.a.ALL_COMMENTS,settingsComponent:null,trendingArticlesComponent:null,initialTab:null,fadeoutShow:!1,fadeoutObserver:null}},computed:qe(qe({},Object(l.c)({isCommentingExpired:r.Db,deeplinkUuid:r.lb,currentUser:r.ib,errorStatus:r.ub,getSettings:r.V,getWidgetSettings:r.xd,isCurrentUserModOrAdmin:r.Tb,siteSettings:r.Hc,allCommentsCount:r.h,getFeaturedCommentsCount:r.nb})),{},{contentContainerUuid:function(){return this.contentContainer.content_container_uuid},settings:function(){return this.getSettings(this.contentContainerUuid)},widgetSettings:function(){return this.getWidgetSettings(this.contentContainerUuid)},areSettingsVisible:function(){return this.isCurrentUserModOrAdmin&&null!==this.settingsComponent&&this.areSettingsOpenedByUser},featuredCommentsCount:function(){return this.getFeaturedCommentsCount(this.contentContainerUuid)},tabs:function(){return[{name:p.a.FEATURED,text:this.$i18n("comments.navigation.featured"),hasNewContent:!1,count:this.featuredCommentsCount,ariaLabel:this.$i18n("comments.navigation.featured_tab_label",{count:this.featuredCommentsCount}),test:this.featuredCommentsCount>0},{name:p.a.ALL_COMMENTS,text:this.$i18n("comments.navigation.all_comments"),hasNewContent:!1,count:this.allCommentsCount(this.contentContainerUuid),ariaLabel:this.$i18n("comments.navigation.all_comments_tab_label",{count:this.allCommentsCount(this.contentContainerUuid)}),test:!0}]},filteredTabs:function(){return this.tabs.filter((function(t){return t.test}))},isReady:function(){return this.thread&&!this.isRefetchingComments&&!this.didRefetchingFail},newCommentPlaceholder:function(){var t=this.thread.visible_content.length,e=t>0?this.$i18n("comments.new_comment.join_placeholder"):this.$i18n("comments.new_comment.start_placeholder"),n=t>0?this.$i18n("comments.new_comment.join_placeholder_with_name",{name:this.currentUser.name}):this.$i18n("comments.new_comment.start_placeholder_with_name",{name:this.currentUser.name});return Object(C.F)(this.currentUser)?n:e},reloadStatus:function(){return this.errorStatus(this.contentContainerUuid,v.b)},isRefetchingComments:function(){return this.reloadStatus===m.a.PENDING},didRefetchingFail:function(){return this.reloadStatus===m.a.ERROR},areTrendingArticlesVisible:function(){return null!==this.trendingArticlesComponent},areMoreCommentsAvailable:function(){switch(this.currentTab){case p.a.ALL_COMMENTS:return this.thread.more_available;case p.a.FEATURED:return this.featuredThread.more_available;default:return!1}},isAllCommentsTabActive:function(){return this.currentTab===p.a.ALL_COMMENTS},isFeaturedCommentsTabActive:function(){return this.currentTab===p.a.FEATURED},fadeoutMaxHeight:function(){return this.fadeoutShow?{"max-height":"".concat(this.initialHeight,"px")}:{}},fadeoutPosition:function(){var t=parseInt(this.initialHeight,10);return{top:"".concat(t-100,"px")}},fadeoutEnabled:function(){return this.initialHeight>0&&!this.deeplinkUuid}}),methods:qe(qe({},Object(l.b)({fetchAllComments:i.kb,fetchFeaturedComments:i.db,addActiveReplyThread:i.a,initializeThread:"".concat(s.a,"/").concat(i.Sb)})),{},{toggleSettings:function(){var t=this;this.hasStickiedTabs?(this.areSettingsOpenedByUser=!0,this.$nextTick().then((function(){t.$refs.settings.$el.scrollIntoView()}))):this.areSettingsOpenedByUser=!this.areSettingsOpenedByUser},initDom:function(){var t=this;g.a.add(Object(y.a)(".vf3-comments__tabbed-nav .vf-tabbed-nav",this.$el)),Object(E.d)().then((function(){t.observer=Object(E.a)(t.$refs.tabbedNavTop,t.handleObserved,{})}))},initializeFocusView:function(){var t=this;this.$refs.tabbedNavigation.selectTab(p.a.ALL_COMMENTS);var e=this.deeplinkUuid,n=this.contentContainer.content_container_uuid;return this.$store.dispatch(i.ub,{content_container_uuid:n,content_uuids:e}).then((function(){if(!t.$store.getters[r.Qb](e))return Promise.resolve();var o,s,a=t.$store.getters[r.S](e),c=a.thread_uuid===n;return c?(s=e,o=[]):(s=a.parent_uuid,o=[e]),t.initializeThread({content_container_uuid:n,thread_uuid:s,selected_content_uuids:o,fetchAction:i.ub}).then((function(){var n=c?e:a.thread_uuid,i=t.findElementOffset(n);return t.addActiveReplyThread({thread_uuid:s,offset_top:i,mode:b.REPLY_THREAD_MODES.REPLIES})}))}))},findElementOffset:function(t){var e=Object(f.a)(s.a,t);return Object(y.a)(e).parentElement.parentElement.offsetTop-p.c},handleObserved:function(t){var e=Be(t,1)[0].isIntersecting;this.hasStickiedTabs=!e},handleLoadMore:function(){var t,e=this;switch(this.isLoadingNewComments=!0,this.newCommentsHasError=!1,this.currentTab){case p.a.ALL_COMMENTS:t=this.fetchAllComments(this.contentContainerUuid),this.trackLoadMore(p.a.ALL_COMMENTS);break;case p.a.FEATURED:t=this.fetchFeaturedComments(this.contentContainerUuid),this.trackLoadMore(p.a.FEATURED);break;default:t=Promise.resolve()}t.catch((function(){e.newCommentsHasError=!0})).then((function(){e.isLoadingNewComments=!1}))},trackLoadMore:function(t){this.$publish(a.b.CHANNEL,a.b.EVENTS.LOAD_MORE_CLICK,{widget:u.c.COMMENTS,tab:t})},trackLoadMoreInitialHeight:function(){this.$publish(a.b.CHANNEL,a.b.EVENTS.LOAD_MORE_INITIAL_HEIGHT_CLICK,{widget:u.c.COMMENTS})},trackBoxClick:function(t){P.a.getInstance().$can("create","live-content",{trigger:t,action:w.g})||this.$publish(a.b.CHANNEL,a.b.EVENTS.ATTEMPTED_ACTION,{action:w.c})},setReplyThreadStickyHeader:function(t){this.isReplyThreadHeaderSticky=t},handleTabTo:function(t){this.currentTab=t,this.setScrollToTop()},fetchSettingsComponent:function(){var t=this;Promise.all([n.e(0),n.e(6),n.e(33)]).then(n.bind(null,1620)).then((function(e){t.settingsComponent=e.default}))},fetchTrendingArticlesComponent:function(){var t=this;this.siteSettings.enable_comments_trending_articles&&n.e(34).then(n.bind(null,1621)).then((function(e){t.trendingArticlesComponent=e.default}))},redirectToAllCommentsTab:function(){this.currentTab!==p.a.ALL_COMMENTS&&this.$refs.tabbedNavigation.selectTab(p.a.ALL_COMMENTS)},setScrollToTop:function(){if(this.hasStickiedTabs){var t=Object(y.a)("nav",this.$refs.tabbedNavigation.$el).offsetTop-document.scrollingElement.scrollTop;document.scrollingElement.scrollTop=this.$refs.tabbedNavTop.offsetTop-t}},initializeFadeout:function(){var t=this;this.fadeoutEnabled&&(this.fadeoutObserver=new ResizeObserver((function(e){var n,i=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Me(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(e);try{for(i.s();!(n=i.n()).done;){var r=n.value.target.scrollHeight>t.initialHeight;t.fadeoutShow=t.fadeoutEnabled&&r}}catch(t){i.e(t)}finally{i.f()}})),this.fadeoutObserver.observe(this.$refs.comments))},fadeoutHide:function(){this.fadeoutObserver&&this.fadeoutObserver.unobserve(this.$refs.comments),this.fadeoutShow=!1,this.trackLoadMoreInitialHeight()}}),watch:{deeplinkUuid:function(){this.fadeoutHide(),this.initializeFocusView()},isRefetchingComments:function(t){t&&this.$refs.commentHeader.$el.getBoundingClientRect().top<0&&(this.$refs.commentHeader.$el.scrollIntoView(!0),Object(y.a)("html").scrollTop-=p.e,Object(y.a)("body").scrollTop-=p.e)},isCurrentUserModOrAdmin:{immediate:!0,handler:function(t){t?this.fetchSettingsComponent():this.areSettingsOpenedByUser=!1}}},provide:Ge({},h.e,s.a),components:{conversationsFooter:J.a,vfTabbedNavigation:S.a,heightTransition:X.a,commentHeader:k,commentNavRight:Y,navTabButton:A.a,postForm:T.a,loadMore:Z.a,allCommentsWrapper:Le,vfStatusMessage:K.a,featuredCommentsWrapper:ke,vfButton:j.a}},We=(n(1295),Object(x.a)(ze,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{ref:"comments",staticClass:"vf3-comments",class:{"vf3-comments__fade-out":t.fadeoutShow},style:t.fadeoutMaxHeight},[t.fadeoutShow?n("div",{staticClass:"vf3-comments-fadeout-container"},[n("div",{staticClass:"vf3-comments-fadeout",style:t.fadeoutPosition,on:{click:t.fadeoutHide}},[n("vf-button",{attrs:{"is-cta":"",palette:"accent",size:"medium"}},[t._v("\n                "+t._s(t.$i18n("conversations.load_more.label.comments"))+"\n            ")])],1)]):t._e(),t._v(" "),n("comment-header",{ref:"commentHeader",attrs:{"content-container":t.contentContainer,"section-uuid":t.sectionUuid}}),t._v(" "),n("post-form",{staticClass:"v3-comments__post-form",attrs:{placeholder:t.newCommentPlaceholder,user:t.user,"content-container-uuid":t.contentContainerUuid,"store-action":t.storeAction,"is-rich-text-enabled":!1,"character-limit":t.settings.maximum_content_length,"is-expired":t.isCommentingExpired(t.contentContainerUuid),"expiry-notice":t.$i18n("conversations.content_container.expiry_notice.comments")},on:{"on-content-created":t.redirectToAllCommentsTab},nativeOn:{click:function(e){return t.trackBoxClick(e)}}}),t._v(" "),n("height-transition",[t.settings.is_hidden&&t.isCurrentUserModOrAdmin&&!t.areSettingsVisible?n("vf-status-message",{attrs:{type:"warning"},scopedSlots:t._u([{key:"vf-status-message-content",fn:function(){return[t._v("\n                "+t._s(t.$i18n("comments.settings.hidden"))+"\n            ")]},proxy:!0}],null,!1,837348511)}):t._e()],1),t._v(" "),n("height-transition",[t.areSettingsVisible?n(t.settingsComponent,{ref:"settings",tag:"component",attrs:{id:t.settingsAreaID,"content-container-uuid":t.contentContainerUuid}}):t._e()],1),t._v(" "),n("div",{ref:"tabbedNavTop"}),t._v(" "),n("vf-tabbed-navigation",{ref:"tabbedNavigation",staticClass:"vf3-comments__tabbed-nav",class:{"vf3-comments__tabbed-nav--stickied":t.hasStickiedTabs,"vf3-comments__tabbed-nav--overlayed":t.isReplyThreadHeaderSticky},attrs:{type:"dropdown",tabs:t.filteredTabs,"initial-tab":t.initialTab,"nav-label":t.$i18n("comments.heading")},on:{"tab-to":t.handleTabTo},scopedSlots:t._u([{key:"nav-right",fn:function(){return[n("comment-nav-right",{staticClass:"vf3-comments__tabbed-nav__right",attrs:{"content-container":t.contentContainer,"tab-name":t.currentTab,"settings-id":t.settingsAreaID,"are-settings-expanded":t.areSettingsVisible&&t.areSettingsOpenedByUser&&!t.hasStickiedTabs},on:{"settings-toggled":t.toggleSettings}})]},proxy:!0},{key:"button",fn:function(e){var i=e.tab;return[n("nav-tab-button",t._b({attrs:{"is-inside-trigger":i.isInsideTrigger,"is-inside-dropdown":i.isInsideDropdown}},"nav-tab-button",i,!1)),t._v(" "),i.isInsideTrigger?n("p",{staticClass:"vf-offscreen-text"},[t._v("\n                "+t._s(t.$i18n("comments.navigation.filter_label"))+"\n            ")]):t._e()]}},{key:"all",fn:function(){return[n("h3",{staticClass:"vf-offscreen-text"},[t._v("\n                "+t._s(t.$i18n("comments.navigation.all_comments"))+"\n            ")]),t._v(" "),n("all-comments-wrapper",{attrs:{"is-ready":t.isReady,thread:t.thread,"content-container":t.contentContainer,"is-refetching-comments":t.isRefetchingComments,"reload-status":t.reloadStatus,"has-more-available":!1,"is-tab-active":t.isAllCommentsTabActive},on:{"is-reply-thread-header-sticky":t.setReplyThreadStickyHeader}})]},proxy:!0},{key:"featured",fn:function(){return[n("h3",{staticClass:"vf-offscreen-text"},[t._v("\n                "+t._s(t.$i18n("comments.navigation.featured_tab_heading"))+"\n            ")]),t._v(" "),n("p",{staticClass:"vf-offscreen-text"},[t._v("\n                "+t._s(t.$i18n("comments.navigation.featured_tab_content_description"))+"\n            ")]),t._v(" "),n("featured-comments-wrapper",{attrs:{"is-ready":t.isReady,thread:t.featuredThread,"content-container":t.contentContainer,"is-refetching-comments":t.isRefetchingComments,"reload-status":t.reloadStatus,"has-more-available":!1,"is-tab-active":t.isFeaturedCommentsTabActive},on:{"is-reply-thread-header-sticky":t.setReplyThreadStickyHeader}})]},proxy:!0}])}),t._v(" "),t.isReady?n("div",{staticClass:"vf3-comments__bottom-action"},[t.areMoreCommentsAvailable?n("load-more",{attrs:{"is-loading":t.isLoadingNewComments,"has-error":t.newCommentsHasError,"error-aria-label":t.$i18n("conversations.load_more.error_aria.comments")},on:{"load-more":t.handleLoadMore}},[n("span",[t._v(t._s(t.$i18n("conversations.load_more.label.comments")))])]):t.isFeaturedCommentsTabActive?n("vf-button",{staticClass:"vf-label-text",attrs:{"is-cta":"","is-inverted":"","is-full-width":"",size:t.SIZES.SMALL,palette:t.PALETTES.ACCENT},nativeOn:{click:function(e){return t.redirectToAllCommentsTab(e)}}},[t._v("\n            "+t._s(t.$i18n("conversations.view_all.comments"))+"\n        ")]):t._e()],1):t._e(),t._v(" "),t.areTrendingArticlesVisible?n(t.trendingArticlesComponent,{tag:"component",attrs:{"content-container-uuid":t.contentContainerUuid}}):t._e(),t._v(" "),n("conversations-footer",{attrs:{product:"LiveCommenting","section-uuid":t.sectionUuid,"aria-label":t.$i18n("comments.heading")}})],1)}),[],!1,null,"11858f3d",null).exports);function Ye(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ye(Object(n),!0).forEach((function(e){Je(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Je(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ze={props:{sectionUuid:N.a.uuid.isRequired,commentsUuid:N.a.uuid.isRequired,dataVfId:N.a.string.isRequired,initialHeight:N.a.oneOfType([Number,String])},data:function(){return{commentsBaseWithActivity:Object(d.a)(We,u.c.COMMENTS,this.dataVfId,50,50)}},mounted:function(){this.rtSubscribe({container_uuid:[this.commentsUuid],section_uuid:[this.sectionUuid],message_type:[o.b.LIVECOMMENT,o.b.LIVECOMMENT_POST,o.b.REPLY_TO_LIVECOMMENT_POST_DEPRECATED,o.b.INTERACTION],action:[o.a.CREATED,o.a.UPDATED,o.a.VISIBLE,o.a.SPAM,o.a.DISABLED,o.a.FLAGGED,o.a.FLAGS_CLEARED,o.a.DELETED,o.a.LIKED,o.a.UNLIKED,o.a.DISLIKED,o.a.UNDISLIKED,o.a.STARTED_TYPING,o.a.PICKED,o.a.UNPICKED,o.a.PINNED,o.a.UNPINNED]}),this.initializeMentionNotifications(),this.$subscribe(a.D.CHANNEL,a.D.EVENTS.LOADED,this.onRealtimeUserChange)},computed:Ke(Ke({},Object(l.c)({currentUser:r.ib,getContentContainer:r.ic,getSettings:r.V,getThreadByUuid:"".concat(s.a,"/").concat(r.Xc),getFeaturedThreadByUuid:"".concat(s.b,"/").concat(r.Xc),isCurrentUserModOrAdmin:r.Tb})),{},{settings:function(){return this.getSettings(this.contentContainerUuid)},contentContainer:function(){return this.getContentContainer(this.commentsUuid)||{}},contentContainerUuid:function(){return this.contentContainer.content_container_uuid},isWidgetVisible:function(){return!(this.settings&&this.settings.is_hidden)||this.isCurrentUserModOrAdmin},isReady:function(){return this.contentContainer&&this.contentContainer.hasOwnProperty("content_container_uuid")&&this.thread&&this.featuredThread},thread:function(){return this.getThreadByUuid(this.commentsUuid)},featuredThread:function(){return this.getFeaturedThreadByUuid(this.commentsUuid)}}),methods:Ke(Ke({},Object(l.b)({fetchMentionNotificationsByContainerUuid:i.mb})),{},{fetchMentionNotifications:function(){this.fetchMentionNotificationsByContainerUuid(this.commentsUuid)},onRealtimeUserChange:function(){this.initializeMentionNotifications()},initializeMentionNotifications:function(){this.currentUser.uuid!==c.b&&this.fetchMentionNotifications()}})},Xe=Object(x.a)(Ze,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isReady&&t.isWidgetVisible?n(t.commentsBaseWithActivity,{tag:"component",attrs:{"content-container":t.contentContainer,"section-uuid":t.sectionUuid,user:t.currentUser,thread:t.thread,"featured-thread":t.featuredThread,"data-vf-id":t.dataVfId,"initial-height":t.initialHeight}}):t._e()}),[],!1,null,null,null);e.default=Xe.exports},381:function(t,e,n){"use strict";n.r(e);var i,r=n(2),o=n(26),s=n(90),a=n(40);function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u,l=(c(i={},r.sb,(function(t,e){(t[e]||[]).pop()})),c(i,r.a,Object(s.a)(o.default,(function(t,e){return!e.some((function(e){return e.thread_uuid===t.thread_uuid}))}))),c(i,r.C,Object(a.e)(o.default)),c(i,r.bd,(function(t,e){var n=e.uuid,i=e.mode,r=t[n];r[r.length-1].mode=i})),i),d=n(0);function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=(h(u={},d.a,(function(t){return function(e){var n=t[e]||[];return n[n.length-1]||{}}})),h(u,d.Mb,(function(t){return function(e){return Boolean(t[e])}})),u),p=n(3);var b,m,v,_=(b={},m=p.a,v=function(t,e){var n=e.thread_uuid,i=e.offset_top,o=e.mode,s=t.getters[d.S](n),a=t.getters[d.W](n);i=t.getters[d.a](a).offset_top||i;var c={key:a,items:[{parent_thread_uuid:s.thread_uuid,content_container_uuid:a,thread_uuid:n,offset_top:i,mode:o}]};t.commit(r.a,c)},m in b?Object.defineProperty(b,m,{value:v,enumerable:!0,configurable:!0,writable:!0}):b[m]=v,b);n.d(e,"REPLY_THREAD_MODES",(function(){return g})),n.d(e,"replyThreads",(function(){return O}));var g={MENTION:"mention",REPLY_PARENT:"reply",REPLIES:"replies"},y=function(){return{}},O=function(){return{state:y,mutations:l,getters:f,actions:_}}},510:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i,r=n(26),o=n(525),s=n.n(o),a=(n(526),n(514)),c=n(496);function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=(u(i={},a.a.ERROR,"vf-status-message-error"),u(i,a.a.WARNING,"vf-status-message-warning"),i),d=r.default.extend({template:s.a,props:["type"],methods:{getClasses:function(){return u({"vf-flex":!0,"vf-status-message":!0},l[this.type],!0)}},components:{vfExclamationMarkIcon:c.a}})},512:function(t,e,n){"use strict";n.r(e),n.d(e,"STATIC",(function(){return i})),n.d(e,"EDITABLE",(function(){return r})),n.d(e,"SUBMITTING",(function(){return o})),n.d(e,"ERROR",(function(){return s}));var i="static",r="editable",o="submitting",s="error"},514:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i={ERROR:"error",WARNING:"warning"}},517:function(t,e,n){"use strict";var i=n(20),r=n(162)(6),o="findIndex",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),i(i.P+i.F*s,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(136)(o)},520:function(t,e,n){"use strict";n(46),n(17),n(11),n(8),n(7),n(4),n(22);var i=n(118),r=n(0),o=n(23),s=n(180),a=n(81);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={props:{uniqueId:o.a.string.isRequired,adSettings:o.a.object.isRequired},mounted:function(){var t=this;this.adService=Object(s.d)(this.adSettings,this.adIntegration),this.adService.loadScript(this.siteAdId).then((function(){t.adService.generateAd(t.slotId).then((function(){t.$emit(a.SUCCESS)})).catch((function(){t.$emit(a.ERROR)}))})).catch((function(){t.$emit(a.ERROR)}))},computed:u(u({},Object(i.c)({siteSettings:r.Hc})),{},{adIntegration:function(){return this.siteSettings[this.adSettings.ad_integration]},siteAdId:function(){return this.siteSettings[this.adSettings.site_ad_id]},slotId:function(){return"vf-promo-".concat(this.uniqueId)}}),beforeDestroy:function(){this.adService.adCleanup(this.slotId)}},h=n(45),f=Object(h.a)(d,(function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:this.slotId}})}),[],!1,null,null,null);e.a=f.exports},522:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r}));var i=function(t,e){return"vf-".concat(t,"-").concat(e)},r=function(t,e){return"#".concat(i(t,e))}},525:function(t,e){t.exports='<div class="vf-flex vf-status-message" :class=getClasses()> <div class="vf-status-message-triangle vf-status-message-triangle-upper"></div> <div class="vf-status-message-badge vf-flex"> <div class=icon> <vf-exclamation-mark-icon class="vf-status-message-icon vf-icon-medium"></vf-exclamation-mark-icon> </div> <slot name=vf-status-message-content></slot> </div> </div> '},526:function(t,e,n){},528:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return a}));var i=300,r=50,o=49,s=4294967295e3,a={ALL_COMMENTS:"all",FEATURED:"featured"}},531:function(t,e,n){},532:function(t,e,n){},533:function(t,e,n){},534:function(t,e,n){},548:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(39);var i=["button","a","input"],r=function(t){return i.includes(t.tagName.toLowerCase())}},550:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return a}));var i=n(14),r=function(t){return 1===t.anonymous},o=function(t,e){return Object(i.F)(t)&&Object(i.C)(t,e)},s=function(t,e){var n=e.enable_username_premoderation;return Object(i.F)(t)&&n&&!Object(i.I)(t.username_moderation_status)},a=function(t,e){var n=e.enable_avatar_premoderation;return Object(i.F)(t)&&n&&!Object(i.I)(t.avatar_moderation_status)}},557:function(t,e,n){"use strict";var i=n(493),r=n(14),o=n(23),s={props:{isFocused:o.a.bool.def(!1),currentUser:o.a.object.isRequired,showMobileView:o.a.bool.def(!1),isDefaultContainer:o.a.bool},created:function(){this.size=i.b.SMALL},computed:{isLoggedIn:function(){return Object(r.F)(this.currentUser)},isModerator:function(){return Object(r.J)(this.currentUser)},isAdmin:function(){return Object(r.D)(this.currentUser)},classes:function(){return{"vf-content-focus-container--default":this.isDefaultContainer,"vf-content-focus-container--focused":this.isFocused,"vf-content-focus-container__mobile":this.showMobileView,"vf-is-anonymous":!this.isLoggedIn,"vf-is-logged-in":this.isLoggedIn,"vf-is-mod":this.isModerator,"vf-is-admin":this.isAdmin}}}},a=(n(707),n(45)),c=Object(a.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-content-focus-container",class:t.classes,on:{click:function(e){return t.$emit("focus-on-element",e)}}},[t._t("header"),t._v(" "),n("div",{staticClass:"vf-content-focus-container__contents"},[t._t("default")],2),t._v(" "),t._t("footer")],2)}),[],!1,null,"30bc6280",null);e.a=c.exports},558:function(t,e,n){"use strict";n(87);var i={props:{count:{type:Number,required:!0},a11yLabel:{type:String,required:!0},hasRealtime:{type:Boolean,default:!1},hasMentions:{type:Boolean,default:!1},isTyping:{type:Boolean,default:!1}},computed:{classes:function(){return{"remaining-content--accent":this.hasRealtime,"remaining-content--mention":this.hasMentions}},formattedCount:function(){return this.count>99?"99+":this.count}}},r=(n(612),n(45)),o=Object(r.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticClass:"vf-icon remaining-content",class:this.classes,attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 25 25"}},[e("path",{attrs:{d:"M.5 23.793V2A1.5 1.5 0 0 1 2 .5h21A1.5 1.5 0 0 1 24.5 2v17a1.5 1.5 0 0 1-1.5 1.5H3.793L.5 23.793z"}}),this._v(" "),e("transition",{attrs:{name:"fade",mode:"out-in"}},[this.isTyping?e("g",this._l([6.25,12.5,18.75],(function(t){return e("circle",{key:t,staticClass:"remaining-content__loader-circle",attrs:{cx:t,cy:"10.5",r:"1.5"}})})),0):e("text",{staticClass:"remaining-content__count",attrs:{"aria-hidden":"true",y:"15",x:"12.5","text-anchor":"middle"}},[this._v("\n            "+this._s(this.formattedCount)+"\n        ")])])],1)}),[],!1,null,"640238ce",null);e.a=o.exports},559:function(t,e,n){"use strict";n(39),n(42);var i,r=n(575),o=n(296),s=n(298);function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=[s.c.MIDDLE,s.c.LAST],u=[s.c.FIRST,s.c.MIDDLE,s.c.ONLY_TYPING],l=(a(i={},o.a.LIGHT_PRIMARY,"pin-line--light-primary"),a(i,o.a.ACCENT,"pin-line--accent"),a(i,o.a.MENTION,"pin-line--mention"),i),d={props:{locationInThread:{type:String,required:!0},palette:{type:String,required:!1,default:o.a.LIGHT_PRIMARY}},computed:{paletteClassTop:function(){return this.showPinAbove?l[this.palette]:""},paletteClassBottom:function(){return this.showPinBelow?l[this.palette]:""},bottomClasses:function(){var t;return a(t={},this.paletteClassBottom,!0),a(t,"pin-line--typing",this.locationInThread===s.c.ONLY_TYPING),t},showPinAbove:function(){return c.includes(this.locationInThread)},showPinBelow:function(){return u.includes(this.locationInThread)}},components:{contentLayout:r.a}},h=(n(728),n(45)),f=Object(h.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("content-layout",{scopedSlots:t._u([{key:"left",fn:function(){return[n("div",{staticClass:"pin-line",class:t.paletteClassTop}),t._v(" "),n("div",{staticClass:"pin-line pin-line--bottom",class:t.bottomClasses}),t._v(" "),t._t("left")]},proxy:!0},{key:"right",fn:function(){return[t._t("right")]},proxy:!0}],null,!0)})}),[],!1,null,"453f64dc",null);e.a=f.exports},562:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r}));var i="LIVECOMMENTS_RELOAD_KEY",r="LIVEBLOG_RELOAD_KEY"},579:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));n(46),n(17),n(11),n(8),n(7),n(4),n(22),n(79),n(154);var i=n(32),r=n(181);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=i.a.interaction_api_url||"https://interaction.viafoura.co/v4/interaction";function u(t,e,n,i,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return r.a.register(c).api.request(s({withCredentials:!0,headers:o,method:t,params:n,data:i,url:e},a))}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="/{section_uuid}/{content_container_uuid}/{thread_uuid}/{content_uuid}/typing",i={},r={},o={Accept:"application/json"};return u("POST",n=(n=(n=(n=n.replace("{section_uuid}",t.section_uuid)).replace("{content_container_uuid}",t.content_container_uuid)).replace("{thread_uuid}",t.thread_uuid)).replace("{content_uuid}",t.content_uuid),r,i,o,e)}},581:function(t,e,n){},587:function(t,e,n){},590:function(t,e,n){},591:function(t,e,n){"use strict";n(531)},592:function(t,e,n){},594:function(t,e,n){},595:function(t,e,n){},596:function(t,e,n){},597:function(t,e,n){},598:function(t,e,n){},599:function(t,e,n){},600:function(t,e,n){},601:function(t,e,n){},602:function(t,e,n){},605:function(t,e,n){"use strict";n(532)},606:function(t,e,n){},609:function(t,e,n){},610:function(t,e,n){},611:function(t,e,n){},612:function(t,e,n){"use strict";n(533)},613:function(t,e,n){},614:function(t,e,n){},615:function(t,e,n){},616:function(t,e,n){},617:function(t,e,n){},618:function(t,e,n){},619:function(t,e,n){},620:function(t,e,n){},621:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a}));n(8),n(7),n(4),n(80);var i=n(23),r=n(296),o=n(298),s=i.a.oneOf(Object.values(r.a)),a=i.a.oneOf(Object.values(o.c))},622:function(t,e,n){"use strict";n(39),n(42);var i=n(0),r=n(70),o=n(19),s=function(t,e){return Object(o.a)((function(){return t.value.state_reasons.includes(e)}))};e.a=function(t,e){var n=t.getters,a=Object(o.a)((function(){return n[i.S](e)})),c=Object(o.a)((function(){return n[i.ib]}));return{isActorGhostBanned:s(a,r.d.ACTOR_GHOST_BANNED),isActorHideBanned:s(a,r.d.ACTOR_HIDE_BANNED),isDeleted:s(a,r.d.CONTENT_DELETED),isDisabled:s(a,r.d.CONTENT_DISABLED),isPending:s(a,r.d.CONTENT_AWAITING_MODERATION),isSpam:s(a,r.d.CONTENT_MARKED_AS_SPAM),isEdited:Object(o.a)((function(){return a.value.is_edited})),isByCurrentUser:Object(o.a)((function(){return c.value.uuid===a.value.actor_uuid})),isMuted:Object(o.a)((function(){return n[i.kd](a.value.actor_uuid)}))}}},623:function(t,e,n){"use strict";var i;function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return o}));var o={EMAIL:"email",FACEBOOK:"facebook",TWITTER:"twitter"};r(i={},o.EMAIL,"comment_share_email"),r(i,o.FACEBOOK,"comment_share_facebook"),r(i,o.TWITTER,"comment_share_twitter"),r(i,"DEFAULT","comment_share")},624:function(t,e,n){},625:function(t,e,n){},626:function(t,e,n){},627:function(t,e,n){},628:function(t,e,n){},629:function(t,e,n){},631:function(t,e,n){},632:function(t,e,n){},633:function(t,e,n){},634:function(t,e,n){},635:function(t,e,n){},636:function(t,e){t.exports='<path fill=currentColor fill-rule=evenodd d="M50 3c7 0 13 3 18 7 4 5 7 11 8 18l5 28c2 7 5 10 9 12l3 3c1 1 2 2 2 5 0 2-2 5-5 5H10c-3 0-5-3-5-5 0-3 1-4 2-5l3-3c4-2 7-5 9-12l5-28c1-7 4-13 8-18 5-4 11-7 18-7zM36 83h28v1c0 8-6 14-14 14s-14-6-14-14v-1z"/> '},637:function(t,e,n){"use strict";n(534)},638:function(t,e,n){},640:function(t,e,n){},656:function(t,e,n){"use strict";n(46),n(17),n(11),n(8),n(7),n(4),n(22);var i=n(0),r=n(118),o=n(70),s=n(508),a=n(550),c=(n(80),n(39),n(42),n(81)),u=n(486),l=n(496);function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h,f=[c.ERROR,c.WARNING],p={props:{level:{type:String,required:!0,validator:function(t){return f.includes(t)}},showCloseButton:{type:Boolean,required:!1,default:!1}},computed:{classes:function(){var t;return d(t={},"vf-error",this.level===c.ERROR),d(t,"vf-warning",this.level===c.WARNING),d(t,"warning-icon",this.level===c.WARNING),t},circle:function(){return this.level===c.ERROR?u.a.filled:u.a.outline}},components:{vfExclamationMarkIcon:l.a}},b=(n(730),n(45)),m=Object(b.a)(p,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"user-status"},[e("span",{staticClass:"user-status__icon-wrapper"},[e("vf-exclamation-mark-icon",{staticClass:"vf-icon-medium",class:this.classes,attrs:{circle:this.circle}})],1),this._v(" "),e("div",{staticClass:"user-status__content"},[this._t("default")],2)])}),[],!1,null,"7c3e692f",null).exports,v=n(105);function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g,y=(_(h={},v.REJECTED,"moderation.username_rejected"),_(h,v.PENDING_NEW,"moderation.username_pending_new"),_(h,v.PENDING_UPDATE,"moderation.username_pending_update"),h),O={props:{status:{type:String,required:!0,validator:function(t){return Object.values(v).includes(t)}}},beforeCreate:function(){this.I18N_KEYS=y},computed:{level:function(){switch(this.status){case v.REJECTED:return c.ERROR;case v.PENDING_NEW:case v.PENDING_UPDATE:default:return c.WARNING}}},components:{userStatus:m}},E=Object(b.a)(O,(function(){var t=this.$createElement,e=this._self._c||t;return e("user-status",{attrs:{level:this.level}},[e("span",{staticClass:"vf-label vf-label-upper"},[this._v(this._s(this.$i18n(this.I18N_KEYS[this.status])))])])}),[],!1,null,null,null).exports;function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=(C(g={},v.REJECTED,"moderation.avatar_rejected"),C(g,v.PENDING_NEW,"moderation.avatar_pending_new"),C(g,v.PENDING_UPDATE,"moderation.avatar_pending_update"),g),S={props:{status:{type:String,required:!0,validator:function(t){return Object.values(v).includes(t)}}},beforeCreate:function(){this.I18N_KEYS=T},computed:{level:function(){switch(this.status){case v.REJECTED:return c.ERROR;case v.PENDING_NEW:case v.PENDING_UPDATE:default:return c.WARNING}}},components:{userStatus:m}},j=Object(b.a)(S,(function(){var t=this.$createElement,e=this._self._c||t;return e("user-status",{attrs:{level:this.level}},[e("span",{staticClass:"vf-label vf-label-upper"},[this._v(this._s(this.$i18n(this.I18N_KEYS[this.status])))])])}),[],!1,null,null,null).exports,A=(n(87),n(493)),w=n(574);function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){N(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function N(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I,U={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},D={props:{message:{type:String,required:!0},dateExpired:{type:Number,required:!0},isPermanent:{type:Boolean,required:!0}},beforeCreate:function(){this.ERROR_LEVEL=c.ERROR,this.BUTTON_SIZE=A.b.INLINE,this.BUTTON_PALETTE=A.a.ACCENT},computed:R(R({},Object(r.c)({dateFormat:i.wb})),{},{formattedDate:function(){return this.dateFormat(this.dateExpired,U)},banMessage:function(){return this.$i18n("error.banned_from_posting",{permanent:this.isPermanent?1:0,endDate:this.dateExpired,reason:void 0})}}),components:{userStatus:m,textTip:w.a}},L=(n(731),Object(b.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("user-status",{staticClass:"vf-posting-ban-error vf-label vf-label-upper",attrs:{level:t.ERROR_LEVEL,"aria-live":"polite"}},[t.isPermanent?[t._v("\n        "+t._s(t.banMessage)+"\n    ")]:[n("time",{attrs:{datetime:new Date(t.dateExpired).toISOString()}},[t._v(t._s(t.banMessage))])],t._v(" "),t.message.trim().length>0?[t._v("\n        \n        "),n("text-tip",{staticClass:"vf-posting-ban-error__tooltip",attrs:{positions:["bottom-left"],"is-link":"",content:t.message,palette:t.BUTTON_PALETTE,size:t.BUTTON_SIZE},scopedSlots:t._u([{key:"trigger",fn:function(){return[t._v("\n                "+t._s(t.$i18n("error.why_banned"))+"\n            ")]},proxy:!0}],null,!1,2972872782)})]:t._e()],2)}),[],!1,null,"8226ade0",null).exports);function $(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var x=($(I={},v.REJECTED,"moderation.email_rejected"),$(I,v.PENDING_NEW,"moderation.email_pending_new"),$(I,v.PENDING_UPDATE,"moderation.email_pending_update"),I),k={props:{status:{type:String,required:!0,validator:function(t){return Object.values(v).includes(t)}}},beforeCreate:function(){this.I18N_KEYS=x},computed:{level:function(){switch(this.status){case v.REJECTED:return c.ERROR;case v.PENDING_NEW:case v.PENDING_UPDATE:default:return c.WARNING}}},components:{userStatus:m}},B=Object(b.a)(k,(function(){var t=this.$createElement,e=this._self._c||t;return e("user-status",{attrs:{level:this.level}},[e("span",{staticClass:"vf-label vf-label-upper"},[this._v(this._s(this.$i18n(this.I18N_KEYS[this.status])))])])}),[],!1,null,null,null).exports;function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){H(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function H(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var q={computed:F(F({},Object(r.c)({currentUser:i.ib,settings:i.Hc,currentBan:i.p})),{},{usernameNotApproved:function(){return Object(a.d)(this.currentUser,this.settings)},avatarNotApproved:function(){return Object(a.a)(this.currentUser,this.settings)},isPostingBanned:function(){return this.currentBan&&this.currentBan.ban_level===o.a.POSTING},mustVerifyEmail:function(){return Object(a.b)(this.currentUser,this.settings)}}),components:{emailVerificationError:B,usernameWarning:E,avatarWarning:j,postingBanError:L}},G=Object(b.a)(q,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isPostingBanned?n("posting-ban-error",{staticClass:"user-moderation-status",attrs:{"aria-live":"polite",message:t.currentBan.user_message,"date-expired":t.currentBan.date_expired,"is-permanent":t.currentBan.is_permanent}}):t.mustVerifyEmail?n("email-verification-error",{staticClass:"user-moderation-status",attrs:{status:t.currentUser.email_verification_status}}):t.usernameNotApproved?n("username-warning",{staticClass:"user-moderation-status",attrs:{status:t.currentUser.username_moderation_status}}):t.avatarNotApproved?n("avatar-warning",{staticClass:"user-moderation-status",attrs:{status:t.currentUser.avatar_moderation_status}}):t._e()}),[],!1,null,null,null).exports,V={beforeCreate:function(){this.ERROR_LEVEL=c.ERROR},components:{userStatus:m}},z=Object(b.a)(V,(function(){var t=this.$createElement;return(this._self._c||t)("user-status",{staticClass:"vf-offline-posting-error vf-label vf-label-upper",attrs:{level:this.ERROR_LEVEL,"aria-live":"polite"}},[this._v("\n    "+this._s(this.$i18n("conversations.posts.offline"))+"\n")])}),[],!1,null,null,null).exports,W=n(512),Y=n(133),K=n(487),J=n(500),Z=n(201),X=n(23),Q={data:function(){return{buttonStatus:Z.a.NONE}},props:{status:X.a.oneOf(Object.values(W)).def(W.EDITABLE),isEnabled:X.a.bool.def(!1)},computed:{isSubmitting:function(){return this.status===W.SUBMITTING},showCancelButton:function(){return!Y.e}},methods:{setButtonStatus:function(t){var e=this,n=this.getButtonStatus(t);clearTimeout(this.errorTid),this.buttonStatus=n,t!==Z.a.ERROR&&t!==Z.a.SUCCESS||(this.errorTid=setTimeout((function(){e.buttonStatus=Z.a.NONE}),4e3))},getButtonStatus:function(t){switch(t){case W.ERROR:return Z.a.ERROR;case W.SUBMITTING:return Z.a.PENDING;case W.STATIC:return Z.a.SUCCESS;case W.EDITABLE:default:return Z.a.NONE}}},components:{loaderButton:J.a,vfButton:K.a},watch:{status:function(){this.setButtonStatus(this.status)}}},tt=(n(732),Object(b.a)(Q,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-content-editor-actions"},[t.showCancelButton?n("vf-button",{staticClass:"vf-content-editor-actions__cancel vf-label vf-label-upper",attrs:{role:"button","aria-label":t.$i18n("conversations.rich_text.cancel"),palette:"accent","is-link":""},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("cancel")}}},[t._v("\n        "+t._s(t.$i18n("conversations.rich_text.cancel"))+"\n    ")]):t._e(),t._v(" "),n("loader-button",{staticClass:"vf-content-editor-actions__submit vf-label vf-label-upper",attrs:{role:"button","aria-label":t.$i18n("conversations.rich_text.post"),"is-cta":"",palette:"accent",size:"medium",status:t.buttonStatus,disabled:!t.isEnabled||t.isSubmitting},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("submit",e.target)}}},[t._v("\n        "+t._s(t.$i18n("conversations.rich_text.post"))+"\n    ")])],1)}),[],!1,null,"0a6db536",null).exports);function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach((function(e){it(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function it(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var rt={props:{showUserStatus:X.a.bool.def(!1),isFocused:X.a.bool.def(!1),editorStatus:X.a.string,hasContentUpdated:X.a.bool.def(!1),isSubmitEnabled:X.a.bool,hasEditableContents:X.a.bool.def(!1)},computed:nt(nt({},Object(r.c)({currentBan:i.p,isOffline:i.Wb})),{},{isBanned:function(){return this.currentBan.ban_level!==o.a.NONE},areActionsVisible:function(){return this.isFocused||this.hasEditableContents}}),components:{heightTransition:s.a,contentEditorActions:tt,offlineError:z,userModerationStatus:G}},ot=(n(733),Object(b.a)(rt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-focus-container__footer"},[n("height-transition",[t.isOffline&&t.isFocused?n("offline-error",{staticClass:"vf-user-moderation-status"}):t._e()],1),t._v(" "),n("height-transition",[t.showUserStatus&&!t.isOffline?n("user-moderation-status",{staticClass:"vf-user-moderation-status"}):t._e()],1),t._v(" "),n("height-transition",[t.areActionsVisible?n("content-editor-actions",{staticClass:"vf-content-focus-container__editor-actions",attrs:{status:t.editorStatus,"is-enabled":t.hasContentUpdated&&t.isSubmitEnabled&&!t.isBanned&&!t.isOffline},on:{submit:function(e){return t.$emit("submit",e)},cancel:function(e){return t.$emit("cancel-edit")}},nativeOn:{focusin:function(e){return t.$emit("actions-focused",e)}}}):t._e()],1)],1)}),[],!1,null,"9d79afae",null));e.a=ot.exports},657:function(t,e,n){"use strict";n(46),n(11),n(22),n(41),n(17),n(8),n(7),n(4),n(80);var i=n(0),r=n(512),o=n(76),s=n(118),a=n(50),c=n(52),u=n(1087),l=n(1090),d=n(905),h=n(906),f=n(717),p=n(907),b=n(716),m=n(908),v=n(909),_=n(910),g=n(911),y=(n(30),n(327),n(200),n(54),n(26)),O={props:["src"],components:{vfImage:n(549).b}},E=n(45),C=Object(E.a)(O,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vf-uploaded-image"},[this.src?e("vf-image",{attrs:{src:this.src,"has-overlay":!0}},[this._t("default")],2):this._e()],1)}),[],!1,null,null,null).exports,T={props:["uuid"],computed:{src:function(){var t=this.$store.getters[i.G](this.uuid);return t?t.url:null}},components:{vfPostImageWrapper:C}},S=Object(E.a)(T,(function(){var t=this.$createElement;return(this._self._c||t)("vf-post-image-wrapper",{attrs:{src:this.src}})}),[],!1,null,null,null).exports,j=n(718),A=n(496),w=n(486);function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){N(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function N(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I={props:["uuid"],computed:R(R({},Object(s.c)({getUpload:i.lc})),{},{upload:function(){return this.getUpload(this.uuid)},src:function(){return this.upload.versions[0]&&this.upload.versions[0].url},isUploading:function(){return"completed"!==this.upload.status&&!this.hasUploadError},hasUploadError:function(){return Boolean(this.upload&&this.upload.error)},uploadProgress:function(){return this.upload&&this.upload.progress},classes:function(){return{"vf-is-uploading":this.isUploading,"vf-has-upload-error":this.hasUploadError}},exclamationProps:function(){return{circle:w.a.outline}}}),components:{vfPostImageWrapper:C,vfProgressBar:j.a,vfExclamationMarkIcon:A.a}},U=Object(E.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-post-image-wrapper",{class:t.classes,attrs:{src:t.src}},[t.isUploading?n("vf-progress-bar",{staticClass:"vf-centered",attrs:{progress:t.uploadProgress}}):t._e(),t._v(" "),t.hasUploadError?n("vf-exclamation-mark-icon",t._b({staticClass:"vf-centered vf-icon-medium"},"vf-exclamation-mark-icon",t.exclamationProps,!1)):t._e()],1)}),[],!1,null,null,null).exports;function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){$(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var x={props:["uploadUuid","mediaUuid"],computed:L(L({},Object(s.c)({getUpload:i.lc})),{},{internalMediaUuid:function(){return this.mediaUuid||this.upload&&this.upload.media_uuid},internalUploadUuid:function(){return this.internalMediaUuid?"":this.uploadUuid},upload:function(){return this.getUpload(this.uploadUuid)},componentIs:function(){return this.mediaUuid?S:this.uploadUuid?U:""},componentUuid:function(){return this.mediaUuid?this.mediaUuid:this.uploadUuid?this.uploadUuid:""}})},k=(n(719),Object(E.a)(x,(function(){var t=this.$createElement;return(this._self._c||t)(this.componentIs,{tag:"component",attrs:{contenteditable:"false",uuid:this.componentUuid,"data-media-uuid":this.internalMediaUuid,"data-upload-uuid":this.internalUploadUuid}})}),[],!1,null,null,null).exports),B=n(5),M=n(509);function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function G(){return(G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=V(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function V(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=K(t)););return t}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=K(t);if(e){var r=K(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Y(this,n)}}function Y(t,e){if(e&&("object"===F(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function K(t){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var J=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z(t,e)}(o,t);var e,n,i,r=W(o);function o(){return H(this,o),r.apply(this,arguments)}return e=o,i=[{key:"create",value:function(t){var e={el:G(K(o),"create",this).call(this),store:B.vuexStore.getInstance(),propsData:t},n=Object.assign(e,k);return new y.default(n).$el}},{key:"value",value:function(t){var e=t.dataset.mediaUuid;return{uploadUuid:t.dataset.uploadUuid,mediaUuid:e}}}],(n=[{key:"length",value:function(){return 1}}])&&q(e.prototype,n),i&&q(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(M.a);J.blotName="image-upload",J.tagName="vf-post-image-upload";n(16),n(25);var Z=n(182),X=function(){var t=this,e=function(){var t=document.createElement("input");return t.setAttribute("type","file"),t.setAttribute("accept",'"image/*"'),t.setAttribute("multiple",!0),t.setAttribute("class","vf-image-upload__input"),t}();document.body.appendChild(e),e.click();var n=this.quill.getSelection(),i=n&&n.index||0;e.addEventListener("change",(function(){Array.from(e.files).forEach((function(e){return function(t,e,n){var i=Object(Z.a)();e.emitter.emit("image-embed",{uploadUuid:i,file:t}),e.insertEmbed(n,"image-upload",{uploadUuid:i})}(e,t.quill,i)})),document.body.removeChild(e)}))};n(203);function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function et(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function nt(){return(nt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=it(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function it(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=at(t)););return t}function rt(t,e){return(rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=at(t);if(e){var r=at(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return st(this,n)}}function st(t,e){if(e&&("object"===Q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function at(t){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rt(t,e)}(o,t);var e,n,i,r=ot(o);function o(){return tt(this,o),r.apply(this,arguments)}return e=o,i=[{key:"create",value:function(t){var e=nt(at(o),"create",this).call(this),n=this.makeAnchor(t.link);return e.appendChild(n),e.dataset.link=t.link,e}},{key:"value",value:function(t){return t.dataset}},{key:"makeAnchor",value:function(t){var e=document.createElement("a");return e.setAttribute("href",t),e.setAttribute("class","embedly-card"),e}}],(n=[{key:"length",value:function(){return 1}}])&&et(e.prototype,n),i&&et(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(M.a);ct.blotName="embedly",ct.tagName="div";n(29),n(24),n(31),n(134);var ut=n(588),lt=n(720);function dt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);s=!0);}catch(t){a=!0,r=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}(t,e)||ft(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(t){return function(t){if(Array.isArray(t))return pt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ft(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(t,e){if(t){if("string"==typeof t)return pt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pt(t,e):void 0}}function pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var bt=function(t){return t.match(ut.a)},mt=function(t,e){var n=Object.assign({},e);if("string"!=typeof t.data)return n;var i=bt(t.data);if(i&&i.length>0){var r=function(t,e){var n=[],i=0;return t.forEach((function(t){var r=e.indexOf(t,i),o=e.substring(i,r);n.push({insert:o}),n.push({insert:t,attributes:{link:t}}),i=r+t.length})),i!==e.length&&n.push({insert:e.substring(i)}),n.push({insert:"\n"}),t.forEach((function(t){n.push({insert:{embedly:{link:t}}})})),n.push({insert:""}),n}(i,t.data);n.ops=r}return n},vt=function(t){return"block"===t.constructor.blotName&&t.children.length<=1&&"break"===t.children.head.constructor.blotName},_t=function(t){return"embedly"===t.constructor.blotName},gt=function(t){return{blot:t,link:t.domNode.dataset.link}},yt=function(t,e,n){var i=t.getLine(e)[0];if(!i.next)return[t.getLength(),!0];var r=function(t){return ht(t.domNode.childNodes).filter((function(t){return"A"===t.nodeName})).map((function(t){return t.getAttribute("href")}))}(i),o=function(t){for(var e=[],n=t.next;n;){var i=_t(n);if(!vt(n)&&!i)break;i&&e.push(gt(n)),n=n.next}return e}(i);if(!o.length)return[t.getIndex(i.next),!0];if(o.filter((function(t){return t.link===n})).length)return[null,null];for(var s=r.indexOf(n),a=0,c=r.filter((function(t){return t!==n})),u=Math.min(o.length,s),l=0;l<u;l++)o[l].link!==c[l+a]&&(a+=1);var d=a+1<=s,h=d?s-1-a:0,f=d?1:0,p=!!d&&h===o.length-1;return[t.getIndex(o[h].blot)+f,p]},Ot=function(t,e){var n=bt(e.prefix.trim());if(n&&n.length){var i=n[0];Et(this.quill,i,t.index)}return!0},Et=function(t,e,n){var i=e;Object(lt.b)(i)||(i=Object(lt.a)(i));var r=n-e.length;t.formatText(r,e.length,"link",i);var o=dt(yt(t,n,i),2),s=o[0],a=o[1];null!==s&&(t.insertEmbed(s,"embedly",{link:i}),a&&t.insertText(s+1,""))},Ct=n(684),Tt=[["link"],["bold","italic"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],["clean"]];u.a.register({"modules/toolbar":d.a,"modules/toolbarBottom":d.a,"themes/bubble":l.a,"formats/image":h.a,"formats/bold":f.a,"formats/italic":p.a,"formats/header":m.a,"formats/link":b.a,"formats/list":v.b,"formats/list/item":v.a,"formats/indent":_.a,"formats/blockquote":g.a}),u.a.register(J),u.a.register(ct);var St=Object(c.b)((function(){var t=document.createDocumentFragment(),e=document.createElement("div");t.appendChild(e);var n=jt(e);return{toHTML:function(t){return n.setContents(t),n.root.cloneNode(!0).innerHTML}}})),jt=function(t,e,n){if(n){var i=n;n=function(t,e){return{placeholder:t,theme:"bubble",modules:{toolbar:{container:Tt},toolbarBottom:(n=e,{containerClass:"ql-toolbar-bottom",container:n,handlers:{image:X}}),clipboard:{matchers:[[Node.TEXT_NODE,mt]]},keyboard:{bindings:{tab:{key:Ct.KEY_TAB,handler:function(){return!0}},spaceBuildLink:At(Ct.KEY_SPACE),returnBuildLink:At(Ct.KEY_RETURN)}}}};var n}(i.placeholder,i.bottomToolbar)}var r=new u.a(t,n);return r.setContents(e),r},At=function(t){return{key:t,collapsed:!0,shiftKey:null,prefix:ut.b,handler:Ot}},wt=n(722),Pt=n(142),Rt=n(863),Nt=n(23),It={props:{content:Nt.a.string.isRequired}},Ut=(n(723),Object(E.a)(It,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._t("start"),this._v(" "),e("div",{staticClass:"vf-content-html__content",domProps:{innerHTML:this._s(this.content)}}),this._v(" "),this._t("end")],2)}),[],!1,null,"499c5c90",null).exports),Dt={functional:!0,props:{isHtml:Nt.a.bool.isRequired,content:Nt.a.string.isRequired},render:function(t,e){var n=e.props,i=e.slots;return t(n.isHtml?Ut:Rt.a,{props:n.isHtml?{content:n.content}:{text:n.content},scopedSlots:{start:function(){return i().start},end:function(){return i().end}}})}},Lt=Object(E.a)(Dt,void 0,void 0,!1,null,null,null).exports,$t=n(3),xt=n(666),kt={props:{content:Nt.a.object.def((function(){})),contentContainerUuid:Nt.a.uuid.isRequired,placeholder:Nt.a.string,showMediaIcon:Nt.a.bool.def(!1),isDisabled:Nt.a.bool.def(!1)},data:function(){return{editor:null}},mounted:function(){this.setEditor()},methods:{setEditor:function(){this.editor||(this.editor=jt(Object(a.a)(".js-vf-editor-mount",this.$el),this.content,{placeholder:this.placeholder,bottomToolbar:Object(a.a)(".vf-js-custom-ql-toolbar",this.$el)}),this.editor.on("image-embed",this.onImageUpload.bind(this)),this.editor.on("text-change",this.editorChange.bind(this)),this.isDisabled&&this.editor.enable(!1))},editorChange:function(){var t=!Object(a.a)(".ql-blank",this.$el),e=JSON.stringify(this.editor.getContents());this.$emit("on-change",{hasContents:t,contents:e})},onImageUpload:function(t){var e=t.uploadUuid,n=t.file,i={uuid:e,content_container_uuid:this.contentContainerUuid,file:n};this.$store.dispatch($t.Bd,i)},focusEditor:function(){this.editor.focus()},resetEditor:function(){this.editor.setContents(this.content)}},watch:{content:function(){this.editor&&this.resetEditor()},placeholder:function(){this.editor&&(this.editor.root.dataset.placeholder=this.placeholder)},isDisabled:function(){this.editor.enable(!this.isDisabled)}},components:{attachImageButton:xt.a}},Bt=(n(725),Object(E.a)(kt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-quill-editor"},[n("div",{staticClass:"js-vf-editor-mount vf-content-editor-input vf-content",on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.$emit("request-submit"):null}}}),t._v(" "),n("div",{staticClass:"ql-toolbar vf-bottom-toolbar vf-js-custom-ql-toolbar"},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.showMediaIcon,expression:"showMediaIcon"}],staticClass:"ql-formats"},[n("attach-image-button",{staticClass:"ql-image",attrs:{tag:"button"}})],1)])])}),[],!1,null,null,null).exports),Mt=n(663);function Ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ft(Object(n),!0).forEach((function(e){qt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Gt={props:{preloadedContent:Nt.a.string,contentUuid:Nt.a.uuid,contentContainerUuid:Nt.a.uuid,status:Nt.a.oneOf(Object.values(r)).def(r.EDITABLE),placeholder:Nt.a.string,isRichTextEnabled:Nt.a.bool.isRequired,isFocused:Nt.a.bool.def(!1),characterLimit:Nt.a.number.def(1/0),isDisabled:Nt.a.bool.def(!1)},beforeCreate:function(){this.CHARACTER_COUNT_VISIBILITY_THRESHOLD=50,this.isAndroid=Object(Pt.c)(window)===Pt.a},data:function(){return{contents:null,hasContents:!1}},mounted:function(){!this.isRichTextEnabled&&this.isAndroid&&window.addEventListener("resize",this.handleResize),this.contents=this.preloadedContent},beforeDestroy:function(){!this.isRichTextEnabled&&this.isAndroid&&window.removeEventListener("resize",this.handleResize)},computed:Ht(Ht({},Object(s.c)({contentByUuid:i.S})),{},{isStatic:function(){return this.status===r.STATIC},staticRichTextContent:function(){return St.getInstance().toHTML(this.content)},showMediaIcon:function(){return this.isFocused||this.hasContents},contentLength:function(){return this.contents&&this.contents.length},isOverCharLimit:function(){return!this.isRichTextEnabled&&this.remainingCharacterCount<0},remainingCharacterCount:function(){return this.characterLimit-this.contentLength},hasCharacterLimit:function(){return this.characterLimit!==1/0},content:function(){var t=this.isRichTextEnabled?{}:"",e=this.contentUuid?this.contentByUuid(this.contentUuid).content:t;return this.isRichTextEnabled&&this.contentUuid&&(e=JSON.parse(e)),e},staticContent:function(){return this.isRichTextEnabled?this.staticRichTextContent:this.content}}),methods:{getAttachments:function(t){return this.isRichTextEnabled&&""!==t?JSON.parse(t).ops.map((function(t){return Object(o.b)(["insert","image-upload","mediaUuid"],t)})).filter(Boolean):[]},requestSubmit:function(){this.hasContents&&this.$emit("request-submit")},onRichTextChange:function(t){var e=t.hasContents,n=t.contents;this.hasContents=e;var i={content:n,media_uuids:this.getAttachments(n)};this.$emit("content-update",this.hasContents,i)},onNonRichTextChange:function(){this.hasContents=this.contentLength>0,this.isOverCharLimit&&this.$refs.characterCount.pulse(),this.$emit("content-update",this.hasContents,this.contents),this.$emit("is-over-char-limit",this.isOverCharLimit)},handleResize:function(){this.isFocused&&"TEXTAREA"===document.activeElement.tagName&&setTimeout((function(){document.activeElement.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}),0)},focusOnInput:function(){this.isRichTextEnabled?this.$refs.quillEditor.focusEditor():this.$refs.textarea.focus()},resetContents:function(){this.isRichTextEnabled?this.$refs.quillEditor&&this.$refs.quillEditor.resetEditor():this.contents=this.content}},watch:{isFocused:function(){this.isRichTextEnabled||this.isFocused||this.contents.length||wt.a.clear(Object(a.a)("textarea",this.$el))},hasContents:function(){wt.a.update(this.$refs.textarea)},status:{handler:function(t,e){t===r.EDITABLE&&e!==r.ERROR&&this.resetContents()},immediate:!0}},components:{characterCount:Mt.a,quillEditor:Bt,staticContent:Lt},directives:{autoresize:wt.a}},Vt=(n(727),Object(E.a)(Gt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isStatic?n("static-content",{attrs:{"is-html":t.isRichTextEnabled,content:t.staticContent},scopedSlots:t._u([{key:"start",fn:function(){return[t._t("content-start")]},proxy:!0},{key:"end",fn:function(){return[t._t("content-end")]},proxy:!0}],null,!0)}):n("div",{staticClass:"vf-content-editor-form"},[n("div",{staticClass:"vf-editor-area",class:{"vf-editor-area--with-limit":t.hasCharacterLimit}},[t.isRichTextEnabled?n("quill-editor",{ref:"quillEditor",attrs:{content:t.content,placeholder:t.placeholder,"content-container-uuid":t.contentContainerUuid,"show-media-icon":t.showMediaIcon,"is-disabled":t.isDisabled},on:{"on-change":t.onRichTextChange,"request-submit":t.requestSubmit}}):n("textarea",{directives:[{name:"autoresize",rawName:"v-autoresize"},{name:"model",rawName:"v-model",value:t.contents,expression:"contents"}],ref:"textarea",staticClass:"vf-content-editor-input vf-content vf-content-editor-form__textarea",class:{"vf-content-editor-form__textarea--empty":0===t.contentLength},attrs:{"aria-label":t.placeholder,placeholder:t.placeholder,disabled:t.isDisabled},domProps:{value:t.contents},on:{input:[function(e){e.target.composing||(t.contents=e.target.value)},t.onNonRichTextChange],keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.requestSubmit(e):null}}}),t._v(" "),n("character-count",{ref:"characterCount",staticClass:"vf-content-editor-form__character-count",attrs:{"a11y-warning":"conversations.rich_text.character_limit.warning","a11y-error":"conversations.rich_text.character_limit.error","visible-threshold":t.CHARACTER_COUNT_VISIBILITY_THRESHOLD,count:t.remainingCharacterCount}})],1)])}),[],!1,null,null,null));e.a=Vt.exports},658:function(t,e,n){"use strict";n(46),n(11),n(8),n(7),n(4),n(22),n(17),n(41);var i,r=n(3),o=n(0),s=n(2),a=n(230),c=n(298),u=n(381),l=n(70),d=n(118),h=n(115),f=n(672),p=n(575),b=n(673),m={props:{isTyping:Boolean},components:{contentLayout:p.a,typingIndicator:b.a}},v=(n(745),n(45)),_=Object(v.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reply-typing-indicator",class:{"reply-typing-indicator--visible":t.isTyping}},[n("content-layout",{staticClass:"reply-typing-indicator__internal",scopedSlots:t._u([{key:"left",fn:function(){return[n("div",{staticClass:"reply-typing-indicator__indicator"},[n("typing-indicator",{attrs:{"is-typing":t.isTyping}})],1)]},proxy:!0}])})],1)}),[],!1,null,"39f737e6",null).exports,g=(n(80),n(39),n(42),n(87),n(493)),y=n(559),O=n(558),E={props:{isTyping:Boolean,count:{type:Number,default:0,required:!1},palette:String},computed:{a11yLabel:function(){return""},hasRealtime:function(){return this.palette===g.a.ACCENT},hasMentions:function(){return this.palette===g.a.MENTION}},components:{contentBadge:O.a}},C=(n(746),Object(v.a)(E,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"grow"}},[e("content-badge",{attrs:{"is-typing":this.isTyping,"has-realtime":this.hasRealtime,"has-mentions":this.hasMentions,count:this.count,"a11y-label":this.a11yLabel}})],1)}),[],!1,null,"216129e6",null).exports),T=n(543);function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var j=[g.a.ACCENT,g.a.MENTION,g.a.LIGHT_PRIMARY],A=(S(i={},g.a.ACCENT,"vf-threaded-content-indicator--accent"),S(i,g.a.MENTION,"vf-threaded-content-indicator--mention"),S(i,g.a.LIGHT_PRIMARY,"vf-threaded-content-indicator--light-primary"),i),w={props:{buttonText:String,iconText:String,count:Number,palette:{type:String,validator:function(t){return j.includes(t)},default:g.a.LIGHT_PRIMARY},threadPalette:String,locationInThread:{type:String,validator:function(t){return Object.values(c.c).includes(t)},default:c.c.MIDDLE},isTyping:Boolean,isLoading:{type:Boolean,default:!1}},computed:{paletteClass:function(){return A[this.palette]}},methods:{showContent:function(){this.$emit("show-content")}},components:{threadedLayout:y.a,contentIndicator:C,spinningLoader:T.a}},P=(n(747),Object(v.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"vf-threaded-content-indicator vf-no-outline",class:t.paletteClass,attrs:{palette:t.palette},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.showContent(e)}}},[n("threaded-layout",{staticClass:"vf-threaded-content-indicator__layout",attrs:{"location-in-thread":t.locationInThread,palette:t.threadPalette},scopedSlots:t._u([{key:"left",fn:function(){return[n("content-indicator",{staticClass:"vf-threaded-content-indicator__icon",attrs:{count:t.count,"is-typing":t.isTyping,palette:t.palette}}),t._v(" "),n("span",{staticClass:"vf-offscreen-text"},[t._v("\n                "+t._s(t.iconText)+"\n            ")])]},proxy:!0},{key:"right",fn:function(){return[n("span",{staticClass:"vf-label vf-label-upper",class:{"vf-threaded-content-indicator__text--hidden":t.isLoading},attrs:{"aria-hidden":t.isLoading}},[t._v("\n                "+t._s(t.buttonText)+"\n            ")]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("span",{staticClass:"vf-threaded-content-indicator__loader-wrapper"},[n("spinning-loader")],1):t._e()])]},proxy:!0}])})],1)}),[],!1,null,"45736df8",null).exports),R=n(1100),N=n(23);function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var L={props:{threadUuid:N.a.uuid.isRequired,subthreads:N.a.array.isRequired,threadPalette:N.a.string.isRequired,contentContainerUuid:N.a.uuid.isRequired,limit:N.a.number.isRequired,fetchRepliesAction:N.a.string.isRequired,fetchSelectedAction:N.a.string.isRequired,oldReplyCount:N.a.number,oldMentionsInThread:N.a.array,realtimeCount:N.a.number,isReadyForContent:N.a.bool,storeAction:N.a.string.isRequired,isFocused:N.a.bool.def(!1),maximumContentLength:N.a.number.def(1/0),isExpanded:N.a.bool,headerHeightPx:N.a.number,isFetchingContent:N.a.bool.def(!1),hasBorder:N.a.bool},data:function(){return{isFetchingOldContent:!1}},inject:[a.a,a.e],mounted:function(){var t=this;Object(h.d)().then((function(){t.observer=Object(h.a)(t.$refs.intersector,t.intersectionHandler)}))},beforeDestroy:function(){this.observer&&this.observer.unobserve(this.$refs.intersector)},computed:U(U(U({},Object(d.d)({threadByUuid:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(o.Sc)]},hasUnreadRepliesInThread:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(o.Hb)]},hasUnreadMentionsInThread:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(o.Fb)]},hasUnreadRepliesInSubthread:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(o.Gb)]},hasUnreadMentionsInSubthread:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(o.Eb)]},selectedContentInThread:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(o.Ac)]}})),Object(d.c)({interactions:o.Lb,contentByUuid:o.S,isUserMutedByCurrentUser:o.kd,activeReplyThreadByContainerUuid:o.a,isExpired:o.Db,isActiveReplyThread:o.Mb})),{},{oldMentionCount:function(){return this.oldMentionsInThread.length},isReplyFormVisible:function(){return this.hasReplies&&!this.isUserMutedByCurrentUser(this.head.actor_uuid)&&this.head.state===l.c.VISIBLE&&!this.isExpired(this.contentContainerUuid)},thread:function(){return this.threadByUuid(this.threadUuid)},hasUnreadMentions:function(){return this.head.content_container_uuid===this.thread.thread_top_uuid?this.hasUnreadMentionsInThread(this.threadUuid):this.hasUnreadMentionsInSubthread({thread_uuid:this.thread.thread_top_uuid,subthread_uuid:this.threadUuid})},hasUnreadReplies:function(){return this.head.content_container_uuid===this.thread.thread_top_uuid?this.hasUnreadRepliesInThread(this.threadUuid):this.hasUnreadRepliesInSubthread({thread_uuid:this.thread.thread_top_uuid,subthread_uuid:this.threadUuid})},head:function(){return this.contentByUuid(this.threadUuid)},hasReplies:function(){return this.head.total_replies>0},parentLocationInThread:function(){return this.isExpanded?this.hasReplies?c.c.FIRST:this.isTypingInThread?c.c.ONLY_TYPING:c.c.ONLY:c.c.ONLY},isTypingInThread:function(){var t=this;return this.interactions(this.threadUuid).isTyping||this.subthreads.some((function(e){return t.interactions(e).isTyping}))},contentIndicatorText:function(){var t,e,n=this.realtimeCount;return this.hasUnreadMentions&&this.hasUnreadReplies?(t=this.$i18n("conversations.threads.content_indicator.reply_and_mention.label"),e=this.$i18n("conversations.threads.content_indicator.reply_and_mention.count",{count:n})):this.hasUnreadMentions?(t=this.$i18n("conversations.threads.content_indicator.mention.label",{count:n}),e=this.$i18n("conversations.threads.content_indicator.mention.count",{count:n})):(t=this.$i18n("conversations.threads.content_indicator.reply.label",{count:n}),e=this.$i18n("conversations.threads.content_indicator.reply.count",{count:n})),{buttonText:t,iconText:e}},activeReplyThread:function(){return this.activeReplyThreadByContainerUuid(this.head.content_container_uuid)},selectedThreadContent:function(){return this.selectedContentInThread(this.threadUuid)},hasSelectedThreadContent:function(){return this.selectedThreadContent.length>0},oldContentPalette:function(){return this.oldMentionCount>0?this.threadPalette:this.PALETTES.LIGHT_PRIMARY},oldCountWithSelectedContent:function(){var t=this.head.total_replies,e=this.thread,n=e.thread_uuid,i=e.thread_top_uuid;return n!==i&&i!==this.head.content_container_uuid&&(t=this.threadByUuid(i).total_content),t-this.selectedThreadContent.length},oldContentCount:function(){return this.oldMentionCount>0?this.oldMentionCount:this.hasSelectedThreadContent?this.oldCountWithSelectedContent:this.oldReplyCount},oldContentIndicatorText:function(){var t,e,n=this.oldContentCount;return this.oldMentionCount>0?(t=this.$i18n("conversations.threads.old_content_indicator.mention.label"),e=this.$i18n("conversations.threads.old_content_indicator.mention.count",{count:n})):this.hasSelectedThreadContent?(t=this.$i18n("conversations.threads.old_content_indicator.thread.label"),e=this.$i18n("conversations.threads.old_content_indicator.thread.count",{count:n})):(t=this.$i18n("conversations.threads.old_content_indicator.reply.label"),e=this.$i18n("conversations.threads.old_content_indicator.reply.count",{count:n})),{buttonText:t,iconText:e}},realtimeLocationInThread:function(){return this.isReplyFormVisible?c.c.MIDDLE:c.c.LAST}}),methods:U(U({},Object(d.b)({addActiveReplyThread:r.a})),{},{isLastReply:function(t){return t+1===this.subthreads.length},getChildLocationInThread:function(t){return!this.isReplyFormVisible&&this.isLastReply(t)&&0===this.realtimeCount?c.c.LAST:c.c.MIDDLE},intersectionHandler:function(t){this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(s.dd),{thread_uuid:this.threadUuid,is_in_view:t[0].isIntersecting})},removeFocus:function(){this.$refs.replyForm.removeFocus()},fetchOldContent:function(){var t=this;if(this.oldMentionCount>0)return this.fetchOldMentions();var e=this.thread,n=e.selected_content,i=e.thread_uuid,r=e.thread_top_uuid,o=e.page_from;if(n.length>0&&i!==r&&r!==this.contentContainerUuid){this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(s.L),this.threadUuid);var a=this.$el.parentElement.parentElement.offsetTop-this.headerHeightPx;return this.addActiveReplyThread({thread_uuid:r,offset_top:a,mode:u.REPLY_THREAD_MODES.REPLIES})}return n.length>0&&this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(s.L),this.threadUuid),this.isFetchingOldContent=!0,this.$store.dispatch(this.fetchRepliesAction,{content_uuid:this.threadUuid,limit:this.limit,starting_from:o,THREAD_NAMESPACE:this.THREAD_NAMESPACE}).then((function(){t.isFetchingOldContent=!1,t.isActiveReplyThread(t.contentContainerUuid)&&t.$store.commit(s.bd,{uuid:t.contentContainerUuid,mode:u.REPLY_THREAD_MODES.REPLIES})}))},fetchOldMentions:function(){var t=this,e=this.oldMentionsInThread[0].target_uuid,n=this.oldMentionsInThread.filter((function(t){return t.target_uuid===e})).map((function(t){return t.content_uuid}));return this.thread.selected_content.length>0&&this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(s.L),this.threadUuid),this.$store.dispatch("".concat(this.THREAD_NAMESPACE,"/").concat(r.Sb),{content_container_uuid:this.contentContainerUuid,thread_uuid:e,selected_content_uuids:n,fetchAction:this.fetchSelectedAction}).then((function(){var n=t.$el.parentElement.parentElement.offsetTop-t.headerHeightPx;return t.addActiveReplyThread({thread_uuid:e,offset_top:n,mode:u.REPLY_THREAD_MODES.MENTION})}))},showNewContent:function(){this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(s.A),{thread_uuid:this.threadUuid,limit:this.limit})}}),components:{replyTypingIndicator:_,replyForm:f.a,threadedContentIndicator:P,heightTransitionGroup:R.a}},$=(n(748),Object(v.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-thread",class:{"vf-thread--open":t.hasReplies,"vf-thread--no-border":!t.hasBorder}},[t.activeReplyThread.thread_uuid&&t.isFocused?n("div",{staticClass:"vf-thread__reply-thread-overlay",on:{click:function(e){return t.$emit("remove-focus")}}}):t._e(),t._v(" "),t._t("head",null,{locationInThread:t.parentLocationInThread}),t._v(" "),n("threaded-content-indicator",t._b({directives:[{name:"show",rawName:"v-show",value:t.oldContentCount>0&&t.isExpanded,expression:"oldContentCount > 0 && isExpanded"}],staticClass:"vf-thread__old-content-indicator",attrs:{"thread-palette":t.threadPalette,palette:t.oldContentPalette,count:t.oldContentCount,"is-loading":t.isFetchingContent||t.isFetchingOldContent},on:{"show-content":t.fetchOldContent}},"threaded-content-indicator",t.oldContentIndicatorText,!1)),t._v(" "),t.isReadyForContent&&t.isExpanded?n("height-transition-group",{staticClass:"vf-thread__replies",attrs:{tag:"ul",role:"list"}},t._l(t.subthreads,(function(e,i){return n("li",{key:e,staticClass:"vf-thread__reply-list-item",attrs:{id:"vf-thread--"+e}},[t._t("reply",null,{threadUuid:e,locationInThread:t.getChildLocationInThread(i)})],2)})),0):t._e(),t._v(" "),t.realtimeCount>0&&t.isExpanded?n("threaded-content-indicator",t._b({attrs:{"thread-palette":t.threadPalette,"location-in-thread":t.realtimeLocationInThread,"is-typing":t.isTypingInThread,palette:t.threadPalette,count:t.realtimeCount},on:{"show-content":t.showNewContent}},"threaded-content-indicator",t.contentIndicatorText,!1)):t.isExpanded?n("reply-typing-indicator",{attrs:{"is-typing":t.isTypingInThread}}):t._e(),t._v(" "),n("div",{ref:"intersector"}),t._v(" "),t.isReplyFormVisible&&t.isExpanded?n("reply-form",{ref:"replyForm",staticClass:"vf-thread__reply-form",attrs:{"is-expanded":"","replying-to":t.head,palette:t.threadPalette,"store-action":t.storeAction,"show-parent":!1,"character-limit":t.maximumContentLength},on:{focusin:function(e){return t.$emit("focusin")},"remove-focus":function(e){return t.$emit("focusout")}}}):t._e()],2)}),[],!1,null,"be4f7ec8",null));e.a=$.exports},660:function(t,e,n){"use strict";n(46),n(17),n(11),n(8),n(7),n(4),n(22);var i=n(0),r=n(118),o=n(557),s=n(23),a={props:{isFocused:s.a.bool.def(!1),currentUser:s.a.object.isRequired,errorMessage:s.a.string.def("")},components:{contentFocusContainer:o.a}},c=(n(741),n(45)),u=Object(c.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("content-focus-container",{attrs:{"is-focused":t.isFocused,"current-user":t.currentUser},on:{"focus-on-element":function(e){return t.$emit("focus-on-element",e)},close:function(e){return t.$emit("close")}},scopedSlots:t._u([{key:"header",fn:function(){return[t._t("header")]},proxy:!0},{key:"footer",fn:function(){return[t._t("footer",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.errorMessage,expression:"errorMessage"}],staticClass:"vf-rich-text-form__error"},[t._v("\n                "+t._s(t.errorMessage)+"\n            ")])])]},proxy:!0}],null,!0)},[t._t("default")],2)}),[],!1,null,null,null).exports,l=n(656);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p={props:{showUserStatus:s.a.bool.def(!1),isSubmitEnabled:s.a.bool,isFocused:s.a.bool.def(!1),hasContentUpdated:s.a.bool.def(!1),canFocus:s.a.bool,editorStatus:s.a.string,errorMessage:s.a.string.def("")},computed:h(h({},Object(r.c)({currentUser:i.ib})),{},{hasEditableContents:function(){return this.hasContentUpdated&&this.canFocus},classes:function(){return{"vf-content-focus-container--has-contents":!this.isFocused&&this.hasEditableContents}}}),components:{contentFocusContainerWithError:u,contentFocusContainerFooter:l.a}},b=(n(742),Object(c.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("content-focus-container-with-error",{class:t.classes,attrs:{"is-focused":t.isFocused,"error-message":t.errorMessage,"current-user":t.currentUser},on:{"focus-on-element":function(e){return t.$emit("focus-on-element",e)},close:function(e){return t.$emit("remove-focus")}},scopedSlots:t._u([{key:"header",fn:function(){return[t._t("header")]},proxy:!0},{key:"footer",fn:function(){return[n("content-focus-container-footer",{attrs:{"is-focused":t.isFocused,"show-user-status":t.showUserStatus,"editor-status":t.editorStatus,"has-content-updated":t.hasContentUpdated,"is-submit-enabled":t.isSubmitEnabled,"has-editable-contents":t.hasEditableContents},on:{submit:function(e){return t.$emit("submit",e)},"cancel-edit":function(e){return t.$emit("cancel-edit")},"actions-focused":function(e){return t.$emit("actions-focused",e)}}})]},proxy:!0}],null,!0)},[t._t("default")],2)}),[],!1,null,"21683648",null));e.a=b.exports},664:function(t,e,n){"use strict";var i=n(23),r=n(659),o={props:{sectionUuid:i.a.uuid.isRequired,rootSectionUuid:i.a.uuid,product:i.a.string.isRequired,ariaLabel:i.a.string.isRequired},components:{branding:r.a}},s=(n(605),n(45)),a=Object(s.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"vf3-conversations-footer",attrs:{"aria-label":this.ariaLabel}},[e("branding",{attrs:{product:this.product,"section-uuid":this.sectionUuid,"root-section-uuid":this.rootSectionUuid}})],1)}),[],!1,null,"8ea13bca",null);e.a=a.exports},665:function(t,e,n){"use strict";n(87);var i=n(504),r=n(298),o=n(133),s=n(657),a=n(559);function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=c({},r.c.ONLY,"vf-new-content--single"),l={props:{user:Object,isRichTextEnabled:Boolean,editorStatus:String,placeholder:String,isFocused:Boolean,contentContainerUuid:String,avatarSize:{type:String,default:i.a.MEDIUM},locationInThread:String,palette:String,characterLimit:Number,isDisabled:{type:Boolean,default:!1},preloadedContent:String},created:function(){this.threadedLayoutClasses=u[this.locationInThread]},computed:{computedAvatarSize:function(){return o.e?i.a.SMALL:this.avatarSize},contentEditorClasses:function(){return c({},"vf-new-content__editor--".concat(this.computedAvatarSize,"-avatar"),!0)}},methods:{handleContentUpdate:function(t,e){this.$emit("content-update",t,e)},focusOnContentEditor:function(){this.$refs.contentEditor.focusOnInput()},clearContent:function(){this.$refs.contentEditor.resetContents()}},components:{contentEditor:s.a,threadedLayout:a.a}},d=(n(729),n(45)),h=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("threaded-layout",{staticClass:"vf-new-content",class:t.threadedLayoutClasses,attrs:{"location-in-thread":t.locationInThread,palette:t.palette},scopedSlots:t._u([{key:"left",fn:function(){return[t._t("avatar",null,{user:t.user,size:t.computedAvatarSize})]},proxy:!0},{key:"right",fn:function(){return[n("div",{staticClass:"vf-new-content__content-editor-slot-wrapper"},[n("div",{staticClass:"vf-new-content__content-editor-wrapper"},[n("content-editor",{ref:"contentEditor",staticClass:"vf-new-content__content-editor",class:t.contentEditorClasses,attrs:{"content-container-uuid":t.contentContainerUuid,"preloaded-content":t.preloadedContent,status:t.editorStatus,placeholder:t.placeholder,"is-focused":t.isFocused,"is-rich-text-enabled":t.isRichTextEnabled,"character-limit":t.characterLimit,"is-disabled":t.isDisabled},on:{"content-update":t.handleContentUpdate,"is-over-char-limit":function(e){return t.$emit("is-over-char-limit",e)},"request-submit":function(e){return t.$emit("request-submit")}}}),t._v(" "),t._t("default")],2),t._v(" "),t._t("footer")],2)]},proxy:!0}],null,!0)})}),[],!1,null,"074d2f2b",null);e.a=h.exports},666:function(t,e,n){"use strict";var i={props:["tag","isFocused"],components:{vfAttachImgIcon:n(724).a}},r=(n(591),n(45)),o=Object(r.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e(this.tag,{tag:"component",staticClass:"attach-image-button vf-button",class:{"is-focused":this.isFocused}},[e("vf-attach-img-icon",{staticClass:"vf-icon-medium"}),this._v(" "),this._t("default")],2)}),[],!1,null,"6fc00781",null);e.a=o.exports},667:function(t,e,n){"use strict";var i=n(230),r=n(503),o=n(506),s=n(502),a={data:function(){return{isEntered:!1,wasJustClicked:!1}},inject:[i.b,i.a],props:{isFollowing:{type:Boolean,required:!0},unfollowText:{type:String,required:!0},isFollowingText:{type:String,required:!0},isNotFollowingText:{type:String,required:!0},isFollowingAria:{type:String,required:!0},isNotFollowingAria:{type:String,required:!0}},components:{vfButton:s.a},computed:{currentText:function(){return this.canShowUnfollow?this.unfollowText:this.isFollowing?this.isFollowingText:this.isNotFollowingText},currentAriaLabel:function(){return this.isFollowing?this.isFollowingAria:this.isNotFollowingAria},currentPalette:function(){return this.canShowUnfollow?this.PALETTES.DANGER:this.isFollowing?this.PALETTES.SUCCESS:this.PALETTES.ACCENT},longestText:function(){return[this.unfollowText,this.isFollowingText,this.isNotFollowingText].reduce((function(t,e){return t.length>e.length?t:e}))},canShowUnfollow:function(){return this.isFollowing&&!this.wasJustClicked&&this.isEntered}},methods:{toggleEntered:function(t){this.isEntered=t,t||(this.wasJustClicked=!1)},setClicked:function(){this.wasJustClicked=!0}},directives:{hovered:o.a,innerFocus:r.a}},c=(n(771),n(45)),u=Object(c.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-button",t._g(t._b({directives:[{name:"inner-focus",rawName:"v-inner-focus",value:t.toggleEntered,expression:"toggleEntered"},{name:"hovered",rawName:"v-hovered",value:t.toggleEntered,expression:"toggleEntered"}],staticClass:"vf-follow-button vf-label-text",attrs:{"is-cta":"",palette:t.currentPalette,size:t.SIZES.TINY,"is-inverted":!t.isFollowing},on:{click:t.setClicked}},"vf-button",t.$attrs,!1),t.$listeners),[n("span",{staticClass:"vf-offscreen-text",attrs:{"aria-live":"polite"}},[t._v("\n        "+t._s(t.currentAriaLabel)+"\n    ")]),t._v(" "),n("span",{staticClass:"vf-follow-button__text vf-flex vf-centered",attrs:{"aria-hidden":"true"}},[t._v("\n        "+t._s(t.currentText)+"\n    ")]),t._v(" "),n("span",{staticClass:"vf-follow-button__hidden-text",attrs:{"aria-hidden":"true"}},[t._v("\n        "+t._s(t.longestText)+"\n    ")])])}),[],!1,null,"ade1f1c4",null);e.a=u.exports},672:function(t,e,n){"use strict";n(46),n(17),n(11),n(8),n(7),n(22),n(10),n(4),n(87);var i=n(512),r=n(0),o=n(504),s=n(298),a=n(489),c=n(302),u=n(230),l=n(118),d=(n(104),n(100)),h=n(548),f=n(579),p=n(135),b=n(660),m=n(665),v=n(511),_=n(508);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E(t,e){var n=this.$store.getters[r.W](t),i=this.$store.getters[r.zc](n);e=n===e?t:e,Object(f.a)({content_container_uuid:n,section_uuid:i,content_uuid:t,thread_uuid:e}).then((function(t){}))}var C={props:{isExpanded:{type:Boolean,default:!1},replyingTo:{required:!0},storeAction:{type:String,required:!0},locationInThread:String,palette:String,characterLimit:Number,preloadedContent:String},data:function(){return{isFocused:!1,hasContents:!1,replyEditorContent:this.defaultEditorContent,replyStatus:i.EDITABLE,editedContents:this.defaultEditorContent,replyErrorMessage:"",isOverCharLimit:!1}},inject:[u.e],mounted:function(){this.signalTyping=Object(d.e)(E,c.a),this.hasContents=Boolean(this.preloadedContent),this.editedContents=this.preloadedContent},computed:y(y({},Object(l.c)({settings:r.Hc,user:r.ib,contentContainerByContentUuid:r.W})),{},{avatarSize:function(){return o.a.SMALL},hasSlotContent:function(){return Boolean(this.$slots.default)},localLocationInThread:function(){return this.hasSlotContent?(this.isFocused,s.c.LAST):this.isFocused||this.isExpanded&&this.hasContents?s.c.ONLY:s.c.LAST}}),methods:{removeFocus:function(){this.isFocused=!1,this.isExpanded&&this.$emit("remove-focus")},focusedIn:function(t){var e=t.target;this.$refs.avatar.$el!==e&&(document.removeEventListener("click",this.closeFromOutside),document.addEventListener("click",this.closeFromOutside),this.isFocused=!0,this.$emit("focusin"),Object(h.a)(e)||this.$refs.newContent.focusOnContentEditor())},handleSubmit:function(t){this.hasContents?this.addReply(t):this.addReplyFail()},addReply:function(t){var e=this;if(p.a.getInstance().$authorize("create","reply",[this.user,this.settings],{trigger:t,action:a.r})){this.replyStatus=i.SUBMITTING,this.replyEditorContent=this.editedContents;var n={content:this.editedContents};return this.$store.dispatch(this.storeAction,{content_uuid:this.replyingTo.content_uuid,container_uuid:this.contentContainerByContentUuid(this.replyingTo.content_uuid),content:n,actor_uuid:this.user.uuid,parent_actor_uuid:this.replyingTo.actor_uuid,thread_uuid:this.replyingTo.parent_actor_uuid?this.replyingTo.thread_uuid:this.replyingTo.content_uuid,THREAD_NAMESPACE:this.THREAD_NAMESPACE}).then((function(){e.clearReply()})).catch((function(t){return e.addReplyFail(t)}))}return this.addReplyFail()},addReplyFail:function(t){var e=this;if(this.replyStatus=i.ERROR,sessionStorage.setItem("vf_content_editor_id_".concat(this.replyingTo.content_uuid),this.editedContents),setTimeout((function(){e.replyStatus=i.EDITABLE}),3e3),t){if(403!==t.error_status)return Promise.reject(t);var n=JSON.parse(t.message);return"POSTING_BAN_ACTIVE"!==n.error_code||(this.replyErrorMessage=this.$i18n("conversations.posts.ban",{reason:n.message||0})),Promise.reject(t)}return Promise.reject()},handleCancelAction:function(){this.clearReply()},clearReply:function(){var t=this;sessionStorage.removeItem("vf_content_editor_id_".concat(this.replyingTo.content_uuid)),this.$emit("clear-reply"),this.replyStatus=i.EDITABLE,this.replyEditorContent={},this.removeFocus(),this.$nextTick().then((function(){t.replyEditorContent={},t.editedContents={},t.hasContents=!1,t.isFocused=!1}))},updateContents:function(t,e){this.hasContents=t,this.editedContents=e,this.signalTyping(this.replyingTo.content_uuid,this.replyingTo.thread_uuid)},closeFromOutside:function(t){this.$el.contains(t.target)||(this.hasContents?this.isFocused=!1:this.removeFocus())},focusOnElement:function(t){this.isExpanded&&this.focusedIn(t)}},components:{contentFocusContainerWithActions:b.a,heightTransition:_.a,newContent:m.a,vfAvatar:v.a}},T=(n(743),n(45)),S=Object(T.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("content-focus-container-with-actions",{staticClass:"vf-content-focus-container--reply-form vf3-reply-with-new",class:{"vf-content-focus-container--reply-form--is-expanded":t.isExpanded,"vf-content-focus-container--reply-form--is-focused":t.isFocused},attrs:{"i18n-prefix":"comments","is-rich-text-enabled":!1,"is-focused":t.isFocused,"has-content-updated":t.hasContents,"error-message":t.replyErrorMessage,"editor-status":t.replyStatus,"is-submit-enabled":!t.isOverCharLimit,"show-user-status":t.isFocused},on:{submit:t.handleSubmit,"cancel-edit":t.handleCancelAction,"actions-focused":t.focusedIn,"remove-focus":t.removeFocus,"focus-on-element":t.focusOnElement}},[n("div",{staticClass:"vf3-reply-with-new__content"},[t._t("default"),t._v(" "),n("height-transition",[t.isExpanded?n("new-content",{ref:"newContent",staticClass:"vf3-reply-with-new__form",class:{"vf3-reply-with-new__form--expanded":t.isExpanded,"vf3-reply-with-new__form--expanded--replyingTo":t.isExpanded&&t.hasSlotContent,"vf3-reply-with-new__form--unfocused--expanded--withContent":!t.isFocused&&t.isExpanded&&t.hasContents},attrs:{placeholder:t.$i18n("conversations.rich_text.reply_placeholder"),user:t.user,"is-rich-text-enabled":!1,"is-focused":t.isFocused,"avatar-size":t.avatarSize,"editor-status":t.replyStatus,"location-in-thread":t.localLocationInThread,palette:t.palette,"character-limit":t.characterLimit,"preloaded-content":t.preloadedContent},on:{"is-over-char-limit":function(e){t.isOverCharLimit=e},"content-update":t.updateContents,"request-submit":t.handleSubmit},nativeOn:{focusin:function(e){return t.focusedIn(e)}},scopedSlots:t._u([{key:"avatar",fn:function(t){var e=t.user,i=t.size;return[n("vf-avatar",{ref:"avatar",staticClass:"vf3-reply-with-new__avatar",attrs:{user:e,size:i}})]}}],null,!1,3645480504)}):t._e()],1)],2)])}),[],!1,null,"815a1362",null);e.a=S.exports},673:function(t,e,n){"use strict";var i=n(558),r={props:{isTyping:Boolean},computed:{a11yLabel:function(){return""}},components:{contentBadge:i.a}},o=(n(744),n(45)),s=Object(o.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"grow"}},[this.isTyping?e("content-badge",{attrs:{count:0,"a11y-label":this.a11yLabel,"is-typing":this.isTyping,"has-realtime":!1}}):this._e()],1)}),[],!1,null,"062c3592",null);e.a=s.exports},674:function(t,e,n){"use strict";var i=n(686),r=n.n(i),o=n(23),s=n(544),a=n(1106),c={data:function(){return{isCopied:!1}},props:{url:o.a.string.isRequired,copyText:o.a.string.isRequired,copiedText:o.a.string.isRequired},created:function(){this.copyIcon=a.a},mounted:function(){var t=this;this.isCopied=!1,setTimeout((function(){t.clipboard=new r.a(t.$el,{container:t.$el}),t.clipboard.on("success",(function(){t.isCopied=!0,setTimeout((function(){t.isCopied=!1}),3e3)}))}),0)},destroyed:function(){this.clipboard&&this.clipboard.destroy()},components:{dropdownButton:s.a}},u=n(45),l=Object(u.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isCopied?n("dropdown-button",{staticClass:"vf-dropdown__list-item-button vf-dropdown-list__accent-hover-button vf-no-outline vf-horiz-list vf-action-button js-list-link vf-icon-button",attrs:{icon:t.copyIcon}},[t._v("\n    "+t._s(t.copiedText)+"\n")]):n("dropdown-button",{staticClass:"vf-dropdown__list-item-button vf-dropdown-list__accent-hover-button vf-no-outline vf-horiz-list vf-action-button js-list-link vf-icon-button",attrs:{"data-clipboard-text":t.url,icon:t.copyIcon}},[t._v("\n    "+t._s(t.copyText)+"\n")])}),[],!1,null,null,null);e.a=l.exports},679:function(t,e,n){"use strict";var i,r=n(0),o=n(5);function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a="facebook",c="twitter",u=(s(i={},"email","comment_share_email"),s(i,a,"comment_share_facebook"),s(i,c,"comment_share_twitter"),s(i,"DEFAULT","comment_share"),i),l=n(14);n.d(e,"a",(function(){return d}));var d=function(t){var e=o.vuexStore.getInstance().getters[r.ib],n=u[t]||u.DEFAULT,i=e.uuid,s="medium=".concat(n);return Object(l.F)(e)&&(s+="|sharer_uuid=".concat(i)),s}},692:function(t,e,n){"use strict";n.r(e);n(24),n(4);var i=n(0),r=n(2),o=n(297),s=n(1),a=n(145),c=n(503),u=n(506),l=n(693),d=n(636),h=n.n(d),f=n(486),p=Object(f.c)("bell_icon",h.a),b=n(487),m=n(6),v=m.c.LIVEBLOG,_=m.c.TRAY_TRIGGER,g=m.c.COMMENTS,y={props:{floating:{type:String,default:"false"},parentComponent:{type:String,default:"",validator:function(t){return-1!==[v,_,g].indexOf(t)}}},created:function(){this.MAXIMUM_BEFORE_TRUNCATION=9},mounted:function(){var t=this;window.vf.context.init(a.a.NOTIFICATIONS),this.$publish(s.b.CHANNEL,s.b.EVENTS.BELL_LOAD,{widget_type:this.parentComponent}),this.$publish(s.H.CHANNEL,s.H.EVENTS.LOADED,this),this.$subscribe(s.H.CHANNEL,s.H.EVENTS.HIDE,(function(){t.hidden=t.isFloating})),this.$subscribe(s.H.CHANNEL,s.H.EVENTS.UNHIDE,(function(){setTimeout((function(){t.hidden=!1}),250)}));var e=window.localStorage.getItem("_vf_notification_queue_last_seen_".concat(this.currentUserUuid));this.isLoggedIn||null===e||this.$store.commit(r.Zb,e)},data:function(){return{dataVfId:-1,hidden:!1}},computed:{countBadgeSize:function(){return this.isFloating?o.a.SMALL:o.a.TINY},isFloating:function(){return"true"===this.floating},isLoggedIn:function(){return this.$store.getters[i.Sb]},currentUserUuid:function(){return this.$store.getters[i.kb]},count:function(){var t=this.$store.state.notifications.broadcasts.guest_user;return this.isLoggedIn||""===t?this.$store.getters[i.oc]:0},ariaCount:function(){return this.$i18n("aria.new_notifications",{num:this.count.toString()})},ariaLabel:function(){return this.$i18n("aria.open_tray")},classes:function(){return{"vf-tray-trigger":!0,"vf-offscreen-text":this.hidden,floating:this.isFloating,"vf-tray-trigger--floating":this.isFloating}},countClasses:function(){return{"vf-tray-count":!0,"vf-tray-count--floating":this.isFloating,"vf-tray-count--has-plus":this.count>9}}},methods:{toggle:function(){this.$publish(s.B.CHANNEL,s.B.EVENTS.TOGGLE,this.$el),this.$publish(s.H.CHANNEL,s.H.EVENTS.CLICKED),this.parentComponent===_?this.$publish(s.b.CHANNEL,s.b.EVENTS.TRAY_TRIGGER_CLICK,{floating:this.isFloating}):this.parentComponent===g?this.$publish(s.b.CHANNEL,s.b.EVENTS.CONVERSATION_BELL_CLICK):this.parentComponent===v&&this.$publish(s.b.CHANNEL,s.b.EVENTS.LIVEBLOG_BELL_CLICK)},trayIntent:function(){this.$publish(s.B.CHANNEL,s.B.EVENTS.OPEN_INTENT)}},components:{roundCountBadge:l.a,vfBellIcon:p,vfButton:b.a},directives:{hovered:u.a,innerFocus:c.a}},O=(n(637),n(45)),E=Object(O.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-button",{directives:[{name:"hovered",rawName:"v-hovered",value:t.trayIntent,expression:"trayIntent"},{name:"inner-focus",rawName:"v-inner-focus",value:t.trayIntent,expression:"trayIntent"}],class:t.classes,attrs:{"aria-label":t.ariaLabel,"data-vf-id":t.dataVfId},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggle(e)}}},[n("round-count-badge",{directives:[{name:"show",rawName:"v-show",value:t.count>0,expression:"count > 0"}],class:t.countClasses,attrs:{count:t.count,max:t.MAXIMUM_BEFORE_TRUNCATION,"aria-label":t.ariaCount,size:t.countBadgeSize}}),t._v(" "),n("vf-bell-icon",{staticClass:"vf-icon-medium"})],1)}),[],!1,null,"31133ebb",null);e.default=E.exports},695:function(t,e,n){"use strict";n(46),n(17),n(11),n(8),n(7),n(4),n(22);var i=n(0),r=n(230),o=n(493),s=n(1),a=n(14),c=n(133),u=n(118),l=n(487);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p={props:{user:{},isExpired:{type:Boolean,default:!1},isFocused:{type:Boolean,default:!1},hasContents:{type:Boolean,default:!1}},inject:[r.a],data:function(){return{isSigningOut:!1}},computed:h(h({},Object(u.c)({settings:i.Hc})),{},{isLoggedIn:function(){return Object(a.F)(this.user)},areAuthActionsEnabled:function(){return!this.isFocused&&!this.hasContents&&!this.isExpired},authActionButtonProps:function(){var t=c.e?o.b.SMALL:o.b.LARGE;return{palette:this.PALETTES.ACCENT,"is-link":!0,size:t}}}),methods:{handleSignOutClick:function(){this.isSigningOut=!0,this.$publish(s.c.CHANNEL,s.c.EVENTS.LOGOUT)},handleSignInClick:function(){this.$publish(s.c.CHANNEL,s.c.EVENTS.NEEDED,{trigger:this.$refs.signInButton.$el,method:s.c.METHODS.LOGIN})},handleSignUpClick:function(){this.$publish(s.c.CHANNEL,s.c.EVENTS.NEEDED,{trigger:this.$refs.signUpButton.$el,method:s.c.METHODS.SIGNUP})}},watch:{isLoggedIn:function(){this.isSigningOut=!1}},components:{vfButton:l.a}},b=(n(734),n(45)),m=Object(b.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.areAuthActionsEnabled?n("div",{staticClass:"vf-post-form__auth-actions vf-label vf-label-upper"},[t.isLoggedIn?n("vf-button",t._b({ref:"signOutButton",staticClass:"vf-post-form__sign-out-action",attrs:{disabled:t.isSigningOut},nativeOn:{click:function(e){return t.handleSignOutClick(e)}}},"vf-button",t.authActionButtonProps,!1),[t._v("\n        "+t._s(t.$i18n("settings.controls.logout"))+"\n    ")]):[n("vf-button",t._b({ref:"signInButton",staticClass:"vf-post-form__sign-in-action",nativeOn:{click:function(e){return t.handleSignInClick(e)}}},"vf-button",t.authActionButtonProps,!1),[t._v("\n            "+t._s(t.$i18n("feed.account.nav.login"))+"\n        ")]),t._v(" "),n("span",{staticClass:"vf-post-form__auth-action-separator"},[t._v("|")]),t._v(" "),n("vf-button",t._b({ref:"signUpButton",staticClass:"vf-post-form__sign-up-action",nativeOn:{click:function(e){return t.handleSignUpClick(e)}}},"vf-button",t.authActionButtonProps,!1),[t._v("\n            "+t._s(t.$i18n("feed.account.nav.signup"))+"\n        ")])]],2):t._e()}),[],!1,null,"f560a544",null);e.a=m.exports},707:function(t,e,n){"use strict";n(581)},719:function(t,e,n){"use strict";n(587)},723:function(t,e,n){"use strict";n(590)},725:function(t,e,n){"use strict";n(592)},727:function(t,e,n){"use strict";n(594)},728:function(t,e,n){"use strict";n(595)},729:function(t,e,n){"use strict";n(596)},730:function(t,e,n){"use strict";n(597)},731:function(t,e,n){"use strict";n(598)},732:function(t,e,n){"use strict";n(599)},733:function(t,e,n){"use strict";n(600)},734:function(t,e,n){"use strict";n(601)},735:function(t,e,n){"use strict";n(602)},738:function(t,e,n){"use strict";n(606)},741:function(t,e,n){"use strict";n(609)},742:function(t,e,n){"use strict";n(610)},743:function(t,e,n){"use strict";n(611)},744:function(t,e,n){"use strict";n(613)},745:function(t,e,n){"use strict";n(614)},746:function(t,e,n){"use strict";n(615)},747:function(t,e,n){"use strict";n(616)},748:function(t,e,n){"use strict";n(617)},749:function(t,e,n){"use strict";n(618)},750:function(t,e,n){"use strict";n(619)},751:function(t,e,n){"use strict";n(620)},752:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(0),r=n(14),o=n(19),s=n(622),a=function(t,e){var n=t.getters,a=Object(s.a)({getters:n},e),c=Object(o.a)((function(){return n[i.ib]})),u=Object(o.a)((function(){return Object(r.H)(c.value)})),l=Object(o.a)((function(){return a.isMuted.value})),d=Object(o.a)((function(){return!u.value&&a.isDeleted.value})),h=Object(o.a)((function(){return!u.value&&!a.isByCurrentUser.value&&(a.isDisabled.value||a.isSpam.value||a.isActorHideBanned.value||a.isActorGhostBanned.value)}));return{isDeletedStub:d,isDisabledStub:h,isMutedStub:l,isStubbed:Object(o.a)((function(){return d.value||h.value||l.value}))}}},753:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n(0),r=n(70),o=n(14),s=n(19),a=n(622),c=function(t,e){var n=t.getters,c=Object(a.a)({getters:n},e),u=Object(s.a)((function(){return n[i.ib]})),l=Object(s.a)((function(){return n[i.S](e)})),d=Object(s.a)((function(){return n[i.hd](l.value)})),h=Object(s.a)((function(){return Object(o.H)(u.value)})),f=Object(s.a)((function(){return c.isDeleted.value})),p=Object(s.a)((function(){return c.isEdited.value})),b=Object(s.a)((function(){return h.value&&d.value.ban_level!==r.a.NONE})),m=Object(s.a)((function(){return h.value&&c.isActorGhostBanned.value})),v=Object(s.a)((function(){return!h.value&&c.isPending.value})),_=Object(s.a)((function(){return!h.value&&!c.isActorGhostBanned.value&&(c.isDisabled.value||c.isSpam.value&&!c.isByCurrentUser.value)}));return{hasBannedBadge:b,hasGhostBannedBadge:m,hasDeletedBadge:f,hasDisabledBadge:_,hasPendingBadge:v,hasEditedBadge:p,isBadged:Object(s.a)((function(){return b.value||f.value||_.value||v.value||p.value}))}}},754:function(t,e,n){"use strict";n(624)},755:function(t,e,n){"use strict";n(625)},757:function(t,e,n){"use strict";n(626)},758:function(t,e,n){"use strict";n(627)},760:function(t,e,n){"use strict";n(628)},761:function(t,e,n){"use strict";n(629)},763:function(t,e,n){"use strict";n(631)},764:function(t,e,n){"use strict";n(632)},765:function(t,e,n){"use strict";n(633)},766:function(t,e,n){"use strict";n(634)},767:function(t,e,n){"use strict";n(635)},768:function(t,e,n){"use strict";n(638)},771:function(t,e,n){"use strict";n(640)},848:function(t,e,n){"use strict";n(46),n(17),n(11),n(8),n(7),n(4),n(22),n(39),n(42);var i=n(0),r=n(70),o=n(300),s=n(497),a=n(118),c=n(230),u=n(492),l=n(487),d={created:function(){this.CONTENT_ACTIONS=s.a},inject:[c.a],components:{squareBadge:u.a,vfButton:l.a}},h=n(45),f=Object(h.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-moderation-disabled"},[n("square-badge",{attrs:{palette:t.PALETTES.DANGER,"aria-label":t.$i18n("conversations.moderation.disabled_aria_label")}},[t._v("\n        "+t._s(t.$i18n("conversations.moderation.disabled"))+"\n    ")]),t._v(" "),n("vf-button",{staticClass:"vf-button-outline vf-grey vf-label vf-label-upper",nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.ENABLE)}}},[t._v("\n        "+t._s(t.$i18n("conversations.actions.enable"))+"\n    ")])],1)}),[],!1,null,null,null).exports,p=(n(87),n(551)),b={props:{flagCount:{type:Number,required:!0}},created:function(){this.CONTENT_ACTIONS=s.a},inject:[c.a],components:{squareBadge:u.a,vfFlagIcon:p.a,vfButton:l.a}},m=(n(757),Object(h.a)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-moderation-flagged"},[n("square-badge",{attrs:{palette:t.PALETTES.DANGER,"aria-label":t.$i18n("conversations.moderation.flagged_aria_label",{count:t.flagCount})}},[n("vf-flag-icon",{staticClass:"vf-moderation-flagged__icon vf-icon-small"}),t._v("\n        "+t._s(t.$i18n("conversations.moderation.flagged",{count:t.flagCount}))+"\n    ")],1),t._v(" "),n("vf-button",{staticClass:"vf-button-outline vf-grey vf-label vf-label-upper",nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.UNFLAG)}}},[t._v("\n        "+t._s(t.$i18n("conversations.actions.unflag"))+"\n    ")]),t._v(" "),n("vf-button",{staticClass:"vf-button-outline vf-grey vf-label vf-label-upper",nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.DISABLE)}}},[t._v("\n        "+t._s(t.$i18n("conversations.actions.disable"))+"\n    ")])],1)}),[],!1,null,"090ed0fb",null).exports),v={created:function(){this.CONTENT_ACTIONS=s.a},inject:[c.a],components:{squareBadge:u.a,vfButton:l.a}},_=Object(h.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-moderation-pending"},[n("square-badge",{attrs:{palette:t.PALETTES.WARNING,"aria-label":t.$i18n("conversations.moderation.pending_aria_label")}},[t._v("\n        "+t._s(t.$i18n("conversations.moderation.pending"))+"\n    ")]),t._v(" "),n("vf-button",{staticClass:"vf-button-outline vf-grey vf-label vf-label-upper",nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.ENABLE)}}},[t._v("\n        "+t._s(t.$i18n("conversations.actions.enable"))+"\n    ")]),t._v(" "),n("vf-button",{staticClass:"vf-button-outline vf-grey vf-label vf-label-upper",nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.DISABLE)}}},[t._v("\n        "+t._s(t.$i18n("conversations.actions.disable"))+"\n    ")])],1)}),[],!1,null,null,null).exports,g={created:function(){this.CONTENT_ACTIONS=s.a},inject:[c.a],components:{squareBadge:u.a,vfButton:l.a}},y=Object(h.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-moderation-spam"},[n("square-badge",{attrs:{palette:t.PALETTES.DANGER,"aria-label":t.$i18n("conversations.moderation.spam_aria_label")}},[t._v("\n        "+t._s(t.$i18n("conversations.moderation.spam"))+"\n    ")]),t._v(" "),n("vf-button",{staticClass:"vf-button-outline vf-grey vf-label vf-label-upper",nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.ENABLE)}}},[t._v("\n        "+t._s(t.$i18n("conversations.actions.unspam"))+"\n    ")])],1)}),[],!1,null,null,null).exports,O=(n(29),n(24),n(31),n(16),n(25),n(30),n(296));function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){T(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var A={functional:!0,render:function(t,e){var n=e.data,i=e.parent;return t(u.a,{class:[n.staticClass].concat(S(n.class||[])),props:{palette:O.a.WARNING,ariaLabel:i.$i18n("conversations.moderation.unavailable_aria_label")},attrs:C({},n.attrs||[])},[i.$i18n("conversations.moderation.unavailable")])}},w=Object(h.a)(A,void 0,void 0,!1,null,null,null).exports;function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){N(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function N(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I={props:{content:{type:Object,required:!0}},created:function(){this.CONTENT_ACTIONS=s.a},computed:R(R({},Object(a.c)({currentUser:i.ib})),{},{isDisabled:function(){return this.content.state_reasons.includes(r.d.CONTENT_DISABLED)},isPending:function(){return this.content.state_reasons.includes(r.d.CONTENT_AWAITING_MODERATION)},isSpam:function(){return this.content.state_reasons.includes(r.d.CONTENT_MARKED_AS_SPAM)},isFlagged:function(){return this.content.total_flags>0},isUnavailable:function(){return this.content.origin===o.b.NONE}}),components:{vfDisabled:f,vfFlagged:m,vfPending:_,vfSpam:y,vfUnavailable:w}},U=(n(758),Object(h.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-moderation-actions"},[t.isDisabled?n("vf-disabled",{on:{enable:function(e){return t.$emit(t.CONTENT_ACTIONS.ENABLE)}}}):t.isPending?n("vf-pending",{on:{enable:function(e){return t.$emit(t.CONTENT_ACTIONS.ENABLE)},disable:function(e){return t.$emit(t.CONTENT_ACTIONS.DISABLE)}}}):t.isSpam?n("vf-spam",{on:{enable:function(e){return t.$emit(t.CONTENT_ACTIONS.UNSPAM)}}}):t.isFlagged?n("vf-flagged",{attrs:{"flag-count":t.content.total_flags},on:{unflag:function(e){return t.$emit(t.CONTENT_ACTIONS.UNFLAG)},disable:function(e){return t.$emit(t.CONTENT_ACTIONS.DISABLE)}}}):t.isUnavailable?n("vf-unavailable"):t._e()],1)}),[],!1,null,"62d811bc",null));e.a=U.exports},849:function(t,e,n){"use strict";n(46),n(11),n(8),n(7),n(4),n(22),n(17);var i=n(0),r=n(2),o=n(118),s=n(230),a=n(381),c=(n(80),n(98),n(39),n(42),n(658)),u=n(23);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={data:function(){return{isFocused:!1}},inject:[s.a,s.e],props:{threadUuid:u.a.uuid.isRequired,contentContainerUuid:u.a.uuid.isRequired,isHeadReply:u.a.bool.def(!1),isReadyForContent:u.a.bool,headerHeightPx:u.a.number,createAction:u.a.string.isRequired,fetchRepliesAction:u.a.string.isRequired,fetchDirectRepliesAction:u.a.string.isRequired,fetchSelectedAction:u.a.string.isRequired,maximumContentLength:u.a.number.def(1/0),contentComponent:u.a.object.isRequired,limit:u.a.number.isRequired,isFetchingContent:u.a.bool.def(!1),isReplyToClickable:u.a.bool},computed:d(d(d({},Object(o.d)({threadByUuid:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(i.Sc)]},threadOldContentCount:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(i.Tc)]},threadRealtimeCount:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(i.Vc)]},threadPaletteByUuid:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(i.Uc)]}})),Object(o.c)({mentionNotificationsByThreadUuid:i.dd})),{},{thread:function(){return this.threadByUuid(this.threadUuid)},subthreads:function(){return this.thread.selected_content.length>0?this.thread.selected_content:this.thread.visible_content},threadPalette:function(){var t=this.thread.thread_top_uuid===this.contentContainerUuid?this.threadUuid:this.thread.thread_top_uuid;return this.oldMentionCount>0?this.PALETTES.MENTION:this.threadPaletteByUuid(t)},oldMentionsInThread:function(){var t=this;if(this.thread.selected_content.length>0){var e=this.thread.thread_top_uuid===this.contentContainerUuid?this.threadUuid:this.thread.thread_top_uuid;return this.mentionNotificationsByThreadUuid(e).filter((function(e){var n=e.content_uuid;return!t.thread.selected_content.includes(n)}))}return this.mentionNotificationsByThreadUuid(this.threadUuid).filter((function(e){var n=e.content_uuid;return!t.thread.visible_content.includes(n)&&!t.thread.realtime_content.includes(n)}))},oldMentionCount:function(){return this.oldMentionsInThread.length},oldReplyCount:function(){return this.thread.selected_content.length>0?1:this.threadOldContentCount(this.threadUuid)},realtimeCount:function(){return this.thread.selected_content.length>0?0:this.threadRealtimeCount(this.threadUuid)}}),methods:{focusedIn:function(){this.isFocused=!0},focusedOut:function(){this.isFocused=!1},removeFocus:function(){var t=Object.values(this.$refs).filter(Boolean).find((function(t){return t.isFocused}));t&&t.removeFocus(),this.isFocused=!1}},components:{vfThread:c.a}},p=n(45),b=Object(p.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-thread",{ref:"thread",attrs:{"thread-uuid":t.threadUuid,subthreads:t.subthreads,"thread-palette":t.threadPalette,"initial-shown-replies":1/0,"is-head-reply":t.isHeadReply,"old-reply-count":t.oldReplyCount,"old-mentions-in-thread":t.oldMentionsInThread,"realtime-count":t.realtimeCount,"is-ready-for-content":t.isReadyForContent,"store-action":t.createAction,"is-focused":t.isFocused,"maximum-content-length":t.maximumContentLength,"content-container-uuid":t.contentContainerUuid,limit:t.limit,"fetch-replies-action":t.isHeadReply?t.fetchDirectRepliesAction:t.fetchRepliesAction,"fetch-selected-action":t.fetchSelectedAction,"header-height-px":t.headerHeightPx,"is-fetching-content":t.isFetchingContent},on:{focusin:t.focusedIn,focusout:t.focusedOut,"remove-focus":t.removeFocus},scopedSlots:t._u([{key:"head",fn:function(e){var i=e.locationInThread;return[n(t.contentComponent,{ref:"threadHead",tag:"component",staticClass:"vf-thread__head",attrs:{"thread-uuid":t.threadUuid,"is-reply":t.isHeadReply,"thread-palette":t.threadPalette,"location-in-thread":i},on:{focusin:t.focusedIn,"remove-focus":t.focusedOut}})]}},{key:"reply",fn:function(e){var i=e.threadUuid,r=e.locationInThread;return[n(t.contentComponent,{ref:"reply-"+i,tag:"component",staticClass:"vf-thread__reply",attrs:{"thread-uuid":i,"location-in-thread":r,"thread-palette":t.threadPalette,"is-reply":"","is-reply-to-clickable":t.isReplyToClickable},on:{focusin:t.focusedIn,"remove-focus":t.focusedOut}})]}}])})}),[],!1,null,null,null).exports,m=(n(16),n(25),n(29),n(24),n(31),n(30),n(547)),v=n.n(m),_=n(133),g=n(115),y=n(524),O=n(557),E=n(493),C=n(917),T=n(487),S={components:{vfBackIcon:C.a,vfButton:T.a},computed:{size:function(){return _.e?E.b.SMALL:E.b.LARGE}}},j=(n(749),Object(p.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-button",{staticClass:"vf-back-button vf-label-text",attrs:{size:t.size},nativeOn:{click:function(e){return e.preventDefault(),t.$emit("go-back")}}},[n("span",{staticClass:"vf-back-button__icon-wrapper"},[n("vf-back-icon",{staticClass:"vf-icon-small"})],1),t._v("\n    "+t._s(t.$i18n("conversations.threads.reply_thread.back"))+"\n")])}),[],!1,null,null,null).exports),A=n(556);function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);s=!0);}catch(t){a=!0,r=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var R={rootMargin:"-50px 0px 0px 0px"},N={props:{isFocused:{type:Boolean,default:!1},currentUser:{type:Object,required:!0},headerText:{type:String,required:!0},labeledBy:{type:String,default:""},hasBackButton:{type:Boolean,default:!1}},data:function(){return{hasStickiedHeader:!1,topElementPosition:null}},created:function(){this.isMobileOrTablet=_.e},mounted:function(){v.a.add(this.$refs.header),this.scrollToTop(),this.lockBodyScroll()},beforeDestroy:function(){this.topObserver&&this.topObserver.unobserve(this.$refs.top),this.bottomObserver&&this.bottomObserver.unobserve(this.$refs.bottom),this.unlockBodyScroll(),this.removeOnScrollEvent(),document.removeEventListener("click",this.emitClose)},destroyed:function(){this.$emit("is-header-sticky",!1)},methods:{scrollToTop:function(){var t=this.getContainerPosition();t&&(this.topElementPosition=t,document.documentElement.scrollTop=t,document.body.scrollTop=t,document.addEventListener("scroll",this.onScroll))},onScroll:function(){var t=this,e=this.topElementPosition;e&&document.documentElement.scrollTop===e&&(this.removeOnScrollEvent(),Object(g.d)().then((function(){t.topObserver=Object(g.a)(t.$refs.top,t.handleTopObserved,R),t.bottomObserver=Object(g.a)(t.$refs.bottom,t.handleBottomObserved,R)})),this.$refs.heading.focus())},removeOnScrollEvent:function(){document.removeEventListener("scroll",this.onScroll)},getContainerPosition:function(){var t=this.$refs.top.getBoundingClientRect(),e=t.top,n=t.bottom,i=e<0,r=window.innerHeight-n<0,o=document.documentElement.scrollTop;return i?parseInt(o+e-150,10):r?parseInt(o+n-150,10):null},lockBodyScroll:function(){_.e&&(this.existingBodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden")},unlockBodyScroll:function(){_.e&&(document.body.style.overflow=this.existingBodyOverflow)},handleTopObserved:function(t){var e=w(t,1)[0],n=e.isIntersecting,i=e.boundingClientRect,r=e.rootBounds;!n&&i.top>r.top&&!_.e&&this.emitClose(),(n||i.top<=r.top)&&(this.hasStickiedHeader=!n),this.$emit("is-header-sticky",this.hasStickiedHeader)},handleBottomObserved:function(t){var e=w(t,1)[0],n=e.isIntersecting,i=e.boundingClientRect,r=e.rootBounds;!n&&i.bottom<r.bottom&&!_.e&&this.emitClose(),this.hasStickiedHeader&&this.$emit("is-header-sticky",n)},handleFocusIn:function(){document.removeEventListener("click",this.emitClose),document.addEventListener("click",this.emitClose)},emitClose:function(){this.$emit("close")}},components:{FocusTrap:y.FocusTrap,contentFocusContainer:O.a,backButton:j,closeButton:A.a}},I=(n(750),Object(p.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("focus-trap",{staticClass:"vf-content-focus-container-modal",attrs:{role:"dialog","aria-modal":"true","deactivate-on-outside-click":"","deactivate-on-esc":"","return-focus-on-deactivate":"","focus-on-activate":!1},on:{deactivated:t.emitClose}},[n("content-focus-container",{attrs:{"is-focused":t.isFocused,"current-user":t.currentUser,"show-mobile-view":""},nativeOn:{focusin:function(e){return t.handleFocusIn(e)},click:function(t){t.stopPropagation(),t.preventDefault()}},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{ref:"header",staticClass:"vf-content-focus-container-modal__header",class:{"vf-content-focus-container-modal__header--stickied":t.hasStickiedHeader}},[t.hasBackButton?n("back-button",{on:{"go-back":function(e){return t.$emit("go-back")}}}):t._e(),t._v(" "),n("div",{staticClass:"vf-content-focus-container-modal__header-text-wrapper"},[n("h2",{ref:"heading",staticClass:"vf-content-focus-container-modal__header-text vf-label-text vf-no-outline",attrs:{tabindex:"-1"}},[t._v("\n                        "+t._s(t.headerText)+"\n                    ")])]),t._v(" "),n("div",[n("close-button",{staticClass:"vf-content-focus-container-modal__close-button",attrs:{"aria-label":t.$i18n("conversations.threads.reply_thread.aria_close_label")},on:{close:function(e){return e.stopPropagation(),t.$emit("close")}}})],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[t._t("footer")]},proxy:!0}],null,!0)},[n("div",{ref:"top"}),t._v(" "),t._v(" "),t._t("default"),t._v(" "),t._v(" "),n("div",{ref:"bottom"})],2)],1)}),[],!1,null,"162cb620",null).exports);function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $={props:{activeReplyThread:u.a.object.isRequired,limit:u.a.number.isRequired,headerHeightPx:u.a.number,createAction:u.a.string.isRequired,fetchAction:u.a.string.isRequired,fetchRepliesAction:u.a.string.isRequired,fetchDirectRepliesAction:u.a.string.isRequired,fetchSelectedAction:u.a.string.isRequired,maximumContentLength:u.a.number.def(1/0),contentComponent:u.a.object.isRequired},data:function(){return{isReadyForContent:!1,isFetchingContent:!1}},inject:[s.e],created:function(){this.checkForContent()},beforeDestroy:function(){this.thread.selected_content.length&&this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(r.L),this.activeReplyThread.thread_uuid)},computed:D(D(D({},Object(o.d)({threadByUuid:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(i.Sc)]}})),Object(o.c)({contentByUuid:i.S,userByUuid:i.id,currentUser:i.ib})),{},{threadContent:function(){return this.contentByUuid(this.activeReplyThread.thread_uuid)},thread:function(){return this.threadByUuid(this.activeReplyThread.thread_uuid)},isHeadReply:function(){return this.activeReplyThread.content_container_uuid!==this.activeReplyThread.parent_thread_uuid},repliesGetter:function(){return this.isHeadReply?i.Q:"".concat(this.THREAD_NAMESPACE,"/").concat(i.qd)},threadOwner:function(){return this.userByUuid(this.threadContent.actor_uuid)},isReplyToClickable:function(){return this.activeReplyThread.mode!==a.REPLY_THREAD_MODES.REPLY_PARENT}}),methods:{closeReplyThread:function(){this.$store.commit(r.C,this.activeReplyThread.content_container_uuid)},goBack:function(){this.$store.commit(r.sb,this.activeReplyThread.content_container_uuid)},fetchContent:function(){var t=this,e=this.threadContent,n=e.thread_uuid===e.content_container_uuid?this.fetchRepliesAction:this.fetchDirectRepliesAction;this.isFetchingContent=!0,this.$store.dispatch(n,{content_uuid:this.thread.thread_uuid,limit:this.limit,starting_from:this.thread.page_from,THREAD_NAMESPACE:this.THREAD_NAMESPACE}).then((function(){t.isFetchingContent=!1}))},initializeThread:function(){var t={thread_uuid:this.activeReplyThread.thread_uuid,thread_top_uuid:this.threadContent.thread_uuid,total_content:this.threadContent.total_replies};this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(r.R),t),this.isReadyForContent=!0,this.fetchContent()},fetchSelectedContent:function(){var t=this,e=this.thread.selected_content.filter((function(e){return!t.contentByUuid(e)})).join();e.length>0?this.$store.dispatch(this.fetchAction,{content_container_uuid:this.activeReplyThread.content_container_uuid,content_uuids:e}).then((function(){t.isReadyForContent=!0})):this.isReadyForContent=!0},checkForContent:function(){this.thread?this.thread.selected_content.length>0?this.fetchSelectedContent():this.thread.visible_content.length<this.thread.total_content?(this.isReadyForContent=!0,this.fetchContent()):this.isReadyForContent=!0:this.initializeThread()}},watch:{activeReplyThread:function(){this.isReadyForContent=!1,this.checkForContent(),this.$refs.modal.scrollToTop()}},components:{replyLevelThread:b,replyThreadModal:I}},x=Object(p.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("reply-thread-modal",{ref:"modal",attrs:{"has-back-button":"","is-focused":"","current-user":t.currentUser,"header-text":t.$i18n("conversations.threads.title"),"aria-label":t.isFetchingContent?t.$i18n("conversations.threads.title_loading"):t.$i18n("conversations.threads.title")},on:{"go-back":t.goBack,close:t.closeReplyThread,"is-header-sticky":function(e){return t.$emit("is-reply-thread-header-sticky",e)}}},[n("reply-level-thread",{ref:"replyLevelThread",attrs:{limit:t.limit,"content-container-uuid":t.activeReplyThread.content_container_uuid,"create-action":t.createAction,"fetch-replies-action":t.fetchRepliesAction,"fetch-direct-replies-action":t.fetchDirectRepliesAction,"fetch-selected-action":t.fetchSelectedAction,"maximum-content-length":t.maximumContentLength,"thread-uuid":t.activeReplyThread.thread_uuid,"is-head-reply":t.isHeadReply,"is-ready-for-content":t.isReadyForContent,"header-height-px":t.headerHeightPx,"content-component":t.contentComponent,"is-fetching-content":t.isFetchingContent,"is-reply-to-clickable":t.isReplyToClickable}})],1)}),[],!1,null,null,null);e.a=x.exports},851:function(t,e,n){"use strict";n(46),n(17),n(11),n(8),n(7),n(4),n(22),n(39),n(42);var i=n(118),r=n(0),o=n(497),s=n(133),a=n(14),c=n(493),u=n(487),l=n(1101),d=(n(54),n(41),n(691)),h=n(1103),f=n(1104),p=n(1105),b=n(47),m=n(679),v=n(623),_=n(674),g=n(23);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){E(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var C="facebook",T="twitter",S="email",j="url",A=[{key:C,value:"conversations.actions.facebook",buttonClass:"vf-horiz-list vf-action-button js-list-link vf-icon-button",icon:h.a},{key:T,value:"conversations.actions.twitter",buttonClass:"vf-horiz-list vf-action-button js-list-link vf-icon-button",icon:f.a},{key:S,value:"conversations.actions.email",buttonClass:"vf-horiz-list vf-action-button js-list-link vf-icon-button",icon:p.a},{key:j,value:"conversations.actions.copy_url"}],w={props:{contentUuid:g.a.uuid.isRequired,contentType:g.a.string.isRequired},created:function(){this.PALETTES=c.a,this.copyUrlKey=j},data:function(){return{isDropdownOpen:!1}},mounted:function(){this.$el.addEventListener("mouseleave",this.hide)},beforeDestroy:function(){this.$el.removeEventListener("mouseleave",this.hide)},computed:O(O({},Object(i.c)({locations:r.Ec})),{},{shareOptions:function(){var t=this;return A.map((function(e){return Object.assign({},e,{value:t.$i18n(e.value)})}))},checkOutText:function(){return this.$i18n("social.check_out",{content_type:this.contentType})},facebookUrl:function(){var t={u:this.buildShareLink(v.a.FACEBOOK)};return Object(b.b)("http://www.facebook.com/sharer/sharer.php",{queryParams:t})},twitterUrl:function(){var t=this.buildShareLink(v.a.TWITTER),e={text:"".concat(this.checkOutText,": ").concat(t)};return Object(b.b)("https://twitter.com/intent/tweet",{queryParams:e})},emailUrl:function(){var t=this.buildShareLink(v.a.EMAIL),e=encodeURIComponent(this.checkOutText),n=encodeURIComponent(this.$i18n("social.email_body",{url:t,content_type:this.contentType}));return"".concat("mailto",":?subject=").concat(e,"&body=").concat(n)},buttonProps:function(){return{class:"vf-label-upper",size:"inline"}}}),methods:{toggleOnEnter:function(t){this.isDropdownOpen=t},toggleDropdown:function(){this.isDropdownOpen=!this.isDropdownOpen},hide:function(){this.toggleOnEnter(!1)},onAction:function(t){switch(t.key){case C:this.openShareLink(this.facebookUrl,"Facebook");break;case T:this.openShareLink(this.twitterUrl,"Twitter");break;case S:location.href=this.emailUrl}},buildShareLink:function(t){var e=new URL(this.locations.origin_url);return e.searchParams.append("__vfz",Object(m.a)(t)),e.hash="vf-".concat(this.contentUuid),e.href},openShareLink:function(t,e){window.open(t,e,"status = 1, height = 350, width = 550, resizable = 0")}},components:{vfButton:u.a,listDropdown:d.a,copyUrlButton:_.a}},P=(n(754),n(45)),R=Object(P.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("list-dropdown",{staticClass:"vf-share-menu",attrs:{items:t.shareOptions,"enable-hover-light":!1,"button-properties":t.buttonProps,positions:["bottom-left"],"is-dropdown-open":t.isDropdownOpen},on:{"list-item-clicked":t.onAction},scopedSlots:t._u([{key:"trigger",fn:function(){return[n("vf-button",{staticClass:"vf-label vf-label-upper vf-share-menu__trigger",attrs:{palette:t.PALETTES.ACCENT,size:"inline","is-link":"","is-inverted":""},nativeOn:{"&click":function(e){return t.toggleDropdown(e)}}},[t._v("\n            "+t._s(t.$i18n("conversations.posts.share"))+"\n        ")])]},proxy:!0},{key:t.copyUrlKey,fn:function(){return[n("copy-url-button",{attrs:{url:t.buildShareLink(),"copy-text":t.$i18n("conversations.actions.copy_url"),"copied-text":t.$i18n("conversations.actions.copied")}})]},proxy:!0}],null,!0)})}),[],!1,null,"43cfeaba",null).exports,N=n(864),I=n(865);function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $=Object(u.b)(N.a),x=Object(u.b)(I.a),k={props:{isReplyEnabled:g.a.bool,areRepliesEnabled:g.a.bool,isLikeEnabled:g.a.bool,isDislikeEnabled:g.a.bool,isShareEnabled:g.a.bool.def(!1),isFlagEnabled:g.a.bool.def(!1),isEntered:g.a.bool.def(!1),content:g.a.object,contentType:g.a.string},created:function(){this.CONTENT_ACTIONS=o.a,this.PALETTES=c.a,this.isMobileOrTablet=s.e},computed:D(D({},Object(i.c)({currentUser:r.ib,siteSettings:r.Hc,getUserByUuid:r.id})),{},{contentActor:function(){return this.getUserByUuid(this.content.actor_uuid)},isContentDislikable:function(){return Boolean(this.siteSettings.enable_dislikes)},isFlagVisible:function(){return Object(a.E)(this.currentUser,this.siteSettings,this.contentActor)},numOfReplies:function(){return this.content.total_replies},isLiked:function(){return this.content.actions.includes(o.a.LIKE)},isDisliked:function(){return this.content.actions.includes(o.a.DISLIKE)},isFlagged:function(){return this.content.actions.includes(o.a.FLAG)},flagText:function(){return this.isFlagged?this.$i18n("conversations.posts.flag.past"):this.$i18n("conversations.posts.flag.verb")},likeLabel:function(){return this.isLiked?this.$i18n("conversations.posts.unlike_aria_label",{count:this.content.total_likes}):this.$i18n("conversations.posts.like_aria_label",{count:this.content.total_likes})},dislikeLabel:function(){return this.isLiked?this.$i18n("conversations.posts.undislike_aria_label",{count:this.content.total_dislikes}):this.$i18n("conversations.posts.dislike_aria_label",{count:this.content.total_dislikes})}}),methods:{getFlagPalette:function(t){return t?c.a.DANGER:c.a.ACCENT}},components:{countButton:l.a,dislikeButton:x,likeButton:$,shareMenu:R,vfButton:u.a}},B=(n(755),Object(P.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-content-actions",class:{"vf-content-actions--entered":t.isEntered||t.isMobileOrTablet}},[n("div",{staticClass:"vf-content-actions__left-actions vf-horiz-list"},[t.isReplyEnabled?n("vf-button",{staticClass:"vf-content-actions__left-action vf-content-actions__reply vf-label is-size-inline is-link is-accent-color",attrs:{"aria-label":t.$i18n("conversations.posts.reply_aria_label"),palette:t.PALETTES.ACCENT},nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.REPLY)}}},[t._v("\n            "+t._s(t.$i18n("conversations.posts.reply.verb"))+"\n        ")]):t._e(),t._v(" "),t.areRepliesEnabled&&t.numOfReplies>0?n("count-button",{staticClass:"vf-content-actions__left-action vf-content-actions__replies vf-label is-size-inline is-link is-accent-color",attrs:{"aria-label":t.$i18n("conversations.posts.replies_aria_label",{count:t.numOfReplies}),count:t.numOfReplies},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit(t.CONTENT_ACTIONS.REPLIES)},mousedown:function(t){t.stopPropagation(),t.preventDefault()}}},[t._v("\n            "+t._s(t.$i18n("conversations.posts.reply.noun",{count:t.numOfReplies}))+"\n        ")]):t._e(),t._v(" "),t.isLikeEnabled?n("like-button",{staticClass:"vf-content-actions__left-action vf-content-actions__like vf-label is-size-inline is-link is-accent-color is-inverted",class:{"vf-content-actions__like--liked":t.isLiked},attrs:{size:"vf-icon-small","aria-label":t.likeLabel,text:t.content.total_likes.toString()},nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.TOGGLE_LIKE)}}}):t._e(),t._v(" "),t.isDislikeEnabled&&t.isContentDislikable?n("dislike-button",{staticClass:"vf-content-actions__left-action vf-content-actions__dislike vf-label is-size-inline is-link is-accent-color is-inverted",class:{"vf-content-actions__dislike--disliked":t.isDisliked},attrs:{size:"vf-icon-small","aria-label":t.dislikeLabel,text:t.content.total_dislikes.toString()},nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.TOGGLE_DISLIKE)}}}):t._e()],1),t._v(" "),n("div",{staticClass:"vf-content-actions__right-actions vf-horiz-list",class:{"vf-content-actions__right-actions--desktop":!t.isMobileOrTablet}},[t.isShareEnabled?n("share-menu",{staticClass:"vf-content-actions__share",attrs:{"content-uuid":t.content.content_uuid,"content-type":t.contentType}}):t._e(),t._v(" "),t.isFlagEnabled&&t.isFlagVisible?n("vf-button",{staticClass:"vf-content-actions__flag vf-label is-size-inline is-link is-accent-color",class:{"vf-content-actions__flag--flagged":t.isFlagged},attrs:{palette:t.getFlagPalette(t.isFlagged),"is-inverted":!t.isFlagged},nativeOn:{click:function(e){!t.isFlagged&&t.$emit(t.CONTENT_ACTIONS.FLAG)}}},[t._v("\n            "+t._s(t.flagText)+"\n        ")]):t._e()],1)])}),[],!1,null,"a232ffc8",null));e.a=B.exports},852:function(t,e,n){"use strict";n(46),n(17),n(11),n(8),n(7),n(4),n(22),n(29);var i=n(0),r=n(300),o=n(61),s=n(1),a=n(299),c=n(133),u=n(118),l=n(1085),d=n(230),h=n(502),f=n(23),p={props:{replyName:f.a.string,isEntered:f.a.bool.def(!1),isClickable:f.a.bool},inject:[d.b,d.a],computed:{palette:function(){return this.hasEnteredState?this.PALETTES.ACCENT:this.PALETTES.NONE},hasEnteredState:function(){return this.isEntered||c.e}},components:{vfButton:h.a}},b=(n(764),n(45)),m=Object(b.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isClickable?n("vf-button",{staticClass:"vf-reply-to vf-reply-to--clickable vf-label-text vf-label-text--default-case",class:{"vf-reply-to--entered":t.hasEnteredState},attrs:{size:t.SIZES.INLINE,palette:t.palette,"aria-label":t.$i18n("conversations.reply_to.reply_to_button_aria_label",{user:t.replyName}),"is-link":""},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("reply-to-clicked")}}},[t._v("\n    "+t._s(t.$i18n("conversations.reply_to.reply_to"))+"\n    "),n("span",{staticClass:"vf-reply-to__reply-name"},[t._v(" "+t._s(t.replyName))]),t._v(" "),t.isEntered?n("span",[t._v(" - "+t._s(t.$i18n("conversations.reply_to.view_message")))]):t._e()]):n("span",{staticClass:"vf-reply-to vf-label-text vf-label-text--default-case",attrs:{"aria-label":t.$i18n("conversations.reply_to.reply_to_aria_label",{user:t.replyName})}},[t._v("\n    "+t._s(t.$i18n("conversations.reply_to.reply_to"))+"\n    "),n("span",{staticClass:"vf-reply-to__reply-name"},[t._v(" "+t._s(t.replyName))])])}),[],!1,null,"70f4b820",null).exports,v=n(14);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var O={props:{contentUuid:f.a.uuid.isRequired,userUuid:f.a.string.def(o.b),isPinned:f.a.bool.def(!1),isFromUser:f.a.bool.def(!1),isModBadgeEnabled:f.a.bool,customBadges:f.a.array,hasAuthorBadge:f.a.bool.def(!1),isReply:f.a.bool.def(!1),replyName:f.a.string,isReplyToEditedPost:f.a.bool.def(!1),isEntered:f.a.bool.def(!1),isReplyToClickable:f.a.bool},computed:g(g({},Object(u.c)({userByOrigin:i.hd,getRelativeTime:i.wc,contentByUuid:i.S,userByUuid:i.id,currentUserUuid:i.kb,isCurrentUserModOrAdmin:i.Tb})),{},{user:function(){return this.userByOrigin({actor_uuid:this.userUuid,origin:this.content.origin})},isModOrAdmin:function(){return this.isModBadgeEnabled&&Object(v.H)(this.user)},isTrustedUser:function(){return this.$can("trust","user",this.user)},content:function(){return this.contentByUuid(this.contentUuid)},name:function(){switch(this.content?this.content.origin:"none"){case r.b.TWITTER:return this.$i18n("social.twitter");default:return this.user.name}},timestamp:function(){return this.content?this.content.time:null},timeString:function(){return this.content?this.getRelativeTime(this.content.time):""},isEditorPicked:function(){return Boolean(this.content&&this.content.is_picked)},classes:function(){return{"vf-post-details--mobile":c.e}},postNameButtonClasses:function(){return y({},a.b,this.isFromUser)}}),methods:{displayProfile:function(t,e){var n=this,i=t.currentTarget,r=e||this.user;setTimeout((function(){n.$publish(s.s.CHANNEL,s.s.EVENTS.SHOW,i,r)}))}},components:{postDetails:l.a,replyTo:m}},E=(n(765),Object(b.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("post-details",{staticClass:"vf-post-details",class:t.classes,attrs:{name:t.name,"time-string":t.timeString,timestamp:t.timestamp,"are-names-clickable":t.isFromUser,"is-by-page-author":t.hasAuthorBadge,"is-by-mod-or-admin":t.isModOrAdmin,"is-by-trusted-user":t.isTrustedUser,"is-editors-pick":t.isEditorPicked,"custom-badges":t.customBadges,"is-pinned":t.isPinned,"is-reply-to-edited-post":t.isReplyToEditedPost,"post-name-button-classes":t.postNameButtonClasses},on:{"username-clicked":t.displayProfile}}),t._v(" "),t.isReply?n("reply-to",{attrs:{"reply-name":t.replyName,"is-entered":t.isEntered,"is-clickable":t.isReplyToClickable},on:{"reply-to-clicked":function(e){return t.$emit("reply-to-clicked")}}}):t._e()],1)}),[],!1,null,"293d8180",null));e.a=E.exports},856:function(t,e,n){"use strict";n(46),n(11),n(8),n(7),n(4),n(22),n(17),n(87);var i=n(512),r=n(0),o=n(230),s=n(302),a=n(489),c=n(548),u=n(118),l=(n(104),n(100)),d=n(579),h=n(76),f=n(135),p=n(511),b=n(508),m=n(557),v=n(665),_=n(656),g=n(695);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){E(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C(){Object(d.a)({content_container_uuid:this.contentContainerUuid,section_uuid:this.$store.getters[r.zc](this.contentContainerUuid),content_uuid:this.contentContainerUuid,thread_uuid:this.contentContainerUuid}).then((function(t){}))}var T={props:{user:{},contentContainerUuid:{type:String,required:!0},placeholder:{type:String,required:!0},storeAction:{type:String,required:!0},isRichTextEnabled:{type:Boolean,default:!0},characterLimit:Number,isExpired:{type:Boolean,default:!1},expiryNotice:{type:String},showAuthActions:{type:Boolean,default:!1}},inject:[o.a,o.e],data:function(){return{isFocused:!1,hasContents:!1,isOverCharLimit:!1,editedContents:{},contentStatus:i.EDITABLE,preloadedContent:null}},created:function(){this.getSessionStorageContent()},mounted:function(){this.signalTyping=Object(l.e)(C,s.a)},computed:O(O({},Object(u.c)({settings:r.Hc,currentUser:r.ib})),{},{computedPlaceholder:function(){return this.isExpired?this.expiryNotice:this.placeholder}}),methods:{getSessionStorageContent:function(){var t=sessionStorage.getItem("vf_content_editor_id_".concat(this.contentContainerUuid));t&&(this.preloadedContent=t,this.editedContents=t,this.hasContents=!0,this.isFocused=!0)},removeFocus:function(){this.isFocused=!1,document.removeEventListener("click",this.closeFromOutside)},focusedIn:function(t){var e=this,n=t.target;this.$refs.authActions&&this.$refs.authActions.$el===n.parentElement||this.$refs.avatar.$el===n||this.isExpired||(this.isFocused=!0,setTimeout((function(){document.removeEventListener("click",e.closeFromOutside),document.addEventListener("click",e.closeFromOutside)})),Object(c.a)(n)||this.$refs.newContent.focusOnContentEditor())},handleSubmit:function(t){this.hasContents&&!this.hasPendingUploads(this.editedContents)?this.createPost(t):this.handleError()},updateContents:function(t,e){this.hasContents=t,this.editedContents=e,this.signalTyping()},createPost:function(t){var e=this;if(f.a.getInstance().$authorize("create","live-content",[this.user,this.settings],{trigger:t,action:a.g})){this.contentStatus=i.SUBMITTING;var n=this.isRichTextEnabled?this.editedContents:{content:this.editedContents};this.$store.dispatch(this.storeAction,{container_uuid:this.contentContainerUuid,content:n,THREAD_NAMESPACE:this.THREAD_NAMESPACE}).then((function(){e.clearPost(),e.$emit("on-content-created")})).catch((function(){e.handleError()}))}else this.handleError()},handleError:function(){var t=this;this.contentStatus=i.ERROR,sessionStorage.setItem("vf_content_editor_id_".concat(this.contentContainerUuid),this.editedContents),setTimeout((function(){t.contentStatus=i.EDITABLE}),3e3)},clearPost:function(){sessionStorage.removeItem("vf_content_editor_id_".concat(this.contentContainerUuid)),this.preloadedContent=null,this.contentStatus=i.EDITABLE,this.$refs.newContent.clearContent(),this.editedContents={},this.hasContents=!1,this.removeFocus()},hasPendingUploads:function(t){var e=t.content;return!(!e||!this.isRichTextEnabled)&&JSON.parse(e).ops.filter((function(t){return Object(h.b)(["insert","image-upload"],t)})).filter((function(t){return!Object(h.b)(["insert","image-upload","mediaUuid"],t)})).length>0},closeFromOutside:function(t){this.$el.contains(t.target)||this.removeFocus()}},components:{contentFocusContainer:m.a,heightTransition:b.a,newContent:v.a,contentFocusContainerFooter:_.a,vfAvatar:p.a,authenticationActions:g.a}},S=(n(735),n(45)),j=Object(S.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("height-transition",[n("content-focus-container",{staticClass:"vf-post-form vf-post-form__container vf-post-form__content-container",class:{"vf-post-form__container--focused":t.isFocused},attrs:{"is-focused":t.isFocused,"is-default-container":!1,"current-user":t.currentUser},on:{"remove-focus":t.removeFocus,"focus-on-element":t.focusedIn},nativeOn:{focusin:function(e){return t.focusedIn(e)}}},[n("new-content",{ref:"newContent",staticClass:"vf-post-form__new-content",class:{"vf-post-form__new-content__disabled":t.isExpired},attrs:{"location-in-thread":"only",user:t.user,"editor-status":t.contentStatus,"is-rich-text-enabled":t.isRichTextEnabled,"is-focused":t.isFocused,"content-container-uuid":t.contentContainerUuid,placeholder:t.computedPlaceholder,"character-limit":t.characterLimit,"is-disabled":t.isExpired,"preloaded-content":t.preloadedContent},on:{"content-update":t.updateContents,"is-over-char-limit":function(e){t.isOverCharLimit=e},"request-submit":t.handleSubmit},scopedSlots:t._u([{key:"avatar",fn:function(t){var e=t.user,i=t.size;return[n("vf-avatar",{ref:"avatar",staticClass:"vf-post-form__avatar",attrs:{user:e,size:i}})]}},{key:"footer",fn:function(){return[n("content-focus-container-footer",{attrs:{"show-user-status":"","is-focused":t.isFocused,"has-content-updated":t.hasContents,"has-editable-contents":t.hasContents,"is-submit-enabled":!t.hasPendingUploads(t.editedContents)&&!t.isOverCharLimit&&!t.isExpired,"editor-status":t.contentStatus},on:{submit:t.handleSubmit,"cancel-edit":t.clearPost}})]},proxy:!0}])},[t._v(" "),t.showAuthActions?[n("authentication-actions",{ref:"authActions",attrs:{user:t.user,"is-focused":t.isFocused,"has-contents":t.hasContents}})]:t._e()],2)],1)],1)}),[],!1,null,"78683503",null);e.a=j.exports},857:function(t,e,n){"use strict";var i=n(493),r=n(201),o=n(500),s={props:{errorAriaLabel:{type:String,required:!0},isLoading:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1}},created:function(){this.STATUSES=r.a},computed:{status:function(){return this.hasError?r.a.ERROR:this.isLoading?r.a.PENDING:r.a.NONE},palette:function(){return this.status===r.a.ERROR?i.a.DANGER:i.a.ACCENT}},components:{loaderButton:o.a}},a=(n(738),n(45)),c=Object(a.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-load-more vf-label-text"},[n("loader-button",{staticClass:"vf-load-more__button",attrs:{palette:t.palette,status:t.status,"is-inverted":t.status===t.STATUSES.NONE,size:"small","is-cta":"","is-full-width":""},nativeOn:{click:function(e){return t.$emit("load-more")},mousedown:function(t){t.stopPropagation(),t.preventDefault()}}},[t._t("default"),t._v(" "),t.hasError?n("span",{staticClass:"vf-offscreen-text",attrs:{"aria-live":"polite"}},[t._v("\n            "+t._s(t.errorAriaLabel)+"\n        ")]):t._e()],2)],1)}),[],!1,null,"d14a7954",null);e.a=c.exports},859:function(t,e,n){"use strict";var i=n(297),r=n(492),o=n(573),s=n(23),a={props:{count:s.a.number,text:s.a.string.isRequired,ariaLabel:s.a.string.isRequired,hasNewContent:s.a.bool.def(!1),isInsideTrigger:s.a.bool.def(!1),isInsideDropdown:s.a.bool.def(!1)},inject:{size:{default:i.a.SMALL},components:{default:{squareBadge:r.a,unseenNotifier:o.a}}}},c=(n(768),n(45)),u=Object(c.a)(a,(function(t,e){var n=e._c;return n("span",{class:{"vf-nav-label vf-nav-tab-button":!e.props.isInsideTrigger&&!e.props.isInsideDropdown,"vf-nav-tab-button--inside-trigger":e.props.isInsideTrigger,"vf-nav-tab-button--inside-dropdown":e.props.isInsideDropdown},attrs:{"aria-label":e.ariaLabel}},[n("span",{class:{"vf-label-text vf-nav-tab-button__text":!e.props.isInsideDropdown&&!e.props.isInsideTrigger}},[e._v("\n        "+e._s(e.props.text)+"\n    ")]),e._v(" "),e.props.count?n(e.injections.components.squareBadge,{tag:"component",staticClass:"vf-nav-tab-button__badge",attrs:{"aria-hidden":"true",size:e.injections.size,disabled:!0}},[e._v("\n        "+e._s(e.props.count)+"\n    ")]):e._e(),e._v(" "),e.props.hasNewContent?n(e.injections.components.unseenNotifier,{tag:"component",staticClass:"vf-nav-tab-button__unseen-notifier",attrs:{"aria-hidden":"true"}}):e._e()],1)}),[],!0,null,"58b5b311",null);e.a=u.exports},862:function(t,e,n){"use strict";var i=n(115),r=n(575),o=n(673),s={root:null,threshold:1},a={props:{isTyping:Boolean},data:function(){return{hasTyped:this.isTyping,isInViewPort:!1}},computed:{isVisible:function(){return this.isInViewPort&&this.isTyping}},methods:{onIntersection:function(t,e){var n=t[0];this.isInViewPort=this.hasTyped||n.isIntersecting,this.hasTyped&&e.unobserve(n.target)}},mounted:function(){var t=this;Object(i.d)().then((function(){Object(i.a)(t.$el,(function(e,n){return t.onIntersection(e,n)}),s)}))},watch:{isVisible:function(){this.hasTyped=!0}},components:{contentLayout:r.a,typingIndicator:o.a}},c=(n(751),n(45)),u=Object(c.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"top-typing-indicator",class:{"top-typing-indicator--entered":t.hasTyped,"top-typing-indicator--visible":t.isVisible}},[n("content-layout",{staticClass:"top-typing-indicator__internal",scopedSlots:t._u([{key:"left",fn:function(){return[n("typing-indicator",{staticClass:"top-typing-indicator__indicator",attrs:{"is-typing":t.isVisible}})]},proxy:!0},{key:"right",fn:function(){return[n("transition",{attrs:{name:"fade"}},[t.isVisible?n("div",{staticClass:"top-typing-indicator__text",attrs:{"aria-live":"polite"}},[t._v("\n                    "+t._s(t.$i18n("conversations.typing.top_level"))+"\n                ")]):t._e()])]},proxy:!0}])})],1)}),[],!1,null,"6b4278de",null);e.a=u.exports},867:function(t,e,n){"use strict";var i={props:{enterActiveClass:{type:String,default:""},leaveActiveClass:{type:String,default:""},hasNoSeparator:{type:Boolean,default:!1},hasHeightTransition:{type:Boolean,default:!1}},data:function(){return{hasSlotData:!1}},updated:function(){this.hasSlotData=this.$slots.default&&this.$slots.default.length>0},computed:{commonProps:function(){return{tag:"ol",class:{"vf3-conversations-list":!0,"vf3-conversations-list--empty":!this.hasSlotData,"vf3-conversations-list--no-separator":this.hasNoSeparator}}}},methods:{onEnter:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.$emit.apply(this,["enter"].concat(e))},onLeave:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.$emit.apply(this,["leave"].concat(e))}}},r=(n(766),n(45)),o=Object(r.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasHeightTransition?n("transition-group",t._b({attrs:{name:"fade-scale"}},"transition-group",t.commonProps,!1),[t._t("default")],2):n("transition-group",t._b({attrs:{"enter-active-class":t.enterActiveClass,"leave-active-class":t.leaveActiveClass},on:{enter:t.onEnter,leave:t.onLeave}},"transition-group",t.commonProps,!1),[t._t("default")],2)}),[],!1,null,null,null);e.a=o.exports},868:function(t,e,n){"use strict";n(46),n(11),n(8),n(7),n(4),n(22),n(39),n(42),n(17);var i=n(118),r=n(0),o=n(230),s=n(658),a=n(23);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={props:{contentContainerUuid:a.a.uuid.isRequired,threadUuid:a.a.uuid.isRequired,headerHeightPx:a.a.number,storeAction:a.a.string.isRequired,maximumContentLength:a.a.number.def(1/0),contentComponent:a.a.object.isRequired,isExpanded:a.a.bool,limit:a.a.number.isRequired,fetchRepliesAction:a.a.string.isRequired,fetchSelectedAction:a.a.string.isRequired,hasBorder:a.a.bool},data:function(){return{shouldBeExpanded:this.isExpanded}},inject:[o.e],computed:u(u(u({},Object(i.d)({threadByUuid:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Sc)]},threadOldContentCount:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Tc)]},threadRealtimeCount:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Vc)]},hasUnreadRepliesInThreadByCurrentUser:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Ib)]}})),Object(i.c)({contentByThreadUuid:r.R,mentionNotificationsByThreadUuid:r.dd})),{},{thread:function(){return this.threadByUuid(this.threadUuid)},subthreads:function(){return this.thread.visible_content},threadPalette:function(){return this.thread.thread_palette},oldReplyCount:function(){return this.threadOldContentCount(this.threadUuid)},oldMentionsInThread:function(){var t=this;return this.mentionNotificationsByThreadUuid(this.threadUuid).filter((function(e){var n=e.content_uuid;return!t.thread.visible_content.includes(n)&&!t.thread.realtime_content.includes(n)}))},oldMentionCount:function(){return this.oldMentionsInThread.length},realtimeCount:function(){return this.threadRealtimeCount(this.threadUuid)},hasUnreadRepliesByCurrentUser:function(){return this.hasUnreadRepliesInThreadByCurrentUser(this.threadUuid)}}),watch:{hasUnreadRepliesByCurrentUser:function(t){t&&!this.isExpanded&&(this.shouldBeExpanded=!0)}},components:{vfThread:s.a}},h=n(45),f=Object(h.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-thread",{attrs:{"thread-uuid":t.threadUuid,"old-reply-count":t.oldReplyCount,"realtime-count":t.realtimeCount,subthreads:t.subthreads,"thread-palette":t.threadPalette,"store-action":t.storeAction,"maximum-content-length":t.maximumContentLength,"is-expanded":t.isExpanded||t.shouldBeExpanded,"content-container-uuid":t.contentContainerUuid,limit:t.limit,"fetch-replies-action":t.fetchRepliesAction,"fetch-selected-action":t.fetchSelectedAction,"header-height-px":t.headerHeightPx,"old-mentions-in-thread":t.oldMentionsInThread,"has-border":t.hasBorder},scopedSlots:t._u([{key:"head",fn:function(e){return[n(t.contentComponent,{tag:"component",staticClass:"vf-thread__head",attrs:{"thread-uuid":t.threadUuid,"thread-palette":t.threadPalette,"location-in-thread":e.locationInThread}})]}},{key:"reply",fn:function(e){return[n(t.contentComponent,{tag:"component",staticClass:"vf-thread__reply",attrs:{"is-reply":"","thread-uuid":e.threadUuid,"location-in-thread":e.locationInThread,"thread-palette":t.threadPalette}})]}}])})}),[],!1,null,null,null);e.a=f.exports},869:function(t,e,n){"use strict";n(46),n(17),n(11),n(8),n(7),n(4),n(22),n(39),n(42);var i=n(3),r=n(0),o=n(118),s=n(230),a=n(6),c=n(114),u=n(106),l=n(115),d=n(520),h=n(23),f=n(81),p=n(117),b=n(301);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g={props:{widgetTag:h.a.string.isRequired,enabled:h.a.bool.def(!1),threadUuid:h.a.uuid.isRequired,index:h.a.number.isRequired,contentContainerType:h.a.string.isRequired,threadType:h.a.string.def("main_thread"),totalCount:h.a.number.def(0)},inject:[s.e],data:function(){return{adStatus:f.PENDING,isThresholdReached:!1,adProvider:null}},mounted:function(){this.loadSetting(),this.isPromoPlacement&&this.initializeLoadTracker()},computed:v(v(v({},Object(o.d)({isThreadPromoPlacement:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.ac)]}})),Object(o.c)({contentContainerUuidByContentUuid:r.W})),{},{contentContainerUuid:function(){return this.contentContainerUuidByContentUuid(this.threadUuid)},isPromoPlacement:function(){return this.enabled&&this.isThreadPromoPlacement(this.contentContainerUuid,this.threadUuid)},isReadyToLoad:function(){return this.isPromoPlacement&&this.isThresholdReached},adSettings:function(){return this.contentContainerType===u.e?{ad_integration:c.b[a.c.LIVEBLOG].ad_integration,site_ad_id:c.b[a.c.LIVEBLOG].site_ad_id,widget_tag:this.widgetTag}:{ad_integration:c.b[a.c.COMMENTS].ad_integration,site_ad_id:c.b[a.c.COMMENTS].site_ad_id,widget_tag:this.widgetTag}},eventPayload:function(){return{content_container_uuid:this.contentContainerUuid,content_container_type:this.contentContainerType,index:this.index,thread_type:this.threadType,widget:this.widgetTag,ad_setting:this.adSettings.ad_integration}},showAd:function(){return this.adStatus===f.SUCCESS},showLabelAd:function(){if(!this.adProvider)return null;var t=this.adProvider;return![p.a.TABOOLA,p.a.OUTBRAIN].includes(t)},adImplementationClass:function(){return this.adProvider?"vf-promo-".concat(this.adProvider):null}}),methods:v(v({},Object(o.b)({trackAdEvent:i.gd})),{},{loadSetting:function(){var t=this.$store.getters[r.Hc][this.adSettings.ad_integration];this.adProvider=t},initializeLoadTracker:function(){var t=this;Object(l.b)(this.$el,(function(t){return t.isIntersecting}),{rootMargin:"500px"}).then((function(){t.isThresholdReached=!0,t.eventPayload.scrollDepth=Object(b.a)(),t.trackAdEvent(v(v({},t.eventPayload),{},{event_type:"track_ad_load",total_count:t.totalCount})),t.initializeViewTracker()}))},initializeViewTracker:function(){var t=this;Object(l.b)(this.$el,(function(t){return t.isIntersecting}),{rootMargin:"-90px"}).then((function(){t.eventPayload.scrollDepth=Object(b.a)(),t.trackAdEvent(v(v({},t.eventPayload),{},{event_type:"track_ad_view",total_count:t.totalCount}))}))},onSuccess:function(){this.adStatus=f.SUCCESS},onError:function(){this.adStatus=f.ERROR}}),watch:{isPromoPlacement:function(){var t=this;this.isPromoPlacement&&this.$nextTick().then((function(){t.initializeLoadTracker()}))}},components:{adContainer:d.a}},y=(n(767),n(45)),O=Object(y.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isPromoPlacement?n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showAd,expression:"showAd"}],staticClass:"vf-promo",class:t.adImplementationClass},[t.showLabelAd?n("div",{staticClass:"vf-label vf-label-upper vf-promo__label"},[t._v("\n            "+t._s(t.$i18n("ads.advertisement"))+"\n        ")]):t._e(),t._v(" "),t.isReadyToLoad?n("ad-container",{attrs:{"unique-id":t.threadUuid,"ad-settings":t.adSettings},on:{success:t.onSuccess,error:t.onError}}):t._e()],1)]):t._e()}),[],!1,null,"10ea4c70",null);e.a=O.exports},870:function(t,e,n){"use strict";var i=n(574),r=n(492),o=n(230),s={props:{hasReason:{type:Boolean,default:!1}},inject:[o.a],components:{textTip:i.a,squareBadge:r.a}},a=(n(761),n(45)),c=Object(a.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("square-badge",{staticClass:"vf-disabled-badge",attrs:{palette:t.PALETTES.LIGHT_PRIMARY,"aria-label":t.$i18n("conversations.moderation.disabled_aria_label")}},[t._v("\n    "+t._s(t.$i18n("conversations.moderation.disabled_content"))+"\n    "),t.hasReason?[t._v("\n        \n        "),n("text-tip",{staticClass:"vf-disabled-badge__text-tip",attrs:{content:t.$i18n("conversations.moderation.disabled_reason"),positions:["right"]},scopedSlots:t._u([{key:"trigger",fn:function(){return[t._v("\n                "+t._s(t.$i18n("conversations.moderation.disabled_reason_trigger"))+"\n            ")]},proxy:!0}],null,!1,1315484605)})]:t._e()],2)}),[],!1,null,"7d3ba2a8",null);e.a=c.exports},871:function(t,e,n){"use strict";var i=n(492),r=n(230),o={props:{isGhost:{type:Boolean,required:!0}},inject:[r.a,r.b],components:{squareBadge:i.a}},s=n(45),a=Object(s.a)(o,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("square-badge",{staticClass:"vf-banned-badge",attrs:{palette:t.PALETTES.WARING,size:t.SIZES.SMALL}},[t._v("\n    "+t._s(t.$i18n("conversations.moderation.comment_status_banned"))+"\n    "),t.isGhost?[t._v("\n        \n    ")]:t._e()],2)}),[],!1,null,null,null);e.a=a.exports},872:function(t,e,n){"use strict";var i=n(573),r={props:{isNew:{type:Boolean,default:!1},palette:String},components:{unseenNotifier:i.a}},o=(n(763),n(45)),s=Object(o.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"fade"}},[this.isNew?e("unseen-notifier",{staticClass:"unseen-notifier",attrs:{palette:this.palette}}):this._e()],1)}),[],!1,null,"ebabf514",null);e.a=s.exports},873:function(t,e,n){"use strict";n(46),n(11),n(8),n(7),n(4),n(22),n(39),n(42),n(17),n(41);var i=n(0),r=n(118),o=n(14),s=n(133),a=n(866),c=n(876),u=n(551),l=n(874),d=n(676),h=n(561),f=n(675),p=n(1102),b=n(759),m=n(70),v=n(1088),_=n(497),g=n(1089),y=n(674),O=n(23),E=n(32);function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){S(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var j=[{key:_.a.EDIT,value:"conversations.actions.edit",icon:l.a,test:i.w},{key:_.a.REMOVE,value:"conversations.actions.remove_post",icon:d.a,test:i.y},{key:_.a.DISABLE,value:"conversations.actions.disable_post",icon:f.a,test:i.s},{key:_.a.ENABLE,value:"conversations.actions.enable_post",icon:h.a,test:i.v},{key:_.a.PIN,value:"conversations.actions.pin_post",icon:h.a,test:i.x},{key:_.a.UNPIN,value:"conversations.actions.unpin_post",icon:f.a,test:i.A}],A={props:{content:O.a.object.isRequired,isFlagEnabled:O.a.bool.def(!1),isSpamEnabled:O.a.bool.def(!0),isLiveComments:O.a.bool.def(!1),isEntered:O.a.bool.def(!1),isContentRemovalEnabled:O.a.bool.def(!1),isContentEditingEnabled:O.a.bool.def(!1),contentEditingDuration:O.a.number.def(0)},created:function(){this.isMobileOrTablet=s.e,this.ellipsisIcon=c.a,this.editorPickKey=_.a.TOGGLE_EDITORS_PICK},data:function(){return{isDropdownToggled:!1}},computed:T(T({},Object(r.c)({currentUser:i.ib,siteSettings:i.Hc,getUserByUuid:i.id,canModifyContent:i.w,currentTime:i.hb})),{},{contentActor:function(){return this.getUserByUuid(this.content.actor_uuid)},canCurrentUserModerate:function(){return Object(o.n)(this.currentUser)},isContentTopLevel:function(){return this.content.parent_uuid===this.content.content_container_uuid},isContentEditable:function(){var t=this.content,e=t.content_uuid,n=t.date_created;return this.isContentEditingEnabled&&this.canModifyContent(e)&&(this.contentEditingDuration===1/0||this.currentTime-n<this.contentEditingDuration)},actions:function(){var t=this,e=this.isLiveComments?[{key:this.canCurrentUserModerate?_.a.TOGGLE_FLAG:_.a.FLAG,value:this.flagText,icon:u.a,test:Boolean(s.e&&this.isFlagEnabled&&Object(o.f)(this.currentUser,this.siteSettings,this.contentActor)),disabled:Boolean(!this.canCurrentUserModerate&&this.isFlagged)},{key:_.a.EDIT,value:"conversations.actions.edit",test:Boolean(this.isContentEditable),buttonClass:"vf-secondary-actions__edit",component:v.a,componentProps:{endTime:this.content.date_created+this.contentEditingDuration,secondsRemainingToShowCountdown:this.contentEditingDuration===1/0?0:300}},{key:_.a.REMOVE,value:this.removeText,icon:d.a,test:Boolean(this.$store.getters[i.y](this.content.content_uuid)&&this.isContentRemovalEnabled),className:"vf-secondary-actions__remove"},{key:_.a.TOGGLE_SPAM,value:this.spamText,icon:p.a,test:this.canCurrentUserModerate&&this.isSpamEnabled,buttonClass:"vf-secondary-actions__spam"},{key:_.a.TOGGLE_EDITORS_PICK,test:this.canCurrentUserModerate},{key:_.a.TOGGLE_DISABLE,value:this.disableText,icon:this.disableIcon,test:this.canCurrentUserModerate&&!this.isDeleted,buttonClass:"vf-secondary-actions__disable"},{key:_.a.TOGGLE_PIN,value:this.pinText,icon:b.a,test:this.canCurrentUserModerate&&this.isContentTopLevel,buttonClass:"vf-secondary-actions__pin"},{key:_.a.CONSOLE_URL,test:this.canCurrentUserModerate,component:y.a,componentProps:{url:this.buildConsoleShareLink(),copyText:this.$i18n("conversations.actions.copy_console_url"),copiedText:this.$i18n("conversations.actions.copied")}}]:j;return e.filter((function(e){var n=e.test;return t.test(n)})).map((function(e){return t.transformAction(e)}))},hasActions:function(){return this.actions.length>0},isFlagged:function(){return this.content.actions.includes(_.a.FLAG)},isSpam:function(){return this.content.state_reasons.includes(m.d.CONTENT_MARKED_AS_SPAM)},isDisabled:function(){return this.content.state_reasons.includes(m.d.CONTENT_DISABLED)},isDeleted:function(){return this.content.state_reasons.includes(m.d.CONTENT_DELETED)},flagText:function(){return this.canCurrentUserModerate?this.isFlagged?"conversations.actions.unflag":"conversations.posts.flag.verb":this.isFlagged?"conversations.posts.flag.past":"conversations.posts.flag.verb"},spamText:function(){return this.isSpam?"conversations.actions.unspam":"conversations.actions.mark_as_spam"},disableText:function(){return this.isDisabled?"conversations.actions.enable":"conversations.actions.disable"},removeText:function(){return this.isLiveComments?"conversations.actions.remove_comment":"conversations.actions.remove_post"},pinText:function(){return this.content.is_pinned?"conversations.actions.unpin":"conversations.actions.pin"},disableIcon:function(){return this.isDisabled?h.a:f.a}}),methods:{buildConsoleShareLink:function(){var t=E.a.console_url||"https://console.viafoura.co";return"".concat(t,'/moderation/quick_search?filters=[\n                {"field":"content_id","operator":"equals","values":["').concat(this.content.content_uuid,'"]},\n                {"field":"service","operator":"equals","values":["livecomment"]}\n            ]')},transformAction:function(t){return T(T({},t),{},{value:t.value?this.$i18n(t.value):"",class:"vf-".concat(t.key,"-content")})},test:function(t){return"boolean"!=typeof t?this.$store.getters[t](this.content.content_uuid):t},setIsDropdownToggled:function(t){this.isDropdownToggled=t}},components:{iconDropdown:a.a,editorPickButton:g.a}},w=(n(760),n(45)),P=Object(w.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasActions?n("icon-dropdown",{staticClass:"vf-secondary-actions",class:{"vf-secondary-actions--entered":t.isEntered||t.isMobileOrTablet||t.isDropdownToggled},attrs:{positions:["bottom-left"],items:t.actions,icon:t.ellipsisIcon,"aria-label":t.$i18n("conversations.actions.button_aria"),"hide-on-mouseleave":""},on:{toggled:t.setIsDropdownToggled,"list-item-clicked":function(e){return t.$emit(e.key)}},scopedSlots:t._u([{key:t.editorPickKey,fn:function(){return[n("editor-pick-button",{staticClass:"vf-secondary-actions__editors-pick",attrs:{"is-picked":t.content.is_picked},on:{click:function(e){return t.$emit(t.editorPickKey)}}})]},proxy:!0}],null,!0)}):t._e()}),[],!1,null,"fbe44a4c",null);e.a=P.exports},877:function(t,e,n){"use strict";n(46),n(17),n(8),n(7),n(22),n(29),n(24),n(4),n(31),n(16),n(25),n(30),n(11);var i=n(492),r=n(296);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var l={functional:!0,render:function(t,e){var n=e.data,o=e.parent;return t(i.a,{class:["vf-pending-badge",n.staticClass].concat(c(n.class||[])),props:{palette:r.a.WARNING,ariaLabel:o.$i18n("conversations.moderation.awaiting_moderation_aria_label")},attrs:s({},n.attrs||[])},[o.$i18n("conversations.moderation.awaiting_moderation")])}},d=n(45),h=Object(d.a)(l,void 0,void 0,!1,null,null,null);e.a=h.exports},878:function(t,e,n){"use strict";n(46),n(17),n(8),n(7),n(22),n(29),n(24),n(4),n(31),n(16),n(25),n(30),n(11);var i=n(492);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var u={functional:!0,render:function(t,e){var n=e.data,r=e.parent;return t(i.a,{class:["vf-muted-badge",n.staticClass].concat(a(n.class||[])),props:{disabled:!0,ariaLabel:r.$i18n("conversations.posts.muted_aria_label")},attrs:o({},n.attrs||[])},[r.$i18n("conversations.posts.muted")])}},l=n(45),d=Object(l.a)(u,void 0,void 0,!1,null,null,null);e.a=d.exports},879:function(t,e,n){"use strict";n(46),n(17),n(8),n(7),n(22),n(29),n(24),n(4),n(31),n(16),n(25),n(30),n(11);var i=n(492);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var u={functional:!0,render:function(t,e){var n=e.data,r=e.parent;return t(i.a,{class:["vf-deleted-badge",n.staticClass].concat(a(n.class||[])),props:{disabled:!0,ariaLabel:r.$i18n("conversations.posts.deleted_aria_label")},attrs:o({},n.attrs||[])},[r.$i18n("conversations.posts.deleted")])}},l=n(45),d=Object(l.a)(u,void 0,void 0,!1,null,null,null);e.a=d.exports},880:function(t,e,n){"use strict";n(46),n(17),n(8),n(7),n(22),n(29),n(24),n(4),n(31),n(16),n(25),n(30),n(11);var i=n(492),r=n(297);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var l={functional:!0,render:function(t,e){var n=e.data,o=e.parent;return t(i.a,{class:["vf-edited-badge",n.staticClass].concat(c(n.class||[])),props:{disabled:!0,size:r.a.SMALL,ariaLabel:o.$i18n("conversations.posts.edited_aria_label")},attrs:s({},n.attrs||[])},[o.$i18n("conversations.posts.edited")])}},d=n(45),h=Object(d.a)(l,void 0,void 0,!1,null,null,null);e.a=h.exports},881:function(t,e,n){"use strict";n(54);var i=2;function r(t,e){return t<.5?function(t,e){return Math.pow(t,e)}(2*t,e)/2:function(t,e){return 1-Math.abs(Math.pow(t-1,e))}(2*t-1,e)/2+.5}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return n*r(t/o,i)+e}n.d(e,"a",(function(){return a}));var s={duration:1e3,isVertical:!1,cb:function(){}};function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object.assign({},s,n),r=i.isVertical,a=i.duration,c=i.cb,u=r?"scrollTop":"scrollLeft",l=t[u],d=e-l,h=20,f=0,p=function e(){f+=h,t[u]=o(f,l,d,a),f<a?setTimeout(e,h):c()};setTimeout(p,h)}},979:function(t,e,n){},980:function(t,e,n){},981:function(t,e,n){},982:function(t,e,n){},983:function(t,e,n){},984:function(t,e,n){},985:function(t,e,n){},986:function(t,e,n){},987:function(t,e,n){},988:function(t,e,n){}}]);
//# sourceMappingURL=comments_js.2f73864635c14cae5f3a.js.map