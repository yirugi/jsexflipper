(window._vfP=window._vfP||[]).push([[143],{1e3:function(t,e,n){},1001:function(t,e,n){},1002:function(t,e,n){},1305:function(t,e,n){"use strict";n(994)},1306:function(t,e,n){"use strict";n(995)},1310:function(t,e,n){"use strict";n(1e3)},1311:function(t,e,n){"use strict";n(1001)},1312:function(t,e,n){"use strict";n(1002)},1607:function(t,e,n){"use strict";n.r(e);n(30),n(11),n(16),n(25),n(29),n(24),n(31),n(148),n(8),n(7),n(4),n(80);var i=n(0),r=n(3),a=n(202),s=n(230),c=n(69),o=n(117),d=n(6),u=n(53),l=n(706),g=n(682),f=n(182),h=n(304),v=n(23),_=n(487),m=n(543),b=n(115),p=n(114),S=n(520),y=n(81),E=n(301),A={props:{widgetTag:v.a.string.isRequired,containerId:v.a.string,uniqueId:v.a.string.isRequired,index:v.a.number.isRequired,enabled:v.a.bool.def(!0)},data:function(){return{isThresholdReached:!1,adSettings:{ad_integration:p.b[this.widgetTag].ad_integration,site_ad_id:p.b[this.widgetTag].site_ad_id,widget_tag:this.widgetTag},adStatus:y.PENDING,adProvider:null}},mounted:function(){this.loadSetting(),this.isPromoPlacement&&this.initializeLoadTracker()},computed:{eventPayload:function(){return{widget:d.c.CONTENT_RECIRCULATION,adData:{index:this.index,container_id:this.containerId}}},isPromoPlacement:function(){return this.enabled},isReadyToLoad:function(){return this.isPromoPlacement&&this.isThresholdReached},showAd:function(){return this.adStatus===y.SUCCESS},adImplementationClass:function(){return this.adProvider?"vf-promo-".concat(this.adProvider):null}},methods:{initializeLoadTracker:function(){var t=this;Object(b.b)(this.$el,(function(t){return t.isIntersecting}),{rootMargin:"500px"}).then((function(){t.isThresholdReached=!0,t.trackAdEvent("track_ad_load"),t.initializeViewTracker()}))},initializeViewTracker:function(){var t=this;Object(b.b)(this.$el,(function(t){return t.isIntersecting}),{rootMargin:"-90px"}).then((function(){t.trackAdEvent("track_ad_view")}))},trackAdEvent:function(t){var e=this.eventPayload;e.adData=e.adData||{},e.adData.scrollDepth=Object(E.a)(),this.$publish("analytics",t,e)},onSuccess:function(){this.adStatus=y.SUCCESS},onError:function(){this.adStatus=y.ERROR},loadSetting:function(){var t=this.$store.getters[i.Hc][this.adSettings.ad_integration];this.adProvider=t}},watch:{isPromoPlacement:{handler:function(){this.isPromoPlacement&&this.initializeLoadTracker()}}},components:{adContainer:S.a}},O=(n(1305),n(45)),T=Object(O.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showAd,expression:"showAd"}],staticClass:"vf-promo",class:t.adImplementationClass},[n("div",{staticClass:"vf-label vf-label-upper vf-promo__label"},[t._v("\n            "+t._s(t.$i18n("ads.advertisement"))+"\n        ")]),t._v(" "),t.isReadyToLoad?n("ad-container",{attrs:{"unique-id":t.uniqueId,"ad-settings":t.adSettings},on:{success:t.onSuccess,error:t.onError}}):t._e()],1)])}),[],!1,null,"a83ad00c",null).exports,R=n(1091),I=n(1092),C=n(941),w={props:{text:v.a.string},inject:[s.b],components:{announceLayout:R.a,paddedContainer:I.a,vfNoDataIcon:C.a}},P=(n(1306),Object(O.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("padded-container",{staticClass:"vf-trending-articles-announce"},[n("announce-layout",{attrs:{size:t.SIZES.SMALL,subtitle:t.text},scopedSlots:t._u([{key:"header",fn:function(){return[t._t("header",[n("div",{staticClass:"vf-trending-articles-announce__status"},[n("vf-no-data-icon",{staticClass:"vf-trending-articles-announce__status-icon"})],1)])]},proxy:!0},{key:"footer",fn:function(){return[t._t("default")]},proxy:!0}],null,!0)})],1)}),[],!1,null,"5f2715d9",null).exports),j=n(996),N=n(997),k=n(998),L=n(558),x=n(1096),D=n(697),M={props:{trendingArticle:v.a.shape(j.a).isRequired.loose,view:v.a.oneOf(Object.values(u.g)).isRequired,hasImage:v.a.bool.def(!0),isReversed:v.a.bool.def(!1),trackingMedium:v.a.oneOf(Object.values(a)).def(a.STANDALONE_TOP_PAGES_MEDIUM)},inject:[s.b],data:function(){return{isImageInvalid:!1}},computed:{trendingArticleClasses:function(){return["vf-trending-article",{"vf-trending-article--condensed":this.isCondensed}]},trendingArticleTag:function(){return null!==this.url?"a":"div"},trendingArticleAttrs:function(){var t={};return"a"===this.trendingArticleTag&&(t.href=this.url),t},trendingArticleA11yLabel:function(){return this.$i18n("trending_articles.trending_article.comments.a11y_label",{title:this.trendingArticle.origin_title,count:this.trendingArticle.total_visible_contents})},size:function(){switch(this.view){case u.g.CONDENSED:return this.SIZES.SMALL;case u.g.LIST:case u.g.FULL:default:return this.SIZES.MEDIUM}},isImageEmpty:function(){return!this.trendingArticle.origin_image_url},count:function(){return this.trendingArticle.total_visible_contents},countText:function(){return this.$i18n("trending_articles.count.comments",{count:this.count})},url:function(){var t='The URL "'.concat(this.trendingArticle.origin_url,'" is invalid, please update the og:url on the article page to be a valid URL');return Object(N.a)(this.trendingArticle.origin_url,this.trackingMedium,t)},isCondensed:function(){return this.view===u.g.CONDENSED}},methods:{handleImageError:function(){this.isImageInvalid=!0}},components:{contentBadge:L.a,vfTrendingIcon:k.a,itemLayout:x.a,commentIcon:D.a}},q=(n(1310),Object(O.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.trendingArticleTag,t._b({tag:"component",class:t.trendingArticleClasses},"component",t.trendingArticleAttrs,!1),[n("p",{staticClass:"vf-trending-article__a11y-label vf-offscreen-text"},[t._v("\n        "+t._s(t.trendingArticleA11yLabel)+"\n    ")]),t._v(" "),n("item-layout",{staticClass:"vf-trending-article__layout",attrs:{"aria-hidden":"true","collapse-height":"",title:t.trendingArticle.origin_title,size:t.size,"is-reversed":t.isReversed,"has-image":t.hasImage,image:{src:t.trendingArticle.origin_image_url,alt:t.trendingArticle.origin_image_alt||t.$i18n("trending_articles.visual.image_alt_text")}},on:{"img-error":t.handleImageError},scopedSlots:t._u([t.isCondensed?{key:"image",fn:function(e){var i=e.classes;return[n("div",{class:["vf-trending-article__content-badge",i.base]},[n("content-badge",{attrs:{count:t.count,"a11y-label":t.countText}})],1)]}}:t.isImageEmpty||t.isImageInvalid?{key:"image",fn:function(t){var e=t.classes;return[n("div",{class:["vf-trending-article__trending-icon-wrapper",e.base]},[n("vf-trending-icon",{staticClass:"vf-trending-article__trending-icon"})],1)]}}:null,t.isCondensed?null:{key:"additional-details",fn:function(e){var i=e.classes;return[n("p",{staticClass:"vf-trending-article__comment-count",class:Object.values(i)},[n("comment-icon",{staticClass:"vf-trending-article__comment-icon",attrs:{count:t.count}}),t._v("\n                "+t._s(t.count)+"\n            ")],1)]}}],null,!0)})],1)}),[],!1,null,"53bb8590",null).exports),$={props:{trendingArticles:v.a.array.isRequired,view:v.a.oneOf(Object.values(u.g)).isRequired,isThumbnailEnabled:v.a.bool.isRequired,thumbnailPosition:v.a.oneOf(Object.values(u.e)).isRequired,trackingMedium:v.a.oneOf(Object.values(a)).def(a.STANDALONE_TOP_PAGES_MEDIUM)},computed:{trendingArticlesClasses:function(){return["vf-trending-articles-list",{"vf-trending-articles-list--condensed":this.isCondensed,"vf-trending-articles-list--list":this.isList}]},isCondensed:function(){return this.view===u.g.CONDENSED},isList:function(){return this.view===u.g.LIST},isReversed:function(){return this.isCondensed||this.thumbnailPosition===u.e.RIGHT},validatedTrackingMedium:function(){return this.isCondensed&&this.trackingMedium===a.STANDALONE_TOP_PAGES_MEDIUM?a.STANDALONE_TOP_PAGES_CONDENSED_MEDIUM:this.trackingMedium}},components:{trendingArticle:q}},U=(n(1311),Object(O.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{class:t.trendingArticlesClasses},t._l(t.trendingArticles,(function(e){return n("li",{key:e.content_container_uuid,staticClass:"vf-trending-article-list__item"},[n("trending-article",{attrs:{"trending-article":e,view:t.view,"is-reversed":t.isReversed,"has-image":t.isThumbnailEnabled,"tracking-medium":t.validatedTrackingMedium}})],1)})),0)}),[],!1,null,"2b8821ed",null).exports);function z(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var G={props:{containerId:v.a.string,sectionUuid:v.a.uuid.isRequired,limit:v.a.number.isRequired,daysPublished:v.a.number.isRequired,trendWindow:v.a.number.isRequired,sort:v.a.oneOf(Object.values(u.c)).isRequired,view:v.a.oneOf(Object.values(u.g)).isRequired,isThumbnailEnabled:v.a.bool.isRequired,thumbnailPosition:v.a.oneOf(Object.values(u.e)).isRequired,title:v.a.string,trackingMedium:v.a.oneOf(Object.values(a)).def(a.STANDALONE_TOP_PAGES_MEDIUM),isHiddenOnEmpty:v.a.bool.def(!1),isContentRecirculationWidget:v.a.bool.def(!1),dataVfId:v.a.string.isRequired},inject:[s.a,s.b,s.c],data:function(){return{trendingArticlesBaseWithActivity:Object(h.a)(U,d.c.TRENDING_ARTICLES,this.dataVfId,50,50,this.containerId),trendingId:null,breakLine:!1,source:null}},created:function(){this.statusKey=Object(f.a)(),this.fetchTrendingContent(),this.widgetTag=d.c.CONTENT_RECIRCULATION},computed:{status:function(){return this.$store.getters[i.zb](this.statusKey,l.a)},trendingArticles:function(){var t=this.$store.getters[i.Bb](this.trendingId);return t&&t.trending||null},sortedBy:function(){switch(this.sort){case u.c.COMMENTS:default:return"total_visible_contents"}},isEmpty:function(){return null!==this.trendingArticles&&0===this.trendingArticles.length},areAdsEnabled:function(){return this.$store.getters[i.Hc][c.a]!==o.a.NONE},a11yHeaderText:function(){return 0===this.daysPublished?this.$i18n("trending_articles.header.a11y_label.comments.all_time"):this.$i18n("trending_articles.header.a11y_label.comments.num_days",{days:this.daysPublished})},isVisible:function(){return!this.isEmpty||!this.isHiddenOnEmpty}},methods:{fetchTrendingContent:function(){var t=this,e=this.isContentRecirculationWidget?g.b:g.a;this.$store.dispatch(r.yb,{section_uuid:this.sectionUuid,limit:this.limit,content_container_window_days:this.daysPublished||void 0,content_window_hours:this.trendWindow,sorted_by:this.sortedBy,status_key:this.statusKey,ignore_container_id:this.containerId,source:e}).then((function(e){var n=e.trending_id,i=e.source;t.trendingId=n,t.source=i,t.createObserverWrapperSize()}))},handleReload:function(){this.fetchTrendingContent()},createObserverWrapperSize:function(){this.isContentRecirculationWidget&&this.areAdsEnabled&&this.status!==this.STATUSES.ERROR&&new ResizeObserver(this.callbackWrapperSize).observe(this.$refs.trendingArticleWrapper)},callbackWrapperSize:function(t){var e,n=z(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.breakLine=i.target.clientWidth<u.h}}catch(t){n.e(t)}finally{n.f()}}},components:{spinningLoader:m.a,adContainerTrendingArticles:T,trendingArticlesAnnounce:P,trendingArticles:U,vfButton:_.a,contentRecirculation:function(){return Promise.all([n.e(0),n.e(144),n.e(35)]).then(n.bind(null,1610))}}},B=(n(1312),Object(O.a)(G,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isVisible?n("div",{staticClass:"vf-trending-articles"},[n("h2",{staticClass:"vf-trending-articles__header vf-subheading-text"},[t._v("\n        "+t._s(t.title||t.$i18n("trending_articles.header.heading"))+"\n    ")]),t._v(" "),n("p",{staticClass:"vf-trending-articles__a11y-header vf-offscreen-text"},[t._v("\n        "+t._s(t.a11yHeaderText)+"\n    ")]),t._v(" "),n("div",{ref:"trendingArticleWrapper",staticClass:"vf-trending-articles__content-wrapper"},[n("div",{staticClass:"vf-trending-articles-row",class:{"vf-trending-articles-row-break-line":t.breakLine,"vf-trending-articles-row__justify-center":t.status===t.STATUSES.ERROR||t.status===t.STATUSES.PENDING,"vf-trending-articles-row__align-center":t.status===t.STATUSES.ERROR||t.status===t.STATUSES.PENDING||t.isEmpty}},[t.isContentRecirculationWidget&&t.areAdsEnabled&&t.status!==t.STATUSES.ERROR?n("ad-container-trending-articles",{staticClass:"vf3-conversations-list__promo vf-trending-articles-ad content-recirculation-ad",attrs:{"container-id":t.containerId,"unique-id":""+t._uid,index:0,"widget-tag":t.widgetTag}}):t._e(),t._v(" "),n("transition",{attrs:{name:"fade",mode:"out-in"}},[t.status===t.STATUSES.ERROR?n("trending-articles-announce",{staticClass:"vf-trending-articles--error"},[n("span",[t._v("\n                        "+t._s(t.$i18n("trending_articles.states.error.text"))+" —\n                        "),n("vf-button",{staticClass:"vf-trending-articles__error-action",attrs:{"is-link":"",palette:t.PALETTES.ACCENT,size:t.SIZES.INLINE},nativeOn:{click:function(e){return t.handleReload(e)}}},[t._v("\n                            "+t._s(t.$i18n("trending_articles.states.error.action"))+"\n                        ")])],1)]):t.status===t.STATUSES.PENDING?n("trending-articles-announce",{staticClass:"vf-trending-articles--loading",attrs:{text:t.$i18n("trending_articles.states.loading")},scopedSlots:t._u([{key:"header",fn:function(){return[n("spinning-loader",{attrs:{size:t.SIZES.MEDIUM}})]},proxy:!0}],null,!1,1394825101)}):t.isEmpty?n("trending-articles-announce",{staticClass:"vf-trending-articles--empty",attrs:{text:t.$i18n("trending_articles.states.empty")}}):t.isContentRecirculationWidget?n("content-recirculation",{attrs:{"trending-articles":t.trendingArticles,"tracking-medium":t.trackingMedium,"container-id":t.containerId,source:t.source,"data-vf-id":t.dataVfId}}):n(t.trendingArticlesBaseWithActivity,{tag:"component",attrs:{"trending-articles":t.trendingArticles,view:t.view,"is-thumbnail-enabled":t.isThumbnailEnabled,"thumbnail-position":t.thumbnailPosition,"tracking-medium":t.trackingMedium,"data-vf-id":t.dataVfId,"container-id":t.containerId}})],1)],1)])]):t._e()}),[],!1,null,"54bb75b5",null));e.default=B.exports},520:function(t,e,n){"use strict";n(46),n(17),n(11),n(8),n(7),n(4),n(22);var i=n(118),r=n(0),a=n(23),s=n(180),c=n(81);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={props:{uniqueId:a.a.string.isRequired,adSettings:a.a.object.isRequired},mounted:function(){var t=this;this.adService=Object(s.d)(this.adSettings,this.adIntegration),this.adService.loadScript(this.siteAdId).then((function(){t.adService.generateAd(t.slotId).then((function(){t.$emit(c.SUCCESS)})).catch((function(){t.$emit(c.ERROR)}))})).catch((function(){t.$emit(c.ERROR)}))},computed:d(d({},Object(i.c)({siteSettings:r.Hc})),{},{adIntegration:function(){return this.siteSettings[this.adSettings.ad_integration]},siteAdId:function(){return this.siteSettings[this.adSettings.site_ad_id]},slotId:function(){return"vf-promo-".concat(this.uniqueId)}}),beforeDestroy:function(){this.adService.adCleanup(this.slotId)}},g=n(45),f=Object(g.a)(l,(function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:this.slotId}})}),[],!1,null,null,null);e.a=f.exports},533:function(t,e,n){},558:function(t,e,n){"use strict";n(87);var i={props:{count:{type:Number,required:!0},a11yLabel:{type:String,required:!0},hasRealtime:{type:Boolean,default:!1},hasMentions:{type:Boolean,default:!1},isTyping:{type:Boolean,default:!1}},computed:{classes:function(){return{"remaining-content--accent":this.hasRealtime,"remaining-content--mention":this.hasMentions}},formattedCount:function(){return this.count>99?"99+":this.count}}},r=(n(612),n(45)),a=Object(r.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticClass:"vf-icon remaining-content",class:this.classes,attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 25 25"}},[e("path",{attrs:{d:"M.5 23.793V2A1.5 1.5 0 0 1 2 .5h21A1.5 1.5 0 0 1 24.5 2v17a1.5 1.5 0 0 1-1.5 1.5H3.793L.5 23.793z"}}),this._v(" "),e("transition",{attrs:{name:"fade",mode:"out-in"}},[this.isTyping?e("g",this._l([6.25,12.5,18.75],(function(t){return e("circle",{key:t,staticClass:"remaining-content__loader-circle",attrs:{cx:t,cy:"10.5",r:"1.5"}})})),0):e("text",{staticClass:"remaining-content__count",attrs:{"aria-hidden":"true",y:"15",x:"12.5","text-anchor":"middle"}},[this._v("\n            "+this._s(this.formattedCount)+"\n        ")])])],1)}),[],!1,null,"640238ce",null);e.a=a.exports},612:function(t,e,n){"use strict";n(533)},682:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r}));var i="recommender",r="livecomments"},706:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i="TRENDING_ARTICLES"},994:function(t,e,n){},995:function(t,e,n){},996:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(23),r={origin_title:i.a.string.isRequired,total_visible_contents:i.a.number.isRequired,origin_image_url:i.a.string,origin_url:i.a.string.isRequired}},997:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'The URL "'.concat(t,'" is invalid');try{var i=new URL(t);return i.searchParams.append("__vfz","medium=".concat(e)),i.href}catch(t){return console.error(n),null}}}}]);
//# sourceMappingURL=trending_articles_js.69d86ef05441eea58038.js.map